<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Policies</title>

    <link rel="alternate" href="https://campusempresa.com/kubernetes/network-policies" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/kubernetes/network-policies" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/kubernetes/network-policies" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/kubernetes/network-policies" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/kubernetes/network-policies" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='ingress-controllers'>&#x25C4;Ingress Controllers</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Network Policies</a>
	</div>
	<div class='col-4 text-end'>
					<a href='persistent-volumes-and-persistent-volume-claims'>Persistent Volumes and Persistent Volume Claims &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Network Policies</h1>
<div class='content'><p>Network Policies in Kubernetes are used to control the traffic flow between pods. They allow you to specify how groups of pods are allowed to communicate with each other and other network endpoints. This is crucial for securing your applications and ensuring that only authorized traffic is allowed.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Pod Selector</strong>: Defines which pods the policy applies to.</li>
<li><strong>Ingress Rules</strong>: Controls incoming traffic to the selected pods.</li>
<li><strong>Egress Rules</strong>: Controls outgoing traffic from the selected pods.</li>
<li><strong>Namespaces</strong>: Network Policies are namespace-scoped, meaning they only apply within the same namespace.</li>
</ul>
</div><h1>Creating a Basic Network Policy</h1>
<div class='content'><p>To create a Network Policy, you need to define a YAML file that specifies the policy's rules. Here is a basic example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogbmV0d29ya2luZy5rOHMuaW8vdjEKa2luZDogTmV0d29ya1BvbGljeQptZXRhZGF0YToKICBuYW1lOiBhbGxvdy1pbmdyZXNzCiAgbmFtZXNwYWNlOiBkZWZhdWx0CnNwZWM6CiAgcG9kU2VsZWN0b3I6CiAgICBtYXRjaExhYmVsczoKICAgICAgcm9sZTogZGIKICBwb2xpY3lUeXBlczoKICAtIEluZ3Jlc3MKICBpbmdyZXNzOgogIC0gZnJvbToKICAgIC0gcG9kU2VsZWN0b3I6CiAgICAgICAgbWF0Y2hMYWJlbHM6CiAgICAgICAgICByb2xlOiBmcm9udGVuZA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-ingress
  namespace: default
spec:
  podSelector:
    matchLabels:
      role: db
  policyTypes:
  - Ingress
  ingress:
  - from:
    - podSelector:
        matchLabels:
          role: frontend</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>apiVersion</strong>: Specifies the API version.</li>
<li><strong>kind</strong>: Defines the type of resource, which is <code>NetworkPolicy</code>.</li>
<li><strong>metadata</strong>: Contains the name and namespace of the policy.</li>
<li><strong>spec</strong>: Defines the policy's specifications.
<ul>
<li><strong>podSelector</strong>: Selects pods with the label <code>role: db</code>.</li>
<li><strong>policyTypes</strong>: Specifies that this policy applies to ingress traffic.</li>
<li><strong>ingress</strong>: Defines the ingress rules.
<ul>
<li><strong>from</strong>: Specifies that traffic is allowed from pods with the label <code>role: frontend</code>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</div><h1>Advanced Network Policies</h1>
<div class='content'><p>Advanced Network Policies can include both ingress and egress rules, and can be more specific about the allowed traffic.</p>
</div><h2>Example: Ingress and Egress Policy</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogbmV0d29ya2luZy5rOHMuaW8vdjEKa2luZDogTmV0d29ya1BvbGljeQptZXRhZGF0YToKICBuYW1lOiBhbGxvdy1pbmdyZXNzLWVncmVzcwogIG5hbWVzcGFjZTogZGVmYXVsdApzcGVjOgogIHBvZFNlbGVjdG9yOgogICAgbWF0Y2hMYWJlbHM6CiAgICAgIHJvbGU6IGJhY2tlbmQKICBwb2xpY3lUeXBlczoKICAtIEluZ3Jlc3MKICAtIEVncmVzcwogIGluZ3Jlc3M6CiAgLSBmcm9tOgogICAgLSBwb2RTZWxlY3RvcjoKICAgICAgICBtYXRjaExhYmVsczoKICAgICAgICAgIHJvbGU6IGZyb250ZW5kCiAgZWdyZXNzOgogIC0gdG86CiAgICAtIHBvZFNlbGVjdG9yOgogICAgICAgIG1hdGNoTGFiZWxzOgogICAgICAgICAgcm9sZTogZGI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-ingress-egress
  namespace: default
spec:
  podSelector:
    matchLabels:
      role: backend
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - podSelector:
        matchLabels:
          role: frontend
  egress:
  - to:
    - podSelector:
        matchLabels:
          role: db</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>policyTypes</strong>: Includes both <code>Ingress</code> and <code>Egress</code>.</li>
<li><strong>ingress</strong>: Allows traffic from pods with the label <code>role: frontend</code>.</li>
<li><strong>egress</strong>: Allows traffic to pods with the label <code>role: db</code>.</li>
</ul>
</div><h1>Common Use Cases</h1>
<div class='content'><ul>
<li><strong>Isolating Sensitive Pods</strong>: Ensure that only specific pods can communicate with sensitive pods like databases.</li>
<li><strong>Restricting External Access</strong>: Prevent pods from accessing external networks unless explicitly allowed.</li>
<li><strong>Microservices Communication</strong>: Control which microservices can communicate with each other.</li>
</ul>
</div><h1>Troubleshooting Network Policies</h1>
<div class='content'><ul>
<li><strong>Policy Not Applied</strong>: Ensure that the policy is in the correct namespace and the podSelector matches the intended pods.</li>
<li><strong>Unexpected Traffic Blocked</strong>: Check the policy rules and ensure that all necessary ingress and egress rules are defined.</li>
<li><strong>Namespace Isolation</strong>: Remember that Network Policies are namespace-scoped. Policies in one namespace do not affect pods in another namespace.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Network Policies are a powerful tool for securing your Kubernetes clusters by controlling the traffic flow between pods. By understanding and implementing Network Policies, you can ensure that your applications are secure and only authorized traffic is allowed. Start with basic policies and gradually move to more advanced configurations as your needs grow.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='ingress-controllers'>&#x25C4;Ingress Controllers</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Network Policies</a>
	</div>
	<div class='col-4 text-end'>
					<a href='persistent-volumes-and-persistent-volume-claims'>Persistent Volumes and Persistent Volume Claims &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
