<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>High Availability in Kubernetes</title>

    <link rel="alternate" href="https://campusempresa.com/kubernetes/high-availability" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/kubernetes/high-availability" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/kubernetes/high-availability" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/kubernetes/high-availability" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/kubernetes/high-availability" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='best-practices-for-production'>&#x25C4;Best Practices for Production</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">High Availability in Kubernetes</a>
	</div>
	<div class='col-4 text-end'>
					<a href='disaster-recovery'>Disaster Recovery &#x25BA;</a>
			</div>
</div>
<div class='content'><p>High Availability (HA) is a crucial aspect of any production-grade Kubernetes cluster. It ensures that your applications and services remain available even in the face of failures. This topic will cover the fundamentals of HA in Kubernetes, including key concepts, architecture, and practical examples.</p>
</div><h1>Key Concepts of High Availability</h1>
<div class='content'><ul>
<li><strong>Redundancy</strong>: Having multiple instances of critical components to avoid single points of failure.</li>
<li><strong>Failover</strong>: The process of switching to a redundant or standby system upon the failure of the primary system.</li>
<li><strong>Load Balancing</strong>: Distributing network or application traffic across multiple servers to ensure no single server becomes a bottleneck.</li>
<li><strong>Replication</strong>: Keeping multiple copies of data to ensure availability and reliability.</li>
</ul>
</div><h1>High Availability Architecture in Kubernetes</h1>
<div class='content'></div><h2>Master Node High Availability</h2>
<div class='content'><p>The Kubernetes master node is responsible for managing the cluster. Ensuring its high availability involves:</p>
<ul>
<li><strong>Multiple Master Nodes</strong>: Deploying multiple master nodes to avoid a single point of failure.</li>
<li><strong>Etcd Clustering</strong>: Using an etcd cluster to store the state of the cluster reliably.</li>
<li><strong>Load Balancer</strong>: Placing a load balancer in front of the master nodes to distribute requests.</li>
</ul>
<h4>Example: Setting Up Multiple Master Nodes</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogdjEKa2luZDogUG9kCm1ldGFkYXRhOgogIG5hbWU6IGV0Y2QKICBuYW1lc3BhY2U6IGt1YmUtc3lzdGVtCnNwZWM6CiAgY29udGFpbmVyczoKICAtIG5hbWU6IGV0Y2QKICAgIGltYWdlOiBxdWF5LmlvL2NvcmVvcy9ldGNkOnYzLjQuMwogICAgY29tbWFuZDoKICAgIC0gZXRjZAogICAgLSAtLWFkdmVydGlzZS1jbGllbnQtdXJscz1odHRwczovLzxNQVNURVJfSVA+OjIzNzkKICAgIC0gLS1pbml0aWFsLWFkdmVydGlzZS1wZWVyLXVybHM9aHR0cHM6Ly88TUFTVEVSX0lQPjoyMzgwCiAgICAtIC0taW5pdGlhbC1jbHVzdGVyPTxNQVNURVJfTkFNRT49aHR0cHM6Ly88TUFTVEVSX0lQPjoyMzgwCiAgICAtIC0taW5pdGlhbC1jbHVzdGVyLXN0YXRlPW5ldwogICAgLSAtLWluaXRpYWwtY2x1c3Rlci10b2tlbj1ldGNkLWNsdXN0ZXItMQogICAgLSAtLW5hbWU9PE1BU1RFUl9OQU1FPgogICAgLSAtLXBlZXItY2xpZW50LWNlcnQtYXV0aD10cnVlCiAgICAtIC0tcGVlci1rZXktZmlsZT0vZXRjL2t1YmVybmV0ZXMvcGtpL2V0Y2QvcGVlci5rZXkKICAgIC0gLS1wZWVyLWNlcnQtZmlsZT0vZXRjL2t1YmVybmV0ZXMvcGtpL2V0Y2QvcGVlci5jcnQKICAgIC0gLS1wZWVyLXRydXN0ZWQtY2EtZmlsZT0vZXRjL2t1YmVybmV0ZXMvcGtpL2V0Y2QvY2EuY3J0CiAgICAtIC0tY2xpZW50LWNlcnQtYXV0aD10cnVlCiAgICAtIC0ta2V5LWZpbGU9L2V0Yy9rdWJlcm5ldGVzL3BraS9ldGNkL3NlcnZlci5rZXkKICAgIC0gLS1jZXJ0LWZpbGU9L2V0Yy9rdWJlcm5ldGVzL3BraS9ldGNkL3NlcnZlci5jcnQKICAgIC0gLS10cnVzdGVkLWNhLWZpbGU9L2V0Yy9rdWJlcm5ldGVzL3BraS9ldGNkL2NhLmNydAogICAgLSAtLWRhdGEtZGlyPS92YXIvbGliL2V0Y2Q="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: v1
kind: Pod
metadata:
  name: etcd
  namespace: kube-system
spec:
  containers:
  - name: etcd
    image: quay.io/coreos/etcd:v3.4.3
    command:
    - etcd
    - --advertise-client-urls=https://&lt;MASTER_IP&gt;:2379
    - --initial-advertise-peer-urls=https://&lt;MASTER_IP&gt;:2380
    - --initial-cluster=&lt;MASTER_NAME&gt;=https://&lt;MASTER_IP&gt;:2380
    - --initial-cluster-state=new
    - --initial-cluster-token=etcd-cluster-1
    - --name=&lt;MASTER_NAME&gt;
    - --peer-client-cert-auth=true
    - --peer-key-file=/etc/kubernetes/pki/etcd/peer.key
    - --peer-cert-file=/etc/kubernetes/pki/etcd/peer.crt
    - --peer-trusted-ca-file=/etc/kubernetes/pki/etcd/ca.crt
    - --client-cert-auth=true
    - --key-file=/etc/kubernetes/pki/etcd/server.key
    - --cert-file=/etc/kubernetes/pki/etcd/server.crt
    - --trusted-ca-file=/etc/kubernetes/pki/etcd/ca.crt
    - --data-dir=/var/lib/etcd</pre></div><div class='content'></div><h2>Worker Node High Availability</h2>
<div class='content'><p>Worker nodes run the actual application workloads. Ensuring their high availability involves:</p>
<ul>
<li><strong>Node Pools</strong>: Grouping nodes into pools to manage and scale them efficiently.</li>
<li><strong>Pod Replication</strong>: Using ReplicaSets or Deployments to ensure that multiple instances of a pod are running.</li>
<li><strong>Pod Anti-Affinity</strong>: Ensuring that pods are spread across different nodes to avoid a single point of failure.</li>
</ul>
<h4>Example: Using ReplicaSets for Pod Replication</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogYXBwcy92MQpraW5kOiBSZXBsaWNhU2V0Cm1ldGFkYXRhOgogIG5hbWU6IG5naW54LXJlcGxpY2FzZXQKc3BlYzoKICByZXBsaWNhczogMwogIHNlbGVjdG9yOgogICAgbWF0Y2hMYWJlbHM6CiAgICAgIGFwcDogbmdpbngKICB0ZW1wbGF0ZToKICAgIG1ldGFkYXRhOgogICAgICBsYWJlbHM6CiAgICAgICAgYXBwOiBuZ2lueAogICAgc3BlYzoKICAgICAgY29udGFpbmVyczoKICAgICAgLSBuYW1lOiBuZ2lueAogICAgICAgIGltYWdlOiBuZ2lueDoxLjE0LjIKICAgICAgICBwb3J0czoKICAgICAgICAtIGNvbnRhaW5lclBvcnQ6IDgw"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: nginx-replicaset
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.14.2
        ports:
        - containerPort: 80</pre></div><div class='content'></div><h2>Load Balancing</h2>
<div class='content'><p>Load balancing is essential for distributing traffic across multiple nodes and pods. Kubernetes provides several ways to achieve load balancing:</p>
<ul>
<li><strong>Service</strong>: A Kubernetes Service can expose an application running on a set of Pods as a network service.</li>
<li><strong>Ingress</strong>: An API object that manages external access to services, typically HTTP.</li>
</ul>
<h4>Example: Creating a Load-Balanced Service</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogdjEKa2luZDogU2VydmljZQptZXRhZGF0YToKICBuYW1lOiBteS1zZXJ2aWNlCnNwZWM6CiAgc2VsZWN0b3I6CiAgICBhcHA6IE15QXBwCiAgcG9ydHM6CiAgICAtIHByb3RvY29sOiBUQ1AKICAgICAgcG9ydDogODAKICAgICAgdGFyZ2V0UG9ydDogOTM3NgogIHR5cGU6IExvYWRCYWxhbmNlcg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: v1
kind: Service
metadata:
  name: my-service
spec:
  selector:
    app: MyApp
  ports:
    - protocol: TCP
      port: 80
      targetPort: 9376
  type: LoadBalancer</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>High Availability in Kubernetes is achieved through redundancy, failover mechanisms, load balancing, and replication. By setting up multiple master nodes, using ReplicaSets, and leveraging Kubernetes Services and Ingress, you can ensure that your applications remain available even in the face of failures. Understanding and implementing these concepts is crucial for maintaining a robust and reliable Kubernetes environment.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='best-practices-for-production'>&#x25C4;Best Practices for Production</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">High Availability in Kubernetes</a>
	</div>
	<div class='col-4 text-end'>
					<a href='disaster-recovery'>Disaster Recovery &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
