<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capturing Values</title>

    <link rel="alternate" href="https://campusempresa.com/swift/capturing-values" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/swift/capturing-values" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/swift/capturing-values" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/swift/capturing-values" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/swift/capturing-values" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='closures'>&#x25C4;Closures</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Capturing Values</a>
	</div>
	<div class='col-4 text-end'>
					<a href='arrays'>Arrays &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Capturing values is an important concept in Swift, especially when working with closures. This topic will guide you through the basics of capturing values, how it works, and its implications in Swift programming.</p>
</div><h1>What is Capturing Values?</h1>
<div class='content'><ul>
<li><strong>Definition</strong>: Capturing values refers to the ability of a closure to capture and store references to variables and constants from the surrounding context in which it is defined.</li>
<li><strong>Purpose</strong>: This allows the closure to use and modify these values even after the original context has gone out of scope.</li>
</ul>
</div><h1>How Capturing Values Works</h1>
<div class='content'><p>When a closure captures a value, it creates a strong reference to that value. This means that the closure can access and modify the value even if the original scope where the value was defined no longer exists.</p>
</div><h2>Example: Capturing Values in a Closure</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuYyBtYWtlSW5jcmVtZW50ZXIoaW5jcmVtZW50QW1vdW50OiBJbnQpIC0+ICgpIC0+IEludCB7CiAgICB2YXIgdG90YWwgPSAwCiAgICAKICAgIGxldCBpbmNyZW1lbnRlcjogKCkgLT4gSW50ID0gewogICAgICAgIHRvdGFsICs9IGluY3JlbWVudEFtb3VudAogICAgICAgIHJldHVybiB0b3RhbAogICAgfQogICAgCiAgICByZXR1cm4gaW5jcmVtZW50ZXIKfQoKbGV0IGluY3JlbWVudEJ5VHdvID0gbWFrZUluY3JlbWVudGVyKGluY3JlbWVudEFtb3VudDogMikKcHJpbnQoaW5jcmVtZW50QnlUd28oKSkgLy8gT3V0cHV0OiAyCnByaW50KGluY3JlbWVudEJ5VHdvKCkpIC8vIE91dHB1dDogNA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>func makeIncrementer(incrementAmount: Int) -&gt; () -&gt; Int {
    var total = 0
    
    let incrementer: () -&gt; Int = {
        total += incrementAmount
        return total
    }
    
    return incrementer
}

let incrementByTwo = makeIncrementer(incrementAmount: 2)
print(incrementByTwo()) // Output: 2
print(incrementByTwo()) // Output: 4</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>makeIncrementer</code> is a function that takes an <code>incrementAmount</code> and returns a closure.</li>
<li>The closure captures the <code>total</code> variable and the <code>incrementAmount</code> parameter.</li>
<li>Each time the returned closure is called, it increments <code>total</code> by <code>incrementAmount</code> and returns the new total.</li>
</ul>
</li>
</ul>
</div><h1>Capturing Values and Memory Management</h1>
<div class='content'><ul>
<li><strong>Strong References</strong>: Captured values are strongly referenced by the closure, which can lead to retain cycles if not managed properly.</li>
<li><strong>Retain Cycles</strong>: A retain cycle occurs when two or more objects hold strong references to each other, preventing them from being deallocated.</li>
</ul>
</div><h2>Example: Retain Cycle</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgU29tZUNsYXNzIHsKICAgIHZhciB2YWx1ZSA9IDAKICAgIGxhenkgdmFyIGluY3JlbWVudGVyOiAoKSAtPiBJbnQgPSB7CiAgICAgICAgc2VsZi52YWx1ZSArPSAxCiAgICAgICAgcmV0dXJuIHNlbGYudmFsdWUKICAgIH0KfQoKbGV0IGluc3RhbmNlID0gU29tZUNsYXNzKCkKcHJpbnQoaW5zdGFuY2UuaW5jcmVtZW50ZXIoKSkgLy8gT3V0cHV0OiAx"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class SomeClass {
    var value = 0
    lazy var incrementer: () -&gt; Int = {
        self.value += 1
        return self.value
    }
}

let instance = SomeClass()
print(instance.incrementer()) // Output: 1</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>SomeClass</code> has a property <code>incrementer</code> which is a closure capturing <code>self</code>.</li>
<li>This creates a strong reference cycle between the instance of <code>SomeClass</code> and the closure, leading to a retain cycle.</li>
</ul>
</li>
</ul>
</div><h1>Breaking Retain Cycles</h1>
<div class='content'><ul>
<li><strong>Weak and Unowned References</strong>: Use <code>weak</code> or <code>unowned</code> references to break retain cycles.
<ul>
<li><code>weak</code>: Use when the captured reference can become <code>nil</code>.</li>
<li><code>unowned</code>: Use when the captured reference will never become <code>nil</code>.</li>
</ul>
</li>
</ul>
</div><h2>Example: Using Weak References</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgU29tZUNsYXNzIHsKICAgIHZhciB2YWx1ZSA9IDAKICAgIGxhenkgdmFyIGluY3JlbWVudGVyOiAoKSAtPiBJbnQgPSB7IFt3ZWFrIHNlbGZdIGluCiAgICAgICAgc2VsZj8udmFsdWUgKz0gMQogICAgICAgIHJldHVybiBzZWxmPy52YWx1ZSA/PyAwCiAgICB9Cn0KCmxldCBpbnN0YW5jZSA9IFNvbWVDbGFzcygpCnByaW50KGluc3RhbmNlLmluY3JlbWVudGVyKCkpIC8vIE91dHB1dDogMQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class SomeClass {
    var value = 0
    lazy var incrementer: () -&gt; Int = { [weak self] in
        self?.value += 1
        return self?.value ?? 0
    }
}

let instance = SomeClass()
print(instance.incrementer()) // Output: 1</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li>The closure captures <code>self</code> weakly, preventing a strong reference cycle.</li>
<li>If <code>self</code> becomes <code>nil</code>, the closure safely returns <code>0</code>.</li>
</ul>
</li>
</ul>
</div><h1>Summary</h1>
<div class='content'><p>Capturing values in Swift closures allows you to maintain references to variables and constants from the surrounding context. While this is a powerful feature, it requires careful management to avoid memory issues like retain cycles. By understanding how to use weak and unowned references, you can effectively manage memory and ensure your Swift applications run efficiently.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='closures'>&#x25C4;Closures</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Capturing Values</a>
	</div>
	<div class='col-4 text-end'>
					<a href='arrays'>Arrays &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
