<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Best Practices for Production</title>

    <link rel="alternate" href="https://campusempresa.com/nginx/best-practices-for-production" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/nginx/best-practices-for-production" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/nginx/best-practices-for-production" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/nginx/best-practices-for-production" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/nginx/best-practices-for-production" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='scaling-nginx'>&#x25C4;Scaling NGINX</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Best Practices for Production</a>
	</div>
	<div class='col-4 text-end'>
					<a href='case-study-load-balancer'>Case Study: NGINX as a Load Balancer &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>When deploying NGINX in a production environment, it's crucial to follow best practices to ensure performance, security, and maintainability. This section will cover key concepts and configurations that will help you optimize your NGINX setup for production use.</p>
</div><h1>Configuration Management</h1>
<div class='content'><ul>
<li>
<p><strong>Use Version Control</strong>: Store your NGINX configuration files in a version control system like Git. This allows you to track changes, roll back to previous versions, and collaborate with team members.</p>
</li>
<li>
<p><strong>Modular Configuration</strong>: Break down your NGINX configuration into smaller, manageable files. Use the <code>include</code> directive to include these files in your main configuration.</p>
<pre><code class="language-nginx"># Main configuration file (nginx.conf)
include /etc/nginx/conf.d/*.conf;
include /etc/nginx/sites-enabled/*;
</code></pre>
</li>
</ul>
</div><h1>Performance Optimization</h1>
<div class='content'><ul>
<li>
<p><strong>Worker Processes and Connections</strong>: Configure the number of worker processes and connections to match your server's capabilities.</p>
<pre><code class="language-nginx">worker_processes auto;  # Automatically set to the number of available CPU cores
events {
    worker_connections 1024;  # Adjust based on your server's capacity
}
</code></pre>
</li>
<li>
<p><strong>Gzip Compression</strong>: Enable gzip compression to reduce the size of the responses and improve load times.</p>
<pre><code class="language-nginx">gzip on;
gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
</code></pre>
</li>
<li>
<p><strong>Caching</strong>: Use caching to reduce load on your backend servers and improve response times.</p>
<pre><code class="language-nginx">proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=my_cache:10m max_size=10g inactive=60m use_temp_path=off;
server {
    location / {
        proxy_cache my_cache;
        proxy_pass http://backend_server;
    }
}
</code></pre>
</li>
</ul>
</div><h1>Security</h1>
<div class='content'><ul>
<li>
<p><strong>SSL/TLS</strong>: Always use SSL/TLS to encrypt traffic between clients and your server. Obtain certificates from a trusted Certificate Authority (CA) or use Let's Encrypt for free certificates.</p>
<pre><code class="language-nginx">server {
    listen 443 ssl;
    server_name example.com;
    ssl_certificate /etc/ssl/certs/example.com.crt;
    ssl_certificate_key /etc/ssl/private/example.com.key;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
}
</code></pre>
</li>
<li>
<p><strong>HTTP Security Headers</strong>: Add security headers to protect against common web vulnerabilities.</p>
<pre><code class="language-nginx">add_header X-Content-Type-Options nosniff;
add_header X-Frame-Options DENY;
add_header X-XSS-Protection &quot;1; mode=block&quot;;
</code></pre>
</li>
<li>
<p><strong>Rate Limiting</strong>: Implement rate limiting to protect against brute force attacks and abuse.</p>
<pre><code class="language-nginx">http {
    limit_req_zone $binary_remote_addr zone=one:10m rate=1r/s;
    server {
        location /login {
            limit_req zone=one burst=5;
        }
    }
}
</code></pre>
</li>
</ul>
</div><h1>Monitoring and Logging</h1>
<div class='content'><ul>
<li>
<p><strong>Access and Error Logs</strong>: Configure access and error logs to monitor traffic and diagnose issues.</p>
<pre><code class="language-nginx">http {
    log_format main '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '
                    '$status $body_bytes_sent &quot;$http_referer&quot; '
                    '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;';
    access_log /var/log/nginx/access.log main;
    error_log /var/log/nginx/error.log warn;
}
</code></pre>
</li>
<li>
<p><strong>Metrics and Alerts</strong>: Use tools like Prometheus and Grafana to collect metrics and set up alerts for critical issues.</p>
</li>
</ul>
</div><h1>High Availability</h1>
<div class='content'><ul>
<li>
<p><strong>Load Balancing</strong>: Distribute traffic across multiple backend servers to ensure high availability and reliability.</p>
<pre><code class="language-nginx">upstream backend {
    server backend1.example.com;
    server backend2.example.com;
}
server {
    location / {
        proxy_pass http://backend;
    }
}
</code></pre>
</li>
<li>
<p><strong>Health Checks</strong>: Configure health checks to automatically remove unhealthy servers from the load balancing pool.</p>
<pre><code class="language-nginx">upstream backend {
    server backend1.example.com;
    server backend2.example.com;
    server backend3.example.com down;  # Mark a server as down
}
</code></pre>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Following these best practices will help you deploy NGINX in a production environment that is secure, performant, and maintainable. By managing configurations effectively, optimizing performance, securing your server, monitoring logs, and ensuring high availability, you can provide a robust and reliable service to your users.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='scaling-nginx'>&#x25C4;Scaling NGINX</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Best Practices for Production</a>
	</div>
	<div class='col-4 text-end'>
					<a href='case-study-load-balancer'>Case Study: NGINX as a Load Balancer &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
