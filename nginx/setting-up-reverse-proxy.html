<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setting Up a Reverse Proxy</title>

    <link rel="alternate" href="https://campusempresa.com/nginx/setting-up-reverse-proxy" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/nginx/setting-up-reverse-proxy" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/nginx/setting-up-reverse-proxy" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/nginx/setting-up-reverse-proxy" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/nginx/setting-up-reverse-proxy" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='http-in-nginx'>&#x25C4;Introduction to HTTP in NGINX</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Setting Up a Reverse Proxy</a>
	</div>
	<div class='col-4 text-end'>
					<a href='load-balancing-with-nginx'>Load Balancing with NGINX &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Reverse Proxy</h1>
<div class='content'><p>A reverse proxy is a server that sits between client devices and backend servers, forwarding client requests to the appropriate backend server and returning the server's response to the client. NGINX is a popular choice for setting up a reverse proxy due to its high performance and flexibility.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Reverse Proxy</strong>: Acts as an intermediary for requests from clients seeking resources from servers.</li>
<li><strong>Backend Server</strong>: The server that processes the client requests forwarded by the reverse proxy.</li>
<li><strong>Load Balancing</strong>: Distributing client requests across multiple backend servers to ensure no single server becomes overwhelmed.</li>
<li><strong>SSL Termination</strong>: Decrypting SSL-encrypted traffic at the proxy server before passing it to the backend server.</li>
</ul>
</div><h1>Basic Configuration of a Reverse Proxy</h1>
<div class='content'><p>To set up a basic reverse proxy with NGINX, follow these steps:</p>
<ol>
<li>
<p><strong>Install NGINX</strong>:</p>
<pre><code class="language-bash">sudo apt update
sudo apt install nginx
</code></pre>
</li>
<li>
<p><strong>Edit the NGINX Configuration File</strong>:
Open the default configuration file located at <code>/etc/nginx/sites-available/default</code>:</p>
<pre><code class="language-bash">sudo nano /etc/nginx/sites-available/default
</code></pre>
</li>
<li>
<p><strong>Configure the Reverse Proxy</strong>:
Add the following configuration to the server block:</p>
<pre><code class="language-nginx">server {
    listen 80;

    server_name your_domain.com;

    location / {
        proxy_pass http://backend_server_ip:backend_server_port;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
</code></pre>
</li>
<li>
<p><strong>Restart NGINX</strong>:</p>
<pre><code class="language-bash">sudo systemctl restart nginx
</code></pre>
</li>
</ol>
</div><h2>Explanation of Configuration</h2>
<div class='content'><ul>
<li><code>listen 80;</code>: NGINX listens on port 80 for incoming HTTP requests.</li>
<li><code>server_name your_domain.com;</code>: Specifies the domain name for the server.</li>
<li><code>location / { ... }</code>: Defines the location block for handling requests.
<ul>
<li><code>proxy_pass http://backend_server_ip:backend_server_port;</code>: Forwards requests to the specified backend server.</li>
<li><code>proxy_set_header</code>: Sets various headers to pass along with the request to the backend server.</li>
</ul>
</li>
</ul>
</div><h1>Advanced Configuration Options</h1>
<h2>Load Balancing</h2>
<div class='content'><p>To distribute traffic across multiple backend servers, use the following configuration:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICB1cHN0cmVhbSBiYWNrZW5kIHsKICAgICAgICBzZXJ2ZXIgYmFja2VuZDEuZXhhbXBsZS5jb207CiAgICAgICAgc2VydmVyIGJhY2tlbmQyLmV4YW1wbGUuY29tOwogICAgICAgIHNlcnZlciBiYWNrZW5kMy5leGFtcGxlLmNvbTsKICAgIH0KCiAgICBzZXJ2ZXIgewogICAgICAgIGxpc3RlbiA4MDsKICAgICAgICBzZXJ2ZXJfbmFtZSB5b3VyX2RvbWFpbi5jb207CgogICAgICAgIGxvY2F0aW9uIC8gewogICAgICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly9iYWNrZW5kOwogICAgICAgICAgICBwcm94eV9zZXRfaGVhZGVyIEhvc3QgJGhvc3Q7CiAgICAgICAgICAgIHByb3h5X3NldF9oZWFkZXIgWC1SZWFsLUlQICRyZW1vdGVfYWRkcjsKICAgICAgICAgICAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Gb3IgJHByb3h5X2FkZF94X2ZvcndhcmRlZF9mb3I7CiAgICAgICAgICAgIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtUHJvdG8gJHNjaGVtZTsKICAgICAgICB9CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    upstream backend {
        server backend1.example.com;
        server backend2.example.com;
        server backend3.example.com;
    }

    server {
        listen 80;
        server_name your_domain.com;

        location / {
            proxy_pass http://backend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
    }
}</pre></div><div class='content'></div><h2>SSL Termination</h2>
<div class='content'><p>To handle SSL termination at the NGINX server, use the following configuration:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmVyIHsKICAgIGxpc3RlbiA0NDMgc3NsOwogICAgc2VydmVyX25hbWUgeW91cl9kb21haW4uY29tOwoKICAgIHNzbF9jZXJ0aWZpY2F0ZSAvZXRjL25naW54L3NzbC95b3VyX2RvbWFpbi5jb20uY3J0OwogICAgc3NsX2NlcnRpZmljYXRlX2tleSAvZXRjL25naW54L3NzbC95b3VyX2RvbWFpbi5jb20ua2V5OwoKICAgIGxvY2F0aW9uIC8gewogICAgICAgIHByb3h5X3Bhc3MgaHR0cDovL2JhY2tlbmRfc2VydmVyX2lwOmJhY2tlbmRfc2VydmVyX3BvcnQ7CiAgICAgICAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0OwogICAgICAgIHByb3h5X3NldF9oZWFkZXIgWC1SZWFsLUlQICRyZW1vdGVfYWRkcjsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLUZvciAkcHJveHlfYWRkX3hfZm9yd2FyZGVkX2ZvcjsKICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLVByb3RvICRzY2hlbWU7CiAgICB9Cn0KCnNlcnZlciB7CiAgICBsaXN0ZW4gODA7CiAgICBzZXJ2ZXJfbmFtZSB5b3VyX2RvbWFpbi5jb207CgogICAgcmV0dXJuIDMwMSBodHRwczovLyRob3N0JHJlcXVlc3RfdXJpOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>server {
    listen 443 ssl;
    server_name your_domain.com;

    ssl_certificate /etc/nginx/ssl/your_domain.com.crt;
    ssl_certificate_key /etc/nginx/ssl/your_domain.com.key;

    location / {
        proxy_pass http://backend_server_ip:backend_server_port;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}

server {
    listen 80;
    server_name your_domain.com;

    return 301 https://$host$request_uri;
}</pre></div><div class='content'></div><h2>Explanation of SSL Configuration</h2>
<div class='content'><ul>
<li><code>listen 443 ssl;</code>: NGINX listens on port 443 for HTTPS requests.</li>
<li><code>ssl_certificate</code> and <code>ssl_certificate_key</code>: Paths to the SSL certificate and key files.</li>
<li>The second server block listens on port 80 and redirects HTTP traffic to HTTPS.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Setting up a reverse proxy with NGINX involves configuring NGINX to forward client requests to backend servers. This setup can be enhanced with load balancing and SSL termination to improve performance and security. By understanding and applying these configurations, you can effectively manage traffic and ensure a robust web server environment.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='http-in-nginx'>&#x25C4;Introduction to HTTP in NGINX</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Setting Up a Reverse Proxy</a>
	</div>
	<div class='col-4 text-end'>
					<a href='load-balancing-with-nginx'>Load Balancing with NGINX &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
