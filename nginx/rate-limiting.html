<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rate Limiting in NGINX</title>

    <link rel="alternate" href="https://campusempresa.com/nginx/rate-limiting" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/nginx/rate-limiting" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/nginx/rate-limiting" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/nginx/rate-limiting" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/nginx/rate-limiting" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='setting-up-ssl-tls'>&#x25C4;Setting Up SSL/TLS</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Rate Limiting in NGINX</a>
	</div>
	<div class='col-4 text-end'>
					<a href='optimizing-performance'>Optimizing Performance &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Rate limiting is a crucial technique used to control the rate of incoming requests to a server, ensuring that the server remains responsive and can handle traffic spikes gracefully. This topic will guide you through the concepts and implementation of rate limiting in NGINX, from beginner to advanced levels.</p>
</div><h1>Introduction to Rate Limiting</h1>
<div class='content'><p>Rate limiting helps to:</p>
<ul>
<li>Prevent abuse and overuse of server resources.</li>
<li>Protect against DDoS (Distributed Denial of Service) attacks.</li>
<li>Ensure fair usage among users.</li>
</ul>
</div><h1>Basic Concepts</h1>
<div class='content'></div><h2>What is Rate Limiting?</h2>
<div class='content'><p>Rate limiting is the process of controlling the number of requests a user can make to a server within a specified time period.</p>
</div><h2>Why Use Rate Limiting?</h2>
<div class='content'><ul>
<li><strong>Resource Management</strong>: Prevents a single user from consuming too many resources.</li>
<li><strong>Security</strong>: Mitigates the risk of DDoS attacks.</li>
<li><strong>Fairness</strong>: Ensures all users have equal access to resources.</li>
</ul>
</div><h1>Implementing Rate Limiting in NGINX</h1>
<div class='content'></div><h2>Prerequisites</h2>
<div class='content'><ul>
<li>Basic understanding of NGINX configuration.</li>
<li>NGINX installed on your server.</li>
</ul>
</div><h2>Basic Rate Limiting Configuration</h2>
<div class='content'><p>NGINX uses the <code>limit_req_zone</code> and <code>limit_req</code> directives to configure rate limiting.</p>
<h4>Step-by-Step Guide</h4>
<ol>
<li>
<p><strong>Define a Rate Limiting Zone</strong>:
The <code>limit_req_zone</code> directive defines a shared memory zone that keeps track of request rates.</p>
<pre><code class="language-nginx">http {
    limit_req_zone $binary_remote_addr zone=one:10m rate=1r/s;
    ...
}
</code></pre>
<ul>
<li><code>$binary_remote_addr</code>: Uses the client IP address as the key.</li>
<li><code>zone=one:10m</code>: Creates a zone named 'one' with 10MB of shared memory.</li>
<li><code>rate=1r/s</code>: Limits the rate to 1 request per second.</li>
</ul>
</li>
<li>
<p><strong>Apply the Rate Limiting Zone</strong>:
Use the <code>limit_req</code> directive within a server or location block to apply the rate limiting.</p>
<pre><code class="language-nginx">server {
    location / {
        limit_req zone=one burst=5 nodelay;
        ...
    }
}
</code></pre>
<ul>
<li><code>zone=one</code>: Refers to the previously defined zone.</li>
<li><code>burst=5</code>: Allows a burst of up to 5 requests.</li>
<li><code>nodelay</code>: Ensures that requests exceeding the rate limit are rejected immediately.</li>
</ul>
</li>
</ol>
</div><h2>Example Configuration</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICBsaW1pdF9yZXFfem9uZSAkYmluYXJ5X3JlbW90ZV9hZGRyIHpvbmU9b25lOjEwbSByYXRlPTFyL3M7CgogICAgc2VydmVyIHsKICAgICAgICBsaXN0ZW4gODA7CiAgICAgICAgc2VydmVyX25hbWUgZXhhbXBsZS5jb207CgogICAgICAgIGxvY2F0aW9uIC8gewogICAgICAgICAgICBsaW1pdF9yZXEgem9uZT1vbmUgYnVyc3Q9NSBub2RlbGF5OwogICAgICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly9iYWNrZW5kOwogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    limit_req_zone $binary_remote_addr zone=one:10m rate=1r/s;

    server {
        listen 80;
        server_name example.com;

        location / {
            limit_req zone=one burst=5 nodelay;
            proxy_pass http://backend;
        }
    }
}</pre></div><div class='content'></div><h2>Advanced Rate Limiting Techniques</h2>
<div class='content'><h4>Using Multiple Rate Limiting Zones</h4>
<p>You can define multiple rate limiting zones to apply different limits to different parts of your application.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICBsaW1pdF9yZXFfem9uZSAkYmluYXJ5X3JlbW90ZV9hZGRyIHpvbmU9em9uZTE6MTBtIHJhdGU9MXIvczsKICAgIGxpbWl0X3JlcV96b25lICRiaW5hcnlfcmVtb3RlX2FkZHIgem9uZT16b25lMjoxMG0gcmF0ZT0xMHIvbTsKCiAgICBzZXJ2ZXIgewogICAgICAgIGxpc3RlbiA4MDsKICAgICAgICBzZXJ2ZXJfbmFtZSBleGFtcGxlLmNvbTsKCiAgICAgICAgbG9jYXRpb24gL2FwaS8gewogICAgICAgICAgICBsaW1pdF9yZXEgem9uZT16b25lMSBidXJzdD01IG5vZGVsYXk7CiAgICAgICAgICAgIHByb3h5X3Bhc3MgaHR0cDovL2FwaV9iYWNrZW5kOwogICAgICAgIH0KCiAgICAgICAgbG9jYXRpb24gL3N0YXRpYy8gewogICAgICAgICAgICBsaW1pdF9yZXEgem9uZT16b25lMiBidXJzdD0yMDsKICAgICAgICAgICAgcm9vdCAvdmFyL3d3dy9zdGF0aWM7CiAgICAgICAgfQogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    limit_req_zone $binary_remote_addr zone=zone1:10m rate=1r/s;
    limit_req_zone $binary_remote_addr zone=zone2:10m rate=10r/m;

    server {
        listen 80;
        server_name example.com;

        location /api/ {
            limit_req zone=zone1 burst=5 nodelay;
            proxy_pass http://api_backend;
        }

        location /static/ {
            limit_req zone=zone2 burst=20;
            root /var/www/static;
        }
    }
}</pre></div><div class='content'><h4>Customizing Rate Limiting Responses</h4>
<p>You can customize the response that clients receive when they exceed the rate limit.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICBsaW1pdF9yZXFfem9uZSAkYmluYXJ5X3JlbW90ZV9hZGRyIHpvbmU9b25lOjEwbSByYXRlPTFyL3M7CgogICAgc2VydmVyIHsKICAgICAgICBsaXN0ZW4gODA7CiAgICAgICAgc2VydmVyX25hbWUgZXhhbXBsZS5jb207CgogICAgICAgIGxvY2F0aW9uIC8gewogICAgICAgICAgICBsaW1pdF9yZXEgem9uZT1vbmUgYnVyc3Q9NSBub2RlbGF5OwogICAgICAgICAgICBsaW1pdF9yZXFfc3RhdHVzIDQyOTsKICAgICAgICAgICAgZXJyb3JfcGFnZSA0MjkgPSAvcmF0ZV9saW1pdF9leGNlZWRlZDsKCiAgICAgICAgICAgIHByb3h5X3Bhc3MgaHR0cDovL2JhY2tlbmQ7CiAgICAgICAgfQoKICAgICAgICBsb2NhdGlvbiA9IC9yYXRlX2xpbWl0X2V4Y2VlZGVkIHsKICAgICAgICAgICAgcmV0dXJuIDQyOSAiUmF0ZSBsaW1pdCBleGNlZWRlZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4iOwogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    limit_req_zone $binary_remote_addr zone=one:10m rate=1r/s;

    server {
        listen 80;
        server_name example.com;

        location / {
            limit_req zone=one burst=5 nodelay;
            limit_req_status 429;
            error_page 429 = /rate_limit_exceeded;

            proxy_pass http://backend;
        }

        location = /rate_limit_exceeded {
            return 429 &quot;Rate limit exceeded. Please try again later.&quot;;
        }
    }
}</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Rate limiting is an essential feature for maintaining the performance and security of your web applications. By understanding and implementing rate limiting in NGINX, you can:</p>
<ul>
<li>Protect your server from abuse and attacks.</li>
<li>Ensure fair resource distribution among users.</li>
<li>Customize responses to provide a better user experience.</li>
</ul>
<p>With the basic and advanced techniques covered in this topic, you should be well-equipped to implement effective rate limiting strategies in your NGINX configurations.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='setting-up-ssl-tls'>&#x25C4;Setting Up SSL/TLS</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Rate Limiting in NGINX</a>
	</div>
	<div class='col-4 text-end'>
					<a href='optimizing-performance'>Optimizing Performance &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
