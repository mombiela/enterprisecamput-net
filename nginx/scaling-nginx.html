<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scaling NGINX</title>

    <link rel="alternate" href="https://campusempresa.com/nginx/scaling-nginx" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/nginx/scaling-nginx" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/nginx/scaling-nginx" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/nginx/scaling-nginx" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/nginx/scaling-nginx" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='high-availability-with-nginx'>&#x25C4;High Availability with NGINX</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Scaling NGINX</a>
	</div>
	<div class='col-4 text-end'>
					<a href='best-practices-for-production'>Best Practices for Production &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Scaling NGINX is a critical topic for ensuring that your web applications can handle increased traffic and provide high availability. This section will cover the fundamental concepts, strategies, and practical implementations for scaling NGINX from a single server to a distributed, high-performance setup.</p>
</div><h1>Key Concepts in Scaling NGINX</h1>
<div class='content'><ul>
<li><strong>Load Balancing</strong>: Distributing incoming traffic across multiple servers to ensure no single server becomes a bottleneck.</li>
<li><strong>Horizontal Scaling</strong>: Adding more servers to handle increased load.</li>
<li><strong>Vertical Scaling</strong>: Increasing the resources (CPU, RAM) of a single server.</li>
<li><strong>High Availability</strong>: Ensuring the service remains available even if one or more servers fail.</li>
<li><strong>Caching</strong>: Storing frequently accessed data to reduce load on the backend servers.</li>
</ul>
</div><h1>Load Balancing with NGINX</h1>
<div class='content'><p>Load balancing is a core strategy for scaling NGINX. It involves distributing incoming requests across multiple backend servers.</p>
</div><h2>Types of Load Balancing</h2>
<div class='content'><ul>
<li><strong>Round Robin</strong>: Distributes requests evenly across all servers.</li>
<li><strong>Least Connections</strong>: Sends requests to the server with the fewest active connections.</li>
<li><strong>IP Hash</strong>: Distributes requests based on the client's IP address.</li>
</ul>
</div><h2>Configuring Load Balancing</h2>
<div class='content'><p>Here's an example of configuring load balancing in NGINX using the Round Robin method:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICB1cHN0cmVhbSBiYWNrZW5kIHsKICAgICAgICBzZXJ2ZXIgYmFja2VuZDEuZXhhbXBsZS5jb207CiAgICAgICAgc2VydmVyIGJhY2tlbmQyLmV4YW1wbGUuY29tOwogICAgICAgIHNlcnZlciBiYWNrZW5kMy5leGFtcGxlLmNvbTsKICAgIH0KCiAgICBzZXJ2ZXIgewogICAgICAgIGxpc3RlbiA4MDsKCiAgICAgICAgbG9jYXRpb24gLyB7CiAgICAgICAgICAgIHByb3h5X3Bhc3MgaHR0cDovL2JhY2tlbmQ7CiAgICAgICAgfQogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    upstream backend {
        server backend1.example.com;
        server backend2.example.com;
        server backend3.example.com;
    }

    server {
        listen 80;

        location / {
            proxy_pass http://backend;
        }
    }
}</pre></div><div class='content'><p>In this configuration:</p>
<ul>
<li>The <code>upstream</code> block defines a group of backend servers.</li>
<li>The <code>proxy_pass</code> directive forwards incoming requests to the <code>backend</code> group.</li>
</ul>
</div><h1>Horizontal Scaling</h1>
<div class='content'><p>Horizontal scaling involves adding more servers to handle increased load. This can be achieved by:</p>
<ul>
<li><strong>Adding More Backend Servers</strong>: Simply add more servers to the <code>upstream</code> block.</li>
<li><strong>Using Cloud Services</strong>: Leverage cloud providers like AWS, GCP, or Azure to dynamically scale the number of servers.</li>
</ul>
</div><h2>Example of Adding More Backend Servers</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICB1cHN0cmVhbSBiYWNrZW5kIHsKICAgICAgICBzZXJ2ZXIgYmFja2VuZDEuZXhhbXBsZS5jb207CiAgICAgICAgc2VydmVyIGJhY2tlbmQyLmV4YW1wbGUuY29tOwogICAgICAgIHNlcnZlciBiYWNrZW5kMy5leGFtcGxlLmNvbTsKICAgICAgICBzZXJ2ZXIgYmFja2VuZDQuZXhhbXBsZS5jb207ICAjIE5ldyBzZXJ2ZXIgYWRkZWQKICAgIH0KCiAgICBzZXJ2ZXIgewogICAgICAgIGxpc3RlbiA4MDsKCiAgICAgICAgbG9jYXRpb24gLyB7CiAgICAgICAgICAgIHByb3h5X3Bhc3MgaHR0cDovL2JhY2tlbmQ7CiAgICAgICAgfQogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    upstream backend {
        server backend1.example.com;
        server backend2.example.com;
        server backend3.example.com;
        server backend4.example.com;  # New server added
    }

    server {
        listen 80;

        location / {
            proxy_pass http://backend;
        }
    }
}</pre></div><div class='content'></div><h1>High Availability</h1>
<div class='content'><p>High availability ensures that your service remains operational even if some servers fail. This can be achieved through:</p>
<ul>
<li><strong>Health Checks</strong>: Regularly checking the health of backend servers and removing unhealthy ones from the pool.</li>
<li><strong>Failover Mechanisms</strong>: Automatically redirecting traffic to healthy servers in case of failure.</li>
</ul>
</div><h2>Configuring Health Checks</h2>
<div class='content'><p>NGINX Plus supports active health checks. Here's an example configuration:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICB1cHN0cmVhbSBiYWNrZW5kIHsKICAgICAgICBzZXJ2ZXIgYmFja2VuZDEuZXhhbXBsZS5jb207CiAgICAgICAgc2VydmVyIGJhY2tlbmQyLmV4YW1wbGUuY29tOwogICAgICAgIHNlcnZlciBiYWNrZW5kMy5leGFtcGxlLmNvbTsKCiAgICAgICAgaGVhbHRoX2NoZWNrIGludGVydmFsPTEwcyBmYWlscz0zIHBhc3Nlcz0yOwogICAgfQoKICAgIHNlcnZlciB7CiAgICAgICAgbGlzdGVuIDgwOwoKICAgICAgICBsb2NhdGlvbiAvIHsKICAgICAgICAgICAgcHJveHlfcGFzcyBodHRwOi8vYmFja2VuZDsKICAgICAgICB9CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    upstream backend {
        server backend1.example.com;
        server backend2.example.com;
        server backend3.example.com;

        health_check interval=10s fails=3 passes=2;
    }

    server {
        listen 80;

        location / {
            proxy_pass http://backend;
        }
    }
}</pre></div><div class='content'><p>In this configuration:</p>
<ul>
<li>The <code>health_check</code> directive specifies the interval for health checks and the conditions for marking a server as unhealthy.</li>
</ul>
</div><h1>Caching</h1>
<div class='content'><p>Caching can significantly reduce the load on backend servers by storing frequently accessed data. NGINX supports various caching mechanisms, including:</p>
<ul>
<li><strong>Proxy Caching</strong>: Caching responses from backend servers.</li>
<li><strong>FastCGI Caching</strong>: Caching responses from FastCGI servers.</li>
</ul>
</div><h2>Configuring Proxy Caching</h2>
<div class='content'><p>Here's an example of configuring proxy caching in NGINX:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICBwcm94eV9jYWNoZV9wYXRoIC9kYXRhL25naW54L2NhY2hlIGxldmVscz0xOjIga2V5c196b25lPW15X2NhY2hlOjEwbSBtYXhfc2l6ZT0xMGcgaW5hY3RpdmU9NjBtIHVzZV90ZW1wX3BhdGg9b2ZmOwoKICAgIHNlcnZlciB7CiAgICAgICAgbGlzdGVuIDgwOwoKICAgICAgICBsb2NhdGlvbiAvIHsKICAgICAgICAgICAgcHJveHlfY2FjaGUgbXlfY2FjaGU7CiAgICAgICAgICAgIHByb3h5X3Bhc3MgaHR0cDovL2JhY2tlbmQ7CiAgICAgICAgICAgIHByb3h5X2NhY2hlX3ZhbGlkIDIwMCAzMDIgMTBtOwogICAgICAgICAgICBwcm94eV9jYWNoZV92YWxpZCA0MDQgMW07CiAgICAgICAgfQogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    proxy_cache_path /data/nginx/cache levels=1:2 keys_zone=my_cache:10m max_size=10g inactive=60m use_temp_path=off;

    server {
        listen 80;

        location / {
            proxy_cache my_cache;
            proxy_pass http://backend;
            proxy_cache_valid 200 302 10m;
            proxy_cache_valid 404 1m;
        }
    }
}</pre></div><div class='content'><p>In this configuration:</p>
<ul>
<li>The <code>proxy_cache_path</code> directive defines the cache storage path and parameters.</li>
<li>The <code>proxy_cache</code> directive enables caching for the specified location.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Scaling NGINX involves a combination of load balancing, horizontal scaling, high availability, and caching. By understanding and implementing these strategies, you can ensure that your web applications can handle increased traffic and remain highly available. Start with basic load balancing and gradually incorporate more advanced techniques like health checks and caching to optimize your NGINX setup.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='high-availability-with-nginx'>&#x25C4;High Availability with NGINX</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Scaling NGINX</a>
	</div>
	<div class='col-4 text-end'>
					<a href='best-practices-for-production'>Best Practices for Production &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
