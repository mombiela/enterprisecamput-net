<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Uploads in Django</title>

    <link rel="alternate" href="https://campusempresa.com/django/file-uploads" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/django/file-uploads" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/django/file-uploads" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/django/file-uploads" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/django/file-uploads" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='signals'>&#x25C4;Signals</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">File Uploads in Django</a>
	</div>
	<div class='col-4 text-end'>
					<a href='caching'>Caching &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>File uploads are a common feature in web applications, allowing users to upload files such as images, documents, and videos. In Django, handling file uploads is straightforward thanks to its built-in support. This section will guide you through the process of implementing file uploads in a Django application, from basic setup to advanced configurations.</p>
</div><h1>Setting Up Your Django Project</h1>
<div class='content'><p>Before diving into file uploads, ensure you have a Django project set up. If not, create one using the following commands:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGphbmdvLWFkbWluIHN0YXJ0cHJvamVjdCBteXByb2plY3QKY2QgbXlwcm9qZWN0CnB5dGhvbiBtYW5hZ2UucHkgc3RhcnRhcHAgbXlhcHA="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>django-admin startproject myproject
cd myproject
python manage.py startapp myapp</pre></div><div class='content'><p>Add <code>myapp</code> to the <code>INSTALLED_APPS</code> list in <code>myproject/settings.py</code>.</p>
</div><h1>Configuring Media Files</h1>
<div class='content'><p>Django requires some configuration to handle media files (uploaded files). Add the following settings to <code>myproject/settings.py</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzZXR0aW5ncy5weQoKTUVESUFfVVJMID0gJy9tZWRpYS8nCk1FRElBX1JPT1QgPSBCQVNFX0RJUiAvICdtZWRpYSc="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># settings.py

MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'</pre></div><div class='content'><ul>
<li><code>MEDIA_URL</code>: The URL that serves the media files.</li>
<li><code>MEDIA_ROOT</code>: The filesystem path where uploaded files are stored.</li>
</ul>
</div><h1>Creating a Model for File Uploads</h1>
<div class='content'><p>Create a model to handle file uploads in <code>myapp/models.py</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBtb2RlbHMucHkKCmZyb20gZGphbmdvLmRiIGltcG9ydCBtb2RlbHMKCmNsYXNzIERvY3VtZW50KG1vZGVscy5Nb2RlbCk6CiAgICB0aXRsZSA9IG1vZGVscy5DaGFyRmllbGQobWF4X2xlbmd0aD0xMDApCiAgICB1cGxvYWRlZF9maWxlID0gbW9kZWxzLkZpbGVGaWVsZCh1cGxvYWRfdG89J2RvY3VtZW50cy8nKQogICAgdXBsb2FkZWRfYXQgPSBtb2RlbHMuRGF0ZVRpbWVGaWVsZChhdXRvX25vd19hZGQ9VHJ1ZSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># models.py

from django.db import models

class Document(models.Model):
    title = models.CharField(max_length=100)
    uploaded_file = models.FileField(upload_to='documents/')
    uploaded_at = models.DateTimeField(auto_now_add=True)</pre></div><div class='content'><ul>
<li><code>title</code>: A simple title for the uploaded file.</li>
<li><code>uploaded_file</code>: The file field where the uploaded file is stored.</li>
<li><code>uploaded_at</code>: The timestamp when the file was uploaded.</li>
</ul>
<p>Run the following commands to create and apply the migrations:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHl0aG9uIG1hbmFnZS5weSBtYWtlbWlncmF0aW9ucwpweXRob24gbWFuYWdlLnB5IG1pZ3JhdGU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>python manage.py makemigrations
python manage.py migrate</pre></div><div class='content'></div><h1>Creating a Form for File Uploads</h1>
<div class='content'><p>Create a form to handle file uploads in <code>myapp/forms.py</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBmb3Jtcy5weQoKZnJvbSBkamFuZ28gaW1wb3J0IGZvcm1zCmZyb20gLm1vZGVscyBpbXBvcnQgRG9jdW1lbnQKCmNsYXNzIERvY3VtZW50Rm9ybShmb3Jtcy5Nb2RlbEZvcm0pOgogICAgY2xhc3MgTWV0YToKICAgICAgICBtb2RlbCA9IERvY3VtZW50CiAgICAgICAgZmllbGRzID0gWyd0aXRsZScsICd1cGxvYWRlZF9maWxlJ10="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># forms.py

from django import forms
from .models import Document

class DocumentForm(forms.ModelForm):
    class Meta:
        model = Document
        fields = ['title', 'uploaded_file']</pre></div><div class='content'></div><h1>Handling File Uploads in Views</h1>
<div class='content'><p>Create a view to handle the file upload process in <code>myapp/views.py</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB2aWV3cy5weQoKZnJvbSBkamFuZ28uc2hvcnRjdXRzIGltcG9ydCByZW5kZXIsIHJlZGlyZWN0CmZyb20gLmZvcm1zIGltcG9ydCBEb2N1bWVudEZvcm0KZnJvbSAubW9kZWxzIGltcG9ydCBEb2N1bWVudAoKZGVmIHVwbG9hZF9maWxlKHJlcXVlc3QpOgogICAgaWYgcmVxdWVzdC5tZXRob2QgPT0gJ1BPU1QnOgogICAgICAgIGZvcm0gPSBEb2N1bWVudEZvcm0ocmVxdWVzdC5QT1NULCByZXF1ZXN0LkZJTEVTKQogICAgICAgIGlmIGZvcm0uaXNfdmFsaWQoKToKICAgICAgICAgICAgZm9ybS5zYXZlKCkKICAgICAgICAgICAgcmV0dXJuIHJlZGlyZWN0KCdmaWxlX3VwbG9hZF9zdWNjZXNzJykKICAgIGVsc2U6CiAgICAgICAgZm9ybSA9IERvY3VtZW50Rm9ybSgpCiAgICByZXR1cm4gcmVuZGVyKHJlcXVlc3QsICd1cGxvYWQuaHRtbCcsIHsnZm9ybSc6IGZvcm19KQoKZGVmIGZpbGVfdXBsb2FkX3N1Y2Nlc3MocmVxdWVzdCk6CiAgICByZXR1cm4gcmVuZGVyKHJlcXVlc3QsICd1cGxvYWRfc3VjY2Vzcy5odG1sJyk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># views.py

from django.shortcuts import render, redirect
from .forms import DocumentForm
from .models import Document

def upload_file(request):
    if request.method == 'POST':
        form = DocumentForm(request.POST, request.FILES)
        if form.is_valid():
            form.save()
            return redirect('file_upload_success')
    else:
        form = DocumentForm()
    return render(request, 'upload.html', {'form': form})

def file_upload_success(request):
    return render(request, 'upload_success.html')</pre></div><div class='content'><ul>
<li><code>upload_file</code>: Handles GET and POST requests for file uploads.</li>
<li><code>file_upload_success</code>: A simple view to display a success message after a file is uploaded.</li>
</ul>
</div><h1>Creating Templates</h1>
<div class='content'><p>Create templates to render the file upload form and success message.</p>
</div><h2>`upload.html`</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSB1cGxvYWQuaHRtbCAtLT4KCjwhRE9DVFlQRSBodG1sPgo8aHRtbD4KPGhlYWQ+CiAgICA8dGl0bGU+VXBsb2FkIEZpbGU8L3RpdGxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGgxPlVwbG9hZCBGaWxlPC9oMT4KICAgIDxmb3JtIG1ldGhvZD0icG9zdCIgZW5jdHlwZT0ibXVsdGlwYXJ0L2Zvcm0tZGF0YSI+CiAgICAgICAgeyUgY3NyZl90b2tlbiAlfQogICAgICAgIHt7IGZvcm0uYXNfcCB9fQogICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0Ij5VcGxvYWQ8L2J1dHRvbj4KICAgIDwvZm9ybT4KPC9ib2R5Pgo8L2h0bWw+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- upload.html --&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Upload File&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Upload File&lt;/h1&gt;
    &lt;form method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
        {% csrf_token %}
        {{ form.as_p }}
        &lt;button type=&quot;submit&quot;&gt;Upload&lt;/button&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h2>`upload_success.html`</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSB1cGxvYWRfc3VjY2Vzcy5odG1sIC0tPgoKPCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDx0aXRsZT5VcGxvYWQgU3VjY2VzczwvdGl0bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8aDE+RmlsZSBVcGxvYWRlZCBTdWNjZXNzZnVsbHkhPC9oMT4KPC9ib2R5Pgo8L2h0bWw+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- upload_success.html --&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Upload Success&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;File Uploaded Successfully!&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h1>Configuring URLs</h1>
<div class='content'><p>Add URL patterns to handle the file upload views in <code>myapp/urls.py</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB1cmxzLnB5Cgpmcm9tIGRqYW5nby51cmxzIGltcG9ydCBwYXRoCmZyb20gLiBpbXBvcnQgdmlld3MKCnVybHBhdHRlcm5zID0gWwogICAgcGF0aCgndXBsb2FkLycsIHZpZXdzLnVwbG9hZF9maWxlLCBuYW1lPSd1cGxvYWRfZmlsZScpLAogICAgcGF0aCgndXBsb2FkL3N1Y2Nlc3MvJywgdmlld3MuZmlsZV91cGxvYWRfc3VjY2VzcywgbmFtZT0nZmlsZV91cGxvYWRfc3VjY2VzcycpLApd"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># urls.py

from django.urls import path
from . import views

urlpatterns = [
    path('upload/', views.upload_file, name='upload_file'),
    path('upload/success/', views.file_upload_success, name='file_upload_success'),
]</pre></div><div class='content'><p>Include these URLs in the main project <code>urls.py</code> and configure media file serving during development:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBteXByb2plY3QvdXJscy5weQoKZnJvbSBkamFuZ28uY29uZiBpbXBvcnQgc2V0dGluZ3MKZnJvbSBkamFuZ28uY29uZi51cmxzLnN0YXRpYyBpbXBvcnQgc3RhdGljCmZyb20gZGphbmdvLmNvbnRyaWIgaW1wb3J0IGFkbWluCmZyb20gZGphbmdvLnVybHMgaW1wb3J0IHBhdGgsIGluY2x1ZGUKCnVybHBhdHRlcm5zID0gWwogICAgcGF0aCgnYWRtaW4vJywgYWRtaW4uc2l0ZS51cmxzKSwKICAgIHBhdGgoJ215YXBwLycsIGluY2x1ZGUoJ215YXBwLnVybHMnKSksCl0KCmlmIHNldHRpbmdzLkRFQlVHOgogICAgdXJscGF0dGVybnMgKz0gc3RhdGljKHNldHRpbmdzLk1FRElBX1VSTCwgZG9jdW1lbnRfcm9vdD1zZXR0aW5ncy5NRURJQV9ST09UKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># myproject/urls.py

from django.conf import settings
from django.conf.urls.static import static
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('myapp/', include('myapp.urls')),
]

if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>In this section, you learned how to implement file uploads in a Django application. We covered:</p>
<ul>
<li>Configuring media files in Django settings.</li>
<li>Creating a model to store uploaded files.</li>
<li>Building a form to handle file uploads.</li>
<li>Writing views to process file uploads.</li>
<li>Creating templates to render the upload form and success message.</li>
<li>Configuring URLs to handle file upload requests.</li>
</ul>
<p>With these steps, you can now handle file uploads in your Django applications, providing a robust and user-friendly feature for your users.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='signals'>&#x25C4;Signals</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">File Uploads in Django</a>
	</div>
	<div class='col-4 text-end'>
					<a href='caching'>Caching &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
