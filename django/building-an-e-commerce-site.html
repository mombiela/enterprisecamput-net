<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building an E-commerce Site with Django</title>

    <link rel="alternate" href="https://campusempresa.com/django/building-an-e-commerce-site" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/django/building-an-e-commerce-site" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/django/building-an-e-commerce-site" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/django/building-an-e-commerce-site" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/django/building-an-e-commerce-site" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='building-a-blog-application'>&#x25C4;Building a Blog Application</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Building an E-commerce Site with Django</a>
	</div>
	<div class='col-4 text-end'>
					<a href='building-a-social-network'>Building a Social Network &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In this course, we will guide you through the process of building a fully functional e-commerce site using Django, a high-level Python web framework. This course is structured to take you from a beginner to an advanced level, covering all the essential aspects of Django development.</p>
</div><h1>Prerequisites</h1>
<div class='content'><p>Before starting this course, you should have:</p>
<ul>
<li>Basic knowledge of Python programming.</li>
<li>Familiarity with HTML, CSS, and JavaScript.</li>
<li>Basic understanding of web development concepts.</li>
</ul>
</div><h1>Setting Up the Development Environment</h1>
<div class='content'><ul>
<li>Install Python and Django.</li>
<li>Set up a virtual environment.</li>
<li>Create a new Django project.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBJbnN0YWxsIERqYW5nbwpwaXAgaW5zdGFsbCBkamFuZ28KCiMgQ3JlYXRlIGEgbmV3IERqYW5nbyBwcm9qZWN0CmRqYW5nby1hZG1pbiBzdGFydHByb2plY3QgZWNvbW1lcmNlX3NpdGUKCiMgTmF2aWdhdGUgdG8gdGhlIHByb2plY3QgZGlyZWN0b3J5CmNkIGVjb21tZXJjZV9zaXRlCgojIENyZWF0ZSBhIHZpcnR1YWwgZW52aXJvbm1lbnQKcHl0aG9uIC1tIHZlbnYgdmVudgoKIyBBY3RpdmF0ZSB0aGUgdmlydHVhbCBlbnZpcm9ubWVudAojIE9uIFdpbmRvd3MKdmVudlxTY3JpcHRzXGFjdGl2YXRlCiMgT24gbWFjT1MvTGludXgKc291cmNlIHZlbnYvYmluL2FjdGl2YXRl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Install Django
pip install django

# Create a new Django project
django-admin startproject ecommerce_site

# Navigate to the project directory
cd ecommerce_site

# Create a virtual environment
python -m venv venv

# Activate the virtual environment
# On Windows
venv\Scripts\activate
# On macOS/Linux
source venv/bin/activate</pre></div><div class='content'></div><h1>Creating the Django App</h1>
<div class='content'><ul>
<li>Create a new Django app for the e-commerce functionality.</li>
<li>Register the app in the project settings.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDcmVhdGUgYSBuZXcgYXBwCnB5dGhvbiBtYW5hZ2UucHkgc3RhcnRhcHAgc3RvcmUKCiMgUmVnaXN0ZXIgdGhlIGFwcCBpbiBzZXR0aW5ncy5weQojIGVjb21tZXJjZV9zaXRlL3NldHRpbmdzLnB5CklOU1RBTExFRF9BUFBTID0gWwogICAgLi4uCiAgICAnc3RvcmUnLApd"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Create a new app
python manage.py startapp store

# Register the app in settings.py
# ecommerce_site/settings.py
INSTALLED_APPS = [
    ...
    'store',
]</pre></div><div class='content'></div><h1>Designing the Models</h1>
<div class='content'><ul>
<li>Define the models for products, categories, and orders.</li>
<li>Use Django's ORM to interact with the database.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzdG9yZS9tb2RlbHMucHkKZnJvbSBkamFuZ28uZGIgaW1wb3J0IG1vZGVscwoKY2xhc3MgQ2F0ZWdvcnkobW9kZWxzLk1vZGVsKToKICAgIG5hbWUgPSBtb2RlbHMuQ2hhckZpZWxkKG1heF9sZW5ndGg9MjU1KQogICAgc2x1ZyA9IG1vZGVscy5TbHVnRmllbGQodW5pcXVlPVRydWUpCgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYubmFtZQoKY2xhc3MgUHJvZHVjdChtb2RlbHMuTW9kZWwpOgogICAgY2F0ZWdvcnkgPSBtb2RlbHMuRm9yZWlnbktleShDYXRlZ29yeSwgcmVsYXRlZF9uYW1lPSdwcm9kdWN0cycsIG9uX2RlbGV0ZT1tb2RlbHMuQ0FTQ0FERSkKICAgIG5hbWUgPSBtb2RlbHMuQ2hhckZpZWxkKG1heF9sZW5ndGg9MjU1KQogICAgc2x1ZyA9IG1vZGVscy5TbHVnRmllbGQodW5pcXVlPVRydWUpCiAgICBkZXNjcmlwdGlvbiA9IG1vZGVscy5UZXh0RmllbGQoKQogICAgcHJpY2UgPSBtb2RlbHMuRGVjaW1hbEZpZWxkKG1heF9kaWdpdHM9MTAsIGRlY2ltYWxfcGxhY2VzPTIpCiAgICBzdG9jayA9IG1vZGVscy5JbnRlZ2VyRmllbGQoKQogICAgYXZhaWxhYmxlID0gbW9kZWxzLkJvb2xlYW5GaWVsZChkZWZhdWx0PVRydWUpCiAgICBjcmVhdGVkID0gbW9kZWxzLkRhdGVUaW1lRmllbGQoYXV0b19ub3dfYWRkPVRydWUpCiAgICB1cGRhdGVkID0gbW9kZWxzLkRhdGVUaW1lRmllbGQoYXV0b19ub3c9VHJ1ZSkKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5uYW1lCgpjbGFzcyBPcmRlcihtb2RlbHMuTW9kZWwpOgogICAgcHJvZHVjdCA9IG1vZGVscy5Gb3JlaWduS2V5KFByb2R1Y3QsIHJlbGF0ZWRfbmFtZT0nb3JkZXJzJywgb25fZGVsZXRlPW1vZGVscy5DQVNDQURFKQogICAgcXVhbnRpdHkgPSBtb2RlbHMuSW50ZWdlckZpZWxkKCkKICAgIGNyZWF0ZWQgPSBtb2RlbHMuRGF0ZVRpbWVGaWVsZChhdXRvX25vd19hZGQ9VHJ1ZSkKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gZidPcmRlciB7c2VsZi5pZH0n"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># store/models.py
from django.db import models

class Category(models.Model):
    name = models.CharField(max_length=255)
    slug = models.SlugField(unique=True)

    def __str__(self):
        return self.name

class Product(models.Model):
    category = models.ForeignKey(Category, related_name='products', on_delete=models.CASCADE)
    name = models.CharField(max_length=255)
    slug = models.SlugField(unique=True)
    description = models.TextField()
    price = models.DecimalField(max_digits=10, decimal_places=2)
    stock = models.IntegerField()
    available = models.BooleanField(default=True)
    created = models.DateTimeField(auto_now_add=True)
    updated = models.DateTimeField(auto_now=True)

    def __str__(self):
        return self.name

class Order(models.Model):
    product = models.ForeignKey(Product, related_name='orders', on_delete=models.CASCADE)
    quantity = models.IntegerField()
    created = models.DateTimeField(auto_now_add=True)

    def __str__(self):
        return f'Order {self.id}'</pre></div><div class='content'></div><h1>Creating Views and Templates</h1>
<div class='content'><ul>
<li>Create views to display products and categories.</li>
<li>Use Django templates to render HTML.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzdG9yZS92aWV3cy5weQpmcm9tIGRqYW5nby5zaG9ydGN1dHMgaW1wb3J0IHJlbmRlciwgZ2V0X29iamVjdF9vcl80MDQKZnJvbSAubW9kZWxzIGltcG9ydCBDYXRlZ29yeSwgUHJvZHVjdAoKZGVmIHByb2R1Y3RfbGlzdChyZXF1ZXN0LCBjYXRlZ29yeV9zbHVnPU5vbmUpOgogICAgY2F0ZWdvcnkgPSBOb25lCiAgICBjYXRlZ29yaWVzID0gQ2F0ZWdvcnkub2JqZWN0cy5hbGwoKQogICAgcHJvZHVjdHMgPSBQcm9kdWN0Lm9iamVjdHMuZmlsdGVyKGF2YWlsYWJsZT1UcnVlKQogICAgaWYgY2F0ZWdvcnlfc2x1ZzoKICAgICAgICBjYXRlZ29yeSA9IGdldF9vYmplY3Rfb3JfNDA0KENhdGVnb3J5LCBzbHVnPWNhdGVnb3J5X3NsdWcpCiAgICAgICAgcHJvZHVjdHMgPSBwcm9kdWN0cy5maWx0ZXIoY2F0ZWdvcnk9Y2F0ZWdvcnkpCiAgICByZXR1cm4gcmVuZGVyKHJlcXVlc3QsICdzdG9yZS9wcm9kdWN0L2xpc3QuaHRtbCcsIHsnY2F0ZWdvcnknOiBjYXRlZ29yeSwgJ2NhdGVnb3JpZXMnOiBjYXRlZ29yaWVzLCAncHJvZHVjdHMnOiBwcm9kdWN0c30pCgpkZWYgcHJvZHVjdF9kZXRhaWwocmVxdWVzdCwgaWQsIHNsdWcpOgogICAgcHJvZHVjdCA9IGdldF9vYmplY3Rfb3JfNDA0KFByb2R1Y3QsIGlkPWlkLCBzbHVnPXNsdWcsIGF2YWlsYWJsZT1UcnVlKQogICAgcmV0dXJuIHJlbmRlcihyZXF1ZXN0LCAnc3RvcmUvcHJvZHVjdC9kZXRhaWwuaHRtbCcsIHsncHJvZHVjdCc6IHByb2R1Y3R9KQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># store/views.py
from django.shortcuts import render, get_object_or_404
from .models import Category, Product

def product_list(request, category_slug=None):
    category = None
    categories = Category.objects.all()
    products = Product.objects.filter(available=True)
    if category_slug:
        category = get_object_or_404(Category, slug=category_slug)
        products = products.filter(category=category)
    return render(request, 'store/product/list.html', {'category': category, 'categories': categories, 'products': products})

def product_detail(request, id, slug):
    product = get_object_or_404(Product, id=id, slug=slug, available=True)
    return render(request, 'store/product/detail.html', {'product': product})</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSBzdG9yZS90ZW1wbGF0ZXMvc3RvcmUvcHJvZHVjdC9saXN0Lmh0bWwgLS0+CnslIGV4dGVuZHMgImJhc2UuaHRtbCIgJX0KCnslIGJsb2NrIGNvbnRlbnQgJX0KPGgxPlByb2R1Y3QgTGlzdDwvaDE+Cjx1bD4KICAgIHslIGZvciBwcm9kdWN0IGluIHByb2R1Y3RzICV9CiAgICA8bGk+CiAgICAgICAgPGEgaHJlZj0ie3sgcHJvZHVjdC5nZXRfYWJzb2x1dGVfdXJsIH19Ij57eyBwcm9kdWN0Lm5hbWUgfX08L2E+CiAgICA8L2xpPgogICAgeyUgZW5kZm9yICV9CjwvdWw+CnslIGVuZGJsb2NrICV9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- store/templates/store/product/list.html --&gt;
{% extends &quot;base.html&quot; %}

{% block content %}
&lt;h1&gt;Product List&lt;/h1&gt;
&lt;ul&gt;
    {% for product in products %}
    &lt;li&gt;
        &lt;a href=&quot;{{ product.get_absolute_url }}&quot;&gt;{{ product.name }}&lt;/a&gt;
    &lt;/li&gt;
    {% endfor %}
&lt;/ul&gt;
{% endblock %}</pre></div><div class='content'></div><h1>Adding User Authentication</h1>
<div class='content'><ul>
<li>Implement user registration, login, and logout functionality.</li>
<li>Use Django's built-in authentication system.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzdG9yZS9mb3Jtcy5weQpmcm9tIGRqYW5nbyBpbXBvcnQgZm9ybXMKZnJvbSBkamFuZ28uY29udHJpYi5hdXRoLm1vZGVscyBpbXBvcnQgVXNlcgoKY2xhc3MgVXNlclJlZ2lzdHJhdGlvbkZvcm0oZm9ybXMuTW9kZWxGb3JtKToKICAgIHBhc3N3b3JkID0gZm9ybXMuQ2hhckZpZWxkKGxhYmVsPSdQYXNzd29yZCcsIHdpZGdldD1mb3Jtcy5QYXNzd29yZElucHV0KQogICAgcGFzc3dvcmQyID0gZm9ybXMuQ2hhckZpZWxkKGxhYmVsPSdSZXBlYXQgcGFzc3dvcmQnLCB3aWRnZXQ9Zm9ybXMuUGFzc3dvcmRJbnB1dCkKCiAgICBjbGFzcyBNZXRhOgogICAgICAgIG1vZGVsID0gVXNlcgogICAgICAgIGZpZWxkcyA9ICgndXNlcm5hbWUnLCAnZmlyc3RfbmFtZScsICdlbWFpbCcpCgogICAgZGVmIGNsZWFuX3Bhc3N3b3JkMihzZWxmKToKICAgICAgICBjZCA9IHNlbGYuY2xlYW5lZF9kYXRhCiAgICAgICAgaWYgY2RbJ3Bhc3N3b3JkJ10gIT0gY2RbJ3Bhc3N3b3JkMiddOgogICAgICAgICAgICByYWlzZSBmb3Jtcy5WYWxpZGF0aW9uRXJyb3IoJ1Bhc3N3b3JkcyBkb25cJ3QgbWF0Y2guJykKICAgICAgICByZXR1cm4gY2RbJ3Bhc3N3b3JkMidd"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># store/forms.py
from django import forms
from django.contrib.auth.models import User

class UserRegistrationForm(forms.ModelForm):
    password = forms.CharField(label='Password', widget=forms.PasswordInput)
    password2 = forms.CharField(label='Repeat password', widget=forms.PasswordInput)

    class Meta:
        model = User
        fields = ('username', 'first_name', 'email')

    def clean_password2(self):
        cd = self.cleaned_data
        if cd['password'] != cd['password2']:
            raise forms.ValidationError('Passwords don\'t match.')
        return cd['password2']</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzdG9yZS92aWV3cy5weSAoYWRkaXRpb25hbCB2aWV3cyBmb3IgYXV0aGVudGljYXRpb24pCmZyb20gZGphbmdvLmNvbnRyaWIuYXV0aCBpbXBvcnQgYXV0aGVudGljYXRlLCBsb2dpbgpmcm9tIC5mb3JtcyBpbXBvcnQgVXNlclJlZ2lzdHJhdGlvbkZvcm0KCmRlZiByZWdpc3RlcihyZXF1ZXN0KToKICAgIGlmIHJlcXVlc3QubWV0aG9kID09ICdQT1NUJzoKICAgICAgICBmb3JtID0gVXNlclJlZ2lzdHJhdGlvbkZvcm0ocmVxdWVzdC5QT1NUKQogICAgICAgIGlmIGZvcm0uaXNfdmFsaWQoKToKICAgICAgICAgICAgbmV3X3VzZXIgPSBmb3JtLnNhdmUoY29tbWl0PUZhbHNlKQogICAgICAgICAgICBuZXdfdXNlci5zZXRfcGFzc3dvcmQoZm9ybS5jbGVhbmVkX2RhdGFbJ3Bhc3N3b3JkJ10pCiAgICAgICAgICAgIG5ld191c2VyLnNhdmUoKQogICAgICAgICAgICByZXR1cm4gcmVuZGVyKHJlcXVlc3QsICdzdG9yZS9yZWdpc3Rlcl9kb25lLmh0bWwnLCB7J25ld191c2VyJzogbmV3X3VzZXJ9KQogICAgZWxzZToKICAgICAgICBmb3JtID0gVXNlclJlZ2lzdHJhdGlvbkZvcm0oKQogICAgcmV0dXJuIHJlbmRlcihyZXF1ZXN0LCAnc3RvcmUvcmVnaXN0ZXIuaHRtbCcsIHsnZm9ybSc6IGZvcm19KQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># store/views.py (additional views for authentication)
from django.contrib.auth import authenticate, login
from .forms import UserRegistrationForm

def register(request):
    if request.method == 'POST':
        form = UserRegistrationForm(request.POST)
        if form.is_valid():
            new_user = form.save(commit=False)
            new_user.set_password(form.cleaned_data['password'])
            new_user.save()
            return render(request, 'store/register_done.html', {'new_user': new_user})
    else:
        form = UserRegistrationForm()
    return render(request, 'store/register.html', {'form': form})</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSBzdG9yZS90ZW1wbGF0ZXMvc3RvcmUvcmVnaXN0ZXIuaHRtbCAtLT4KeyUgZXh0ZW5kcyAiYmFzZS5odG1sIiAlfQoKeyUgYmxvY2sgY29udGVudCAlfQo8aDE+UmVnaXN0ZXI8L2gxPgo8Zm9ybSBtZXRob2Q9InBvc3QiPgogICAge3sgZm9ybS5hc19wIH19CiAgICB7JSBjc3JmX3Rva2VuICV9CiAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCI+UmVnaXN0ZXI8L2J1dHRvbj4KPC9mb3JtPgp7JSBlbmRibG9jayAlfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- store/templates/store/register.html --&gt;
{% extends &quot;base.html&quot; %}

{% block content %}
&lt;h1&gt;Register&lt;/h1&gt;
&lt;form method=&quot;post&quot;&gt;
    {{ form.as_p }}
    {% csrf_token %}
    &lt;button type=&quot;submit&quot;&gt;Register&lt;/button&gt;
&lt;/form&gt;
{% endblock %}</pre></div><div class='content'></div><h1>Implementing Shopping Cart Functionality</h1>
<div class='content'><ul>
<li>Create a shopping cart using Django sessions.</li>
<li>Add views to manage the cart.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzdG9yZS9jYXJ0LnB5CmZyb20gZGVjaW1hbCBpbXBvcnQgRGVjaW1hbApmcm9tIGRqYW5nby5jb25mIGltcG9ydCBzZXR0aW5ncwpmcm9tIC5tb2RlbHMgaW1wb3J0IFByb2R1Y3QKCmNsYXNzIENhcnQob2JqZWN0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCByZXF1ZXN0KToKICAgICAgICBzZWxmLnNlc3Npb24gPSByZXF1ZXN0LnNlc3Npb24KICAgICAgICBjYXJ0ID0gc2VsZi5zZXNzaW9uLmdldChzZXR0aW5ncy5DQVJUX1NFU1NJT05fSUQpCiAgICAgICAgaWYgbm90IGNhcnQ6CiAgICAgICAgICAgIGNhcnQgPSBzZWxmLnNlc3Npb25bc2V0dGluZ3MuQ0FSVF9TRVNTSU9OX0lEXSA9IHt9CiAgICAgICAgc2VsZi5jYXJ0ID0gY2FydAoKICAgIGRlZiBhZGQoc2VsZiwgcHJvZHVjdCwgcXVhbnRpdHk9MSwgdXBkYXRlX3F1YW50aXR5PUZhbHNlKToKICAgICAgICBwcm9kdWN0X2lkID0gc3RyKHByb2R1Y3QuaWQpCiAgICAgICAgaWYgcHJvZHVjdF9pZCBub3QgaW4gc2VsZi5jYXJ0OgogICAgICAgICAgICBzZWxmLmNhcnRbcHJvZHVjdF9pZF0gPSB7J3F1YW50aXR5JzogMCwgJ3ByaWNlJzogc3RyKHByb2R1Y3QucHJpY2UpfQogICAgICAgIGlmIHVwZGF0ZV9xdWFudGl0eToKICAgICAgICAgICAgc2VsZi5jYXJ0W3Byb2R1Y3RfaWRdWydxdWFudGl0eSddID0gcXVhbnRpdHkKICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmNhcnRbcHJvZHVjdF9pZF1bJ3F1YW50aXR5J10gKz0gcXVhbnRpdHkKICAgICAgICBzZWxmLnNhdmUoKQoKICAgIGRlZiBzYXZlKHNlbGYpOgogICAgICAgIHNlbGYuc2Vzc2lvbi5tb2RpZmllZCA9IFRydWUKCiAgICBkZWYgcmVtb3ZlKHNlbGYsIHByb2R1Y3QpOgogICAgICAgIHByb2R1Y3RfaWQgPSBzdHIocHJvZHVjdC5pZCkKICAgICAgICBpZiBwcm9kdWN0X2lkIGluIHNlbGYuY2FydDoKICAgICAgICAgICAgZGVsIHNlbGYuY2FydFtwcm9kdWN0X2lkXQogICAgICAgICAgICBzZWxmLnNhdmUoKQoKICAgIGRlZiBfX2l0ZXJfXyhzZWxmKToKICAgICAgICBwcm9kdWN0X2lkcyA9IHNlbGYuY2FydC5rZXlzKCkKICAgICAgICBwcm9kdWN0cyA9IFByb2R1Y3Qub2JqZWN0cy5maWx0ZXIoaWRfX2luPXByb2R1Y3RfaWRzKQogICAgICAgIGZvciBwcm9kdWN0IGluIHByb2R1Y3RzOgogICAgICAgICAgICBzZWxmLmNhcnRbc3RyKHByb2R1Y3QuaWQpXVsncHJvZHVjdCddID0gcHJvZHVjdAoKICAgICAgICBmb3IgaXRlbSBpbiBzZWxmLmNhcnQudmFsdWVzKCk6CiAgICAgICAgICAgIGl0ZW1bJ3ByaWNlJ10gPSBEZWNpbWFsKGl0ZW1bJ3ByaWNlJ10pCiAgICAgICAgICAgIGl0ZW1bJ3RvdGFsX3ByaWNlJ10gPSBpdGVtWydwcmljZSddICogaXRlbVsncXVhbnRpdHknXQogICAgICAgICAgICB5aWVsZCBpdGVtCgogICAgZGVmIF9fbGVuX18oc2VsZik6CiAgICAgICAgcmV0dXJuIHN1bShpdGVtWydxdWFudGl0eSddIGZvciBpdGVtIGluIHNlbGYuY2FydC52YWx1ZXMoKSkKCiAgICBkZWYgZ2V0X3RvdGFsX3ByaWNlKHNlbGYpOgogICAgICAgIHJldHVybiBzdW0oRGVjaW1hbChpdGVtWydwcmljZSddKSAqIGl0ZW1bJ3F1YW50aXR5J10gZm9yIGl0ZW0gaW4gc2VsZi5jYXJ0LnZhbHVlcygpKQoKICAgIGRlZiBjbGVhcihzZWxmKToKICAgICAgICBkZWwgc2VsZi5zZXNzaW9uW3NldHRpbmdzLkNBUlRfU0VTU0lPTl9JRF0KICAgICAgICBzZWxmLnNhdmUoKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># store/cart.py
from decimal import Decimal
from django.conf import settings
from .models import Product

class Cart(object):
    def __init__(self, request):
        self.session = request.session
        cart = self.session.get(settings.CART_SESSION_ID)
        if not cart:
            cart = self.session[settings.CART_SESSION_ID] = {}
        self.cart = cart

    def add(self, product, quantity=1, update_quantity=False):
        product_id = str(product.id)
        if product_id not in self.cart:
            self.cart[product_id] = {'quantity': 0, 'price': str(product.price)}
        if update_quantity:
            self.cart[product_id]['quantity'] = quantity
        else:
            self.cart[product_id]['quantity'] += quantity
        self.save()

    def save(self):
        self.session.modified = True

    def remove(self, product):
        product_id = str(product.id)
        if product_id in self.cart:
            del self.cart[product_id]
            self.save()

    def __iter__(self):
        product_ids = self.cart.keys()
        products = Product.objects.filter(id__in=product_ids)
        for product in products:
            self.cart[str(product.id)]['product'] = product

        for item in self.cart.values():
            item['price'] = Decimal(item['price'])
            item['total_price'] = item['price'] * item['quantity']
            yield item

    def __len__(self):
        return sum(item['quantity'] for item in self.cart.values())

    def get_total_price(self):
        return sum(Decimal(item['price']) * item['quantity'] for item in self.cart.values())

    def clear(self):
        del self.session[settings.CART_SESSION_ID]
        self.save()</pre></div><div class='content'></div><h1>Processing Orders</h1>
<div class='content'><ul>
<li>Create order models and views.</li>
<li>Integrate payment gateways (e.g., Stripe, PayPal).</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzdG9yZS9tb2RlbHMucHkgKGFkZGl0aW9uYWwgb3JkZXIgbW9kZWxzKQpjbGFzcyBPcmRlcihtb2RlbHMuTW9kZWwpOgogICAgdXNlciA9IG1vZGVscy5Gb3JlaWduS2V5KFVzZXIsIHJlbGF0ZWRfbmFtZT0nb3JkZXJzJywgb25fZGVsZXRlPW1vZGVscy5DQVNDQURFKQogICAgZmlyc3RfbmFtZSA9IG1vZGVscy5DaGFyRmllbGQobWF4X2xlbmd0aD01MCkKICAgIGxhc3RfbmFtZSA9IG1vZGVscy5DaGFyRmllbGQobWF4X2xlbmd0aD01MCkKICAgIGVtYWlsID0gbW9kZWxzLkVtYWlsRmllbGQoKQogICAgYWRkcmVzcyA9IG1vZGVscy5DaGFyRmllbGQobWF4X2xlbmd0aD0yNTApCiAgICBwb3N0YWxfY29kZSA9IG1vZGVscy5DaGFyRmllbGQobWF4X2xlbmd0aD0yMCkKICAgIGNpdHkgPSBtb2RlbHMuQ2hhckZpZWxkKG1heF9sZW5ndGg9MTAwKQogICAgY3JlYXRlZCA9IG1vZGVscy5EYXRlVGltZUZpZWxkKGF1dG9fbm93X2FkZD1UcnVlKQogICAgdXBkYXRlZCA9IG1vZGVscy5EYXRlVGltZUZpZWxkKGF1dG9fbm93PVRydWUpCiAgICBwYWlkID0gbW9kZWxzLkJvb2xlYW5GaWVsZChkZWZhdWx0PUZhbHNlKQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIHJldHVybiBmJ09yZGVyIHtzZWxmLmlkfScKCmNsYXNzIE9yZGVySXRlbShtb2RlbHMuTW9kZWwpOgogICAgb3JkZXIgPSBtb2RlbHMuRm9yZWlnbktleShPcmRlciwgcmVsYXRlZF9uYW1lPSdpdGVtcycsIG9uX2RlbGV0ZT1tb2RlbHMuQ0FTQ0FERSkKICAgIHByb2R1Y3QgPSBtb2RlbHMuRm9yZWlnbktleShQcm9kdWN0LCByZWxhdGVkX25hbWU9J29yZGVyX2l0ZW1zJywgb25fZGVsZXRlPW1vZGVscy5DQVNDQURFKQogICAgcHJpY2UgPSBtb2RlbHMuRGVjaW1hbEZpZWxkKG1heF9kaWdpdHM9MTAsIGRlY2ltYWxfcGxhY2VzPTIpCiAgICBxdWFudGl0eSA9IG1vZGVscy5Qb3NpdGl2ZUludGVnZXJGaWVsZChkZWZhdWx0PTEpCgogICAgZGVmIF9fc3RyX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGYne3NlbGYuaWR9Jw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># store/models.py (additional order models)
class Order(models.Model):
    user = models.ForeignKey(User, related_name='orders', on_delete=models.CASCADE)
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)
    email = models.EmailField()
    address = models.CharField(max_length=250)
    postal_code = models.CharField(max_length=20)
    city = models.CharField(max_length=100)
    created = models.DateTimeField(auto_now_add=True)
    updated = models.DateTimeField(auto_now=True)
    paid = models.BooleanField(default=False)

    def __str__(self):
        return f'Order {self.id}'

class OrderItem(models.Model):
    order = models.ForeignKey(Order, related_name='items', on_delete=models.CASCADE)
    product = models.ForeignKey(Product, related_name='order_items', on_delete=models.CASCADE)
    price = models.DecimalField(max_digits=10, decimal_places=2)
    quantity = models.PositiveIntegerField(default=1)

    def __str__(self):
        return f'{self.id}'</pre></div><div class='content'></div><h1>Advanced Features</h1>
<div class='content'><ul>
<li>Implement product reviews and ratings.</li>
<li>Add search functionality.</li>
<li>Optimize performance with caching and database indexing.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>By the end of this course, you will have built a comprehensive e-commerce site using Django. You will have learned how to set up a Django project, create models, views, and templates, implement user authentication, manage a shopping cart, process orders, and add advanced features. This knowledge will provide a solid foundation for developing more complex web applications using Django.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='building-a-blog-application'>&#x25C4;Building a Blog Application</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Building an E-commerce Site with Django</a>
	</div>
	<div class='col-4 text-end'>
					<a href='building-a-social-network'>Building a Social Network &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
