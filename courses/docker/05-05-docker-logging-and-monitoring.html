<!DOCTYPE html>
<html lang="en">
<head>
    <title> Docker Logging and Monitoring </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/docker/05-05-docker-logging-and-monitoring" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/docker/05-05-docker-logging-and-monitoring" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/docker/05-05-docker-logging-and-monitoring" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.188a386f47.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "docker";
  		var TEMA_NAME = "5-5";
  		var TYPE = "mod";
  		var PATH = "mod/docker/05-05-docker-logging-and-monitoring";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/docker/05-05-docker-logging-and-monitoring" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/docker/05-05-docker-logging-and-monitoring" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="docker">
		<a  href="#" class="text-secondary d-none" data-read-mod="docker" data-read-unit="5-5" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="docker" data-unread-unit="5-5" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-04-optimizing-docker-images' title="Optimizing Docker Images" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-04-optimizing-docker-images' title="Optimizing Docker Images" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Docker Logging and Monitoring</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='06-01-ci-cd-with-docker' title="CI/CD with Docker" class="py-2 px-3 btn btn-primary"
				data-read-mod="docker" data-read-unit="5-5">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='06-01-ci-cd-with-docker' title="CI/CD with Docker" class="py-2 px-3 btn btn-primary" 
				data-read-mod="docker" data-read-unit="5-5">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'></div><h2>Introduction</h2>
<div class='content'><p>In this section, we will explore the essential concepts and practices for logging and monitoring Docker containers. Effective logging and monitoring are crucial for maintaining the health, performance, and security of your containerized applications.</p>
</div><h2>Key Concepts</h2>
<div class='content'></div><h3>Logging</h3>
<div class='content'><ul>
<li><strong>Log Types</strong>: Application logs, system logs, and Docker daemon logs.</li>
<li><strong>Log Drivers</strong>: Mechanisms to control how logs are stored and where they are sent.</li>
<li><strong>Log Rotation</strong>: Managing log file sizes and retention.</li>
</ul>
</div><h3>Monitoring</h3>
<div class='content'><ul>
<li><strong>Metrics</strong>: CPU usage, memory usage, network I/O, and disk I/O.</li>
<li><strong>Health Checks</strong>: Automated checks to ensure containers are running as expected.</li>
<li><strong>Alerting</strong>: Notifications based on predefined thresholds or anomalies.</li>
</ul>
</div><h2>Docker Logging</h2>
<div class='content'></div><h3>Log Drivers</h3>
<div class='content'><p>Docker supports various log drivers to handle container logs. Some common log drivers include:</p>
<ul>
<li><strong>json-file</strong>: Default driver, stores logs in JSON format.</li>
<li><strong>syslog</strong>: Sends logs to a syslog server.</li>
<li><strong>journald</strong>: Integrates with systemd journal.</li>
<li><strong>gelf</strong>: Sends logs to Graylog Extended Log Format (GELF) endpoints.</li>
<li><strong>fluentd</strong>: Sends logs to Fluentd.</li>
</ul>
</div><h3>Configuring Log Drivers</h3>
<div class='content'><p>You can configure the log driver for a container using the <code>--log-driver</code> option:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtLWxvZy1kcml2ZXI9c3lzbG9nIG15LWNvbnRhaW5lcg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run --log-driver=syslog my-container</pre></div><div class='content'></div><h3>Log Rotation</h3>
<div class='content'><p>To prevent log files from consuming too much disk space, you can configure log rotation:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJsb2ctZHJpdmVyIjogImpzb24tZmlsZSIsCiAgImxvZy1vcHRzIjogewogICAgIm1heC1zaXplIjogIjEwbSIsCiAgICAibWF4LWZpbGUiOiAiMyIKICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;log-driver&quot;: &quot;json-file&quot;,
  &quot;log-opts&quot;: {
    &quot;max-size&quot;: &quot;10m&quot;,
    &quot;max-file&quot;: &quot;3&quot;
  }
}</pre></div><div class='content'><p>Add this configuration to the Docker daemon's <code>daemon.json</code> file and restart Docker.</p>
</div><h3>Practical Example</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtLWxvZy1kcml2ZXI9anNvbi1maWxlIC0tbG9nLW9wdCBtYXgtc2l6ZT0xMG0gLS1sb2ctb3B0IG1heC1maWxlPTMgbXktY29udGFpbmVy"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run --log-driver=json-file --log-opt max-size=10m --log-opt max-file=3 my-container</pre></div><div class='content'><p>This command runs a container with the <code>json-file</code> log driver, limiting log files to 10MB each and keeping a maximum of 3 files.</p>
</div><h2>Docker Monitoring</h2>
<div class='content'></div><h3>Metrics Collection</h3>
<div class='content'><p>Docker provides built-in metrics that can be accessed using the <code>docker stats</code> command:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHN0YXRz"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker stats</pre></div><div class='content'><p>This command displays real-time metrics for running containers, including CPU, memory, network, and disk usage.</p>
</div><h3>Health Checks</h3>
<div class='content'><p>Health checks ensure that your containers are running correctly. You can define health checks in your Dockerfile:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SEVBTFRIQ0hFQ0sgLS1pbnRlcnZhbD0zMHMgLS10aW1lb3V0PTEwcyAtLXJldHJpZXM9MyBDTUQgY3VybCAtZiBodHRwOi8vbG9jYWxob3N0LyB8fCBleGl0IDE="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>HEALTHCHECK --interval=30s --timeout=10s --retries=3 CMD curl -f http://localhost/ || exit 1</pre></div><div class='content'></div><h3>Monitoring Tools</h3>
<div class='content'><p>Several tools can help you monitor Docker containers:</p>
<ul>
<li><strong>Prometheus</strong>: Open-source monitoring and alerting toolkit.</li>
<li><strong>Grafana</strong>: Visualization tool that integrates with Prometheus.</li>
<li><strong>cAdvisor</strong>: Container Advisor, provides resource usage and performance characteristics.</li>
<li><strong>ELK Stack</strong>: Elasticsearch, Logstash, and Kibana for log aggregation and analysis.</li>
</ul>
</div><h3>Practical Example: Using Prometheus and Grafana</h3>
<div class='content'><ol>
<li>
<p><strong>Set up Prometheus</strong>: Create a <code>prometheus.yml</code> configuration file:</p>
<pre><code class="language-yaml">global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'docker'
    static_configs:
      - targets: ['localhost:9323']
</code></pre>
</li>
<li>
<p><strong>Run Prometheus</strong>:</p>
<pre><code class="language-bash">docker run -d -p 9090:9090 -v /path/to/prometheus.yml:/etc/prometheus/prometheus.yml prom/prometheus
</code></pre>
</li>
<li>
<p><strong>Set up Grafana</strong>:</p>
<pre><code class="language-bash">docker run -d -p 3000:3000 grafana/grafana
</code></pre>
</li>
<li>
<p><strong>Add Prometheus as a data source in Grafana</strong> and create dashboards to visualize metrics.</p>
</li>
</ol>
</div><h2>Practical Exercises</h2>
<div class='content'></div><h3>Exercise 1: Configure Log Rotation</h3>
<div class='content'><ol>
<li>Run a container with log rotation settings.</li>
<li>Verify that log files are rotated as expected.</li>
</ol>
<p><strong>Solution:</strong></p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtLWxvZy1kcml2ZXI9anNvbi1maWxlIC0tbG9nLW9wdCBtYXgtc2l6ZT01bSAtLWxvZy1vcHQgbWF4LWZpbGU9MiBteS1jb250YWluZXI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run --log-driver=json-file --log-opt max-size=5m --log-opt max-file=2 my-container</pre></div><div class='content'></div><h3>Exercise 2: Set Up a Health Check</h3>
<div class='content'><ol>
<li>Create a Dockerfile with a health check.</li>
<li>Build and run the container.</li>
<li>Verify the health status using <code>docker inspect</code>.</li>
</ol>
<p><strong>Solution:</strong></p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBEb2NrZXJmaWxlCkZST00gbmdpbng6YWxwaW5lCkhFQUxUSENIRUNLIC0taW50ZXJ2YWw9MzBzIC0tdGltZW91dD0xMHMgLS1yZXRyaWVzPTMgQ01EIGN1cmwgLWYgaHR0cDovL2xvY2FsaG9zdC8gfHwgZXhpdCAx"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Dockerfile
FROM nginx:alpine
HEALTHCHECK --interval=30s --timeout=10s --retries=3 CMD curl -f http://localhost/ || exit 1</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIGJ1aWxkIC10IG15LW5naW54IC4KZG9ja2VyIHJ1biAtZCAtLW5hbWUgbXktbmdpbngtY29udGFpbmVyIG15LW5naW54CmRvY2tlciBpbnNwZWN0IC0tZm9ybWF0PSd7e2pzb24gLlN0YXRlLkhlYWx0aH19JyBteS1uZ2lueC1jb250YWluZXI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker build -t my-nginx .
docker run -d --name my-nginx-container my-nginx
docker inspect --format='{{json .State.Health}}' my-nginx-container</pre></div><div class='content'></div><h2>Common Mistakes and Tips</h2>
<div class='content'><ul>
<li><strong>Ignoring Log Rotation</strong>: Always configure log rotation to prevent disk space issues.</li>
<li><strong>Overlooking Health Checks</strong>: Implement health checks to detect and recover from failures.</li>
<li><strong>Not Using Monitoring Tools</strong>: Utilize tools like Prometheus and Grafana for comprehensive monitoring.</li>
</ul>
</div><h2>Conclusion</h2>
<div class='content'><p>In this section, we covered the fundamentals of logging and monitoring Docker containers. We explored different log drivers, log rotation, health checks, and monitoring tools. By implementing these practices, you can ensure the reliability and performance of your containerized applications. In the next module, we will dive deeper into Docker's advanced networking concepts.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-04-optimizing-docker-images' title="Optimizing Docker Images" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-04-optimizing-docker-images' title="Optimizing Docker Images" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='06-01-ci-cd-with-docker' title="CI/CD with Docker" class="py-2 px-3 btn btn-primary"
				data-read-mod="docker" data-read-unit="5-5">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='06-01-ci-cd-with-docker' title="CI/CD with Docker" class="py-2 px-3 btn btn-primary" 
				data-read-mod="docker" data-read-unit="5-5">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Docker: From Beginner to Advanced</h1>
<h2>Module 1: Introduction to Docker</h2>
<ul>
<li><a href="01-01-what-is-docker">What is Docker?</a></li>
<li><a href="01-02-installing-docker">Installing Docker</a></li>
<li><a href="01-03-docker-architecture">Docker Architecture</a></li>
<li><a href="01-04-basic-docker-commands">Basic Docker Commands</a></li>
<li><a href="01-05-understanding-docker-images">Understanding Docker Images</a></li>
<li><a href="01-06-creating-your-first-docker-container">Creating Your First Docker Container</a></li>
</ul>
<h2>Module 2: Working with Docker Images</h2>
<ul>
<li><a href="02-01-docker-hub-and-repositories">Docker Hub and Repositories</a></li>
<li><a href="02-02-building-docker-images">Building Docker Images</a></li>
<li><a href="02-03-dockerfile-basics">Dockerfile Basics</a></li>
<li><a href="02-04-managing-docker-images">Managing Docker Images</a></li>
<li><a href="02-05-tagging-and-pushing-images">Tagging and Pushing Images</a></li>
</ul>
<h2>Module 3: Docker Containers</h2>
<ul>
<li><a href="03-01-running-containers">Running Containers</a></li>
<li><a href="03-02-container-lifecycle">Container Lifecycle</a></li>
<li><a href="03-03-managing-containers">Managing Containers</a></li>
<li><a href="03-04-networking-in-docker">Networking in Docker</a></li>
<li><a href="03-05-data-persistence-with-volumes">Data Persistence with Volumes</a></li>
</ul>
<h2>Module 4: Docker Compose</h2>
<ul>
<li><a href="04-01-introduction-to-docker-compose">Introduction to Docker Compose</a></li>
<li><a href="04-02-defining-services-in-docker-compose">Defining Services in Docker Compose</a></li>
<li><a href="04-03-docker-compose-commands">Docker Compose Commands</a></li>
<li><a href="04-04-multi-container-applications">Multi-Container Applications</a></li>
<li><a href="04-05-environment-variables-in-docker-compose">Environment Variables in Docker Compose</a></li>
</ul>
<h2>Module 5: Advanced Docker Concepts</h2>
<ul>
<li><a href="05-01-docker-networking-deep-dive">Docker Networking Deep Dive</a></li>
<li><a href="05-02-docker-storage-options">Docker Storage Options</a></li>
<li><a href="05-03-docker-security-best-practices">Docker Security Best Practices</a></li>
<li><a href="05-04-optimizing-docker-images">Optimizing Docker Images</a></li>
<li><a href="05-05-docker-logging-and-monitoring">Docker Logging and Monitoring</a></li>
</ul>
<h2>Module 6: Docker in Production</h2>
<ul>
<li><a href="06-01-ci-cd-with-docker">CI/CD with Docker</a></li>
<li><a href="06-02-orchestrating-containers-with-docker-swarm">Orchestrating Containers with Docker Swarm</a></li>
<li><a href="06-03-introduction-to-kubernetes">Introduction to Kubernetes</a></li>
<li><a href="06-04-deploying-docker-containers-in-kubernetes">Deploying Docker Containers in Kubernetes</a></li>
<li><a href="06-05-scaling-and-load-balancing">Scaling and Load Balancing</a></li>
</ul>
<h2>Module 7: Docker Ecosystem and Tools</h2>
<ul>
<li><a href="07-01-docker-machine">Docker Machine</a></li>
<li><a href="07-02-docker-compose-vs-kubernetes">Docker Compose vs. Kubernetes</a></li>
<li><a href="07-03-docker-desktop">Docker Desktop</a></li>
<li><a href="07-04-third-party-tools-and-plugins">Third-Party Tools and Plugins</a></li>
<li><a href="07-05-future-of-docker">Future of Docker</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
