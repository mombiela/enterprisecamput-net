<!DOCTYPE html>
<html lang="en">
<head>
    <title> Optimizing Docker Images </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, nofollow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/docker/05-04-optimizing-docker-images" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/docker/05-04-optimizing-docker-images" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/docker/05-04-optimizing-docker-images" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.ea63f62b9e.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "docker";
  		var TEMA_NAME = "5-4";
  		var TYPE = "mod";
  		var PATH = "mod/docker/05-04-optimizing-docker-images";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/docker/05-04-optimizing-docker-images" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/docker/05-04-optimizing-docker-images" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="docker">
		<a  href="#" class="text-secondary d-none" data-read-mod="docker" data-read-unit="5-4" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="docker" data-unread-unit="5-4" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-03-docker-security-best-practices' title="Docker Security Best Practices" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-03-docker-security-best-practices' title="Docker Security Best Practices" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">Optimizing Docker Images</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-05-docker-logging-and-monitoring' title="Docker Logging and Monitoring" class="py-2 px-3 btn btn-primary"
				data-read-mod="docker" data-read-unit="5-4">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-05-docker-logging-and-monitoring' title="Docker Logging and Monitoring" class="py-2 px-3 btn btn-primary" 
				data-read-mod="docker" data-read-unit="5-4">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Optimizing Docker images is crucial for improving the performance, security, and efficiency of your containerized applications. In this section, we will cover various techniques and best practices to create lean, secure, and efficient Docker images.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Minimize Image Size</strong>: Smaller images are faster to build, transfer, and deploy.</li>
<li><strong>Layer Management</strong>: Efficient use of layers can reduce build times and improve caching.</li>
<li><strong>Security</strong>: Reducing the attack surface by minimizing the number of installed packages.</li>
<li><strong>Build Context</strong>: Keeping the build context small to speed up the build process.</li>
<li><strong>Multi-Stage Builds</strong>: Using multi-stage builds to separate build and runtime dependencies.</li>
</ol>
</div><h1>Techniques for Optimizing Docker Images</h1>
<div class='content'></div><h2><ol>
<li>Minimize Image Size</li>
</ol></h2>
<div class='content'><ul>
<li><strong>Use Official Base Images</strong>: Start with minimal base images like <code>alpine</code> or <code>scratch</code>.</li>
<li><strong>Remove Unnecessary Files</strong>: Clean up temporary files and package caches.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeGFtcGxlIERvY2tlcmZpbGUgdXNpbmcgQWxwaW5lCkZST00gYWxwaW5lOjMuMTIKCiMgSW5zdGFsbCBkZXBlbmRlbmNpZXMKUlVOIGFwayBhZGQgLS1uby1jYWNoZSBweXRob24zIHB5My1waXAKCiMgQ29weSBhcHBsaWNhdGlvbiBmaWxlcwpDT1BZIC4gL2FwcAoKIyBTZXQgd29ya2luZyBkaXJlY3RvcnkKV09SS0RJUiAvYXBwCgojIENsZWFuIHVwClJVTiBybSAtcmYgL3Zhci9jYWNoZS9hcGsvKg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Example Dockerfile using Alpine
FROM alpine:3.12

# Install dependencies
RUN apk add --no-cache python3 py3-pip

# Copy application files
COPY . /app

# Set working directory
WORKDIR /app

# Clean up
RUN rm -rf /var/cache/apk/*</pre></div><div class='content'></div><h2><ol start="2">
<li>Efficient Layer Management</li>
</ol></h2>
<div class='content'><ul>
<li><strong>Combine Commands</strong>: Combine multiple commands into a single <code>RUN</code> statement to reduce the number of layers.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDb21iaW5pbmcgY29tbWFuZHMgdG8gcmVkdWNlIGxheWVycwpSVU4gYXB0LWdldCB1cGRhdGUgJiYgYXB0LWdldCBpbnN0YWxsIC15IFwKICAgIHB5dGhvbjMgXAogICAgcHl0aG9uMy1waXAgXAogICAgJiYgcm0gLXJmIC92YXIvbGliL2FwdC9saXN0cy8q"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Combining commands to reduce layers
RUN apt-get update &amp;&amp; apt-get install -y \
    python3 \
    python3-pip \
    &amp;&amp; rm -rf /var/lib/apt/lists/*</pre></div><div class='content'></div><h2><ol start="3">
<li>Security</li>
</ol></h2>
<div class='content'><ul>
<li><strong>Use Minimal Base Images</strong>: Use images with fewer packages to reduce the attack surface.</li>
<li><strong>Regular Updates</strong>: Regularly update base images and dependencies to include security patches.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVc2luZyBhIG1pbmltYWwgYmFzZSBpbWFnZQpGUk9NIGFscGluZTozLjEyCgojIEluc3RhbGwgb25seSBuZWNlc3NhcnkgcGFja2FnZXMKUlVOIGFwayBhZGQgLS1uby1jYWNoZSBweXRob24zIHB5My1waXA="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Using a minimal base image
FROM alpine:3.12

# Install only necessary packages
RUN apk add --no-cache python3 py3-pip</pre></div><div class='content'></div><h2><ol start="4">
<li>Build Context</li>
</ol></h2>
<div class='content'><ul>
<li><strong>.dockerignore File</strong>: Use a <code>.dockerignore</code> file to exclude unnecessary files from the build context.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeGFtcGxlIC5kb2NrZXJpZ25vcmUgZmlsZQpub2RlX21vZHVsZXMKKi5sb2cKKi5tZA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Example .dockerignore file
node_modules
*.log
*.md</pre></div><div class='content'></div><h2><ol start="5">
<li>Multi-Stage Builds</li>
</ol></h2>
<div class='content'><ul>
<li><strong>Separate Build and Runtime Dependencies</strong>: Use multi-stage builds to keep the final image lean by only including runtime dependencies.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBNdWx0aS1zdGFnZSBidWlsZCBleGFtcGxlCiMgU3RhZ2UgMTogQnVpbGQKRlJPTSBnb2xhbmc6MS4xNSBBUyBidWlsZGVyCldPUktESVIgL2FwcApDT1BZIC4gLgpSVU4gZ28gYnVpbGQgLW8gbXlhcHAKCiMgU3RhZ2UgMjogUnVudGltZQpGUk9NIGFscGluZTozLjEyCldPUktESVIgL2FwcApDT1BZIC0tZnJvbT1idWlsZGVyIC9hcHAvbXlhcHAgLgpDTUQgWyIuL215YXBwIl0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Multi-stage build example
# Stage 1: Build
FROM golang:1.15 AS builder
WORKDIR /app
COPY . .
RUN go build -o myapp

# Stage 2: Runtime
FROM alpine:3.12
WORKDIR /app
COPY --from=builder /app/myapp .
CMD [&quot;./myapp&quot;]</pre></div><div class='content'></div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise: Optimize a Dockerfile</h2>
<div class='content'><p>Given the following Dockerfile, optimize it for size and efficiency:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBPcmlnaW5hbCBEb2NrZXJmaWxlCkZST00gdWJ1bnR1OjIwLjA0CgpSVU4gYXB0LWdldCB1cGRhdGUKUlVOIGFwdC1nZXQgaW5zdGFsbCAteSBweXRob24zIHB5dGhvbjMtcGlwClJVTiBwaXAzIGluc3RhbGwgZmxhc2sKCkNPUFkgLiAvYXBwCldPUktESVIgL2FwcAoKQ01EIFsicHl0aG9uMyIsICJhcHAucHkiXQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Original Dockerfile
FROM ubuntu:20.04

RUN apt-get update
RUN apt-get install -y python3 python3-pip
RUN pip3 install flask

COPY . /app
WORKDIR /app

CMD [&quot;python3&quot;, &quot;app.py&quot;]</pre></div><div class='content'></div><h2>Solution</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBPcHRpbWl6ZWQgRG9ja2VyZmlsZQpGUk9NIHB5dGhvbjozLjgtc2xpbQoKIyBJbnN0YWxsIGRlcGVuZGVuY2llcwpSVU4gcGlwIGluc3RhbGwgLS1uby1jYWNoZS1kaXIgZmxhc2sKCiMgQ29weSBhcHBsaWNhdGlvbiBmaWxlcwpDT1BZIC4gL2FwcApXT1JLRElSIC9hcHAKCiMgU2V0IHRoZSBjb21tYW5kIHRvIHJ1biB0aGUgYXBwbGljYXRpb24KQ01EIFsicHl0aG9uIiwgImFwcC5weSJd"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Optimized Dockerfile
FROM python:3.8-slim

# Install dependencies
RUN pip install --no-cache-dir flask

# Copy application files
COPY . /app
WORKDIR /app

# Set the command to run the application
CMD [&quot;python&quot;, &quot;app.py&quot;]</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Base Image</strong>: Switched to <code>python:3.8-slim</code> for a smaller base image.</li>
<li><strong>Combined Commands</strong>: Combined the <code>pip install</code> command with <code>--no-cache-dir</code> to avoid caching.</li>
<li><strong>Removed Unnecessary Layers</strong>: Reduced the number of <code>RUN</code> statements to minimize layers.</li>
</ul>
</div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Avoid Large Base Images</strong>: Using large base images like <code>ubuntu</code> or <code>debian</code> can unnecessarily increase image size.</li>
<li><strong>Layer Order</strong>: Place frequently changing layers (e.g., application code) at the bottom to leverage caching.</li>
<li><strong>Clean Up</strong>: Always clean up temporary files and package caches to reduce image size.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Optimizing Docker images is a critical step in ensuring your containerized applications are efficient, secure, and performant. By following best practices such as minimizing image size, managing layers efficiently, and using multi-stage builds, you can create lean and effective Docker images. In the next section, we will dive into Docker logging and monitoring to help you maintain and troubleshoot your Dockerized applications.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-03-docker-security-best-practices' title="Docker Security Best Practices" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-03-docker-security-best-practices' title="Docker Security Best Practices" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-05-docker-logging-and-monitoring' title="Docker Logging and Monitoring" class="py-2 px-3 btn btn-primary"
				data-read-mod="docker" data-read-unit="5-4">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-05-docker-logging-and-monitoring' title="Docker Logging and Monitoring" class="py-2 px-3 btn btn-primary" 
				data-read-mod="docker" data-read-unit="5-4">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Docker: From Beginner to Advanced</h1>
<h2>Module 1: Introduction to Docker</h2>
<ul>
<li><a href="01-01-what-is-docker">What is Docker?</a></li>
<li><a href="01-02-installing-docker">Installing Docker</a></li>
<li><a href="01-03-docker-architecture">Docker Architecture</a></li>
<li><a href="01-04-basic-docker-commands">Basic Docker Commands</a></li>
<li><a href="01-05-understanding-docker-images">Understanding Docker Images</a></li>
<li><a href="01-06-creating-your-first-docker-container">Creating Your First Docker Container</a></li>
</ul>
<h2>Module 2: Working with Docker Images</h2>
<ul>
<li><a href="02-01-docker-hub-and-repositories">Docker Hub and Repositories</a></li>
<li><a href="02-02-building-docker-images">Building Docker Images</a></li>
<li><a href="02-03-dockerfile-basics">Dockerfile Basics</a></li>
<li><a href="02-04-managing-docker-images">Managing Docker Images</a></li>
<li><a href="02-05-tagging-and-pushing-images">Tagging and Pushing Images</a></li>
</ul>
<h2>Module 3: Docker Containers</h2>
<ul>
<li><a href="03-01-running-containers">Running Containers</a></li>
<li><a href="03-02-container-lifecycle">Container Lifecycle</a></li>
<li><a href="03-03-managing-containers">Managing Containers</a></li>
<li><a href="03-04-networking-in-docker">Networking in Docker</a></li>
<li><a href="03-05-data-persistence-with-volumes">Data Persistence with Volumes</a></li>
</ul>
<h2>Module 4: Docker Compose</h2>
<ul>
<li><a href="04-01-introduction-to-docker-compose">Introduction to Docker Compose</a></li>
<li><a href="04-02-defining-services-in-docker-compose">Defining Services in Docker Compose</a></li>
<li><a href="04-03-docker-compose-commands">Docker Compose Commands</a></li>
<li><a href="04-04-multi-container-applications">Multi-Container Applications</a></li>
<li><a href="04-05-environment-variables-in-docker-compose">Environment Variables in Docker Compose</a></li>
</ul>
<h2>Module 5: Advanced Docker Concepts</h2>
<ul>
<li><a href="05-01-docker-networking-deep-dive">Docker Networking Deep Dive</a></li>
<li><a href="05-02-docker-storage-options">Docker Storage Options</a></li>
<li><a href="05-03-docker-security-best-practices">Docker Security Best Practices</a></li>
<li><a href="05-04-optimizing-docker-images">Optimizing Docker Images</a></li>
<li><a href="05-05-docker-logging-and-monitoring">Docker Logging and Monitoring</a></li>
</ul>
<h2>Module 6: Docker in Production</h2>
<ul>
<li><a href="06-01-ci-cd-with-docker">CI/CD with Docker</a></li>
<li><a href="06-02-orchestrating-containers-with-docker-swarm">Orchestrating Containers with Docker Swarm</a></li>
<li><a href="06-03-introduction-to-kubernetes">Introduction to Kubernetes</a></li>
<li><a href="06-04-deploying-docker-containers-in-kubernetes">Deploying Docker Containers in Kubernetes</a></li>
<li><a href="06-05-scaling-and-load-balancing">Scaling and Load Balancing</a></li>
</ul>
<h2>Module 7: Docker Ecosystem and Tools</h2>
<ul>
<li><a href="07-01-docker-machine">Docker Machine</a></li>
<li><a href="07-02-docker-compose-vs-kubernetes">Docker Compose vs. Kubernetes</a></li>
<li><a href="07-03-docker-desktop">Docker Desktop</a></li>
<li><a href="07-04-third-party-tools-and-plugins">Third-Party Tools and Plugins</a></li>
<li><a href="07-05-future-of-docker">Future of Docker</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
