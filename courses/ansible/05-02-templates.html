<!DOCTYPE html>
<html lang="en">
<head>
    <title> Templates </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, nofollow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/ansible/05-02-templates" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/ansible/05-02-templates" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/ansible/05-02-templates" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.188a386f47.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "ansible";
  		var TEMA_NAME = "5-2";
  		var TYPE = "mod";
  		var PATH = "mod/ansible/05-02-templates";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/ansible/05-02-templates" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/ansible/05-02-templates" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="ansible">
		<a  href="#" class="text-secondary d-none" data-read-mod="ansible" data-read-unit="5-2" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="ansible" data-unread-unit="5-2" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-01-handlers' title="Handlers" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-01-handlers' title="Handlers" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Templates</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-03-ansible-vault' title="Ansible Vault" class="py-2 px-3 btn btn-primary"
				data-read-mod="ansible" data-read-unit="5-2">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-03-ansible-vault' title="Ansible Vault" class="py-2 px-3 btn btn-primary" 
				data-read-mod="ansible" data-read-unit="5-2">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Templates in Ansible are a powerful feature that allows you to dynamically generate configuration files and other text files based on variables and logic defined in your playbooks. Templates are written in the Jinja2 templating language, which is a flexible and expressive language for creating dynamic content.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ol>
<li><strong>Jinja2 Templating Language</strong>: The language used to write templates in Ansible.</li>
<li><strong>Template Module</strong>: The Ansible module used to apply templates.</li>
<li><strong>Variables</strong>: Dynamic values that can be inserted into templates.</li>
<li><strong>Control Structures</strong>: Logic such as loops and conditionals that can be used within templates.</li>
</ol>
</div><h2>Using the Template Module</h2>
<div class='content'><p>The <code>template</code> module is used to process a Jinja2 template and copy the rendered file to a remote host.</p>
</div><h3>Basic Syntax</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBBcHBseSBhIHRlbXBsYXRlCiAgdGVtcGxhdGU6CiAgICBzcmM6IC9wYXRoL3RvL3RlbXBsYXRlLmoyCiAgICBkZXN0OiAvcGF0aC90by9kZXN0aW5hdGlvbi9maWxl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Apply a template
  template:
    src: /path/to/template.j2
    dest: /path/to/destination/file</pre></div><div class='content'></div><h3>Example</h3>
<div class='content'><p>Let's create a simple template and use it in a playbook.</p>
<h4>Step 1: Create a Template File</h4>
<p>Create a file named <code>nginx.conf.j2</code> with the following content:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmVyIHsKICAgIGxpc3RlbiA4MDsKICAgIHNlcnZlcl9uYW1lIHt7IHNlcnZlcl9uYW1lIH19OwogICAgcm9vdCB7eyBkb2N1bWVudF9yb290IH19OwogICAgCiAgICBsb2NhdGlvbiAvIHsKICAgICAgICB0cnlfZmlsZXMgJHVyaSAkdXJpLyA9NDA0OwogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>server {
    listen 80;
    server_name {{ server_name }};
    root {{ document_root }};
    
    location / {
        try_files $uri $uri/ =404;
    }
}</pre></div><div class='content'><h4>Step 2: Create a Playbook</h4>
<p>Create a playbook named <code>deploy_nginx.yml</code>:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogRGVwbG95IE5naW54IGNvbmZpZ3VyYXRpb24KICBob3N0czogd2Vic2VydmVycwogIHZhcnM6CiAgICBzZXJ2ZXJfbmFtZTogZXhhbXBsZS5jb20KICAgIGRvY3VtZW50X3Jvb3Q6IC92YXIvd3d3L2h0bWwKICB0YXNrczoKICAgIC0gbmFtZTogQXBwbHkgTmdpbnggY29uZmlndXJhdGlvbiB0ZW1wbGF0ZQogICAgICB0ZW1wbGF0ZToKICAgICAgICBzcmM6IG5naW54LmNvbmYuajIKICAgICAgICBkZXN0OiAvZXRjL25naW54L25naW54LmNvbmYKICAgICAgbm90aWZ5OgogICAgICAgIC0gUmVzdGFydCBOZ2lueAoKICBoYW5kbGVyczoKICAgIC0gbmFtZTogUmVzdGFydCBOZ2lueAogICAgICBzZXJ2aWNlOgogICAgICAgIG5hbWU6IG5naW54CiAgICAgICAgc3RhdGU6IHJlc3RhcnRlZA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Deploy Nginx configuration
  hosts: webservers
  vars:
    server_name: example.com
    document_root: /var/www/html
  tasks:
    - name: Apply Nginx configuration template
      template:
        src: nginx.conf.j2
        dest: /etc/nginx/nginx.conf
      notify:
        - Restart Nginx

  handlers:
    - name: Restart Nginx
      service:
        name: nginx
        state: restarted</pre></div><div class='content'></div><h3>Explanation</h3>
<div class='content'><ul>
<li><strong>Template File (<code>nginx.conf.j2</code>)</strong>: This file contains placeholders (<code>{{ server_name }}</code> and <code>{{ document_root }}</code>) that will be replaced with actual values when the template is rendered.</li>
<li><strong>Playbook (<code>deploy_nginx.yml</code>)</strong>:
<ul>
<li><strong>vars</strong>: Defines the variables <code>server_name</code> and <code>document_root</code>.</li>
<li><strong>tasks</strong>: Uses the <code>template</code> module to apply the <code>nginx.conf.j2</code> template and copy the rendered file to <code>/etc/nginx/nginx.conf</code>.</li>
<li><strong>handlers</strong>: Defines a handler to restart Nginx whenever the configuration file is changed.</li>
</ul>
</li>
</ul>
</div><h2>Practical Exercise</h2>
<div class='content'></div><h3>Exercise</h3>
<div class='content'><ol>
<li>
<p>Create a Jinja2 template file named <code>index.html.j2</code> with the following content:</p>
<pre><code class="language-jinja2">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;{{ title }}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;{{ heading }}&lt;/h1&gt;
    &lt;p&gt;{{ message }}&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
</li>
<li>
<p>Create a playbook named <code>deploy_website.yml</code> that uses the <code>template</code> module to apply the <code>index.html.j2</code> template and copy the rendered file to <code>/var/www/html/index.html</code>. Define the following variables in the playbook:</p>
<ul>
<li><code>title</code>: &quot;Welcome to My Website&quot;</li>
<li><code>heading</code>: &quot;Hello, World!&quot;</li>
<li><code>message</code>: &quot;This is a dynamically generated web page.&quot;</li>
</ul>
</li>
</ol>
</div><h3>Solution</h3>
<div class='content'><h4>Step 1: Create the Template File</h4>
<p>Create a file named <code>index.html.j2</code> with the following content:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDx0aXRsZT57eyB0aXRsZSB9fTwvdGl0bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8aDE+e3sgaGVhZGluZyB9fTwvaDE+CiAgICA8cD57eyBtZXNzYWdlIH19PC9wPgo8L2JvZHk+CjwvaHRtbD4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;{{ title }}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;{{ heading }}&lt;/h1&gt;
    &lt;p&gt;{{ message }}&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'><h4>Step 2: Create the Playbook</h4>
<p>Create a playbook named <code>deploy_website.yml</code>:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogRGVwbG95IHdlYnNpdGUKICBob3N0czogd2Vic2VydmVycwogIHZhcnM6CiAgICB0aXRsZTogIldlbGNvbWUgdG8gTXkgV2Vic2l0ZSIKICAgIGhlYWRpbmc6ICJIZWxsbywgV29ybGQhIgogICAgbWVzc2FnZTogIlRoaXMgaXMgYSBkeW5hbWljYWxseSBnZW5lcmF0ZWQgd2ViIHBhZ2UuIgogIHRhc2tzOgogICAgLSBuYW1lOiBBcHBseSB3ZWJzaXRlIHRlbXBsYXRlCiAgICAgIHRlbXBsYXRlOgogICAgICAgIHNyYzogaW5kZXguaHRtbC5qMgogICAgICAgIGRlc3Q6IC92YXIvd3d3L2h0bWwvaW5kZXguaHRtbA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Deploy website
  hosts: webservers
  vars:
    title: &quot;Welcome to My Website&quot;
    heading: &quot;Hello, World!&quot;
    message: &quot;This is a dynamically generated web page.&quot;
  tasks:
    - name: Apply website template
      template:
        src: index.html.j2
        dest: /var/www/html/index.html</pre></div><div class='content'></div><h3>Explanation</h3>
<div class='content'><ul>
<li><strong>Template File (<code>index.html.j2</code>)</strong>: Contains placeholders (<code>{{ title }}</code>, <code>{{ heading }}</code>, and <code>{{ message }}</code>) that will be replaced with actual values when the template is rendered.</li>
<li><strong>Playbook (<code>deploy_website.yml</code>)</strong>:
<ul>
<li><strong>vars</strong>: Defines the variables <code>title</code>, <code>heading</code>, and <code>message</code>.</li>
<li><strong>tasks</strong>: Uses the <code>template</code> module to apply the <code>index.html.j2</code> template and copy the rendered file to <code>/var/www/html/index.html</code>.</li>
</ul>
</li>
</ul>
</div><h2>Common Mistakes and Tips</h2>
<div class='content'><ul>
<li><strong>Undefined Variables</strong>: Ensure all variables used in the template are defined in the playbook.</li>
<li><strong>File Permissions</strong>: Verify that the destination directory has the correct permissions to allow the template to be copied.</li>
<li><strong>Syntax Errors</strong>: Check for syntax errors in the Jinja2 template, such as missing braces or incorrect variable names.</li>
</ul>
</div><h2>Conclusion</h2>
<div class='content'><p>Templates in Ansible provide a flexible way to generate dynamic configuration files and other text files. By using the Jinja2 templating language, you can create templates that incorporate variables and logic, making your playbooks more powerful and adaptable. In the next section, we will explore Ansible Vault, which allows you to securely store sensitive data such as passwords and keys.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-01-handlers' title="Handlers" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-01-handlers' title="Handlers" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-03-ansible-vault' title="Ansible Vault" class="py-2 px-3 btn btn-primary"
				data-read-mod="ansible" data-read-unit="5-2">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-03-ansible-vault' title="Ansible Vault" class="py-2 px-3 btn btn-primary" 
				data-read-mod="ansible" data-read-unit="5-2">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Ansible: From Beginner to Advanced</h1>
<h2>Module 1: Introduction to Ansible</h2>
<ul>
<li><a href="01-01-what-is-ansible">What is Ansible?</a></li>
<li><a href="01-02-installing-ansible">Installing Ansible</a></li>
<li><a href="01-03-ansible-architecture">Ansible Architecture</a></li>
<li><a href="01-04-basic-ansible-commands">Basic Ansible Commands</a></li>
</ul>
<h2>Module 2: Ansible Basics</h2>
<ul>
<li><a href="02-01-inventory-files">Inventory Files</a></li>
<li><a href="02-02-ansible-configuration">Ansible Configuration</a></li>
<li><a href="02-03-ad-hoc-commands">Ad-Hoc Commands</a></li>
<li><a href="02-04-ansible-modules">Ansible Modules</a></li>
</ul>
<h2>Module 3: Playbooks</h2>
<ul>
<li><a href="03-01-introduction-to-playbooks">Introduction to Playbooks</a></li>
<li><a href="03-02-writing-your-first-playbook">Writing Your First Playbook</a></li>
<li><a href="03-03-playbook-structure">Playbook Structure</a></li>
<li><a href="03-04-variables-and-facts">Variables and Facts</a></li>
<li><a href="03-05-conditionals-and-loops">Conditionals and Loops</a></li>
</ul>
<h2>Module 4: Roles</h2>
<ul>
<li><a href="04-01-introduction-to-roles">Introduction to Roles</a></li>
<li><a href="04-02-creating-roles">Creating Roles</a></li>
<li><a href="04-03-role-directory-structure">Role Directory Structure</a></li>
<li><a href="04-04-using-roles-in-playbooks">Using Roles in Playbooks</a></li>
</ul>
<h2>Module 5: Advanced Playbook Techniques</h2>
<ul>
<li><a href="05-01-handlers">Handlers</a></li>
<li><a href="05-02-templates">Templates</a></li>
<li><a href="05-03-ansible-vault">Ansible Vault</a></li>
<li><a href="05-04-error-handling">Error Handling</a></li>
<li><a href="05-05-optimizing-playbooks">Optimizing Playbooks</a></li>
</ul>
<h2>Module 6: Ansible Galaxy</h2>
<ul>
<li><a href="06-01-what-is-ansible-galaxy">What is Ansible Galaxy?</a></li>
<li><a href="06-02-using-ansible-galaxy">Using Ansible Galaxy</a></li>
<li><a href="06-03-creating-and-sharing-roles">Creating and Sharing Roles</a></li>
</ul>
<h2>Module 7: Ansible Tower</h2>
<ul>
<li><a href="07-01-introduction-to-ansible-tower">Introduction to Ansible Tower</a></li>
<li><a href="07-02-installing-ansible-tower">Installing Ansible Tower</a></li>
<li><a href="07-03-using-ansible-tower">Using Ansible Tower</a></li>
<li><a href="07-04-managing-projects-and-inventories">Managing Projects and Inventories</a></li>
</ul>
<h2>Module 8: Ansible for DevOps</h2>
<ul>
<li><a href="08-01-ansible-and-docker">Ansible and Docker</a></li>
<li><a href="08-02-ansible-and-kubernetes">Ansible and Kubernetes</a></li>
<li><a href="08-03-ci-cd-with-ansible">CI/CD with Ansible</a></li>
<li><a href="08-04-ansible-in-cloud-environments">Ansible in Cloud Environments</a></li>
</ul>
<h2>Module 9: Ansible Best Practices</h2>
<ul>
<li><a href="09-01-code-organization">Code Organization</a></li>
<li><a href="09-02-security-best-practices">Security Best Practices</a></li>
<li><a href="09-03-performance-tuning">Performance Tuning</a></li>
<li><a href="09-04-testing-ansible-code">Testing Ansible Code</a></li>
</ul>
<h2>Module 10: Advanced Ansible Topics</h2>
<ul>
<li><a href="10-01-custom-modules">Custom Modules</a></li>
<li><a href="10-02-dynamic-inventory">Dynamic Inventory</a></li>
<li><a href="10-03-ansible-plugins">Ansible Plugins</a></li>
<li><a href="10-04-ansible-api">Ansible API</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
