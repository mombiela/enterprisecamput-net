<!DOCTYPE html>
<html lang="en">
<head>
    <title> Ansible Vault </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/ansible/05-03-ansible-vault" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/ansible/05-03-ansible-vault" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/ansible/05-03-ansible-vault" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.1ab297bfa4.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "ansible";
  		var TEMA_NAME = "5-3";
  		var TYPE = "mod";
  		var PATH = "mod/ansible/05-03-ansible-vault";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.ae32789132.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/ansible/05-03-ansible-vault" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/ansible/05-03-ansible-vault" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="ansible">
		<a  href="#" class="text-secondary d-none" data-read-mod="ansible" data-read-unit="5-3" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="ansible" data-unread-unit="5-3" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-02-templates' title="Templates" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-02-templates' title="Templates" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Ansible Vault</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-04-error-handling' title="Error Handling" class="py-2 px-3 btn btn-primary"
				data-read-mod="ansible" data-read-unit="5-3">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-04-error-handling' title="Error Handling" class="py-2 px-3 btn btn-primary" 
				data-read-mod="ansible" data-read-unit="5-3">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Ansible Vault is a feature that allows you to keep sensitive data such as passwords or keys in encrypted files, rather than as plaintext in playbooks or roles. This is crucial for maintaining security and confidentiality in your automation scripts.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ol>
<li><strong>Encryption and Decryption</strong>: Ansible Vault can encrypt and decrypt files using a password or a key file.</li>
<li><strong>Vault IDs</strong>: Allows you to manage multiple vault passwords.</li>
<li><strong>Vault Files</strong>: Files that are encrypted using Ansible Vault.</li>
</ol>
</div><h2>Why Use Ansible Vault?</h2>
<div class='content'><ul>
<li><strong>Security</strong>: Protect sensitive information from being exposed.</li>
<li><strong>Compliance</strong>: Meet security compliance requirements by encrypting sensitive data.</li>
<li><strong>Ease of Use</strong>: Integrates seamlessly with Ansible playbooks and roles.</li>
</ul>
</div><h2>Basic Commands</h2>
<div class='content'></div><h3>Encrypting a File</h3>
<div class='content'><p>To encrypt a file using Ansible Vault, use the following command:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS12YXVsdCBlbmNyeXB0IDxmaWxlbmFtZT4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-vault encrypt &lt;filename&gt;</pre></div><div class='content'><p>Example:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS12YXVsdCBlbmNyeXB0IHNlY3JldHMueW1s"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-vault encrypt secrets.yml</pre></div><div class='content'></div><h3>Decrypting a File</h3>
<div class='content'><p>To decrypt a file, use:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS12YXVsdCBkZWNyeXB0IDxmaWxlbmFtZT4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-vault decrypt &lt;filename&gt;</pre></div><div class='content'><p>Example:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS12YXVsdCBkZWNyeXB0IHNlY3JldHMueW1s"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-vault decrypt secrets.yml</pre></div><div class='content'></div><h3>Editing an Encrypted File</h3>
<div class='content'><p>To edit an encrypted file, use:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS12YXVsdCBlZGl0IDxmaWxlbmFtZT4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-vault edit &lt;filename&gt;</pre></div><div class='content'><p>Example:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS12YXVsdCBlZGl0IHNlY3JldHMueW1s"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-vault edit secrets.yml</pre></div><div class='content'></div><h3>Viewing an Encrypted File</h3>
<div class='content'><p>To view the contents of an encrypted file without editing, use:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS12YXVsdCB2aWV3IDxmaWxlbmFtZT4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-vault view &lt;filename&gt;</pre></div><div class='content'><p>Example:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS12YXVsdCB2aWV3IHNlY3JldHMueW1s"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-vault view secrets.yml</pre></div><div class='content'></div><h3>Re-keying an Encrypted File</h3>
<div class='content'><p>To change the password of an encrypted file, use:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS12YXVsdCByZWtleSA8ZmlsZW5hbWU+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-vault rekey &lt;filename&gt;</pre></div><div class='content'><p>Example:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS12YXVsdCByZWtleSBzZWNyZXRzLnltbA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-vault rekey secrets.yml</pre></div><div class='content'></div><h2>Using Vault in Playbooks</h2>
<div class='content'><p>You can use encrypted files in your playbooks by specifying the vault password file or prompting for the password.</p>
</div><h3>Example Playbook</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogRXhhbXBsZSBQbGF5Ym9vayB3aXRoIFZhdWx0CiAgaG9zdHM6IGFsbAogIHZhcnNfZmlsZXM6CiAgICAtIHNlY3JldHMueW1sCiAgdGFza3M6CiAgICAtIG5hbWU6IFByaW50IHNlY3JldCBtZXNzYWdlCiAgICAgIGRlYnVnOgogICAgICAgIG1zZzogInt7IHNlY3JldF9tZXNzYWdlIH19Ig=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Example Playbook with Vault
  hosts: all
  vars_files:
    - secrets.yml
  tasks:
    - name: Print secret message
      debug:
        msg: &quot;{{ secret_message }}&quot;</pre></div><div class='content'></div><h3>Running the Playbook</h3>
<div class='content'><p>To run the playbook with a vault password file:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS1wbGF5Ym9vayBwbGF5Ym9vay55bWwgLS12YXVsdC1wYXNzd29yZC1maWxlIC52YXVsdF9wYXNzLnR4dA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-playbook playbook.yml --vault-password-file .vault_pass.txt</pre></div><div class='content'><p>To run the playbook and be prompted for the vault password:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS1wbGF5Ym9vayBwbGF5Ym9vay55bWwgLS1hc2stdmF1bHQtcGFzcw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-playbook playbook.yml --ask-vault-pass</pre></div><div class='content'></div><h2>Practical Exercise</h2>
<div class='content'></div><h3>Exercise: Encrypting and Using a Secret File</h3>
<div class='content'><ol>
<li>
<p><strong>Create a file named <code>secrets.yml</code> with the following content:</strong></p>
<pre><code class="language-yaml">secret_message: &quot;This is a secret message&quot;
</code></pre>
</li>
<li>
<p><strong>Encrypt the file using Ansible Vault:</strong></p>
<pre><code class="language-bash">ansible-vault encrypt secrets.yml
</code></pre>
</li>
<li>
<p><strong>Create a playbook named <code>vault_playbook.yml</code> that uses the encrypted file:</strong></p>
<pre><code class="language-yaml">---
- name: Playbook using Vault
  hosts: localhost
  vars_files:
    - secrets.yml
  tasks:
    - name: Print the secret message
      debug:
        msg: &quot;{{ secret_message }}&quot;
</code></pre>
</li>
<li>
<p><strong>Run the playbook and provide the vault password when prompted:</strong></p>
<pre><code class="language-bash">ansible-playbook vault_playbook.yml --ask-vault-pass
</code></pre>
</li>
</ol>
</div><h3>Solution</h3>
<div class='content'><ol>
<li>
<p><strong>Encrypting the file:</strong></p>
<pre><code class="language-bash">ansible-vault encrypt secrets.yml
</code></pre>
</li>
<li>
<p><strong>Playbook content (<code>vault_playbook.yml</code>):</strong></p>
<pre><code class="language-yaml">---
- name: Playbook using Vault
  hosts: localhost
  vars_files:
    - secrets.yml
  tasks:
    - name: Print the secret message
      debug:
        msg: &quot;{{ secret_message }}&quot;
</code></pre>
</li>
<li>
<p><strong>Running the playbook:</strong></p>
<pre><code class="language-bash">ansible-playbook vault_playbook.yml --ask-vault-pass
</code></pre>
</li>
</ol>
</div><h2>Common Mistakes and Tips</h2>
<div class='content'><ul>
<li><strong>Forgetting to encrypt files</strong>: Always ensure sensitive files are encrypted before committing them to version control.</li>
<li><strong>Misplacing the vault password</strong>: Store the vault password securely and avoid hardcoding it in scripts.</li>
<li><strong>Using multiple vault passwords</strong>: Use Vault IDs to manage multiple vault passwords effectively.</li>
</ul>
</div><h2>Conclusion</h2>
<div class='content'><p>Ansible Vault is a powerful tool for securing sensitive data in your automation scripts. By understanding how to encrypt, decrypt, and use vault files in playbooks, you can enhance the security of your Ansible projects. Practice encrypting and using vault files to become proficient in managing sensitive information securely.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-02-templates' title="Templates" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-02-templates' title="Templates" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-04-error-handling' title="Error Handling" class="py-2 px-3 btn btn-primary"
				data-read-mod="ansible" data-read-unit="5-3">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-04-error-handling' title="Error Handling" class="py-2 px-3 btn btn-primary" 
				data-read-mod="ansible" data-read-unit="5-3">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Ansible: From Beginner to Advanced</h1>
<h2>Module 1: Introduction to Ansible</h2>
<ul>
<li><a href="01-01-what-is-ansible">What is Ansible?</a></li>
<li><a href="01-02-installing-ansible">Installing Ansible</a></li>
<li><a href="01-03-ansible-architecture">Ansible Architecture</a></li>
<li><a href="01-04-basic-ansible-commands">Basic Ansible Commands</a></li>
</ul>
<h2>Module 2: Ansible Basics</h2>
<ul>
<li><a href="02-01-inventory-files">Inventory Files</a></li>
<li><a href="02-02-ansible-configuration">Ansible Configuration</a></li>
<li><a href="02-03-ad-hoc-commands">Ad-Hoc Commands</a></li>
<li><a href="02-04-ansible-modules">Ansible Modules</a></li>
</ul>
<h2>Module 3: Playbooks</h2>
<ul>
<li><a href="03-01-introduction-to-playbooks">Introduction to Playbooks</a></li>
<li><a href="03-02-writing-your-first-playbook">Writing Your First Playbook</a></li>
<li><a href="03-03-playbook-structure">Playbook Structure</a></li>
<li><a href="03-04-variables-and-facts">Variables and Facts</a></li>
<li><a href="03-05-conditionals-and-loops">Conditionals and Loops</a></li>
</ul>
<h2>Module 4: Roles</h2>
<ul>
<li><a href="04-01-introduction-to-roles">Introduction to Roles</a></li>
<li><a href="04-02-creating-roles">Creating Roles</a></li>
<li><a href="04-03-role-directory-structure">Role Directory Structure</a></li>
<li><a href="04-04-using-roles-in-playbooks">Using Roles in Playbooks</a></li>
</ul>
<h2>Module 5: Advanced Playbook Techniques</h2>
<ul>
<li><a href="05-01-handlers">Handlers</a></li>
<li><a href="05-02-templates">Templates</a></li>
<li><a href="05-03-ansible-vault">Ansible Vault</a></li>
<li><a href="05-04-error-handling">Error Handling</a></li>
<li><a href="05-05-optimizing-playbooks">Optimizing Playbooks</a></li>
</ul>
<h2>Module 6: Ansible Galaxy</h2>
<ul>
<li><a href="06-01-what-is-ansible-galaxy">What is Ansible Galaxy?</a></li>
<li><a href="06-02-using-ansible-galaxy">Using Ansible Galaxy</a></li>
<li><a href="06-03-creating-and-sharing-roles">Creating and Sharing Roles</a></li>
</ul>
<h2>Module 7: Ansible Tower</h2>
<ul>
<li><a href="07-01-introduction-to-ansible-tower">Introduction to Ansible Tower</a></li>
<li><a href="07-02-installing-ansible-tower">Installing Ansible Tower</a></li>
<li><a href="07-03-using-ansible-tower">Using Ansible Tower</a></li>
<li><a href="07-04-managing-projects-and-inventories">Managing Projects and Inventories</a></li>
</ul>
<h2>Module 8: Ansible for DevOps</h2>
<ul>
<li><a href="08-01-ansible-and-docker">Ansible and Docker</a></li>
<li><a href="08-02-ansible-and-kubernetes">Ansible and Kubernetes</a></li>
<li><a href="08-03-ci-cd-with-ansible">CI/CD with Ansible</a></li>
<li><a href="08-04-ansible-in-cloud-environments">Ansible in Cloud Environments</a></li>
</ul>
<h2>Module 9: Ansible Best Practices</h2>
<ul>
<li><a href="09-01-code-organization">Code Organization</a></li>
<li><a href="09-02-security-best-practices">Security Best Practices</a></li>
<li><a href="09-03-performance-tuning">Performance Tuning</a></li>
<li><a href="09-04-testing-ansible-code">Testing Ansible Code</a></li>
</ul>
<h2>Module 10: Advanced Ansible Topics</h2>
<ul>
<li><a href="10-01-custom-modules">Custom Modules</a></li>
<li><a href="10-02-dynamic-inventory">Dynamic Inventory</a></li>
<li><a href="10-03-ansible-plugins">Ansible Plugins</a></li>
<li><a href="10-04-ansible-api">Ansible API</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
