<!DOCTYPE html>
<html lang="en">
<head>
    <title> Handlers </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, nofollow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/ansible/05-01-handlers" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/ansible/05-01-handlers" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/ansible/05-01-handlers" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.188a386f47.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "ansible";
  		var TEMA_NAME = "5-1";
  		var TYPE = "mod";
  		var PATH = "mod/ansible/05-01-handlers";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/ansible/05-01-handlers" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/ansible/05-01-handlers" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="ansible">
		<a  href="#" class="text-secondary d-none" data-read-mod="ansible" data-read-unit="5-1" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="ansible" data-unread-unit="5-1" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-04-using-roles-in-playbooks' title="Using Roles in Playbooks" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-04-using-roles-in-playbooks' title="Using Roles in Playbooks" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Handlers</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-02-templates' title="Templates" class="py-2 px-3 btn btn-primary"
				data-read-mod="ansible" data-read-unit="5-1">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-02-templates' title="Templates" class="py-2 px-3 btn btn-primary" 
				data-read-mod="ansible" data-read-unit="5-1">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'></div><h2>Introduction to Handlers</h2>
<div class='content'><p>Handlers in Ansible are special tasks that are triggered by other tasks. They are typically used to perform actions that need to happen only once after a series of tasks have been executed, such as restarting a service after a configuration file has been changed.</p>
</div><h3>Key Concepts</h3>
<div class='content'><ul>
<li><strong>Handlers</strong>: Special tasks that are triggered by the <code>notify</code> directive.</li>
<li><strong>Notify</strong>: A directive used in a task to trigger a handler.</li>
<li><strong>Listen</strong>: A directive used in a handler to allow multiple tasks to notify the same handler.</li>
</ul>
</div><h2>Creating Handlers</h2>
<div class='content'><p>Handlers are defined similarly to regular tasks but are placed under a <code>handlers</code> section in a playbook or role. Here is a basic example:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogRXhhbXBsZSBwbGF5Ym9vayB3aXRoIGhhbmRsZXJzCiAgaG9zdHM6IHdlYnNlcnZlcnMKICB0YXNrczoKICAgIC0gbmFtZTogSW5zdGFsbCBBcGFjaGUKICAgICAgYXB0OgogICAgICAgIG5hbWU6IGFwYWNoZTIKICAgICAgICBzdGF0ZTogcHJlc2VudAogICAgICBub3RpZnk6IFJlc3RhcnQgQXBhY2hlCgogIGhhbmRsZXJzOgogICAgLSBuYW1lOiBSZXN0YXJ0IEFwYWNoZQogICAgICBzZXJ2aWNlOgogICAgICAgIG5hbWU6IGFwYWNoZTIKICAgICAgICBzdGF0ZTogcmVzdGFydGVk"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Example playbook with handlers
  hosts: webservers
  tasks:
    - name: Install Apache
      apt:
        name: apache2
        state: present
      notify: Restart Apache

  handlers:
    - name: Restart Apache
      service:
        name: apache2
        state: restarted</pre></div><div class='content'></div><h3>Explanation</h3>
<div class='content'><ul>
<li><strong>Tasks Section</strong>: Contains the tasks to be executed. In this example, it installs the Apache web server.</li>
<li><strong>Notify Directive</strong>: The <code>notify</code> directive in the task triggers the <code>Restart Apache</code> handler.</li>
<li><strong>Handlers Section</strong>: Contains the handler definition. The handler will restart the Apache service when notified.</li>
</ul>
</div><h2>Practical Example</h2>
<div class='content'><p>Let's create a more detailed example where we update a configuration file and then restart the service.</p>
</div><h3>Playbook Example</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogVXBkYXRlIE5naW54IGNvbmZpZ3VyYXRpb24gYW5kIHJlc3RhcnQgc2VydmljZQogIGhvc3RzOiB3ZWJzZXJ2ZXJzCiAgdGFza3M6CiAgICAtIG5hbWU6IEluc3RhbGwgTmdpbngKICAgICAgYXB0OgogICAgICAgIG5hbWU6IG5naW54CiAgICAgICAgc3RhdGU6IHByZXNlbnQKICAgICAgbm90aWZ5OiBSZXN0YXJ0IE5naW54CgogICAgLSBuYW1lOiBVcGRhdGUgTmdpbnggY29uZmlndXJhdGlvbgogICAgICB0ZW1wbGF0ZToKICAgICAgICBzcmM6IG5naW54LmNvbmYuajIKICAgICAgICBkZXN0OiAvZXRjL25naW54L25naW54LmNvbmYKICAgICAgbm90aWZ5OiBSZXN0YXJ0IE5naW54CgogIGhhbmRsZXJzOgogICAgLSBuYW1lOiBSZXN0YXJ0IE5naW54CiAgICAgIHNlcnZpY2U6CiAgICAgICAgbmFtZTogbmdpbngKICAgICAgICBzdGF0ZTogcmVzdGFydGVk"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Update Nginx configuration and restart service
  hosts: webservers
  tasks:
    - name: Install Nginx
      apt:
        name: nginx
        state: present
      notify: Restart Nginx

    - name: Update Nginx configuration
      template:
        src: nginx.conf.j2
        dest: /etc/nginx/nginx.conf
      notify: Restart Nginx

  handlers:
    - name: Restart Nginx
      service:
        name: nginx
        state: restarted</pre></div><div class='content'></div><h3>Explanation</h3>
<div class='content'><ul>
<li><strong>Install Nginx Task</strong>: Installs the Nginx web server and notifies the <code>Restart Nginx</code> handler.</li>
<li><strong>Update Nginx Configuration Task</strong>: Updates the Nginx configuration file using a template and notifies the <code>Restart Nginx</code> handler.</li>
<li><strong>Restart Nginx Handler</strong>: Restarts the Nginx service when notified.</li>
</ul>
</div><h2>Practical Exercise</h2>
<div class='content'></div><h3>Exercise</h3>
<div class='content'><ol>
<li>Create a playbook that installs MySQL, updates its configuration file, and restarts the MySQL service.</li>
<li>Use handlers to ensure the MySQL service is restarted only if the configuration file is changed.</li>
</ol>
</div><h3>Solution</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogSW5zdGFsbCBhbmQgY29uZmlndXJlIE15U1FMCiAgaG9zdHM6IGRhdGFiYXNlcwogIHRhc2tzOgogICAgLSBuYW1lOiBJbnN0YWxsIE15U1FMCiAgICAgIGFwdDoKICAgICAgICBuYW1lOiBteXNxbC1zZXJ2ZXIKICAgICAgICBzdGF0ZTogcHJlc2VudAogICAgICBub3RpZnk6IFJlc3RhcnQgTXlTUUwKCiAgICAtIG5hbWU6IFVwZGF0ZSBNeVNRTCBjb25maWd1cmF0aW9uCiAgICAgIHRlbXBsYXRlOgogICAgICAgIHNyYzogbXkuY25mLmoyCiAgICAgICAgZGVzdDogL2V0Yy9teXNxbC9teS5jbmYKICAgICAgbm90aWZ5OiBSZXN0YXJ0IE15U1FMCgogIGhhbmRsZXJzOgogICAgLSBuYW1lOiBSZXN0YXJ0IE15U1FMCiAgICAgIHNlcnZpY2U6CiAgICAgICAgbmFtZTogbXlzcWwKICAgICAgICBzdGF0ZTogcmVzdGFydGVk"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Install and configure MySQL
  hosts: databases
  tasks:
    - name: Install MySQL
      apt:
        name: mysql-server
        state: present
      notify: Restart MySQL

    - name: Update MySQL configuration
      template:
        src: my.cnf.j2
        dest: /etc/mysql/my.cnf
      notify: Restart MySQL

  handlers:
    - name: Restart MySQL
      service:
        name: mysql
        state: restarted</pre></div><div class='content'></div><h3>Explanation</h3>
<div class='content'><ul>
<li><strong>Install MySQL Task</strong>: Installs the MySQL server and notifies the <code>Restart MySQL</code> handler.</li>
<li><strong>Update MySQL Configuration Task</strong>: Updates the MySQL configuration file using a template and notifies the <code>Restart MySQL</code> handler.</li>
<li><strong>Restart MySQL Handler</strong>: Restarts the MySQL service when notified.</li>
</ul>
</div><h2>Common Mistakes and Tips</h2>
<div class='content'><ul>
<li><strong>Multiple Notifications</strong>: If multiple tasks notify the same handler, the handler will only run once at the end of the playbook execution.</li>
<li><strong>Handler Names</strong>: Ensure handler names are unique within the playbook to avoid conflicts.</li>
<li><strong>Idempotency</strong>: Handlers should be idempotent, meaning running them multiple times should not change the system state after the first run.</li>
</ul>
</div><h2>Conclusion</h2>
<div class='content'><p>Handlers are a powerful feature in Ansible that allow you to perform actions conditionally based on the state of other tasks. By using handlers, you can ensure that services are restarted or other actions are taken only when necessary, making your playbooks more efficient and reliable.</p>
<p>In the next section, we will explore how to use templates in Ansible to manage configuration files dynamically.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-04-using-roles-in-playbooks' title="Using Roles in Playbooks" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-04-using-roles-in-playbooks' title="Using Roles in Playbooks" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-02-templates' title="Templates" class="py-2 px-3 btn btn-primary"
				data-read-mod="ansible" data-read-unit="5-1">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-02-templates' title="Templates" class="py-2 px-3 btn btn-primary" 
				data-read-mod="ansible" data-read-unit="5-1">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Ansible: From Beginner to Advanced</h1>
<h2>Module 1: Introduction to Ansible</h2>
<ul>
<li><a href="01-01-what-is-ansible">What is Ansible?</a></li>
<li><a href="01-02-installing-ansible">Installing Ansible</a></li>
<li><a href="01-03-ansible-architecture">Ansible Architecture</a></li>
<li><a href="01-04-basic-ansible-commands">Basic Ansible Commands</a></li>
</ul>
<h2>Module 2: Ansible Basics</h2>
<ul>
<li><a href="02-01-inventory-files">Inventory Files</a></li>
<li><a href="02-02-ansible-configuration">Ansible Configuration</a></li>
<li><a href="02-03-ad-hoc-commands">Ad-Hoc Commands</a></li>
<li><a href="02-04-ansible-modules">Ansible Modules</a></li>
</ul>
<h2>Module 3: Playbooks</h2>
<ul>
<li><a href="03-01-introduction-to-playbooks">Introduction to Playbooks</a></li>
<li><a href="03-02-writing-your-first-playbook">Writing Your First Playbook</a></li>
<li><a href="03-03-playbook-structure">Playbook Structure</a></li>
<li><a href="03-04-variables-and-facts">Variables and Facts</a></li>
<li><a href="03-05-conditionals-and-loops">Conditionals and Loops</a></li>
</ul>
<h2>Module 4: Roles</h2>
<ul>
<li><a href="04-01-introduction-to-roles">Introduction to Roles</a></li>
<li><a href="04-02-creating-roles">Creating Roles</a></li>
<li><a href="04-03-role-directory-structure">Role Directory Structure</a></li>
<li><a href="04-04-using-roles-in-playbooks">Using Roles in Playbooks</a></li>
</ul>
<h2>Module 5: Advanced Playbook Techniques</h2>
<ul>
<li><a href="05-01-handlers">Handlers</a></li>
<li><a href="05-02-templates">Templates</a></li>
<li><a href="05-03-ansible-vault">Ansible Vault</a></li>
<li><a href="05-04-error-handling">Error Handling</a></li>
<li><a href="05-05-optimizing-playbooks">Optimizing Playbooks</a></li>
</ul>
<h2>Module 6: Ansible Galaxy</h2>
<ul>
<li><a href="06-01-what-is-ansible-galaxy">What is Ansible Galaxy?</a></li>
<li><a href="06-02-using-ansible-galaxy">Using Ansible Galaxy</a></li>
<li><a href="06-03-creating-and-sharing-roles">Creating and Sharing Roles</a></li>
</ul>
<h2>Module 7: Ansible Tower</h2>
<ul>
<li><a href="07-01-introduction-to-ansible-tower">Introduction to Ansible Tower</a></li>
<li><a href="07-02-installing-ansible-tower">Installing Ansible Tower</a></li>
<li><a href="07-03-using-ansible-tower">Using Ansible Tower</a></li>
<li><a href="07-04-managing-projects-and-inventories">Managing Projects and Inventories</a></li>
</ul>
<h2>Module 8: Ansible for DevOps</h2>
<ul>
<li><a href="08-01-ansible-and-docker">Ansible and Docker</a></li>
<li><a href="08-02-ansible-and-kubernetes">Ansible and Kubernetes</a></li>
<li><a href="08-03-ci-cd-with-ansible">CI/CD with Ansible</a></li>
<li><a href="08-04-ansible-in-cloud-environments">Ansible in Cloud Environments</a></li>
</ul>
<h2>Module 9: Ansible Best Practices</h2>
<ul>
<li><a href="09-01-code-organization">Code Organization</a></li>
<li><a href="09-02-security-best-practices">Security Best Practices</a></li>
<li><a href="09-03-performance-tuning">Performance Tuning</a></li>
<li><a href="09-04-testing-ansible-code">Testing Ansible Code</a></li>
</ul>
<h2>Module 10: Advanced Ansible Topics</h2>
<ul>
<li><a href="10-01-custom-modules">Custom Modules</a></li>
<li><a href="10-02-dynamic-inventory">Dynamic Inventory</a></li>
<li><a href="10-03-ansible-plugins">Ansible Plugins</a></li>
<li><a href="10-04-ansible-api">Ansible API</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
