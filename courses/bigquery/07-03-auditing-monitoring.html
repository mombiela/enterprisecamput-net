<!DOCTYPE html>
<html lang="en">
<head>
    <title> Auditing and Monitoring </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, nofollow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/bigquery/07-03-auditing-monitoring" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/bigquery/07-03-auditing-monitoring" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/bigquery/07-03-auditing-monitoring" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.ea63f62b9e.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "bigquery";
  		var TEMA_NAME = "7-3";
  		var TYPE = "mod";
  		var PATH = "mod/bigquery/07-03-auditing-monitoring";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/bigquery/07-03-auditing-monitoring" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/bigquery/07-03-auditing-monitoring" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="bigquery">
		<a  href="#" class="text-secondary d-none" data-read-mod="bigquery" data-read-unit="7-3" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="bigquery" data-unread-unit="7-3" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='07-02-data-encryption' title="Data Encryption" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='07-02-data-encryption' title="Data Encryption" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">Auditing and Monitoring</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-04-compliance-best-practices' title="Compliance and Best Practices" class="py-2 px-3 btn btn-primary"
				data-read-mod="bigquery" data-read-unit="7-3">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-04-compliance-best-practices' title="Compliance and Best Practices" class="py-2 px-3 btn btn-primary" 
				data-read-mod="bigquery" data-read-unit="7-3">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Auditing and monitoring are critical components of maintaining a secure and efficient BigQuery environment. This section will cover the tools and techniques available in BigQuery for auditing and monitoring your data and queries. By the end of this module, you will understand how to track access and changes to your data, monitor query performance, and ensure compliance with organizational policies.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Auditing</strong>: The process of recording and analyzing access and changes to data and resources.</li>
<li><strong>Monitoring</strong>: The continuous observation of system performance and resource usage to ensure optimal operation.</li>
</ol>
</div><h1>Tools and Techniques</h1>
<div class='content'></div><h2><ol>
<li>Audit Logs</li>
</ol></h2>
<div class='content'><p>BigQuery integrates with Google Cloud's audit logging to provide detailed logs of activities. There are three types of audit logs:</p>
<ul>
<li><strong>Admin Activity Logs</strong>: Record administrative actions such as creating or deleting datasets.</li>
<li><strong>Data Access Logs</strong>: Record read and write operations on data.</li>
<li><strong>System Event Logs</strong>: Record system events like VM migrations.</li>
</ul>
<h4>Example: Viewing Audit Logs</h4>
<p>To view audit logs in the Google Cloud Console:</p>
<ol>
<li>Navigate to the <strong>Logging</strong> section.</li>
<li>Select <strong>Logs Explorer</strong>.</li>
<li>Use the following query to filter BigQuery logs:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVzb3VyY2UudHlwZT0iYmlncXVlcnlfcmVzb3VyY2Ui"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>resource.type=&quot;bigquery_resource&quot;</pre></div><div class='content'></div><h2><ol start="2">
<li>Monitoring with Stackdriver</li>
</ol></h2>
<div class='content'><p>Google Cloud's Stackdriver provides monitoring capabilities for BigQuery. It allows you to set up dashboards, alerts, and custom metrics.</p>
<h4>Example: Setting Up a Monitoring Dashboard</h4>
<ol>
<li>Go to the <strong>Monitoring</strong> section in the Google Cloud Console.</li>
<li>Select <strong>Dashboards</strong> and click <strong>Create Dashboard</strong>.</li>
<li>Add widgets to monitor metrics such as query execution time, slot utilization, and bytes processed.</li>
</ol>
</div><h2><ol start="3">
<li>Query Execution Monitoring</li>
</ol></h2>
<div class='content'><p>BigQuery provides detailed information about query execution, which can be accessed through the BigQuery UI or via SQL queries.</p>
<h4>Example: Querying Job Metadata</h4>
<p>You can query the <code>INFORMATION_SCHEMA.JOBS</code> view to get details about query jobs:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUCiAgY3JlYXRpb25fdGltZSwKICBqb2JfaWQsCiAgc3RhdGUsCiAgdXNlcl9lbWFpbCwKICB0b3RhbF9ieXRlc19wcm9jZXNzZWQsCiAgdG90YWxfc2xvdF9tcwpGUk9NCiAgYHJlZ2lvbi11c2AuSU5GT1JNQVRJT05fU0NIRU1BLkpPQlNfQllfUFJPSkVDVApXSEVSRQogIGNyZWF0aW9uX3RpbWUgPiBUSU1FU1RBTVBfU1VCKENVUlJFTlRfVElNRVNUQU1QKCksIElOVEVSVkFMIDEgREFZKQpPUkRFUiBCWQogIGNyZWF0aW9uX3RpbWUgREVTQzs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT
  creation_time,
  job_id,
  state,
  user_email,
  total_bytes_processed,
  total_slot_ms
FROM
  `region-us`.INFORMATION_SCHEMA.JOBS_BY_PROJECT
WHERE
  creation_time &gt; TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 1 DAY)
ORDER BY
  creation_time DESC;</pre></div><div class='content'></div><h2><ol start="4">
<li>Setting Alerts</li>
</ol></h2>
<div class='content'><p>You can set up alerts in Stackdriver to notify you of specific conditions, such as high query latency or excessive resource usage.</p>
<h4>Example: Creating an Alert Policy</h4>
<ol>
<li>In the <strong>Monitoring</strong> section, select <strong>Alerting</strong>.</li>
<li>Click <strong>Create Policy</strong>.</li>
<li>Define the conditions for the alert, such as high CPU usage or long-running queries.</li>
<li>Set up notification channels (email, SMS, etc.).</li>
</ol>
</div><h1>Practical Exercises</h1>
<div class='content'></div><h2>Exercise 1: Viewing Audit Logs</h2>
<div class='content'><ol>
<li>Navigate to the <strong>Logging</strong> section in the Google Cloud Console.</li>
<li>Use the Logs Explorer to filter and view BigQuery audit logs.</li>
<li>Identify a recent data access log and note the details such as user, timestamp, and action.</li>
</ol>
</div><h2>Exercise 2: Creating a Monitoring Dashboard</h2>
<div class='content'><ol>
<li>Go to the <strong>Monitoring</strong> section and create a new dashboard.</li>
<li>Add widgets to monitor the following metrics:
<ul>
<li>Query execution time</li>
<li>Slot utilization</li>
<li>Bytes processed</li>
</ul>
</li>
<li>Save the dashboard and observe the metrics over time.</li>
</ol>
</div><h2>Exercise 3: Setting Up an Alert</h2>
<div class='content'><ol>
<li>In the <strong>Monitoring</strong> section, create a new alert policy.</li>
<li>Define a condition to trigger the alert, such as query execution time exceeding a threshold.</li>
<li>Set up a notification channel to receive alerts.</li>
</ol>
</div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Ignoring Audit Logs</strong>: Regularly review audit logs to detect unauthorized access or unusual activity.</li>
<li><strong>Overlooking Alerts</strong>: Set up alerts for critical metrics to proactively address issues.</li>
<li><strong>Not Using Dashboards</strong>: Utilize monitoring dashboards to get a real-time view of your BigQuery environment.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Auditing and monitoring are essential for maintaining the security and performance of your BigQuery environment. By leveraging Google Cloud's audit logging and Stackdriver monitoring, you can ensure that your data is secure, your queries are efficient, and your system is compliant with organizational policies. In the next section, we will explore compliance and best practices to further enhance your BigQuery setup.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='07-02-data-encryption' title="Data Encryption" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='07-02-data-encryption' title="Data Encryption" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-04-compliance-best-practices' title="Compliance and Best Practices" class="py-2 px-3 btn btn-primary"
				data-read-mod="bigquery" data-read-unit="7-3">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-04-compliance-best-practices' title="Compliance and Best Practices" class="py-2 px-3 btn btn-primary" 
				data-read-mod="bigquery" data-read-unit="7-3">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>BigQuery Course</h1>
<h2>Module 1: Introduction to BigQuery</h2>
<ul>
<li><a href="01-01-what-is-bigquery">What is BigQuery?</a></li>
<li><a href="01-02-setting-up-environment">Setting Up Your BigQuery Environment</a></li>
<li><a href="01-03-understanding-architecture">Understanding BigQuery Architecture</a></li>
<li><a href="01-04-console-overview">BigQuery Console Overview</a></li>
</ul>
<h2>Module 2: Basic SQL in BigQuery</h2>
<ul>
<li><a href="02-01-introduction-to-sql">Introduction to SQL</a></li>
<li><a href="02-02-basic-sql-queries">Basic SQL Queries</a></li>
<li><a href="02-03-filtering-sorting-data">Filtering and Sorting Data</a></li>
<li><a href="02-04-aggregating-data">Aggregating Data</a></li>
</ul>
<h2>Module 3: Intermediate SQL in BigQuery</h2>
<ul>
<li><a href="03-01-joins-unions">Joins and Unions</a></li>
<li><a href="03-02-subqueries">Subqueries</a></li>
<li><a href="03-03-common-table-expressions">Common Table Expressions (CTEs)</a></li>
<li><a href="03-04-window-functions">Window Functions</a></li>
</ul>
<h2>Module 4: Advanced SQL in BigQuery</h2>
<ul>
<li><a href="04-01-advanced-joins">Advanced Joins</a></li>
<li><a href="04-02-nested-repeated-fields">Nested and Repeated Fields</a></li>
<li><a href="04-03-user-defined-functions">User-Defined Functions (UDFs)</a></li>
<li><a href="04-04-partitioning-clustering">Partitioning and Clustering</a></li>
</ul>
<h2>Module 5: BigQuery Data Management</h2>
<ul>
<li><a href="05-01-loading-data">Loading Data into BigQuery</a></li>
<li><a href="05-02-exporting-data">Exporting Data from BigQuery</a></li>
<li><a href="05-03-data-transformation-cleaning">Data Transformation and Cleaning</a></li>
<li><a href="05-04-managing-datasets-tables">Managing Datasets and Tables</a></li>
</ul>
<h2>Module 6: BigQuery Performance Optimization</h2>
<ul>
<li><a href="06-01-query-optimization-techniques">Query Optimization Techniques</a></li>
<li><a href="06-02-query-execution-plans">Understanding Query Execution Plans</a></li>
<li><a href="06-03-using-materialized-views">Using Materialized Views</a></li>
<li><a href="06-04-optimizing-storage">Optimizing Storage</a></li>
</ul>
<h2>Module 7: BigQuery Security and Compliance</h2>
<ul>
<li><a href="07-01-access-control-permissions">Access Control and Permissions</a></li>
<li><a href="07-02-data-encryption">Data Encryption</a></li>
<li><a href="07-03-auditing-monitoring">Auditing and Monitoring</a></li>
<li><a href="07-04-compliance-best-practices">Compliance and Best Practices</a></li>
</ul>
<h2>Module 8: BigQuery Integration and Automation</h2>
<ul>
<li><a href="08-01-integrating-google-cloud">Integrating with Google Cloud Services</a></li>
<li><a href="08-02-using-dataflow">Using BigQuery with Dataflow</a></li>
<li><a href="08-03-automating-workflows">Automating Workflows with Cloud Functions</a></li>
<li><a href="08-04-scheduling-queries">Scheduling Queries with Cloud Scheduler</a></li>
</ul>
<h2>Module 9: BigQuery Machine Learning (BQML)</h2>
<ul>
<li><a href="09-01-introduction-bqml">Introduction to BigQuery ML</a></li>
<li><a href="09-02-creating-training-models">Creating and Training Models</a></li>
<li><a href="09-03-evaluating-predicting-models">Evaluating and Predicting with Models</a></li>
<li><a href="09-04-advanced-bqml-features">Advanced BQML Features</a></li>
</ul>
<h2>Module 10: Real-World BigQuery Use Cases</h2>
<ul>
<li><a href="10-01-analyzing-web-app-analytics">Analyzing Web and App Analytics</a></li>
<li><a href="10-02-financial-data-analysis">Financial Data Analysis</a></li>
<li><a href="10-03-iot-data-processing">IoT Data Processing</a></li>
<li><a href="10-04-building-dashboards-data-studio">Building Dashboards with Data Studio</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
