<!DOCTYPE html>
<html lang="en">
<head>
    <title> Metrics Server </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/kubernetes/07-04-metrics-server" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/kubernetes/07-04-metrics-server" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/kubernetes/07-04-metrics-server" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.188a386f47.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "kubernetes";
  		var TEMA_NAME = "7-4";
  		var TYPE = "mod";
  		var PATH = "mod/kubernetes/07-04-metrics-server";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/kubernetes/07-04-metrics-server" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/kubernetes/07-04-metrics-server" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="kubernetes">
		<a  href="#" class="text-secondary d-none" data-read-mod="kubernetes" data-read-unit="7-4" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="kubernetes" data-unread-unit="7-4" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='07-03-health-checks-probes' title="Health Checks and Probes" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='07-03-health-checks-probes' title="Health Checks and Probes" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Metrics Server</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='08-01-rbac' title="Role-Based Access Control (RBAC)" class="py-2 px-3 btn btn-primary"
				data-read-mod="kubernetes" data-read-unit="7-4">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='08-01-rbac' title="Role-Based Access Control (RBAC)" class="py-2 px-3 btn btn-primary" 
				data-read-mod="kubernetes" data-read-unit="7-4">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'></div><h2>Introduction</h2>
<div class='content'><p>The Metrics Server is a scalable, efficient source of container resource metrics for Kubernetes built-in autoscaling pipelines. It collects resource usage data from the Kubelet on each node and provides aggregated metrics through the Kubernetes API.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Metrics Server</strong>: A cluster-wide aggregator of resource usage data.</li>
<li><strong>Kubelet</strong>: An agent that runs on each node in the cluster and reports resource usage.</li>
<li><strong>Resource Metrics API</strong>: An API provided by the Metrics Server to access resource usage data.</li>
</ul>
</div><h2>Why Use Metrics Server?</h2>
<div class='content'><ul>
<li><strong>Autoscaling</strong>: Metrics Server is essential for Horizontal Pod Autoscaler (HPA) and Vertical Pod Autoscaler (VPA).</li>
<li><strong>Monitoring</strong>: Provides insights into resource usage for better monitoring and management.</li>
<li><strong>Efficiency</strong>: Lightweight and designed to handle large clusters efficiently.</li>
</ul>
</div><h2>Installing Metrics Server</h2>
<div class='content'></div><h3>Prerequisites</h3>
<div class='content'><ul>
<li>A running Kubernetes cluster.</li>
<li><code>kubectl</code> command-line tool configured to interact with your cluster.</li>
</ul>
</div><h3>Installation Steps</h3>
<div class='content'><ol>
<li>
<p><strong>Download the Metrics Server manifest</strong>:</p>
<pre><code class="language-sh">kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml
</code></pre>
</li>
<li>
<p><strong>Verify the installation</strong>:</p>
<pre><code class="language-sh">kubectl get deployment metrics-server -n kube-system
</code></pre>
</li>
<li>
<p><strong>Check the Metrics Server logs</strong>:</p>
<pre><code class="language-sh">kubectl logs -n kube-system deployment/metrics-server
</code></pre>
</li>
</ol>
</div><h2>Using Metrics Server</h2>
<div class='content'></div><h3>Accessing Metrics</h3>
<div class='content'><p>You can access the metrics using the <code>kubectl top</code> command.</p>
<ul>
<li>
<p><strong>View node metrics</strong>:</p>
<pre><code class="language-sh">kubectl top nodes
</code></pre>
</li>
<li>
<p><strong>View pod metrics</strong>:</p>
<pre><code class="language-sh">kubectl top pods --all-namespaces
</code></pre>
</li>
</ul>
</div><h3>Example Output</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCBrdWJlY3RsIHRvcCBub2RlcwpOQU1FICAgICAgICAgICBDUFUoY29yZXMpICAgQ1BVJSAgIE1FTU9SWShieXRlcykgICBNRU1PUlklCm5vZGUtMSAgICAgICAgIDI1MG0gICAgICAgICAxMiUgICAgMTAyNE1pICAgICAgICAgIDUwJQpub2RlLTIgICAgICAgICAzMDBtICAgICAgICAgMTUlICAgIDIwNDhNaSAgICAgICAgICA2MCU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ kubectl top nodes
NAME           CPU(cores)   CPU%   MEMORY(bytes)   MEMORY%
node-1         250m         12%    1024Mi          50%
node-2         300m         15%    2048Mi          60%</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCBrdWJlY3RsIHRvcCBwb2RzIC0tYWxsLW5hbWVzcGFjZXMKTkFNRVNQQUNFICAgICBOQU1FICAgICAgICAgICAgICAgICAgICAgICAgICAgIENQVShjb3JlcykgICBNRU1PUlkoYnl0ZXMpCmRlZmF1bHQgICAgICAgbXktYXBwLTVkNjlmN2Q0ZDctOHg5azIgICAgICAgICA1MG0gICAgICAgICAgMTI4TWkKa3ViZS1zeXN0ZW0gICBrdWJlLWRucy02ZDRiNzVjYjZkLTh4OWsyICAgICAgIDIwbSAgICAgICAgICA2NE1p"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ kubectl top pods --all-namespaces
NAMESPACE     NAME                            CPU(cores)   MEMORY(bytes)
default       my-app-5d69f7d4d7-8x9k2         50m          128Mi
kube-system   kube-dns-6d4b75cb6d-8x9k2       20m          64Mi</pre></div><div class='content'></div><h2>Practical Exercise</h2>
<div class='content'></div><h3>Exercise: Install and Use Metrics Server</h3>
<div class='content'><ol>
<li>
<p><strong>Install Metrics Server</strong>:</p>
<ul>
<li>Follow the installation steps provided above.</li>
</ul>
</li>
<li>
<p><strong>Verify the installation</strong>:</p>
<ul>
<li>Ensure the Metrics Server is running by checking the deployment status and logs.</li>
</ul>
</li>
<li>
<p><strong>Access node metrics</strong>:</p>
<ul>
<li>Use <code>kubectl top nodes</code> to view the resource usage of nodes.</li>
</ul>
</li>
<li>
<p><strong>Access pod metrics</strong>:</p>
<ul>
<li>Use <code>kubectl top pods --all-namespaces</code> to view the resource usage of pods.</li>
</ul>
</li>
</ol>
</div><h3>Solution</h3>
<div class='content'><ol>
<li>
<p><strong>Install Metrics Server</strong>:</p>
<pre><code class="language-sh">kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml
</code></pre>
</li>
<li>
<p><strong>Verify the installation</strong>:</p>
<pre><code class="language-sh">kubectl get deployment metrics-server -n kube-system
kubectl logs -n kube-system deployment/metrics-server
</code></pre>
</li>
<li>
<p><strong>Access node metrics</strong>:</p>
<pre><code class="language-sh">kubectl top nodes
</code></pre>
</li>
<li>
<p><strong>Access pod metrics</strong>:</p>
<pre><code class="language-sh">kubectl top pods --all-namespaces
</code></pre>
</li>
</ol>
</div><h2>Common Mistakes and Tips</h2>
<div class='content'><ul>
<li><strong>Metrics Server not collecting data</strong>: Ensure that the Metrics Server has the necessary permissions and that the Kubelet is configured correctly.</li>
<li><strong>Resource usage not displayed</strong>: It may take a few minutes for the Metrics Server to start collecting and displaying data after installation.</li>
<li><strong>Cluster size</strong>: Metrics Server is designed to handle large clusters, but ensure your cluster resources are sufficient to support it.</li>
</ul>
</div><h2>Conclusion</h2>
<div class='content'><p>The Metrics Server is a crucial component for monitoring and autoscaling in Kubernetes. By providing resource usage metrics, it enables efficient management and scaling of applications. In this section, you learned how to install, verify, and use the Metrics Server to access node and pod metrics. This knowledge is foundational for advanced topics like autoscaling and performance tuning.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='07-03-health-checks-probes' title="Health Checks and Probes" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='07-03-health-checks-probes' title="Health Checks and Probes" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='08-01-rbac' title="Role-Based Access Control (RBAC)" class="py-2 px-3 btn btn-primary"
				data-read-mod="kubernetes" data-read-unit="7-4">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='08-01-rbac' title="Role-Based Access Control (RBAC)" class="py-2 px-3 btn btn-primary" 
				data-read-mod="kubernetes" data-read-unit="7-4">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Kubernetes Course</h1>
<h2>Module 1: Introduction to Kubernetes</h2>
<ul>
<li><a href="01-01-what-is-kubernetes">What is Kubernetes?</a></li>
<li><a href="01-02-kubernetes-architecture">Kubernetes Architecture</a></li>
<li><a href="01-03-key-concepts-terminology">Key Concepts and Terminology</a></li>
<li><a href="01-04-setting-up-cluster">Setting Up a Kubernetes Cluster</a></li>
<li><a href="01-05-kubernetes-cli">Kubernetes CLI (kubectl)</a></li>
</ul>
<h2>Module 2: Core Kubernetes Components</h2>
<ul>
<li><a href="02-01-pods">Pods</a></li>
<li><a href="02-02-replicasets">ReplicaSets</a></li>
<li><a href="02-03-deployments">Deployments</a></li>
<li><a href="02-04-services">Services</a></li>
<li><a href="02-05-namespaces">Namespaces</a></li>
</ul>
<h2>Module 3: Configuration and Secrets Management</h2>
<ul>
<li><a href="03-01-configmaps">ConfigMaps</a></li>
<li><a href="03-02-secrets">Secrets</a></li>
<li><a href="03-03-environment-variables">Environment Variables</a></li>
<li><a href="03-04-resource-quotas-limits">Resource Quotas and Limits</a></li>
</ul>
<h2>Module 4: Networking in Kubernetes</h2>
<ul>
<li><a href="04-01-cluster-networking">Cluster Networking</a></li>
<li><a href="04-02-service-types">Service Types</a></li>
<li><a href="04-03-ingress-controllers">Ingress Controllers</a></li>
<li><a href="04-04-network-policies">Network Policies</a></li>
</ul>
<h2>Module 5: Storage in Kubernetes</h2>
<ul>
<li><a href="05-01-volumes">Volumes</a></li>
<li><a href="05-02-persistent-volumes">Persistent Volumes</a></li>
<li><a href="05-03-persistent-volume-claims">Persistent Volume Claims</a></li>
<li><a href="05-04-storage-classes">Storage Classes</a></li>
</ul>
<h2>Module 6: Advanced Kubernetes Concepts</h2>
<ul>
<li><a href="06-01-statefulsets">StatefulSets</a></li>
<li><a href="06-02-daemonsets">DaemonSets</a></li>
<li><a href="06-03-jobs-cronjobs">Jobs and CronJobs</a></li>
<li><a href="06-04-crds">Custom Resource Definitions (CRDs)</a></li>
</ul>
<h2>Module 7: Monitoring and Logging</h2>
<ul>
<li><a href="07-01-monitoring-prometheus">Monitoring with Prometheus</a></li>
<li><a href="07-02-logging-efk">Logging with Elasticsearch, Fluentd, and Kibana (EFK)</a></li>
<li><a href="07-03-health-checks-probes">Health Checks and Probes</a></li>
<li><a href="07-04-metrics-server">Metrics Server</a></li>
</ul>
<h2>Module 8: Security in Kubernetes</h2>
<ul>
<li><a href="08-01-rbac">Role-Based Access Control (RBAC)</a></li>
<li><a href="08-02-pod-security-policies">Pod Security Policies</a></li>
<li><a href="08-03-network-security">Network Security</a></li>
<li><a href="08-04-image-security">Image Security</a></li>
</ul>
<h2>Module 9: Scaling and Performance</h2>
<ul>
<li><a href="09-01-horizontal-pod-autoscaling">Horizontal Pod Autoscaling</a></li>
<li><a href="09-02-vertical-pod-autoscaling">Vertical Pod Autoscaling</a></li>
<li><a href="09-03-cluster-autoscaling">Cluster Autoscaling</a></li>
<li><a href="09-04-performance-tuning">Performance Tuning</a></li>
</ul>
<h2>Module 10: Kubernetes Ecosystem and Tools</h2>
<ul>
<li><a href="10-01-helm">Helm</a></li>
<li><a href="10-02-kustomize">Kustomize</a></li>
<li><a href="10-03-kubeadm">Kubeadm</a></li>
<li><a href="10-04-minikube">Minikube</a></li>
</ul>
<h2>Module 11: Case Studies and Real-World Applications</h2>
<ul>
<li><a href="11-01-deploying-web-application">Deploying a Web Application</a></li>
<li><a href="11-02-cicd-kubernetes">CI/CD with Kubernetes</a></li>
<li><a href="11-03-running-stateful-applications">Running Stateful Applications</a></li>
<li><a href="11-04-multi-cluster-management">Multi-Cluster Management</a></li>
</ul>
<h2>Module 12: Preparing for Kubernetes Certification</h2>
<ul>
<li><a href="12-01-cka">Certified Kubernetes Administrator (CKA)</a></li>
<li><a href="12-02-ckad">Certified Kubernetes Application Developer (CKAD)</a></li>
<li><a href="12-03-cks">Certified Kubernetes Security Specialist (CKS)</a></li>
<li><a href="12-04-exam-preparation-tips">Exam Preparation Tips</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
