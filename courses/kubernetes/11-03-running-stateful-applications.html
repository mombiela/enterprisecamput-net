<!DOCTYPE html>
<html lang="en">
<head>
    <title> Running Stateful Applications </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/kubernetes/11-03-running-stateful-applications" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/kubernetes/11-03-running-stateful-applications" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/kubernetes/11-03-running-stateful-applications" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.188a386f47.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "kubernetes";
  		var TEMA_NAME = "11-3";
  		var TYPE = "mod";
  		var PATH = "mod/kubernetes/11-03-running-stateful-applications";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/kubernetes/11-03-running-stateful-applications" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/kubernetes/11-03-running-stateful-applications" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="kubernetes">
		<a  href="#" class="text-secondary d-none" data-read-mod="kubernetes" data-read-unit="11-3" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="kubernetes" data-unread-unit="11-3" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='11-02-cicd-kubernetes' title="CI/CD with Kubernetes" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='11-02-cicd-kubernetes' title="CI/CD with Kubernetes" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Running Stateful Applications</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='11-04-multi-cluster-management' title="Multi-Cluster Management" class="py-2 px-3 btn btn-primary"
				data-read-mod="kubernetes" data-read-unit="11-3">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='11-04-multi-cluster-management' title="Multi-Cluster Management" class="py-2 px-3 btn btn-primary" 
				data-read-mod="kubernetes" data-read-unit="11-3">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to run stateful applications in Kubernetes. Stateful applications are those that require persistent storage and maintain state across restarts. Examples include databases, message queues, and other services that need to retain data.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ol>
<li><strong>StatefulSets</strong>: A Kubernetes workload API object used to manage stateful applications.</li>
<li><strong>Persistent Volumes (PVs)</strong>: Storage resources in a cluster that are provisioned by an administrator or dynamically provisioned using Storage Classes.</li>
<li><strong>Persistent Volume Claims (PVCs)</strong>: Requests for storage by a user.</li>
<li><strong>Headless Services</strong>: Services that do not have a cluster IP and are used to manage network identities for StatefulSets.</li>
</ol>
</div><h2>StatefulSets</h2>
<div class='content'><p>StatefulSets are designed to manage the deployment and scaling of a set of Pods, and provide guarantees about the ordering and uniqueness of these Pods.</p>
</div><h3>Features of StatefulSets</h3>
<div class='content'><ul>
<li><strong>Stable, unique network identifiers</strong>: Each Pod in a StatefulSet has a unique, stable network identity.</li>
<li><strong>Stable, persistent storage</strong>: Each Pod in a StatefulSet can have its own persistent storage, which is retained across rescheduling.</li>
<li><strong>Ordered, graceful deployment and scaling</strong>: Pods are created, deleted, and scaled in a defined order.</li>
<li><strong>Ordered, automated rolling updates</strong>: Updates to Pods are done in a controlled, sequential manner.</li>
</ul>
</div><h3>Example: Deploying a StatefulSet</h3>
<div class='content'><p>Let's deploy a simple StatefulSet for a MySQL database.</p>
<h4>Step 1: Create a Headless Service</h4>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogdjEKa2luZDogU2VydmljZQptZXRhZGF0YToKICBuYW1lOiBteXNxbAogIGxhYmVsczoKICAgIGFwcDogbXlzcWwKc3BlYzoKICBwb3J0czoKICAtIHBvcnQ6IDMzMDYKICAgIG5hbWU6IG15c3FsCiAgY2x1c3RlcklQOiBOb25lCiAgc2VsZWN0b3I6CiAgICBhcHA6IG15c3Fs"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: v1
kind: Service
metadata:
  name: mysql
  labels:
    app: mysql
spec:
  ports:
  - port: 3306
    name: mysql
  clusterIP: None
  selector:
    app: mysql</pre></div><div class='content'><h4>Step 2: Create a StatefulSet</h4>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogYXBwcy92MQpraW5kOiBTdGF0ZWZ1bFNldAptZXRhZGF0YToKICBuYW1lOiBteXNxbApzcGVjOgogIHNlcnZpY2VOYW1lOiAibXlzcWwiCiAgcmVwbGljYXM6IDMKICBzZWxlY3RvcjoKICAgIG1hdGNoTGFiZWxzOgogICAgICBhcHA6IG15c3FsCiAgdGVtcGxhdGU6CiAgICBtZXRhZGF0YToKICAgICAgbGFiZWxzOgogICAgICAgIGFwcDogbXlzcWwKICAgIHNwZWM6CiAgICAgIGNvbnRhaW5lcnM6CiAgICAgIC0gbmFtZTogbXlzcWwKICAgICAgICBpbWFnZTogbXlzcWw6NS43CiAgICAgICAgcG9ydHM6CiAgICAgICAgLSBjb250YWluZXJQb3J0OiAzMzA2CiAgICAgICAgICBuYW1lOiBteXNxbAogICAgICAgIHZvbHVtZU1vdW50czoKICAgICAgICAtIG5hbWU6IG15c3FsLXBlcnNpc3RlbnQtc3RvcmFnZQogICAgICAgICAgbW91bnRQYXRoOiAvdmFyL2xpYi9teXNxbAogICAgICAgIGVudjoKICAgICAgICAtIG5hbWU6IE1ZU1FMX1JPT1RfUEFTU1dPUkQKICAgICAgICAgIHZhbHVlOiAicGFzc3dvcmQiCiAgdm9sdW1lQ2xhaW1UZW1wbGF0ZXM6CiAgLSBtZXRhZGF0YToKICAgICAgbmFtZTogbXlzcWwtcGVyc2lzdGVudC1zdG9yYWdlCiAgICBzcGVjOgogICAgICBhY2Nlc3NNb2RlczogWyAiUmVhZFdyaXRlT25jZSIgXQogICAgICByZXNvdXJjZXM6CiAgICAgICAgcmVxdWVzdHM6CiAgICAgICAgICBzdG9yYWdlOiAxR2k="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: mysql
spec:
  serviceName: &quot;mysql&quot;
  replicas: 3
  selector:
    matchLabels:
      app: mysql
  template:
    metadata:
      labels:
        app: mysql
    spec:
      containers:
      - name: mysql
        image: mysql:5.7
        ports:
        - containerPort: 3306
          name: mysql
        volumeMounts:
        - name: mysql-persistent-storage
          mountPath: /var/lib/mysql
        env:
        - name: MYSQL_ROOT_PASSWORD
          value: &quot;password&quot;
  volumeClaimTemplates:
  - metadata:
      name: mysql-persistent-storage
    spec:
      accessModes: [ &quot;ReadWriteOnce&quot; ]
      resources:
        requests:
          storage: 1Gi</pre></div><div class='content'></div><h3>Explanation</h3>
<div class='content'><ul>
<li><strong>Headless Service</strong>: The headless service (<code>clusterIP: None</code>) is used to manage the network identities of the Pods in the StatefulSet.</li>
<li><strong>StatefulSet</strong>: The StatefulSet manages the deployment and scaling of the MySQL Pods.
<ul>
<li><strong>serviceName</strong>: The name of the headless service.</li>
<li><strong>replicas</strong>: The number of desired Pods.</li>
<li><strong>selector</strong>: The label selector to identify the Pods.</li>
<li><strong>template</strong>: The Pod template that includes the container specification.</li>
<li><strong>volumeClaimTemplates</strong>: Defines the PVCs for each Pod.</li>
</ul>
</li>
</ul>
</div><h2>Practical Exercise</h2>
<div class='content'></div><h3>Exercise: Deploy a Stateful Redis Cluster</h3>
<div class='content'><ol>
<li>
<p><strong>Create a Headless Service for Redis</strong>:</p>
<pre><code class="language-yaml">apiVersion: v1
kind: Service
metadata:
  name: redis
  labels:
    app: redis
spec:
  ports:
  - port: 6379
    name: redis
  clusterIP: None
  selector:
    app: redis
</code></pre>
</li>
<li>
<p><strong>Create a StatefulSet for Redis</strong>:</p>
<pre><code class="language-yaml">apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: redis
spec:
  serviceName: &quot;redis&quot;
  replicas: 3
  selector:
    matchLabels:
      app: redis
  template:
    metadata:
      labels:
        app: redis
    spec:
      containers:
      - name: redis
        image: redis:5.0.7
        ports:
        - containerPort: 6379
          name: redis
        volumeMounts:
        - name: redis-persistent-storage
          mountPath: /data
  volumeClaimTemplates:
  - metadata:
      name: redis-persistent-storage
    spec:
      accessModes: [ &quot;ReadWriteOnce&quot; ]
      resources:
        requests:
          storage: 1Gi
</code></pre>
</li>
</ol>
</div><h3>Solution Explanation</h3>
<div class='content'><ul>
<li><strong>Headless Service</strong>: Manages the network identities for the Redis Pods.</li>
<li><strong>StatefulSet</strong>: Manages the deployment and scaling of the Redis Pods.
<ul>
<li><strong>serviceName</strong>: The name of the headless service.</li>
<li><strong>replicas</strong>: The number of desired Pods.</li>
<li><strong>selector</strong>: The label selector to identify the Pods.</li>
<li><strong>template</strong>: The Pod template that includes the container specification.</li>
<li><strong>volumeClaimTemplates</strong>: Defines the PVCs for each Pod.</li>
</ul>
</li>
</ul>
</div><h2>Common Mistakes and Tips</h2>
<div class='content'><ul>
<li><strong>Persistent Volume Claims</strong>: Ensure that the storage class supports dynamic provisioning if you are using volumeClaimTemplates.</li>
<li><strong>Headless Service</strong>: Always use a headless service for StatefulSets to manage network identities.</li>
<li><strong>Pod Management</strong>: Be aware of the ordered, graceful deployment and scaling of Pods in a StatefulSet.</li>
</ul>
</div><h2>Conclusion</h2>
<div class='content'><p>In this section, we covered the basics of running stateful applications in Kubernetes using StatefulSets. We discussed the key concepts, features, and provided practical examples and exercises. Understanding StatefulSets is crucial for managing stateful applications that require persistent storage and stable network identities. In the next section, we will explore CI/CD with Kubernetes, which will help you automate the deployment and management of your applications.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='11-02-cicd-kubernetes' title="CI/CD with Kubernetes" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='11-02-cicd-kubernetes' title="CI/CD with Kubernetes" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='11-04-multi-cluster-management' title="Multi-Cluster Management" class="py-2 px-3 btn btn-primary"
				data-read-mod="kubernetes" data-read-unit="11-3">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='11-04-multi-cluster-management' title="Multi-Cluster Management" class="py-2 px-3 btn btn-primary" 
				data-read-mod="kubernetes" data-read-unit="11-3">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Kubernetes Course</h1>
<h2>Module 1: Introduction to Kubernetes</h2>
<ul>
<li><a href="01-01-what-is-kubernetes">What is Kubernetes?</a></li>
<li><a href="01-02-kubernetes-architecture">Kubernetes Architecture</a></li>
<li><a href="01-03-key-concepts-terminology">Key Concepts and Terminology</a></li>
<li><a href="01-04-setting-up-cluster">Setting Up a Kubernetes Cluster</a></li>
<li><a href="01-05-kubernetes-cli">Kubernetes CLI (kubectl)</a></li>
</ul>
<h2>Module 2: Core Kubernetes Components</h2>
<ul>
<li><a href="02-01-pods">Pods</a></li>
<li><a href="02-02-replicasets">ReplicaSets</a></li>
<li><a href="02-03-deployments">Deployments</a></li>
<li><a href="02-04-services">Services</a></li>
<li><a href="02-05-namespaces">Namespaces</a></li>
</ul>
<h2>Module 3: Configuration and Secrets Management</h2>
<ul>
<li><a href="03-01-configmaps">ConfigMaps</a></li>
<li><a href="03-02-secrets">Secrets</a></li>
<li><a href="03-03-environment-variables">Environment Variables</a></li>
<li><a href="03-04-resource-quotas-limits">Resource Quotas and Limits</a></li>
</ul>
<h2>Module 4: Networking in Kubernetes</h2>
<ul>
<li><a href="04-01-cluster-networking">Cluster Networking</a></li>
<li><a href="04-02-service-types">Service Types</a></li>
<li><a href="04-03-ingress-controllers">Ingress Controllers</a></li>
<li><a href="04-04-network-policies">Network Policies</a></li>
</ul>
<h2>Module 5: Storage in Kubernetes</h2>
<ul>
<li><a href="05-01-volumes">Volumes</a></li>
<li><a href="05-02-persistent-volumes">Persistent Volumes</a></li>
<li><a href="05-03-persistent-volume-claims">Persistent Volume Claims</a></li>
<li><a href="05-04-storage-classes">Storage Classes</a></li>
</ul>
<h2>Module 6: Advanced Kubernetes Concepts</h2>
<ul>
<li><a href="06-01-statefulsets">StatefulSets</a></li>
<li><a href="06-02-daemonsets">DaemonSets</a></li>
<li><a href="06-03-jobs-cronjobs">Jobs and CronJobs</a></li>
<li><a href="06-04-crds">Custom Resource Definitions (CRDs)</a></li>
</ul>
<h2>Module 7: Monitoring and Logging</h2>
<ul>
<li><a href="07-01-monitoring-prometheus">Monitoring with Prometheus</a></li>
<li><a href="07-02-logging-efk">Logging with Elasticsearch, Fluentd, and Kibana (EFK)</a></li>
<li><a href="07-03-health-checks-probes">Health Checks and Probes</a></li>
<li><a href="07-04-metrics-server">Metrics Server</a></li>
</ul>
<h2>Module 8: Security in Kubernetes</h2>
<ul>
<li><a href="08-01-rbac">Role-Based Access Control (RBAC)</a></li>
<li><a href="08-02-pod-security-policies">Pod Security Policies</a></li>
<li><a href="08-03-network-security">Network Security</a></li>
<li><a href="08-04-image-security">Image Security</a></li>
</ul>
<h2>Module 9: Scaling and Performance</h2>
<ul>
<li><a href="09-01-horizontal-pod-autoscaling">Horizontal Pod Autoscaling</a></li>
<li><a href="09-02-vertical-pod-autoscaling">Vertical Pod Autoscaling</a></li>
<li><a href="09-03-cluster-autoscaling">Cluster Autoscaling</a></li>
<li><a href="09-04-performance-tuning">Performance Tuning</a></li>
</ul>
<h2>Module 10: Kubernetes Ecosystem and Tools</h2>
<ul>
<li><a href="10-01-helm">Helm</a></li>
<li><a href="10-02-kustomize">Kustomize</a></li>
<li><a href="10-03-kubeadm">Kubeadm</a></li>
<li><a href="10-04-minikube">Minikube</a></li>
</ul>
<h2>Module 11: Case Studies and Real-World Applications</h2>
<ul>
<li><a href="11-01-deploying-web-application">Deploying a Web Application</a></li>
<li><a href="11-02-cicd-kubernetes">CI/CD with Kubernetes</a></li>
<li><a href="11-03-running-stateful-applications">Running Stateful Applications</a></li>
<li><a href="11-04-multi-cluster-management">Multi-Cluster Management</a></li>
</ul>
<h2>Module 12: Preparing for Kubernetes Certification</h2>
<ul>
<li><a href="12-01-cka">Certified Kubernetes Administrator (CKA)</a></li>
<li><a href="12-02-ckad">Certified Kubernetes Application Developer (CKAD)</a></li>
<li><a href="12-03-cks">Certified Kubernetes Security Specialist (CKS)</a></li>
<li><a href="12-04-exam-preparation-tips">Exam Preparation Tips</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
