<!DOCTYPE html>
<html lang="en">
<head>
    <title> Monitoring and Metrics </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/redis/06-04-monitoring-and-metrics" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/redis/06-04-monitoring-and-metrics" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/redis/06-04-monitoring-and-metrics" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.188a386f47.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "redis";
  		var TEMA_NAME = "6-4";
  		var TYPE = "mod";
  		var PATH = "mod/redis/06-04-monitoring-and-metrics";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/redis/06-04-monitoring-and-metrics" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/redis/06-04-monitoring-and-metrics" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="redis">
		<a  href="#" class="text-secondary d-none" data-read-mod="redis" data-read-unit="6-4" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="redis" data-unread-unit="6-4" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='06-03-performance-tuning' title="Performance Tuning" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='06-03-performance-tuning' title="Performance Tuning" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Monitoring and Metrics</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-01-replication' title="Replication" class="py-2 px-3 btn btn-primary"
				data-read-mod="redis" data-read-unit="6-4">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-01-replication' title="Replication" class="py-2 px-3 btn btn-primary" 
				data-read-mod="redis" data-read-unit="6-4">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Monitoring and metrics are crucial for maintaining the health, performance, and reliability of your Redis instances. This section will cover the tools and techniques you can use to monitor Redis, understand its performance metrics, and ensure it runs smoothly in production.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ol>
<li><strong>Monitoring</strong>: The process of continuously observing the state of your Redis instances to detect issues and ensure optimal performance.</li>
<li><strong>Metrics</strong>: Quantitative data points that provide insights into the performance and health of your Redis instances.</li>
<li><strong>Alerting</strong>: Setting up notifications to inform you when certain metrics exceed predefined thresholds.</li>
</ol>
</div><h2>Tools for Monitoring Redis</h2>
<div class='content'></div><h3>Redis Built-in Tools</h3>
<div class='content'><ol>
<li>
<p><strong>INFO Command</strong>: Provides a wealth of information about the Redis server, including memory usage, CPU usage, keyspace statistics, and more.</p>
<pre><code class="language-sh">redis-cli INFO
</code></pre>
<ul>
<li><strong>Sections</strong>: The INFO command output is divided into sections like Server, Clients, Memory, Persistence, Stats, Replication, CPU, Keyspace, etc.</li>
<li><strong>Example</strong>:
<pre><code class="language-sh"># Server
redis_version:6.2.1
redis_git_sha1:00000000
redis_git_dirty:0
redis_build_id:1c1ae1b1b1b1b1b1
redis_mode:standalone
os:Linux 4.15.0-112-generic x86_64
arch_bits:64
multiplexing_api:epoll
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>MONITOR Command</strong>: Streams every command processed by the Redis server in real-time.</p>
<pre><code class="language-sh">redis-cli MONITOR
</code></pre>
<ul>
<li><strong>Use Case</strong>: Useful for debugging and understanding the workload on your Redis instance.</li>
<li><strong>Example</strong>:
<pre><code class="language-sh">1616161616.161161 [0 127.0.0.1:6379] &quot;SET&quot; &quot;key&quot; &quot;value&quot;
</code></pre>
</li>
</ul>
</li>
</ol>
</div><h3>External Monitoring Tools</h3>
<div class='content'><ol>
<li>
<p><strong>Redis Exporter for Prometheus</strong>: A Prometheus exporter for Redis metrics.</p>
<ul>
<li><strong>Installation</strong>:
<pre><code class="language-sh">docker run --name redis_exporter -d -p 9121:9121 oliver006/redis_exporter
</code></pre>
</li>
<li><strong>Metrics</strong>: Exposes Redis metrics in a format that Prometheus can scrape.</li>
<li><strong>Example</strong>: <code>redis_up</code>, <code>redis_commands_processed_total</code>, <code>redis_memory_used_bytes</code>.</li>
</ul>
</li>
<li>
<p><strong>Grafana</strong>: A visualization tool that can be used with Prometheus to create dashboards for Redis metrics.</p>
<ul>
<li><strong>Setup</strong>: Connect Grafana to Prometheus and create dashboards to visualize Redis metrics.</li>
<li><strong>Example</strong>: Create a dashboard to monitor memory usage, command rates, and latency.</li>
</ul>
</li>
</ol>
</div><h2>Important Redis Metrics</h2>
<div class='content'></div><h3>Memory Metrics</h3>
<div class='content'><ul>
<li><strong>used_memory</strong>: Total number of bytes allocated by Redis.</li>
<li><strong>used_memory_rss</strong>: Number of bytes that Redis has allocated as seen by the operating system.</li>
<li><strong>used_memory_peak</strong>: Peak memory consumed by Redis.</li>
</ul>
</div><h3>Performance Metrics</h3>
<div class='content'><ul>
<li><strong>total_commands_processed</strong>: Total number of commands processed by the server.</li>
<li><strong>instantaneous_ops_per_sec</strong>: Number of commands processed per second.</li>
<li><strong>total_net_input_bytes</strong>: Total number of bytes read from the network.</li>
<li><strong>total_net_output_bytes</strong>: Total number of bytes sent to the network.</li>
</ul>
</div><h3>Persistence Metrics</h3>
<div class='content'><ul>
<li><strong>rdb_changes_since_last_save</strong>: Number of changes to the dataset since the last RDB save.</li>
<li><strong>aof_rewrite_in_progress</strong>: Flag indicating if an AOF rewrite operation is in progress.</li>
</ul>
</div><h3>Replication Metrics</h3>
<div class='content'><ul>
<li><strong>connected_slaves</strong>: Number of connected replicas.</li>
<li><strong>master_repl_offset</strong>: The replication offset of the master.</li>
</ul>
</div><h2>Practical Example: Setting Up Monitoring with Prometheus and Grafana</h2>
<div class='content'></div><h3>Step 1: Install Prometheus</h3>
<div class='content'><ol>
<li>
<p><strong>Download Prometheus</strong>:</p>
<pre><code class="language-sh">wget https://github.com/prometheus/prometheus/releases/download/v2.26.0/prometheus-2.26.0.linux-amd64.tar.gz
tar xvfz prometheus-2.26.0.linux-amd64.tar.gz
cd prometheus-2.26.0.linux-amd64
</code></pre>
</li>
<li>
<p><strong>Configure Prometheus</strong>:</p>
<ul>
<li>Edit <code>prometheus.yml</code> to add the Redis exporter as a target.
<pre><code class="language-yaml">scrape_configs:
  - job_name: 'redis'
    static_configs:
      - targets: ['localhost:9121']
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Start Prometheus</strong>:</p>
<pre><code class="language-sh">./prometheus --config.file=prometheus.yml
</code></pre>
</li>
</ol>
</div><h3>Step 2: Install Grafana</h3>
<div class='content'><ol>
<li>
<p><strong>Download and Install Grafana</strong>:</p>
<pre><code class="language-sh">sudo apt-get install -y adduser libfontconfig1
wget https://dl.grafana.com/oss/release/grafana_7.5.2_amd64.deb
sudo dpkg -i grafana_7.5.2_amd64.deb
</code></pre>
</li>
<li>
<p><strong>Start Grafana</strong>:</p>
<pre><code class="language-sh">sudo systemctl start grafana-server
sudo systemctl enable grafana-server
</code></pre>
</li>
<li>
<p><strong>Configure Grafana</strong>:</p>
<ul>
<li>Open Grafana in your browser (<code>http://localhost:3000</code>).</li>
<li>Add Prometheus as a data source.</li>
<li>Create a dashboard and add panels to visualize Redis metrics.</li>
</ul>
</li>
</ol>
</div><h2>Exercises</h2>
<div class='content'></div><h3>Exercise 1: Using the INFO Command</h3>
<div class='content'><ol>
<li><strong>Task</strong>: Use the <code>INFO</code> command to retrieve and analyze the memory usage of your Redis instance.</li>
<li><strong>Solution</strong>:
<pre><code class="language-sh">redis-cli INFO memory
</code></pre>
<ul>
<li><strong>Expected Output</strong>:
<pre><code class="language-sh"># Memory
used_memory:1024000
used_memory_human:1000K
used_memory_rss:2048000
used_memory_peak:3072000
</code></pre>
</li>
</ul>
</li>
</ol>
</div><h3>Exercise 2: Setting Up Redis Exporter</h3>
<div class='content'><ol>
<li><strong>Task</strong>: Set up the Redis Exporter for Prometheus and verify that Prometheus is scraping Redis metrics.</li>
<li><strong>Solution</strong>:
<ul>
<li>Follow the steps in the &quot;Practical Example&quot; section to set up the Redis Exporter and Prometheus.</li>
<li>Verify by accessing Prometheus at <code>http://localhost:9090</code> and checking the <code>Targets</code> page.</li>
</ul>
</li>
</ol>
</div><h3>Exercise 3: Creating a Grafana Dashboard</h3>
<div class='content'><ol>
<li><strong>Task</strong>: Create a Grafana dashboard to monitor Redis memory usage and command rates.</li>
<li><strong>Solution</strong>:
<ul>
<li>Follow the steps in the &quot;Practical Example&quot; section to set up Grafana.</li>
<li>Create a new dashboard and add panels for <code>used_memory</code> and <code>instantaneous_ops_per_sec</code>.</li>
</ul>
</li>
</ol>
</div><h2>Common Mistakes and Tips</h2>
<div class='content'><ul>
<li>
<p><strong>Mistake</strong>: Not setting up alerts for critical metrics.</p>
<ul>
<li><strong>Tip</strong>: Always configure alerts for key metrics like memory usage, command rates, and replication status to get notified of potential issues.</li>
</ul>
</li>
<li>
<p><strong>Mistake</strong>: Overlooking the importance of monitoring persistence metrics.</p>
<ul>
<li><strong>Tip</strong>: Monitor RDB and AOF metrics to ensure data durability and understand the impact of persistence operations on performance.</li>
</ul>
</li>
</ul>
</div><h2>Conclusion</h2>
<div class='content'><p>In this section, we covered the importance of monitoring and metrics for Redis, explored various tools and techniques for monitoring Redis instances, and learned how to set up a monitoring stack using Prometheus and Grafana. By keeping a close eye on key metrics, you can ensure the health and performance of your Redis deployments, quickly identify and resolve issues, and optimize your Redis instances for better performance.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='06-03-performance-tuning' title="Performance Tuning" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='06-03-performance-tuning' title="Performance Tuning" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-01-replication' title="Replication" class="py-2 px-3 btn btn-primary"
				data-read-mod="redis" data-read-unit="6-4">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-01-replication' title="Replication" class="py-2 px-3 btn btn-primary" 
				data-read-mod="redis" data-read-unit="6-4">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Redis Course</h1>
<h2>Module 1: Introduction to Redis</h2>
<ul>
<li><a href="01-01-what-is-redis">What is Redis?</a></li>
<li><a href="01-02-installing-redis">Installing Redis</a></li>
<li><a href="01-03-basic-redis-data-types">Basic Redis Data Types</a></li>
<li><a href="01-04-redis-cli-basics">Redis CLI Basics</a></li>
</ul>
<h2>Module 2: Redis Data Structures</h2>
<ul>
<li><a href="02-01-strings">Strings</a></li>
<li><a href="02-02-lists">Lists</a></li>
<li><a href="02-03-sets">Sets</a></li>
<li><a href="02-04-hashes">Hashes</a></li>
<li><a href="02-05-sorted-sets">Sorted Sets</a></li>
</ul>
<h2>Module 3: Redis Commands and Operations</h2>
<ul>
<li><a href="03-01-basic-commands">Basic Commands</a></li>
<li><a href="03-02-advanced-commands">Advanced Commands</a></li>
<li><a href="03-03-transactions">Transactions</a></li>
<li><a href="03-04-pipelining">Pipelining</a></li>
</ul>
<h2>Module 4: Redis Persistence</h2>
<ul>
<li><a href="04-01-snapshots-rdb">Snapshots (RDB)</a></li>
<li><a href="04-02-append-only-files-aof">Append-Only Files (AOF)</a></li>
<li><a href="04-03-persistence-configuration">Persistence Configuration</a></li>
<li><a href="04-04-backup-and-restore">Backup and Restore</a></li>
</ul>
<h2>Module 5: Redis Security</h2>
<ul>
<li><a href="05-01-authentication">Authentication</a></li>
<li><a href="05-02-encryption">Encryption</a></li>
<li><a href="05-03-access-control-lists-acls">Access Control Lists (ACLs)</a></li>
<li><a href="05-04-security-best-practices">Security Best Practices</a></li>
</ul>
<h2>Module 6: Redis Performance Optimization</h2>
<ul>
<li><a href="06-01-memory-optimization">Memory Optimization</a></li>
<li><a href="06-02-latency-and-throughput">Latency and Throughput</a></li>
<li><a href="06-03-performance-tuning">Performance Tuning</a></li>
<li><a href="06-04-monitoring-and-metrics">Monitoring and Metrics</a></li>
</ul>
<h2>Module 7: Redis Clustering and High Availability</h2>
<ul>
<li><a href="07-01-replication">Replication</a></li>
<li><a href="07-02-sentinel">Sentinel</a></li>
<li><a href="07-03-cluster-mode">Cluster Mode</a></li>
<li><a href="07-04-scaling-redis">Scaling Redis</a></li>
</ul>
<h2>Module 8: Redis Modules and Extensions</h2>
<ul>
<li><a href="08-01-introduction-to-redis-modules">Introduction to Redis Modules</a></li>
<li><a href="08-02-popular-redis-modules">Popular Redis Modules</a></li>
<li><a href="08-03-creating-custom-modules">Creating Custom Modules</a></li>
<li><a href="08-04-using-redis-with-other-technologies">Using Redis with Other Technologies</a></li>
</ul>
<h2>Module 9: Advanced Redis Use Cases</h2>
<ul>
<li><a href="09-01-caching">Caching</a></li>
<li><a href="09-02-session-storage">Session Storage</a></li>
<li><a href="09-03-message-queues">Message Queues</a></li>
<li><a href="09-04-real-time-analytics">Real-Time Analytics</a></li>
</ul>
<h2>Module 10: Redis in Production</h2>
<ul>
<li><a href="10-01-deployment-strategies">Deployment Strategies</a></li>
<li><a href="10-02-monitoring-and-maintenance">Monitoring and Maintenance</a></li>
<li><a href="10-03-troubleshooting">Troubleshooting</a></li>
<li><a href="10-04-case-studies">Case Studies</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
