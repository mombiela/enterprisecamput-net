<!DOCTYPE html>
<html lang="en">
<head>
    <title> Triggers </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/plsql/04-04-triggers" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/plsql/04-04-triggers" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/plsql/04-04-triggers" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.1ab297bfa4.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "languages";
  		var MOD_NAME = "plsql";
  		var TEMA_NAME = "4-4";
  		var TYPE = "mod";
  		var PATH = "mod/plsql/04-04-triggers";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/plsql/04-04-triggers" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/plsql/04-04-triggers" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="plsql">
		<a  href="#" class="text-secondary d-none" data-read-mod="plsql" data-read-unit="4-4" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="plsql" data-unread-unit="4-4" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-03-packages' title="Packages" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-03-packages' title="Packages" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Triggers</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-01-code-optimization' title="Code Optimization Techniques" class="py-2 px-3 btn btn-primary"
				data-read-mod="plsql" data-read-unit="4-4">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-01-code-optimization' title="Code Optimization Techniques" class="py-2 px-3 btn btn-primary" 
				data-read-mod="plsql" data-read-unit="4-4">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'></div><h2>Introduction to Triggers</h2>
<div class='content'><p>Triggers are a powerful feature in PL/SQL that allow you to automatically execute a block of code in response to specific events on a table or view. They are commonly used for enforcing business rules, auditing changes, and maintaining complex data integrity.</p>
</div><h3>Key Concepts</h3>
<div class='content'><ul>
<li><strong>Trigger Event</strong>: The event that causes the trigger to fire (e.g., INSERT, UPDATE, DELETE).</li>
<li><strong>Trigger Timing</strong>: Specifies when the trigger should fire (e.g., BEFORE, AFTER).</li>
<li><strong>Trigger Type</strong>: Defines whether the trigger is a row-level or statement-level trigger.</li>
<li><strong>Trigger Body</strong>: The PL/SQL block that contains the code to be executed when the trigger fires.</li>
</ul>
</div><h2>Types of Triggers</h2>
<div class='content'></div><h3>Based on Timing</h3>
<div class='content'><ul>
<li><strong>BEFORE Trigger</strong>: Executes before the triggering event.</li>
<li><strong>AFTER Trigger</strong>: Executes after the triggering event.</li>
</ul>
</div><h3>Based on Scope</h3>
<div class='content'><ul>
<li><strong>Row-Level Trigger</strong>: Executes once for each row affected by the triggering event.</li>
<li><strong>Statement-Level Trigger</strong>: Executes once for the entire triggering event, regardless of the number of rows affected.</li>
</ul>
</div><h2>Creating a Trigger</h2>
<div class='content'></div><h3>Syntax</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFtPUiBSRVBMQUNFXSBUUklHR0VSIHRyaWdnZXJfbmFtZQp7QkVGT1JFIHwgQUZURVJ9IHtJTlNFUlQgfCBVUERBVEUgfCBERUxFVEV9Ck9OIHRhYmxlX25hbWUKW0ZPUiBFQUNIIFJPV10KREVDTEFSRQogIC0tIFZhcmlhYmxlIGRlY2xhcmF0aW9ucwpCRUdJTgogIC0tIFBML1NRTCBjb2RlCkVORDs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE [OR REPLACE] TRIGGER trigger_name
{BEFORE | AFTER} {INSERT | UPDATE | DELETE}
ON table_name
[FOR EACH ROW]
DECLARE
  -- Variable declarations
BEGIN
  -- PL/SQL code
END;</pre></div><div class='content'></div><h3>Example: Creating a Row-Level Trigger</h3>
<div class='content'><p>Let's create a trigger that automatically updates a <code>last_updated</code> column in a <code>employees</code> table whenever an employee's record is updated.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIE9SIFJFUExBQ0UgVFJJR0dFUiB1cGRhdGVfbGFzdF91cGRhdGVkCkJFRk9SRSBVUERBVEUgT04gZW1wbG95ZWVzCkZPUiBFQUNIIFJPVwpCRUdJTgogIDpORVcubGFzdF91cGRhdGVkIDo9IFNZU0RBVEU7CkVORDsKLw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE OR REPLACE TRIGGER update_last_updated
BEFORE UPDATE ON employees
FOR EACH ROW
BEGIN
  :NEW.last_updated := SYSDATE;
END;
/</pre></div><div class='content'><h4>Explanation</h4>
<ul>
<li><code>CREATE OR REPLACE TRIGGER update_last_updated</code>: Creates a new trigger or replaces an existing one with the same name.</li>
<li><code>BEFORE UPDATE ON employees</code>: Specifies that the trigger should fire before an UPDATE operation on the <code>employees</code> table.</li>
<li><code>FOR EACH ROW</code>: Indicates that this is a row-level trigger.</li>
<li><code>:NEW.last_updated := SYSDATE;</code>: Sets the <code>last_updated</code> column to the current date and time.</li>
</ul>
</div><h2>Practical Exercises</h2>
<div class='content'></div><h3>Exercise 1: Creating a Trigger for Auditing</h3>
<div class='content'><p>Create a trigger that logs changes to the <code>salary</code> column in the <code>employees</code> table into an <code>audit_log</code> table.</p>
<h4>Solution</h4>
<ol>
<li>Create the <code>audit_log</code> table:</li>
</ol>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIGF1ZGl0X2xvZyAoCiAgZW1wbG95ZWVfaWQgTlVNQkVSLAogIG9sZF9zYWxhcnkgTlVNQkVSLAogIG5ld19zYWxhcnkgTlVNQkVSLAogIGNoYW5nZV9kYXRlIERBVEUKKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE audit_log (
  employee_id NUMBER,
  old_salary NUMBER,
  new_salary NUMBER,
  change_date DATE
);</pre></div><div class='content'><ol start="2">
<li>Create the trigger:</li>
</ol>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIE9SIFJFUExBQ0UgVFJJR0dFUiBhdWRpdF9zYWxhcnlfY2hhbmdlcwpBRlRFUiBVUERBVEUgT0Ygc2FsYXJ5IE9OIGVtcGxveWVlcwpGT1IgRUFDSCBST1cKQkVHSU4KICBJTlNFUlQgSU5UTyBhdWRpdF9sb2cgKGVtcGxveWVlX2lkLCBvbGRfc2FsYXJ5LCBuZXdfc2FsYXJ5LCBjaGFuZ2VfZGF0ZSkKICBWQUxVRVMgKDpPTEQuZW1wbG95ZWVfaWQsIDpPTEQuc2FsYXJ5LCA6TkVXLnNhbGFyeSwgU1lTREFURSk7CkVORDsKLw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE OR REPLACE TRIGGER audit_salary_changes
AFTER UPDATE OF salary ON employees
FOR EACH ROW
BEGIN
  INSERT INTO audit_log (employee_id, old_salary, new_salary, change_date)
  VALUES (:OLD.employee_id, :OLD.salary, :NEW.salary, SYSDATE);
END;
/</pre></div><div class='content'><h4>Explanation</h4>
<ul>
<li><code>AFTER UPDATE OF salary ON employees</code>: Specifies that the trigger should fire after an UPDATE operation on the <code>salary</code> column of the <code>employees</code> table.</li>
<li><code>INSERT INTO audit_log ...</code>: Inserts a new record into the <code>audit_log</code> table with the old and new salary values and the current date.</li>
</ul>
</div><h3>Exercise 2: Preventing Deletions</h3>
<div class='content'><p>Create a trigger that prevents the deletion of records from the <code>employees</code> table if the employee's <code>salary</code> is greater than 100,000.</p>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIE9SIFJFUExBQ0UgVFJJR0dFUiBwcmV2ZW50X2hpZ2hfc2FsYXJ5X2RlbGV0aW9uCkJFRk9SRSBERUxFVEUgT04gZW1wbG95ZWVzCkZPUiBFQUNIIFJPVwpCRUdJTgogIElGIDpPTEQuc2FsYXJ5ID4gMTAwMDAwIFRIRU4KICAgIFJBSVNFX0FQUExJQ0FUSU9OX0VSUk9SKC0yMDAwMSwgJ0Nhbm5vdCBkZWxldGUgZW1wbG95ZWVzIHdpdGggc2FsYXJ5IGdyZWF0ZXIgdGhhbiAxMDAsMDAwJyk7CiAgRU5EIElGOwpFTkQ7Ci8="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE OR REPLACE TRIGGER prevent_high_salary_deletion
BEFORE DELETE ON employees
FOR EACH ROW
BEGIN
  IF :OLD.salary &gt; 100000 THEN
    RAISE_APPLICATION_ERROR(-20001, 'Cannot delete employees with salary greater than 100,000');
  END IF;
END;
/</pre></div><div class='content'><h4>Explanation</h4>
<ul>
<li><code>BEFORE DELETE ON employees</code>: Specifies that the trigger should fire before a DELETE operation on the <code>employees</code> table.</li>
<li><code>IF :OLD.salary &gt; 100000 THEN ...</code>: Checks if the salary of the employee being deleted is greater than 100,000.</li>
<li><code>RAISE_APPLICATION_ERROR(-20001, 'Cannot delete employees with salary greater than 100,000');</code>: Raises an application error to prevent the deletion.</li>
</ul>
</div><h2>Common Mistakes and Tips</h2>
<div class='content'><ul>
<li><strong>Mutating Table Error</strong>: Avoid writing triggers that query or modify the table that caused the trigger to fire, as this can lead to a mutating table error.</li>
<li><strong>Performance Impact</strong>: Be cautious of the performance impact of triggers, especially row-level triggers on large tables.</li>
<li><strong>Debugging</strong>: Use <code>DBMS_OUTPUT.PUT_LINE</code> to debug triggers by printing messages to the console.</li>
</ul>
</div><h2>Conclusion</h2>
<div class='content'><p>Triggers are a versatile tool in PL/SQL for automating tasks and enforcing business rules. By understanding the different types of triggers and how to create them, you can enhance the functionality and integrity of your database applications. In the next module, we will delve into PL/SQL optimization and best practices to ensure your code runs efficiently and effectively.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-03-packages' title="Packages" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-03-packages' title="Packages" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-01-code-optimization' title="Code Optimization Techniques" class="py-2 px-3 btn btn-primary"
				data-read-mod="plsql" data-read-unit="4-4">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-01-code-optimization' title="Code Optimization Techniques" class="py-2 px-3 btn btn-primary" 
				data-read-mod="plsql" data-read-unit="4-4">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>PL/SQL Course</h1>
<h2>Module 1: Introduction to PL/SQL</h2>
<ul>
<li><a href="01-01-what-is-plsql">What is PL/SQL?</a></li>
<li><a href="01-02-setting-up-environment">Setting Up Your Environment</a></li>
<li><a href="01-03-basic-plsql-syntax">Basic PL/SQL Syntax</a></li>
<li><a href="01-04-hello-world">Hello World in PL/SQL</a></li>
</ul>
<h2>Module 2: PL/SQL Fundamentals</h2>
<ul>
<li><a href="02-01-block-structure">PL/SQL Block Structure</a></li>
<li><a href="02-02-variables-data-types">Variables and Data Types</a></li>
<li><a href="02-03-control-structures">Control Structures</a></li>
<li><a href="02-04-cursors">Cursors</a></li>
<li><a href="02-05-exception-handling">Exception Handling</a></li>
</ul>
<h2>Module 3: Working with SQL in PL/SQL</h2>
<ul>
<li><a href="03-01-sql-statements">SQL Statements in PL/SQL</a></li>
<li><a href="03-02-implicit-explicit-cursors">Implicit and Explicit Cursors</a></li>
<li><a href="03-03-bulk-collect">Bulk Collect</a></li>
<li><a href="03-04-forall-statement">FORALL Statement</a></li>
</ul>
<h2>Module 4: Advanced PL/SQL Concepts</h2>
<ul>
<li><a href="04-01-stored-procedures">Stored Procedures</a></li>
<li><a href="04-02-functions">Functions</a></li>
<li><a href="04-03-packages">Packages</a></li>
<li><a href="04-04-triggers">Triggers</a></li>
</ul>
<h2>Module 5: PL/SQL Optimization and Best Practices</h2>
<ul>
<li><a href="05-01-code-optimization">Code Optimization Techniques</a></li>
<li><a href="05-02-best-practices">Best Practices</a></li>
<li><a href="05-03-debugging">Debugging PL/SQL Code</a></li>
<li><a href="05-04-profiling-tuning">Profiling and Tuning</a></li>
</ul>
<h2>Module 6: Real-World Applications</h2>
<ul>
<li><a href="06-01-simple-application">Building a Simple Application</a></li>
<li><a href="06-02-interfacing-languages">Interfacing with Other Languages</a></li>
<li><a href="06-03-security-considerations">Security Considerations</a></li>
<li><a href="06-04-case-studies">Case Studies</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
