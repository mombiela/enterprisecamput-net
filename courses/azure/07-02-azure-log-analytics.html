<!DOCTYPE html>
<html lang="en">
<head>
    <title> Azure Log Analytics </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/azure/07-02-azure-log-analytics" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/azure/07-02-azure-log-analytics" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/azure/07-02-azure-log-analytics" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.1ab297bfa4.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "tech-tools";
  		var MOD_NAME = "azure";
  		var TEMA_NAME = "7-2";
  		var TYPE = "mod";
  		var PATH = "mod/azure/07-02-azure-log-analytics";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.8d8afe898f.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/azure/07-02-azure-log-analytics" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/azure/07-02-azure-log-analytics" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="azure">
		<a  href="#" class="text-secondary d-none" data-read-mod="azure" data-read-unit="7-2" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="azure" data-unread-unit="7-2" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='07-01-azure-monitor' title="Azure Monitor" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='07-01-azure-monitor' title="Azure Monitor" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Azure Log Analytics</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-03-azure-application-insights' title="Azure Application Insights" class="py-2 px-3 btn btn-primary"
				data-read-mod="azure" data-read-unit="7-2">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-03-azure-application-insights' title="Azure Application Insights" class="py-2 px-3 btn btn-primary" 
				data-read-mod="azure" data-read-unit="7-2">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'></div><h2>Introduction</h2>
<div class='content'><p>Azure Log Analytics is a service within Azure Monitor that helps you collect and analyze data generated by resources in your cloud and on-premises environments. It provides a powerful query language, Kusto Query Language (KQL), to analyze and visualize data, enabling you to gain insights and make informed decisions.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ol>
<li>
<p><strong>Log Analytics Workspace</strong>:</p>
<ul>
<li>A unique environment for log data from Azure resources.</li>
<li>Contains data sources, solutions, and saved queries.</li>
<li>Acts as a container to store and manage log data.</li>
</ul>
</li>
<li>
<p><strong>Data Sources</strong>:</p>
<ul>
<li><strong>Azure Resources</strong>: Virtual machines, Azure Storage, Azure SQL Database, etc.</li>
<li><strong>Custom Logs</strong>: Logs from custom applications or on-premises systems.</li>
<li><strong>Diagnostic Settings</strong>: Configuration to send platform logs and metrics to Log Analytics.</li>
</ul>
</li>
<li>
<p><strong>Kusto Query Language (KQL)</strong>:</p>
<ul>
<li>A powerful query language used to retrieve and analyze data.</li>
<li>Similar to SQL but optimized for log and telemetry data.</li>
</ul>
</li>
<li>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Pre-built packages that provide insights and visualizations for specific scenarios.</li>
<li>Examples include Azure Security Center, Azure Monitor for VMs, and more.</li>
</ul>
</li>
</ol>
</div><h2>Setting Up Azure Log Analytics</h2>
<div class='content'></div><h3>Step 1: Create a Log Analytics Workspace</h3>
<div class='content'><ol>
<li>Navigate to the Azure Portal.</li>
<li>Search for &quot;Log Analytics workspaces&quot; and select it.</li>
<li>Click on &quot;Add&quot; to create a new workspace.</li>
<li>Fill in the required details:
<ul>
<li><strong>Subscription</strong>: Select your Azure subscription.</li>
<li><strong>Resource Group</strong>: Choose an existing resource group or create a new one.</li>
<li><strong>Name</strong>: Provide a unique name for the workspace.</li>
<li><strong>Region</strong>: Select the region where you want to create the workspace.</li>
</ul>
</li>
<li>Click &quot;Review + create&quot; and then &quot;Create&quot;.</li>
</ol>
</div><h3>Step 2: Connect Data Sources</h3>
<div class='content'><ol>
<li>Navigate to your Log Analytics workspace.</li>
<li>Under the &quot;Workspace Data Sources&quot; section, select the type of data source you want to connect (e.g., Virtual Machines, Storage Accounts).</li>
<li>Follow the prompts to configure and connect the data source.</li>
</ol>
</div><h3>Step 3: Configure Diagnostic Settings</h3>
<div class='content'><ol>
<li>Go to the resource you want to monitor (e.g., a virtual machine).</li>
<li>Select &quot;Diagnostic settings&quot; under the Monitoring section.</li>
<li>Click &quot;Add diagnostic setting&quot;.</li>
<li>Choose the logs and metrics you want to send to Log Analytics.</li>
<li>Select your Log Analytics workspace as the destination.</li>
<li>Click &quot;Save&quot;.</li>
</ol>
</div><h2>Using Kusto Query Language (KQL)</h2>
<div class='content'></div><h3>Basic Query Example</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUmV0cmlldmUgdGhlIGxhc3QgMTAgcmVjb3JkcyBmcm9tIHRoZSBFdmVudCB0YWJsZQpFdmVudAp8IHRha2UgMTA="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Retrieve the last 10 records from the Event table
Event
| take 10</pre></div><div class='content'></div><h3>Filtering Data</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUmV0cmlldmUgcmVjb3JkcyBmcm9tIHRoZSBFdmVudCB0YWJsZSB3aGVyZSB0aGUgRXZlbnRMZXZlbCBpcyAiRXJyb3IiCkV2ZW50Cnwgd2hlcmUgRXZlbnRMZXZlbCA9PSAiRXJyb3Ii"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Retrieve records from the Event table where the EventLevel is &quot;Error&quot;
Event
| where EventLevel == &quot;Error&quot;</pre></div><div class='content'></div><h3>Aggregating Data</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ291bnQgdGhlIG51bWJlciBvZiBlcnJvciBldmVudHMgYnkgdGhlaXIgc291cmNlCkV2ZW50Cnwgd2hlcmUgRXZlbnRMZXZlbCA9PSAiRXJyb3IiCnwgc3VtbWFyaXplIGNvdW50KCkgYnkgU291cmNl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Count the number of error events by their source
Event
| where EventLevel == &quot;Error&quot;
| summarize count() by Source</pre></div><div class='content'></div><h3>Visualizing Data</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRGlzcGxheSBhIHRpbWUgY2hhcnQgb2YgZXJyb3IgZXZlbnRzIG92ZXIgdGhlIGxhc3QgMjQgaG91cnMKRXZlbnQKfCB3aGVyZSBFdmVudExldmVsID09ICJFcnJvciIKfCBzdW1tYXJpemUgY291bnQoKSBieSBiaW4oVGltZUdlbmVyYXRlZCwgMWgpCnwgcmVuZGVyIHRpbWVjaGFydA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Display a time chart of error events over the last 24 hours
Event
| where EventLevel == &quot;Error&quot;
| summarize count() by bin(TimeGenerated, 1h)
| render timechart</pre></div><div class='content'></div><h2>Practical Exercise</h2>
<div class='content'></div><h3>Exercise 1: Create a Log Analytics Workspace</h3>
<div class='content'><ol>
<li>Create a new Log Analytics workspace in the Azure Portal.</li>
<li>Connect a virtual machine to the workspace.</li>
<li>Configure diagnostic settings to send logs and metrics from the virtual machine to the workspace.</li>
</ol>
</div><h3>Exercise 2: Write and Run KQL Queries</h3>
<div class='content'><ol>
<li>Write a KQL query to retrieve the last 20 records from the Event table.</li>
<li>Write a KQL query to filter records where the EventLevel is &quot;Warning&quot;.</li>
<li>Write a KQL query to count the number of warning events by their source.</li>
<li>Write a KQL query to display a time chart of warning events over the last 7 days.</li>
</ol>
</div><h3>Solutions</h3>
<div class='content'><h4>Solution 1: Create a Log Analytics Workspace</h4>
<ol>
<li>Follow the steps outlined in the &quot;Setting Up Azure Log Analytics&quot; section to create a workspace, connect a virtual machine, and configure diagnostic settings.</li>
</ol>
<h4>Solution 2: Write and Run KQL Queries</h4>
<ol>
<li>
<p>Retrieve the last 20 records from the Event table:</p>
<pre><code class="language-kql">Event
| take 20
</code></pre>
</li>
<li>
<p>Filter records where the EventLevel is &quot;Warning&quot;:</p>
<pre><code class="language-kql">Event
| where EventLevel == &quot;Warning&quot;
</code></pre>
</li>
<li>
<p>Count the number of warning events by their source:</p>
<pre><code class="language-kql">Event
| where EventLevel == &quot;Warning&quot;
| summarize count() by Source
</code></pre>
</li>
<li>
<p>Display a time chart of warning events over the last 7 days:</p>
<pre><code class="language-kql">Event
| where EventLevel == &quot;Warning&quot;
| summarize count() by bin(TimeGenerated, 1d)
| render timechart
</code></pre>
</li>
</ol>
</div><h2>Conclusion</h2>
<div class='content'><p>Azure Log Analytics is a powerful tool for collecting, analyzing, and visualizing log data from various sources. By setting up a Log Analytics workspace, connecting data sources, and using Kusto Query Language (KQL), you can gain valuable insights into your Azure environment. Practice writing and running KQL queries to become proficient in analyzing your log data. In the next module, we will explore Azure Application Insights, another essential tool for monitoring and managing your applications.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='07-01-azure-monitor' title="Azure Monitor" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='07-01-azure-monitor' title="Azure Monitor" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-03-azure-application-insights' title="Azure Application Insights" class="py-2 px-3 btn btn-primary"
				data-read-mod="azure" data-read-unit="7-2">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-03-azure-application-insights' title="Azure Application Insights" class="py-2 px-3 btn btn-primary" 
				data-read-mod="azure" data-read-unit="7-2">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Azure Course</h1>
<h2>Module 1: Introduction to Azure</h2>
<ul>
<li><a href="01-01-what-is-azure">What is Azure?</a></li>
<li><a href="01-02-azure-account-setup">Azure Account Setup</a></li>
<li><a href="01-03-azure-portal-overview">Azure Portal Overview</a></li>
<li><a href="01-04-azure-resource-manager">Azure Resource Manager</a></li>
</ul>
<h2>Module 2: Core Azure Services</h2>
<ul>
<li><a href="02-01-azure-virtual-machines">Azure Virtual Machines</a></li>
<li><a href="02-02-azure-app-services">Azure App Services</a></li>
<li><a href="02-03-azure-storage">Azure Storage</a></li>
<li><a href="02-04-azure-networking">Azure Networking</a></li>
</ul>
<h2>Module 3: Azure Databases</h2>
<ul>
<li><a href="03-01-azure-sql-database">Azure SQL Database</a></li>
<li><a href="03-02-azure-cosmos-db">Azure Cosmos DB</a></li>
<li><a href="03-03-azure-database-for-mysql">Azure Database for MySQL</a></li>
<li><a href="03-04-azure-database-for-postgresql">Azure Database for PostgreSQL</a></li>
</ul>
<h2>Module 4: Azure Security</h2>
<ul>
<li><a href="04-01-azure-identity-access-management">Azure Identity and Access Management</a></li>
<li><a href="04-02-azure-security-center">Azure Security Center</a></li>
<li><a href="04-03-azure-key-vault">Azure Key Vault</a></li>
<li><a href="04-04-azure-ddos-protection">Azure DDoS Protection</a></li>
</ul>
<h2>Module 5: Azure DevOps</h2>
<ul>
<li><a href="05-01-introduction-azure-devops">Introduction to Azure DevOps</a></li>
<li><a href="05-02-azure-pipelines">Azure Pipelines</a></li>
<li><a href="05-03-azure-repos">Azure Repos</a></li>
<li><a href="05-04-azure-artifacts">Azure Artifacts</a></li>
</ul>
<h2>Module 6: Advanced Azure Services</h2>
<ul>
<li><a href="06-01-azure-kubernetes-service">Azure Kubernetes Service (AKS)</a></li>
<li><a href="06-02-azure-functions">Azure Functions</a></li>
<li><a href="06-03-azure-logic-apps">Azure Logic Apps</a></li>
<li><a href="06-04-azure-cognitive-services">Azure Cognitive Services</a></li>
</ul>
<h2>Module 7: Monitoring and Management</h2>
<ul>
<li><a href="07-01-azure-monitor">Azure Monitor</a></li>
<li><a href="07-02-azure-log-analytics">Azure Log Analytics</a></li>
<li><a href="07-03-azure-application-insights">Azure Application Insights</a></li>
<li><a href="07-04-azure-automation">Azure Automation</a></li>
</ul>
<h2>Module 8: Cost Management and Optimization</h2>
<ul>
<li><a href="08-01-azure-cost-management">Azure Cost Management</a></li>
<li><a href="08-02-azure-pricing-calculator">Azure Pricing Calculator</a></li>
<li><a href="08-03-azure-reservations">Azure Reservations</a></li>
<li><a href="08-04-azure-advisor">Azure Advisor</a></li>
</ul>
<h2>Module 9: Case Studies and Best Practices</h2>
<ul>
<li><a href="09-01-real-world-azure-implementations">Real-world Azure Implementations</a></li>
<li><a href="09-02-azure-best-practices">Azure Best Practices</a></li>
<li><a href="09-03-common-pitfalls">Common Pitfalls and How to Avoid Them</a></li>
<li><a href="09-04-future-trends-azure">Future Trends in Azure</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
