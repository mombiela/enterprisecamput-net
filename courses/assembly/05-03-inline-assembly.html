<!DOCTYPE html>
<html lang="en">
<head>
    <title> Inline Assembly in High-Level Languages </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/assembly/05-03-inline-assembly" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/assembly/05-03-inline-assembly" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/assembly/05-03-inline-assembly" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.188a386f47.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "languages";
  		var MOD_NAME = "assembly";
  		var TEMA_NAME = "5-3";
  		var TYPE = "mod";
  		var PATH = "mod/assembly/05-03-inline-assembly";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/assembly/05-03-inline-assembly" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/assembly/05-03-inline-assembly" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="assembly">
		<a  href="#" class="text-secondary d-none" data-read-mod="assembly" data-read-unit="5-3" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="assembly" data-unread-unit="5-3" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-02-macros-conditional' title="Macros and Conditional Assembly" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-02-macros-conditional' title="Macros and Conditional Assembly" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Inline Assembly in High-Level Languages</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-04-optimizing-code' title="Optimizing Assembly Code" class="py-2 px-3 btn btn-primary"
				data-read-mod="assembly" data-read-unit="5-3">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-04-optimizing-code' title="Optimizing Assembly Code" class="py-2 px-3 btn btn-primary" 
				data-read-mod="assembly" data-read-unit="5-3">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Inline assembly allows programmers to embed assembly language instructions directly within high-level language code, such as C or C++. This technique can be used to optimize critical sections of code, access hardware directly, or perform operations that are not possible in the high-level language alone.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ol>
<li><strong>Definition</strong>: Inline assembly is the practice of writing assembly code within a high-level programming language.</li>
<li><strong>Purpose</strong>: It is used for performance optimization, direct hardware manipulation, and accessing CPU-specific instructions.</li>
<li><strong>Syntax</strong>: The syntax for inline assembly varies between different compilers and languages.</li>
</ol>
</div><h2>Benefits of Inline Assembly</h2>
<div class='content'><ul>
<li><strong>Performance</strong>: Critical code sections can be optimized for speed.</li>
<li><strong>Control</strong>: Provides low-level control over the hardware.</li>
<li><strong>Flexibility</strong>: Allows the use of special CPU instructions not available in high-level languages.</li>
</ul>
</div><h2>Drawbacks of Inline Assembly</h2>
<div class='content'><ul>
<li><strong>Portability</strong>: Inline assembly is often not portable across different architectures.</li>
<li><strong>Complexity</strong>: It can make the code harder to read and maintain.</li>
<li><strong>Debugging</strong>: Debugging inline assembly can be more challenging than high-level code.</li>
</ul>
</div><h2>Inline Assembly in C/C++</h2>
<div class='content'></div><h3>Basic Syntax</h3>
<div class='content'><p>In GCC (GNU Compiler Collection), inline assembly is written using the <code>asm</code> keyword. Here is a simple example:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CgppbnQgbWFpbigpIHsKICAgIGludCBhID0gMTAsIGIgPSAyMCwgcmVzdWx0OwoKICAgIGFzbSAoImFkZGwgJSVlYngsICUlZWF4OyIKICAgICAgICAgOiAiPWEiIChyZXN1bHQpCiAgICAgICAgIDogImEiIChhKSwgImIiIChiKQogICAgKTsKCiAgICBwcmludGYoIlJlc3VsdDogJWRcbiIsIHJlc3VsdCk7CiAgICByZXR1cm4gMDsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

int main() {
    int a = 10, b = 20, result;

    asm (&quot;addl %%ebx, %%eax;&quot;
         : &quot;=a&quot; (result)
         : &quot;a&quot; (a), &quot;b&quot; (b)
    );

    printf(&quot;Result: %d\n&quot;, result);
    return 0;
}</pre></div><div class='content'></div><h3>Explanation</h3>
<div class='content'><ul>
<li><strong><code>asm</code></strong>: The keyword used to introduce inline assembly.</li>
<li><strong><code>&quot;addl %%ebx, %%eax;&quot;</code></strong>: The assembly instruction to add the values in the <code>ebx</code> and <code>eax</code> registers.</li>
<li><strong><code>&quot;=a&quot; (result)</code></strong>: The output operand, where <code>=a</code> specifies that the result will be stored in the <code>eax</code> register.</li>
<li><strong><code>&quot;a&quot; (a), &quot;b&quot; (b)</code></strong>: The input operands, where <code>a</code> and <code>b</code> specify the values to be loaded into the <code>eax</code> and <code>ebx</code> registers, respectively.</li>
</ul>
</div><h3>Constraints</h3>
<div class='content'><ul>
<li><strong><code>&quot;=r&quot;</code></strong>: Specifies that the operand is an output and should be stored in a general-purpose register.</li>
<li><strong><code>&quot;r&quot;</code></strong>: Specifies that the operand is an input and should be loaded into a general-purpose register.</li>
<li><strong><code>&quot;m&quot;</code></strong>: Specifies that the operand is a memory location.</li>
</ul>
</div><h3>Example: Inline Assembly for Multiplication</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CgppbnQgbWFpbigpIHsKICAgIGludCBhID0gNSwgYiA9IDMsIHJlc3VsdDsKCiAgICBhc20gKCJpbXVsbCAlJWVieCwgJSVlYXg7IgogICAgICAgICA6ICI9YSIgKHJlc3VsdCkKICAgICAgICAgOiAiYSIgKGEpLCAiYiIgKGIpCiAgICApOwoKICAgIHByaW50ZigiUmVzdWx0OiAlZFxuIiwgcmVzdWx0KTsKICAgIHJldHVybiAwOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

int main() {
    int a = 5, b = 3, result;

    asm (&quot;imull %%ebx, %%eax;&quot;
         : &quot;=a&quot; (result)
         : &quot;a&quot; (a), &quot;b&quot; (b)
    );

    printf(&quot;Result: %d\n&quot;, result);
    return 0;
}</pre></div><div class='content'></div><h3>Explanation</h3>
<div class='content'><ul>
<li><strong><code>&quot;imull %%ebx, %%eax;&quot;</code></strong>: The assembly instruction to multiply the values in the <code>ebx</code> and <code>eax</code> registers.</li>
</ul>
</div><h2>Practical Exercise</h2>
<div class='content'></div><h3>Task</h3>
<div class='content'><p>Write a C program that uses inline assembly to perform the following operations:</p>
<ol>
<li>Add two integers.</li>
<li>Subtract two integers.</li>
<li>Multiply two integers.</li>
<li>Divide two integers.</li>
</ol>
</div><h3>Solution</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CgppbnQgbWFpbigpIHsKICAgIGludCBhID0gMjAsIGIgPSAxMDsKICAgIGludCBhZGRfcmVzdWx0LCBzdWJfcmVzdWx0LCBtdWxfcmVzdWx0LCBkaXZfcmVzdWx0OwoKICAgIC8vIEFkZGl0aW9uCiAgICBhc20gKCJhZGRsICUlZWJ4LCAlJWVheDsiCiAgICAgICAgIDogIj1hIiAoYWRkX3Jlc3VsdCkKICAgICAgICAgOiAiYSIgKGEpLCAiYiIgKGIpCiAgICApOwoKICAgIC8vIFN1YnRyYWN0aW9uCiAgICBhc20gKCJzdWJsICUlZWJ4LCAlJWVheDsiCiAgICAgICAgIDogIj1hIiAoc3ViX3Jlc3VsdCkKICAgICAgICAgOiAiYSIgKGEpLCAiYiIgKGIpCiAgICApOwoKICAgIC8vIE11bHRpcGxpY2F0aW9uCiAgICBhc20gKCJpbXVsbCAlJWVieCwgJSVlYXg7IgogICAgICAgICA6ICI9YSIgKG11bF9yZXN1bHQpCiAgICAgICAgIDogImEiIChhKSwgImIiIChiKQogICAgKTsKCiAgICAvLyBEaXZpc2lvbgogICAgYXNtICgibW92bCAkMCwgJSVlZHg7IiAvLyBDbGVhciBlZHggZm9yIGRpdmlzaW9uCiAgICAgICAgICJkaXZsICUlZWJ4OyIKICAgICAgICAgOiAiPWEiIChkaXZfcmVzdWx0KQogICAgICAgICA6ICJhIiAoYSksICJiIiAoYikKICAgICAgICAgOiAiJWVkeCIKICAgICk7CgogICAgcHJpbnRmKCJBZGRpdGlvbiBSZXN1bHQ6ICVkXG4iLCBhZGRfcmVzdWx0KTsKICAgIHByaW50ZigiU3VidHJhY3Rpb24gUmVzdWx0OiAlZFxuIiwgc3ViX3Jlc3VsdCk7CiAgICBwcmludGYoIk11bHRpcGxpY2F0aW9uIFJlc3VsdDogJWRcbiIsIG11bF9yZXN1bHQpOwogICAgcHJpbnRmKCJEaXZpc2lvbiBSZXN1bHQ6ICVkXG4iLCBkaXZfcmVzdWx0KTsKCiAgICByZXR1cm4gMDsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

int main() {
    int a = 20, b = 10;
    int add_result, sub_result, mul_result, div_result;

    // Addition
    asm (&quot;addl %%ebx, %%eax;&quot;
         : &quot;=a&quot; (add_result)
         : &quot;a&quot; (a), &quot;b&quot; (b)
    );

    // Subtraction
    asm (&quot;subl %%ebx, %%eax;&quot;
         : &quot;=a&quot; (sub_result)
         : &quot;a&quot; (a), &quot;b&quot; (b)
    );

    // Multiplication
    asm (&quot;imull %%ebx, %%eax;&quot;
         : &quot;=a&quot; (mul_result)
         : &quot;a&quot; (a), &quot;b&quot; (b)
    );

    // Division
    asm (&quot;movl $0, %%edx;&quot; // Clear edx for division
         &quot;divl %%ebx;&quot;
         : &quot;=a&quot; (div_result)
         : &quot;a&quot; (a), &quot;b&quot; (b)
         : &quot;%edx&quot;
    );

    printf(&quot;Addition Result: %d\n&quot;, add_result);
    printf(&quot;Subtraction Result: %d\n&quot;, sub_result);
    printf(&quot;Multiplication Result: %d\n&quot;, mul_result);
    printf(&quot;Division Result: %d\n&quot;, div_result);

    return 0;
}</pre></div><div class='content'></div><h3>Explanation</h3>
<div class='content'><ul>
<li><strong>Addition</strong>: Uses the <code>addl</code> instruction to add <code>a</code> and <code>b</code>.</li>
<li><strong>Subtraction</strong>: Uses the <code>subl</code> instruction to subtract <code>b</code> from <code>a</code>.</li>
<li><strong>Multiplication</strong>: Uses the <code>imull</code> instruction to multiply <code>a</code> and <code>b</code>.</li>
<li><strong>Division</strong>: Uses the <code>divl</code> instruction to divide <code>a</code> by <code>b</code>. Note that <code>edx</code> must be cleared before division to avoid overflow.</li>
</ul>
</div><h2>Common Mistakes and Tips</h2>
<div class='content'><ul>
<li><strong>Register Clobbering</strong>: Ensure that you specify all registers that are modified by the assembly code to avoid unexpected behavior.</li>
<li><strong>Syntax Errors</strong>: Inline assembly syntax can be tricky; double-check the syntax for your specific compiler.</li>
<li><strong>Portability</strong>: Remember that inline assembly is not portable. Code that works on one architecture may not work on another.</li>
</ul>
</div><h2>Conclusion</h2>
<div class='content'><p>Inline assembly provides a powerful tool for optimizing performance-critical sections of code and accessing low-level hardware features. However, it comes with challenges such as increased complexity and reduced portability. By understanding the syntax and constraints of inline assembly, you can effectively leverage its benefits while minimizing potential drawbacks.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-02-macros-conditional' title="Macros and Conditional Assembly" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-02-macros-conditional' title="Macros and Conditional Assembly" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-04-optimizing-code' title="Optimizing Assembly Code" class="py-2 px-3 btn btn-primary"
				data-read-mod="assembly" data-read-unit="5-3">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-04-optimizing-code' title="Optimizing Assembly Code" class="py-2 px-3 btn btn-primary" 
				data-read-mod="assembly" data-read-unit="5-3">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Assembly Programming Course</h1>
<h2>Module 1: Introduction to Assembly Language</h2>
<ul>
<li><a href="01-01-what-is-assembly">What is Assembly Language?</a></li>
<li><a href="01-02-history-evolution">History and Evolution of Assembly</a></li>
<li><a href="01-03-basic-concepts">Basic Concepts and Terminology</a></li>
<li><a href="01-04-setup-environment">Setting Up the Development Environment</a></li>
</ul>
<h2>Module 2: Assembly Language Basics</h2>
<ul>
<li><a href="02-01-cpu-memory">Understanding the CPU and Memory</a></li>
<li><a href="02-02-registers-functions">Registers and Their Functions</a></li>
<li><a href="02-03-basic-syntax">Basic Syntax and Structure</a></li>
<li><a href="02-04-first-program">Writing Your First Assembly Program</a></li>
</ul>
<h2>Module 3: Data Representation and Instructions</h2>
<ul>
<li><a href="03-01-binary-hexadecimal">Binary and Hexadecimal Systems</a></li>
<li><a href="03-02-data-types">Data Types and Sizes</a></li>
<li><a href="03-03-arithmetic-instructions">Arithmetic Instructions</a></li>
<li><a href="03-04-logical-instructions">Logical Instructions</a></li>
</ul>
<h2>Module 4: Control Flow</h2>
<ul>
<li><a href="04-01-conditional-statements">Conditional Statements</a></li>
<li><a href="04-02-loops-iteration">Loops and Iteration</a></li>
<li><a href="04-03-subroutines-procedures">Subroutines and Procedures</a></li>
<li><a href="04-04-stack-operations">Stack Operations</a></li>
</ul>
<h2>Module 5: Advanced Assembly Concepts</h2>
<ul>
<li><a href="05-01-interrupts-system-calls">Interrupts and System Calls</a></li>
<li><a href="05-02-macros-conditional">Macros and Conditional Assembly</a></li>
<li><a href="05-03-inline-assembly">Inline Assembly in High-Level Languages</a></li>
<li><a href="05-04-optimizing-code">Optimizing Assembly Code</a></li>
</ul>
<h2>Module 6: Assembly for Different Architectures</h2>
<ul>
<li><a href="06-01-x86-assembly">x86 Assembly Language</a></li>
<li><a href="06-02-arm-assembly">ARM Assembly Language</a></li>
<li><a href="06-03-mips-assembly">MIPS Assembly Language</a></li>
<li><a href="06-04-riscv-assembly">RISC-V Assembly Language</a></li>
</ul>
<h2>Module 7: Practical Applications and Projects</h2>
<ul>
<li><a href="07-01-simple-bootloader">Writing a Simple Bootloader</a></li>
<li><a href="07-02-basic-os-kernel">Creating a Basic Operating System Kernel</a></li>
<li><a href="07-03-interfacing-hardware">Interfacing with Hardware</a></li>
<li><a href="07-04-debugging-profiling">Debugging and Profiling Assembly Code</a></li>
</ul>
<h2>Module 8: Final Project and Review</h2>
<ul>
<li><a href="08-01-project-proposal">Project Proposal and Planning</a></li>
<li><a href="08-02-implementation-testing">Implementation and Testing</a></li>
<li><a href="08-03-code-review">Code Review and Optimization</a></li>
<li><a href="08-04-final-presentation">Final Presentation and Documentation</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
