<!DOCTYPE html>
<html lang="en">
<head>
    <title> Unit Testing Resolvers </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/graphql/07-01-unit-testing-resolvers" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/graphql/07-01-unit-testing-resolvers" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/graphql/07-01-unit-testing-resolvers" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.1ab297bfa4.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "graphql";
  		var TEMA_NAME = "7-1";
  		var TYPE = "mod";
  		var PATH = "mod/graphql/07-01-unit-testing-resolvers";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.e0e4cfcd99.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/graphql/07-01-unit-testing-resolvers" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/graphql/07-01-unit-testing-resolvers" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="graphql">
		<a  href="#" class="text-secondary d-none" data-read-mod="graphql" data-read-unit="7-1" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="graphql" data-unread-unit="7-1" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='06-04-graphql-subscriptions' title="GraphQL Subscriptions" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='06-04-graphql-subscriptions' title="GraphQL Subscriptions" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Unit Testing Resolvers</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-02-integration-testing' title="Integration Testing" class="py-2 px-3 btn btn-primary"
				data-read-mod="graphql" data-read-unit="7-1">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-02-integration-testing' title="Integration Testing" class="py-2 px-3 btn btn-primary" 
				data-read-mod="graphql" data-read-unit="7-1">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Unit testing is a crucial part of the development process, ensuring that individual components of your application work as expected. In the context of GraphQL, resolvers are the functions responsible for fetching the data for your queries and mutations. This module will guide you through the process of unit testing these resolvers.</p>
</div><h2>Objectives</h2>
<div class='content'><ul>
<li>Understand the importance of unit testing resolvers.</li>
<li>Learn how to set up a testing environment.</li>
<li>Write unit tests for GraphQL resolvers using popular testing libraries.</li>
<li>Explore common pitfalls and best practices.</li>
</ul>
</div><h2>Importance of Unit Testing Resolvers</h2>
<div class='content'><p>Unit testing resolvers helps to:</p>
<ul>
<li>Ensure that each resolver returns the correct data.</li>
<li>Validate the logic within the resolver.</li>
<li>Catch bugs early in the development cycle.</li>
<li>Facilitate refactoring by providing a safety net.</li>
</ul>
</div><h2>Setting Up a Testing Environment</h2>
<div class='content'><p>Before writing tests, you need to set up a testing environment. We'll use Jest, a popular testing framework, and Apollo Server for our GraphQL server.</p>
</div><h3>Step-by-Step Setup</h3>
<div class='content'><ol>
<li>
<p><strong>Install Dependencies</strong></p>
<pre><code class="language-bash">npm install --save-dev jest @babel/preset-env @babel/preset-typescript @babel/core @babel/node
npm install --save-dev @types/jest ts-jest
npm install apollo-server graphql
</code></pre>
</li>
<li>
<p><strong>Configure Babel</strong>
Create a <code>.babelrc</code> file in the root of your project:</p>
<pre><code class="language-json">{
  &quot;presets&quot;: [&quot;@babel/preset-env&quot;, &quot;@babel/preset-typescript&quot;]
}
</code></pre>
</li>
<li>
<p><strong>Configure Jest</strong>
Add the following configuration to your <code>package.json</code>:</p>
<pre><code class="language-json">&quot;jest&quot;: {
  &quot;preset&quot;: &quot;ts-jest&quot;,
  &quot;testEnvironment&quot;: &quot;node&quot;
}
</code></pre>
</li>
</ol>
</div><h2>Writing Unit Tests for Resolvers</h2>
<div class='content'><p>Let's write unit tests for a simple resolver. Assume we have the following GraphQL schema and resolver:</p>
</div><h3>Schema</h3>
<div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dHlwZSBRdWVyeSB7CiAgaGVsbG86IFN0cmluZwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>type Query {
  hello: String
}</pre></div><div class='content'></div><h3>Resolver</h3>
<div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgcmVzb2x2ZXJzID0gewogIFF1ZXJ5OiB7CiAgICBoZWxsbzogKCkgPT4gJ0hlbGxvLCB3b3JsZCEnLAogIH0sCn07CgpleHBvcnQgZGVmYXVsdCByZXNvbHZlcnM7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const resolvers = {
  Query: {
    hello: () =&gt; 'Hello, world!',
  },
};

export default resolvers;</pre></div><div class='content'></div><h3>Test File: <code>resolvers.test.js</code></h3>
<div class='content'><ol>
<li>
<p><strong>Import Dependencies</strong></p>
<pre><code class="language-javascript">import { ApolloServer, gql } from 'apollo-server';
import resolvers from './resolvers';

const typeDefs = gql`
  type Query {
    hello: String
  }
`;

const server = new ApolloServer({ typeDefs, resolvers });
</code></pre>
</li>
<li>
<p><strong>Write Tests</strong></p>
<pre><code class="language-javascript">describe('Resolvers', () =&gt; {
  it('should return &quot;Hello, world!&quot; for hello query', async () =&gt; {
    const result = await server.executeOperation({
      query: gql`
        query {
          hello
        }
      `,
    });

    expect(result.data.hello).toBe('Hello, world!');
  });
});
</code></pre>
</li>
</ol>
</div><h3>Running the Tests</h3>
<div class='content'><p>Run the tests using the following command:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIHRlc3Q="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm test</pre></div><div class='content'></div><h2>Common Pitfalls and Best Practices</h2>
<div class='content'><ul>
<li><strong>Mocking External Dependencies</strong>: If your resolver interacts with external services or databases, mock these dependencies to isolate the resolver logic.</li>
<li><strong>Testing Edge Cases</strong>: Ensure you test edge cases and error scenarios to make your resolvers robust.</li>
<li><strong>Keeping Tests Fast</strong>: Unit tests should be fast. Avoid complex setups that slow down the test execution.</li>
</ul>
</div><h2>Practical Exercise</h2>
<h3>Exercise: Write a Unit Test for a Resolver</h3>
<div class='content'><ol>
<li>
<p><strong>Schema</strong></p>
<pre><code class="language-graphql">type Query {
  user(id: ID!): User
}

type User {
  id: ID!
  name: String
  email: String
}
</code></pre>
</li>
<li>
<p><strong>Resolver</strong></p>
<pre><code class="language-javascript">const users = [
  { id: '1', name: 'John Doe', email: 'john@example.com' },
  { id: '2', name: 'Jane Doe', email: 'jane@example.com' },
];

const resolvers = {
  Query: {
    user: (_, { id }) =&gt; users.find(user =&gt; user.id === id),
  },
};

export default resolvers;
</code></pre>
</li>
<li>
<p><strong>Test File: <code>resolvers.test.js</code></strong></p>
<pre><code class="language-javascript">import { ApolloServer, gql } from 'apollo-server';
import resolvers from './resolvers';

const typeDefs = gql`
  type Query {
    user(id: ID!): User
  }

  type User {
    id: ID!
    name: String
    email: String
  }
`;

const server = new ApolloServer({ typeDefs, resolvers });

describe('Resolvers', () =&gt; {
  it('should return user data for a given id', async () =&gt; {
    const result = await server.executeOperation({
      query: gql`
        query {
          user(id: &quot;1&quot;) {
            id
            name
            email
          }
        }
      `,
    });

    expect(result.data.user).toEqual({
      id: '1',
      name: 'John Doe',
      email: 'john@example.com',
    });
  });

  it('should return null for a non-existent user', async () =&gt; {
    const result = await server.executeOperation({
      query: gql`
        query {
          user(id: &quot;3&quot;) {
            id
            name
            email
          }
        }
      `,
    });

    expect(result.data.user).toBeNull();
  });
});
</code></pre>
</li>
</ol>
</div><h3>Solution</h3>
<div class='content'><p>The provided test file should pass, confirming that the resolver correctly handles both existing and non-existent users.</p>
</div><h2>Conclusion</h2>
<div class='content'><p>In this module, you learned the importance of unit testing resolvers, how to set up a testing environment, and how to write and run unit tests for GraphQL resolvers. By following best practices and avoiding common pitfalls, you can ensure that your resolvers are reliable and maintainable. This knowledge prepares you for more advanced testing techniques and integration testing, which will be covered in the next topic.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='06-04-graphql-subscriptions' title="GraphQL Subscriptions" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='06-04-graphql-subscriptions' title="GraphQL Subscriptions" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-02-integration-testing' title="Integration Testing" class="py-2 px-3 btn btn-primary"
				data-read-mod="graphql" data-read-unit="7-1">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-02-integration-testing' title="Integration Testing" class="py-2 px-3 btn btn-primary" 
				data-read-mod="graphql" data-read-unit="7-1">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>GraphQL Course</h1>
<h2>Module 1: Introduction to GraphQL</h2>
<ul>
<li><a href="01-01-what-is-graphql">What is GraphQL?</a></li>
<li><a href="01-02-graphql-vs-rest">GraphQL vs REST</a></li>
<li><a href="01-03-setting-up-graphql-server">Setting Up a GraphQL Server</a></li>
<li><a href="01-04-graphql-schema-basics">GraphQL Schema Basics</a></li>
</ul>
<h2>Module 2: Core Concepts</h2>
<ul>
<li><a href="02-01-queries">Queries</a></li>
<li><a href="02-02-mutations">Mutations</a></li>
<li><a href="02-03-resolvers">Resolvers</a></li>
<li><a href="02-04-graphql-types">GraphQL Types</a></li>
<li><a href="02-05-graphql-scalars">GraphQL Scalars</a></li>
</ul>
<h2>Module 3: Advanced Schema Design</h2>
<ul>
<li><a href="03-01-interfaces">Interfaces</a></li>
<li><a href="03-02-unions">Unions</a></li>
<li><a href="03-03-enums">Enums</a></li>
<li><a href="03-04-input-types">Input Types</a></li>
<li><a href="03-05-custom-scalars">Custom Scalars</a></li>
</ul>
<h2>Module 4: Working with Data</h2>
<ul>
<li><a href="04-01-connecting-to-database">Connecting to a Database</a></li>
<li><a href="04-02-data-fetching-strategies">Data Fetching Strategies</a></li>
<li><a href="04-03-batching-and-caching">Batching and Caching</a></li>
<li><a href="04-04-error-handling">Error Handling</a></li>
</ul>
<h2>Module 5: Performance and Security</h2>
<ul>
<li><a href="05-01-query-optimization">Query Optimization</a></li>
<li><a href="05-02-rate-limiting">Rate Limiting</a></li>
<li><a href="05-03-authentication-authorization">Authentication and Authorization</a></li>
<li><a href="05-04-persisted-queries">Persisted Queries</a></li>
</ul>
<h2>Module 6: Tooling and Ecosystem</h2>
<ul>
<li><a href="06-01-graphiql-playground">GraphiQL and Playground</a></li>
<li><a href="06-02-apollo-client">Apollo Client</a></li>
<li><a href="06-03-relay">Relay</a></li>
<li><a href="06-04-graphql-subscriptions">GraphQL Subscriptions</a></li>
</ul>
<h2>Module 7: Testing and Deployment</h2>
<ul>
<li><a href="07-01-unit-testing-resolvers">Unit Testing Resolvers</a></li>
<li><a href="07-02-integration-testing">Integration Testing</a></li>
<li><a href="07-03-continuous-integration">Continuous Integration</a></li>
<li><a href="07-04-deploying-graphql-servers">Deploying GraphQL Servers</a></li>
</ul>
<h2>Module 8: Real-world Applications</h2>
<ul>
<li><a href="08-01-building-fullstack-application">Building a Full-stack Application</a></li>
<li><a href="08-02-graphql-in-microservices">GraphQL in Microservices</a></li>
<li><a href="08-03-graphql-federation">GraphQL Federation</a></li>
<li><a href="08-04-case-studies">Case Studies</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
