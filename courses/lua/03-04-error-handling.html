<!DOCTYPE html>
<html lang="en">
<head>
    <title> Error Handling </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/lua/03-04-error-handling" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/lua/03-04-error-handling" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/lua/03-04-error-handling" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.1ab297bfa4.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "languages";
  		var MOD_NAME = "lua";
  		var TEMA_NAME = "3-4";
  		var TYPE = "mod";
  		var PATH = "mod/lua/03-04-error-handling";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.688defeeef.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/lua/03-04-error-handling" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/lua/03-04-error-handling" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="lua">
		<a  href="#" class="text-secondary d-none" data-read-mod="lua" data-read-unit="3-4" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="lua" data-unread-unit="3-4" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='03-03-modules-packages' title="Modules and Packages" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='03-03-modules-packages' title="Modules and Packages" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Error Handling</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='03-05-file-io' title="File I/O" class="py-2 px-3 btn btn-primary"
				data-read-mod="lua" data-read-unit="3-4">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='03-05-file-io' title="File I/O" class="py-2 px-3 btn btn-primary" 
				data-read-mod="lua" data-read-unit="3-4">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Error handling is a crucial aspect of programming, allowing you to manage and respond to unexpected conditions in a controlled manner. In Lua, error handling is primarily done using the <code>pcall</code> (protected call) and <code>xpcall</code> (extended protected call) functions. This section will cover the following topics:</p>
<ol>
<li><strong>Understanding Errors in Lua</strong></li>
<li><strong>Using <code>pcall</code> for Error Handling</strong></li>
<li><strong>Using <code>xpcall</code> for Error Handling</strong></li>
<li><strong>Custom Error Messages</strong></li>
<li><strong>Practical Examples and Exercises</strong></li>
</ol>
</div><h2>Understanding Errors in Lua</h2>
<div class='content'><p>Errors in Lua can occur due to various reasons, such as syntax errors, runtime errors, or logical errors. When an error occurs, Lua typically stops execution and prints an error message. To handle these errors gracefully, Lua provides mechanisms to catch and manage them.</p>
</div><h2>Using <code>pcall</code> for Error Handling</h2>
<div class='content'><p>The <code>pcall</code> function allows you to call a function in protected mode. This means that if an error occurs, <code>pcall</code> will catch it and return a status code instead of stopping the program.</p>
</div><h3>Syntax</h3>
<div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RhdHVzLCByZXN1bHQgPSBwY2FsbChmdW5jdGlvbl9uYW1lLCBhcmcxLCBhcmcyLCAuLi4p"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>status, result = pcall(function_name, arg1, arg2, ...)</pre></div><div class='content'><ul>
<li><code>status</code>: A boolean indicating whether the function executed successfully (<code>true</code>) or an error occurred (<code>false</code>).</li>
<li><code>result</code>: The return value of the function if it executed successfully, or the error message if an error occurred.</li>
</ul>
</div><h3>Example</h3>
<div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZGl2aWRlKGEsIGIpCiAgICByZXR1cm4gYSAvIGIKZW5kCgpsb2NhbCBzdGF0dXMsIHJlc3VsdCA9IHBjYWxsKGRpdmlkZSwgMTAsIDApCgppZiBzdGF0dXMgdGhlbgogICAgcHJpbnQoIlJlc3VsdDogIiAuLiByZXN1bHQpCmVsc2UKICAgIHByaW50KCJFcnJvcjogIiAuLiByZXN1bHQpCmVuZA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function divide(a, b)
    return a / b
end

local status, result = pcall(divide, 10, 0)

if status then
    print(&quot;Result: &quot; .. result)
else
    print(&quot;Error: &quot; .. result)
end</pre></div><div class='content'><p>In this example, dividing by zero would normally cause an error. However, using <code>pcall</code>, the error is caught, and an error message is printed instead.</p>
</div><h2>Using <code>xpcall</code> for Error Handling</h2>
<div class='content'><p>The <code>xpcall</code> function is similar to <code>pcall</code> but allows you to specify an error handler function. This can be useful for logging errors or performing cleanup tasks.</p>
</div><h3>Syntax</h3>
<div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RhdHVzID0geHBjYWxsKGZ1bmN0aW9uX25hbWUsIGVycm9yX2hhbmRsZXIp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>status = xpcall(function_name, error_handler)</pre></div><div class='content'><ul>
<li><code>status</code>: A boolean indicating whether the function executed successfully (<code>true</code>) or an error occurred (<code>false</code>).</li>
</ul>
</div><h3>Example</h3>
<div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZXJyb3JIYW5kbGVyKGVycikKICAgIHByaW50KCJFcnJvcjogIiAuLiBlcnIpCmVuZAoKZnVuY3Rpb24gZGl2aWRlKGEsIGIpCiAgICByZXR1cm4gYSAvIGIKZW5kCgpsb2NhbCBzdGF0dXMgPSB4cGNhbGwoZnVuY3Rpb24oKSByZXR1cm4gZGl2aWRlKDEwLCAwKSBlbmQsIGVycm9ySGFuZGxlcikKCmlmIHN0YXR1cyB0aGVuCiAgICBwcmludCgiT3BlcmF0aW9uIHN1Y2Nlc3NmdWwiKQplbHNlCiAgICBwcmludCgiT3BlcmF0aW9uIGZhaWxlZCIpCmVuZA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function errorHandler(err)
    print(&quot;Error: &quot; .. err)
end

function divide(a, b)
    return a / b
end

local status = xpcall(function() return divide(10, 0) end, errorHandler)

if status then
    print(&quot;Operation successful&quot;)
else
    print(&quot;Operation failed&quot;)
end</pre></div><div class='content'><p>In this example, the <code>errorHandler</code> function is called if an error occurs, allowing for custom error handling logic.</p>
</div><h2>Custom Error Messages</h2>
<div class='content'><p>You can also generate custom error messages using the <code>error</code> function. This can be useful for validating input or enforcing certain conditions in your code.</p>
</div><h3>Example</h3>
<div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gdmFsaWRhdGVBZ2UoYWdlKQogICAgaWYgYWdlIDwgMCB0aGVuCiAgICAgICAgZXJyb3IoIkFnZSBjYW5ub3QgYmUgbmVnYXRpdmUiKQogICAgZW5kCiAgICByZXR1cm4gdHJ1ZQplbmQKCmxvY2FsIHN0YXR1cywgcmVzdWx0ID0gcGNhbGwodmFsaWRhdGVBZ2UsIC01KQoKaWYgc3RhdHVzIHRoZW4KICAgIHByaW50KCJBZ2UgaXMgdmFsaWQiKQplbHNlCiAgICBwcmludCgiRXJyb3I6ICIgLi4gcmVzdWx0KQplbmQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function validateAge(age)
    if age &lt; 0 then
        error(&quot;Age cannot be negative&quot;)
    end
    return true
end

local status, result = pcall(validateAge, -5)

if status then
    print(&quot;Age is valid&quot;)
else
    print(&quot;Error: &quot; .. result)
end</pre></div><div class='content'><p>In this example, the <code>validateAge</code> function generates a custom error message if the age is negative.</p>
</div><h2>Practical Examples and Exercises</h2>
<div class='content'></div><h3>Exercise 1: Safe Division Function</h3>
<div class='content'><p>Create a function <code>safeDivide</code> that takes two numbers and returns their division. Use <code>pcall</code> to handle any errors that may occur (e.g., division by zero).</p>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gc2FmZURpdmlkZShhLCBiKQogICAgbG9jYWwgc3RhdHVzLCByZXN1bHQgPSBwY2FsbChmdW5jdGlvbigpIHJldHVybiBhIC8gYiBlbmQpCiAgICBpZiBzdGF0dXMgdGhlbgogICAgICAgIHJldHVybiByZXN1bHQKICAgIGVsc2UKICAgICAgICByZXR1cm4gIkVycm9yOiBEaXZpc2lvbiBieSB6ZXJvIgogICAgZW5kCmVuZAoKcHJpbnQoc2FmZURpdmlkZSgxMCwgMikpICAtLSBPdXRwdXQ6IDUKcHJpbnQoc2FmZURpdmlkZSgxMCwgMCkpICAtLSBPdXRwdXQ6IEVycm9yOiBEaXZpc2lvbiBieSB6ZXJv"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function safeDivide(a, b)
    local status, result = pcall(function() return a / b end)
    if status then
        return result
    else
        return &quot;Error: Division by zero&quot;
    end
end

print(safeDivide(10, 2))  -- Output: 5
print(safeDivide(10, 0))  -- Output: Error: Division by zero</pre></div><div class='content'></div><h3>Exercise 2: Enhanced Error Handling</h3>
<div class='content'><p>Modify the <code>safeDivide</code> function to use <code>xpcall</code> and an error handler that logs the error message to a file.</p>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZXJyb3JIYW5kbGVyKGVycikKICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKCJlcnJvcl9sb2cudHh0IiwgImEiKQogICAgZmlsZTp3cml0ZSgiRXJyb3I6ICIgLi4gZXJyIC4uICJcbiIpCiAgICBmaWxlOmNsb3NlKCkKICAgIHJldHVybiAiQW4gZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSBjaGVjayB0aGUgbG9nIGZpbGUuIgplbmQKCmZ1bmN0aW9uIHNhZmVEaXZpZGUoYSwgYikKICAgIGxvY2FsIHN0YXR1cywgcmVzdWx0ID0geHBjYWxsKGZ1bmN0aW9uKCkgcmV0dXJuIGEgLyBiIGVuZCwgZXJyb3JIYW5kbGVyKQogICAgaWYgc3RhdHVzIHRoZW4KICAgICAgICByZXR1cm4gcmVzdWx0CiAgICBlbHNlCiAgICAgICAgcmV0dXJuIHJlc3VsdAogICAgZW5kCmVuZAoKcHJpbnQoc2FmZURpdmlkZSgxMCwgMikpICAtLSBPdXRwdXQ6IDUKcHJpbnQoc2FmZURpdmlkZSgxMCwgMCkpICAtLSBPdXRwdXQ6IEFuIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgY2hlY2sgdGhlIGxvZyBmaWxlLg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function errorHandler(err)
    local file = io.open(&quot;error_log.txt&quot;, &quot;a&quot;)
    file:write(&quot;Error: &quot; .. err .. &quot;\n&quot;)
    file:close()
    return &quot;An error occurred. Please check the log file.&quot;
end

function safeDivide(a, b)
    local status, result = xpcall(function() return a / b end, errorHandler)
    if status then
        return result
    else
        return result
    end
end

print(safeDivide(10, 2))  -- Output: 5
print(safeDivide(10, 0))  -- Output: An error occurred. Please check the log file.</pre></div><div class='content'></div><h2>Conclusion</h2>
<div class='content'><p>In this section, you learned about error handling in Lua using <code>pcall</code> and <code>xpcall</code>. You also saw how to create custom error messages and handle errors gracefully. Error handling is an essential skill for writing robust and reliable code. In the next module, we will explore file I/O operations in Lua, which will further enhance your ability to create comprehensive Lua applications.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='03-03-modules-packages' title="Modules and Packages" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='03-03-modules-packages' title="Modules and Packages" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='03-05-file-io' title="File I/O" class="py-2 px-3 btn btn-primary"
				data-read-mod="lua" data-read-unit="3-4">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='03-05-file-io' title="File I/O" class="py-2 px-3 btn btn-primary" 
				data-read-mod="lua" data-read-unit="3-4">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Lua Programming Course</h1>
<h2>Module 1: Introduction to Lua</h2>
<ul>
<li><a href="01-01-what-is-lua">What is Lua?</a></li>
<li><a href="01-02-setting-up-lua">Setting Up the Lua Environment</a></li>
<li><a href="01-03-first-lua-script">Your First Lua Script</a></li>
<li><a href="01-04-basic-syntax">Basic Syntax and Structure</a></li>
</ul>
<h2>Module 2: Basic Concepts</h2>
<ul>
<li><a href="02-01-variables-data-types">Variables and Data Types</a></li>
<li><a href="02-02-operators">Operators</a></li>
<li><a href="02-03-control-structures">Control Structures</a></li>
<li><a href="02-04-loops">Loops</a></li>
<li><a href="02-05-functions">Functions</a></li>
</ul>
<h2>Module 3: Intermediate Concepts</h2>
<ul>
<li><a href="03-01-tables">Tables</a></li>
<li><a href="03-02-metatables-metamethods">Metatables and Metamethods</a></li>
<li><a href="03-03-modules-packages">Modules and Packages</a></li>
<li><a href="03-04-error-handling">Error Handling</a></li>
<li><a href="03-05-file-io">File I/O</a></li>
</ul>
<h2>Module 4: Advanced Concepts</h2>
<ul>
<li><a href="04-01-coroutines">Coroutines</a></li>
<li><a href="04-02-oop-lua">Object-Oriented Programming in Lua</a></li>
<li><a href="04-03-debugging-techniques">Debugging Techniques</a></li>
<li><a href="04-04-performance-optimization">Performance Optimization</a></li>
<li><a href="04-05-lua-c-api">Using the Lua C API</a></li>
</ul>
<h2>Module 5: Practical Applications</h2>
<ul>
<li><a href="05-01-building-simple-game">Building a Simple Game</a></li>
<li><a href="05-02-scripting-game-engines">Scripting in Game Engines</a></li>
<li><a href="05-03-automating-tasks">Automating Tasks with Lua</a></li>
<li><a href="05-04-integrating-lua">Integrating Lua with Other Languages</a></li>
</ul>
<h2>Module 6: Final Project</h2>
<ul>
<li><a href="06-01-project-overview">Project Overview</a></li>
<li><a href="06-02-planning-design">Planning and Design</a></li>
<li><a href="06-03-implementation">Implementation</a></li>
<li><a href="06-04-testing-debugging">Testing and Debugging</a></li>
<li><a href="06-05-project-presentation">Project Presentation</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
