<!DOCTYPE html>
<html lang="en">
<head>
    <title> Scaling Elasticsearch </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, nofollow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/elasticsearch/05-02-scaling-elasticsearch" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/elasticsearch/05-02-scaling-elasticsearch" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/elasticsearch/05-02-scaling-elasticsearch" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.ea63f62b9e.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "elasticsearch";
  		var TEMA_NAME = "5-2";
  		var TYPE = "mod";
  		var PATH = "mod/elasticsearch/05-02-scaling-elasticsearch";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/elasticsearch/05-02-scaling-elasticsearch" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/elasticsearch/05-02-scaling-elasticsearch" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="elasticsearch">
		<a  href="#" class="text-secondary d-none" data-read-mod="elasticsearch" data-read-unit="5-2" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="elasticsearch" data-unread-unit="5-2" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-01-optimizing-search-performance' title="Optimizing Search Performance" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-01-optimizing-search-performance' title="Optimizing Search Performance" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">Scaling Elasticsearch</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-03-monitoring-maintenance' title="Monitoring and Maintenance" class="py-2 px-3 btn btn-primary"
				data-read-mod="elasticsearch" data-read-unit="5-2">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-03-monitoring-maintenance' title="Monitoring and Maintenance" class="py-2 px-3 btn btn-primary" 
				data-read-mod="elasticsearch" data-read-unit="5-2">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Scaling Elasticsearch is crucial for handling large volumes of data and ensuring high availability and performance. This section will cover the key concepts and strategies for scaling Elasticsearch effectively.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li>
<p><strong>Horizontal Scaling vs. Vertical Scaling</strong>:</p>
<ul>
<li><strong>Horizontal Scaling</strong>: Adding more nodes to the cluster.</li>
<li><strong>Vertical Scaling</strong>: Adding more resources (CPU, RAM, storage) to existing nodes.</li>
</ul>
</li>
<li>
<p><strong>Cluster Topology</strong>:</p>
<ul>
<li><strong>Master Nodes</strong>: Manage the cluster state and coordinate changes.</li>
<li><strong>Data Nodes</strong>: Store data and handle search and indexing operations.</li>
<li><strong>Ingest Nodes</strong>: Preprocess documents before indexing.</li>
<li><strong>Coordinating Nodes</strong>: Route requests and handle search load balancing.</li>
</ul>
</li>
<li>
<p><strong>Sharding</strong>:</p>
<ul>
<li><strong>Primary Shards</strong>: The main shards that hold the data.</li>
<li><strong>Replica Shards</strong>: Copies of primary shards for redundancy and high availability.</li>
</ul>
</li>
<li>
<p><strong>Index Lifecycle Management (ILM)</strong>:</p>
<ul>
<li>Automates index management tasks such as rollover, shrink, and delete.</li>
</ul>
</li>
</ol>
</div><h1>Horizontal Scaling</h1>
<div class='content'></div><h2>Adding Nodes to the Cluster</h2>
<div class='content'><ol>
<li>
<p><strong>Add Data Nodes</strong>:</p>
<ul>
<li>Increase the number of data nodes to distribute the load and improve performance.</li>
<li>Example configuration for a new data node:
<pre><code class="language-yaml">node.name: data-node-2
node.data: true
node.master: false
node.ingest: false
discovery.seed_hosts: [&quot;master-node-1&quot;, &quot;master-node-2&quot;]
cluster.initial_master_nodes: [&quot;master-node-1&quot;, &quot;master-node-2&quot;]
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Add Master Nodes</strong>:</p>
<ul>
<li>Ensure an odd number of master-eligible nodes to avoid split-brain scenarios.</li>
<li>Example configuration for a new master node:
<pre><code class="language-yaml">node.name: master-node-3
node.master: true
node.data: false
node.ingest: false
discovery.seed_hosts: [&quot;master-node-1&quot;, &quot;master-node-2&quot;]
cluster.initial_master_nodes: [&quot;master-node-1&quot;, &quot;master-node-2&quot;, &quot;master-node-3&quot;]
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Add Ingest Nodes</strong>:</p>
<ul>
<li>Offload preprocessing tasks from data nodes.</li>
<li>Example configuration for a new ingest node:
<pre><code class="language-yaml">node.name: ingest-node-1
node.master: false
node.data: false
node.ingest: true
discovery.seed_hosts: [&quot;master-node-1&quot;, &quot;master-node-2&quot;]
cluster.initial_master_nodes: [&quot;master-node-1&quot;, &quot;master-node-2&quot;]
</code></pre>
</li>
</ul>
</li>
</ol>
</div><h2>Sharding Strategy</h2>
<div class='content'><ol>
<li>
<p><strong>Adjusting Shard Count</strong>:</p>
<ul>
<li>Balance the number of primary and replica shards based on the cluster size.</li>
<li>Example of creating an index with a specific number of shards:
<pre><code class="language-json">PUT /my-index
{
  &quot;settings&quot;: {
    &quot;number_of_shards&quot;: 5,
    &quot;number_of_replicas&quot;: 1
  }
}
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Rebalancing Shards</strong>:</p>
<ul>
<li>Elasticsearch automatically rebalances shards when nodes are added or removed.</li>
<li>Monitor shard allocation using the <code>_cat/shards</code> API:
<pre><code class="language-bash">GET /_cat/shards?v
</code></pre>
</li>
</ul>
</li>
</ol>
</div><h1>Vertical Scaling</h1>
<div class='content'></div><h2>Increasing Node Resources</h2>
<div class='content'><ol>
<li>
<p><strong>Add More RAM</strong>:</p>
<ul>
<li>Allocate more memory to the JVM heap.</li>
<li>Example configuration in <code>jvm.options</code>:
<pre><code>-Xms16g
-Xmx16g
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Add More CPU</strong>:</p>
<ul>
<li>Increase the number of CPU cores to handle more concurrent requests.</li>
</ul>
</li>
<li>
<p><strong>Add More Storage</strong>:</p>
<ul>
<li>Ensure sufficient disk space for data growth and shard allocation.</li>
</ul>
</li>
</ol>
</div><h1>Best Practices</h1>
<div class='content'><ol>
<li>
<p><strong>Monitor Cluster Health</strong>:</p>
<ul>
<li>Use tools like Kibana, Elasticsearch Monitoring, and the <code>_cluster/health</code> API to monitor cluster health.</li>
<li>Example API call:
<pre><code class="language-bash">GET /_cluster/health
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Optimize Index Settings</strong>:</p>
<ul>
<li>Use appropriate refresh intervals and merge policies to optimize performance.</li>
<li>Example of setting a refresh interval:
<pre><code class="language-json">PUT /my-index/_settings
{
  &quot;index&quot;: {
    &quot;refresh_interval&quot;: &quot;30s&quot;
  }
}
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Use Index Lifecycle Management (ILM)</strong>:</p>
<ul>
<li>Automate index management tasks to maintain performance and manage storage.</li>
<li>Example ILM policy:
<pre><code class="language-json">PUT _ilm/policy/my_policy
{
  &quot;policy&quot;: {
    &quot;phases&quot;: {
      &quot;hot&quot;: {
        &quot;actions&quot;: {
          &quot;rollover&quot;: {
            &quot;max_size&quot;: &quot;50gb&quot;,
            &quot;max_age&quot;: &quot;30d&quot;
          }
        }
      },
      &quot;delete&quot;: {
        &quot;min_age&quot;: &quot;90d&quot;,
        &quot;actions&quot;: {
          &quot;delete&quot;: {}
        }
      }
    }
  }
}
</code></pre>
</li>
</ul>
</li>
</ol>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise: Adding a New Data Node</h2>
<div class='content'><ol>
<li>
<p><strong>Objective</strong>: Add a new data node to an existing Elasticsearch cluster.</p>
</li>
<li>
<p><strong>Steps</strong>:</p>
<ul>
<li>Configure the new node with the following settings:
<pre><code class="language-yaml">node.name: data-node-3
node.data: true
node.master: false
node.ingest: false
discovery.seed_hosts: [&quot;master-node-1&quot;, &quot;master-node-2&quot;]
cluster.initial_master_nodes: [&quot;master-node-1&quot;, &quot;master-node-2&quot;]
</code></pre>
</li>
<li>Start the new node and verify it joins the cluster.</li>
<li>Check the cluster health and shard allocation.</li>
</ul>
</li>
<li>
<p><strong>Solution</strong>:</p>
<ul>
<li>Add the configuration to the <code>elasticsearch.yml</code> file of the new node.</li>
<li>Start the Elasticsearch service on the new node.</li>
<li>Verify the node has joined the cluster using the <code>_cat/nodes</code> API:
<pre><code class="language-bash">GET /_cat/nodes?v
</code></pre>
</li>
</ul>
</li>
</ol>
</div><h2>Common Mistakes and Tips</h2>
<div class='content'><ul>
<li>
<p><strong>Mistake</strong>: Not configuring the <code>discovery.seed_hosts</code> correctly.</p>
<ul>
<li><strong>Tip</strong>: Ensure the <code>discovery.seed_hosts</code> list includes the IP addresses or hostnames of existing master nodes.</li>
</ul>
</li>
<li>
<p><strong>Mistake</strong>: Insufficient resources on new nodes.</p>
<ul>
<li><strong>Tip</strong>: Ensure the new nodes have adequate CPU, RAM, and storage to handle the expected load.</li>
</ul>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Scaling Elasticsearch involves both horizontal and vertical scaling strategies. By adding more nodes and adjusting resources, you can ensure your cluster can handle increased data volumes and maintain high performance. Monitoring and optimizing your cluster are essential to successful scaling. In the next section, we will cover monitoring and maintenance to keep your Elasticsearch cluster running smoothly.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-01-optimizing-search-performance' title="Optimizing Search Performance" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-01-optimizing-search-performance' title="Optimizing Search Performance" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-03-monitoring-maintenance' title="Monitoring and Maintenance" class="py-2 px-3 btn btn-primary"
				data-read-mod="elasticsearch" data-read-unit="5-2">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-03-monitoring-maintenance' title="Monitoring and Maintenance" class="py-2 px-3 btn btn-primary" 
				data-read-mod="elasticsearch" data-read-unit="5-2">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Elasticsearch Course</h1>
<h2>Module 1: Introduction to Elasticsearch</h2>
<ul>
<li><a href="01-01-what-is-elasticsearch">What is Elasticsearch?</a></li>
<li><a href="01-02-installing-elasticsearch">Installing Elasticsearch</a></li>
<li><a href="01-03-basic-concepts">Basic Concepts: Nodes, Clusters, and Indices</a></li>
<li><a href="01-04-elasticsearch-architecture">Elasticsearch Architecture</a></li>
</ul>
<h2>Module 2: Getting Started with Elasticsearch</h2>
<ul>
<li><a href="02-01-indexing-data">Indexing Data</a></li>
<li><a href="02-02-searching-data">Searching Data</a></li>
<li><a href="02-03-updating-deleting-data">Updating and Deleting Data</a></li>
<li><a href="02-04-elasticsearch-query-dsl">Elasticsearch Query DSL</a></li>
</ul>
<h2>Module 3: Advanced Search Techniques</h2>
<ul>
<li><a href="03-01-full-text-search">Full-Text Search</a></li>
<li><a href="03-02-filtering-sorting">Filtering and Sorting</a></li>
<li><a href="03-03-aggregations">Aggregations</a></li>
<li><a href="03-04-scripting">Scripting</a></li>
</ul>
<h2>Module 4: Data Modeling and Index Management</h2>
<ul>
<li><a href="04-01-mapping-analyzers">Mapping and Analyzers</a></li>
<li><a href="04-02-index-templates">Index Templates</a></li>
<li><a href="04-03-aliases-reindexing">Aliases and Reindexing</a></li>
<li><a href="04-04-index-lifecycle-management">Index Lifecycle Management</a></li>
</ul>
<h2>Module 5: Performance and Scaling</h2>
<ul>
<li><a href="05-01-optimizing-search-performance">Optimizing Search Performance</a></li>
<li><a href="05-02-scaling-elasticsearch">Scaling Elasticsearch</a></li>
<li><a href="05-03-monitoring-maintenance">Monitoring and Maintenance</a></li>
<li><a href="05-04-backup-restore">Backup and Restore</a></li>
</ul>
<h2>Module 6: Security and Access Control</h2>
<ul>
<li><a href="06-01-securing-elasticsearch">Securing Elasticsearch</a></li>
<li><a href="06-02-user-authentication-authorization">User Authentication and Authorization</a></li>
<li><a href="06-03-role-based-access-control">Role-Based Access Control</a></li>
<li><a href="06-04-auditing-compliance">Auditing and Compliance</a></li>
</ul>
<h2>Module 7: Integrations and Ecosystem</h2>
<ul>
<li><a href="07-01-elasticsearch-logstash">Elasticsearch with Logstash</a></li>
<li><a href="07-02-elasticsearch-kibana">Elasticsearch with Kibana</a></li>
<li><a href="07-03-elasticsearch-beats">Elasticsearch with Beats</a></li>
<li><a href="07-04-elasticsearch-other-tools">Elasticsearch with Other Tools</a></li>
</ul>
<h2>Module 8: Advanced Topics</h2>
<ul>
<li><a href="08-01-custom-plugins">Custom Plugins</a></li>
<li><a href="08-02-machine-learning-elasticsearch">Machine Learning in Elasticsearch</a></li>
<li><a href="08-03-graph-exploration">Graph Exploration</a></li>
<li><a href="08-04-geo-search">Geo-Search</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
