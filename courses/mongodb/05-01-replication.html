<!DOCTYPE html>
<html lang="en">
<head>
    <title> Replication </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/mongodb/05-01-replication" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/mongodb/05-01-replication" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/mongodb/05-01-replication" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.1ab297bfa4.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "languages";
  		var MOD_NAME = "mongodb";
  		var TEMA_NAME = "5-1";
  		var TYPE = "mod";
  		var PATH = "mod/mongodb/05-01-replication";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.8d8afe898f.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/mongodb/05-01-replication" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/mongodb/05-01-replication" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="mongodb">
		<a  href="#" class="text-secondary d-none" data-read-mod="mongodb" data-read-unit="5-1" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="mongodb" data-unread-unit="5-1" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-04-using-pipelines' title="Using Pipelines" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-04-using-pipelines' title="Using Pipelines" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Replication</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-02-sharding' title="Sharding" class="py-2 px-3 btn btn-primary"
				data-read-mod="mongodb" data-read-unit="5-1">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-02-sharding' title="Sharding" class="py-2 px-3 btn btn-primary" 
				data-read-mod="mongodb" data-read-unit="5-1">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'></div><h2>Introduction to Replication</h2>
<div class='content'><p>Replication in MongoDB is a process that allows you to maintain multiple copies of your data across different servers. This ensures high availability and redundancy, which are crucial for production environments. Replication helps in:</p>
<ul>
<li><strong>Data Redundancy</strong>: Ensuring that data is not lost in case of hardware failure.</li>
<li><strong>High Availability</strong>: Keeping the database available even if some servers go down.</li>
<li><strong>Disaster Recovery</strong>: Providing a backup in case of data corruption or loss.</li>
<li><strong>Read Scalability</strong>: Distributing read operations across multiple servers.</li>
</ul>
</div><h2>Key Concepts</h2>
<div class='content'></div><h3>Replica Set</h3>
<div class='content'><p>A replica set is a group of MongoDB servers that maintain the same data set. A replica set consists of:</p>
<ul>
<li><strong>Primary Node</strong>: The node that receives all write operations.</li>
<li><strong>Secondary Nodes</strong>: Nodes that replicate the data from the primary node. They can serve read operations.</li>
<li><strong>Arbiter</strong>: A node that participates in elections but does not store data. It helps in maintaining a quorum.</li>
</ul>
</div><h3>Election Process</h3>
<div class='content'><p>When the primary node fails, an election process is initiated to select a new primary from the secondary nodes. This ensures that the database remains available for write operations.</p>
</div><h3>Oplog (Operations Log)</h3>
<div class='content'><p>The oplog is a special capped collection that keeps a rolling record of all operations that modify the data stored in the database. Secondary nodes replicate the data by applying operations from the primary's oplog.</p>
</div><h2>Setting Up a Replica Set</h2>
<div class='content'></div><h3>Step 1: Start MongoDB Instances</h3>
<div class='content'><p>Start multiple MongoDB instances on different ports or servers. For simplicity, we'll use three instances on the same machine with different ports.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBTdGFydCB0aGUgZmlyc3QgaW5zdGFuY2UKbW9uZ29kIC0tcG9ydCAyNzAxNyAtLWRicGF0aCAvZGF0YS9kYjEgLS1yZXBsU2V0IHJzMAoKIyBTdGFydCB0aGUgc2Vjb25kIGluc3RhbmNlCm1vbmdvZCAtLXBvcnQgMjcwMTggLS1kYnBhdGggL2RhdGEvZGIyIC0tcmVwbFNldCByczAKCiMgU3RhcnQgdGhlIHRoaXJkIGluc3RhbmNlCm1vbmdvZCAtLXBvcnQgMjcwMTkgLS1kYnBhdGggL2RhdGEvZGIzIC0tcmVwbFNldCByczA="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Start the first instance
mongod --port 27017 --dbpath /data/db1 --replSet rs0

# Start the second instance
mongod --port 27018 --dbpath /data/db2 --replSet rs0

# Start the third instance
mongod --port 27019 --dbpath /data/db3 --replSet rs0</pre></div><div class='content'></div><h3>Step 2: Initialize the Replica Set</h3>
<div class='content'><p>Connect to one of the MongoDB instances and initialize the replica set.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDb25uZWN0IHRvIHRoZSBmaXJzdCBpbnN0YW5jZQptb25nbyAtLXBvcnQgMjcwMTcKCiMgSW5pdGlhbGl6ZSB0aGUgcmVwbGljYSBzZXQKcnMuaW5pdGlhdGUoewogIF9pZDogInJzMCIsCiAgbWVtYmVyczogWwogICAgeyBfaWQ6IDAsIGhvc3Q6ICJsb2NhbGhvc3Q6MjcwMTciIH0sCiAgICB7IF9pZDogMSwgaG9zdDogImxvY2FsaG9zdDoyNzAxOCIgfSwKICAgIHsgX2lkOiAyLCBob3N0OiAibG9jYWxob3N0OjI3MDE5IiB9CiAgXQp9KQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Connect to the first instance
mongo --port 27017

# Initialize the replica set
rs.initiate({
  _id: &quot;rs0&quot;,
  members: [
    { _id: 0, host: &quot;localhost:27017&quot; },
    { _id: 1, host: &quot;localhost:27018&quot; },
    { _id: 2, host: &quot;localhost:27019&quot; }
  ]
})</pre></div><div class='content'></div><h3>Step 3: Verify the Replica Set</h3>
<div class='content'><p>Check the status of the replica set to ensure that it is configured correctly.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cnMuc3RhdHVzKCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>rs.status()</pre></div><div class='content'></div><h2>Practical Example</h2>
<div class='content'></div><h3>Inserting Data into the Replica Set</h3>
<div class='content'><p>Once the replica set is configured, you can insert data into the primary node, and it will be replicated to the secondary nodes.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ29ubmVjdCB0byB0aGUgcHJpbWFyeSBub2RlCm1vbmdvIC0tcG9ydCAyNzAxNwoKLy8gVXNlIGEgZGF0YWJhc2UKdXNlIG15RGF0YWJhc2UKCi8vIEluc2VydCBhIGRvY3VtZW50CmRiLm15Q29sbGVjdGlvbi5pbnNlcnQoeyBuYW1lOiAiQWxpY2UiLCBhZ2U6IDMwIH0pCgovLyBDaGVjayB0aGUgZG9jdW1lbnQgb24gdGhlIHByaW1hcnkgbm9kZQpkYi5teUNvbGxlY3Rpb24uZmluZCgp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Connect to the primary node
mongo --port 27017

// Use a database
use myDatabase

// Insert a document
db.myCollection.insert({ name: &quot;Alice&quot;, age: 30 })

// Check the document on the primary node
db.myCollection.find()</pre></div><div class='content'></div><h3>Reading Data from Secondary Nodes</h3>
<div class='content'><p>You can configure your application to read data from secondary nodes to distribute the read load.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ29ubmVjdCB0byBhIHNlY29uZGFyeSBub2RlCm1vbmdvIC0tcG9ydCAyNzAxOAoKLy8gVXNlIHRoZSBzYW1lIGRhdGFiYXNlCnVzZSBteURhdGFiYXNlCgovLyBFbmFibGUgcmVhZGluZyBmcm9tIHNlY29uZGFyeQpycy5zbGF2ZU9rKCkKCi8vIFJlYWQgdGhlIGRvY3VtZW50CmRiLm15Q29sbGVjdGlvbi5maW5kKCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Connect to a secondary node
mongo --port 27018

// Use the same database
use myDatabase

// Enable reading from secondary
rs.slaveOk()

// Read the document
db.myCollection.find()</pre></div><div class='content'></div><h2>Exercises</h2>
<div class='content'></div><h3>Exercise 1: Add an Arbiter</h3>
<div class='content'><p>Add an arbiter to the existing replica set to help with elections.</p>
<p><strong>Solution:</strong></p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ29ubmVjdCB0byB0aGUgcHJpbWFyeSBub2RlCm1vbmdvIC0tcG9ydCAyNzAxNwoKLy8gQWRkIGFuIGFyYml0ZXIKcnMuYWRkQXJiKCJsb2NhbGhvc3Q6MjcwMjAiKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Connect to the primary node
mongo --port 27017

// Add an arbiter
rs.addArb(&quot;localhost:27020&quot;)</pre></div><div class='content'></div><h3>Exercise 2: Simulate a Primary Failure</h3>
<div class='content'><p>Simulate a primary node failure and observe the election process.</p>
<p><strong>Solution:</strong></p>
<ol>
<li>
<p>Stop the primary node.</p>
<pre><code class="language-bash"># Stop the primary instance
mongod --shutdown --port 27017
</code></pre>
</li>
<li>
<p>Check the status of the replica set.</p>
<pre><code class="language-javascript">rs.status()
</code></pre>
</li>
<li>
<p>Observe that a new primary is elected.</p>
</li>
</ol>
</div><h2>Common Mistakes and Tips</h2>
<div class='content'><ul>
<li><strong>Not Configuring Replica Set Correctly</strong>: Ensure that all nodes are correctly added to the replica set.</li>
<li><strong>Ignoring Network Latency</strong>: In a distributed environment, network latency can affect replication. Monitor and optimize network performance.</li>
<li><strong>Not Using Arbiters Wisely</strong>: Arbiters do not store data, so use them only when necessary to maintain a quorum.</li>
</ul>
</div><h2>Conclusion</h2>
<div class='content'><p>Replication is a powerful feature in MongoDB that ensures data redundancy, high availability, and read scalability. By setting up a replica set, you can protect your data against hardware failures and distribute read operations across multiple servers. In the next topic, we will explore sharding, which helps in distributing data across multiple servers to handle large datasets efficiently.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-04-using-pipelines' title="Using Pipelines" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-04-using-pipelines' title="Using Pipelines" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-02-sharding' title="Sharding" class="py-2 px-3 btn btn-primary"
				data-read-mod="mongodb" data-read-unit="5-1">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-02-sharding' title="Sharding" class="py-2 px-3 btn btn-primary" 
				data-read-mod="mongodb" data-read-unit="5-1">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>MongoDB Course</h1>
<h2>Module 1: Introduction to MongoDB</h2>
<ul>
<li><a href="01-01-what-is-mongodb">What is MongoDB?</a></li>
<li><a href="01-02-installing-mongodb">Installing MongoDB</a></li>
<li><a href="01-03-mongodb-basics">MongoDB Basics</a></li>
<li><a href="01-04-mongodb-vs-sql-databases">MongoDB vs. SQL Databases</a></li>
</ul>
<h2>Module 2: MongoDB CRUD Operations</h2>
<ul>
<li><a href="02-01-creating-documents">Creating Documents</a></li>
<li><a href="02-02-reading-documents">Reading Documents</a></li>
<li><a href="02-03-updating-documents">Updating Documents</a></li>
<li><a href="02-04-deleting-documents">Deleting Documents</a></li>
</ul>
<h2>Module 3: Data Modeling in MongoDB</h2>
<ul>
<li><a href="03-01-schema-design">Schema Design</a></li>
<li><a href="03-02-embedded-documents">Embedded Documents</a></li>
<li><a href="03-03-references">References</a></li>
<li><a href="03-04-data-types">Data Types</a></li>
</ul>
<h2>Module 4: Indexing and Aggregation</h2>
<ul>
<li><a href="04-01-creating-indexes">Creating Indexes</a></li>
<li><a href="04-02-types-of-indexes">Types of Indexes</a></li>
<li><a href="04-03-aggregation-framework">Aggregation Framework</a></li>
<li><a href="04-04-using-pipelines">Using Pipelines</a></li>
</ul>
<h2>Module 5: Advanced MongoDB Features</h2>
<ul>
<li><a href="05-01-replication">Replication</a></li>
<li><a href="05-02-sharding">Sharding</a></li>
<li><a href="05-03-transactions">Transactions</a></li>
<li><a href="05-04-mongodb-atlas">MongoDB Atlas</a></li>
</ul>
<h2>Module 6: Performance and Security</h2>
<ul>
<li><a href="06-01-performance-tuning">Performance Tuning</a></li>
<li><a href="06-02-backup-and-restore">Backup and Restore</a></li>
<li><a href="06-03-security-best-practices">Security Best Practices</a></li>
<li><a href="06-04-monitoring-and-alerts">Monitoring and Alerts</a></li>
</ul>
<h2>Module 7: MongoDB with Programming Languages</h2>
<ul>
<li><a href="07-01-mongodb-with-javascript">MongoDB with JavaScript (Node.js)</a></li>
<li><a href="07-02-mongodb-with-python">MongoDB with Python</a></li>
<li><a href="07-03-mongodb-with-java">MongoDB with Java</a></li>
<li><a href="07-04-mongodb-with-csharp">MongoDB with C#</a></li>
</ul>
<h2>Module 8: Real-World Applications</h2>
<ul>
<li><a href="08-01-building-rest-api">Building a REST API with MongoDB</a></li>
<li><a href="08-02-ecommerce-application">E-commerce Application</a></li>
<li><a href="08-03-social-media-application">Social Media Application</a></li>
<li><a href="08-04-iot-data-management">IoT Data Management</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
