<!DOCTYPE html>
<html lang="en">
<head>
    <title> Exercise 2: Integrating Automated Tests </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, nofollow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/ci-cd-integracion-despliegue-continuo/07-02-ejercicio-pruebas-automatizadas" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/ci-cd-integracio-desplegament-continu/07-02-exercici-proves-automatitzades" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/ci-cd-continuous-integration-deployment/07-02-exercise-automated-tests" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.ea63f62b9e.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "ci_cd";
  		var TEMA_NAME = "7-2";
  		var TYPE = "mod";
  		var PATH = "mod/ci_cd/07-02-exercise-automated-tests";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/ci-cd-integracion-despliegue-continuo/07-02-ejercicio-pruebas-automatizadas" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/ci-cd-integracio-desplegament-continu/07-02-exercici-proves-automatitzades" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="ci_cd">
		<a  href="#" class="text-secondary d-none" data-read-mod="ci_cd" data-read-unit="7-2" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="ci_cd" data-unread-unit="7-2" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='07-01-exercise-basic-pipeline' title="Exercise 1: Setting Up a Basic Pipeline" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='07-01-exercise-basic-pipeline' title="Exercise 1: Setting Up a Basic Pipeline" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">Exercise 2: Integrating Automated Tests</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-03-exercise-deployment-production' title="Exercise 3: Deployment in a Production Environment" class="py-2 px-3 btn btn-primary"
				data-read-mod="ci_cd" data-read-unit="7-2">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-03-exercise-deployment-production' title="Exercise 3: Deployment in a Production Environment" class="py-2 px-3 btn btn-primary" 
				data-read-mod="ci_cd" data-read-unit="7-2">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>In this exercise, you will learn how to integrate automated tests into your CI pipeline. Automated testing is a crucial part of CI/CD as it ensures that your code changes do not break existing functionality and helps maintain code quality.</p>
</div><h1>Objectives</h1>
<div class='content'><ul>
<li>Understand the importance of automated testing in CI/CD.</li>
<li>Learn how to set up automated tests in a CI pipeline.</li>
<li>Execute and verify automated tests using a CI tool.</li>
</ul>
</div><h1>Prerequisites</h1>
<div class='content'><ul>
<li>Basic understanding of CI/CD concepts.</li>
<li>Familiarity with a CI tool (e.g., Jenkins, GitLab CI/CD, CircleCI).</li>
<li>A sample project with some existing tests (e.g., a simple Node.js application).</li>
</ul>
</div><h1>Steps to Integrate Automated Tests</h1>
<div class='content'></div><h2>Step 1: Set Up Your CI Environment</h2>
<div class='content'><p>Ensure you have a CI environment set up. If you haven't done this yet, refer to the &quot;Setting Up a CI Environment&quot; section in Module 2.</p>
</div><h2>Step 2: Add Test Scripts to Your Project</h2>
<div class='content'><p>Ensure your project has test scripts. For example, in a Node.js project, you might use a testing framework like Mocha or Jest.</p>
<p><strong>Example: Adding Jest to a Node.js Project</strong></p>
<ol>
<li>
<p>Install Jest:</p>
<pre><code class="language-bash">npm install --save-dev jest
</code></pre>
</li>
<li>
<p>Add a test script to your <code>package.json</code>:</p>
<pre><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;jest&quot;
  }
}
</code></pre>
</li>
<li>
<p>Create a simple test file, <code>sum.test.js</code>:</p>
<pre><code class="language-javascript">const sum = require('./sum');

test('adds 1 + 2 to equal 3', () =&gt; {
  expect(sum(1, 2)).toBe(3);
});
</code></pre>
</li>
<li>
<p>Create the <code>sum.js</code> file:</p>
<pre><code class="language-javascript">function sum(a, b) {
  return a + b;
}
module.exports = sum;
</code></pre>
</li>
</ol>
</div><h2>Step 3: Configure the CI Tool to Run Tests</h2>
<div class='content'><p>Configure your CI tool to run the tests as part of the pipeline.</p>
<p><strong>Example: Configuring Jenkins</strong></p>
<ol>
<li>Create a new Jenkins job or pipeline.</li>
<li>In the pipeline configuration, add a stage to run tests.</li>
</ol>
<p><strong>Jenkins Pipeline Script Example:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwZWxpbmUgewogICAgYWdlbnQgYW55CgogICAgc3RhZ2VzIHsKICAgICAgICBzdGFnZSgnQ2hlY2tvdXQnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGdpdCAnaHR0cHM6Ly9naXRodWIuY29tL3lvdXItcmVwby95b3VyLXByb2plY3QuZ2l0JwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHN0YWdlKCdJbnN0YWxsIERlcGVuZGVuY2llcycpIHsKICAgICAgICAgICAgc3RlcHMgewogICAgICAgICAgICAgICAgc2ggJ25wbSBpbnN0YWxsJwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHN0YWdlKCdSdW4gVGVzdHMnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIHNoICducG0gdGVzdCcKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pipeline {
    agent any

    stages {
        stage('Checkout') {
            steps {
                git 'https://github.com/your-repo/your-project.git'
            }
        }
        stage('Install Dependencies') {
            steps {
                sh 'npm install'
            }
        }
        stage('Run Tests') {
            steps {
                sh 'npm test'
            }
        }
    }
}</pre></div><div class='content'></div><h2>Step 4: Execute the Pipeline</h2>
<div class='content'><p>Run the pipeline and verify that the tests are executed.</p>
<ol>
<li>Trigger the pipeline manually or push a commit to the repository to trigger it automatically.</li>
<li>Monitor the pipeline execution in the CI tool's dashboard.</li>
<li>Check the test results in the pipeline logs.</li>
</ol>
</div><h2>Step 5: Verify Test Results</h2>
<div class='content'><p>Ensure that the tests pass successfully. If any tests fail, investigate the cause and fix the issues.</p>
<p><strong>Common Issues and Solutions:</strong></p>
<ul>
<li><strong>Missing Dependencies:</strong> Ensure all required dependencies are installed.</li>
<li><strong>Incorrect Test Configuration:</strong> Verify that the test framework is correctly configured.</li>
<li><strong>Code Errors:</strong> Debug and fix any errors in the code or tests.</li>
</ul>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise: Integrate Automated Tests in a CI Pipeline</h2>
<div class='content'><ol>
<li>
<p><strong>Set Up a Sample Project:</strong></p>
<ul>
<li>Create a simple Node.js project with a few test cases using Jest.</li>
</ul>
</li>
<li>
<p><strong>Configure Jenkins:</strong></p>
<ul>
<li>Set up a Jenkins pipeline to run the tests.</li>
</ul>
</li>
<li>
<p><strong>Run the Pipeline:</strong></p>
<ul>
<li>Execute the pipeline and verify that the tests run successfully.</li>
</ul>
</li>
</ol>
</div><h2>Solution</h2>
<div class='content'><p><strong>Sample Node.js Project Structure:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bXktbm9kZWpzLWFwcC8K4pSc4pSA4pSAIHN1bS5qcwrilJzilIDilIAgc3VtLnRlc3QuanMK4pSc4pSA4pSAIHBhY2thZ2UuanNvbgrilJTilIDilIAgcGFja2FnZS1sb2NrLmpzb24="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>my-nodejs-app/
├── sum.js
├── sum.test.js
├── package.json
└── package-lock.json</pre></div><div class='content'><p><strong>package.json:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJuYW1lIjogIm15LW5vZGVqcy1hcHAiLAogICJ2ZXJzaW9uIjogIjEuMC4wIiwKICAic2NyaXB0cyI6IHsKICAgICJ0ZXN0IjogImplc3QiCiAgfSwKICAiZGV2RGVwZW5kZW5jaWVzIjogewogICAgImplc3QiOiAiXjI3LjAuMCIKICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;name&quot;: &quot;my-nodejs-app&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;jest&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;jest&quot;: &quot;^27.0.0&quot;
  }
}</pre></div><div class='content'><p><strong>sum.js:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gc3VtKGEsIGIpIHsKICByZXR1cm4gYSArIGI7Cn0KbW9kdWxlLmV4cG9ydHMgPSBzdW07"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function sum(a, b) {
  return a + b;
}
module.exports = sum;</pre></div><div class='content'><p><strong>sum.test.js:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3Qgc3VtID0gcmVxdWlyZSgnLi9zdW0nKTsKCnRlc3QoJ2FkZHMgMSArIDIgdG8gZXF1YWwgMycsICgpID0+IHsKICBleHBlY3Qoc3VtKDEsIDIpKS50b0JlKDMpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const sum = require('./sum');

test('adds 1 + 2 to equal 3', () =&gt; {
  expect(sum(1, 2)).toBe(3);
});</pre></div><div class='content'><p><strong>Jenkins Pipeline Script:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwZWxpbmUgewogICAgYWdlbnQgYW55CgogICAgc3RhZ2VzIHsKICAgICAgICBzdGFnZSgnQ2hlY2tvdXQnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGdpdCAnaHR0cHM6Ly9naXRodWIuY29tL3lvdXItcmVwby95b3VyLXByb2plY3QuZ2l0JwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHN0YWdlKCdJbnN0YWxsIERlcGVuZGVuY2llcycpIHsKICAgICAgICAgICAgc3RlcHMgewogICAgICAgICAgICAgICAgc2ggJ25wbSBpbnN0YWxsJwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHN0YWdlKCdSdW4gVGVzdHMnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIHNoICducG0gdGVzdCcKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pipeline {
    agent any

    stages {
        stage('Checkout') {
            steps {
                git 'https://github.com/your-repo/your-project.git'
            }
        }
        stage('Install Dependencies') {
            steps {
                sh 'npm install'
            }
        }
        stage('Run Tests') {
            steps {
                sh 'npm test'
            }
        }
    }
}</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>In this exercise, you learned how to integrate automated tests into a CI pipeline. Automated testing is essential for maintaining code quality and ensuring that new changes do not introduce bugs. By following the steps outlined, you can set up and run automated tests in your CI environment, helping you to catch issues early in the development process.</p>
<p>Next, you will learn about deploying your application in a production environment in the next exercise.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='07-01-exercise-basic-pipeline' title="Exercise 1: Setting Up a Basic Pipeline" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='07-01-exercise-basic-pipeline' title="Exercise 1: Setting Up a Basic Pipeline" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-03-exercise-deployment-production' title="Exercise 3: Deployment in a Production Environment" class="py-2 px-3 btn btn-primary"
				data-read-mod="ci_cd" data-read-unit="7-2">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-03-exercise-deployment-production' title="Exercise 3: Deployment in a Production Environment" class="py-2 px-3 btn btn-primary" 
				data-read-mod="ci_cd" data-read-unit="7-2">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>CI/CD Course: Continuous Integration and Deployment</h1>
<h2>Module 1: Introduction to CI/CD</h2>
<ul>
<li><a href="01-01-basic-concepts">Basic Concepts of CI/CD</a></li>
<li><a href="01-02-benefits">Benefits of CI/CD</a></li>
<li><a href="01-03-popular-tools">Popular CI/CD Tools</a></li>
</ul>
<h2>Module 2: Continuous Integration (CI)</h2>
<ul>
<li><a href="02-01-introduction-ci">Introduction to Continuous Integration</a></li>
<li><a href="02-02-setup-ci-environment">Setting Up a CI Environment</a></li>
<li><a href="02-03-build-automation">Build Automation</a></li>
<li><a href="02-04-automated-testing">Automated Testing</a></li>
<li><a href="02-05-integration-version-control">Integration with Version Control</a></li>
</ul>
<h2>Module 3: Continuous Deployment (CD)</h2>
<ul>
<li><a href="03-01-introduction-cd">Introduction to Continuous Deployment</a></li>
<li><a href="03-02-deployment-automation">Deployment Automation</a></li>
<li><a href="03-03-deployment-strategies">Deployment Strategies</a></li>
<li><a href="03-04-monitoring-feedback">Monitoring and Feedback</a></li>
</ul>
<h2>Module 4: Advanced CI/CD Practices</h2>
<ul>
<li><a href="04-01-ci-cd-pipelines">CI/CD Pipelines</a></li>
<li><a href="04-02-dependency-management">Dependency Management</a></li>
<li><a href="04-03-security-ci-cd">Security in CI/CD</a></li>
<li><a href="04-04-scalability-performance">Scalability and Performance</a></li>
</ul>
<h2>Module 5: Implementing CI/CD in Real Projects</h2>
<ul>
<li><a href="05-01-case-study-web">Case Study: Web Project</a></li>
<li><a href="05-02-case-study-mobile">Case Study: Mobile Application</a></li>
<li><a href="05-03-case-study-microservices">Case Study: Microservices</a></li>
</ul>
<h2>Module 6: Tools and Technologies</h2>
<ul>
<li><a href="06-01-jenkins">Jenkins</a></li>
<li><a href="06-02-gitlab-ci-cd">GitLab CI/CD</a></li>
<li><a href="06-03-circleci">CircleCI</a></li>
<li><a href="06-04-travis-ci">Travis CI</a></li>
<li><a href="06-05-docker-kubernetes">Docker and Kubernetes</a></li>
</ul>
<h2>Module 7: Practical Exercises</h2>
<ul>
<li><a href="07-01-exercise-basic-pipeline">Exercise 1: Setting Up a Basic Pipeline</a></li>
<li><a href="07-02-exercise-automated-tests">Exercise 2: Integrating Automated Tests</a></li>
<li><a href="07-03-exercise-deployment-production">Exercise 3: Deployment in a Production Environment</a></li>
<li><a href="07-04-exercise-monitoring-feedback">Exercise 4: Monitoring and Feedback</a></li>
</ul>
<h2>Module 8: Additional Resources</h2>
<ul>
<li><a href="08-01-recommended-readings">Recommended Readings</a></li>
<li><a href="08-02-communities-forums">Communities and Forums</a></li>
<li><a href="08-03-additional-tools-plugins">Additional Tools and Plugins</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
