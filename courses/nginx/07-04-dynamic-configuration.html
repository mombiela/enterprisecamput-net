<!DOCTYPE html>
<html lang="en">
<head>
    <title> Dynamic Configuration </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/nginx/07-04-dynamic-configuration" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/nginx/07-04-dynamic-configuration" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/nginx/07-04-dynamic-configuration" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.1ab297bfa4.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "tech-tools";
  		var MOD_NAME = "nginx";
  		var TEMA_NAME = "7-4";
  		var TYPE = "mod";
  		var PATH = "mod/nginx/07-04-dynamic-configuration";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.e0e4cfcd99.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/nginx/07-04-dynamic-configuration" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/nginx/07-04-dynamic-configuration" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="nginx">
		<a  href="#" class="text-secondary d-none" data-read-mod="nginx" data-read-unit="7-4" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="nginx" data-unread-unit="7-4" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='07-03-application-health-monitoring' title="Application Health Monitoring" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='07-03-application-health-monitoring' title="Application Health Monitoring" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Dynamic Configuration</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href="#" class="py-2 px-3 btn btn-success"
				data-read-mod="nginx" data-read-unit="7-4">
				<i class="bi bi-flag" data-read-mod="nginx" data-read-unit="7-4"></i> End! 
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href="#" class="py-2 px-3 btn btn-success" 
				data-read-mod="nginx" data-read-unit="7-4">
				<i class="bi bi-flag" data-read-mod="nginx" data-read-unit="7-4"></i>
			</a>			
			</div>
</div>
<div class='content'><p>Dynamic configuration in NGINX Plus allows you to make changes to your NGINX configuration without needing to reload or restart the server. This feature is particularly useful for environments that require high availability and minimal downtime. In this section, we will cover the following topics:</p>
<ol>
<li><strong>Introduction to Dynamic Configuration</strong></li>
<li><strong>Using the NGINX Plus API</strong></li>
<li><strong>Dynamic Upstream Configuration</strong></li>
<li><strong>Practical Examples</strong></li>
<li><strong>Exercises</strong></li>
</ol>
</div><h2><ol>
<li>Introduction to Dynamic Configuration</li>
</ol></h2>
<div class='content'><p>Dynamic configuration enables you to:</p>
<ul>
<li>Add or remove servers from upstream groups.</li>
<li>Change load balancing methods.</li>
<li>Modify server weights and other parameters.</li>
</ul>
<p>This is achieved through the NGINX Plus API, which provides a RESTful interface for managing NGINX configuration dynamically.</p>
</div><h2><ol start="2">
<li>Using the NGINX Plus API</li>
</ol></h2>
<div class='content'><p>The NGINX Plus API is a powerful tool that allows you to interact with your NGINX configuration programmatically. Here are the key endpoints you will use:</p>
<ul>
<li><strong>/api/6/http/upstreams</strong>: Manage upstream groups.</li>
<li><strong>/api/6/http/servers</strong>: Manage HTTP servers.</li>
<li><strong>/api/6/stream/upstreams</strong>: Manage stream upstream groups.</li>
<li><strong>/api/6/stream/servers</strong>: Manage stream servers.</li>
</ul>
</div><h3>Example: Adding a Server to an Upstream Group</h3>
<div class='content'><p>To add a server to an upstream group, you can use the following <code>curl</code> command:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y3VybCAtWCBQT1NUIC1kICd7InNlcnZlciI6ICIxOTIuMTY4LjEuMTAwOjgwIn0nIFwKICAgICBodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpLzYvaHR0cC91cHN0cmVhbXMvbXlfdXBzdHJlYW0vc2VydmVycw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>curl -X POST -d '{&quot;server&quot;: &quot;192.168.1.100:80&quot;}' \
     http://localhost:8080/api/6/http/upstreams/my_upstream/servers</pre></div><div class='content'></div><h3>Explanation:</h3>
<div class='content'><ul>
<li><code>-X POST</code>: Specifies the HTTP method.</li>
<li><code>-d '{&quot;server&quot;: &quot;192.168.1.100:80&quot;}'</code>: The data to be sent in JSON format.</li>
<li><code>http://localhost:8080/api/6/http/upstreams/my_upstream/servers</code>: The API endpoint.</li>
</ul>
</div><h2><ol start="3">
<li>Dynamic Upstream Configuration</li>
</ol></h2>
<div class='content'><p>Dynamic upstream configuration allows you to manage the servers in your upstream groups without reloading NGINX. This is particularly useful for load balancing and high-availability setups.</p>
</div><h3>Example: Removing a Server from an Upstream Group</h3>
<div class='content'><p>To remove a server from an upstream group, you can use the following <code>curl</code> command:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y3VybCAtWCBERUxFVEUgXAogICAgIGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvNi9odHRwL3Vwc3RyZWFtcy9teV91cHN0cmVhbS9zZXJ2ZXJzLzE5Mi4xNjguMS4xMDA6ODA="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>curl -X DELETE \
     http://localhost:8080/api/6/http/upstreams/my_upstream/servers/192.168.1.100:80</pre></div><div class='content'></div><h3>Explanation:</h3>
<div class='content'><ul>
<li><code>-X DELETE</code>: Specifies the HTTP method.</li>
<li><code>http://localhost:8080/api/6/http/upstreams/my_upstream/servers/192.168.1.100:80</code>: The API endpoint.</li>
</ul>
</div><h2><ol start="4">
<li>Practical Examples</li>
</ol></h2>
<div class='content'></div><h3>Example 1: Changing Load Balancing Method</h3>
<div class='content'><p>To change the load balancing method for an upstream group, you can use the following <code>curl</code> command:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y3VybCAtWCBQQVRDSCAtZCAneyJtZXRob2QiOiAibGVhc3RfY29ubiJ9JyBcCiAgICAgaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS82L2h0dHAvdXBzdHJlYW1zL215X3Vwc3RyZWFt"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>curl -X PATCH -d '{&quot;method&quot;: &quot;least_conn&quot;}' \
     http://localhost:8080/api/6/http/upstreams/my_upstream</pre></div><div class='content'></div><h3>Example 2: Modifying Server Weight</h3>
<div class='content'><p>To modify the weight of a server in an upstream group, you can use the following <code>curl</code> command:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y3VybCAtWCBQQVRDSCAtZCAneyJ3ZWlnaHQiOiAxMH0nIFwKICAgICBodHRwOi8vbG9jYWxob3N0OjgwODAvYXBpLzYvaHR0cC91cHN0cmVhbXMvbXlfdXBzdHJlYW0vc2VydmVycy8xOTIuMTY4LjEuMTAwOjgw"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>curl -X PATCH -d '{&quot;weight&quot;: 10}' \
     http://localhost:8080/api/6/http/upstreams/my_upstream/servers/192.168.1.100:80</pre></div><div class='content'></div><h2><ol start="5">
<li>Exercises</li>
</ol></h2>
<div class='content'></div><h3>Exercise 1: Add a Server to an Upstream Group</h3>
<div class='content'><p><strong>Task</strong>: Add a server with the IP address <code>192.168.1.101</code> and port <code>8080</code> to the upstream group <code>my_upstream</code>.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y3VybCAtWCBQT1NUIC1kICd7InNlcnZlciI6ICIxOTIuMTY4LjEuMTAxOjgwODAifScgXAogICAgIGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvNi9odHRwL3Vwc3RyZWFtcy9teV91cHN0cmVhbS9zZXJ2ZXJz"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>curl -X POST -d '{&quot;server&quot;: &quot;192.168.1.101:8080&quot;}' \
     http://localhost:8080/api/6/http/upstreams/my_upstream/servers</pre></div><div class='content'></div><h3>Exercise 2: Remove a Server from an Upstream Group</h3>
<div class='content'><p><strong>Task</strong>: Remove the server with the IP address <code>192.168.1.101</code> and port <code>8080</code> from the upstream group <code>my_upstream</code>.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y3VybCAtWCBERUxFVEUgXAogICAgIGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvNi9odHRwL3Vwc3RyZWFtcy9teV91cHN0cmVhbS9zZXJ2ZXJzLzE5Mi4xNjguMS4xMDE6ODA4MA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>curl -X DELETE \
     http://localhost:8080/api/6/http/upstreams/my_upstream/servers/192.168.1.101:8080</pre></div><div class='content'></div><h3>Exercise 3: Change Load Balancing Method</h3>
<div class='content'><p><strong>Task</strong>: Change the load balancing method of the upstream group <code>my_upstream</code> to <code>ip_hash</code>.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y3VybCAtWCBQQVRDSCAtZCAneyJtZXRob2QiOiAiaXBfaGFzaCJ9JyBcCiAgICAgaHR0cDovL2xvY2FsaG9zdDo4MDgwL2FwaS82L2h0dHAvdXBzdHJlYW1zL215X3Vwc3RyZWFt"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>curl -X PATCH -d '{&quot;method&quot;: &quot;ip_hash&quot;}' \
     http://localhost:8080/api/6/http/upstreams/my_upstream</pre></div><div class='content'></div><h3>Exercise 4: Modify Server Weight</h3>
<div class='content'><p><strong>Task</strong>: Change the weight of the server <code>192.168.1.100:80</code> in the upstream group <code>my_upstream</code> to <code>5</code>.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y3VybCAtWCBQQVRDSCAtZCAneyJ3ZWlnaHQiOiA1fScgXAogICAgIGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvNi9odHRwL3Vwc3RyZWFtcy9teV91cHN0cmVhbS9zZXJ2ZXJzLzE5Mi4xNjguMS4xMDA6ODA="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>curl -X PATCH -d '{&quot;weight&quot;: 5}' \
     http://localhost:8080/api/6/http/upstreams/my_upstream/servers/192.168.1.100:80</pre></div><div class='content'></div><h2>Conclusion</h2>
<div class='content'><p>In this section, we covered the basics of dynamic configuration in NGINX Plus, including how to use the NGINX Plus API to manage upstream groups and servers dynamically. We also provided practical examples and exercises to help you get hands-on experience with dynamic configuration. This knowledge is crucial for maintaining high availability and minimizing downtime in production environments.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='07-03-application-health-monitoring' title="Application Health Monitoring" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='07-03-application-health-monitoring' title="Application Health Monitoring" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href="#" class="py-2 px-3 btn btn-success"
				data-read-mod="nginx" data-read-unit="7-4">
				<i class="bi bi-flag" data-read-mod="nginx" data-read-unit="7-4"></i> End! 
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href="#" class="py-2 px-3 btn btn-success" 
				data-read-mod="nginx" data-read-unit="7-4">
				<i class="bi bi-flag" data-read-mod="nginx" data-read-unit="7-4"></i>
			</a>			
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>NGINX Course</h1>
<h2>Module 1: Introduction to NGINX</h2>
<ul>
<li><a href="01-01-what-is-nginx">What is NGINX?</a></li>
<li><a href="01-02-installing-nginx">Installing NGINX</a></li>
<li><a href="01-03-basic-nginx-configuration">Basic NGINX Configuration</a></li>
<li><a href="01-04-starting-stopping-nginx">Starting and Stopping NGINX</a></li>
</ul>
<h2>Module 2: NGINX as a Web Server</h2>
<ul>
<li><a href="02-01-serving-static-content">Serving Static Content</a></li>
<li><a href="02-02-directory-listings">Directory Listings</a></li>
<li><a href="02-03-custom-error-pages">Custom Error Pages</a></li>
<li><a href="02-04-logging-log-formats">Logging and Log Formats</a></li>
</ul>
<h2>Module 3: NGINX as a Reverse Proxy</h2>
<ul>
<li><a href="03-01-introduction-reverse-proxy">Introduction to Reverse Proxy</a></li>
<li><a href="03-02-configuring-reverse-proxy">Configuring a Reverse Proxy</a></li>
<li><a href="03-03-load-balancing">Load Balancing</a></li>
<li><a href="03-04-health-checks">Health Checks</a></li>
</ul>
<h2>Module 4: Security and Optimization</h2>
<ul>
<li><a href="04-01-basic-security-practices">Basic Security Practices</a></li>
<li><a href="04-02-rate-limiting">Rate Limiting</a></li>
<li><a href="04-03-ssl-tls-configuration">SSL/TLS Configuration</a></li>
<li><a href="04-04-caching">Caching</a></li>
</ul>
<h2>Module 5: Advanced NGINX Features</h2>
<ul>
<li><a href="05-01-nginx-modules">NGINX Modules</a></li>
<li><a href="05-02-using-nginx-docker">Using NGINX with Docker</a></li>
<li><a href="05-03-nginx-http2">NGINX and HTTP/2</a></li>
<li><a href="05-04-nginx-grpc">NGINX and gRPC</a></li>
</ul>
<h2>Module 6: Monitoring and Troubleshooting</h2>
<ul>
<li><a href="06-01-monitoring-nginx">Monitoring NGINX</a></li>
<li><a href="06-02-common-issues-solutions">Common Issues and Solutions</a></li>
<li><a href="06-03-performance-tuning">Performance Tuning</a></li>
<li><a href="06-04-debugging-nginx">Debugging NGINX</a></li>
</ul>
<h2>Module 7: NGINX Plus</h2>
<ul>
<li><a href="07-01-introduction-nginx-plus">Introduction to NGINX Plus</a></li>
<li><a href="07-02-advanced-load-balancing">Advanced Load Balancing</a></li>
<li><a href="07-03-application-health-monitoring">Application Health Monitoring</a></li>
<li><a href="07-04-dynamic-configuration">Dynamic Configuration</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
