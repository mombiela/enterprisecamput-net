<!DOCTYPE html>
<html lang="en">
<head>
    <title> Load Balancing </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/nginx/03-03-load-balancing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/nginx/03-03-load-balancing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/nginx/03-03-load-balancing" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.1ab297bfa4.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "tech-tools";
  		var MOD_NAME = "nginx";
  		var TEMA_NAME = "3-3";
  		var TYPE = "mod";
  		var PATH = "mod/nginx/03-03-load-balancing";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.8d8afe898f.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/nginx/03-03-load-balancing" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/nginx/03-03-load-balancing" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="nginx">
		<a  href="#" class="text-secondary d-none" data-read-mod="nginx" data-read-unit="3-3" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="nginx" data-unread-unit="3-3" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='03-02-configuring-reverse-proxy' title="Configuring a Reverse Proxy" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='03-02-configuring-reverse-proxy' title="Configuring a Reverse Proxy" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Load Balancing</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='03-04-health-checks' title="Health Checks" class="py-2 px-3 btn btn-primary"
				data-read-mod="nginx" data-read-unit="3-3">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='03-04-health-checks' title="Health Checks" class="py-2 px-3 btn btn-primary" 
				data-read-mod="nginx" data-read-unit="3-3">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Load balancing is a critical feature in NGINX that helps distribute incoming network traffic across multiple servers. This ensures no single server becomes overwhelmed, improving the overall performance and reliability of your web applications. In this section, we will cover the basics of load balancing, different load balancing methods, and how to configure load balancing in NGINX.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ol>
<li><strong>Load Balancing</strong>: The process of distributing network traffic across multiple servers.</li>
<li><strong>Upstream Servers</strong>: The backend servers that handle the actual processing of requests.</li>
<li><strong>Load Balancing Methods</strong>: Different algorithms used to distribute traffic, such as round-robin, least connections, and IP hash.</li>
</ol>
</div><h2>Load Balancing Methods</h2>
<div class='content'><p>NGINX supports several load balancing methods:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Round Robin</td>
<td>Distributes requests evenly across all servers.</td>
</tr>
<tr>
<td>Least Connections</td>
<td>Sends requests to the server with the fewest active connections.</td>
</tr>
<tr>
<td>IP Hash</td>
<td>Distributes requests based on the client's IP address, ensuring session persistence.</td>
</tr>
</tbody>
</table>
</div><h2>Configuring Load Balancing in NGINX</h2>
<div class='content'></div><h3>Step 1: Define Upstream Servers</h3>
<div class='content'><p>First, you need to define the upstream servers in your NGINX configuration file. This is done using the <code>upstream</code> directive.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICB1cHN0cmVhbSBiYWNrZW5kIHsKICAgICAgICBzZXJ2ZXIgYmFja2VuZDEuZXhhbXBsZS5jb207CiAgICAgICAgc2VydmVyIGJhY2tlbmQyLmV4YW1wbGUuY29tOwogICAgICAgIHNlcnZlciBiYWNrZW5kMy5leGFtcGxlLmNvbTsKICAgIH0KCiAgICBzZXJ2ZXIgewogICAgICAgIGxpc3RlbiA4MDsKCiAgICAgICAgbG9jYXRpb24gLyB7CiAgICAgICAgICAgIHByb3h5X3Bhc3MgaHR0cDovL2JhY2tlbmQ7CiAgICAgICAgfQogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    upstream backend {
        server backend1.example.com;
        server backend2.example.com;
        server backend3.example.com;
    }

    server {
        listen 80;

        location / {
            proxy_pass http://backend;
        }
    }
}</pre></div><div class='content'></div><h3>Step 2: Choose a Load Balancing Method</h3>
<div class='content'><p>You can specify the load balancing method by adding a parameter to the <code>upstream</code> directive.</p>
<h4>Round Robin (default)</h4>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXBzdHJlYW0gYmFja2VuZCB7CiAgICBzZXJ2ZXIgYmFja2VuZDEuZXhhbXBsZS5jb207CiAgICBzZXJ2ZXIgYmFja2VuZDIuZXhhbXBsZS5jb207CiAgICBzZXJ2ZXIgYmFja2VuZDMuZXhhbXBsZS5jb207Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>upstream backend {
    server backend1.example.com;
    server backend2.example.com;
    server backend3.example.com;
}</pre></div><div class='content'><h4>Least Connections</h4>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXBzdHJlYW0gYmFja2VuZCB7CiAgICBsZWFzdF9jb25uOwogICAgc2VydmVyIGJhY2tlbmQxLmV4YW1wbGUuY29tOwogICAgc2VydmVyIGJhY2tlbmQyLmV4YW1wbGUuY29tOwogICAgc2VydmVyIGJhY2tlbmQzLmV4YW1wbGUuY29tOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>upstream backend {
    least_conn;
    server backend1.example.com;
    server backend2.example.com;
    server backend3.example.com;
}</pre></div><div class='content'><h4>IP Hash</h4>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXBzdHJlYW0gYmFja2VuZCB7CiAgICBpcF9oYXNoOwogICAgc2VydmVyIGJhY2tlbmQxLmV4YW1wbGUuY29tOwogICAgc2VydmVyIGJhY2tlbmQyLmV4YW1wbGUuY29tOwogICAgc2VydmVyIGJhY2tlbmQzLmV4YW1wbGUuY29tOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>upstream backend {
    ip_hash;
    server backend1.example.com;
    server backend2.example.com;
    server backend3.example.com;
}</pre></div><div class='content'></div><h3>Step 3: Configure the Proxy Pass</h3>
<div class='content'><p>In the server block, use the <code>proxy_pass</code> directive to forward requests to the upstream group.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmVyIHsKICAgIGxpc3RlbiA4MDsKCiAgICBsb2NhdGlvbiAvIHsKICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly9iYWNrZW5kOwogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>server {
    listen 80;

    location / {
        proxy_pass http://backend;
    }
}</pre></div><div class='content'></div><h2>Practical Example</h2>
<div class='content'><p>Let's create a practical example where we configure NGINX to load balance traffic between three backend servers using the least connections method.</p>
</div><h3>Configuration File</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICB1cHN0cmVhbSBiYWNrZW5kIHsKICAgICAgICBsZWFzdF9jb25uOwogICAgICAgIHNlcnZlciBiYWNrZW5kMS5leGFtcGxlLmNvbTsKICAgICAgICBzZXJ2ZXIgYmFja2VuZDIuZXhhbXBsZS5jb207CiAgICAgICAgc2VydmVyIGJhY2tlbmQzLmV4YW1wbGUuY29tOwogICAgfQoKICAgIHNlcnZlciB7CiAgICAgICAgbGlzdGVuIDgwOwoKICAgICAgICBsb2NhdGlvbiAvIHsKICAgICAgICAgICAgcHJveHlfcGFzcyBodHRwOi8vYmFja2VuZDsKICAgICAgICB9CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    upstream backend {
        least_conn;
        server backend1.example.com;
        server backend2.example.com;
        server backend3.example.com;
    }

    server {
        listen 80;

        location / {
            proxy_pass http://backend;
        }
    }
}</pre></div><div class='content'></div><h3>Explanation</h3>
<div class='content'><ol>
<li><strong>Upstream Block</strong>: Defines the backend servers and specifies the <code>least_conn</code> method for load balancing.</li>
<li><strong>Server Block</strong>: Listens on port 80 and forwards all incoming requests to the <code>backend</code> upstream group.</li>
</ol>
</div><h2>Exercises</h2>
<div class='content'></div><h3>Exercise 1: Configure Round Robin Load Balancing</h3>
<div class='content'><ol>
<li>Define an upstream group with three servers: <code>server1.example.com</code>, <code>server2.example.com</code>, and <code>server3.example.com</code>.</li>
<li>Use the round-robin method (default) to distribute traffic.</li>
<li>Forward all incoming requests to the upstream group.</li>
</ol>
<p><strong>Solution:</strong></p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICB1cHN0cmVhbSBiYWNrZW5kIHsKICAgICAgICBzZXJ2ZXIgc2VydmVyMS5leGFtcGxlLmNvbTsKICAgICAgICBzZXJ2ZXIgc2VydmVyMi5leGFtcGxlLmNvbTsKICAgICAgICBzZXJ2ZXIgc2VydmVyMy5leGFtcGxlLmNvbTsKICAgIH0KCiAgICBzZXJ2ZXIgewogICAgICAgIGxpc3RlbiA4MDsKCiAgICAgICAgbG9jYXRpb24gLyB7CiAgICAgICAgICAgIHByb3h5X3Bhc3MgaHR0cDovL2JhY2tlbmQ7CiAgICAgICAgfQogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    upstream backend {
        server server1.example.com;
        server server2.example.com;
        server server3.example.com;
    }

    server {
        listen 80;

        location / {
            proxy_pass http://backend;
        }
    }
}</pre></div><div class='content'></div><h3>Exercise 2: Configure IP Hash Load Balancing</h3>
<div class='content'><ol>
<li>Define an upstream group with three servers: <code>app1.example.com</code>, <code>app2.example.com</code>, and <code>app3.example.com</code>.</li>
<li>Use the IP hash method to distribute traffic.</li>
<li>Forward all incoming requests to the upstream group.</li>
</ol>
<p><strong>Solution:</strong></p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICB1cHN0cmVhbSBiYWNrZW5kIHsKICAgICAgICBpcF9oYXNoOwogICAgICAgIHNlcnZlciBhcHAxLmV4YW1wbGUuY29tOwogICAgICAgIHNlcnZlciBhcHAyLmV4YW1wbGUuY29tOwogICAgICAgIHNlcnZlciBhcHAzLmV4YW1wbGUuY29tOwogICAgfQoKICAgIHNlcnZlciB7CiAgICAgICAgbGlzdGVuIDgwOwoKICAgICAgICBsb2NhdGlvbiAvIHsKICAgICAgICAgICAgcHJveHlfcGFzcyBodHRwOi8vYmFja2VuZDsKICAgICAgICB9CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    upstream backend {
        ip_hash;
        server app1.example.com;
        server app2.example.com;
        server app3.example.com;
    }

    server {
        listen 80;

        location / {
            proxy_pass http://backend;
        }
    }
}</pre></div><div class='content'></div><h2>Common Mistakes and Tips</h2>
<div class='content'><ul>
<li><strong>Incorrect Upstream Server Names</strong>: Ensure that the server names or IP addresses in the upstream block are correct and reachable.</li>
<li><strong>Missing Semicolons</strong>: Each directive in the NGINX configuration file must end with a semicolon.</li>
<li><strong>Proxy Pass URL</strong>: Ensure the URL in the <code>proxy_pass</code> directive matches the upstream group name.</li>
</ul>
</div><h2>Conclusion</h2>
<div class='content'><p>In this section, we covered the basics of load balancing in NGINX, different load balancing methods, and how to configure them. Load balancing is essential for distributing traffic efficiently and ensuring high availability and reliability of your web applications. In the next section, we will explore health checks to monitor the status of your backend servers.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='03-02-configuring-reverse-proxy' title="Configuring a Reverse Proxy" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='03-02-configuring-reverse-proxy' title="Configuring a Reverse Proxy" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='03-04-health-checks' title="Health Checks" class="py-2 px-3 btn btn-primary"
				data-read-mod="nginx" data-read-unit="3-3">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='03-04-health-checks' title="Health Checks" class="py-2 px-3 btn btn-primary" 
				data-read-mod="nginx" data-read-unit="3-3">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>NGINX Course</h1>
<h2>Module 1: Introduction to NGINX</h2>
<ul>
<li><a href="01-01-what-is-nginx">What is NGINX?</a></li>
<li><a href="01-02-installing-nginx">Installing NGINX</a></li>
<li><a href="01-03-basic-nginx-configuration">Basic NGINX Configuration</a></li>
<li><a href="01-04-starting-stopping-nginx">Starting and Stopping NGINX</a></li>
</ul>
<h2>Module 2: NGINX as a Web Server</h2>
<ul>
<li><a href="02-01-serving-static-content">Serving Static Content</a></li>
<li><a href="02-02-directory-listings">Directory Listings</a></li>
<li><a href="02-03-custom-error-pages">Custom Error Pages</a></li>
<li><a href="02-04-logging-log-formats">Logging and Log Formats</a></li>
</ul>
<h2>Module 3: NGINX as a Reverse Proxy</h2>
<ul>
<li><a href="03-01-introduction-reverse-proxy">Introduction to Reverse Proxy</a></li>
<li><a href="03-02-configuring-reverse-proxy">Configuring a Reverse Proxy</a></li>
<li><a href="03-03-load-balancing">Load Balancing</a></li>
<li><a href="03-04-health-checks">Health Checks</a></li>
</ul>
<h2>Module 4: Security and Optimization</h2>
<ul>
<li><a href="04-01-basic-security-practices">Basic Security Practices</a></li>
<li><a href="04-02-rate-limiting">Rate Limiting</a></li>
<li><a href="04-03-ssl-tls-configuration">SSL/TLS Configuration</a></li>
<li><a href="04-04-caching">Caching</a></li>
</ul>
<h2>Module 5: Advanced NGINX Features</h2>
<ul>
<li><a href="05-01-nginx-modules">NGINX Modules</a></li>
<li><a href="05-02-using-nginx-docker">Using NGINX with Docker</a></li>
<li><a href="05-03-nginx-http2">NGINX and HTTP/2</a></li>
<li><a href="05-04-nginx-grpc">NGINX and gRPC</a></li>
</ul>
<h2>Module 6: Monitoring and Troubleshooting</h2>
<ul>
<li><a href="06-01-monitoring-nginx">Monitoring NGINX</a></li>
<li><a href="06-02-common-issues-solutions">Common Issues and Solutions</a></li>
<li><a href="06-03-performance-tuning">Performance Tuning</a></li>
<li><a href="06-04-debugging-nginx">Debugging NGINX</a></li>
</ul>
<h2>Module 7: NGINX Plus</h2>
<ul>
<li><a href="07-01-introduction-nginx-plus">Introduction to NGINX Plus</a></li>
<li><a href="07-02-advanced-load-balancing">Advanced Load Balancing</a></li>
<li><a href="07-03-application-health-monitoring">Application Health Monitoring</a></li>
<li><a href="07-04-dynamic-configuration">Dynamic Configuration</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
