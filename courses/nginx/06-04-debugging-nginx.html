<!DOCTYPE html>
<html lang="en">
<head>
    <title> Debugging NGINX </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/nginx/06-04-debugging-nginx" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/nginx/06-04-debugging-nginx" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/nginx/06-04-debugging-nginx" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.1ab297bfa4.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "tech-tools";
  		var MOD_NAME = "nginx";
  		var TEMA_NAME = "6-4";
  		var TYPE = "mod";
  		var PATH = "mod/nginx/06-04-debugging-nginx";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.688defeeef.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/nginx/06-04-debugging-nginx" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/nginx/06-04-debugging-nginx" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="nginx">
		<a  href="#" class="text-secondary d-none" data-read-mod="nginx" data-read-unit="6-4" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="nginx" data-unread-unit="6-4" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='06-03-performance-tuning' title="Performance Tuning" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='06-03-performance-tuning' title="Performance Tuning" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Debugging NGINX</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-01-introduction-nginx-plus' title="Introduction to NGINX Plus" class="py-2 px-3 btn btn-primary"
				data-read-mod="nginx" data-read-unit="6-4">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-01-introduction-nginx-plus' title="Introduction to NGINX Plus" class="py-2 px-3 btn btn-primary" 
				data-read-mod="nginx" data-read-unit="6-4">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Debugging NGINX can be a complex task, but with the right tools and techniques, you can identify and resolve issues efficiently. This section will cover various methods and tools to help you debug NGINX effectively.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ol>
<li><strong>Error Logs</strong>: NGINX maintains error logs that provide detailed information about issues encountered.</li>
<li><strong>Access Logs</strong>: These logs record all requests processed by NGINX, useful for tracking down issues related to client requests.</li>
<li><strong>Debug Logging</strong>: Enabling debug logging can provide more granular details about NGINX's operations.</li>
<li><strong>Configuration Testing</strong>: Before applying changes, testing the configuration can prevent potential issues.</li>
<li><strong>Common Debugging Tools</strong>: Tools like <code>curl</code>, <code>nginx -t</code>, and <code>strace</code> can be invaluable for debugging.</li>
</ol>
</div><h2>Error Logs</h2>
<div class='content'><p>NGINX error logs are the first place to look when something goes wrong. They provide detailed information about errors and warnings.</p>
</div><h3>Configuring Error Logs</h3>
<div class='content'><p>You can configure the error log level in the NGINX configuration file:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXJyb3JfbG9nIC92YXIvbG9nL25naW54L2Vycm9yLmxvZyB3YXJuOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>error_log /var/log/nginx/error.log warn;</pre></div><div class='content'><p>The log levels available are:</p>
<ul>
<li><code>debug</code></li>
<li><code>info</code></li>
<li><code>notice</code></li>
<li><code>warn</code></li>
<li><code>error</code></li>
<li><code>crit</code></li>
<li><code>alert</code></li>
<li><code>emerg</code></li>
</ul>
</div><h3>Example</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXJyb3JfbG9nIC92YXIvbG9nL25naW54L2Vycm9yLmxvZyBlcnJvcjs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>error_log /var/log/nginx/error.log error;</pre></div><div class='content'><p>This configuration will log messages at the <code>error</code> level and above.</p>
</div><h2>Access Logs</h2>
<div class='content'><p>Access logs record all requests processed by NGINX. They can help you understand the traffic patterns and identify issues related to client requests.</p>
</div><h3>Configuring Access Logs</h3>
<div class='content'><p>You can configure the access log format and location in the NGINX configuration file:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9nX2Zvcm1hdCBtYWluICckcmVtb3RlX2FkZHIgLSAkcmVtb3RlX3VzZXIgWyR0aW1lX2xvY2FsXSAiJHJlcXVlc3QiICcKICAgICAgICAgICAgICAgICAgJyRzdGF0dXMgJGJvZHlfYnl0ZXNfc2VudCAiJGh0dHBfcmVmZXJlciIgJwogICAgICAgICAgICAgICAgICAnIiRodHRwX3VzZXJfYWdlbnQiICIkaHR0cF94X2ZvcndhcmRlZF9mb3IiJzsKCmFjY2Vzc19sb2cgL3Zhci9sb2cvbmdpbngvYWNjZXNzLmxvZyBtYWluOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>log_format main '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '
                  '$status $body_bytes_sent &quot;$http_referer&quot; '
                  '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;';

access_log /var/log/nginx/access.log main;</pre></div><div class='content'></div><h3>Example</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9nX2Zvcm1hdCBjdXN0b20gJyRyZW1vdGVfYWRkciAtICRyZW1vdGVfdXNlciBbJHRpbWVfbG9jYWxdICIkcmVxdWVzdCIgJwogICAgICAgICAgICAgICAgICAnJHN0YXR1cyAkYm9keV9ieXRlc19zZW50ICIkaHR0cF9yZWZlcmVyIiAnCiAgICAgICAgICAgICAgICAgICciJGh0dHBfdXNlcl9hZ2VudCIgIiRodHRwX3hfZm9yd2FyZGVkX2ZvciInOwoKYWNjZXNzX2xvZyAvdmFyL2xvZy9uZ2lueC9jdXN0b21fYWNjZXNzLmxvZyBjdXN0b207"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>log_format custom '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '
                  '$status $body_bytes_sent &quot;$http_referer&quot; '
                  '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;';

access_log /var/log/nginx/custom_access.log custom;</pre></div><div class='content'></div><h2>Debug Logging</h2>
<div class='content'><p>Debug logging provides detailed information about NGINX's operations, which can be useful for diagnosing complex issues.</p>
</div><h3>Enabling Debug Logging</h3>
<div class='content'><p>To enable debug logging, you need to set the error log level to <code>debug</code>:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXJyb3JfbG9nIC92YXIvbG9nL25naW54L2Vycm9yLmxvZyBkZWJ1Zzs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>error_log /var/log/nginx/error.log debug;</pre></div><div class='content'></div><h3>Example</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXJyb3JfbG9nIC92YXIvbG9nL25naW54L2Vycm9yLmxvZyBkZWJ1Zzs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>error_log /var/log/nginx/error.log debug;</pre></div><div class='content'></div><h2>Configuration Testing</h2>
<div class='content'><p>Before applying changes to the NGINX configuration, you should test it to ensure there are no syntax errors.</p>
</div><h3>Testing Configuration</h3>
<div class='content'><p>Use the following command to test the NGINX configuration:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmdpbnggLXQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>nginx -t</pre></div><div class='content'></div><h3>Example</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCBzdWRvIG5naW54IC10Cm5naW54OiB0aGUgY29uZmlndXJhdGlvbiBmaWxlIC9ldGMvbmdpbngvbmdpbnguY29uZiBzeW50YXggaXMgb2sKbmdpbng6IGNvbmZpZ3VyYXRpb24gZmlsZSAvZXRjL25naW54L25naW54LmNvbmYgdGVzdCBpcyBzdWNjZXNzZnVs"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ sudo nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful</pre></div><div class='content'></div><h2>Common Debugging Tools</h2>
<div class='content'></div><h3><code>curl</code></h3>
<div class='content'><p><code>curl</code> is a command-line tool for transferring data with URLs. It can be used to test HTTP requests and responses.</p>
</div><h3>Example</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y3VybCAtSSBodHRwOi8vbG9jYWxob3N0"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>curl -I http://localhost</pre></div><div class='content'><p>This command will display the HTTP headers of the response from the server.</p>
</div><h3><code>strace</code></h3>
<div class='content'><p><code>strace</code> is a diagnostic, debugging, and instructional userspace utility for Linux. It is used to monitor the system calls used by a program and the signals it receives.</p>
</div><h3>Example</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RyYWNlIC1wICQocGdyZXAgbmdpbngp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>strace -p $(pgrep nginx)</pre></div><div class='content'><p>This command will attach <code>strace</code> to the NGINX process and display the system calls it makes.</p>
</div><h2>Practical Exercise</h2>
<div class='content'></div><h3>Exercise</h3>
<div class='content'><ol>
<li>Configure NGINX to log errors at the <code>warn</code> level.</li>
<li>Enable access logging with a custom log format.</li>
<li>Enable debug logging.</li>
<li>Test the NGINX configuration.</li>
<li>Use <code>curl</code> to make a request to the NGINX server and check the logs.</li>
</ol>
</div><h3>Solution</h3>
<div class='content'><ol>
<li>
<p>Configure error logging:</p>
<pre><code class="language-nginx">error_log /var/log/nginx/error.log warn;
</code></pre>
</li>
<li>
<p>Configure access logging:</p>
<pre><code class="language-nginx">log_format custom '$remote_addr - $remote_user [$time_local] &quot;$request&quot; '
                  '$status $body_bytes_sent &quot;$http_referer&quot; '
                  '&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;';

access_log /var/log/nginx/custom_access.log custom;
</code></pre>
</li>
<li>
<p>Enable debug logging:</p>
<pre><code class="language-nginx">error_log /var/log/nginx/error.log debug;
</code></pre>
</li>
<li>
<p>Test the configuration:</p>
<pre><code class="language-bash">$ sudo nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
</code></pre>
</li>
<li>
<p>Use <code>curl</code> to make a request:</p>
<pre><code class="language-bash">curl -I http://localhost
</code></pre>
<p>Check the logs:</p>
<pre><code class="language-bash">tail -f /var/log/nginx/error.log
tail -f /var/log/nginx/custom_access.log
</code></pre>
</li>
</ol>
</div><h2>Conclusion</h2>
<div class='content'><p>In this section, we covered various methods and tools for debugging NGINX. By understanding how to configure and interpret error and access logs, enable debug logging, test configurations, and use common debugging tools, you can effectively diagnose and resolve issues with your NGINX server. This knowledge prepares you for more advanced topics and ensures your NGINX server runs smoothly.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='06-03-performance-tuning' title="Performance Tuning" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='06-03-performance-tuning' title="Performance Tuning" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-01-introduction-nginx-plus' title="Introduction to NGINX Plus" class="py-2 px-3 btn btn-primary"
				data-read-mod="nginx" data-read-unit="6-4">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-01-introduction-nginx-plus' title="Introduction to NGINX Plus" class="py-2 px-3 btn btn-primary" 
				data-read-mod="nginx" data-read-unit="6-4">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>NGINX Course</h1>
<h2>Module 1: Introduction to NGINX</h2>
<ul>
<li><a href="01-01-what-is-nginx">What is NGINX?</a></li>
<li><a href="01-02-installing-nginx">Installing NGINX</a></li>
<li><a href="01-03-basic-nginx-configuration">Basic NGINX Configuration</a></li>
<li><a href="01-04-starting-stopping-nginx">Starting and Stopping NGINX</a></li>
</ul>
<h2>Module 2: NGINX as a Web Server</h2>
<ul>
<li><a href="02-01-serving-static-content">Serving Static Content</a></li>
<li><a href="02-02-directory-listings">Directory Listings</a></li>
<li><a href="02-03-custom-error-pages">Custom Error Pages</a></li>
<li><a href="02-04-logging-log-formats">Logging and Log Formats</a></li>
</ul>
<h2>Module 3: NGINX as a Reverse Proxy</h2>
<ul>
<li><a href="03-01-introduction-reverse-proxy">Introduction to Reverse Proxy</a></li>
<li><a href="03-02-configuring-reverse-proxy">Configuring a Reverse Proxy</a></li>
<li><a href="03-03-load-balancing">Load Balancing</a></li>
<li><a href="03-04-health-checks">Health Checks</a></li>
</ul>
<h2>Module 4: Security and Optimization</h2>
<ul>
<li><a href="04-01-basic-security-practices">Basic Security Practices</a></li>
<li><a href="04-02-rate-limiting">Rate Limiting</a></li>
<li><a href="04-03-ssl-tls-configuration">SSL/TLS Configuration</a></li>
<li><a href="04-04-caching">Caching</a></li>
</ul>
<h2>Module 5: Advanced NGINX Features</h2>
<ul>
<li><a href="05-01-nginx-modules">NGINX Modules</a></li>
<li><a href="05-02-using-nginx-docker">Using NGINX with Docker</a></li>
<li><a href="05-03-nginx-http2">NGINX and HTTP/2</a></li>
<li><a href="05-04-nginx-grpc">NGINX and gRPC</a></li>
</ul>
<h2>Module 6: Monitoring and Troubleshooting</h2>
<ul>
<li><a href="06-01-monitoring-nginx">Monitoring NGINX</a></li>
<li><a href="06-02-common-issues-solutions">Common Issues and Solutions</a></li>
<li><a href="06-03-performance-tuning">Performance Tuning</a></li>
<li><a href="06-04-debugging-nginx">Debugging NGINX</a></li>
</ul>
<h2>Module 7: NGINX Plus</h2>
<ul>
<li><a href="07-01-introduction-nginx-plus">Introduction to NGINX Plus</a></li>
<li><a href="07-02-advanced-load-balancing">Advanced Load Balancing</a></li>
<li><a href="07-03-application-health-monitoring">Application Health Monitoring</a></li>
<li><a href="07-04-dynamic-configuration">Dynamic Configuration</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
