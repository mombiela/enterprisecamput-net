<!DOCTYPE html>
<html lang="en">
<head>
    <title> Case Studies </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/cl-lenguaje-control-as400/08-04-case-studies" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/cl-llenguatge-control-as400/08-04-case-studies" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/cl-control-language-as400/08-04-case-studies" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.1ab297bfa4.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "languages";
  		var MOD_NAME = "cl";
  		var TEMA_NAME = "8-4";
  		var TYPE = "mod";
  		var PATH = "mod/cl/08-04-case-studies";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.8d8afe898f.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/cl-lenguaje-control-as400/08-04-case-studies" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/cl-llenguatge-control-as400/08-04-case-studies" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="cl">
		<a  href="#" class="text-secondary d-none" data-read-mod="cl" data-read-unit="8-4" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="cl" data-unread-unit="8-4" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='08-03-data-integration' title="Data Integration" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='08-03-data-integration' title="Data Integration" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Case Studies</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='09-01-project-overview' title="Project Overview" class="py-2 px-3 btn btn-primary"
				data-read-mod="cl" data-read-unit="8-4">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='09-01-project-overview' title="Project Overview" class="py-2 px-3 btn btn-primary" 
				data-read-mod="cl" data-read-unit="8-4">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore real-world applications of Control Language (CL) through detailed case studies. These case studies will help you understand how CL can be used to solve practical problems and automate tasks in various scenarios. Each case study will include a problem description, the CL solution, and a step-by-step explanation of the code.</p>
</div><h2>Case Study 1: Automating Backup Processes</h2>
<div class='content'></div><h3>Problem Description</h3>
<div class='content'><p>A company needs to automate its daily backup process to ensure that critical data is backed up every night without manual intervention. The backup process involves copying files from a production directory to a backup directory and logging the operation.</p>
</div><h3>CL Solution</h3>
<div class='content'><p>We will write a CL program that:</p>
<ol>
<li>Copies files from the production directory to the backup directory.</li>
<li>Logs the operation with a timestamp.</li>
</ol>
</div><h3>Code Example</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0wgVkFSKCZUSU1FU1RBTVApIFRZUEUoKkNIQVIpIExFTigyMCkKICAgIERDTCBWQVIoJkxPR0ZJTEUpIFRZUEUoKkNIQVIpIExFTig1MCkgVkFMVUUoJy9sb2dzL2JhY2t1cF9sb2cudHh0JykKICAgIERDTCBWQVIoJlNSQ19ESVIpIFRZUEUoKkNIQVIpIExFTig1MCkgVkFMVUUoJy9wcm9kX2RhdGEvJykKICAgIERDTCBWQVIoJkRFU1RfRElSKSBUWVBFKCpDSEFSKSBMRU4oNTApIFZBTFVFKCcvYmFja3VwX2RhdGEvJykKCiAgICAvKiBHZXQgY3VycmVudCB0aW1lc3RhbXAgKi8KICAgIFJUVlNZU1ZBTCBTWVNWQUwoUURBVEVUSU1FKSBSVE5WQVIoJlRJTUVTVEFNUCkKCiAgICAvKiBDb3B5IGZpbGVzIGZyb20gcHJvZHVjdGlvbiB0byBiYWNrdXAgZGlyZWN0b3J5ICovCiAgICBDUFkgT0JKKCZTUkNfRElSKSBUT0RJUigmREVTVF9ESVIpIFJFUExBQ0UoKllFUykKCiAgICAvKiBMb2cgdGhlIG9wZXJhdGlvbiAqLwogICAgQUREUEZNIEZJTEUoJkxPR0ZJTEUpIE1CUigqRklSU1QpCiAgICBXUktNQlJQRE0gRklMRSgmTE9HRklMRSkgTUJSKCpGSVJTVCkgT1BUSU9OKCpBREQpIFRFWFQoJ0JhY2t1cCBjb21wbGV0ZWQgYXQgJyAqQ0FUICZUSU1FU1RBTVApCgpFTkRQR00="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCL VAR(&amp;TIMESTAMP) TYPE(*CHAR) LEN(20)
    DCL VAR(&amp;LOGFILE) TYPE(*CHAR) LEN(50) VALUE('/logs/backup_log.txt')
    DCL VAR(&amp;SRC_DIR) TYPE(*CHAR) LEN(50) VALUE('/prod_data/')
    DCL VAR(&amp;DEST_DIR) TYPE(*CHAR) LEN(50) VALUE('/backup_data/')

    /* Get current timestamp */
    RTVSYSVAL SYSVAL(QDATETIME) RTNVAR(&amp;TIMESTAMP)

    /* Copy files from production to backup directory */
    CPY OBJ(&amp;SRC_DIR) TODIR(&amp;DEST_DIR) REPLACE(*YES)

    /* Log the operation */
    ADDPFM FILE(&amp;LOGFILE) MBR(*FIRST)
    WRKMBRPDM FILE(&amp;LOGFILE) MBR(*FIRST) OPTION(*ADD) TEXT('Backup completed at ' *CAT &amp;TIMESTAMP)

ENDPGM</pre></div><div class='content'></div><h3>Explanation</h3>
<div class='content'><ol>
<li>
<p><strong>Variable Declarations</strong>:</p>
<ul>
<li><code>&amp;TIMESTAMP</code>: Stores the current date and time.</li>
<li><code>&amp;LOGFILE</code>: Path to the log file.</li>
<li><code>&amp;SRC_DIR</code>: Path to the source directory (production data).</li>
<li><code>&amp;DEST_DIR</code>: Path to the destination directory (backup data).</li>
</ul>
</li>
<li>
<p><strong>Retrieve Current Timestamp</strong>:</p>
<ul>
<li><code>RTVSYSVAL SYSVAL(QDATETIME) RTNVAR(&amp;TIMESTAMP)</code>: Retrieves the current system date and time and stores it in <code>&amp;TIMESTAMP</code>.</li>
</ul>
</li>
<li>
<p><strong>Copy Files</strong>:</p>
<ul>
<li><code>CPY OBJ(&amp;SRC_DIR) TODIR(&amp;DEST_DIR) REPLACE(*YES)</code>: Copies all files from the source directory to the destination directory, replacing any existing files.</li>
</ul>
</li>
<li>
<p><strong>Log the Operation</strong>:</p>
<ul>
<li><code>ADDPFM FILE(&amp;LOGFILE) MBR(*FIRST)</code>: Adds a member to the log file if it doesn't already exist.</li>
<li><code>WRKMBRPDM FILE(&amp;LOGFILE) MBR(*FIRST) OPTION(*ADD) TEXT('Backup completed at ' *CAT &amp;TIMESTAMP)</code>: Writes a log entry with the timestamp indicating the backup completion.</li>
</ul>
</li>
</ol>
</div><h3>Practical Exercise</h3>
<div class='content'><p><strong>Task</strong>: Modify the above CL program to include error handling. If the copy operation fails, log an error message instead of a success message.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0wgVkFSKCZUSU1FU1RBTVApIFRZUEUoKkNIQVIpIExFTigyMCkKICAgIERDTCBWQVIoJkxPR0ZJTEUpIFRZUEUoKkNIQVIpIExFTig1MCkgVkFMVUUoJy9sb2dzL2JhY2t1cF9sb2cudHh0JykKICAgIERDTCBWQVIoJlNSQ19ESVIpIFRZUEUoKkNIQVIpIExFTig1MCkgVkFMVUUoJy9wcm9kX2RhdGEvJykKICAgIERDTCBWQVIoJkRFU1RfRElSKSBUWVBFKCpDSEFSKSBMRU4oNTApIFZBTFVFKCcvYmFja3VwX2RhdGEvJykKICAgIERDTCBWQVIoJk1TRykgVFlQRSgqQ0hBUikgTEVOKDEwMCkKCiAgICAvKiBHZXQgY3VycmVudCB0aW1lc3RhbXAgKi8KICAgIFJUVlNZU1ZBTCBTWVNWQUwoUURBVEVUSU1FKSBSVE5WQVIoJlRJTUVTVEFNUCkKCiAgICAvKiBDb3B5IGZpbGVzIGZyb20gcHJvZHVjdGlvbiB0byBiYWNrdXAgZGlyZWN0b3J5ICovCiAgICBDUFkgT0JKKCZTUkNfRElSKSBUT0RJUigmREVTVF9ESVIpIFJFUExBQ0UoKllFUykKICAgIE1PTk1TRyBNU0dJRChDUEYwMDAwKSBFWEVDKERPKQogICAgICAgIENIR1ZBUiBWQVIoJk1TRykgVkFMVUUoJ0JhY2t1cCBmYWlsZWQgYXQgJyAqQ0FUICZUSU1FU1RBTVApCiAgICBFTkRETwogICAgRUxTRSBETwogICAgICAgIENIR1ZBUiBWQVIoJk1TRykgVkFMVUUoJ0JhY2t1cCBjb21wbGV0ZWQgYXQgJyAqQ0FUICZUSU1FU1RBTVApCiAgICBFTkRETwoKICAgIC8qIExvZyB0aGUgb3BlcmF0aW9uICovCiAgICBBRERQRk0gRklMRSgmTE9HRklMRSkgTUJSKCpGSVJTVCkKICAgIFdSS01CUlBETSBGSUxFKCZMT0dGSUxFKSBNQlIoKkZJUlNUKSBPUFRJT04oKkFERCkgVEVYVCgmTVNHKQoKRU5EUEdN"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCL VAR(&amp;TIMESTAMP) TYPE(*CHAR) LEN(20)
    DCL VAR(&amp;LOGFILE) TYPE(*CHAR) LEN(50) VALUE('/logs/backup_log.txt')
    DCL VAR(&amp;SRC_DIR) TYPE(*CHAR) LEN(50) VALUE('/prod_data/')
    DCL VAR(&amp;DEST_DIR) TYPE(*CHAR) LEN(50) VALUE('/backup_data/')
    DCL VAR(&amp;MSG) TYPE(*CHAR) LEN(100)

    /* Get current timestamp */
    RTVSYSVAL SYSVAL(QDATETIME) RTNVAR(&amp;TIMESTAMP)

    /* Copy files from production to backup directory */
    CPY OBJ(&amp;SRC_DIR) TODIR(&amp;DEST_DIR) REPLACE(*YES)
    MONMSG MSGID(CPF0000) EXEC(DO)
        CHGVAR VAR(&amp;MSG) VALUE('Backup failed at ' *CAT &amp;TIMESTAMP)
    ENDDO
    ELSE DO
        CHGVAR VAR(&amp;MSG) VALUE('Backup completed at ' *CAT &amp;TIMESTAMP)
    ENDDO

    /* Log the operation */
    ADDPFM FILE(&amp;LOGFILE) MBR(*FIRST)
    WRKMBRPDM FILE(&amp;LOGFILE) MBR(*FIRST) OPTION(*ADD) TEXT(&amp;MSG)

ENDPGM</pre></div><div class='content'></div><h3>Explanation of Changes</h3>
<div class='content'><ol>
<li><strong>Error Handling</strong>:
<ul>
<li><code>MONMSG MSGID(CPF0000) EXEC(DO)</code>: Monitors for any error messages during the copy operation.</li>
<li><code>CHGVAR VAR(&amp;MSG) VALUE('Backup failed at ' *CAT &amp;TIMESTAMP)</code>: Sets the log message to indicate failure if an error occurs.</li>
<li><code>ELSE DO</code>: If no error occurs, sets the log message to indicate success.</li>
</ul>
</li>
</ol>
</div><h2>Case Study 2: Automated Report Generation</h2>
<div class='content'></div><h3>Problem Description</h3>
<div class='content'><p>A company needs to generate a daily sales report and email it to the management team. The report should be generated from a database and saved as a text file.</p>
</div><h3>CL Solution</h3>
<div class='content'><p>We will write a CL program that:</p>
<ol>
<li>Generates the sales report from the database.</li>
<li>Saves the report as a text file.</li>
<li>Emails the report to the management team.</li>
</ol>
</div><h3>Code Example</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0wgVkFSKCZUSU1FU1RBTVApIFRZUEUoKkNIQVIpIExFTigyMCkKICAgIERDTCBWQVIoJlJFUE9SVEZJTEUpIFRZUEUoKkNIQVIpIExFTig1MCkgVkFMVUUoJy9yZXBvcnRzL3NhbGVzX3JlcG9ydC50eHQnKQogICAgRENMIFZBUigmRU1BSUwpIFRZUEUoKkNIQVIpIExFTig1MCkgVkFMVUUoJ21hbmFnZW1lbnRAY29tcGFueS5jb20nKQoKICAgIC8qIEdldCBjdXJyZW50IHRpbWVzdGFtcCAqLwogICAgUlRWU1lTVkFMIFNZU1ZBTChRREFURVRJTUUpIFJUTlZBUigmVElNRVNUQU1QKQoKICAgIC8qIEdlbmVyYXRlIHNhbGVzIHJlcG9ydCAqLwogICAgUlVOU1FMIFNRTCgnU0VMRUNUICogRlJPTSBzYWxlcyBXSEVSRSBkYXRlID0gQ1VSUkVOVF9EQVRFJykgT1VUUFVUKCpPVVRGSUxFKSBPVVRGSUxFKCZSRVBPUlRGSUxFKQoKICAgIC8qIEVtYWlsIHRoZSByZXBvcnQgKi8KICAgIFNORERTVCBUWVBFKCpET0MpIFRPSU5UTkVUKCgmRU1BSUwpKSBEU1REKCdEYWlseSBTYWxlcyBSZXBvcnQnKSBNU0coJ1BsZWFzZSBmaW5kIHRoZSBhdHRhY2hlZCBzYWxlcyByZXBvcnQuJykgRE9DKCZSRVBPUlRGSUxFKQoKRU5EUEdN"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCL VAR(&amp;TIMESTAMP) TYPE(*CHAR) LEN(20)
    DCL VAR(&amp;REPORTFILE) TYPE(*CHAR) LEN(50) VALUE('/reports/sales_report.txt')
    DCL VAR(&amp;EMAIL) TYPE(*CHAR) LEN(50) VALUE('management@company.com')

    /* Get current timestamp */
    RTVSYSVAL SYSVAL(QDATETIME) RTNVAR(&amp;TIMESTAMP)

    /* Generate sales report */
    RUNSQL SQL('SELECT * FROM sales WHERE date = CURRENT_DATE') OUTPUT(*OUTFILE) OUTFILE(&amp;REPORTFILE)

    /* Email the report */
    SNDDST TYPE(*DOC) TOINTNET((&amp;EMAIL)) DSTD('Daily Sales Report') MSG('Please find the attached sales report.') DOC(&amp;REPORTFILE)

ENDPGM</pre></div><div class='content'></div><h3>Explanation</h3>
<div class='content'><ol>
<li>
<p><strong>Variable Declarations</strong>:</p>
<ul>
<li><code>&amp;TIMESTAMP</code>: Stores the current date and time.</li>
<li><code>&amp;REPORTFILE</code>: Path to the report file.</li>
<li><code>&amp;EMAIL</code>: Email address of the management team.</li>
</ul>
</li>
<li>
<p><strong>Retrieve Current Timestamp</strong>:</p>
<ul>
<li><code>RTVSYSVAL SYSVAL(QDATETIME) RTNVAR(&amp;TIMESTAMP)</code>: Retrieves the current system date and time and stores it in <code>&amp;TIMESTAMP</code>.</li>
</ul>
</li>
<li>
<p><strong>Generate Sales Report</strong>:</p>
<ul>
<li><code>RUNSQL SQL('SELECT * FROM sales WHERE date = CURRENT_DATE') OUTPUT(*OUTFILE) OUTFILE(&amp;REPORTFILE)</code>: Runs an SQL query to select sales data for the current date and saves it to the report file.</li>
</ul>
</li>
<li>
<p><strong>Email the Report</strong>:</p>
<ul>
<li><code>SNDDST TYPE(*DOC) TOINTNET((&amp;EMAIL)) DSTD('Daily Sales Report') MSG('Please find the attached sales report.') DOC(&amp;REPORTFILE)</code>: Sends the report file as an email attachment to the management team.</li>
</ul>
</li>
</ol>
</div><h3>Practical Exercise</h3>
<div class='content'><p><strong>Task</strong>: Modify the above CL program to include error handling for the SQL query and email sending operations.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0wgVkFSKCZUSU1FU1RBTVApIFRZUEUoKkNIQVIpIExFTigyMCkKICAgIERDTCBWQVIoJlJFUE9SVEZJTEUpIFRZUEUoKkNIQVIpIExFTig1MCkgVkFMVUUoJy9yZXBvcnRzL3NhbGVzX3JlcG9ydC50eHQnKQogICAgRENMIFZBUigmRU1BSUwpIFRZUEUoKkNIQVIpIExFTig1MCkgVkFMVUUoJ21hbmFnZW1lbnRAY29tcGFueS5jb20nKQogICAgRENMIFZBUigmTVNHKSBUWVBFKCpDSEFSKSBMRU4oMTAwKQoKICAgIC8qIEdldCBjdXJyZW50IHRpbWVzdGFtcCAqLwogICAgUlRWU1lTVkFMIFNZU1ZBTChRREFURVRJTUUpIFJUTlZBUigmVElNRVNUQU1QKQoKICAgIC8qIEdlbmVyYXRlIHNhbGVzIHJlcG9ydCAqLwogICAgUlVOU1FMIFNRTCgnU0VMRUNUICogRlJPTSBzYWxlcyBXSEVSRSBkYXRlID0gQ1VSUkVOVF9EQVRFJykgT1VUUFVUKCpPVVRGSUxFKSBPVVRGSUxFKCZSRVBPUlRGSUxFKQogICAgTU9OTVNHIE1TR0lEKFNRTDAwMDApIEVYRUMoRE8pCiAgICAgICAgQ0hHVkFSIFZBUigmTVNHKSBWQUxVRSgnUmVwb3J0IGdlbmVyYXRpb24gZmFpbGVkIGF0ICcgKkNBVCAmVElNRVNUQU1QKQogICAgICAgIEdPVE8gQ01ETEJMKEVORCkKICAgIEVORERPCgogICAgLyogRW1haWwgdGhlIHJlcG9ydCAqLwogICAgU05ERFNUIFRZUEUoKkRPQykgVE9JTlRORVQoKCZFTUFJTCkpIERTVEQoJ0RhaWx5IFNhbGVzIFJlcG9ydCcpIE1TRygnUGxlYXNlIGZpbmQgdGhlIGF0dGFjaGVkIHNhbGVzIHJlcG9ydC4nKSBET0MoJlJFUE9SVEZJTEUpCiAgICBNT05NU0cgTVNHSUQoQ1BGMDAwMCkgRVhFQyhETykKICAgICAgICBDSEdWQVIgVkFSKCZNU0cpIFZBTFVFKCdFbWFpbCBzZW5kaW5nIGZhaWxlZCBhdCAnICpDQVQgJlRJTUVTVEFNUCkKICAgICAgICBHT1RPIENNRExCTChFTkQpCiAgICBFTkRETwoKICAgIENIR1ZBUiBWQVIoJk1TRykgVkFMVUUoJ1JlcG9ydCBnZW5lcmF0ZWQgYW5kIGVtYWlsZWQgc3VjY2Vzc2Z1bGx5IGF0ICcgKkNBVCAmVElNRVNUQU1QKQoKRU5EOiAvKiBMb2cgdGhlIG9wZXJhdGlvbiAqLwogICAgQUREUEZNIEZJTEUoJy9sb2dzL3JlcG9ydF9sb2cudHh0JykgTUJSKCpGSVJTVCkKICAgIFdSS01CUlBETSBGSUxFKCcvbG9ncy9yZXBvcnRfbG9nLnR4dCcpIE1CUigqRklSU1QpIE9QVElPTigqQUREKSBURVhUKCZNU0cpCgpFTkRQR00="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCL VAR(&amp;TIMESTAMP) TYPE(*CHAR) LEN(20)
    DCL VAR(&amp;REPORTFILE) TYPE(*CHAR) LEN(50) VALUE('/reports/sales_report.txt')
    DCL VAR(&amp;EMAIL) TYPE(*CHAR) LEN(50) VALUE('management@company.com')
    DCL VAR(&amp;MSG) TYPE(*CHAR) LEN(100)

    /* Get current timestamp */
    RTVSYSVAL SYSVAL(QDATETIME) RTNVAR(&amp;TIMESTAMP)

    /* Generate sales report */
    RUNSQL SQL('SELECT * FROM sales WHERE date = CURRENT_DATE') OUTPUT(*OUTFILE) OUTFILE(&amp;REPORTFILE)
    MONMSG MSGID(SQL0000) EXEC(DO)
        CHGVAR VAR(&amp;MSG) VALUE('Report generation failed at ' *CAT &amp;TIMESTAMP)
        GOTO CMDLBL(END)
    ENDDO

    /* Email the report */
    SNDDST TYPE(*DOC) TOINTNET((&amp;EMAIL)) DSTD('Daily Sales Report') MSG('Please find the attached sales report.') DOC(&amp;REPORTFILE)
    MONMSG MSGID(CPF0000) EXEC(DO)
        CHGVAR VAR(&amp;MSG) VALUE('Email sending failed at ' *CAT &amp;TIMESTAMP)
        GOTO CMDLBL(END)
    ENDDO

    CHGVAR VAR(&amp;MSG) VALUE('Report generated and emailed successfully at ' *CAT &amp;TIMESTAMP)

END: /* Log the operation */
    ADDPFM FILE('/logs/report_log.txt') MBR(*FIRST)
    WRKMBRPDM FILE('/logs/report_log.txt') MBR(*FIRST) OPTION(*ADD) TEXT(&amp;MSG)

ENDPGM</pre></div><div class='content'></div><h3>Explanation of Changes</h3>
<div class='content'><ol>
<li>
<p><strong>Error Handling for SQL Query</strong>:</p>
<ul>
<li><code>MONMSG MSGID(SQL0000) EXEC(DO)</code>: Monitors for any SQL errors during the report generation.</li>
<li><code>CHGVAR VAR(&amp;MSG) VALUE('Report generation failed at ' *CAT &amp;TIMESTAMP)</code>: Sets the log message to indicate failure if an error occurs.</li>
<li><code>GOTO CMDLBL(END)</code>: Skips the email sending step if report generation fails.</li>
</ul>
</li>
<li>
<p><strong>Error Handling for Email Sending</strong>:</p>
<ul>
<li><code>MONMSG MSGID(CPF0000) EXEC(DO)</code>: Monitors for any errors during the email sending operation.</li>
<li><code>CHGVAR VAR(&amp;MSG) VALUE('Email sending failed at ' *CAT &amp;TIMESTAMP)</code>: Sets the log message to indicate failure if an error occurs.</li>
<li><code>GOTO CMDLBL(END)</code>: Skips the success message if email sending fails.</li>
</ul>
</li>
<li>
<p><strong>Success Message</strong>:</p>
<ul>
<li><code>CHGVAR VAR(&amp;MSG) VALUE('Report generated and emailed successfully at ' *CAT &amp;TIMESTAMP)</code>: Sets the log message to indicate success if no errors occur.</li>
</ul>
</li>
</ol>
</div><h2>Conclusion</h2>
<div class='content'><p>These case studies demonstrate how CL can be used to automate common tasks such as backups and report generation. By incorporating error handling, you can make your CL programs more robust and reliable. Practice these examples and try to create your own CL programs to solve real-world problems.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='08-03-data-integration' title="Data Integration" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='08-03-data-integration' title="Data Integration" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='09-01-project-overview' title="Project Overview" class="py-2 px-3 btn btn-primary"
				data-read-mod="cl" data-read-unit="8-4">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='09-01-project-overview' title="Project Overview" class="py-2 px-3 btn btn-primary" 
				data-read-mod="cl" data-read-unit="8-4">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>CL (Control Language) Course</h1>
<h2>Module 1: Introduction to CL</h2>
<ul>
<li><a href="01-01-what-is-cl">What is Control Language?</a></li>
<li><a href="01-02-setting-up-environment">Setting Up Your Environment</a></li>
<li><a href="01-03-basic-syntax-structure">Basic Syntax and Structure</a></li>
<li><a href="01-04-writing-first-cl-program">Writing Your First CL Program</a></li>
</ul>
<h2>Module 2: Basic CL Commands</h2>
<ul>
<li><a href="02-01-introduction-cl-commands">Introduction to CL Commands</a></li>
<li><a href="02-02-file-management-commands">File Management Commands</a></li>
<li><a href="02-03-job-management-commands">Job Management Commands</a></li>
<li><a href="02-04-system-management-commands">System Management Commands</a></li>
</ul>
<h2>Module 3: Variables and Expressions</h2>
<ul>
<li><a href="03-01-understanding-variables">Understanding Variables</a></li>
<li><a href="03-02-defining-using-variables">Defining and Using Variables</a></li>
<li><a href="03-03-expressions-operators">Expressions and Operators</a></li>
<li><a href="03-04-string-manipulation">String Manipulation</a></li>
</ul>
<h2>Module 4: Control Structures</h2>
<ul>
<li><a href="04-01-conditional-statements">Conditional Statements</a></li>
<li><a href="04-02-looping-constructs">Looping Constructs</a></li>
<li><a href="04-03-error-handling">Error Handling</a></li>
<li><a href="04-04-subroutines-procedures">Subroutines and Procedures</a></li>
</ul>
<h2>Module 5: Advanced CL Commands</h2>
<ul>
<li><a href="05-01-advanced-file-operations">Advanced File Operations</a></li>
<li><a href="05-02-advanced-job-scheduling">Advanced Job Scheduling</a></li>
<li><a href="05-03-system-configuration-commands">System Configuration Commands</a></li>
<li><a href="05-04-security-permissions">Security and Permissions</a></li>
</ul>
<h2>Module 6: Interfacing with Other Systems</h2>
<ul>
<li><a href="06-01-calling-external-programs">Calling External Programs</a></li>
<li><a href="06-02-interfacing-databases">Interfacing with Databases</a></li>
<li><a href="06-03-using-apis">Using APIs</a></li>
<li><a href="06-04-network-communication">Network Communication</a></li>
</ul>
<h2>Module 7: Debugging and Optimization</h2>
<ul>
<li><a href="07-01-debugging-techniques">Debugging Techniques</a></li>
<li><a href="07-02-performance-optimization">Performance Optimization</a></li>
<li><a href="07-03-logging-monitoring">Logging and Monitoring</a></li>
<li><a href="07-04-best-practices">Best Practices</a></li>
</ul>
<h2>Module 8: Real-World Applications</h2>
<ul>
<li><a href="08-01-automating-system-tasks">Automating System Tasks</a></li>
<li><a href="08-02-batch-processing">Batch Processing</a></li>
<li><a href="08-03-data-integration">Data Integration</a></li>
<li><a href="08-04-case-studies">Case Studies</a></li>
</ul>
<h2>Module 9: Final Project</h2>
<ul>
<li><a href="09-01-project-overview">Project Overview</a></li>
<li><a href="09-02-project-requirements">Project Requirements</a></li>
<li><a href="09-03-implementation-guide">Implementation Guide</a></li>
<li><a href="09-04-submission-review">Submission and Review</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
