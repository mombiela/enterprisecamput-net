<!DOCTYPE html>
<html lang="en">
<head>
    <title> Benchmarking </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/go/06-04-benchmarking" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/go/06-04-benchmarking" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/go/06-04-benchmarking" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.1ab297bfa4.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "languages";
  		var MOD_NAME = "go";
  		var TEMA_NAME = "6-4";
  		var TYPE = "mod";
  		var PATH = "mod/go/06-04-benchmarking";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.688defeeef.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-VVPMPJSR3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());	
	  gtag('config', 'G-VVPMPJSR3P');
	</script>
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<a href="/"><img src="/img/logo-header_enterprise.png" alt="Logo Enterprise Campus"></a>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/go/06-04-benchmarking" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/go/06-04-benchmarking" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="go">
		<a  href="#" class="text-secondary d-none" data-read-mod="go" data-read-unit="6-4" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="go" data-unread-unit="6-4" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='06-03-testing' title="Testing" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='06-03-testing' title="Testing" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h1 style="text-decoration:underline">Benchmarking</h1>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-01-building-a-simple-web-server' title="Building a Simple Web Server" class="py-2 px-3 btn btn-primary"
				data-read-mod="go" data-read-unit="6-4">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-01-building-a-simple-web-server' title="Building a Simple Web Server" class="py-2 px-3 btn btn-primary" 
				data-read-mod="go" data-read-unit="6-4">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Benchmarking is a crucial aspect of software development that helps you measure the performance of your code. In Go, the <code>testing</code> package provides built-in support for writing benchmarks. This section will cover the basics of benchmarking in Go, including how to write and run benchmarks, interpret the results, and optimize your code based on the findings.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ol>
<li><strong>Benchmark Functions</strong>: Functions that measure the performance of a piece of code.</li>
<li><strong>Benchmarking Syntax</strong>: The specific way to write benchmark functions in Go.</li>
<li><strong>Running Benchmarks</strong>: How to execute benchmark tests.</li>
<li><strong>Interpreting Results</strong>: Understanding the output of benchmark tests.</li>
<li><strong>Optimizing Code</strong>: Making improvements based on benchmark results.</li>
</ol>
</div><h2>Writing Benchmark Functions</h2>
<div class='content'><p>Benchmark functions in Go are similar to test functions but have a specific signature and naming convention. They must start with <code>Benchmark</code> and take a single argument of type <code>*testing.B</code>.</p>
</div><h3>Example</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgInRlc3RpbmciCikKCi8vIEZ1bmN0aW9uIHRvIGJlIGJlbmNobWFya2VkCmZ1bmMgU3VtKGEsIGIgaW50KSBpbnQgewogICAgcmV0dXJuIGEgKyBiCn0KCi8vIEJlbmNobWFyayBmdW5jdGlvbgpmdW5jIEJlbmNobWFya1N1bShiICp0ZXN0aW5nLkIpIHsKICAgIGZvciBpIDo9IDA7IGkgPCBiLk47IGkrKyB7CiAgICAgICAgU3VtKDEsIDIpCiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;testing&quot;
)

// Function to be benchmarked
func Sum(a, b int) int {
    return a + b
}

// Benchmark function
func BenchmarkSum(b *testing.B) {
    for i := 0; i &lt; b.N; i++ {
        Sum(1, 2)
    }
}</pre></div><div class='content'></div><h3>Explanation</h3>
<div class='content'><ul>
<li><strong>Function to be benchmarked</strong>: <code>Sum</code> is a simple function that adds two integers.</li>
<li><strong>Benchmark function</strong>: <code>BenchmarkSum</code> runs the <code>Sum</code> function <code>b.N</code> times. The <code>b.N</code> is a variable that the benchmarking framework uses to determine how many iterations to run.</li>
</ul>
</div><h2>Running Benchmarks</h2>
<div class='content'><p>To run benchmarks, use the <code>go test</code> command with the <code>-bench</code> flag.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z28gdGVzdCAtYmVuY2g9Lg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>go test -bench=.</pre></div><div class='content'></div><h3>Explanation</h3>
<div class='content'><ul>
<li><code>-bench=.</code>: Runs all benchmarks in the current package. You can specify a particular benchmark by replacing <code>.</code> with the name of the benchmark function.</li>
</ul>
</div><h2>Interpreting Results</h2>
<div class='content'><p>The output of a benchmark test provides several key metrics:</p>
<ul>
<li><strong>ns/op</strong>: Nanoseconds per operation.</li>
<li><strong>B/op</strong>: Bytes allocated per operation.</li>
<li><strong>allocs/op</strong>: Allocations per operation.</li>
</ul>
</div><h3>Example Output</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z29vczogZGFyd2luCmdvYXJjaDogYW1kNjQKcGtnOiBleGFtcGxlCkJlbmNobWFya1N1bS04ICAgCTIwMDAwMDAwMDAJICAgICAgICAgMC4yOSBucy9vcApQQVNTCm9rICAJZXhhbXBsZQkwLjU4MnM="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>goos: darwin
goarch: amd64
pkg: example
BenchmarkSum-8   	2000000000	         0.29 ns/op
PASS
ok  	example	0.582s</pre></div><div class='content'></div><h3>Explanation</h3>
<div class='content'><ul>
<li><strong>BenchmarkSum-8</strong>: The name of the benchmark and the number of CPU cores used.</li>
<li><strong>2000000000</strong>: The number of iterations.</li>
<li><strong>0.29 ns/op</strong>: The average time per operation.</li>
</ul>
</div><h2>Optimizing Code</h2>
<div class='content'><p>Based on the benchmark results, you can identify bottlenecks and optimize your code. Here are some common optimization techniques:</p>
<ol>
<li><strong>Reduce Allocations</strong>: Minimize memory allocations to improve performance.</li>
<li><strong>Algorithm Optimization</strong>: Use more efficient algorithms.</li>
<li><strong>Concurrency</strong>: Utilize Go's concurrency features like goroutines and channels.</li>
</ol>
</div><h3>Example Optimization</h3>
<div class='content'><p>Suppose the <code>Sum</code> function was more complex and involved unnecessary memory allocations. You could optimize it by reducing these allocations.</p>
</div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgInRlc3RpbmciCikKCi8vIE9wdGltaXplZCBmdW5jdGlvbiB0byBiZSBiZW5jaG1hcmtlZApmdW5jIE9wdGltaXplZFN1bShhLCBiIGludCkgaW50IHsKICAgIHJldHVybiBhICsgYgp9CgovLyBCZW5jaG1hcmsgZnVuY3Rpb24gZm9yIG9wdGltaXplZCBjb2RlCmZ1bmMgQmVuY2htYXJrT3B0aW1pemVkU3VtKGIgKnRlc3RpbmcuQikgewogICAgZm9yIGkgOj0gMDsgaSA8IGIuTjsgaSsrIHsKICAgICAgICBPcHRpbWl6ZWRTdW0oMSwgMikKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;testing&quot;
)

// Optimized function to be benchmarked
func OptimizedSum(a, b int) int {
    return a + b
}

// Benchmark function for optimized code
func BenchmarkOptimizedSum(b *testing.B) {
    for i := 0; i &lt; b.N; i++ {
        OptimizedSum(1, 2)
    }
}</pre></div><div class='content'></div><h2>Practical Exercise</h2>
<div class='content'></div><h3>Exercise</h3>
<div class='content'><ol>
<li>Write a function that concatenates two strings.</li>
<li>Write a benchmark function for the string concatenation function.</li>
<li>Run the benchmark and interpret the results.</li>
<li>Optimize the string concatenation function to improve performance.</li>
<li>Write a new benchmark function for the optimized code and compare the results.</li>
</ol>
</div><h3>Solution</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgInRlc3RpbmciCikKCi8vIEZ1bmN0aW9uIHRvIGNvbmNhdGVuYXRlIHN0cmluZ3MKZnVuYyBDb25jYXRTdHJpbmdzKGEsIGIgc3RyaW5nKSBzdHJpbmcgewogICAgcmV0dXJuIGEgKyBiCn0KCi8vIEJlbmNobWFyayBmdW5jdGlvbiBmb3Igc3RyaW5nIGNvbmNhdGVuYXRpb24KZnVuYyBCZW5jaG1hcmtDb25jYXRTdHJpbmdzKGIgKnRlc3RpbmcuQikgewogICAgZm9yIGkgOj0gMDsgaSA8IGIuTjsgaSsrIHsKICAgICAgICBDb25jYXRTdHJpbmdzKCJIZWxsbywgIiwgIldvcmxkISIpCiAgICB9Cn0KCi8vIE9wdGltaXplZCBmdW5jdGlvbiB0byBjb25jYXRlbmF0ZSBzdHJpbmdzIHVzaW5nIGEgYnVpbGRlcgpmdW5jIE9wdGltaXplZENvbmNhdFN0cmluZ3MoYSwgYiBzdHJpbmcpIHN0cmluZyB7CiAgICB2YXIgYnVpbGRlciBzdHJpbmdzLkJ1aWxkZXIKICAgIGJ1aWxkZXIuV3JpdGVTdHJpbmcoYSkKICAgIGJ1aWxkZXIuV3JpdGVTdHJpbmcoYikKICAgIHJldHVybiBidWlsZGVyLlN0cmluZygpCn0KCi8vIEJlbmNobWFyayBmdW5jdGlvbiBmb3Igb3B0aW1pemVkIHN0cmluZyBjb25jYXRlbmF0aW9uCmZ1bmMgQmVuY2htYXJrT3B0aW1pemVkQ29uY2F0U3RyaW5ncyhiICp0ZXN0aW5nLkIpIHsKICAgIGZvciBpIDo9IDA7IGkgPCBiLk47IGkrKyB7CiAgICAgICAgT3B0aW1pemVkQ29uY2F0U3RyaW5ncygiSGVsbG8sICIsICJXb3JsZCEiKQogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;testing&quot;
)

// Function to concatenate strings
func ConcatStrings(a, b string) string {
    return a + b
}

// Benchmark function for string concatenation
func BenchmarkConcatStrings(b *testing.B) {
    for i := 0; i &lt; b.N; i++ {
        ConcatStrings(&quot;Hello, &quot;, &quot;World!&quot;)
    }
}

// Optimized function to concatenate strings using a builder
func OptimizedConcatStrings(a, b string) string {
    var builder strings.Builder
    builder.WriteString(a)
    builder.WriteString(b)
    return builder.String()
}

// Benchmark function for optimized string concatenation
func BenchmarkOptimizedConcatStrings(b *testing.B) {
    for i := 0; i &lt; b.N; i++ {
        OptimizedConcatStrings(&quot;Hello, &quot;, &quot;World!&quot;)
    }
}</pre></div><div class='content'></div><h3>Running the Benchmarks</h3>
<div class='content'></div><div style='position:relative'><a class='copy_button d-none d-md-inline' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z28gdGVzdCAtYmVuY2g9Lg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>go test -bench=.</pre></div><div class='content'></div><h3>Interpreting the Results</h3>
<div class='content'><p>Compare the <code>ns/op</code>, <code>B/op</code>, and <code>allocs/op</code> metrics for both the original and optimized functions to see the performance improvements.</p>
</div><h2>Conclusion</h2>
<div class='content'><p>Benchmarking is an essential tool for measuring and optimizing the performance of your Go code. By writing benchmark functions, running them, and interpreting the results, you can identify bottlenecks and make informed decisions to improve your code's efficiency. This knowledge will be invaluable as you progress to more advanced topics and real-world applications.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='06-03-testing' title="Testing" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='06-03-testing' title="Testing" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-01-building-a-simple-web-server' title="Building a Simple Web Server" class="py-2 px-3 btn btn-primary"
				data-read-mod="go" data-read-unit="6-4">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-01-building-a-simple-web-server' title="Building a Simple Web Server" class="py-2 px-3 btn btn-primary" 
				data-read-mod="go" data-read-unit="6-4">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Go Programming Course</h1>
<h2>Module 1: Introduction to Go</h2>
<ul>
<li><a href="01-01-introduction-to-go">Introduction to Go</a></li>
<li><a href="01-02-setting-up-go-environment">Setting Up Go Environment</a></li>
<li><a href="01-03-your-first-go-program">Your First Go Program</a></li>
<li><a href="01-04-basic-syntax-and-structure">Basic Syntax and Structure</a></li>
</ul>
<h2>Module 2: Basic Concepts</h2>
<ul>
<li><a href="02-01-variables-and-constants">Variables and Constants</a></li>
<li><a href="02-02-data-types">Data Types</a></li>
<li><a href="02-03-operators">Operators</a></li>
<li><a href="02-04-control-structures">Control Structures</a></li>
<li><a href="02-05-functions">Functions</a></li>
</ul>
<h2>Module 3: Advanced Data Structures</h2>
<ul>
<li><a href="03-01-arrays-and-slices">Arrays and Slices</a></li>
<li><a href="03-02-maps">Maps</a></li>
<li><a href="03-03-structs">Structs</a></li>
<li><a href="03-04-pointers">Pointers</a></li>
</ul>
<h2>Module 4: Error Handling</h2>
<ul>
<li><a href="04-01-error-handling-basics">Error Handling Basics</a></li>
<li><a href="04-02-custom-errors">Custom Errors</a></li>
<li><a href="04-03-panic-and-recover">Panic and Recover</a></li>
</ul>
<h2>Module 5: Concurrency</h2>
<ul>
<li><a href="05-01-goroutines">Goroutines</a></li>
<li><a href="05-02-channels">Channels</a></li>
<li><a href="05-03-select-statement">Select Statement</a></li>
<li><a href="05-04-mutexes-and-synchronization">Mutexes and Synchronization</a></li>
</ul>
<h2>Module 6: Advanced Topics</h2>
<ul>
<li><a href="06-01-interfaces">Interfaces</a></li>
<li><a href="06-02-reflection">Reflection</a></li>
<li><a href="06-03-testing">Testing</a></li>
<li><a href="06-04-benchmarking">Benchmarking</a></li>
</ul>
<h2>Module 7: Web Development with Go</h2>
<ul>
<li><a href="07-01-building-a-simple-web-server">Building a Simple Web Server</a></li>
<li><a href="07-02-routing">Routing</a></li>
<li><a href="07-03-middleware">Middleware</a></li>
<li><a href="07-04-working-with-templates">Working with Templates</a></li>
</ul>
<h2>Module 8: Working with Databases</h2>
<ul>
<li><a href="08-01-connecting-to-a-database">Connecting to a Database</a></li>
<li><a href="08-02-crud-operations">CRUD Operations</a></li>
<li><a href="08-03-using-orm">Using ORM</a></li>
<li><a href="08-04-database-migrations">Database Migrations</a></li>
</ul>
<h2>Module 9: Deployment and Maintenance</h2>
<ul>
<li><a href="09-01-building-and-deploying-go-applications">Building and Deploying Go Applications</a></li>
<li><a href="09-02-logging">Logging</a></li>
<li><a href="09-03-monitoring-and-performance-tuning">Monitoring and Performance Tuning</a></li>
<li><a href="09-04-security-best-practices">Security Best Practices</a></li>
</ul>
<h2>Module 10: Final Project</h2>
<ul>
<li><a href="10-01-project-overview">Project Overview</a></li>
<li><a href="10-02-project-planning">Project Planning</a></li>
<li><a href="10-03-implementation">Implementation</a></li>
<li><a href="10-04-testing-and-deployment">Testing and Deployment</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
