<!DOCTYPE html>
<html lang="en">
<head>
    <title> Middleware </title>
        
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, nofollow, noarchive">
    
    <link rel="alternate" href="https://campusempresa.com/cursos/go/07-03-middleware" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/cursos/go/07-03-middleware" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/courses/go/07-03-middleware" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.ea63f62b9e.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "languages";
  		var MOD_NAME = "go";
  		var TEMA_NAME = "7-3";
  		var TYPE = "mod";
  		var PATH = "mod/go/07-03-middleware";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.902a5a267d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>
	  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/cursos/go/07-03-middleware" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/cursos/go/07-03-middleware" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my-courses" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/completed-courses" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="go">
		<a  href="#" class="text-secondary d-none" data-read-mod="go" data-read-unit="7-3" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="go" data-unread-unit="7-3" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='07-02-routing' title="Routing" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='07-02-routing' title="Routing" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">Middleware</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-04-working-with-templates' title="Working with Templates" class="py-2 px-3 btn btn-primary"
				data-read-mod="go" data-read-unit="7-3">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-04-working-with-templates' title="Working with Templates" class="py-2 px-3 btn btn-primary" 
				data-read-mod="go" data-read-unit="7-3">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Middleware in web development refers to software that acts as a bridge between an operating system or database and applications, especially on a network. In the context of Go web development, middleware functions are used to process requests and responses in a web application. Middleware can be used for logging, authentication, session management, and more.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Definition</strong>: Middleware is a function that sits between the request and the response in a web application.</li>
<li><strong>Purpose</strong>: Middleware can modify the request, the response, or both. It can also terminate the request-response cycle.</li>
<li><strong>Chaining</strong>: Multiple middleware functions can be chained together to handle a request.</li>
</ol>
</div><h1>Practical Example</h1>
<div class='content'><p>Let's create a simple middleware in Go using the <code>net/http</code> package.</p>
</div><h2>Step-by-Step Example</h2>
<div class='content'><ol>
<li>
<p><strong>Create a Basic Web Server</strong>:</p>
<pre><code class="language-go">package main

import (
    &quot;fmt&quot;
    &quot;net/http&quot;
)

func main() {
    http.HandleFunc(&quot;/&quot;, func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprintf(w, &quot;Hello, World!&quot;)
    })

    http.ListenAndServe(&quot;:8080&quot;, nil)
}
</code></pre>
</li>
<li>
<p><strong>Define a Middleware Function</strong>:</p>
<pre><code class="language-go">func loggingMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        fmt.Printf(&quot;Request URI: %s\n&quot;, r.RequestURI)
        next.ServeHTTP(w, r)
    })
}
</code></pre>
</li>
<li>
<p><strong>Apply Middleware to the Web Server</strong>:</p>
<pre><code class="language-go">func main() {
    mux := http.NewServeMux()
    mux.HandleFunc(&quot;/&quot;, func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprintf(w, &quot;Hello, World!&quot;)
    })

    loggedMux := loggingMiddleware(mux)
    http.ListenAndServe(&quot;:8080&quot;, loggedMux)
}
</code></pre>
</li>
</ol>
</div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Basic Web Server</strong>: We start by creating a simple web server that responds with &quot;Hello, World!&quot;.</li>
<li><strong>Middleware Function</strong>: The <code>loggingMiddleware</code> function takes an <code>http.Handler</code> and returns a new <code>http.Handler</code>. It logs the request URI and then calls the <code>ServeHTTP</code> method of the next handler in the chain.</li>
<li><strong>Apply Middleware</strong>: We create a new <code>ServeMux</code> and apply the <code>loggingMiddleware</code> to it. The <code>loggedMux</code> is then passed to <code>http.ListenAndServe</code>.</li>
</ul>
</div><h1>Practical Exercises</h1>
<div class='content'></div><h2>Exercise 1: Authentication Middleware</h2>
<div class='content'><p><strong>Task</strong>: Create a middleware function that checks for a specific header (<code>X-Auth-Token</code>) and only allows the request to proceed if the token is correct.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuYyBhdXRoTWlkZGxld2FyZShuZXh0IGh0dHAuSGFuZGxlcikgaHR0cC5IYW5kbGVyIHsKICAgIHJldHVybiBodHRwLkhhbmRsZXJGdW5jKGZ1bmModyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHsKICAgICAgICB0b2tlbiA6PSByLkhlYWRlci5HZXQoIlgtQXV0aC1Ub2tlbiIpCiAgICAgICAgaWYgdG9rZW4gIT0gInNlY3JldC10b2tlbiIgewogICAgICAgICAgICBodHRwLkVycm9yKHcsICJGb3JiaWRkZW4iLCBodHRwLlN0YXR1c0ZvcmJpZGRlbikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIG5leHQuU2VydmVIVFRQKHcsIHIpCiAgICB9KQp9CgpmdW5jIG1haW4oKSB7CiAgICBtdXggOj0gaHR0cC5OZXdTZXJ2ZU11eCgpCiAgICBtdXguSGFuZGxlRnVuYygiLyIsIGZ1bmModyBodHRwLlJlc3BvbnNlV3JpdGVyLCByICpodHRwLlJlcXVlc3QpIHsKICAgICAgICBmbXQuRnByaW50Zih3LCAiSGVsbG8sIEF1dGhlbnRpY2F0ZWQgVXNlciEiKQogICAgfSkKCiAgICBsb2dnZWRNdXggOj0gbG9nZ2luZ01pZGRsZXdhcmUobXV4KQogICAgYXV0aE11eCA6PSBhdXRoTWlkZGxld2FyZShsb2dnZWRNdXgpCiAgICBodHRwLkxpc3RlbkFuZFNlcnZlKCI6ODA4MCIsIGF1dGhNdXgpCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>func authMiddleware(next http.Handler) http.Handler {
    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
        token := r.Header.Get(&quot;X-Auth-Token&quot;)
        if token != &quot;secret-token&quot; {
            http.Error(w, &quot;Forbidden&quot;, http.StatusForbidden)
            return
        }
        next.ServeHTTP(w, r)
    })
}

func main() {
    mux := http.NewServeMux()
    mux.HandleFunc(&quot;/&quot;, func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprintf(w, &quot;Hello, Authenticated User!&quot;)
    })

    loggedMux := loggingMiddleware(mux)
    authMux := authMiddleware(loggedMux)
    http.ListenAndServe(&quot;:8080&quot;, authMux)
}</pre></div><div class='content'></div><h2>Exercise 2: Chaining Multiple Middleware</h2>
<div class='content'><p><strong>Task</strong>: Chain the <code>loggingMiddleware</code> and <code>authMiddleware</code> together.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuYyBtYWluKCkgewogICAgbXV4IDo9IGh0dHAuTmV3U2VydmVNdXgoKQogICAgbXV4LkhhbmRsZUZ1bmMoIi8iLCBmdW5jKHcgaHR0cC5SZXNwb25zZVdyaXRlciwgciAqaHR0cC5SZXF1ZXN0KSB7CiAgICAgICAgZm10LkZwcmludGYodywgIkhlbGxvLCBBdXRoZW50aWNhdGVkIFVzZXIhIikKICAgIH0pCgogICAgbG9nZ2VkTXV4IDo9IGxvZ2dpbmdNaWRkbGV3YXJlKG11eCkKICAgIGF1dGhNdXggOj0gYXV0aE1pZGRsZXdhcmUobG9nZ2VkTXV4KQogICAgaHR0cC5MaXN0ZW5BbmRTZXJ2ZSgiOjgwODAiLCBhdXRoTXV4KQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>func main() {
    mux := http.NewServeMux()
    mux.HandleFunc(&quot;/&quot;, func(w http.ResponseWriter, r *http.Request) {
        fmt.Fprintf(w, &quot;Hello, Authenticated User!&quot;)
    })

    loggedMux := loggingMiddleware(mux)
    authMux := authMiddleware(loggedMux)
    http.ListenAndServe(&quot;:8080&quot;, authMux)
}</pre></div><div class='content'></div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Order Matters</strong>: The order in which middleware is applied is important. For example, logging should generally be done before authentication.</li>
<li><strong>Terminating the Chain</strong>: Ensure that middleware functions properly terminate the request-response cycle when necessary (e.g., in case of an error).</li>
<li><strong>Reusability</strong>: Write middleware functions in a reusable manner so they can be easily applied to different parts of your application.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Middleware is a powerful concept in web development that allows you to handle cross-cutting concerns such as logging, authentication, and more. By understanding how to create and apply middleware in Go, you can build more modular and maintainable web applications. In the next topic, we will explore how to work with templates in Go to render dynamic HTML content.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='07-02-routing' title="Routing" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='07-02-routing' title="Routing" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-04-working-with-templates' title="Working with Templates" class="py-2 px-3 btn btn-primary"
				data-read-mod="go" data-read-unit="7-3">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-04-working-with-templates' title="Working with Templates" class="py-2 px-3 btn btn-primary" 
				data-read-mod="go" data-read-unit="7-3">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Go Programming Course</h1>
<h2>Module 1: Introduction to Go</h2>
<ul>
<li><a href="01-01-introduction-to-go">Introduction to Go</a></li>
<li><a href="01-02-setting-up-go-environment">Setting Up Go Environment</a></li>
<li><a href="01-03-your-first-go-program">Your First Go Program</a></li>
<li><a href="01-04-basic-syntax-and-structure">Basic Syntax and Structure</a></li>
</ul>
<h2>Module 2: Basic Concepts</h2>
<ul>
<li><a href="02-01-variables-and-constants">Variables and Constants</a></li>
<li><a href="02-02-data-types">Data Types</a></li>
<li><a href="02-03-operators">Operators</a></li>
<li><a href="02-04-control-structures">Control Structures</a></li>
<li><a href="02-05-functions">Functions</a></li>
</ul>
<h2>Module 3: Advanced Data Structures</h2>
<ul>
<li><a href="03-01-arrays-and-slices">Arrays and Slices</a></li>
<li><a href="03-02-maps">Maps</a></li>
<li><a href="03-03-structs">Structs</a></li>
<li><a href="03-04-pointers">Pointers</a></li>
</ul>
<h2>Module 4: Error Handling</h2>
<ul>
<li><a href="04-01-error-handling-basics">Error Handling Basics</a></li>
<li><a href="04-02-custom-errors">Custom Errors</a></li>
<li><a href="04-03-panic-and-recover">Panic and Recover</a></li>
</ul>
<h2>Module 5: Concurrency</h2>
<ul>
<li><a href="05-01-goroutines">Goroutines</a></li>
<li><a href="05-02-channels">Channels</a></li>
<li><a href="05-03-select-statement">Select Statement</a></li>
<li><a href="05-04-mutexes-and-synchronization">Mutexes and Synchronization</a></li>
</ul>
<h2>Module 6: Advanced Topics</h2>
<ul>
<li><a href="06-01-interfaces">Interfaces</a></li>
<li><a href="06-02-reflection">Reflection</a></li>
<li><a href="06-03-testing">Testing</a></li>
<li><a href="06-04-benchmarking">Benchmarking</a></li>
</ul>
<h2>Module 7: Web Development with Go</h2>
<ul>
<li><a href="07-01-building-a-simple-web-server">Building a Simple Web Server</a></li>
<li><a href="07-02-routing">Routing</a></li>
<li><a href="07-03-middleware">Middleware</a></li>
<li><a href="07-04-working-with-templates">Working with Templates</a></li>
</ul>
<h2>Module 8: Working with Databases</h2>
<ul>
<li><a href="08-01-connecting-to-a-database">Connecting to a Database</a></li>
<li><a href="08-02-crud-operations">CRUD Operations</a></li>
<li><a href="08-03-using-orm">Using ORM</a></li>
<li><a href="08-04-database-migrations">Database Migrations</a></li>
</ul>
<h2>Module 9: Deployment and Maintenance</h2>
<ul>
<li><a href="09-01-building-and-deploying-go-applications">Building and Deploying Go Applications</a></li>
<li><a href="09-02-logging">Logging</a></li>
<li><a href="09-03-monitoring-and-performance-tuning">Monitoring and Performance Tuning</a></li>
<li><a href="09-04-security-best-practices">Security Best Practices</a></li>
</ul>
<h2>Module 10: Final Project</h2>
<ul>
<li><a href="10-01-project-overview">Project Overview</a></li>
<li><a href="10-02-project-planning">Project Planning</a></li>
<li><a href="10-03-implementation">Implementation</a></li>
<li><a href="10-04-testing-and-deployment">Testing and Deployment</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective" rel="nofollow">The Project</a> | 
<a href="/about" rel="nofollow">About Us</a> | 
<a href="/contribute" rel="nofollow">Contribute</a> | 
<a href="/donate" rel="nofollow">Donations</a> | 
<a href="/license" rel="nofollow">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
