<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Persistence with Volumes</title>

    <link rel="alternate" href="https://campusempresa.com/docker/data-persistence-volumes" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/docker/data-persistence-volumes" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/docker/data-persistence-volumes" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/docker/data-persistence-volumes" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/docker/data-persistence-volumes" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='networking-docker'>&#x25C4;Networking in Docker</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Data Persistence with Volumes</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-docker-compose'>Introduction to Docker Compose &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how Docker handles data persistence using volumes. This is crucial for maintaining data between container restarts and sharing data between containers.</p>
</div><h1>Introduction to Data Persistence</h1>
<div class='content'><p>Data persistence refers to the ability to save data beyond the lifecycle of a container. By default, data created inside a Docker container is ephemeral, meaning it is lost when the container stops or is removed. To overcome this, Docker provides volumes as a solution.</p>
</div><h1>Types of Docker Storage</h1>
<div class='content'><p>Docker offers several ways to manage data persistence:</p>
<ul>
<li><strong>Volumes</strong>: Managed by Docker and stored in a part of the host filesystem.</li>
<li><strong>Bind Mounts</strong>: Directly mount a host directory or file into a container.</li>
<li><strong>tmpfs Mounts</strong>: Store data in the host system's memory.</li>
</ul>
<p>In this section, we will focus on volumes, which are the most flexible and preferred method for data persistence.</p>
</div><h1>Creating and Using Volumes</h1>
<div class='content'></div><h2>Creating a Volume</h2>
<div class='content'><p>To create a volume, use the <code>docker volume create</code> command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHZvbHVtZSBjcmVhdGUgbXlfdm9sdW1l"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker volume create my_volume</pre></div><div class='content'><p>This command creates a volume named <code>my_volume</code> that Docker manages.</p>
</div><h2>Attaching a Volume to a Container</h2>
<div class='content'><p>To attach a volume to a container, use the <code>-v</code> or <code>--mount</code> flag with the <code>docker run</code> command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtZCAtLW5hbWUgbXlfY29udGFpbmVyIC12IG15X3ZvbHVtZTovZGF0YSBidXN5Ym94"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run -d --name my_container -v my_volume:/data busybox</pre></div><div class='content'><p>In this example:</p>
<ul>
<li><code>-d</code> runs the container in detached mode.</li>
<li><code>--name my_container</code> names the container.</li>
<li><code>-v my_volume:/data</code> mounts the volume <code>my_volume</code> to the <code>/data</code> directory inside the container.</li>
<li><code>busybox</code> is the image used to create the container.</li>
</ul>
</div><h2>Inspecting Volumes</h2>
<div class='content'><p>To inspect a volume and see its details, use the <code>docker volume inspect</code> command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHZvbHVtZSBpbnNwZWN0IG15X3ZvbHVtZQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker volume inspect my_volume</pre></div><div class='content'><p>This command provides information about the volume, such as its mount point on the host.</p>
</div><h1>Sharing Data Between Containers</h1>
<div class='content'><p>Volumes can be shared between multiple containers, allowing them to read and write to the same data.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtZCAtLW5hbWUgY29udGFpbmVyMSAtdiBzaGFyZWRfdm9sdW1lOi9kYXRhIGJ1c3lib3gKZG9ja2VyIHJ1biAtZCAtLW5hbWUgY29udGFpbmVyMiAtdiBzaGFyZWRfdm9sdW1lOi9kYXRhIGJ1c3lib3g="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run -d --name container1 -v shared_volume:/data busybox
docker run -d --name container2 -v shared_volume:/data busybox</pre></div><div class='content'><p>Both <code>container1</code> and <code>container2</code> can now access the data stored in <code>shared_volume</code>.</p>
</div><h1>Backing Up and Restoring Volumes</h1>
<div class='content'></div><h2>Backing Up a Volume</h2>
<div class='content'><p>To back up a volume, you can use a temporary container to copy the data to a tar archive:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtLXJtIC12IG15X3ZvbHVtZTovZGF0YSAtdiAkKHB3ZCk6L2JhY2t1cCBidXN5Ym94IHRhciBjdmYgL2JhY2t1cC9iYWNrdXAudGFyIC9kYXRh"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run --rm -v my_volume:/data -v $(pwd):/backup busybox tar cvf /backup/backup.tar /data</pre></div><div class='content'></div><h2>Restoring a Volume</h2>
<div class='content'><p>To restore a volume from a backup, use a similar approach:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtLXJtIC12IG15X3ZvbHVtZTovZGF0YSAtdiAkKHB3ZCk6L2JhY2t1cCBidXN5Ym94IHRhciB4dmYgL2JhY2t1cC9iYWNrdXAudGFyIC1DIC8="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run --rm -v my_volume:/data -v $(pwd):/backup busybox tar xvf /backup/backup.tar -C /</pre></div><div class='content'></div><h1>Best Practices for Using Volumes</h1>
<div class='content'><ul>
<li><strong>Use Named Volumes</strong>: Always prefer named volumes over anonymous volumes for better manageability.</li>
<li><strong>Backup Regularly</strong>: Regularly back up your volumes to prevent data loss.</li>
<li><strong>Monitor Volume Usage</strong>: Keep an eye on the disk space used by volumes to avoid running out of space.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Volumes are a powerful feature in Docker that provide a reliable way to persist data beyond the lifecycle of a container. By understanding how to create, use, and manage volumes, you can ensure that your data remains safe and accessible, even as containers are stopped and started. Remember to follow best practices for volume management to maintain a robust and efficient Docker environment.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='networking-docker'>&#x25C4;Networking in Docker</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Data Persistence with Volumes</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-docker-compose'>Introduction to Docker Compose &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
