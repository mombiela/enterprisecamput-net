<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoring and Diagnostics</title>

    <link rel="alternate" href="https://campusempresa.com/azure/monitoring-and-diagnostics" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/azure/monitoring-and-diagnostics" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/azure/monitoring-and-diagnostics" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/azure/monitoring-and-diagnostics" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/azure/monitoring-and-diagnostics" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='configuring-app-settings-and-scaling'>&#x25C4;Configuring App Settings and Scaling</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Monitoring and Diagnostics</a>
	</div>
	<div class='col-4 text-end'>
					<a href='custom-domains-and-ssl-certificates'>Custom Domains and SSL Certificates &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Monitoring and diagnostics are crucial aspects of managing applications and services in Azure. This topic will guide you through the basics of monitoring and diagnostics, progressing to advanced techniques and tools available in Azure.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Monitoring</strong>: The process of collecting, analyzing, and using information to track the performance and health of applications and services.</li>
<li><strong>Diagnostics</strong>: The process of identifying and resolving issues within applications and services.</li>
</ul>
</div><h1>Beginner Level</h1>
<div class='content'></div><h2>Azure Monitor</h2>
<div class='content'><p>Azure Monitor is a comprehensive solution for collecting, analyzing, and acting on telemetry from your cloud and on-premises environments.</p>
<ul>
<li><strong>Metrics</strong>: Numerical data that describe the performance of your resources.</li>
<li><strong>Logs</strong>: Detailed records of events and activities.</li>
</ul>
<h4>Setting Up Azure Monitor</h4>
<ol>
<li>
<p><strong>Create a Log Analytics Workspace</strong>:</p>
<pre><code class="language-azurecli">az monitor log-analytics workspace create --resource-group MyResourceGroup --workspace-name MyWorkspace
</code></pre>
</li>
<li>
<p><strong>Enable Diagnostic Settings</strong>:</p>
<pre><code class="language-azurecli">az monitor diagnostic-settings create --resource MyResource --resource-group MyResourceGroup --workspace MyWorkspace --name MyDiagnosticSetting --logs '[{&quot;category&quot;: &quot;Administrative&quot;, &quot;enabled&quot;: true}]'
</code></pre>
</li>
</ol>
</div><h2>Application Insights</h2>
<div class='content'><p>Application Insights is an extensible Application Performance Management (APM) service for web developers.</p>
<ul>
<li><strong>Telemetry Data</strong>: Includes request rates, response times, and failure rates.</li>
<li><strong>Application Map</strong>: Visual representation of the components of your application.</li>
</ul>
<h4>Setting Up Application Insights</h4>
<ol>
<li>
<p><strong>Create an Application Insights Resource</strong>:</p>
<pre><code class="language-azurecli">az monitor app-insights component create --app MyApp --location eastus --resource-group MyResourceGroup --application-type web
</code></pre>
</li>
<li>
<p><strong>Add Instrumentation Key to Your Application</strong>:</p>
<pre><code class="language-csharp">// In your application code
var telemetryClient = new TelemetryClient(new TelemetryConfiguration(&quot;your_instrumentation_key&quot;));
telemetryClient.TrackEvent(&quot;Application Started&quot;);
</code></pre>
</li>
</ol>
</div><h1>Intermediate Level</h1>
<div class='content'></div><h2>Log Analytics</h2>
<div class='content'><p>Log Analytics is a tool in the Azure portal used to edit and run log queries from data collected by Azure Monitor.</p>
<ul>
<li><strong>Kusto Query Language (KQL)</strong>: Used to write log queries.</li>
<li><strong>Workbooks</strong>: Customizable reports that visualize log data.</li>
</ul>
<h4>Writing Basic KQL Queries</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gR2V0IGFsbCByZWNvcmRzIGZyb20gdGhlIGxhc3QgMjQgaG91cnMKQXp1cmVBY3Rpdml0eQp8IHdoZXJlIFRpbWVHZW5lcmF0ZWQgPiBhZ28oMjRoKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Get all records from the last 24 hours
AzureActivity
| where TimeGenerated &gt; ago(24h)</pre></div><div class='content'></div><h2>Alerts</h2>
<div class='content'><p>Alerts notify you of critical conditions and potentially take corrective actions.</p>
<ul>
<li><strong>Metric Alerts</strong>: Triggered when a metric crosses a threshold.</li>
<li><strong>Log Alerts</strong>: Triggered based on log query results.</li>
</ul>
<h4>Creating a Metric Alert</h4>
<ol>
<li><strong>Create an Alert Rule</strong>:
<pre><code class="language-azurecli">az monitor metrics alert create --name MyAlertRule --resource-group MyResourceGroup --scopes /subscriptions/{subscription-id}/resourceGroups/{resource-group}/providers/Microsoft.Compute/virtualMachines/{vm-name} --condition &quot;avg Percentage CPU &gt; 80&quot; --window-size 5m --evaluation-frequency 1m --action-group MyActionGroup
</code></pre>
</li>
</ol>
</div><h1>Advanced Level</h1>
<div class='content'></div><h2>Advanced Diagnostics with Azure Monitor</h2>
<div class='content'><ul>
<li><strong>Custom Metrics</strong>: Define and collect custom metrics for your applications.</li>
<li><strong>Distributed Tracing</strong>: Track the flow of requests across services.</li>
</ul>
<h4>Implementing Custom Metrics</h4>
<ol>
<li><strong>Define Custom Metrics</strong>:
<pre><code class="language-csharp">var telemetryClient = new TelemetryClient();
telemetryClient.GetMetric(&quot;CustomMetric&quot;).TrackValue(42);
</code></pre>
</li>
</ol>
</div><h2>Network Monitoring</h2>
<div class='content'><p>Azure Network Watcher provides tools to monitor, diagnose, and gain insights into your network performance and health.</p>
<ul>
<li><strong>Connection Monitor</strong>: Monitors connectivity between Azure resources.</li>
<li><strong>Network Performance Monitor</strong>: Monitors network performance and detects network issues.</li>
</ul>
<h4>Setting Up Network Watcher</h4>
<ol>
<li>
<p><strong>Enable Network Watcher</strong>:</p>
<pre><code class="language-azurecli">az network watcher configure --locations eastus --resource-group NetworkWatcherRG --enabled
</code></pre>
</li>
<li>
<p><strong>Create a Connection Monitor</strong>:</p>
<pre><code class="language-azurecli">az network watcher connection-monitor create --name MyConnectionMonitor --resource-group NetworkWatcherRG --location eastus --source-resource /subscriptions/{subscription-id}/resourceGroups/{resource-group}/providers/Microsoft.Compute/virtualMachines/{vm-name} --dest-address www.example.com --dest-port 80
</code></pre>
</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>Monitoring and diagnostics in Azure are essential for maintaining the health and performance of your applications and services. Starting with basic tools like Azure Monitor and Application Insights, you can progress to more advanced techniques such as custom metrics and network monitoring. By mastering these tools, you can ensure your applications run smoothly and efficiently, and quickly resolve any issues that arise.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='configuring-app-settings-and-scaling'>&#x25C4;Configuring App Settings and Scaling</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Monitoring and Diagnostics</a>
	</div>
	<div class='col-4 text-end'>
					<a href='custom-domains-and-ssl-certificates'>Custom Domains and SSL Certificates &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
