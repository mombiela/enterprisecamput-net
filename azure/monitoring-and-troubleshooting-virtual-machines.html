<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoring and Troubleshooting Virtual Machines</title>

    <link rel="alternate" href="https://campusempresa.com/azure/monitoring-and-troubleshooting-virtual-machines" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/azure/monitoring-and-troubleshooting-virtual-machines" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/azure/monitoring-and-troubleshooting-virtual-machines" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/azure/monitoring-and-troubleshooting-virtual-machines" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/azure/monitoring-and-troubleshooting-virtual-machines" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='scaling-virtual-machines'>&#x25C4;Scaling Virtual Machines</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Monitoring and Troubleshooting Virtual Machines</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-azure-app-services'>Introduction to Azure App Services &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Monitoring and troubleshooting virtual machines (VMs) in Azure is crucial for maintaining the health, performance, and reliability of your applications. This topic will guide you from the basics to advanced techniques in monitoring and troubleshooting VMs in Azure.</p>
</div><h1>Monitoring Virtual Machines</h1>
<div class='content'></div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Azure Monitor</strong>: A comprehensive solution for collecting, analyzing, and acting on telemetry from your cloud and on-premises environments.</li>
<li><strong>Metrics</strong>: Numerical data that describe the performance of a system.</li>
<li><strong>Logs</strong>: Detailed records of events that occur within your system.</li>
<li><strong>Alerts</strong>: Notifications triggered by specific conditions in your metrics or logs.</li>
</ul>
</div><h2>Setting Up Monitoring</h2>
<div class='content'><ol>
<li>
<p><strong>Enable Azure Monitor</strong>:</p>
<ul>
<li>Navigate to the Azure portal.</li>
<li>Select your VM.</li>
<li>Go to the &quot;Monitoring&quot; section and enable Azure Monitor.</li>
</ul>
</li>
<li>
<p><strong>Configure Metrics</strong>:</p>
<ul>
<li>Metrics provide real-time data on VM performance.</li>
<li>Common metrics include CPU usage, memory usage, disk I/O, and network traffic.</li>
</ul>
<pre><code class="language-markdown">| Metric         | Description                        |
|----------------|------------------------------------|
| CPU Usage      | Percentage of CPU utilization      |
| Memory Usage   | Amount of memory being used        |
| Disk I/O       | Read/write operations per second   |
| Network Traffic| Data sent/received over the network|
</code></pre>
</li>
<li>
<p><strong>Collect Logs</strong>:</p>
<ul>
<li>Logs provide detailed insights into system events.</li>
<li>Use Azure Log Analytics to collect and analyze logs.</li>
</ul>
<pre><code class="language-powershell"># Example: Enable diagnostic settings to send logs to Log Analytics
Set-AzDiagnosticSetting -ResourceId &quot;/subscriptions/{subscription-id}/resourceGroups/{resource-group}/providers/Microsoft.Compute/virtualMachines/{vm-name}&quot; -WorkspaceId &quot;/subscriptions/{subscription-id}/resourceGroups/{resource-group}/providers/Microsoft.OperationalInsights/workspaces/{workspace-name}&quot; -Enabled $true
</code></pre>
</li>
<li>
<p><strong>Set Up Alerts</strong>:</p>
<ul>
<li>Alerts notify you when specific conditions are met.</li>
<li>Create an alert rule in the Azure portal.</li>
</ul>
<pre><code class="language-markdown">Steps to create an alert:
- Go to the &quot;Alerts&quot; section in Azure Monitor.
- Click &quot;New alert rule&quot;.
- Define the condition (e.g., CPU usage &gt; 80%).
- Set the action (e.g., send an email notification).
</code></pre>
</li>
</ol>
</div><h1>Troubleshooting Virtual Machines</h1>
<div class='content'></div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Diagnostics</strong>: Tools and techniques to identify and resolve issues.</li>
<li><strong>Azure Resource Health</strong>: Provides information about the health of your Azure resources.</li>
<li><strong>Boot Diagnostics</strong>: Captures console output and screenshots of the VM during the boot process.</li>
<li><strong>Serial Console</strong>: Provides direct access to a VM's serial port for troubleshooting.</li>
</ul>
</div><h2>Common Troubleshooting Scenarios</h2>
<div class='content'><ol>
<li>
<p><strong>VM Not Starting</strong>:</p>
<ul>
<li>Check Azure Resource Health for any known issues.</li>
<li>Use Boot Diagnostics to view the boot logs and screenshots.</li>
</ul>
<pre><code class="language-powershell"># Example: Enable Boot Diagnostics
Set-AzVMBootDiagnostics -ResourceGroupName &quot;myResourceGroup&quot; -VMName &quot;myVM&quot; -Enable $true -StorageAccountName &quot;mystorageaccount&quot;
</code></pre>
</li>
<li>
<p><strong>Performance Issues</strong>:</p>
<ul>
<li>Analyze metrics to identify resource bottlenecks.</li>
<li>Use Azure Monitor to drill down into specific metrics.</li>
</ul>
<pre><code class="language-markdown">Common performance issues:
- High CPU usage: Check for runaway processes.
- High memory usage: Identify memory leaks or high memory-consuming applications.
- Disk I/O bottlenecks: Optimize disk usage or upgrade to a higher performance disk.
</code></pre>
</li>
<li>
<p><strong>Network Connectivity Problems</strong>:</p>
<ul>
<li>Check network security group (NSG) rules.</li>
<li>Use Network Watcher to diagnose network issues.</li>
</ul>
<pre><code class="language-powershell"># Example: Check NSG rules
Get-AzNetworkSecurityGroup -ResourceGroupName &quot;myResourceGroup&quot; -Name &quot;myNSG&quot;
</code></pre>
</li>
<li>
<p><strong>Application Errors</strong>:</p>
<ul>
<li>Review application logs for error messages.</li>
<li>Use Azure Log Analytics to search and analyze logs.</li>
</ul>
<pre><code class="language-kusto">// Example: Query logs in Log Analytics
AppLogs
| where TimeGenerated &gt; ago(1h)
| where Level == &quot;Error&quot;
</code></pre>
</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>Monitoring and troubleshooting VMs in Azure is essential for ensuring the smooth operation of your applications. By leveraging Azure Monitor, metrics, logs, and diagnostic tools, you can proactively manage and resolve issues. As you advance, you will gain deeper insights and more sophisticated techniques to maintain the health and performance of your VMs.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='scaling-virtual-machines'>&#x25C4;Scaling Virtual Machines</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Monitoring and Troubleshooting Virtual Machines</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-azure-app-services'>Introduction to Azure App Services &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
