<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backup and Restore in Redis</title>

    <link rel="alternate" href="https://campusempresa.com/redis/backup-and-restore" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/redis/backup-and-restore" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/redis/backup-and-restore" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/redis/backup-and-restore" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/redis/backup-and-restore" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='persistence-configuration'>&#x25C4;Persistence Configuration</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Backup and Restore in Redis</a>
	</div>
	<div class='col-4 text-end'>
					<a href='authentication'>Authentication &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Backup and restore are crucial operations for maintaining data integrity and ensuring data availability in case of failures. In this section, we will cover the basics of backing up and restoring data in Redis, from simple snapshotting to more advanced techniques.</p>
</div><h1>Backup Strategies</h1>
<div class='content'></div><h2>RDB (Redis Database Backup)</h2>
<div class='content'><ul>
<li><strong>Description</strong>: RDB is a point-in-time snapshot of your dataset saved to disk.</li>
<li><strong>Advantages</strong>:
<ul>
<li>Compact and efficient storage.</li>
<li>Faster recovery times.</li>
</ul>
</li>
<li><strong>Disadvantages</strong>:
<ul>
<li>Data loss between snapshots.</li>
<li>Not suitable for high-write environments.</li>
</ul>
</li>
</ul>
<h4>Creating an RDB Snapshot</h4>
<p>Redis can create an RDB snapshot automatically or manually.</p>
<p><strong>Automatic Snapshot Configuration</strong>:
You can configure Redis to create snapshots at specified intervals using the <code>save</code> directive in the <code>redis.conf</code> file.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2F2ZSA5MDAgMSAgICAjIFNhdmUgdGhlIERCIGlmIGF0IGxlYXN0IDEga2V5IGNoYW5nZWQgaW4gOTAwIHNlY29uZHMgKDE1IG1pbnV0ZXMpCnNhdmUgMzAwIDEwICAgIyBTYXZlIHRoZSBEQiBpZiBhdCBsZWFzdCAxMCBrZXlzIGNoYW5nZWQgaW4gMzAwIHNlY29uZHMgKDUgbWludXRlcykKc2F2ZSA2MCAxMDAwMCAjIFNhdmUgdGhlIERCIGlmIGF0IGxlYXN0IDEwMDAwIGtleXMgY2hhbmdlZCBpbiA2MCBzZWNvbmRzICgxIG1pbnV0ZSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>save 900 1    # Save the DB if at least 1 key changed in 900 seconds (15 minutes)
save 300 10   # Save the DB if at least 10 keys changed in 300 seconds (5 minutes)
save 60 10000 # Save the DB if at least 10000 keys changed in 60 seconds (1 minute)</pre></div><div class='content'><p><strong>Manual Snapshot Creation</strong>:
You can trigger a snapshot manually using the <code>BGSAVE</code> command.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkdTQVZF"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BGSAVE</pre></div><div class='content'><p>This command will create a snapshot in the background.</p>
</div><h2>AOF (Append-Only File)</h2>
<div class='content'><ul>
<li><strong>Description</strong>: AOF logs every write operation received by the server, which can be replayed to reconstruct the dataset.</li>
<li><strong>Advantages</strong>:
<ul>
<li>More durable than RDB.</li>
<li>Can be configured to offer different levels of durability.</li>
</ul>
</li>
<li><strong>Disadvantages</strong>:
<ul>
<li>Larger file sizes.</li>
<li>Slower recovery times compared to RDB.</li>
</ul>
</li>
</ul>
<h4>Configuring AOF</h4>
<p>Enable AOF in the <code>redis.conf</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwZW5kb25seSB5ZXM="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>appendonly yes</pre></div><div class='content'><p>You can also configure the AOF rewrite policy to balance between performance and durability:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwZW5kZnN5bmMgYWx3YXlzICAgICAgICMgU2FmZXN0LCBidXQgc2xvd2VzdAphcHBlbmRmc3luYyBldmVyeXNlYyAgICAgIyBEZWZhdWx0LCBiYWxhbmNlcyBzYWZldHkgYW5kIHBlcmZvcm1hbmNlCmFwcGVuZGZzeW5jIG5vICAgICAgICAgICAjIEZhc3Rlc3QsIGJ1dCBsZWFzdCBzYWZl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>appendfsync always       # Safest, but slowest
appendfsync everysec     # Default, balances safety and performance
appendfsync no           # Fastest, but least safe</pre></div><div class='content'></div><h1>Restore Strategies</h1>
<div class='content'></div><h2>Restoring from RDB</h2>
<div class='content'><p>To restore from an RDB snapshot, simply place the RDB file (<code>dump.rdb</code>) in the Redis data directory and restart the Redis server. Redis will automatically load the snapshot upon startup.</p>
</div><h2>Restoring from AOF</h2>
<div class='content'><p>To restore from an AOF file, place the AOF file (<code>appendonly.aof</code>) in the Redis data directory and restart the Redis server. Redis will replay the AOF file to reconstruct the dataset.</p>
</div><h1>Combining RDB and AOF</h1>
<div class='content'><p>Redis supports using both RDB and AOF together. This provides a balance between fast recovery times (RDB) and durability (AOF).</p>
</div><h2>Configuration</h2>
<div class='content'><p>In the <code>redis.conf</code> file, enable both RDB and AOF:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2F2ZSA5MDAgMQpzYXZlIDMwMCAxMApzYXZlIDYwIDEwMDAwCmFwcGVuZG9ubHkgeWVzCmFwcGVuZGZzeW5jIGV2ZXJ5c2Vj"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>save 900 1
save 300 10
save 60 10000
appendonly yes
appendfsync everysec</pre></div><div class='content'></div><h1>Example: Backup and Restore Workflow</h1>
<div class='content'></div><h2>Backup Workflow</h2>
<div class='content'><ol>
<li><strong>Configure Redis</strong>: Set up RDB and/or AOF in the <code>redis.conf</code> file.</li>
<li><strong>Trigger Snapshot</strong>: Use the <code>BGSAVE</code> command or rely on automatic snapshots.</li>
<li><strong>Store Backup</strong>: Securely store the <code>dump.rdb</code> and/or <code>appendonly.aof</code> files.</li>
</ol>
</div><h2>Restore Workflow</h2>
<div class='content'><ol>
<li><strong>Stop Redis</strong>: Ensure Redis is not running.</li>
<li><strong>Place Backup Files</strong>: Copy the <code>dump.rdb</code> and/or <code>appendonly.aof</code> files to the Redis data directory.</li>
<li><strong>Start Redis</strong>: Restart the Redis server to load the backup files.</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>Understanding how to effectively back up and restore your Redis data is essential for maintaining data integrity and availability. By leveraging RDB snapshots for quick recovery and AOF for durability, you can ensure your Redis deployment is resilient against data loss. Combining both methods provides a balanced approach, offering both performance and reliability.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='persistence-configuration'>&#x25C4;Persistence Configuration</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Backup and Restore in Redis</a>
	</div>
	<div class='col-4 text-end'>
					<a href='authentication'>Authentication &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
