<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eviction Policies</title>

    <link rel="alternate" href="https://campusempresa.com/redis/eviction-policies" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/redis/eviction-policies" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/redis/eviction-policies" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/redis/eviction-policies" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/redis/eviction-policies" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='latency-and-throughput'>&#x25C4;Latency and Throughput</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Eviction Policies</a>
	</div>
	<div class='col-4 text-end'>
					<a href='performance-tuning'>Performance Tuning &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore the concept of eviction policies in Redis. Eviction policies are crucial for managing memory usage and ensuring that Redis operates efficiently, especially when it is used as a cache.</p>
</div><h1>What are Eviction Policies?</h1>
<div class='content'><p>Eviction policies determine how Redis handles situations when it reaches its maximum memory limit. When Redis is full, it needs to decide which keys to remove to make space for new data. This process is known as eviction.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Memory Limit</strong>: The maximum amount of memory Redis is allowed to use, configured via the <code>maxmemory</code> directive.</li>
<li><strong>Eviction Policy</strong>: The strategy Redis uses to decide which keys to evict when the memory limit is reached.</li>
</ul>
</div><h1>Configuring Memory Limit</h1>
<div class='content'><p>To set a memory limit in Redis, you can use the <code>maxmemory</code> directive in the Redis configuration file (<code>redis.conf</code>):</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bWF4bWVtb3J5IDI1Nm1i"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>maxmemory 256mb</pre></div><div class='content'><p>Alternatively, you can set it dynamically using the <code>CONFIG SET</code> command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q09ORklHIFNFVCBtYXhtZW1vcnkgMjU2bWI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CONFIG SET maxmemory 256mb</pre></div><div class='content'></div><h1>Types of Eviction Policies</h1>
<div class='content'><p>Redis offers several eviction policies, each suitable for different use cases. Here are the main eviction policies:</p>
<ol>
<li><strong>noeviction</strong>: Returns an error when the memory limit is reached. This is the default policy.</li>
<li><strong>allkeys-lru</strong>: Evicts the least recently used (LRU) keys, regardless of their expiration time.</li>
<li><strong>volatile-lru</strong>: Evicts the least recently used (LRU) keys with an expiration time.</li>
<li><strong>allkeys-random</strong>: Evicts random keys, regardless of their expiration time.</li>
<li><strong>volatile-random</strong>: Evicts random keys with an expiration time.</li>
<li><strong>volatile-ttl</strong>: Evicts keys with the shortest time-to-live (TTL).</li>
</ol>
</div><h2>Comparison of Eviction Policies</h2>
<div class='content'><p>| Policy           | Description                                      | Use Case                                      |
|------------------|--------------------------------------------------|-----------------------------------------------|
| noeviction       | Returns an error when memory limit is reached    | When you want to ensure data is never evicted |
| allkeys-lru      | Evicts least recently used keys                  | General caching                               |
| volatile-lru     | Evicts least recently used keys with expiration  | Caching with TTL                              |
| allkeys-random   | Evicts random keys                               | When eviction pattern is not important        |
| volatile-random  | Evicts random keys with expiration               | When eviction pattern is not important, with TTL |
| volatile-ttl     | Evicts keys with shortest TTL                    | When you want to prioritize TTL               |</p>
</div><h1>Setting Eviction Policies</h1>
<div class='content'><p>You can set the eviction policy in the Redis configuration file (<code>redis.conf</code>) using the <code>maxmemory-policy</code> directive:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bWF4bWVtb3J5LXBvbGljeSBhbGxrZXlzLWxydQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>maxmemory-policy allkeys-lru</pre></div><div class='content'><p>Or dynamically using the <code>CONFIG SET</code> command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q09ORklHIFNFVCBtYXhtZW1vcnktcG9saWN5IGFsbGtleXMtbHJ1"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CONFIG SET maxmemory-policy allkeys-lru</pre></div><div class='content'></div><h1>Code Examples</h1>
<div class='content'></div><h2>Example 1: Setting Memory Limit and Eviction Policy</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBJbiByZWRpcy5jb25mCm1heG1lbW9yeSAyNTZtYgptYXhtZW1vcnktcG9saWN5IGFsbGtleXMtbHJ1"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># In redis.conf
maxmemory 256mb
maxmemory-policy allkeys-lru</pre></div><div class='content'></div><h2>Example 2: Dynamically Setting Memory Limit and Eviction Policy</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("MTI3LjAuMC4xOjYzNzk+IENPTkZJRyBTRVQgbWF4bWVtb3J5IDI1Nm1iCk9LCjEyNy4wLjAuMTo2Mzc5PiBDT05GSUcgU0VUIG1heG1lbW9yeS1wb2xpY3kgYWxsa2V5cy1scnUKT0s="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>127.0.0.1:6379&gt; CONFIG SET maxmemory 256mb
OK
127.0.0.1:6379&gt; CONFIG SET maxmemory-policy allkeys-lru
OK</pre></div><div class='content'></div><h2>Example 3: Observing Eviction in Action</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBTZXQgbWVtb3J5IGxpbWl0IHRvIGEgc21hbGwgdmFsdWUgZm9yIHRlc3RpbmcKMTI3LjAuMC4xOjYzNzk+IENPTkZJRyBTRVQgbWF4bWVtb3J5IDFtYgpPSwoxMjcuMC4wLjE6NjM3OT4gQ09ORklHIFNFVCBtYXhtZW1vcnktcG9saWN5IGFsbGtleXMtbHJ1Ck9LCgojIEFkZCBrZXlzIHVudGlsIGV2aWN0aW9uIG9jY3VycwoxMjcuMC4wLjE6NjM3OT4gU0VUIGtleTEgInZhbHVlMSIKT0sKMTI3LjAuMC4xOjYzNzk+IFNFVCBrZXkyICJ2YWx1ZTIiCk9LCiMgQ29udGludWUgYWRkaW5nIGtleXMuLi4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Set memory limit to a small value for testing
127.0.0.1:6379&gt; CONFIG SET maxmemory 1mb
OK
127.0.0.1:6379&gt; CONFIG SET maxmemory-policy allkeys-lru
OK

# Add keys until eviction occurs
127.0.0.1:6379&gt; SET key1 &quot;value1&quot;
OK
127.0.0.1:6379&gt; SET key2 &quot;value2&quot;
OK
# Continue adding keys...</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Understanding and configuring eviction policies in Redis is essential for managing memory usage effectively. By choosing the appropriate eviction policy, you can ensure that Redis performs optimally for your specific use case. Whether you need strict control over memory usage or a flexible caching strategy, Redis provides a variety of options to suit your needs.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='latency-and-throughput'>&#x25C4;Latency and Throughput</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Eviction Policies</a>
	</div>
	<div class='col-4 text-end'>
					<a href='performance-tuning'>Performance Tuning &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
