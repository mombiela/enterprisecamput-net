<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lazy Evaluation in F#</title>

    <link rel="alternate" href="https://campusempresa.com/fsharp/lazy-evaluation" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/fsharp/lazy-evaluation" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/fsharp/lazy-evaluation" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/fsharp/lazy-evaluation" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/fsharp/lazy-evaluation" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='async-programming'>&#x25C4;Async Programming</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Lazy Evaluation in F#</a>
	</div>
	<div class='col-4 text-end'>
					<a href='classes-and-objects'>Classes and Objects &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Lazy evaluation is a powerful concept in functional programming that can help improve performance and manage resources efficiently. In this section, we will explore what lazy evaluation is, how it works in F#, and how to use it effectively.</p>
</div><h1>What is Lazy Evaluation?</h1>
<div class='content'><p>Lazy evaluation is a strategy where expressions are not evaluated until their values are actually needed. This can lead to performance improvements by avoiding unnecessary calculations and can also help in dealing with infinite data structures.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Deferred Execution</strong>: Expressions are not evaluated until their results are required.</li>
<li><strong>Thunks</strong>: A deferred computation, which is a function with no arguments that encapsulates the computation.</li>
<li><strong>Memoization</strong>: Storing the results of expensive function calls and reusing them when the same inputs occur again.</li>
</ul>
</div><h1>Lazy Evaluation in F#</h1>
<div class='content'><p>In F#, lazy evaluation can be achieved using the <code>Lazy&lt;'T&gt;</code> type. This type encapsulates a value that is computed only when it is accessed for the first time.</p>
</div><h2>Creating Lazy Values</h2>
<div class='content'><p>To create a lazy value, you use the <code>Lazy</code> module. Here’s a simple example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGxhenlWYWx1ZSA9IGxhenkgKHByaW50Zm4gIkNvbXB1dGluZy4uLiI7IDQyKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let lazyValue = lazy (printfn &quot;Computing...&quot;; 42)</pre></div><div class='content'><p>In this example, the expression <code>printfn &quot;Computing...&quot;; 42</code> is not executed immediately. Instead, it is deferred until the value is accessed.</p>
</div><h2>Accessing Lazy Values</h2>
<div class='content'><p>To access the value of a <code>Lazy&lt;'T&gt;</code>, you use the <code>Force</code> method:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IHJlc3VsdCA9IGxhenlWYWx1ZS5Gb3JjZSgpCnByaW50Zm4gIlJlc3VsdDogJWQiIHJlc3VsdA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let result = lazyValue.Force()
printfn &quot;Result: %d&quot; result</pre></div><div class='content'><p>When <code>Force</code> is called, the deferred computation is executed, and the result is returned. If <code>Force</code> is called again, the cached result is returned without re-evaluating the expression.</p>
</div><h2>Example: Lazy Fibonacci Sequence</h2>
<div class='content'><p>Let's create a lazy infinite sequence of Fibonacci numbers:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IHJlYyBmaWJzID0gCiAgICBzZXEgewogICAgICAgIHlpZWxkIDAKICAgICAgICB5aWVsZCAxCiAgICAgICAgbGV0IHJlYyBmaWIgYSBiID0gCiAgICAgICAgICAgIHNlcSB7CiAgICAgICAgICAgICAgICB5aWVsZCBhICsgYgogICAgICAgICAgICAgICAgeWllbGQhIGZpYiBiIChhICsgYikKICAgICAgICAgICAgfQogICAgICAgIHlpZWxkISBmaWIgMCAxCiAgICB9CgpsZXQgbGF6eUZpYnMgPSBsYXp5IChTZXEudGFrZSAxMCBmaWJzIHw+IFNlcS50b0xpc3Qp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let rec fibs = 
    seq {
        yield 0
        yield 1
        let rec fib a b = 
            seq {
                yield a + b
                yield! fib b (a + b)
            }
        yield! fib 0 1
    }

let lazyFibs = lazy (Seq.take 10 fibs |&gt; Seq.toList)</pre></div><div class='content'><p>In this example, <code>fibs</code> is an infinite sequence of Fibonacci numbers. By using <code>lazy</code>, we defer the computation of the first 10 Fibonacci numbers until they are actually needed.</p>
</div><h2>Comparison: Eager vs Lazy Evaluation</h2>
<div class='content'><p>| Aspect                | Eager Evaluation                          | Lazy Evaluation                           |
|-----------------------|-------------------------------------------|-------------------------------------------|
| Evaluation Strategy   | Immediate                                  | Deferred                                  |
| Resource Management   | Can lead to unnecessary computations       | Computes only when needed                 |
| Handling Infinite Data| Not feasible                               | Feasible and efficient                    |
| Example               | <code>let x = 1 + 2</code> (evaluated immediately)    | <code>let x = lazy (1 + 2)</code> (evaluated on access)|</p>
</div><h1>Practical Use Cases</h1>
<div class='content'><ul>
<li><strong>Performance Optimization</strong>: Avoiding unnecessary computations can significantly improve performance.</li>
<li><strong>Resource Management</strong>: Deferring expensive operations until they are needed can help manage resources more efficiently.</li>
<li><strong>Infinite Data Structures</strong>: Working with potentially infinite sequences or data structures becomes feasible.</li>
</ul>
</div><h2>Exercise: Implement Lazy Factorial</h2>
<div class='content'><p>Try implementing a lazy factorial sequence. Here’s a starting point:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IHJlYyBmYWN0b3JpYWwgbiA9IAogICAgaWYgbiA9IDAgdGhlbiAxCiAgICBlbHNlIG4gKiBmYWN0b3JpYWwgKG4gLSAxKQoKbGV0IGxhenlGYWN0b3JpYWwgbiA9IGxhenkgKGZhY3RvcmlhbCBuKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let rec factorial n = 
    if n = 0 then 1
    else n * factorial (n - 1)

let lazyFactorial n = lazy (factorial n)</pre></div><div class='content'><ol>
<li>Modify the <code>factorial</code> function to use a sequence.</li>
<li>Create a lazy sequence of factorials.</li>
<li>Access the first 10 factorials using <code>Force</code>.</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>Lazy evaluation is a powerful tool in F# that allows for deferred computation, efficient resource management, and handling of infinite data structures. By understanding and utilizing lazy evaluation, you can write more efficient and effective F# programs. Remember to use lazy evaluation judiciously, as it can introduce complexity if not managed properly.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='async-programming'>&#x25C4;Async Programming</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Lazy Evaluation in F#</a>
	</div>
	<div class='col-4 text-end'>
					<a href='classes-and-objects'>Classes and Objects &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
