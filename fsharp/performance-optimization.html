<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Optimization in F#</title>

    <link rel="alternate" href="https://campusempresa.com/fsharp/performance-optimization" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/fsharp/performance-optimization" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/fsharp/performance-optimization" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/fsharp/performance-optimization" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/fsharp/performance-optimization" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='design-patterns'>&#x25C4;Design Patterns in F#</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Performance Optimization in F#</a>
	</div>
	<div class='col-4 text-end'>
					<a href='security-considerations'>Security Considerations &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Performance optimization is a crucial aspect of software development, ensuring that applications run efficiently and effectively. This topic will guide you through various techniques and best practices for optimizing F# code, from beginner to advanced levels.</p>
</div><h1>Introduction to Performance Optimization</h1>
<div class='content'><p>Performance optimization involves improving the speed and efficiency of your code. This can be achieved through various methods, such as optimizing algorithms, reducing memory usage, and leveraging parallelism.</p>
<ul>
<li><strong>Why Optimize?</strong>
<ul>
<li>Improve user experience by reducing latency.</li>
<li>Lower operational costs by using fewer resources.</li>
<li>Enhance scalability to handle more users or data.</li>
</ul>
</li>
</ul>
</div><h1>Basic Optimization Techniques</h1>
<div class='content'></div><h2>Efficient Data Structures</h2>
<div class='content'><p>Choosing the right data structure can significantly impact performance.</p>
<ul>
<li><strong>Lists vs. Arrays</strong>
<ul>
<li>Lists are immutable and linked, making them ideal for functional programming but potentially slower for random access.</li>
<li>Arrays are mutable and provide faster random access but are less idiomatic in functional programming.</li>
</ul>
</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gTGlzdCBleGFtcGxlCmxldCBudW1iZXJzTGlzdCA9IFsxOyAyOyAzOyA0OyA1XQoKLy8gQXJyYXkgZXhhbXBsZQpsZXQgbnVtYmVyc0FycmF5ID0gW3wgMTsgMjsgMzsgNDsgNSB8XQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// List example
let numbersList = [1; 2; 3; 4; 5]

// Array example
let numbersArray = [| 1; 2; 3; 4; 5 |]</pre></div><div class='content'></div><h2>Tail Recursion</h2>
<div class='content'><p>Tail recursion helps optimize recursive functions by reusing stack frames, preventing stack overflow.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gTm9uLXRhaWwtcmVjdXJzaXZlIGZhY3RvcmlhbApsZXQgcmVjIGZhY3RvcmlhbCBuID0KICAgIGlmIG4gPSAwIHRoZW4gMQogICAgZWxzZSBuICogZmFjdG9yaWFsIChuIC0gMSkKCi8vIFRhaWwtcmVjdXJzaXZlIGZhY3RvcmlhbApsZXQgZmFjdG9yaWFsVGFpbFJlYyBuID0KICAgIGxldCByZWMgbG9vcCBhY2MgbiA9CiAgICAgICAgaWYgbiA9IDAgdGhlbiBhY2MKICAgICAgICBlbHNlIGxvb3AgKGFjYyAqIG4pIChuIC0gMSkKICAgIGxvb3AgMSBu"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Non-tail-recursive factorial
let rec factorial n =
    if n = 0 then 1
    else n * factorial (n - 1)

// Tail-recursive factorial
let factorialTailRec n =
    let rec loop acc n =
        if n = 0 then acc
        else loop (acc * n) (n - 1)
    loop 1 n</pre></div><div class='content'></div><h1>Intermediate Optimization Techniques</h1>
<div class='content'></div><h2>Memoization</h2>
<div class='content'><p>Memoization stores the results of expensive function calls and returns the cached result when the same inputs occur again.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IG1lbW9pemUgZiA9CiAgICBsZXQgY2FjaGUgPSBTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5EaWN0aW9uYXJ5PF8sIF8+KCkKICAgIGZ1biB4IC0+CiAgICAgICAgaWYgY2FjaGUuQ29udGFpbnNLZXkoeCkgdGhlbiBjYWNoZS5beF0KICAgICAgICBlbHNlCiAgICAgICAgICAgIGxldCByZXMgPSBmIHgKICAgICAgICAgICAgY2FjaGUuW3hdIDwtIHJlcwogICAgICAgICAgICByZXMKCmxldCByZWMgZmliIG4gPQogICAgaWYgbiA8PSAxIHRoZW4gbgogICAgZWxzZSBmaWIgKG4gLSAxKSArIGZpYiAobiAtIDIpCgpsZXQgbWVtb2l6ZWRGaWIgPSBtZW1vaXplIGZpYg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let memoize f =
    let cache = System.Collections.Generic.Dictionary&lt;_, _&gt;()
    fun x -&gt;
        if cache.ContainsKey(x) then cache.[x]
        else
            let res = f x
            cache.[x] &lt;- res
            res

let rec fib n =
    if n &lt;= 1 then n
    else fib (n - 1) + fib (n - 2)

let memoizedFib = memoize fib</pre></div><div class='content'></div><h2>Parallelism</h2>
<div class='content'><p>Leveraging parallelism can significantly improve performance for CPU-bound tasks.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3BlbiBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzCgpsZXQgcGFyYWxsZWxTdW0gKGFycjogaW50W10pID0KICAgIGxldCBwYXJ0aXRpb25TaXplID0gYXJyLkxlbmd0aCAvIEVudmlyb25tZW50LlByb2Nlc3NvckNvdW50CiAgICBsZXQgcGFydGl0aW9ucyA9IAogICAgICAgIFt8IGZvciBpIGluIDAgLi4gRW52aXJvbm1lbnQuUHJvY2Vzc29yQ291bnQgLSAxIC0+CiAgICAgICAgICAgIGxldCBzdGFydCA9IGkgKiBwYXJ0aXRpb25TaXplCiAgICAgICAgICAgIGxldCBlbmRfID0gaWYgaSA9IEVudmlyb25tZW50LlByb2Nlc3NvckNvdW50IC0gMSB0aGVuIGFyci5MZW5ndGggZWxzZSAoaSArIDEpICogcGFydGl0aW9uU2l6ZQogICAgICAgICAgICBUYXNrLlJ1bihmdW4gKCkgLT4gQXJyYXkuc3VtIChBcnJheS5zdWIgYXJyIHN0YXJ0IChlbmRfIC0gc3RhcnQpKSkgfF0KICAgIFRhc2suV2hlbkFsbChwYXJ0aXRpb25zKSB8PiBUYXNrLlJlc3VsdCB8PiBBcnJheS5zdW0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>open System.Threading.Tasks

let parallelSum (arr: int[]) =
    let partitionSize = arr.Length / Environment.ProcessorCount
    let partitions = 
        [| for i in 0 .. Environment.ProcessorCount - 1 -&gt;
            let start = i * partitionSize
            let end_ = if i = Environment.ProcessorCount - 1 then arr.Length else (i + 1) * partitionSize
            Task.Run(fun () -&gt; Array.sum (Array.sub arr start (end_ - start))) |]
    Task.WhenAll(partitions) |&gt; Task.Result |&gt; Array.sum</pre></div><div class='content'></div><h1>Advanced Optimization Techniques</h1>
<div class='content'></div><h2>Profiling and Benchmarking</h2>
<div class='content'><p>Profiling and benchmarking help identify performance bottlenecks and measure the impact of optimizations.</p>
<ul>
<li>
<p><strong>Profiling Tools</strong></p>
<ul>
<li>Visual Studio Profiler</li>
<li>JetBrains dotTrace</li>
</ul>
</li>
<li>
<p><strong>Benchmarking Libraries</strong></p>
<ul>
<li>BenchmarkDotNet</li>
</ul>
</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3BlbiBCZW5jaG1hcmtEb3ROZXQuQXR0cmlidXRlcwpvcGVuIEJlbmNobWFya0RvdE5ldC5SdW5uaW5nCgp0eXBlIEJlbmNobWFya3MoKSA9CiAgICBbPEJlbmNobWFyaz5dCiAgICBtZW1iZXIgXy5TdW1BcnJheSgpID0KICAgICAgICBsZXQgYXJyID0gW3wgMSAuLiAxMDAwMDAwIHxdCiAgICAgICAgQXJyYXkuc3VtIGFycgoKICAgIFs8QmVuY2htYXJrPl0KICAgIG1lbWJlciBfLlN1bUxpc3QoKSA9CiAgICAgICAgbGV0IGxzdCA9IFsgMSAuLiAxMDAwMDAwIF0KICAgICAgICBMaXN0LnN1bSBsc3QKCkJlbmNobWFya1J1bm5lci5SdW48QmVuY2htYXJrcz4oKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>open BenchmarkDotNet.Attributes
open BenchmarkDotNet.Running

type Benchmarks() =
    [&lt;Benchmark&gt;]
    member _.SumArray() =
        let arr = [| 1 .. 1000000 |]
        Array.sum arr

    [&lt;Benchmark&gt;]
    member _.SumList() =
        let lst = [ 1 .. 1000000 ]
        List.sum lst

BenchmarkRunner.Run&lt;Benchmarks&gt;()</pre></div><div class='content'></div><h2>Asynchronous Programming</h2>
<div class='content'><p>Asynchronous programming can improve the responsiveness of applications by performing I/O-bound tasks without blocking the main thread.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3BlbiBTeXN0ZW0uTmV0Lkh0dHAKb3BlbiBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzCgpsZXQgZmV0Y2hVcmxBc3luYyAodXJsOiBzdHJpbmcpID0KICAgIGFzeW5jIHsKICAgICAgICB1c2UgY2xpZW50ID0gbmV3IEh0dHBDbGllbnQoKQogICAgICAgIGxldCEgcmVzcG9uc2UgPSBjbGllbnQuR2V0U3RyaW5nQXN5bmModXJsKSB8PiBBc3luYy5Bd2FpdFRhc2sKICAgICAgICByZXR1cm4gcmVzcG9uc2UKICAgIH0KCmxldCB1cmxzID0gWyAiaHR0cDovL2V4YW1wbGUuY29tIjsgImh0dHA6Ly9leGFtcGxlLm9yZyIgXQoKbGV0IGZldGNoQWxsVXJsc0FzeW5jICgpID0KICAgIHVybHMKICAgIHw+IExpc3QubWFwIGZldGNoVXJsQXN5bmMKICAgIHw+IEFzeW5jLlBhcmFsbGVsCiAgICB8PiBBc3luYy5SdW5TeW5jaHJvbm91c2x5"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>open System.Net.Http
open System.Threading.Tasks

let fetchUrlAsync (url: string) =
    async {
        use client = new HttpClient()
        let! response = client.GetStringAsync(url) |&gt; Async.AwaitTask
        return response
    }

let urls = [ &quot;http://example.com&quot;; &quot;http://example.org&quot; ]

let fetchAllUrlsAsync () =
    urls
    |&gt; List.map fetchUrlAsync
    |&gt; Async.Parallel
    |&gt; Async.RunSynchronously</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Performance optimization in F# involves a combination of choosing the right data structures, writing efficient algorithms, and leveraging advanced techniques like memoization, parallelism, and asynchronous programming. By profiling and benchmarking your code, you can identify bottlenecks and measure the impact of your optimizations, ensuring that your applications run efficiently and effectively.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='design-patterns'>&#x25C4;Design Patterns in F#</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Performance Optimization in F#</a>
	</div>
	<div class='col-4 text-end'>
					<a href='security-considerations'>Security Considerations &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
