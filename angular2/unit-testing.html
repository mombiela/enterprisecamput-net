<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit Testing in Angular 2+</title>

    <link rel="alternate" href="https://campusempresa.com/angular2/unit-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/angular2/unit-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/angular2/unit-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/angular2/unit-testing" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/angular2/unit-testing" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='advanced-ngrx'>&#x25C4;Advanced NgRx</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Unit Testing in Angular 2+</a>
	</div>
	<div class='col-4 text-end'>
					<a href='component-testing'>Component Testing &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Unit testing is a critical part of developing robust and maintainable applications. In this section, we will cover the basics of unit testing in Angular 2+ and progress to more advanced topics.</p>
</div><h1>Introduction to Unit Testing</h1>
<div class='content'><ul>
<li><strong>Definition</strong>: Unit testing involves testing individual components or pieces of code to ensure they work as expected.</li>
<li><strong>Importance</strong>: Helps in identifying bugs early, facilitates refactoring, and ensures code reliability.</li>
</ul>
</div><h1>Setting Up Unit Testing in Angular</h1>
<div class='content'><p>Angular uses Jasmine for writing tests and Karma as the test runner. These tools are integrated into Angular CLI.</p>
</div><h2>Installing Angular CLI</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgLWcgQGFuZ3VsYXIvY2xp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install -g @angular/cli</pre></div><div class='content'></div><h2>Creating a New Angular Project</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmcgbmV3IG15LWFuZ3VsYXItYXBwCmNkIG15LWFuZ3VsYXItYXBw"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ng new my-angular-app
cd my-angular-app</pre></div><div class='content'></div><h2>Running Tests</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmcgdGVzdA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ng test</pre></div><div class='content'><p>This command will start the Karma test runner and execute all the tests in your project.</p>
</div><h1>Writing Your First Test</h1>
<div class='content'></div><h2>Basic Test Structure</h2>
<div class='content'><p>A basic test in Angular looks like this:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CmltcG9ydCB7IEFwcENvbXBvbmVudCB9IGZyb20gJy4vYXBwLmNvbXBvbmVudCc7CgpkZXNjcmliZSgnQXBwQ29tcG9uZW50JywgKCkgPT4gewogIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4gewogICAgYXdhaXQgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHsKICAgICAgZGVjbGFyYXRpb25zOiBbCiAgICAgICAgQXBwQ29tcG9uZW50CiAgICAgIF0sCiAgICB9KS5jb21waWxlQ29tcG9uZW50cygpOwogIH0pOwoKICBpdCgnc2hvdWxkIGNyZWF0ZSB0aGUgYXBwJywgKCkgPT4gewogICAgY29uc3QgZml4dHVyZSA9IFRlc3RCZWQuY3JlYXRlQ29tcG9uZW50KEFwcENvbXBvbmVudCk7CiAgICBjb25zdCBhcHAgPSBmaXh0dXJlLmNvbXBvbmVudEluc3RhbmNlOwogICAgZXhwZWN0KGFwcCkudG9CZVRydXRoeSgpOwogIH0pOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { TestBed } from '@angular/core/testing';
import { AppComponent } from './app.component';

describe('AppComponent', () =&gt; {
  beforeEach(async () =&gt; {
    await TestBed.configureTestingModule({
      declarations: [
        AppComponent
      ],
    }).compileComponents();
  });

  it('should create the app', () =&gt; {
    const fixture = TestBed.createComponent(AppComponent);
    const app = fixture.componentInstance;
    expect(app).toBeTruthy();
  });
});</pre></div><div class='content'><ul>
<li><strong>describe</strong>: Defines a test suite.</li>
<li><strong>beforeEach</strong>: Runs before each test in the suite.</li>
<li><strong>it</strong>: Defines a single test.</li>
<li><strong>expect</strong>: Makes an assertion about the code.</li>
</ul>
</div><h1>Testing Components</h1>
<div class='content'></div><h2>Component Test Example</h2>
<div class='content'><p>Let's test a simple component:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CgpAQ29tcG9uZW50KHsKICBzZWxlY3RvcjogJ2FwcC1oZWxsbycsCiAgdGVtcGxhdGU6ICc8aDE+SGVsbG8sIHt7bmFtZX19ITwvaDE+Jwp9KQpleHBvcnQgY2xhc3MgSGVsbG9Db21wb25lbnQgewogIG5hbWU6IHN0cmluZyA9ICdXb3JsZCc7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Component } from '@angular/core';

@Component({
  selector: 'app-hello',
  template: '&lt;h1&gt;Hello, {{name}}!&lt;/h1&gt;'
})
export class HelloComponent {
  name: string = 'World';
}</pre></div><div class='content'></div><h2>Writing Tests for the Component</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgVGVzdEJlZCwgQ29tcG9uZW50Rml4dHVyZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CmltcG9ydCB7IEhlbGxvQ29tcG9uZW50IH0gZnJvbSAnLi9oZWxsby5jb21wb25lbnQnOwoKZGVzY3JpYmUoJ0hlbGxvQ29tcG9uZW50JywgKCkgPT4gewogIGxldCBjb21wb25lbnQ6IEhlbGxvQ29tcG9uZW50OwogIGxldCBmaXh0dXJlOiBDb21wb25lbnRGaXh0dXJlPEhlbGxvQ29tcG9uZW50PjsKCiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7CiAgICBhd2FpdCBUZXN0QmVkLmNvbmZpZ3VyZVRlc3RpbmdNb2R1bGUoewogICAgICBkZWNsYXJhdGlvbnM6IFsgSGVsbG9Db21wb25lbnQgXQogICAgfSkKICAgIC5jb21waWxlQ29tcG9uZW50cygpOwogIH0pOwoKICBiZWZvcmVFYWNoKCgpID0+IHsKICAgIGZpeHR1cmUgPSBUZXN0QmVkLmNyZWF0ZUNvbXBvbmVudChIZWxsb0NvbXBvbmVudCk7CiAgICBjb21wb25lbnQgPSBmaXh0dXJlLmNvbXBvbmVudEluc3RhbmNlOwogICAgZml4dHVyZS5kZXRlY3RDaGFuZ2VzKCk7CiAgfSk7CgogIGl0KCdzaG91bGQgY3JlYXRlJywgKCkgPT4gewogICAgZXhwZWN0KGNvbXBvbmVudCkudG9CZVRydXRoeSgpOwogIH0pOwoKICBpdCgnc2hvdWxkIGhhdmUgdGhlIGRlZmF1bHQgbmFtZSBhcyAiV29ybGQiJywgKCkgPT4gewogICAgZXhwZWN0KGNvbXBvbmVudC5uYW1lKS50b0JlKCdXb3JsZCcpOwogIH0pOwoKICBpdCgnc2hvdWxkIHJlbmRlciB0aGUgbmFtZSBpbiB0aGUgdGVtcGxhdGUnLCAoKSA9PiB7CiAgICBjb25zdCBjb21waWxlZCA9IGZpeHR1cmUubmF0aXZlRWxlbWVudDsKICAgIGV4cGVjdChjb21waWxlZC5xdWVyeVNlbGVjdG9yKCdoMScpLnRleHRDb250ZW50KS50b0NvbnRhaW4oJ0hlbGxvLCBXb3JsZCEnKTsKICB9KTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { TestBed, ComponentFixture } from '@angular/core/testing';
import { HelloComponent } from './hello.component';

describe('HelloComponent', () =&gt; {
  let component: HelloComponent;
  let fixture: ComponentFixture&lt;HelloComponent&gt;;

  beforeEach(async () =&gt; {
    await TestBed.configureTestingModule({
      declarations: [ HelloComponent ]
    })
    .compileComponents();
  });

  beforeEach(() =&gt; {
    fixture = TestBed.createComponent(HelloComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () =&gt; {
    expect(component).toBeTruthy();
  });

  it('should have the default name as &quot;World&quot;', () =&gt; {
    expect(component.name).toBe('World');
  });

  it('should render the name in the template', () =&gt; {
    const compiled = fixture.nativeElement;
    expect(compiled.querySelector('h1').textContent).toContain('Hello, World!');
  });
});</pre></div><div class='content'></div><h1>Testing Services</h1>
<div class='content'></div><h2>Service Test Example</h2>
<div class='content'><p>Let's test a simple service:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwoKQEluamVjdGFibGUoewogIHByb3ZpZGVkSW46ICdyb290Jwp9KQpleHBvcnQgY2xhc3MgRGF0YVNlcnZpY2UgewogIGdldERhdGEoKSB7CiAgICByZXR1cm4gJ2RhdGEnOwogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class DataService {
  getData() {
    return 'data';
  }
}</pre></div><div class='content'></div><h2>Writing Tests for the Service</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CmltcG9ydCB7IERhdGFTZXJ2aWNlIH0gZnJvbSAnLi9kYXRhLnNlcnZpY2UnOwoKZGVzY3JpYmUoJ0RhdGFTZXJ2aWNlJywgKCkgPT4gewogIGxldCBzZXJ2aWNlOiBEYXRhU2VydmljZTsKCiAgYmVmb3JlRWFjaCgoKSA9PiB7CiAgICBUZXN0QmVkLmNvbmZpZ3VyZVRlc3RpbmdNb2R1bGUoe30pOwogICAgc2VydmljZSA9IFRlc3RCZWQuaW5qZWN0KERhdGFTZXJ2aWNlKTsKICB9KTsKCiAgaXQoJ3Nob3VsZCBiZSBjcmVhdGVkJywgKCkgPT4gewogICAgZXhwZWN0KHNlcnZpY2UpLnRvQmVUcnV0aHkoKTsKICB9KTsKCiAgaXQoJ3Nob3VsZCByZXR1cm4gImRhdGEiJywgKCkgPT4gewogICAgZXhwZWN0KHNlcnZpY2UuZ2V0RGF0YSgpKS50b0JlKCdkYXRhJyk7CiAgfSk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { TestBed } from '@angular/core/testing';
import { DataService } from './data.service';

describe('DataService', () =&gt; {
  let service: DataService;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({});
    service = TestBed.inject(DataService);
  });

  it('should be created', () =&gt; {
    expect(service).toBeTruthy();
  });

  it('should return &quot;data&quot;', () =&gt; {
    expect(service.getData()).toBe('data');
  });
});</pre></div><div class='content'></div><h1>Advanced Topics</h1>
<div class='content'></div><h2>Mocking Dependencies</h2>
<div class='content'><p>When testing components or services that have dependencies, you may need to mock those dependencies.</p>
<h4>Mocking a Service</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CmltcG9ydCB7IERhdGFTZXJ2aWNlIH0gZnJvbSAnLi9kYXRhLnNlcnZpY2UnOwppbXBvcnQgeyBBbm90aGVyU2VydmljZSB9IGZyb20gJy4vYW5vdGhlci5zZXJ2aWNlJzsKCmNsYXNzIE1vY2tBbm90aGVyU2VydmljZSB7CiAgZ2V0VmFsdWUoKSB7CiAgICByZXR1cm4gJ21vY2sgdmFsdWUnOwogIH0KfQoKZGVzY3JpYmUoJ0RhdGFTZXJ2aWNlIHdpdGggTW9jaycsICgpID0+IHsKICBsZXQgc2VydmljZTogRGF0YVNlcnZpY2U7CgogIGJlZm9yZUVhY2goKCkgPT4gewogICAgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHsKICAgICAgcHJvdmlkZXJzOiBbCiAgICAgICAgRGF0YVNlcnZpY2UsCiAgICAgICAgeyBwcm92aWRlOiBBbm90aGVyU2VydmljZSwgdXNlQ2xhc3M6IE1vY2tBbm90aGVyU2VydmljZSB9CiAgICAgIF0KICAgIH0pOwogICAgc2VydmljZSA9IFRlc3RCZWQuaW5qZWN0KERhdGFTZXJ2aWNlKTsKICB9KTsKCiAgaXQoJ3Nob3VsZCB1c2UgdGhlIG1vY2sgc2VydmljZScsICgpID0+IHsKICAgIGNvbnN0IGFub3RoZXJTZXJ2aWNlID0gVGVzdEJlZC5pbmplY3QoQW5vdGhlclNlcnZpY2UpOwogICAgZXhwZWN0KGFub3RoZXJTZXJ2aWNlLmdldFZhbHVlKCkpLnRvQmUoJ21vY2sgdmFsdWUnKTsKICB9KTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { TestBed } from '@angular/core/testing';
import { DataService } from './data.service';
import { AnotherService } from './another.service';

class MockAnotherService {
  getValue() {
    return 'mock value';
  }
}

describe('DataService with Mock', () =&gt; {
  let service: DataService;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({
      providers: [
        DataService,
        { provide: AnotherService, useClass: MockAnotherService }
      ]
    });
    service = TestBed.inject(DataService);
  });

  it('should use the mock service', () =&gt; {
    const anotherService = TestBed.inject(AnotherService);
    expect(anotherService.getValue()).toBe('mock value');
  });
});</pre></div><div class='content'></div><h2>Testing Asynchronous Code</h2>
<div class='content'><p>Angular provides utilities to test asynchronous code, such as <code>fakeAsync</code> and <code>tick</code>.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgZmFrZUFzeW5jLCB0aWNrIH0gZnJvbSAnQGFuZ3VsYXIvY29yZS90ZXN0aW5nJzsKCml0KCdzaG91bGQgaGFuZGxlIGFzeW5jaHJvbm91cyBjb2RlJywgZmFrZUFzeW5jKCgpID0+IHsKICBsZXQgdmFsdWUgPSBmYWxzZTsKICBzZXRUaW1lb3V0KCgpID0+IHsKICAgIHZhbHVlID0gdHJ1ZTsKICB9LCAxMDAwKTsKICB0aWNrKDEwMDApOwogIGV4cGVjdCh2YWx1ZSkudG9CZSh0cnVlKTsKfSkpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { fakeAsync, tick } from '@angular/core/testing';

it('should handle asynchronous code', fakeAsync(() =&gt; {
  let value = false;
  setTimeout(() =&gt; {
    value = true;
  }, 1000);
  tick(1000);
  expect(value).toBe(true);
}));</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>Unit testing is an essential practice in Angular development. By writing tests for components, services, and handling asynchronous code, you can ensure your application is reliable and maintainable. Start with basic tests and gradually incorporate more advanced techniques like mocking dependencies and testing asynchronous code to cover all aspects of your application.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='advanced-ngrx'>&#x25C4;Advanced NgRx</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Unit Testing in Angular 2+</a>
	</div>
	<div class='col-4 text-end'>
					<a href='component-testing'>Component Testing &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
