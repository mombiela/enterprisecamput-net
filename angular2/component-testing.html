<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Component Testing in Angular 2+</title>

    <link rel="alternate" href="https://campusempresa.com/angular2/component-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/angular2/component-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/angular2/component-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/angular2/component-testing" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/angular2/component-testing" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing'>&#x25C4;Unit Testing</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Component Testing in Angular 2+</a>
	</div>
	<div class='col-4 text-end'>
					<a href='service-testing'>Service Testing &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Component testing is a crucial aspect of developing robust Angular applications. This topic will guide you through the fundamentals of component testing, from setting up your environment to writing and running tests for your Angular components.</p>
</div><h1>Introduction to Component Testing</h1>
<div class='content'><p>Component testing involves testing individual components of your Angular application to ensure they function as expected. This type of testing helps catch bugs early and ensures that each component works correctly in isolation.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Unit Testing</strong>: Testing individual units or components in isolation.</li>
<li><strong>Test Bed</strong>: Angular's primary API for testing components.</li>
<li><strong>Fixtures</strong>: A wrapper around a component and its template.</li>
<li><strong>Spies</strong>: Mock functions that track calls and arguments.</li>
</ul>
</div><h1>Setting Up the Testing Environment</h1>
<div class='content'><p>Before you can start writing tests, you need to set up your testing environment.</p>
</div><h2>Installing Dependencies</h2>
<div class='content'><p>Angular CLI comes with built-in support for testing using Jasmine and Karma. Ensure you have the necessary packages installed:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmcgbmV3IG15LWFuZ3VsYXItYXBwCmNkIG15LWFuZ3VsYXItYXBwCm5nIGFkZCBAYW5ndWxhci9jbGk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ng new my-angular-app
cd my-angular-app
ng add @angular/cli</pre></div><div class='content'></div><h2>Configuring Test Files</h2>
<div class='content'><p>Angular CLI generates a <code>src/test.ts</code> file, which is the main entry point for running tests. Ensure your <code>angular.json</code> file includes the following configuration:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("InRlc3QiOiB7CiAgImJ1aWxkZXIiOiAiQGFuZ3VsYXItZGV2a2l0L2J1aWxkLWFuZ3VsYXI6a2FybWEiLAogICJvcHRpb25zIjogewogICAgIm1haW4iOiAic3JjL3Rlc3QudHMiLAogICAgInBvbHlmaWxscyI6ICJzcmMvcG9seWZpbGxzLnRzIiwKICAgICJ0c0NvbmZpZyI6ICJzcmMvdHNjb25maWcuc3BlYy5qc29uIiwKICAgICJrYXJtYUNvbmZpZyI6ICJzcmMva2FybWEuY29uZi5qcyIKICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&quot;test&quot;: {
  &quot;builder&quot;: &quot;@angular-devkit/build-angular:karma&quot;,
  &quot;options&quot;: {
    &quot;main&quot;: &quot;src/test.ts&quot;,
    &quot;polyfills&quot;: &quot;src/polyfills.ts&quot;,
    &quot;tsConfig&quot;: &quot;src/tsconfig.spec.json&quot;,
    &quot;karmaConfig&quot;: &quot;src/karma.conf.js&quot;
  }
}</pre></div><div class='content'></div><h1>Writing Your First Component Test</h1>
<div class='content'><p>Let's write a simple test for a component.</p>
</div><h2>Example Component</h2>
<div class='content'><p>Consider a basic Angular component:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2FwcC9oZWxsby5jb21wb25lbnQudHMKaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CgpAQ29tcG9uZW50KHsKICBzZWxlY3RvcjogJ2FwcC1oZWxsbycsCiAgdGVtcGxhdGU6ICc8aDE+SGVsbG8sIHt7bmFtZX19ITwvaDE+Jwp9KQpleHBvcnQgY2xhc3MgSGVsbG9Db21wb25lbnQgewogIG5hbWU6IHN0cmluZyA9ICdXb3JsZCc7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/app/hello.component.ts
import { Component } from '@angular/core';

@Component({
  selector: 'app-hello',
  template: '&lt;h1&gt;Hello, {{name}}!&lt;/h1&gt;'
})
export class HelloComponent {
  name: string = 'World';
}</pre></div><div class='content'></div><h2>Test File</h2>
<div class='content'><p>Create a test file for the component:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2FwcC9oZWxsby5jb21wb25lbnQuc3BlYy50cwppbXBvcnQgeyBDb21wb25lbnRGaXh0dXJlLCBUZXN0QmVkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZS90ZXN0aW5nJzsKaW1wb3J0IHsgSGVsbG9Db21wb25lbnQgfSBmcm9tICcuL2hlbGxvLmNvbXBvbmVudCc7CgpkZXNjcmliZSgnSGVsbG9Db21wb25lbnQnLCAoKSA9PiB7CiAgbGV0IGNvbXBvbmVudDogSGVsbG9Db21wb25lbnQ7CiAgbGV0IGZpeHR1cmU6IENvbXBvbmVudEZpeHR1cmU8SGVsbG9Db21wb25lbnQ+OwoKICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHsKICAgIGF3YWl0IFRlc3RCZWQuY29uZmlndXJlVGVzdGluZ01vZHVsZSh7CiAgICAgIGRlY2xhcmF0aW9uczogWyBIZWxsb0NvbXBvbmVudCBdCiAgICB9KQogICAgLmNvbXBpbGVDb21wb25lbnRzKCk7CiAgfSk7CgogIGJlZm9yZUVhY2goKCkgPT4gewogICAgZml4dHVyZSA9IFRlc3RCZWQuY3JlYXRlQ29tcG9uZW50KEhlbGxvQ29tcG9uZW50KTsKICAgIGNvbXBvbmVudCA9IGZpeHR1cmUuY29tcG9uZW50SW5zdGFuY2U7CiAgICBmaXh0dXJlLmRldGVjdENoYW5nZXMoKTsKICB9KTsKCiAgaXQoJ3Nob3VsZCBjcmVhdGUnLCAoKSA9PiB7CiAgICBleHBlY3QoY29tcG9uZW50KS50b0JlVHJ1dGh5KCk7CiAgfSk7CgogIGl0KCdzaG91bGQgZGlzcGxheSB0aGUgY29ycmVjdCBuYW1lJywgKCkgPT4gewogICAgY29uc3QgY29tcGlsZWQgPSBmaXh0dXJlLm5hdGl2ZUVsZW1lbnQ7CiAgICBleHBlY3QoY29tcGlsZWQucXVlcnlTZWxlY3RvcignaDEnKS50ZXh0Q29udGVudCkudG9Db250YWluKCdIZWxsbywgV29ybGQhJyk7CiAgfSk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/app/hello.component.spec.ts
import { ComponentFixture, TestBed } from '@angular/core/testing';
import { HelloComponent } from './hello.component';

describe('HelloComponent', () =&gt; {
  let component: HelloComponent;
  let fixture: ComponentFixture&lt;HelloComponent&gt;;

  beforeEach(async () =&gt; {
    await TestBed.configureTestingModule({
      declarations: [ HelloComponent ]
    })
    .compileComponents();
  });

  beforeEach(() =&gt; {
    fixture = TestBed.createComponent(HelloComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () =&gt; {
    expect(component).toBeTruthy();
  });

  it('should display the correct name', () =&gt; {
    const compiled = fixture.nativeElement;
    expect(compiled.querySelector('h1').textContent).toContain('Hello, World!');
  });
});</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>TestBed Configuration</strong>: Sets up the testing environment for the component.</li>
<li><strong>Fixture</strong>: Provides access to the component instance and its template.</li>
<li><strong>Basic Tests</strong>: Checks if the component is created and if it displays the correct name.</li>
</ul>
</div><h1>Advanced Component Testing</h1>
<div class='content'><p>As you become more comfortable with basic tests, you can start exploring more advanced scenarios.</p>
</div><h2>Testing Component Interactions</h2>
<div class='content'><p>Components often interact with services. You can use spies to mock these interactions.</p>
<h4>Example Service</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2FwcC9kYXRhLnNlcnZpY2UudHMKaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwoKQEluamVjdGFibGUoewogIHByb3ZpZGVkSW46ICdyb290Jwp9KQpleHBvcnQgY2xhc3MgRGF0YVNlcnZpY2UgewogIGdldERhdGEoKSB7CiAgICByZXR1cm4gJ1JlYWwgRGF0YSc7CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/app/data.service.ts
import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class DataService {
  getData() {
    return 'Real Data';
  }
}</pre></div><div class='content'><h4>Component Using the Service</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2FwcC9kYXRhLmNvbXBvbmVudC50cwppbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwppbXBvcnQgeyBEYXRhU2VydmljZSB9IGZyb20gJy4vZGF0YS5zZXJ2aWNlJzsKCkBDb21wb25lbnQoewogIHNlbGVjdG9yOiAnYXBwLWRhdGEnLAogIHRlbXBsYXRlOiAnPHA+e3tkYXRhfX08L3A+Jwp9KQpleHBvcnQgY2xhc3MgRGF0YUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7CiAgZGF0YTogc3RyaW5nOwoKICBjb25zdHJ1Y3Rvcihwcml2YXRlIGRhdGFTZXJ2aWNlOiBEYXRhU2VydmljZSkge30KCiAgbmdPbkluaXQoKSB7CiAgICB0aGlzLmRhdGEgPSB0aGlzLmRhdGFTZXJ2aWNlLmdldERhdGEoKTsKICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/app/data.component.ts
import { Component, OnInit } from '@angular/core';
import { DataService } from './data.service';

@Component({
  selector: 'app-data',
  template: '&lt;p&gt;{{data}}&lt;/p&gt;'
})
export class DataComponent implements OnInit {
  data: string;

  constructor(private dataService: DataService) {}

  ngOnInit() {
    this.data = this.dataService.getData();
  }
}</pre></div><div class='content'><h4>Test File with Spies</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2FwcC9kYXRhLmNvbXBvbmVudC5zcGVjLnRzCmltcG9ydCB7IENvbXBvbmVudEZpeHR1cmUsIFRlc3RCZWQgfSBmcm9tICdAYW5ndWxhci9jb3JlL3Rlc3RpbmcnOwppbXBvcnQgeyBEYXRhQ29tcG9uZW50IH0gZnJvbSAnLi9kYXRhLmNvbXBvbmVudCc7CmltcG9ydCB7IERhdGFTZXJ2aWNlIH0gZnJvbSAnLi9kYXRhLnNlcnZpY2UnOwoKY2xhc3MgTW9ja0RhdGFTZXJ2aWNlIHsKICBnZXREYXRhKCkgewogICAgcmV0dXJuICdNb2NrIERhdGEnOwogIH0KfQoKZGVzY3JpYmUoJ0RhdGFDb21wb25lbnQnLCAoKSA9PiB7CiAgbGV0IGNvbXBvbmVudDogRGF0YUNvbXBvbmVudDsKICBsZXQgZml4dHVyZTogQ29tcG9uZW50Rml4dHVyZTxEYXRhQ29tcG9uZW50PjsKICBsZXQgZGF0YVNlcnZpY2U6IERhdGFTZXJ2aWNlOwoKICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHsKICAgIGF3YWl0IFRlc3RCZWQuY29uZmlndXJlVGVzdGluZ01vZHVsZSh7CiAgICAgIGRlY2xhcmF0aW9uczogWyBEYXRhQ29tcG9uZW50IF0sCiAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogRGF0YVNlcnZpY2UsIHVzZUNsYXNzOiBNb2NrRGF0YVNlcnZpY2UgfV0KICAgIH0pCiAgICAuY29tcGlsZUNvbXBvbmVudHMoKTsKICB9KTsKCiAgYmVmb3JlRWFjaCgoKSA9PiB7CiAgICBmaXh0dXJlID0gVGVzdEJlZC5jcmVhdGVDb21wb25lbnQoRGF0YUNvbXBvbmVudCk7CiAgICBjb21wb25lbnQgPSBmaXh0dXJlLmNvbXBvbmVudEluc3RhbmNlOwogICAgZGF0YVNlcnZpY2UgPSBUZXN0QmVkLmluamVjdChEYXRhU2VydmljZSk7CiAgICBmaXh0dXJlLmRldGVjdENoYW5nZXMoKTsKICB9KTsKCiAgaXQoJ3Nob3VsZCBjcmVhdGUnLCAoKSA9PiB7CiAgICBleHBlY3QoY29tcG9uZW50KS50b0JlVHJ1dGh5KCk7CiAgfSk7CgogIGl0KCdzaG91bGQgZGlzcGxheSBtb2NrIGRhdGEnLCAoKSA9PiB7CiAgICBjb25zdCBjb21waWxlZCA9IGZpeHR1cmUubmF0aXZlRWxlbWVudDsKICAgIGV4cGVjdChjb21waWxlZC5xdWVyeVNlbGVjdG9yKCdwJykudGV4dENvbnRlbnQpLnRvQ29udGFpbignTW9jayBEYXRhJyk7CiAgfSk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/app/data.component.spec.ts
import { ComponentFixture, TestBed } from '@angular/core/testing';
import { DataComponent } from './data.component';
import { DataService } from './data.service';

class MockDataService {
  getData() {
    return 'Mock Data';
  }
}

describe('DataComponent', () =&gt; {
  let component: DataComponent;
  let fixture: ComponentFixture&lt;DataComponent&gt;;
  let dataService: DataService;

  beforeEach(async () =&gt; {
    await TestBed.configureTestingModule({
      declarations: [ DataComponent ],
      providers: [{ provide: DataService, useClass: MockDataService }]
    })
    .compileComponents();
  });

  beforeEach(() =&gt; {
    fixture = TestBed.createComponent(DataComponent);
    component = fixture.componentInstance;
    dataService = TestBed.inject(DataService);
    fixture.detectChanges();
  });

  it('should create', () =&gt; {
    expect(component).toBeTruthy();
  });

  it('should display mock data', () =&gt; {
    const compiled = fixture.nativeElement;
    expect(compiled.querySelector('p').textContent).toContain('Mock Data');
  });
});</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Mock Service</strong>: A mock implementation of the <code>DataService</code>.</li>
<li><strong>Provider Override</strong>: Replaces the real service with the mock service in the test bed.</li>
<li><strong>Test</strong>: Verifies that the component displays data from the mock service.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Component testing in Angular is essential for ensuring the reliability and correctness of your application. By setting up a proper testing environment, writing basic tests, and advancing to more complex scenarios, you can catch bugs early and maintain high code quality. Remember to:</p>
<ul>
<li>Start with simple tests to verify component creation and basic functionality.</li>
<li>Use mocks and spies to test interactions with services.</li>
<li>Continuously expand your test coverage as your application grows.</li>
</ul>
<p>With these practices, you'll be well-equipped to write effective component tests in Angular.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing'>&#x25C4;Unit Testing</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Component Testing in Angular 2+</a>
	</div>
	<div class='col-4 text-end'>
					<a href='service-testing'>Service Testing &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
