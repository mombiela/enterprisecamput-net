<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Garbage Collection in Ruby</title>

    <link rel="alternate" href="https://campusempresa.com/ruby/garbage-collection" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/ruby/garbage-collection" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/ruby/garbage-collection" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/ruby/garbage-collection" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/ruby/garbage-collection" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='concurrency-and-parallelism'>&#x25C4;Concurrency and Parallelism</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Garbage Collection in Ruby</a>
	</div>
	<div class='col-4 text-end'>
					<a href='unit-testing-with-minitest'>Unit Testing with Minitest &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Garbage collection (GC) is an essential aspect of memory management in programming languages, including Ruby. It helps in automatically reclaiming memory that is no longer in use, preventing memory leaks and optimizing the performance of applications. This topic will guide you through the basics of garbage collection in Ruby, progressing to more advanced concepts.</p>
</div><h1>What is Garbage Collection?</h1>
<div class='content'><ul>
<li><strong>Definition</strong>: Garbage collection is the process of automatically identifying and freeing memory that is no longer in use by the program.</li>
<li><strong>Purpose</strong>: To manage memory efficiently, prevent memory leaks, and ensure that the application runs smoothly without consuming unnecessary resources.</li>
</ul>
</div><h1>How Garbage Collection Works in Ruby</h1>
<div class='content'><p>Ruby uses a garbage collector to manage memory. The garbage collector in Ruby is responsible for:</p>
<ul>
<li>Identifying objects that are no longer reachable.</li>
<li>Reclaiming the memory occupied by these objects.</li>
<li>Making the reclaimed memory available for future object allocations.</li>
</ul>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Objects</strong>: Everything in Ruby is an object, and objects are stored in memory.</li>
<li><strong>Reachability</strong>: An object is considered reachable if it can be accessed or referenced by the program.</li>
<li><strong>Mark-and-Sweep Algorithm</strong>: Ruby primarily uses the mark-and-sweep algorithm for garbage collection.</li>
</ul>
</div><h1>Mark-and-Sweep Algorithm</h1>
<div class='content'><p>The mark-and-sweep algorithm is a two-phase process used by Ruby's garbage collector:</p>
<ol>
<li><strong>Mark Phase</strong>: The garbage collector traverses all reachable objects starting from the root objects (e.g., global variables, local variables, and constants) and marks them as reachable.</li>
<li><strong>Sweep Phase</strong>: The garbage collector then scans through the memory and collects all unmarked objects, reclaiming their memory.</li>
</ol>
</div><h2>Example</h2>
<div class='content'><p>Here is a simple example to illustrate how garbage collection works in Ruby:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgRXhhbXBsZQogIGRlZiBpbml0aWFsaXplKG5hbWUpCiAgICBAbmFtZSA9IG5hbWUKICBlbmQKZW5kCgpkZWYgY3JlYXRlX29iamVjdHMKICBvYmoxID0gRXhhbXBsZS5uZXcoIk9iamVjdCAxIikKICBvYmoyID0gRXhhbXBsZS5uZXcoIk9iamVjdCAyIikKZW5kCgpjcmVhdGVfb2JqZWN0cwojIEF0IHRoaXMgcG9pbnQsIG9iajEgYW5kIG9iajIgYXJlIG5vIGxvbmdlciByZWFjaGFibGUKIyBUaGUgZ2FyYmFnZSBjb2xsZWN0b3Igd2lsbCBldmVudHVhbGx5IHJlY2xhaW0gdGhlaXIgbWVtb3J5"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Example
  def initialize(name)
    @name = name
  end
end

def create_objects
  obj1 = Example.new(&quot;Object 1&quot;)
  obj2 = Example.new(&quot;Object 2&quot;)
end

create_objects
# At this point, obj1 and obj2 are no longer reachable
# The garbage collector will eventually reclaim their memory</pre></div><div class='content'><p>In this example:</p>
<ul>
<li><code>obj1</code> and <code>obj2</code> are created within the <code>create_objects</code> method.</li>
<li>Once the method execution is complete, <code>obj1</code> and <code>obj2</code> go out of scope and become unreachable.</li>
<li>The garbage collector will identify these unreachable objects and reclaim their memory.</li>
</ul>
</div><h1>Tuning Garbage Collection</h1>
<div class='content'><p>Ruby provides several ways to tune the garbage collector for better performance:</p>
<ul>
<li>
<p><strong>Environment Variables</strong>: You can set environment variables to control the behavior of the garbage collector.</p>
<ul>
<li><code>RUBY_GC_HEAP_INIT_SLOTS</code>: Initial number of heap slots.</li>
<li><code>RUBY_GC_HEAP_FREE_SLOTS</code>: Number of free slots before triggering garbage collection.</li>
<li><code>RUBY_GC_HEAP_GROWTH_FACTOR</code>: Factor by which the heap grows.</li>
</ul>
</li>
<li>
<p><strong>GC Module</strong>: Ruby's <code>GC</code> module provides methods to interact with the garbage collector.</p>
<ul>
<li><code>GC.start</code>: Manually trigger garbage collection.</li>
<li><code>GC.stat</code>: Retrieve garbage collection statistics.</li>
</ul>
</li>
</ul>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBNYW51YWxseSB0cmlnZ2VyIGdhcmJhZ2UgY29sbGVjdGlvbgpHQy5zdGFydAoKIyBSZXRyaWV2ZSBnYXJiYWdlIGNvbGxlY3Rpb24gc3RhdGlzdGljcwpzdGF0cyA9IEdDLnN0YXQKcHV0cyBzdGF0cw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Manually trigger garbage collection
GC.start

# Retrieve garbage collection statistics
stats = GC.stat
puts stats</pre></div><div class='content'></div><h1>Advanced Garbage Collection Techniques</h1>
<div class='content'><p>As you become more advanced in Ruby, you might encounter more sophisticated garbage collection techniques:</p>
<ul>
<li><strong>Generational Garbage Collection</strong>: Ruby 2.1 introduced generational garbage collection, which divides objects into different generations based on their lifespan. This helps in optimizing the garbage collection process by focusing on young objects that are more likely to be garbage.</li>
<li><strong>Incremental Garbage Collection</strong>: Ruby 2.2 introduced incremental garbage collection, which breaks the garbage collection process into smaller steps to reduce pause times.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Garbage collection is a crucial feature in Ruby that helps manage memory automatically, ensuring efficient use of resources and preventing memory leaks. Understanding how garbage collection works and how to tune it can significantly improve the performance of your Ruby applications. As you progress from beginner to advanced levels, you'll gain deeper insights into the intricacies of Ruby's garbage collector and how to leverage it effectively.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='concurrency-and-parallelism'>&#x25C4;Concurrency and Parallelism</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Garbage Collection in Ruby</a>
	</div>
	<div class='col-4 text-end'>
					<a href='unit-testing-with-minitest'>Unit Testing with Minitest &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
