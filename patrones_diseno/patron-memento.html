<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memento Pattern</title>

    <link rel="alternate" href="https://campusempresa.com/patrones_diseno/patron-memento" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/patrones_diseno/patron-memento" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/patrones_diseno/patron-memento" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/patrones_diseno/patron-memento" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/patrones_diseno/patron-memento" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introduction</h1>
<div class='content'><p>The Memento Pattern is a behavioral design pattern that allows capturing and externalizing an object's internal state without violating encapsulation, so that the object can be restored to this state later. This pattern is useful for implementing undo and redo functionalities in applications.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Originator</strong>: The object whose internal state is to be saved.</li>
<li><strong>Memento</strong>: An object that stores the internal state of the Originator.</li>
<li><strong>Caretaker</strong>: The entity responsible for requesting and storing Mementos, but does not operate on or inspect their content.</li>
</ul>
</div><h1>Pattern Structure</h1>
<div class='content'><p>| Component  | Description |
|------------|-------------|
| Originator | The object that has an internal state that needs to be saved and restored. |
| Memento    | Stores the internal state of the Originator. |
| Caretaker  | Manages the Mementos and requests the Originator to restore its state when necessary. |</p>
</div><h1>Code Implementation</h1>
<div class='content'><p>Below is a Python example to illustrate the Memento Pattern:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgTWVtZW50bzoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBzdGF0ZSk6CiAgICAgICAgc2VsZi5fc3RhdGUgPSBzdGF0ZQoKICAgIGRlZiBnZXRfc3RhdGUoc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuX3N0YXRlCgpjbGFzcyBPcmlnaW5hdG9yOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYuX3N0YXRlID0gTm9uZQoKICAgIGRlZiBzZXRfc3RhdGUoc2VsZiwgc3RhdGUpOgogICAgICAgIHByaW50KGYiU2V0dGluZyBzdGF0ZSB0byB7c3RhdGV9IikKICAgICAgICBzZWxmLl9zdGF0ZSA9IHN0YXRlCgogICAgZGVmIHNhdmVfdG9fbWVtZW50byhzZWxmKToKICAgICAgICBwcmludCgiU2F2aW5nIHRvIE1lbWVudG8uIikKICAgICAgICByZXR1cm4gTWVtZW50byhzZWxmLl9zdGF0ZSkKCiAgICBkZWYgcmVzdG9yZV9mcm9tX21lbWVudG8oc2VsZiwgbWVtZW50byk6CiAgICAgICAgc2VsZi5fc3RhdGUgPSBtZW1lbnRvLmdldF9zdGF0ZSgpCiAgICAgICAgcHJpbnQoZiJTdGF0ZSByZXN0b3JlZCB0byB7c2VsZi5fc3RhdGV9IikKCmNsYXNzIENhcmV0YWtlcjoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLl9tZW1lbnRvcyA9IFtdCgogICAgZGVmIGFkZF9tZW1lbnRvKHNlbGYsIG1lbWVudG8pOgogICAgICAgIHNlbGYuX21lbWVudG9zLmFwcGVuZChtZW1lbnRvKQoKICAgIGRlZiBnZXRfbWVtZW50byhzZWxmLCBpbmRleCk6CiAgICAgICAgcmV0dXJuIHNlbGYuX21lbWVudG9zW2luZGV4XQoKIyBVc2luZyB0aGUgTWVtZW50byBQYXR0ZXJuCm9yaWdpbmF0b3IgPSBPcmlnaW5hdG9yKCkKY2FyZXRha2VyID0gQ2FyZXRha2VyKCkKCiMgQ2hhbmdlIHN0YXRlIGFuZCBzYXZlIHRvIE1lbWVudG8Kb3JpZ2luYXRvci5zZXRfc3RhdGUoIlN0YXRlMSIpCmNhcmV0YWtlci5hZGRfbWVtZW50byhvcmlnaW5hdG9yLnNhdmVfdG9fbWVtZW50bygpKQoKb3JpZ2luYXRvci5zZXRfc3RhdGUoIlN0YXRlMiIpCmNhcmV0YWtlci5hZGRfbWVtZW50byhvcmlnaW5hdG9yLnNhdmVfdG9fbWVtZW50bygpKQoKIyBSZXN0b3JlIHN0YXRlIGZyb20gTWVtZW50bwpvcmlnaW5hdG9yLnJlc3RvcmVfZnJvbV9tZW1lbnRvKGNhcmV0YWtlci5nZXRfbWVtZW50bygwKSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Memento:
    def __init__(self, state):
        self._state = state

    def get_state(self):
        return self._state

class Originator:
    def __init__(self):
        self._state = None

    def set_state(self, state):
        print(f&quot;Setting state to {state}&quot;)
        self._state = state

    def save_to_memento(self):
        print(&quot;Saving to Memento.&quot;)
        return Memento(self._state)

    def restore_from_memento(self, memento):
        self._state = memento.get_state()
        print(f&quot;State restored to {self._state}&quot;)

class Caretaker:
    def __init__(self):
        self._mementos = []

    def add_memento(self, memento):
        self._mementos.append(memento)

    def get_memento(self, index):
        return self._mementos[index]

# Using the Memento Pattern
originator = Originator()
caretaker = Caretaker()

# Change state and save to Memento
originator.set_state(&quot;State1&quot;)
caretaker.add_memento(originator.save_to_memento())

originator.set_state(&quot;State2&quot;)
caretaker.add_memento(originator.save_to_memento())

# Restore state from Memento
originator.restore_from_memento(caretaker.get_memento(0))</pre></div><div class='content'></div><h2>Code Explanation</h2>
<div class='content'><ol>
<li><strong>Memento</strong>: The <code>Memento</code> class stores the state of the <code>Originator</code>. It has a <code>get_state</code> method to retrieve the stored state.</li>
<li><strong>Originator</strong>: The <code>Originator</code> class has methods to set (<code>set_state</code>), save (<code>save_to_memento</code>), and restore (<code>restore_from_memento</code>) its state.</li>
<li><strong>Caretaker</strong>: The <code>Caretaker</code> class manages the Mementos. It can add (<code>add_memento</code>) and retrieve (<code>get_memento</code>) Mementos.</li>
</ol>
</div><h1>Practical Exercise</h1>
<div class='content'><ol>
<li><strong>Exercise 1</strong>: Implement the Memento Pattern in a text application that allows undoing and redoing changes.</li>
<li><strong>Exercise 2</strong>: Extend the previous example to handle multiple complex states, such as the state of a game.</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>The Memento Pattern is an elegant solution to problems where it is necessary to save and restore an object's state without violating its encapsulation. This pattern is especially useful in applications that require undo and redo functionalities, providing a structured and safe way to handle the internal state of objects.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
