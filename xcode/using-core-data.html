<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using Core Data</title>

    <link rel="alternate" href="https://campusempresa.com/xcode/using-core-data" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/xcode/using-core-data" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/xcode/using-core-data" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/xcode/using-core-data" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/xcode/using-core-data" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='creating-custom-ui-components'>&#x25C4;Creating Custom UI Components</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using Core Data</a>
	</div>
	<div class='col-4 text-end'>
					<a href='integrating-third-party-libraries'>Integrating Third-Party Libraries &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Core Data</h1>
<div class='content'><p>Core Data is an object graph and persistence framework provided by Apple in the macOS and iOS operating systems. It allows data to be organized and managed efficiently within an application.</p>
<ul>
<li><strong>Object Graph Management</strong>: Core Data manages the life cycle and relationships of the objects in your application.</li>
<li><strong>Persistence</strong>: Core Data can save objects to disk and retrieve them later.</li>
</ul>
</div><h1>Setting Up Core Data in Xcode</h1>
<div class='content'><p>To use Core Data in your Xcode project, you need to set it up correctly.</p>
<ol>
<li>
<p><strong>Creating a New Project with Core Data</strong>:</p>
<ul>
<li>When creating a new project, check the &quot;Use Core Data&quot; option.</li>
<li>Xcode will automatically include the necessary Core Data files and configurations.</li>
</ul>
</li>
<li>
<p><strong>Adding Core Data to an Existing Project</strong>:</p>
<ul>
<li>Add a new Data Model file (<code>.xcdatamodeld</code>) to your project.</li>
<li>Configure the Core Data stack in your AppDelegate or SceneDelegate.</li>
</ul>
</li>
</ol>
</div><h1>Core Data Model</h1>
<div class='content'><p>The Core Data model is where you define the structure of your data, including entities, attributes, and relationships.</p>
<ul>
<li><strong>Entities</strong>: Represent tables in the database.</li>
<li><strong>Attributes</strong>: Represent columns in the tables.</li>
<li><strong>Relationships</strong>: Define how entities are related to one another.</li>
</ul>
</div><h2>Example: Defining a Simple Data Model</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRGVmaW5lIGFuIGVudGl0eSBuYW1lZCAiUGVyc29uIiB3aXRoIGF0dHJpYnV0ZXMgIm5hbWUiIChTdHJpbmcpIGFuZCAiYWdlIiAoSW50ZWdlcik="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Define an entity named &quot;Person&quot; with attributes &quot;name&quot; (String) and &quot;age&quot; (Integer)</pre></div><div class='content'></div><h1>Core Data Stack</h1>
<div class='content'><p>The Core Data stack is the set of components that work together to manage the model layer objects.</p>
<ul>
<li><strong>NSManagedObjectContext</strong>: The context in which you work with your managed objects.</li>
<li><strong>NSPersistentStoreCoordinator</strong>: Coordinates the persistent store and the managed object model.</li>
<li><strong>NSManagedObjectModel</strong>: Represents the schema of your data model.</li>
<li><strong>NSPersistentContainer</strong>: Simplifies the creation and management of the Core Data stack.</li>
</ul>
</div><h2>Example: Setting Up the Core Data Stack</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IENvcmVEYXRhCgpjbGFzcyBBcHBEZWxlZ2F0ZTogVUlSZXNwb25kZXIsIFVJQXBwbGljYXRpb25EZWxlZ2F0ZSB7CiAgICBsYXp5IHZhciBwZXJzaXN0ZW50Q29udGFpbmVyOiBOU1BlcnNpc3RlbnRDb250YWluZXIgPSB7CiAgICAgICAgbGV0IGNvbnRhaW5lciA9IE5TUGVyc2lzdGVudENvbnRhaW5lcihuYW1lOiAiTW9kZWxOYW1lIikKICAgICAgICBjb250YWluZXIubG9hZFBlcnNpc3RlbnRTdG9yZXMgeyBzdG9yZURlc2NyaXB0aW9uLCBlcnJvciBpbgogICAgICAgICAgICBpZiBsZXQgZXJyb3IgPSBlcnJvciBhcyBOU0Vycm9yPyB7CiAgICAgICAgICAgICAgICBmYXRhbEVycm9yKCJVbnJlc29sdmVkIGVycm9yIFwoZXJyb3IpLCBcKGVycm9yLnVzZXJJbmZvKSIpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcgogICAgfSgpCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import CoreData

class AppDelegate: UIResponder, UIApplicationDelegate {
    lazy var persistentContainer: NSPersistentContainer = {
        let container = NSPersistentContainer(name: &quot;ModelName&quot;)
        container.loadPersistentStores { storeDescription, error in
            if let error = error as NSError? {
                fatalError(&quot;Unresolved error \(error), \(error.userInfo)&quot;)
            }
        }
        return container
    }()
}</pre></div><div class='content'></div><h1>Working with Managed Objects</h1>
<div class='content'><p>Managed objects are instances of your data model entities. You can create, read, update, and delete these objects using the managed object context.</p>
</div><h2>Creating a Managed Object</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGNvbnRleHQgPSBwZXJzaXN0ZW50Q29udGFpbmVyLnZpZXdDb250ZXh0CmxldCBuZXdQZXJzb24gPSBQZXJzb24oY29udGV4dDogY29udGV4dCkKbmV3UGVyc29uLm5hbWUgPSAiSm9obiBEb2UiCm5ld1BlcnNvbi5hZ2UgPSAzMAoKZG8gewogICAgdHJ5IGNvbnRleHQuc2F2ZSgpCn0gY2F0Y2ggewogICAgcHJpbnQoIkZhaWxlZCB0byBzYXZlOiBcKGVycm9yKSIpCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let context = persistentContainer.viewContext
let newPerson = Person(context: context)
newPerson.name = &quot;John Doe&quot;
newPerson.age = 30

do {
    try context.save()
} catch {
    print(&quot;Failed to save: \(error)&quot;)
}</pre></div><div class='content'></div><h2>Fetching Managed Objects</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGZldGNoUmVxdWVzdDogTlNGZXRjaFJlcXVlc3Q8UGVyc29uPiA9IFBlcnNvbi5mZXRjaFJlcXVlc3QoKQoKZG8gewogICAgbGV0IHBlb3BsZSA9IHRyeSBjb250ZXh0LmZldGNoKGZldGNoUmVxdWVzdCkKICAgIGZvciBwZXJzb24gaW4gcGVvcGxlIHsKICAgICAgICBwcmludCgiXChwZXJzb24ubmFtZSksIFwocGVyc29uLmFnZSkiKQogICAgfQp9IGNhdGNoIHsKICAgIHByaW50KCJGYWlsZWQgdG8gZmV0Y2g6IFwoZXJyb3IpIikKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let fetchRequest: NSFetchRequest&lt;Person&gt; = Person.fetchRequest()

do {
    let people = try context.fetch(fetchRequest)
    for person in people {
        print(&quot;\(person.name), \(person.age)&quot;)
    }
} catch {
    print(&quot;Failed to fetch: \(error)&quot;)
}</pre></div><div class='content'></div><h2>Updating Managed Objects</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGZldGNoUmVxdWVzdDogTlNGZXRjaFJlcXVlc3Q8UGVyc29uPiA9IFBlcnNvbi5mZXRjaFJlcXVlc3QoKQpmZXRjaFJlcXVlc3QucHJlZGljYXRlID0gTlNQcmVkaWNhdGUoZm9ybWF0OiAibmFtZSA9PSAlQCIsICJKb2huIERvZSIpCgpkbyB7CiAgICBsZXQgcGVvcGxlID0gdHJ5IGNvbnRleHQuZmV0Y2goZmV0Y2hSZXF1ZXN0KQogICAgaWYgbGV0IHBlcnNvbiA9IHBlb3BsZS5maXJzdCB7CiAgICAgICAgcGVyc29uLmFnZSA9IDMxCiAgICAgICAgdHJ5IGNvbnRleHQuc2F2ZSgpCiAgICB9Cn0gY2F0Y2ggewogICAgcHJpbnQoIkZhaWxlZCB0byB1cGRhdGU6IFwoZXJyb3IpIikKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let fetchRequest: NSFetchRequest&lt;Person&gt; = Person.fetchRequest()
fetchRequest.predicate = NSPredicate(format: &quot;name == %@&quot;, &quot;John Doe&quot;)

do {
    let people = try context.fetch(fetchRequest)
    if let person = people.first {
        person.age = 31
        try context.save()
    }
} catch {
    print(&quot;Failed to update: \(error)&quot;)
}</pre></div><div class='content'></div><h2>Deleting Managed Objects</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGZldGNoUmVxdWVzdDogTlNGZXRjaFJlcXVlc3Q8UGVyc29uPiA9IFBlcnNvbi5mZXRjaFJlcXVlc3QoKQpmZXRjaFJlcXVlc3QucHJlZGljYXRlID0gTlNQcmVkaWNhdGUoZm9ybWF0OiAibmFtZSA9PSAlQCIsICJKb2huIERvZSIpCgpkbyB7CiAgICBsZXQgcGVvcGxlID0gdHJ5IGNvbnRleHQuZmV0Y2goZmV0Y2hSZXF1ZXN0KQogICAgaWYgbGV0IHBlcnNvbiA9IHBlb3BsZS5maXJzdCB7CiAgICAgICAgY29udGV4dC5kZWxldGUocGVyc29uKQogICAgICAgIHRyeSBjb250ZXh0LnNhdmUoKQogICAgfQp9IGNhdGNoIHsKICAgIHByaW50KCJGYWlsZWQgdG8gZGVsZXRlOiBcKGVycm9yKSIpCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let fetchRequest: NSFetchRequest&lt;Person&gt; = Person.fetchRequest()
fetchRequest.predicate = NSPredicate(format: &quot;name == %@&quot;, &quot;John Doe&quot;)

do {
    let people = try context.fetch(fetchRequest)
    if let person = people.first {
        context.delete(person)
        try context.save()
    }
} catch {
    print(&quot;Failed to delete: \(error)&quot;)
}</pre></div><div class='content'></div><h1>Advanced Core Data Features</h1>
<div class='content'><p>Core Data offers advanced features for more complex data management needs.</p>
<ul>
<li><strong>Batch Operations</strong>: Perform batch updates and deletes for efficiency.</li>
<li><strong>Fetched Results Controller</strong>: Efficiently manage the results of a Core Data fetch request and update the UI.</li>
<li><strong>Migration</strong>: Handle changes to the data model schema over time.</li>
</ul>
</div><h2>Example: Using NSFetchedResultsController</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IENvcmVEYXRhCgpjbGFzcyBWaWV3Q29udHJvbGxlcjogVUlWaWV3Q29udHJvbGxlciwgTlNGZXRjaGVkUmVzdWx0c0NvbnRyb2xsZXJEZWxlZ2F0ZSB7CiAgICB2YXIgZmV0Y2hlZFJlc3VsdHNDb250cm9sbGVyOiBOU0ZldGNoZWRSZXN1bHRzQ29udHJvbGxlcjxQZXJzb24+IQoKICAgIG92ZXJyaWRlIGZ1bmMgdmlld0RpZExvYWQoKSB7CiAgICAgICAgc3VwZXIudmlld0RpZExvYWQoKQogICAgICAgIGxldCBmZXRjaFJlcXVlc3Q6IE5TRmV0Y2hSZXF1ZXN0PFBlcnNvbj4gPSBQZXJzb24uZmV0Y2hSZXF1ZXN0KCkKICAgICAgICBmZXRjaFJlcXVlc3Quc29ydERlc2NyaXB0b3JzID0gW05TU29ydERlc2NyaXB0b3Ioa2V5OiAibmFtZSIsIGFzY2VuZGluZzogdHJ1ZSldCiAgICAgICAgCiAgICAgICAgZmV0Y2hlZFJlc3VsdHNDb250cm9sbGVyID0gTlNGZXRjaGVkUmVzdWx0c0NvbnRyb2xsZXIoZmV0Y2hSZXF1ZXN0OiBmZXRjaFJlcXVlc3QsIG1hbmFnZWRPYmplY3RDb250ZXh0OiBwZXJzaXN0ZW50Q29udGFpbmVyLnZpZXdDb250ZXh0LCBzZWN0aW9uTmFtZUtleVBhdGg6IG5pbCwgY2FjaGVOYW1lOiBuaWwpCiAgICAgICAgZmV0Y2hlZFJlc3VsdHNDb250cm9sbGVyLmRlbGVnYXRlID0gc2VsZgogICAgICAgIAogICAgICAgIGRvIHsKICAgICAgICAgICAgdHJ5IGZldGNoZWRSZXN1bHRzQ29udHJvbGxlci5wZXJmb3JtRmV0Y2goKQogICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgICBwcmludCgiRmFpbGVkIHRvIGZldGNoOiBcKGVycm9yKSIpCiAgICAgICAgfQogICAgfQogICAgCiAgICAvLyBJbXBsZW1lbnQgTlNGZXRjaGVkUmVzdWx0c0NvbnRyb2xsZXJEZWxlZ2F0ZSBtZXRob2RzIHRvIHVwZGF0ZSB0aGUgVUkKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import CoreData

class ViewController: UIViewController, NSFetchedResultsControllerDelegate {
    var fetchedResultsController: NSFetchedResultsController&lt;Person&gt;!

    override func viewDidLoad() {
        super.viewDidLoad()
        let fetchRequest: NSFetchRequest&lt;Person&gt; = Person.fetchRequest()
        fetchRequest.sortDescriptors = [NSSortDescriptor(key: &quot;name&quot;, ascending: true)]
        
        fetchedResultsController = NSFetchedResultsController(fetchRequest: fetchRequest, managedObjectContext: persistentContainer.viewContext, sectionNameKeyPath: nil, cacheName: nil)
        fetchedResultsController.delegate = self
        
        do {
            try fetchedResultsController.performFetch()
        } catch {
            print(&quot;Failed to fetch: \(error)&quot;)
        }
    }
    
    // Implement NSFetchedResultsControllerDelegate methods to update the UI
}</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Core Data is a powerful framework for managing and persisting data in iOS and macOS applications. By understanding the basics of setting up Core Data, working with managed objects, and leveraging advanced features, you can efficiently manage your application's data. Practice with the provided examples and explore the documentation to deepen your understanding of Core Data.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='creating-custom-ui-components'>&#x25C4;Creating Custom UI Components</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using Core Data</a>
	</div>
	<div class='col-4 text-end'>
					<a href='integrating-third-party-libraries'>Integrating Third-Party Libraries &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
