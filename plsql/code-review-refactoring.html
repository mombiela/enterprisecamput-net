<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Review and Refactoring in PL/SQL</title>

    <link rel="alternate" href="https://campusempresa.com/plsql/code-review-refactoring" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/plsql/code-review-refactoring" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/plsql/code-review-refactoring" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/plsql/code-review-refactoring" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/plsql/code-review-refactoring" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='error-handling-best-practices'>&#x25C4;Error Handling Best Practices</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Code Review and Refactoring in PL/SQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='building-simple-application'>Building a Simple Application &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Code review and refactoring are essential practices in software development that ensure code quality, maintainability, and performance. In this section, we will explore the importance of these practices in PL/SQL, provide guidelines for conducting effective code reviews, and demonstrate techniques for refactoring PL/SQL code.</p>
</div><h1>Importance of Code Review and Refactoring</h1>
<div class='content'><ul>
<li><strong>Code Quality</strong>: Ensures that the code adheres to best practices and standards.</li>
<li><strong>Maintainability</strong>: Makes the code easier to understand and modify.</li>
<li><strong>Performance</strong>: Identifies and resolves performance bottlenecks.</li>
<li><strong>Bug Detection</strong>: Catches errors and potential issues early in the development process.</li>
<li><strong>Knowledge Sharing</strong>: Facilitates learning and knowledge transfer among team members.</li>
</ul>
</div><h1>Conducting Code Reviews</h1>
<h2>Guidelines for Effective Code Reviews</h2>
<div class='content'><ul>
<li><strong>Consistency</strong>: Ensure the code follows the project's coding standards.</li>
<li><strong>Readability</strong>: Code should be easy to read and understand.</li>
<li><strong>Functionality</strong>: Verify that the code works as intended and meets the requirements.</li>
<li><strong>Performance</strong>: Check for efficient use of resources and optimal performance.</li>
<li><strong>Security</strong>: Identify and address potential security vulnerabilities.</li>
</ul>
</div><h2>Code Review Checklist</h2>
<div class='content'><ul>
<li><strong>Naming Conventions</strong>: Are variables, procedures, and functions named appropriately?</li>
<li><strong>Comments and Documentation</strong>: Is the code adequately commented and documented?</li>
<li><strong>Error Handling</strong>: Are exceptions and errors handled properly?</li>
<li><strong>SQL Optimization</strong>: Are SQL queries optimized for performance?</li>
<li><strong>Code Duplication</strong>: Is there any redundant or duplicate code?</li>
</ul>
</div><h2>Example Code Review</h2>
<div class='content'><p>Consider the following PL/SQL procedure:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIE9SIFJFUExBQ0UgUFJPQ0VEVVJFIGNhbGN1bGF0ZV9ib251cyAoZW1wX2lkIElOIE5VTUJFUikgSVMKICB2X3NhbGFyeSBOVU1CRVI7CiAgdl9ib251cyBOVU1CRVI7CkJFR0lOCiAgU0VMRUNUIHNhbGFyeSBJTlRPIHZfc2FsYXJ5IEZST00gZW1wbG95ZWVzIFdIRVJFIGVtcGxveWVlX2lkID0gZW1wX2lkOwogIElGIHZfc2FsYXJ5IDwgNTAwMCBUSEVOCiAgICB2X2JvbnVzIDo9IHZfc2FsYXJ5ICogMC4xMDsKICBFTFNFCiAgICB2X2JvbnVzIDo9IHZfc2FsYXJ5ICogMC4wNTsKICBFTkQgSUY7CiAgVVBEQVRFIGVtcGxveWVlcyBTRVQgYm9udXMgPSB2X2JvbnVzIFdIRVJFIGVtcGxveWVlX2lkID0gZW1wX2lkOwpFTkQ7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE OR REPLACE PROCEDURE calculate_bonus (emp_id IN NUMBER) IS
  v_salary NUMBER;
  v_bonus NUMBER;
BEGIN
  SELECT salary INTO v_salary FROM employees WHERE employee_id = emp_id;
  IF v_salary &lt; 5000 THEN
    v_bonus := v_salary * 0.10;
  ELSE
    v_bonus := v_salary * 0.05;
  END IF;
  UPDATE employees SET bonus = v_bonus WHERE employee_id = emp_id;
END;</pre></div><div class='content'><p><strong>Review Points:</strong></p>
<ul>
<li><strong>Naming Conventions</strong>: The variable names are clear and descriptive.</li>
<li><strong>Comments</strong>: The procedure lacks comments explaining its purpose and logic.</li>
<li><strong>Error Handling</strong>: There is no exception handling in case the <code>SELECT</code> statement fails.</li>
<li><strong>SQL Optimization</strong>: The <code>SELECT</code> and <code>UPDATE</code> statements are straightforward, but we should ensure indexes are used on <code>employee_id</code>.</li>
</ul>
</div><h1>Refactoring PL/SQL Code</h1>
<h2>Common Refactoring Techniques</h2>
<div class='content'><ul>
<li><strong>Extract Procedure</strong>: Break down large procedures into smaller, reusable procedures.</li>
<li><strong>Rename Variables</strong>: Use meaningful names for variables to improve readability.</li>
<li><strong>Remove Redundant Code</strong>: Eliminate duplicate or unnecessary code.</li>
<li><strong>Optimize SQL Statements</strong>: Rewrite SQL queries for better performance.</li>
<li><strong>Add Error Handling</strong>: Implement proper exception handling.</li>
</ul>
</div><h2>Example Refactoring</h2>
<div class='content'><p>Refactor the previous example to improve readability and add error handling:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIE9SIFJFUExBQ0UgUFJPQ0VEVVJFIGNhbGN1bGF0ZV9ib251cyAoZW1wX2lkIElOIE5VTUJFUikgSVMKICB2X3NhbGFyeSBOVU1CRVI7CiAgdl9ib251cyBOVU1CRVI7CgogIFBST0NFRFVSRSBnZXRfc2FsYXJ5KHBfZW1wX2lkIElOIE5VTUJFUiwgcF9zYWxhcnkgT1VUIE5VTUJFUikgSVMKICBCRUdJTgogICAgU0VMRUNUIHNhbGFyeSBJTlRPIHBfc2FsYXJ5IEZST00gZW1wbG95ZWVzIFdIRVJFIGVtcGxveWVlX2lkID0gcF9lbXBfaWQ7CiAgRVhDRVBUSU9OCiAgICBXSEVOIE5PX0RBVEFfRk9VTkQgVEhFTgogICAgICBwX3NhbGFyeSA6PSAwOwogIEVORCBnZXRfc2FsYXJ5OwoKICBQUk9DRURVUkUgdXBkYXRlX2JvbnVzKHBfZW1wX2lkIElOIE5VTUJFUiwgcF9ib251cyBJTiBOVU1CRVIpIElTCiAgQkVHSU4KICAgIFVQREFURSBlbXBsb3llZXMgU0VUIGJvbnVzID0gcF9ib251cyBXSEVSRSBlbXBsb3llZV9pZCA9IHBfZW1wX2lkOwogIEVORCB1cGRhdGVfYm9udXM7CgpCRUdJTgogIGdldF9zYWxhcnkoZW1wX2lkLCB2X3NhbGFyeSk7CiAgSUYgdl9zYWxhcnkgPCA1MDAwIFRIRU4KICAgIHZfYm9udXMgOj0gdl9zYWxhcnkgKiAwLjEwOwogIEVMU0UKICAgIHZfYm9udXMgOj0gdl9zYWxhcnkgKiAwLjA1OwogIEVORCBJRjsKICB1cGRhdGVfYm9udXMoZW1wX2lkLCB2X2JvbnVzKTsKRU5EOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE OR REPLACE PROCEDURE calculate_bonus (emp_id IN NUMBER) IS
  v_salary NUMBER;
  v_bonus NUMBER;

  PROCEDURE get_salary(p_emp_id IN NUMBER, p_salary OUT NUMBER) IS
  BEGIN
    SELECT salary INTO p_salary FROM employees WHERE employee_id = p_emp_id;
  EXCEPTION
    WHEN NO_DATA_FOUND THEN
      p_salary := 0;
  END get_salary;

  PROCEDURE update_bonus(p_emp_id IN NUMBER, p_bonus IN NUMBER) IS
  BEGIN
    UPDATE employees SET bonus = p_bonus WHERE employee_id = p_emp_id;
  END update_bonus;

BEGIN
  get_salary(emp_id, v_salary);
  IF v_salary &lt; 5000 THEN
    v_bonus := v_salary * 0.10;
  ELSE
    v_bonus := v_salary * 0.05;
  END IF;
  update_bonus(emp_id, v_bonus);
END;</pre></div><div class='content'><p><strong>Improvements:</strong></p>
<ul>
<li><strong>Extract Procedure</strong>: The <code>get_salary</code> and <code>update_bonus</code> procedures encapsulate specific tasks.</li>
<li><strong>Error Handling</strong>: The <code>get_salary</code> procedure includes exception handling for <code>NO_DATA_FOUND</code>.</li>
<li><strong>Readability</strong>: The main procedure is now more readable and easier to understand.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Code review and refactoring are critical practices for maintaining high-quality PL/SQL code. By following structured guidelines and employing common refactoring techniques, developers can ensure their code is efficient, maintainable, and free of errors. Regular code reviews and continuous refactoring contribute to the overall health and performance of the codebase, fostering a culture of excellence and collaboration within development teams.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='error-handling-best-practices'>&#x25C4;Error Handling Best Practices</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Code Review and Refactoring in PL/SQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='building-simple-application'>Building a Simple Application &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
