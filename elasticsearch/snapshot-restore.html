<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snapshot and Restore</title>

    <link rel="alternate" href="https://campusempresa.com/elasticsearch/snapshot-restore" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/elasticsearch/snapshot-restore" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/elasticsearch/snapshot-restore" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/elasticsearch/snapshot-restore" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/elasticsearch/snapshot-restore" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='cross-cluster-search'>&#x25C4;Cross-Cluster Search</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Snapshot and Restore</a>
	</div>
	<div class='col-4 text-end'>
					<a href='elasticsearch-plugins'>Elasticsearch Plugins &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Snapshot and Restore is a crucial feature in Elasticsearch that allows you to back up your cluster's data and restore it when needed. This is essential for data recovery, migration, and ensuring data integrity over time.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Snapshot</strong>: A backup of the data stored in an Elasticsearch cluster at a specific point in time.</li>
<li><strong>Repository</strong>: A storage location where snapshots are stored. This can be a shared file system, Amazon S3, HDFS, etc.</li>
<li><strong>Restore</strong>: The process of recovering data from a snapshot.</li>
</ul>
</div><h1>Setting Up a Repository</h1>
<div class='content'><p>Before taking snapshots, you need to set up a repository where the snapshots will be stored.</p>
</div><h2>Example: Creating a File System Repository</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UFVUIC9fc25hcHNob3QvbXlfYmFja3VwCnsKICAidHlwZSI6ICJmcyIsCiAgInNldHRpbmdzIjogewogICAgImxvY2F0aW9uIjogIi9tb3VudC9iYWNrdXBzL215X2JhY2t1cCIKICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PUT /_snapshot/my_backup
{
  &quot;type&quot;: &quot;fs&quot;,
  &quot;settings&quot;: {
    &quot;location&quot;: &quot;/mount/backups/my_backup&quot;
  }
}</pre></div><div class='content'><ul>
<li><strong>type</strong>: Specifies the type of repository. Here, <code>fs</code> stands for file system.</li>
<li><strong>location</strong>: The path where the snapshots will be stored.</li>
</ul>
</div><h1>Taking a Snapshot</h1>
<div class='content'><p>Once the repository is set up, you can take a snapshot of your cluster.</p>
</div><h2>Example: Taking a Snapshot</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UFVUIC9fc25hcHNob3QvbXlfYmFja3VwL3NuYXBzaG90XzEKewogICJpbmRpY2VzIjogImluZGV4XzEsaW5kZXhfMiIsCiAgImlnbm9yZV91bmF2YWlsYWJsZSI6IHRydWUsCiAgImluY2x1ZGVfZ2xvYmFsX3N0YXRlIjogZmFsc2UKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PUT /_snapshot/my_backup/snapshot_1
{
  &quot;indices&quot;: &quot;index_1,index_2&quot;,
  &quot;ignore_unavailable&quot;: true,
  &quot;include_global_state&quot;: false
}</pre></div><div class='content'><ul>
<li><strong>indices</strong>: Specifies which indices to include in the snapshot.</li>
<li><strong>ignore_unavailable</strong>: If true, the snapshot process will ignore indices that are missing or closed.</li>
<li><strong>include_global_state</strong>: If false, the global cluster state (e.g., templates, persistent settings) is not included in the snapshot.</li>
</ul>
</div><h1>Restoring from a Snapshot</h1>
<div class='content'><p>To restore data from a snapshot, you need to specify the snapshot and the indices you want to restore.</p>
</div><h2>Example: Restoring a Snapshot</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UE9TVCAvX3NuYXBzaG90L215X2JhY2t1cC9zbmFwc2hvdF8xL19yZXN0b3JlCnsKICAiaW5kaWNlcyI6ICJpbmRleF8xIiwKICAiaWdub3JlX3VuYXZhaWxhYmxlIjogdHJ1ZSwKICAiaW5jbHVkZV9nbG9iYWxfc3RhdGUiOiBmYWxzZSwKICAicmVuYW1lX3BhdHRlcm4iOiAiaW5kZXhfKC4rKSIsCiAgInJlbmFtZV9yZXBsYWNlbWVudCI6ICJyZXN0b3JlZF9pbmRleF8kMSIKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>POST /_snapshot/my_backup/snapshot_1/_restore
{
  &quot;indices&quot;: &quot;index_1&quot;,
  &quot;ignore_unavailable&quot;: true,
  &quot;include_global_state&quot;: false,
  &quot;rename_pattern&quot;: &quot;index_(.+)&quot;,
  &quot;rename_replacement&quot;: &quot;restored_index_$1&quot;
}</pre></div><div class='content'><ul>
<li><strong>indices</strong>: Specifies which indices to restore.</li>
<li><strong>ignore_unavailable</strong>: If true, the restore process will ignore indices that are missing in the snapshot.</li>
<li><strong>include_global_state</strong>: If false, the global cluster state is not restored.</li>
<li><strong>rename_pattern</strong>: A regex pattern to match index names.</li>
<li><strong>rename_replacement</strong>: A replacement string to rename indices during restore.</li>
</ul>
</div><h1>Monitoring Snapshots and Restores</h1>
<div class='content'><p>You can monitor the status of your snapshots and restores to ensure they are completed successfully.</p>
</div><h2>Example: Checking Snapshot Status</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0VUIC9fc25hcHNob3QvbXlfYmFja3VwL3NuYXBzaG90XzE="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GET /_snapshot/my_backup/snapshot_1</pre></div><div class='content'></div><h2>Example: Checking Restore Status</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0VUIC9fY2F0L3JlY292ZXJ5P3Y="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GET /_cat/recovery?v</pre></div><div class='content'></div><h1>Best Practices</h1>
<div class='content'><ul>
<li><strong>Regular Backups</strong>: Schedule regular snapshots to ensure you always have a recent backup.</li>
<li><strong>Test Restores</strong>: Periodically test restoring from snapshots to ensure your backup process is working correctly.</li>
<li><strong>Secure Repositories</strong>: Ensure that your snapshot repositories are secure and have appropriate access controls.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Snapshot and Restore in Elasticsearch is a powerful feature that helps you manage your data's safety and integrity. By setting up repositories, taking regular snapshots, and testing restores, you can ensure that your data is always protected and recoverable.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='cross-cluster-search'>&#x25C4;Cross-Cluster Search</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Snapshot and Restore</a>
	</div>
	<div class='col-4 text-end'>
					<a href='elasticsearch-plugins'>Elasticsearch Plugins &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
