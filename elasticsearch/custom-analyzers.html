<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Analyzers</title>

    <link rel="alternate" href="https://campusempresa.com/elasticsearch/custom-analyzers" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/elasticsearch/custom-analyzers" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/elasticsearch/custom-analyzers" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/elasticsearch/custom-analyzers" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/elasticsearch/custom-analyzers" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='elasticsearch-machine-learning'>&#x25C4;Elasticsearch with Machine Learning</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Custom Analyzers</a>
	</div>
	<div class='col-4 text-end'>
					<a href='index-templates'>Index Templates &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore custom analyzers in Elasticsearch. Analyzers are essential components in Elasticsearch that process text during indexing and searching. Custom analyzers allow you to tailor the text analysis process to fit your specific needs.</p>
</div><h1>What is an Analyzer?</h1>
<div class='content'><p>An analyzer in Elasticsearch is a combination of:</p>
<ul>
<li><strong>Character filters</strong>: Modify the stream of characters before tokenization.</li>
<li><strong>Tokenizer</strong>: Breaks the stream of characters into tokens.</li>
<li><strong>Token filters</strong>: Modify, add, or remove tokens.</li>
</ul>
</div><h1>Built-in vs. Custom Analyzers</h1>
<div class='content'><p>Elasticsearch provides several built-in analyzers, but sometimes they may not meet your specific requirements. Custom analyzers allow you to define your own combination of character filters, tokenizers, and token filters.</p>
</div><h2>Built-in Analyzers</h2>
<div class='content'><p>Some common built-in analyzers include:</p>
<ul>
<li><strong>Standard Analyzer</strong>: The default analyzer that provides a good balance for most use cases.</li>
<li><strong>Whitespace Analyzer</strong>: Tokenizes text based on whitespace.</li>
<li><strong>Keyword Analyzer</strong>: Treats the entire input as a single token.</li>
</ul>
</div><h2>Custom Analyzers</h2>
<div class='content'><p>Custom analyzers are defined in the index settings and allow for more granular control over the text analysis process.</p>
</div><h1>Creating a Custom Analyzer</h1>
<div class='content'><p>To create a custom analyzer, you need to define it in the index settings. Hereâ€™s a step-by-step guide:</p>
</div><h2>Step 1: Define Character Filters</h2>
<div class='content'><p>Character filters preprocess the text before tokenization. For example, you might want to remove HTML tags or normalize certain characters.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ImNoYXJfZmlsdGVyIjogewogICJodG1sX3N0cmlwIjogewogICAgInR5cGUiOiAiaHRtbF9zdHJpcCIKICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&quot;char_filter&quot;: {
  &quot;html_strip&quot;: {
    &quot;type&quot;: &quot;html_strip&quot;
  }
}</pre></div><div class='content'></div><h2>Step 2: Define a Tokenizer</h2>
<div class='content'><p>The tokenizer splits the text into tokens. Common tokenizers include <code>standard</code>, <code>whitespace</code>, and <code>keyword</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("InRva2VuaXplciI6IHsKICAibXlfdG9rZW5pemVyIjogewogICAgInR5cGUiOiAic3RhbmRhcmQiCiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&quot;tokenizer&quot;: {
  &quot;my_tokenizer&quot;: {
    &quot;type&quot;: &quot;standard&quot;
  }
}</pre></div><div class='content'></div><h2>Step 3: Define Token Filters</h2>
<div class='content'><p>Token filters process the tokens generated by the tokenizer. They can modify, add, or remove tokens.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ImZpbHRlciI6IHsKICAibG93ZXJjYXNlX2ZpbHRlciI6IHsKICAgICJ0eXBlIjogImxvd2VyY2FzZSIKICB9LAogICJzdG9wX2ZpbHRlciI6IHsKICAgICJ0eXBlIjogInN0b3AiLAogICAgInN0b3B3b3JkcyI6IFsidGhlIiwgImEiLCAiYW4iXQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&quot;filter&quot;: {
  &quot;lowercase_filter&quot;: {
    &quot;type&quot;: &quot;lowercase&quot;
  },
  &quot;stop_filter&quot;: {
    &quot;type&quot;: &quot;stop&quot;,
    &quot;stopwords&quot;: [&quot;the&quot;, &quot;a&quot;, &quot;an&quot;]
  }
}</pre></div><div class='content'></div><h2>Step 4: Combine Them into an Analyzer</h2>
<div class='content'><p>Finally, combine the character filters, tokenizer, and token filters into a custom analyzer.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ImFuYWx5c2lzIjogewogICJjaGFyX2ZpbHRlciI6IHsKICAgICJodG1sX3N0cmlwIjogewogICAgICAidHlwZSI6ICJodG1sX3N0cmlwIgogICAgfQogIH0sCiAgInRva2VuaXplciI6IHsKICAgICJteV90b2tlbml6ZXIiOiB7CiAgICAgICJ0eXBlIjogInN0YW5kYXJkIgogICAgfQogIH0sCiAgImZpbHRlciI6IHsKICAgICJsb3dlcmNhc2VfZmlsdGVyIjogewogICAgICAidHlwZSI6ICJsb3dlcmNhc2UiCiAgICB9LAogICAgInN0b3BfZmlsdGVyIjogewogICAgICAidHlwZSI6ICJzdG9wIiwKICAgICAgInN0b3B3b3JkcyI6IFsidGhlIiwgImEiLCAiYW4iXQogICAgfQogIH0sCiAgImFuYWx5emVyIjogewogICAgImN1c3RvbV9hbmFseXplciI6IHsKICAgICAgInR5cGUiOiAiY3VzdG9tIiwKICAgICAgImNoYXJfZmlsdGVyIjogWyJodG1sX3N0cmlwIl0sCiAgICAgICJ0b2tlbml6ZXIiOiAibXlfdG9rZW5pemVyIiwKICAgICAgImZpbHRlciI6IFsibG93ZXJjYXNlX2ZpbHRlciIsICJzdG9wX2ZpbHRlciJdCiAgICB9CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&quot;analysis&quot;: {
  &quot;char_filter&quot;: {
    &quot;html_strip&quot;: {
      &quot;type&quot;: &quot;html_strip&quot;
    }
  },
  &quot;tokenizer&quot;: {
    &quot;my_tokenizer&quot;: {
      &quot;type&quot;: &quot;standard&quot;
    }
  },
  &quot;filter&quot;: {
    &quot;lowercase_filter&quot;: {
      &quot;type&quot;: &quot;lowercase&quot;
    },
    &quot;stop_filter&quot;: {
      &quot;type&quot;: &quot;stop&quot;,
      &quot;stopwords&quot;: [&quot;the&quot;, &quot;a&quot;, &quot;an&quot;]
    }
  },
  &quot;analyzer&quot;: {
    &quot;custom_analyzer&quot;: {
      &quot;type&quot;: &quot;custom&quot;,
      &quot;char_filter&quot;: [&quot;html_strip&quot;],
      &quot;tokenizer&quot;: &quot;my_tokenizer&quot;,
      &quot;filter&quot;: [&quot;lowercase_filter&quot;, &quot;stop_filter&quot;]
    }
  }
}</pre></div><div class='content'></div><h2>Full Example</h2>
<div class='content'><p>Here is a complete example of creating an index with a custom analyzer:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UFVUIC9teV9pbmRleAp7CiAgInNldHRpbmdzIjogewogICAgImFuYWx5c2lzIjogewogICAgICAiY2hhcl9maWx0ZXIiOiB7CiAgICAgICAgImh0bWxfc3RyaXAiOiB7CiAgICAgICAgICAidHlwZSI6ICJodG1sX3N0cmlwIgogICAgICAgIH0KICAgICAgfSwKICAgICAgInRva2VuaXplciI6IHsKICAgICAgICAibXlfdG9rZW5pemVyIjogewogICAgICAgICAgInR5cGUiOiAic3RhbmRhcmQiCiAgICAgICAgfQogICAgICB9LAogICAgICAiZmlsdGVyIjogewogICAgICAgICJsb3dlcmNhc2VfZmlsdGVyIjogewogICAgICAgICAgInR5cGUiOiAibG93ZXJjYXNlIgogICAgICAgIH0sCiAgICAgICAgInN0b3BfZmlsdGVyIjogewogICAgICAgICAgInR5cGUiOiAic3RvcCIsCiAgICAgICAgICAic3RvcHdvcmRzIjogWyJ0aGUiLCAiYSIsICJhbiJdCiAgICAgICAgfQogICAgICB9LAogICAgICAiYW5hbHl6ZXIiOiB7CiAgICAgICAgImN1c3RvbV9hbmFseXplciI6IHsKICAgICAgICAgICJ0eXBlIjogImN1c3RvbSIsCiAgICAgICAgICAiY2hhcl9maWx0ZXIiOiBbImh0bWxfc3RyaXAiXSwKICAgICAgICAgICJ0b2tlbml6ZXIiOiAibXlfdG9rZW5pemVyIiwKICAgICAgICAgICJmaWx0ZXIiOiBbImxvd2VyY2FzZV9maWx0ZXIiLCAic3RvcF9maWx0ZXIiXQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgIm1hcHBpbmdzIjogewogICAgInByb3BlcnRpZXMiOiB7CiAgICAgICJjb250ZW50IjogewogICAgICAgICJ0eXBlIjogInRleHQiLAogICAgICAgICJhbmFseXplciI6ICJjdXN0b21fYW5hbHl6ZXIiCiAgICAgIH0KICAgIH0KICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PUT /my_index
{
  &quot;settings&quot;: {
    &quot;analysis&quot;: {
      &quot;char_filter&quot;: {
        &quot;html_strip&quot;: {
          &quot;type&quot;: &quot;html_strip&quot;
        }
      },
      &quot;tokenizer&quot;: {
        &quot;my_tokenizer&quot;: {
          &quot;type&quot;: &quot;standard&quot;
        }
      },
      &quot;filter&quot;: {
        &quot;lowercase_filter&quot;: {
          &quot;type&quot;: &quot;lowercase&quot;
        },
        &quot;stop_filter&quot;: {
          &quot;type&quot;: &quot;stop&quot;,
          &quot;stopwords&quot;: [&quot;the&quot;, &quot;a&quot;, &quot;an&quot;]
        }
      },
      &quot;analyzer&quot;: {
        &quot;custom_analyzer&quot;: {
          &quot;type&quot;: &quot;custom&quot;,
          &quot;char_filter&quot;: [&quot;html_strip&quot;],
          &quot;tokenizer&quot;: &quot;my_tokenizer&quot;,
          &quot;filter&quot;: [&quot;lowercase_filter&quot;, &quot;stop_filter&quot;]
        }
      }
    }
  },
  &quot;mappings&quot;: {
    &quot;properties&quot;: {
      &quot;content&quot;: {
        &quot;type&quot;: &quot;text&quot;,
        &quot;analyzer&quot;: &quot;custom_analyzer&quot;
      }
    }
  }
}</pre></div><div class='content'></div><h1>Testing Your Custom Analyzer</h1>
<div class='content'><p>You can test your custom analyzer using the <code>_analyze</code> API to ensure it works as expected.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UE9TVCAvbXlfaW5kZXgvX2FuYWx5emUKewogICJhbmFseXplciI6ICJjdXN0b21fYW5hbHl6ZXIiLAogICJ0ZXh0IjogIjxwPlRoZSBxdWljayBicm93biBmb3gganVtcHMgb3ZlciB0aGUgbGF6eSBkb2cuPC9wPiIKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>POST /my_index/_analyze
{
  &quot;analyzer&quot;: &quot;custom_analyzer&quot;,
  &quot;text&quot;: &quot;&lt;p&gt;The quick brown fox jumps over the lazy dog.&lt;/p&gt;&quot;
}</pre></div><div class='content'><p>Expected output:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJ0b2tlbnMiOiBbCiAgICB7CiAgICAgICJ0b2tlbiI6ICJxdWljayIsCiAgICAgICJzdGFydF9vZmZzZXQiOiA0LAogICAgICAiZW5kX29mZnNldCI6IDksCiAgICAgICJ0eXBlIjogIjxBTFBIQU5VTT4iLAogICAgICAicG9zaXRpb24iOiAxCiAgICB9LAogICAgewogICAgICAidG9rZW4iOiAiYnJvd24iLAogICAgICAic3RhcnRfb2Zmc2V0IjogMTAsCiAgICAgICJlbmRfb2Zmc2V0IjogMTUsCiAgICAgICJ0eXBlIjogIjxBTFBIQU5VTT4iLAogICAgICAicG9zaXRpb24iOiAyCiAgICB9LAogICAgewogICAgICAidG9rZW4iOiAiZm94IiwKICAgICAgInN0YXJ0X29mZnNldCI6IDE2LAogICAgICAiZW5kX29mZnNldCI6IDE5LAogICAgICAidHlwZSI6ICI8QUxQSEFOVU0+IiwKICAgICAgInBvc2l0aW9uIjogMwogICAgfSwKICAgIHsKICAgICAgInRva2VuIjogImp1bXBzIiwKICAgICAgInN0YXJ0X29mZnNldCI6IDIwLAogICAgICAiZW5kX29mZnNldCI6IDI1LAogICAgICAidHlwZSI6ICI8QUxQSEFOVU0+IiwKICAgICAgInBvc2l0aW9uIjogNAogICAgfSwKICAgIHsKICAgICAgInRva2VuIjogIm92ZXIiLAogICAgICAic3RhcnRfb2Zmc2V0IjogMjYsCiAgICAgICJlbmRfb2Zmc2V0IjogMzAsCiAgICAgICJ0eXBlIjogIjxBTFBIQU5VTT4iLAogICAgICAicG9zaXRpb24iOiA1CiAgICB9LAogICAgewogICAgICAidG9rZW4iOiAibGF6eSIsCiAgICAgICJzdGFydF9vZmZzZXQiOiAzNCwKICAgICAgImVuZF9vZmZzZXQiOiAzOCwKICAgICAgInR5cGUiOiAiPEFMUEhBTlVNPiIsCiAgICAgICJwb3NpdGlvbiI6IDYKICAgIH0sCiAgICB7CiAgICAgICJ0b2tlbiI6ICJkb2ciLAogICAgICAic3RhcnRfb2Zmc2V0IjogMzksCiAgICAgICJlbmRfb2Zmc2V0IjogNDIsCiAgICAgICJ0eXBlIjogIjxBTFBIQU5VTT4iLAogICAgICAicG9zaXRpb24iOiA3CiAgICB9CiAgXQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;tokens&quot;: [
    {
      &quot;token&quot;: &quot;quick&quot;,
      &quot;start_offset&quot;: 4,
      &quot;end_offset&quot;: 9,
      &quot;type&quot;: &quot;&lt;ALPHANUM&gt;&quot;,
      &quot;position&quot;: 1
    },
    {
      &quot;token&quot;: &quot;brown&quot;,
      &quot;start_offset&quot;: 10,
      &quot;end_offset&quot;: 15,
      &quot;type&quot;: &quot;&lt;ALPHANUM&gt;&quot;,
      &quot;position&quot;: 2
    },
    {
      &quot;token&quot;: &quot;fox&quot;,
      &quot;start_offset&quot;: 16,
      &quot;end_offset&quot;: 19,
      &quot;type&quot;: &quot;&lt;ALPHANUM&gt;&quot;,
      &quot;position&quot;: 3
    },
    {
      &quot;token&quot;: &quot;jumps&quot;,
      &quot;start_offset&quot;: 20,
      &quot;end_offset&quot;: 25,
      &quot;type&quot;: &quot;&lt;ALPHANUM&gt;&quot;,
      &quot;position&quot;: 4
    },
    {
      &quot;token&quot;: &quot;over&quot;,
      &quot;start_offset&quot;: 26,
      &quot;end_offset&quot;: 30,
      &quot;type&quot;: &quot;&lt;ALPHANUM&gt;&quot;,
      &quot;position&quot;: 5
    },
    {
      &quot;token&quot;: &quot;lazy&quot;,
      &quot;start_offset&quot;: 34,
      &quot;end_offset&quot;: 38,
      &quot;type&quot;: &quot;&lt;ALPHANUM&gt;&quot;,
      &quot;position&quot;: 6
    },
    {
      &quot;token&quot;: &quot;dog&quot;,
      &quot;start_offset&quot;: 39,
      &quot;end_offset&quot;: 42,
      &quot;type&quot;: &quot;&lt;ALPHANUM&gt;&quot;,
      &quot;position&quot;: 7
    }
  ]
}</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Custom analyzers in Elasticsearch provide powerful tools for tailoring text analysis to your specific needs. By combining character filters, tokenizers, and token filters, you can create sophisticated analyzers that improve the accuracy and relevance of your search results. Understanding and utilizing custom analyzers can significantly enhance the performance and capabilities of your Elasticsearch applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='elasticsearch-machine-learning'>&#x25C4;Elasticsearch with Machine Learning</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Custom Analyzers</a>
	</div>
	<div class='col-4 text-end'>
					<a href='index-templates'>Index Templates &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiÃ¨ncia d'Ãºs i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">EntÃ¨s!</a>
    <a href="/cookies">MÃ©s informaciÃ³</a>
</div>	

	</div>    
</body>
</html>
