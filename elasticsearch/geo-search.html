<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geo-Search in Elasticsearch</title>

    <link rel="alternate" href="https://campusempresa.com/elasticsearch/geo-search" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/elasticsearch/geo-search" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/elasticsearch/geo-search" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/elasticsearch/geo-search" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/elasticsearch/geo-search" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='scripting'>&#x25C4;Scripting</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Geo-Search in Elasticsearch</a>
	</div>
	<div class='col-4 text-end'>
					<a href='indexing-performance'>Indexing Performance &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Geo-Search in Elasticsearch allows you to perform queries based on geographical data. This is particularly useful for applications that need to filter or sort data by location, such as finding nearby restaurants, stores, or any other location-based services.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Geo-Point Field</strong>: A field type in Elasticsearch used to store geographical points (latitude and longitude).</li>
<li><strong>Geo-Shape Field</strong>: A field type used to store complex shapes like polygons, lines, and circles.</li>
<li><strong>Geo-Queries</strong>: Queries that allow you to filter or sort data based on geographical criteria.</li>
</ul>
</div><h1>Setting Up Geo-Point Fields</h1>
<div class='content'><p>To perform geo-search, you need to define a geo-point field in your index mapping.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UFVUIC9teV9pbmRleAp7CiAgIm1hcHBpbmdzIjogewogICAgInByb3BlcnRpZXMiOiB7CiAgICAgICJsb2NhdGlvbiI6IHsKICAgICAgICAidHlwZSI6ICJnZW9fcG9pbnQiCiAgICAgIH0KICAgIH0KICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PUT /my_index
{
  &quot;mappings&quot;: {
    &quot;properties&quot;: {
      &quot;location&quot;: {
        &quot;type&quot;: &quot;geo_point&quot;
      }
    }
  }
}</pre></div><div class='content'></div><h1>Indexing Documents with Geo-Points</h1>
<div class='content'><p>When indexing documents, you can include geo-point data in the form of latitude and longitude.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UE9TVCAvbXlfaW5kZXgvX2RvYy8xCnsKICAibmFtZSI6ICJDZW50cmFsIFBhcmsiLAogICJsb2NhdGlvbiI6IHsKICAgICJsYXQiOiA0MC43ODUwOTEsCiAgICAibG9uIjogLTczLjk2ODI4NQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>POST /my_index/_doc/1
{
  &quot;name&quot;: &quot;Central Park&quot;,
  &quot;location&quot;: {
    &quot;lat&quot;: 40.785091,
    &quot;lon&quot;: -73.968285
  }
}</pre></div><div class='content'></div><h1>Basic Geo-Queries</h1>
<div class='content'></div><h2>Geo-Distance Query</h2>
<div class='content'><p>Find documents within a certain distance from a specific point.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0VUIC9teV9pbmRleC9fc2VhcmNoCnsKICAicXVlcnkiOiB7CiAgICAiZ2VvX2Rpc3RhbmNlIjogewogICAgICAiZGlzdGFuY2UiOiAiMTBrbSIsCiAgICAgICJsb2NhdGlvbiI6IHsKICAgICAgICAibGF0IjogNDAuNzg1MDkxLAogICAgICAgICJsb24iOiAtNzMuOTY4Mjg1CiAgICAgIH0KICAgIH0KICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GET /my_index/_search
{
  &quot;query&quot;: {
    &quot;geo_distance&quot;: {
      &quot;distance&quot;: &quot;10km&quot;,
      &quot;location&quot;: {
        &quot;lat&quot;: 40.785091,
        &quot;lon&quot;: -73.968285
      }
    }
  }
}</pre></div><div class='content'></div><h2>Geo-Bounding Box Query</h2>
<div class='content'><p>Find documents within a specified rectangular area.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0VUIC9teV9pbmRleC9fc2VhcmNoCnsKICAicXVlcnkiOiB7CiAgICAiZ2VvX2JvdW5kaW5nX2JveCI6IHsKICAgICAgImxvY2F0aW9uIjogewogICAgICAgICJ0b3BfbGVmdCI6IHsKICAgICAgICAgICJsYXQiOiA0MC45MTUyNTUsCiAgICAgICAgICAibG9uIjogLTc0LjI1OTA5CiAgICAgICAgfSwKICAgICAgICAiYm90dG9tX3JpZ2h0IjogewogICAgICAgICAgImxhdCI6IDQwLjQ5NjA0NCwKICAgICAgICAgICJsb24iOiAtNzMuNzAwMjcyCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GET /my_index/_search
{
  &quot;query&quot;: {
    &quot;geo_bounding_box&quot;: {
      &quot;location&quot;: {
        &quot;top_left&quot;: {
          &quot;lat&quot;: 40.915255,
          &quot;lon&quot;: -74.25909
        },
        &quot;bottom_right&quot;: {
          &quot;lat&quot;: 40.496044,
          &quot;lon&quot;: -73.700272
        }
      }
    }
  }
}</pre></div><div class='content'></div><h2>Geo-Polygon Query</h2>
<div class='content'><p>Find documents within a specified polygon.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0VUIC9teV9pbmRleC9fc2VhcmNoCnsKICAicXVlcnkiOiB7CiAgICAiZ2VvX3BvbHlnb24iOiB7CiAgICAgICJsb2NhdGlvbiI6IHsKICAgICAgICAicG9pbnRzIjogWwogICAgICAgICAgeyJsYXQiOiA0MC45MTUyNTUsICJsb24iOiAtNzQuMjU5MDl9LAogICAgICAgICAgeyJsYXQiOiA0MC40OTYwNDQsICJsb24iOiAtNzQuMjU5MDl9LAogICAgICAgICAgeyJsYXQiOiA0MC40OTYwNDQsICJsb24iOiAtNzMuNzAwMjcyfSwKICAgICAgICAgIHsibGF0IjogNDAuOTE1MjU1LCAibG9uIjogLTczLjcwMDI3Mn0KICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GET /my_index/_search
{
  &quot;query&quot;: {
    &quot;geo_polygon&quot;: {
      &quot;location&quot;: {
        &quot;points&quot;: [
          {&quot;lat&quot;: 40.915255, &quot;lon&quot;: -74.25909},
          {&quot;lat&quot;: 40.496044, &quot;lon&quot;: -74.25909},
          {&quot;lat&quot;: 40.496044, &quot;lon&quot;: -73.700272},
          {&quot;lat&quot;: 40.915255, &quot;lon&quot;: -73.700272}
        ]
      }
    }
  }
}</pre></div><div class='content'></div><h1>Advanced Geo-Search Techniques</h1>
<div class='content'></div><h2>Sorting by Distance</h2>
<div class='content'><p>Sort search results by their distance from a specific point.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0VUIC9teV9pbmRleC9fc2VhcmNoCnsKICAic29ydCI6IFsKICAgIHsKICAgICAgIl9nZW9fZGlzdGFuY2UiOiB7CiAgICAgICAgImxvY2F0aW9uIjogewogICAgICAgICAgImxhdCI6IDQwLjc4NTA5MSwKICAgICAgICAgICJsb24iOiAtNzMuOTY4Mjg1CiAgICAgICAgfSwKICAgICAgICAib3JkZXIiOiAiYXNjIiwKICAgICAgICAidW5pdCI6ICJrbSIKICAgICAgfQogICAgfQogIF0sCiAgInF1ZXJ5IjogewogICAgIm1hdGNoX2FsbCI6IHt9CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GET /my_index/_search
{
  &quot;sort&quot;: [
    {
      &quot;_geo_distance&quot;: {
        &quot;location&quot;: {
          &quot;lat&quot;: 40.785091,
          &quot;lon&quot;: -73.968285
        },
        &quot;order&quot;: &quot;asc&quot;,
        &quot;unit&quot;: &quot;km&quot;
      }
    }
  ],
  &quot;query&quot;: {
    &quot;match_all&quot;: {}
  }
}</pre></div><div class='content'></div><h2>Geo-Shape Queries</h2>
<div class='content'><p>For more complex geographical queries, you can use geo-shape fields and queries.</p>
<h4>Defining a Geo-Shape Field</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UFVUIC9teV9pbmRleAp7CiAgIm1hcHBpbmdzIjogewogICAgInByb3BlcnRpZXMiOiB7CiAgICAgICJsb2NhdGlvbiI6IHsKICAgICAgICAidHlwZSI6ICJnZW9fc2hhcGUiCiAgICAgIH0KICAgIH0KICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PUT /my_index
{
  &quot;mappings&quot;: {
    &quot;properties&quot;: {
      &quot;location&quot;: {
        &quot;type&quot;: &quot;geo_shape&quot;
      }
    }
  }
}</pre></div><div class='content'><h4>Indexing Documents with Geo-Shapes</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UE9TVCAvbXlfaW5kZXgvX2RvYy8xCnsKICAibmFtZSI6ICJDZW50cmFsIFBhcmsiLAogICJsb2NhdGlvbiI6IHsKICAgICJ0eXBlIjogInBvbHlnb24iLAogICAgImNvb3JkaW5hdGVzIjogWwogICAgICBbCiAgICAgICAgWy03My45ODEsIDQwLjc2OF0sCiAgICAgICAgWy03My45NTgsIDQwLjc2OF0sCiAgICAgICAgWy03My45NTgsIDQwLjc4NV0sCiAgICAgICAgWy03My45ODEsIDQwLjc4NV0sCiAgICAgICAgWy03My45ODEsIDQwLjc2OF0KICAgICAgXQogICAgXQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>POST /my_index/_doc/1
{
  &quot;name&quot;: &quot;Central Park&quot;,
  &quot;location&quot;: {
    &quot;type&quot;: &quot;polygon&quot;,
    &quot;coordinates&quot;: [
      [
        [-73.981, 40.768],
        [-73.958, 40.768],
        [-73.958, 40.785],
        [-73.981, 40.785],
        [-73.981, 40.768]
      ]
    ]
  }
}</pre></div><div class='content'><h4>Geo-Shape Query</h4>
<p>Find documents that intersect with a given shape.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0VUIC9teV9pbmRleC9fc2VhcmNoCnsKICAicXVlcnkiOiB7CiAgICAiZ2VvX3NoYXBlIjogewogICAgICAibG9jYXRpb24iOiB7CiAgICAgICAgInNoYXBlIjogewogICAgICAgICAgInR5cGUiOiAicG9seWdvbiIsCiAgICAgICAgICAiY29vcmRpbmF0ZXMiOiBbCiAgICAgICAgICAgIFsKICAgICAgICAgICAgICBbLTczLjk4MSwgNDAuNzY4XSwKICAgICAgICAgICAgICBbLTczLjk1OCwgNDAuNzY4XSwKICAgICAgICAgICAgICBbLTczLjk1OCwgNDAuNzg1XSwKICAgICAgICAgICAgICBbLTczLjk4MSwgNDAuNzg1XSwKICAgICAgICAgICAgICBbLTczLjk4MSwgNDAuNzY4XQogICAgICAgICAgICBdCiAgICAgICAgICBdCiAgICAgICAgfSwKICAgICAgICAicmVsYXRpb24iOiAiaW50ZXJzZWN0cyIKICAgICAgfQogICAgfQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GET /my_index/_search
{
  &quot;query&quot;: {
    &quot;geo_shape&quot;: {
      &quot;location&quot;: {
        &quot;shape&quot;: {
          &quot;type&quot;: &quot;polygon&quot;,
          &quot;coordinates&quot;: [
            [
              [-73.981, 40.768],
              [-73.958, 40.768],
              [-73.958, 40.785],
              [-73.981, 40.785],
              [-73.981, 40.768]
            ]
          ]
        },
        &quot;relation&quot;: &quot;intersects&quot;
      }
    }
  }
}</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Geo-Search in Elasticsearch is a powerful feature that allows you to perform complex geographical queries. By understanding how to define geo-point and geo-shape fields, and how to use various geo-queries, you can build robust location-based search functionalities in your applications. Whether you are filtering results within a certain distance, bounding box, or polygon, Elasticsearch provides the tools you need to handle geographical data efficiently.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='scripting'>&#x25C4;Scripting</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Geo-Search in Elasticsearch</a>
	</div>
	<div class='col-4 text-end'>
					<a href='indexing-performance'>Indexing Performance &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
