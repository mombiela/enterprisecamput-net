<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B-Trees</title>

    <link rel="alternate" href="https://campusempresa.com/estructuras_datos/tema-24" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/estructuras_datos/tema-24" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/estructuras_datos/tema-24" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/estructuras_datos/tema-24" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/estructuras_datos/tema-24" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introduction to B-Trees</h1>
<div class='content'><p>B-Trees are a self-balancing tree data structure that maintains sorted data and allows searches, insertions, deletions, and sequential access in logarithmic time. They are especially useful in database systems and file systems.</p>
</div><h2>Key Characteristics of B-Trees</h2>
<div class='content'><ul>
<li><strong>Self-balancing</strong>: B-Trees automatically maintain their balance during insertion and deletion operations.</li>
<li><strong>Nodes with multiple children</strong>: Unlike binary trees, nodes in a B-Tree can have more than two children.</li>
<li><strong>Low height</strong>: The height of a B-Tree is low compared to other trees, allowing faster data access.</li>
<li><strong>Efficient storage use</strong>: B-Trees are designed to minimize the number of disk accesses, making them ideal for disk storage systems.</li>
</ul>
</div><h1>Structure of a B-Tree</h1>
<div class='content'><p>A B-Tree of order <code>m</code> has the following properties:</p>
<ul>
<li>Each node can have at most <code>m</code> children.</li>
<li>Each internal node (except the root) has at least <code>⌈m/2⌉</code> children.</li>
<li>The root has at least two children if it is not a leaf.</li>
<li>All leaf nodes are at the same level.</li>
<li>A node with <code>k</code> children contains <code>k-1</code> keys.</li>
</ul>
</div><h2>Example of a B-Tree of Order 3</h2>
<div class='content'><p>Consider a B-Tree of order 3 (also known as a 2-3 tree):</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ICAgICAgICBbMTAgfCAyMF0KICAgICAgIC8gICAgfCAgICBcCiAgWzUgfCA3XSAgWzE1XSAgWzI1IHwgMzBd"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>        [10 | 20]
       /    |    \
  [5 | 7]  [15]  [25 | 30]</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>The root has 2 keys and 3 children.</li>
<li>Each leaf node has between 1 and 2 keys.</li>
</ul>
</div><h1>Operations in B-Trees</h1>
<div class='content'></div><h2>Insertion</h2>
<div class='content'><p>Insertion in a B-Tree involves finding the correct position for the new key and, if necessary, splitting nodes that exceed the maximum number of allowed keys.</p>
<h4>Example of Insertion</h4>
<p>Suppose we want to insert the key <code>12</code> into the following B-Tree of order 3:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ICAgICAgICBbMTAgfCAyMF0KICAgICAgIC8gICAgfCAgICBcCiAgWzUgfCA3XSAgWzE1XSAgWzI1IHwgMzBd"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>        [10 | 20]
       /    |    \
  [5 | 7]  [15]  [25 | 30]</pre></div><div class='content'><ol>
<li>Find the appropriate leaf for the key <code>12</code>, which is the node <code>[15]</code>.</li>
<li>Insert <code>12</code> into the node <code>[15]</code>, resulting in <code>[12 | 15]</code>.</li>
<li>If the node exceeds the maximum number of keys, split it and adjust the tree.</li>
</ol>
</div><h2>Deletion</h2>
<div class='content'><p>Deletion in a B-Tree can be more complex than insertion, as it may require redistributing keys or merging nodes to maintain the tree's properties.</p>
<h4>Example of Deletion</h4>
<p>Suppose we want to delete the key <code>20</code> from the following B-Tree of order 3:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ICAgICAgICBbMTAgfCAyMF0KICAgICAgIC8gICAgfCAgICBcCiAgWzUgfCA3XSAgWzE1XSAgWzI1IHwgMzBd"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>        [10 | 20]
       /    |    \
  [5 | 7]  [15]  [25 | 30]</pre></div><div class='content'><ol>
<li>Find the key <code>20</code> and delete it.</li>
<li>If the deletion leaves a node with fewer than <code>⌈m/2⌉</code> keys, redistribute or merge nodes to maintain balance.</li>
</ol>
</div><h1>Example Code in Python</h1>
<div class='content'><p>Below is a basic example of a B-Tree implementation in Python:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgQlRyZWVOb2RlOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHQsIGxlYWY9RmFsc2UpOgogICAgICAgIHNlbGYudCA9IHQgICMgTWluaW11bSBkZWdyZWUgKG9yZGVyKQogICAgICAgIHNlbGYubGVhZiA9IGxlYWYgICMgVHJ1ZSBpZiB0aGUgbm9kZSBpcyBhIGxlYWYKICAgICAgICBzZWxmLmtleXMgPSBbXSAgIyBMaXN0IG9mIGtleXMKICAgICAgICBzZWxmLmNoaWxkcmVuID0gW10gICMgTGlzdCBvZiBjaGlsZHJlbgoKY2xhc3MgQlRyZWU6CiAgICBkZWYgX19pbml0X18oc2VsZiwgdCk6CiAgICAgICAgc2VsZi5yb290ID0gQlRyZWVOb2RlKHQsIFRydWUpCiAgICAgICAgc2VsZi50ID0gdAoKICAgIGRlZiB0cmF2ZXJzZShzZWxmLCBub2RlKToKICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4obm9kZS5rZXlzKSk6CiAgICAgICAgICAgIGlmIG5vdCBub2RlLmxlYWY6CiAgICAgICAgICAgICAgICBzZWxmLnRyYXZlcnNlKG5vZGUuY2hpbGRyZW5baV0pCiAgICAgICAgICAgIHByaW50KG5vZGUua2V5c1tpXSwgZW5kPSIgIikKICAgICAgICBpZiBub3Qgbm9kZS5sZWFmOgogICAgICAgICAgICBzZWxmLnRyYXZlcnNlKG5vZGUuY2hpbGRyZW5bbGVuKG5vZGUua2V5cyldKQoKICAgIGRlZiBpbnNlcnQoc2VsZiwgayk6CiAgICAgICAgcm9vdCA9IHNlbGYucm9vdAogICAgICAgIGlmIGxlbihyb290LmtleXMpID09IDIgKiBzZWxmLnQgLSAxOgogICAgICAgICAgICB0ZW1wID0gQlRyZWVOb2RlKHNlbGYudCkKICAgICAgICAgICAgc2VsZi5yb290ID0gdGVtcAogICAgICAgICAgICB0ZW1wLmNoaWxkcmVuLmluc2VydCgwLCByb290KQogICAgICAgICAgICBzZWxmLnNwbGl0X2NoaWxkKHRlbXAsIDApCiAgICAgICAgICAgIHNlbGYuaW5zZXJ0X25vbl9mdWxsKHRlbXAsIGspCiAgICAgICAgZWxzZToKICAgICAgICAgICAgc2VsZi5pbnNlcnRfbm9uX2Z1bGwocm9vdCwgaykKCiAgICBkZWYgc3BsaXRfY2hpbGQoc2VsZiwgcGFyZW50LCBpKToKICAgICAgICB0ID0gc2VsZi50CiAgICAgICAgeSA9IHBhcmVudC5jaGlsZHJlbltpXQogICAgICAgIHogPSBCVHJlZU5vZGUodCwgeS5sZWFmKQogICAgICAgIHBhcmVudC5jaGlsZHJlbi5pbnNlcnQoaSArIDEsIHopCiAgICAgICAgcGFyZW50LmtleXMuaW5zZXJ0KGksIHkua2V5c1t0IC0gMV0pCiAgICAgICAgei5rZXlzID0geS5rZXlzW3Q6KDIgKiB0IC0gMSldCiAgICAgICAgeS5rZXlzID0geS5rZXlzWzA6KHQgLSAxKV0KICAgICAgICBpZiBub3QgeS5sZWFmOgogICAgICAgICAgICB6LmNoaWxkcmVuID0geS5jaGlsZHJlblt0OigyICogdCldCiAgICAgICAgICAgIHkuY2hpbGRyZW4gPSB5LmNoaWxkcmVuWzA6dF0KCiAgICBkZWYgaW5zZXJ0X25vbl9mdWxsKHNlbGYsIG5vZGUsIGspOgogICAgICAgIGkgPSBsZW4obm9kZS5rZXlzKSAtIDEKICAgICAgICBpZiBub2RlLmxlYWY6CiAgICAgICAgICAgIG5vZGUua2V5cy5hcHBlbmQoMCkKICAgICAgICAgICAgd2hpbGUgaSA+PSAwIGFuZCBrIDwgbm9kZS5rZXlzW2ldOgogICAgICAgICAgICAgICAgbm9kZS5rZXlzW2kgKyAxXSA9IG5vZGUua2V5c1tpXQogICAgICAgICAgICAgICAgaSAtPSAxCiAgICAgICAgICAgIG5vZGUua2V5c1tpICsgMV0gPSBrCiAgICAgICAgZWxzZToKICAgICAgICAgICAgd2hpbGUgaSA+PSAwIGFuZCBrIDwgbm9kZS5rZXlzW2ldOgogICAgICAgICAgICAgICAgaSAtPSAxCiAgICAgICAgICAgIGkgKz0gMQogICAgICAgICAgICBpZiBsZW4obm9kZS5jaGlsZHJlbltpXS5rZXlzKSA9PSAyICogc2VsZi50IC0gMToKICAgICAgICAgICAgICAgIHNlbGYuc3BsaXRfY2hpbGQobm9kZSwgaSkKICAgICAgICAgICAgICAgIGlmIGsgPiBub2RlLmtleXNbaV06CiAgICAgICAgICAgICAgICAgICAgaSArPSAxCiAgICAgICAgICAgIHNlbGYuaW5zZXJ0X25vbl9mdWxsKG5vZGUuY2hpbGRyZW5baV0sIGspCgojIEV4YW1wbGUgdXNhZ2UKYl90cmVlID0gQlRyZWUoMykKa2V5cyA9IFsxMCwgMjAsIDUsIDYsIDEyLCAzMCwgNywgMTddCmZvciBrZXkgaW4ga2V5czoKICAgIGJfdHJlZS5pbnNlcnQoa2V5KQoKYl90cmVlLnRyYXZlcnNlKGJfdHJlZS5yb290KQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class BTreeNode:
    def __init__(self, t, leaf=False):
        self.t = t  # Minimum degree (order)
        self.leaf = leaf  # True if the node is a leaf
        self.keys = []  # List of keys
        self.children = []  # List of children

class BTree:
    def __init__(self, t):
        self.root = BTreeNode(t, True)
        self.t = t

    def traverse(self, node):
        for i in range(len(node.keys)):
            if not node.leaf:
                self.traverse(node.children[i])
            print(node.keys[i], end=&quot; &quot;)
        if not node.leaf:
            self.traverse(node.children[len(node.keys)])

    def insert(self, k):
        root = self.root
        if len(root.keys) == 2 * self.t - 1:
            temp = BTreeNode(self.t)
            self.root = temp
            temp.children.insert(0, root)
            self.split_child(temp, 0)
            self.insert_non_full(temp, k)
        else:
            self.insert_non_full(root, k)

    def split_child(self, parent, i):
        t = self.t
        y = parent.children[i]
        z = BTreeNode(t, y.leaf)
        parent.children.insert(i + 1, z)
        parent.keys.insert(i, y.keys[t - 1])
        z.keys = y.keys[t:(2 * t - 1)]
        y.keys = y.keys[0:(t - 1)]
        if not y.leaf:
            z.children = y.children[t:(2 * t)]
            y.children = y.children[0:t]

    def insert_non_full(self, node, k):
        i = len(node.keys) - 1
        if node.leaf:
            node.keys.append(0)
            while i &gt;= 0 and k &lt; node.keys[i]:
                node.keys[i + 1] = node.keys[i]
                i -= 1
            node.keys[i + 1] = k
        else:
            while i &gt;= 0 and k &lt; node.keys[i]:
                i -= 1
            i += 1
            if len(node.children[i].keys) == 2 * self.t - 1:
                self.split_child(node, i)
                if k &gt; node.keys[i]:
                    i += 1
            self.insert_non_full(node.children[i], k)

# Example usage
b_tree = BTree(3)
keys = [10, 20, 5, 6, 12, 30, 7, 17]
for key in keys:
    b_tree.insert(key)

b_tree.traverse(b_tree.root)</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>B-Trees are a fundamental data structure in computer science, especially in the realm of databases and file systems. Their ability to maintain balance and minimize disk accesses makes them extremely efficient for search, insertion, and deletion operations. Understanding how they work and how to implement them is essential for any IT professional working with large volumes of data.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
