<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integration Testing in Flask</title>

    <link rel="alternate" href="https://campusempresa.com/flask/integration-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/flask/integration-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/flask/integration-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/flask/integration-testing" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/flask/integration-testing" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing'>&#x25C4;Unit Testing with Flask</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Integration Testing in Flask</a>
	</div>
	<div class='col-4 text-end'>
					<a href='deploying-flask-applications'>Deploying Flask Applications &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Integration testing is a crucial part of the software development lifecycle. It ensures that different components of your Flask application work together as expected. This topic will guide you through the basics of integration testing in Flask, from setting up your environment to writing and running your tests.</p>
</div><h1>What is Integration Testing?</h1>
<div class='content'><p>Integration testing is a level of software testing where individual units or components are combined and tested as a group. The purpose is to expose faults in the interaction between integrated units.</p>
<ul>
<li><strong>Unit Testing</strong>: Tests individual components in isolation.</li>
<li><strong>Integration Testing</strong>: Tests the interaction between components.</li>
<li><strong>System Testing</strong>: Tests the complete system as a whole.</li>
</ul>
</div><h1>Setting Up Your Environment</h1>
<div class='content'><p>Before we start writing integration tests, we need to set up our testing environment.</p>
</div><h2>Installing Required Packages</h2>
<div class='content'><p>First, ensure you have Flask and the necessary testing packages installed. You can install them using pip:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwIGluc3RhbGwgRmxhc2sgcHl0ZXN0IHB5dGVzdC1mbGFzaw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pip install Flask pytest pytest-flask</pre></div><div class='content'></div><h2>Configuring Flask for Testing</h2>
<div class='content'><p>Create a <code>conftest.py</code> file to configure your Flask application for testing:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHB5dGVzdApmcm9tIG15YXBwIGltcG9ydCBjcmVhdGVfYXBwCgpAcHl0ZXN0LmZpeHR1cmUKZGVmIGFwcCgpOgogICAgYXBwID0gY3JlYXRlX2FwcCgpCiAgICBhcHAuY29uZmlnLnVwZGF0ZSh7CiAgICAgICAgIlRFU1RJTkciOiBUcnVlLAogICAgfSkKICAgIHlpZWxkIGFwcAoKQHB5dGVzdC5maXh0dXJlCmRlZiBjbGllbnQoYXBwKToKICAgIHJldHVybiBhcHAudGVzdF9jbGllbnQoKQoKQHB5dGVzdC5maXh0dXJlCmRlZiBydW5uZXIoYXBwKToKICAgIHJldHVybiBhcHAudGVzdF9jbGlfcnVubmVyKCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import pytest
from myapp import create_app

@pytest.fixture
def app():
    app = create_app()
    app.config.update({
        &quot;TESTING&quot;: True,
    })
    yield app

@pytest.fixture
def client(app):
    return app.test_client()

@pytest.fixture
def runner(app):
    return app.test_cli_runner()</pre></div><div class='content'><ul>
<li><code>create_app()</code>: A factory function to create your Flask app.</li>
<li><code>TESTING</code>: A configuration setting to enable testing mode.</li>
</ul>
</div><h1>Writing Integration Tests</h1>
<div class='content'><p>Now that our environment is set up, let's write some integration tests.</p>
</div><h2>Example: Testing a Simple Route</h2>
<div class='content'><p>Consider a simple Flask route:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBteWFwcC9yb3V0ZXMucHkKZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIGpzb25pZnkKCmFwcCA9IEZsYXNrKF9fbmFtZV9fKQoKQGFwcC5yb3V0ZSgnL2hlbGxvJykKZGVmIGhlbGxvKCk6CiAgICByZXR1cm4ganNvbmlmeShtZXNzYWdlPSJIZWxsbywgV29ybGQhIik="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># myapp/routes.py
from flask import Flask, jsonify

app = Flask(__name__)

@app.route('/hello')
def hello():
    return jsonify(message=&quot;Hello, World!&quot;)</pre></div><div class='content'><p>To test this route, create a test file <code>test_routes.py</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB0ZXN0X3JvdXRlcy5weQpkZWYgdGVzdF9oZWxsbyhjbGllbnQpOgogICAgcmVzcG9uc2UgPSBjbGllbnQuZ2V0KCcvaGVsbG8nKQogICAgYXNzZXJ0IHJlc3BvbnNlLnN0YXR1c19jb2RlID09IDIwMAogICAgYXNzZXJ0IHJlc3BvbnNlLmpzb24gPT0geyJtZXNzYWdlIjogIkhlbGxvLCBXb3JsZCEifQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># test_routes.py
def test_hello(client):
    response = client.get('/hello')
    assert response.status_code == 200
    assert response.json == {&quot;message&quot;: &quot;Hello, World!&quot;}</pre></div><div class='content'><ul>
<li><code>client.get('/hello')</code>: Sends a GET request to the <code>/hello</code> route.</li>
<li><code>response.status_code</code>: Checks the HTTP status code.</li>
<li><code>response.json</code>: Checks the JSON response.</li>
</ul>
</div><h2>Example: Testing Database Interactions</h2>
<div class='content'><p>Let's add a route that interacts with a database:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBteWFwcC9yb3V0ZXMucHkKZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIGpzb25pZnkKZnJvbSBmbGFza19zcWxhbGNoZW15IGltcG9ydCBTUUxBbGNoZW15CgphcHAgPSBGbGFzayhfX25hbWVfXykKYXBwLmNvbmZpZ1snU1FMQUxDSEVNWV9EQVRBQkFTRV9VUkknXSA9ICdzcWxpdGU6Ly8vOm1lbW9yeTonCmRiID0gU1FMQWxjaGVteShhcHApCgpjbGFzcyBVc2VyKGRiLk1vZGVsKToKICAgIGlkID0gZGIuQ29sdW1uKGRiLkludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpCiAgICBuYW1lID0gZGIuQ29sdW1uKGRiLlN0cmluZyg4MCksIHVuaXF1ZT1UcnVlLCBudWxsYWJsZT1GYWxzZSkKCkBhcHAucm91dGUoJy91c2VycycpCmRlZiBnZXRfdXNlcnMoKToKICAgIHVzZXJzID0gVXNlci5xdWVyeS5hbGwoKQogICAgcmV0dXJuIGpzb25pZnkodXNlcnM9W3VzZXIubmFtZSBmb3IgdXNlciBpbiB1c2Vyc10p"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># myapp/routes.py
from flask import Flask, jsonify
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///:memory:'
db = SQLAlchemy(app)

class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(80), unique=True, nullable=False)

@app.route('/users')
def get_users():
    users = User.query.all()
    return jsonify(users=[user.name for user in users])</pre></div><div class='content'><p>To test this route, we need to set up the database in our tests:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB0ZXN0X3JvdXRlcy5weQppbXBvcnQgcHl0ZXN0CmZyb20gbXlhcHAucm91dGVzIGltcG9ydCBkYiwgVXNlcgoKQHB5dGVzdC5maXh0dXJlCmRlZiBpbml0X2RhdGFiYXNlKCk6CiAgICBkYi5jcmVhdGVfYWxsKCkKICAgIHVzZXIxID0gVXNlcihuYW1lPSJBbGljZSIpCiAgICB1c2VyMiA9IFVzZXIobmFtZT0iQm9iIikKICAgIGRiLnNlc3Npb24uYWRkKHVzZXIxKQogICAgZGIuc2Vzc2lvbi5hZGQodXNlcjIpCiAgICBkYi5zZXNzaW9uLmNvbW1pdCgpCiAgICB5aWVsZCBkYgogICAgZGIuZHJvcF9hbGwoKQoKZGVmIHRlc3RfZ2V0X3VzZXJzKGNsaWVudCwgaW5pdF9kYXRhYmFzZSk6CiAgICByZXNwb25zZSA9IGNsaWVudC5nZXQoJy91c2VycycpCiAgICBhc3NlcnQgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwCiAgICBhc3NlcnQgcmVzcG9uc2UuanNvbiA9PSB7InVzZXJzIjogWyJBbGljZSIsICJCb2IiXX0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># test_routes.py
import pytest
from myapp.routes import db, User

@pytest.fixture
def init_database():
    db.create_all()
    user1 = User(name=&quot;Alice&quot;)
    user2 = User(name=&quot;Bob&quot;)
    db.session.add(user1)
    db.session.add(user2)
    db.session.commit()
    yield db
    db.drop_all()

def test_get_users(client, init_database):
    response = client.get('/users')
    assert response.status_code == 200
    assert response.json == {&quot;users&quot;: [&quot;Alice&quot;, &quot;Bob&quot;]}</pre></div><div class='content'><ul>
<li><code>db.create_all()</code>: Creates the database schema.</li>
<li><code>db.drop_all()</code>: Drops the database schema after the test.</li>
<li><code>client.get('/users')</code>: Sends a GET request to the <code>/users</code> route.</li>
</ul>
</div><h1>Running Your Tests</h1>
<div class='content'><p>To run your tests, simply use the <code>pytest</code> command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHl0ZXN0"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pytest</pre></div><div class='content'><p>This will discover and run all the tests in your project.</p>
</div><h1>Conclusion</h1>
<div class='content'><p>Integration testing is essential for ensuring that different parts of your Flask application work together correctly. By setting up a proper testing environment and writing comprehensive tests, you can catch bugs early and ensure the reliability of your application. Remember to:</p>
<ul>
<li>Configure your Flask app for testing.</li>
<li>Write tests for different routes and interactions.</li>
<li>Use fixtures to manage setup and teardown of resources like databases.</li>
</ul>
<p>Happy testing!</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing'>&#x25C4;Unit Testing with Flask</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Integration Testing in Flask</a>
	</div>
	<div class='col-4 text-end'>
					<a href='deploying-flask-applications'>Deploying Flask Applications &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
