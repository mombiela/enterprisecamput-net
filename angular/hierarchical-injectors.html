<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hierarchical Injectors</title>

    <link rel="alternate" href="https://campusempresa.com/angular/hierarchical-injectors" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/angular/hierarchical-injectors" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/angular/hierarchical-injectors" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/angular/hierarchical-injectors" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/angular/hierarchical-injectors" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='dependency-injection'>&#x25C4;Dependency Injection</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Hierarchical Injectors</a>
	</div>
	<div class='col-4 text-end'>
					<a href='http-client'>HTTP Client &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In Angular, dependency injection (DI) is a powerful design pattern that allows classes to receive dependencies from an external source rather than creating them. One of the advanced features of Angular's DI system is the concept of hierarchical injectors. This topic will guide you through the basics and advanced concepts of hierarchical injectors in Angular.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Injector</strong>: An injector is a service locator that is responsible for instantiating dependencies and injecting them into classes.</li>
<li><strong>Hierarchical Injectors</strong>: Angular's injectors are hierarchical, meaning that they form a tree structure. This allows for different injectors to provide different instances of a dependency.</li>
</ul>
</div><h1>How Hierarchical Injectors Work</h1>
<div class='content'><p>Angular applications have a root injector and a hierarchy of child injectors. Each component has its own injector, which can inherit dependencies from its parent injector or provide its own dependencies.</p>
</div><h2>Example: Basic Hierarchical Injector</h2>
<div class='content'><p>Consider the following example where we have a root injector and a child injector:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgSW5qZWN0YWJsZSwgQ29tcG9uZW50LCBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwppbXBvcnQgeyBCcm93c2VyTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlcic7CgpASW5qZWN0YWJsZSgpCmNsYXNzIFJvb3RTZXJ2aWNlIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIGNvbnNvbGUubG9nKCdSb290U2VydmljZSBpbnN0YW5jZSBjcmVhdGVkJyk7CiAgfQp9CgpASW5qZWN0YWJsZSgpCmNsYXNzIENoaWxkU2VydmljZSB7CiAgY29uc3RydWN0b3IoKSB7CiAgICBjb25zb2xlLmxvZygnQ2hpbGRTZXJ2aWNlIGluc3RhbmNlIGNyZWF0ZWQnKTsKICB9Cn0KCkBDb21wb25lbnQoewogIHNlbGVjdG9yOiAnY2hpbGQtY29tcG9uZW50JywKICB0ZW1wbGF0ZTogYDxwPkNoaWxkIENvbXBvbmVudDwvcD5gLAogIHByb3ZpZGVyczogW0NoaWxkU2VydmljZV0KfSkKY2xhc3MgQ2hpbGRDb21wb25lbnQgewogIGNvbnN0cnVjdG9yKHByaXZhdGUgY2hpbGRTZXJ2aWNlOiBDaGlsZFNlcnZpY2UpIHt9Cn0KCkBDb21wb25lbnQoewogIHNlbGVjdG9yOiAnYXBwLXJvb3QnLAogIHRlbXBsYXRlOiBgPGNoaWxkLWNvbXBvbmVudD48L2NoaWxkLWNvbXBvbmVudD5gLAogIHByb3ZpZGVyczogW1Jvb3RTZXJ2aWNlXQp9KQpjbGFzcyBBcHBDb21wb25lbnQgewogIGNvbnN0cnVjdG9yKHByaXZhdGUgcm9vdFNlcnZpY2U6IFJvb3RTZXJ2aWNlKSB7fQp9CgpATmdNb2R1bGUoewogIGRlY2xhcmF0aW9uczogW0FwcENvbXBvbmVudCwgQ2hpbGRDb21wb25lbnRdLAogIGltcG9ydHM6IFtCcm93c2VyTW9kdWxlXSwKICBib290c3RyYXA6IFtBcHBDb21wb25lbnRdCn0pCmNsYXNzIEFwcE1vZHVsZSB7fQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Injectable, Component, NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';

@Injectable()
class RootService {
  constructor() {
    console.log('RootService instance created');
  }
}

@Injectable()
class ChildService {
  constructor() {
    console.log('ChildService instance created');
  }
}

@Component({
  selector: 'child-component',
  template: `&lt;p&gt;Child Component&lt;/p&gt;`,
  providers: [ChildService]
})
class ChildComponent {
  constructor(private childService: ChildService) {}
}

@Component({
  selector: 'app-root',
  template: `&lt;child-component&gt;&lt;/child-component&gt;`,
  providers: [RootService]
})
class AppComponent {
  constructor(private rootService: RootService) {}
}

@NgModule({
  declarations: [AppComponent, ChildComponent],
  imports: [BrowserModule],
  bootstrap: [AppComponent]
})
class AppModule {}</pre></div><div class='content'><p>In this example:</p>
<ul>
<li><code>RootService</code> is provided at the root level.</li>
<li><code>ChildService</code> is provided at the <code>ChildComponent</code> level.</li>
</ul>
<p>When the <code>AppComponent</code> and <code>ChildComponent</code> are instantiated, their respective services are created and injected.</p>
</div><h1>Providers and Hierarchical Injectors</h1>
<div class='content'></div><h2>Using `@Injectable` and `@Component` Providers</h2>
<div class='content'><p>Angular allows you to define providers at different levels:</p>
<ul>
<li><strong>Root Level</strong>: Using <code>@Injectable({ providedIn: 'root' })</code>.</li>
<li><strong>Component Level</strong>: Using the <code>providers</code> array in the <code>@Component</code> decorator.</li>
</ul>
</div><h2>Example: Root-Level Provider</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QEluamVjdGFibGUoewogIHByb3ZpZGVkSW46ICdyb290Jwp9KQpjbGFzcyBHbG9iYWxTZXJ2aWNlIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIGNvbnNvbGUubG9nKCdHbG9iYWxTZXJ2aWNlIGluc3RhbmNlIGNyZWF0ZWQnKTsKICB9Cn0KCkBDb21wb25lbnQoewogIHNlbGVjdG9yOiAnYXBwLXJvb3QnLAogIHRlbXBsYXRlOiBgPHA+Um9vdCBDb21wb25lbnQ8L3A+YAp9KQpjbGFzcyBBcHBDb21wb25lbnQgewogIGNvbnN0cnVjdG9yKHByaXZhdGUgZ2xvYmFsU2VydmljZTogR2xvYmFsU2VydmljZSkge30KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@Injectable({
  providedIn: 'root'
})
class GlobalService {
  constructor() {
    console.log('GlobalService instance created');
  }
}

@Component({
  selector: 'app-root',
  template: `&lt;p&gt;Root Component&lt;/p&gt;`
})
class AppComponent {
  constructor(private globalService: GlobalService) {}
}</pre></div><div class='content'><p>In this example, <code>GlobalService</code> is provided at the root level, meaning it will be a singleton and shared across the entire application.</p>
</div><h2>Example: Component-Level Provider</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QENvbXBvbmVudCh7CiAgc2VsZWN0b3I6ICdjaGlsZC1jb21wb25lbnQnLAogIHRlbXBsYXRlOiBgPHA+Q2hpbGQgQ29tcG9uZW50PC9wPmAsCiAgcHJvdmlkZXJzOiBbQ2hpbGRTZXJ2aWNlXQp9KQpjbGFzcyBDaGlsZENvbXBvbmVudCB7CiAgY29uc3RydWN0b3IocHJpdmF0ZSBjaGlsZFNlcnZpY2U6IENoaWxkU2VydmljZSkge30KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@Component({
  selector: 'child-component',
  template: `&lt;p&gt;Child Component&lt;/p&gt;`,
  providers: [ChildService]
})
class ChildComponent {
  constructor(private childService: ChildService) {}
}</pre></div><div class='content'><p>In this example, <code>ChildService</code> is provided at the component level, meaning each instance of <code>ChildComponent</code> will get its own instance of <code>ChildService</code>.</p>
</div><h1>Comparing Root-Level and Component-Level Providers</h1>
<div class='content'><p>| Feature                  | Root-Level Provider                   | Component-Level Provider              |
|--------------------------|---------------------------------------|---------------------------------------|
| Scope                    | Application-wide                      | Limited to the component and its children |
| Instance Creation        | Singleton                             | New instance per component instance   |
| Use Case                 | Shared services like logging, config  | Component-specific services           |</p>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise: Create a Hierarchical Injector</h2>
<div class='content'><ol>
<li>Create a new Angular service called <code>LoggingService</code> and provide it at the root level.</li>
<li>Create another service called <code>FeatureService</code> and provide it at a specific component level.</li>
<li>Inject these services into their respective components and log messages to the console to observe the creation of instances.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gbG9nZ2luZy5zZXJ2aWNlLnRzCmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKCkBJbmplY3RhYmxlKHsKICBwcm92aWRlZEluOiAncm9vdCcKfSkKZXhwb3J0IGNsYXNzIExvZ2dpbmdTZXJ2aWNlIHsKICBjb25zdHJ1Y3RvcigpIHsKICAgIGNvbnNvbGUubG9nKCdMb2dnaW5nU2VydmljZSBpbnN0YW5jZSBjcmVhdGVkJyk7CiAgfQp9CgovLyBmZWF0dXJlLnNlcnZpY2UudHMKaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwoKQEluamVjdGFibGUoKQpleHBvcnQgY2xhc3MgRmVhdHVyZVNlcnZpY2UgewogIGNvbnN0cnVjdG9yKCkgewogICAgY29uc29sZS5sb2coJ0ZlYXR1cmVTZXJ2aWNlIGluc3RhbmNlIGNyZWF0ZWQnKTsKICB9Cn0KCi8vIGZlYXR1cmUuY29tcG9uZW50LnRzCmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwppbXBvcnQgeyBGZWF0dXJlU2VydmljZSB9IGZyb20gJy4vZmVhdHVyZS5zZXJ2aWNlJzsKCkBDb21wb25lbnQoewogIHNlbGVjdG9yOiAnYXBwLWZlYXR1cmUnLAogIHRlbXBsYXRlOiBgPHA+RmVhdHVyZSBDb21wb25lbnQ8L3A+YCwKICBwcm92aWRlcnM6IFtGZWF0dXJlU2VydmljZV0KfSkKZXhwb3J0IGNsYXNzIEZlYXR1cmVDb21wb25lbnQgewogIGNvbnN0cnVjdG9yKHByaXZhdGUgZmVhdHVyZVNlcnZpY2U6IEZlYXR1cmVTZXJ2aWNlKSB7fQp9CgovLyBhcHAuY29tcG9uZW50LnRzCmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwppbXBvcnQgeyBMb2dnaW5nU2VydmljZSB9IGZyb20gJy4vbG9nZ2luZy5zZXJ2aWNlJzsKCkBDb21wb25lbnQoewogIHNlbGVjdG9yOiAnYXBwLXJvb3QnLAogIHRlbXBsYXRlOiBgPGFwcC1mZWF0dXJlPjwvYXBwLWZlYXR1cmU+YAp9KQpleHBvcnQgY2xhc3MgQXBwQ29tcG9uZW50IHsKICBjb25zdHJ1Y3Rvcihwcml2YXRlIGxvZ2dpbmdTZXJ2aWNlOiBMb2dnaW5nU2VydmljZSkge30KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// logging.service.ts
import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class LoggingService {
  constructor() {
    console.log('LoggingService instance created');
  }
}

// feature.service.ts
import { Injectable } from '@angular/core';

@Injectable()
export class FeatureService {
  constructor() {
    console.log('FeatureService instance created');
  }
}

// feature.component.ts
import { Component } from '@angular/core';
import { FeatureService } from './feature.service';

@Component({
  selector: 'app-feature',
  template: `&lt;p&gt;Feature Component&lt;/p&gt;`,
  providers: [FeatureService]
})
export class FeatureComponent {
  constructor(private featureService: FeatureService) {}
}

// app.component.ts
import { Component } from '@angular/core';
import { LoggingService } from './logging.service';

@Component({
  selector: 'app-root',
  template: `&lt;app-feature&gt;&lt;/app-feature&gt;`
})
export class AppComponent {
  constructor(private loggingService: LoggingService) {}
}</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Hierarchical injectors in Angular provide a flexible and powerful way to manage dependencies in your application. By understanding how to use root-level and component-level providers, you can control the scope and lifecycle of your services effectively. This allows for better organization and modularization of your code, making it easier to maintain and extend.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='dependency-injection'>&#x25C4;Dependency Injection</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Hierarchical Injectors</a>
	</div>
	<div class='col-4 text-end'>
					<a href='http-client'>HTTP Client &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
