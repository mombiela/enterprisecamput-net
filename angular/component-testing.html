<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Component Testing in Angular</title>

    <link rel="alternate" href="https://campusempresa.com/angular/component-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/angular/component-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/angular/component-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/angular/component-testing" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/angular/component-testing" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing'>&#x25C4;Unit Testing</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Component Testing in Angular</a>
	</div>
	<div class='col-4 text-end'>
					<a href='service-testing'>Service Testing &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Component testing is a crucial part of developing robust Angular applications. This section will guide you through the basics to advanced concepts of testing Angular components.</p>
</div><h1>Introduction to Component Testing</h1>
<div class='content'><p>Component testing involves testing individual components of an Angular application to ensure they work as expected. This includes testing the component's template, class, and interactions with other components and services.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Unit Testing</strong>: Testing individual units or components in isolation.</li>
<li><strong>TestBed</strong>: Angular's primary API for configuring and initializing the environment for unit testing.</li>
<li><strong>Fixtures</strong>: Used to create an instance of a component and access its properties and methods.</li>
<li><strong>Spies</strong>: Functions that record arguments, return values, and other information for testing purposes.</li>
</ul>
</div><h1>Setting Up the Testing Environment</h1>
<div class='content'><p>Before diving into component testing, ensure your Angular project is set up for testing.</p>
</div><h2>Steps to Set Up</h2>
<div class='content'><ol>
<li><strong>Install Angular CLI</strong>: Ensure you have Angular CLI installed.
<pre><code class="language-bash">npm install -g @angular/cli
</code></pre>
</li>
<li><strong>Create a New Angular Project</strong>: If you don't have a project, create one.
<pre><code class="language-bash">ng new my-angular-app
</code></pre>
</li>
<li><strong>Navigate to the Project Directory</strong>:
<pre><code class="language-bash">cd my-angular-app
</code></pre>
</li>
<li><strong>Run Tests</strong>: Use Angular CLI to run tests.
<pre><code class="language-bash">ng test
</code></pre>
</li>
</ol>
</div><h1>Writing Your First Component Test</h1>
<div class='content'><p>Let's write a simple test for a component. We'll use Jasmine and Karma, which are set up by default in Angular projects.</p>
</div><h2>Example Component</h2>
<div class='content'><p>Consider a simple <code>CounterComponent</code> that increments a counter.</p>
<h4>counter.component.ts</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CgpAQ29tcG9uZW50KHsKICBzZWxlY3RvcjogJ2FwcC1jb3VudGVyJywKICB0ZW1wbGF0ZTogYAogICAgPGRpdj4KICAgICAgPHA+Q291bnRlcjoge3sgY291bnRlciB9fTwvcD4KICAgICAgPGJ1dHRvbiAoY2xpY2spPSJpbmNyZW1lbnQoKSI+SW5jcmVtZW50PC9idXR0b24+CiAgICA8L2Rpdj4KICBgCn0pCmV4cG9ydCBjbGFzcyBDb3VudGVyQ29tcG9uZW50IHsKICBjb3VudGVyID0gMDsKCiAgaW5jcmVtZW50KCkgewogICAgdGhpcy5jb3VudGVyKys7CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Component } from '@angular/core';

@Component({
  selector: 'app-counter',
  template: `
    &lt;div&gt;
      &lt;p&gt;Counter: {{ counter }}&lt;/p&gt;
      &lt;button (click)=&quot;increment()&quot;&gt;Increment&lt;/button&gt;
    &lt;/div&gt;
  `
})
export class CounterComponent {
  counter = 0;

  increment() {
    this.counter++;
  }
}</pre></div><div class='content'></div><h2>Writing the Test</h2>
<div class='content'><h4>counter.component.spec.ts</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50Rml4dHVyZSwgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CmltcG9ydCB7IENvdW50ZXJDb21wb25lbnQgfSBmcm9tICcuL2NvdW50ZXIuY29tcG9uZW50JzsKCmRlc2NyaWJlKCdDb3VudGVyQ29tcG9uZW50JywgKCkgPT4gewogIGxldCBjb21wb25lbnQ6IENvdW50ZXJDb21wb25lbnQ7CiAgbGV0IGZpeHR1cmU6IENvbXBvbmVudEZpeHR1cmU8Q291bnRlckNvbXBvbmVudD47CgogIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4gewogICAgYXdhaXQgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHsKICAgICAgZGVjbGFyYXRpb25zOiBbIENvdW50ZXJDb21wb25lbnQgXQogICAgfSkKICAgIC5jb21waWxlQ29tcG9uZW50cygpOwogIH0pOwoKICBiZWZvcmVFYWNoKCgpID0+IHsKICAgIGZpeHR1cmUgPSBUZXN0QmVkLmNyZWF0ZUNvbXBvbmVudChDb3VudGVyQ29tcG9uZW50KTsKICAgIGNvbXBvbmVudCA9IGZpeHR1cmUuY29tcG9uZW50SW5zdGFuY2U7CiAgICBmaXh0dXJlLmRldGVjdENoYW5nZXMoKTsKICB9KTsKCiAgaXQoJ3Nob3VsZCBjcmVhdGUnLCAoKSA9PiB7CiAgICBleHBlY3QoY29tcG9uZW50KS50b0JlVHJ1dGh5KCk7CiAgfSk7CgogIGl0KCdzaG91bGQgaGF2ZSBpbml0aWFsIGNvdW50ZXIgdmFsdWUgYXMgMCcsICgpID0+IHsKICAgIGV4cGVjdChjb21wb25lbnQuY291bnRlcikudG9CZSgwKTsKICB9KTsKCiAgaXQoJ3Nob3VsZCBpbmNyZW1lbnQgY291bnRlciB2YWx1ZSBieSAxIHdoZW4gaW5jcmVtZW50IG1ldGhvZCBpcyBjYWxsZWQnLCAoKSA9PiB7CiAgICBjb21wb25lbnQuaW5jcmVtZW50KCk7CiAgICBleHBlY3QoY29tcG9uZW50LmNvdW50ZXIpLnRvQmUoMSk7CiAgfSk7CgogIGl0KCdzaG91bGQgaW5jcmVtZW50IGNvdW50ZXIgdmFsdWUgd2hlbiBidXR0b24gaXMgY2xpY2tlZCcsICgpID0+IHsKICAgIGNvbnN0IGJ1dHRvbiA9IGZpeHR1cmUubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKTsKICAgIGJ1dHRvbi5jbGljaygpOwogICAgZml4dHVyZS5kZXRlY3RDaGFuZ2VzKCk7CiAgICBleHBlY3QoY29tcG9uZW50LmNvdW50ZXIpLnRvQmUoMSk7CiAgfSk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { ComponentFixture, TestBed } from '@angular/core/testing';
import { CounterComponent } from './counter.component';

describe('CounterComponent', () =&gt; {
  let component: CounterComponent;
  let fixture: ComponentFixture&lt;CounterComponent&gt;;

  beforeEach(async () =&gt; {
    await TestBed.configureTestingModule({
      declarations: [ CounterComponent ]
    })
    .compileComponents();
  });

  beforeEach(() =&gt; {
    fixture = TestBed.createComponent(CounterComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () =&gt; {
    expect(component).toBeTruthy();
  });

  it('should have initial counter value as 0', () =&gt; {
    expect(component.counter).toBe(0);
  });

  it('should increment counter value by 1 when increment method is called', () =&gt; {
    component.increment();
    expect(component.counter).toBe(1);
  });

  it('should increment counter value when button is clicked', () =&gt; {
    const button = fixture.nativeElement.querySelector('button');
    button.click();
    fixture.detectChanges();
    expect(component.counter).toBe(1);
  });
});</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>TestBed</strong>: Configures the testing module.</li>
<li><strong>ComponentFixture</strong>: Provides access to the component instance and its template.</li>
<li><strong>beforeEach</strong>: Sets up the testing environment before each test.</li>
<li><strong>it</strong>: Defines individual test cases.</li>
</ul>
</div><h1>Advanced Component Testing</h1>
<div class='content'></div><h2>Testing with Dependencies</h2>
<div class='content'><p>Components often depend on services. Let's test a component that uses a service.</p>
<h4>data.service.ts</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwoKQEluamVjdGFibGUoewogIHByb3ZpZGVkSW46ICdyb290Jwp9KQpleHBvcnQgY2xhc3MgRGF0YVNlcnZpY2UgewogIGdldERhdGEoKSB7CiAgICByZXR1cm4gJ0hlbGxvIFdvcmxkJzsKICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class DataService {
  getData() {
    return 'Hello World';
  }
}</pre></div><div class='content'><h4>data.component.ts</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CmltcG9ydCB7IERhdGFTZXJ2aWNlIH0gZnJvbSAnLi9kYXRhLnNlcnZpY2UnOwoKQENvbXBvbmVudCh7CiAgc2VsZWN0b3I6ICdhcHAtZGF0YScsCiAgdGVtcGxhdGU6IGA8cD57eyBkYXRhIH19PC9wPmAKfSkKZXhwb3J0IGNsYXNzIERhdGFDb21wb25lbnQgewogIGRhdGE6IHN0cmluZzsKCiAgY29uc3RydWN0b3IocHJpdmF0ZSBkYXRhU2VydmljZTogRGF0YVNlcnZpY2UpIHsKICAgIHRoaXMuZGF0YSA9IHRoaXMuZGF0YVNlcnZpY2UuZ2V0RGF0YSgpOwogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Component } from '@angular/core';
import { DataService } from './data.service';

@Component({
  selector: 'app-data',
  template: `&lt;p&gt;{{ data }}&lt;/p&gt;`
})
export class DataComponent {
  data: string;

  constructor(private dataService: DataService) {
    this.data = this.dataService.getData();
  }
}</pre></div><div class='content'></div><h2>Writing the Test with Mock Service</h2>
<div class='content'><h4>data.component.spec.ts</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50Rml4dHVyZSwgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CmltcG9ydCB7IERhdGFDb21wb25lbnQgfSBmcm9tICcuL2RhdGEuY29tcG9uZW50JzsKaW1wb3J0IHsgRGF0YVNlcnZpY2UgfSBmcm9tICcuL2RhdGEuc2VydmljZSc7CgpjbGFzcyBNb2NrRGF0YVNlcnZpY2UgewogIGdldERhdGEoKSB7CiAgICByZXR1cm4gJ01vY2sgRGF0YSc7CiAgfQp9CgpkZXNjcmliZSgnRGF0YUNvbXBvbmVudCcsICgpID0+IHsKICBsZXQgY29tcG9uZW50OiBEYXRhQ29tcG9uZW50OwogIGxldCBmaXh0dXJlOiBDb21wb25lbnRGaXh0dXJlPERhdGFDb21wb25lbnQ+OwoKICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHsKICAgIGF3YWl0IFRlc3RCZWQuY29uZmlndXJlVGVzdGluZ01vZHVsZSh7CiAgICAgIGRlY2xhcmF0aW9uczogWyBEYXRhQ29tcG9uZW50IF0sCiAgICAgIHByb3ZpZGVyczogWwogICAgICAgIHsgcHJvdmlkZTogRGF0YVNlcnZpY2UsIHVzZUNsYXNzOiBNb2NrRGF0YVNlcnZpY2UgfQogICAgICBdCiAgICB9KQogICAgLmNvbXBpbGVDb21wb25lbnRzKCk7CiAgfSk7CgogIGJlZm9yZUVhY2goKCkgPT4gewogICAgZml4dHVyZSA9IFRlc3RCZWQuY3JlYXRlQ29tcG9uZW50KERhdGFDb21wb25lbnQpOwogICAgY29tcG9uZW50ID0gZml4dHVyZS5jb21wb25lbnRJbnN0YW5jZTsKICAgIGZpeHR1cmUuZGV0ZWN0Q2hhbmdlcygpOwogIH0pOwoKICBpdCgnc2hvdWxkIGNyZWF0ZScsICgpID0+IHsKICAgIGV4cGVjdChjb21wb25lbnQpLnRvQmVUcnV0aHkoKTsKICB9KTsKCiAgaXQoJ3Nob3VsZCBkaXNwbGF5IGRhdGEgZnJvbSB0aGUgc2VydmljZScsICgpID0+IHsKICAgIGNvbnN0IGNvbXBpbGVkID0gZml4dHVyZS5uYXRpdmVFbGVtZW50OwogICAgZXhwZWN0KGNvbXBpbGVkLnF1ZXJ5U2VsZWN0b3IoJ3AnKS50ZXh0Q29udGVudCkudG9Db250YWluKCdNb2NrIERhdGEnKTsKICB9KTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { ComponentFixture, TestBed } from '@angular/core/testing';
import { DataComponent } from './data.component';
import { DataService } from './data.service';

class MockDataService {
  getData() {
    return 'Mock Data';
  }
}

describe('DataComponent', () =&gt; {
  let component: DataComponent;
  let fixture: ComponentFixture&lt;DataComponent&gt;;

  beforeEach(async () =&gt; {
    await TestBed.configureTestingModule({
      declarations: [ DataComponent ],
      providers: [
        { provide: DataService, useClass: MockDataService }
      ]
    })
    .compileComponents();
  });

  beforeEach(() =&gt; {
    fixture = TestBed.createComponent(DataComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () =&gt; {
    expect(component).toBeTruthy();
  });

  it('should display data from the service', () =&gt; {
    const compiled = fixture.nativeElement;
    expect(compiled.querySelector('p').textContent).toContain('Mock Data');
  });
});</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Mock Service</strong>: A mock class is used to provide a fake implementation of the service.</li>
<li><strong>providers</strong>: Configures the testing module to use the mock service instead of the real one.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Component testing in Angular ensures that individual components work correctly in isolation. By setting up the testing environment, writing basic tests, and handling dependencies with mock services, you can create robust and reliable Angular applications. Remember to:</p>
<ul>
<li>Use <strong>TestBed</strong> for configuring the testing environment.</li>
<li>Utilize <strong>ComponentFixture</strong> to interact with the component.</li>
<li>Mock dependencies to isolate the component under test.</li>
</ul>
<p>With these practices, you can confidently test and maintain your Angular components.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing'>&#x25C4;Unit Testing</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Component Testing in Angular</a>
	</div>
	<div class='col-4 text-end'>
					<a href='service-testing'>Service Testing &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
