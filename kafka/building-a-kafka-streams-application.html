<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building a Kafka Streams Application</title>

    <link rel="alternate" href="https://campusempresa.com/kafka/building-a-kafka-streams-application" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/kafka/building-a-kafka-streams-application" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/kafka/building-a-kafka-streams-application" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/kafka/building-a-kafka-streams-application" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/kafka/building-a-kafka-streams-application" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='stream-processing-concepts'>&#x25C4;Stream Processing Concepts</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Building a Kafka Streams Application</a>
	</div>
	<div class='col-4 text-end'>
					<a href='stateful-vs-stateless-processing'>Stateful vs Stateless Processing &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Kafka Streams</h1>
<div class='content'><p>Kafka Streams is a client library for building applications and microservices, where the input and output data are stored in Kafka clusters. It combines the simplicity of writing and deploying standard Java and Scala applications on the client side with the benefits of Kafka's server-side cluster technology.</p>
<ul>
<li><strong>Key Concepts:</strong>
<ul>
<li><strong>Stream:</strong> An unbounded, continuously updating dataset.</li>
<li><strong>Table:</strong> A view of a stream as a changelog, representing the latest state.</li>
<li><strong>Topology:</strong> The logical representation of the stream processing steps.</li>
<li><strong>Processor:</strong> A node in the topology that processes records.</li>
</ul>
</li>
</ul>
</div><h1>Setting Up Your Environment</h1>
<div class='content'><p>Before building a Kafka Streams application, you need to set up your development environment.</p>
<ul>
<li><strong>Prerequisites:</strong>
<ul>
<li>Java Development Kit (JDK) 8 or higher.</li>
<li>Apache Kafka installed and running.</li>
<li>Maven or Gradle for dependency management.</li>
</ul>
</li>
</ul>
</div><h2>Example: Maven Setup</h2>
<div class='content'><p>Create a <code>pom.xml</code> file with the necessary dependencies.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PHByb2plY3QgeG1sbnM9Imh0dHA6Ly9tYXZlbi5hcGFjaGUub3JnL1BPTS80LjAuMCIgeG1sbnM6eHNpPSJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZSIKICAgIHhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL21hdmVuLmFwYWNoZS5vcmcvUE9NLzQuMC4wIGh0dHA6Ly9tYXZlbi5hcGFjaGUub3JnL3hzZC9tYXZlbi00LjAuMC54c2QiPgogICAgPG1vZGVsVmVyc2lvbj40LjAuMDwvbW9kZWxWZXJzaW9uPgogICAgPGdyb3VwSWQ+Y29tLmV4YW1wbGU8L2dyb3VwSWQ+CiAgICA8YXJ0aWZhY3RJZD5rYWZrYS1zdHJlYW1zLWV4YW1wbGU8L2FydGlmYWN0SWQ+CiAgICA8dmVyc2lvbj4xLjAtU05BUFNIT1Q8L3ZlcnNpb24+CiAgICA8ZGVwZW5kZW5jaWVzPgogICAgICAgIDxkZXBlbmRlbmN5PgogICAgICAgICAgICA8Z3JvdXBJZD5vcmcuYXBhY2hlLmthZmthPC9ncm91cElkPgogICAgICAgICAgICA8YXJ0aWZhY3RJZD5rYWZrYS1zdHJlYW1zPC9hcnRpZmFjdElkPgogICAgICAgICAgICA8dmVyc2lvbj4zLjAuMDwvdmVyc2lvbj4KICAgICAgICA8L2RlcGVuZGVuY3k+CiAgICAgICAgPGRlcGVuZGVuY3k+CiAgICAgICAgICAgIDxncm91cElkPm9yZy5zbGY0ajwvZ3JvdXBJZD4KICAgICAgICAgICAgPGFydGlmYWN0SWQ+c2xmNGotYXBpPC9hcnRpZmFjdElkPgogICAgICAgICAgICA8dmVyc2lvbj4xLjcuMzA8L3ZlcnNpb24+CiAgICAgICAgPC9kZXBlbmRlbmN5PgogICAgICAgIDxkZXBlbmRlbmN5PgogICAgICAgICAgICA8Z3JvdXBJZD5vcmcuc2xmNGo8L2dyb3VwSWQ+CiAgICAgICAgICAgIDxhcnRpZmFjdElkPnNsZjRqLWxvZzRqMTI8L2FydGlmYWN0SWQ+CiAgICAgICAgICAgIDx2ZXJzaW9uPjEuNy4zMDwvdmVyc2lvbj4KICAgICAgICA8L2RlcGVuZGVuY3k+CiAgICA8L2RlcGVuZGVuY2llcz4KPC9wcm9qZWN0Pg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;kafka-streams-example&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;
            &lt;artifactId&gt;kafka-streams&lt;/artifactId&gt;
            &lt;version&gt;3.0.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
            &lt;version&gt;1.7.30&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
            &lt;version&gt;1.7.30&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;</pre></div><div class='content'></div><h1>Building Your First Kafka Streams Application</h1>
<div class='content'><p>Let's build a simple Kafka Streams application that reads from an input topic, processes the data, and writes to an output topic.</p>
</div><h2>Step 1: Define the Topology</h2>
<div class='content'><p>Create a Java class to define the stream processing topology.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5hcGFjaGUua2Fma2Euc3RyZWFtcy5TdHJlYW1zQnVpbGRlcjsKaW1wb3J0IG9yZy5hcGFjaGUua2Fma2Euc3RyZWFtcy5LYWZrYVN0cmVhbXM7CmltcG9ydCBvcmcuYXBhY2hlLmthZmthLnN0cmVhbXMuU3RyZWFtc0NvbmZpZzsKaW1wb3J0IG9yZy5hcGFjaGUua2Fma2Euc3RyZWFtcy5rc3RyZWFtLktTdHJlYW07CgppbXBvcnQgamF2YS51dGlsLlByb3BlcnRpZXM7CgpwdWJsaWMgY2xhc3MgU2ltcGxlS2Fma2FTdHJlYW1zQXBwIHsKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsKICAgICAgICBQcm9wZXJ0aWVzIHByb3BzID0gbmV3IFByb3BlcnRpZXMoKTsKICAgICAgICBwcm9wcy5wdXQoU3RyZWFtc0NvbmZpZy5BUFBMSUNBVElPTl9JRF9DT05GSUcsICJzdHJlYW1zLWV4YW1wbGUiKTsKICAgICAgICBwcm9wcy5wdXQoU3RyZWFtc0NvbmZpZy5CT09UU1RSQVBfU0VSVkVSU19DT05GSUcsICJsb2NhbGhvc3Q6OTA5MiIpOwogICAgICAgIHByb3BzLnB1dChTdHJlYW1zQ29uZmlnLkRFRkFVTFRfS0VZX1NFUkRFX0NMQVNTX0NPTkZJRywgIm9yZy5hcGFjaGUua2Fma2EuY29tbW9uLnNlcmlhbGl6YXRpb24uU2VyZGVzJFN0cmluZ1NlcmRlIik7CiAgICAgICAgcHJvcHMucHV0KFN0cmVhbXNDb25maWcuREVGQVVMVF9WQUxVRV9TRVJERV9DTEFTU19DT05GSUcsICJvcmcuYXBhY2hlLmthZmthLmNvbW1vbi5zZXJpYWxpemF0aW9uLlNlcmRlcyRTdHJpbmdTZXJkZSIpOwoKICAgICAgICBTdHJlYW1zQnVpbGRlciBidWlsZGVyID0gbmV3IFN0cmVhbXNCdWlsZGVyKCk7CiAgICAgICAgS1N0cmVhbTxTdHJpbmcsIFN0cmluZz4gc291cmNlID0gYnVpbGRlci5zdHJlYW0oImlucHV0LXRvcGljIik7CiAgICAgICAgc291cmNlLnRvKCJvdXRwdXQtdG9waWMiKTsKCiAgICAgICAgS2Fma2FTdHJlYW1zIHN0cmVhbXMgPSBuZXcgS2Fma2FTdHJlYW1zKGJ1aWxkZXIuYnVpbGQoKSwgcHJvcHMpOwogICAgICAgIHN0cmVhbXMuc3RhcnQoKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.apache.kafka.streams.StreamsBuilder;
import org.apache.kafka.streams.KafkaStreams;
import org.apache.kafka.streams.StreamsConfig;
import org.apache.kafka.streams.kstream.KStream;

import java.util.Properties;

public class SimpleKafkaStreamsApp {
    public static void main(String[] args) {
        Properties props = new Properties();
        props.put(StreamsConfig.APPLICATION_ID_CONFIG, &quot;streams-example&quot;);
        props.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);
        props.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, &quot;org.apache.kafka.common.serialization.Serdes$StringSerde&quot;);
        props.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, &quot;org.apache.kafka.common.serialization.Serdes$StringSerde&quot;);

        StreamsBuilder builder = new StreamsBuilder();
        KStream&lt;String, String&gt; source = builder.stream(&quot;input-topic&quot;);
        source.to(&quot;output-topic&quot;);

        KafkaStreams streams = new KafkaStreams(builder.build(), props);
        streams.start();
    }
}</pre></div><div class='content'></div><h2>Step 2: Running the Application</h2>
<div class='content'><ul>
<li>Ensure Kafka is running.</li>
<li>Create the input and output topics using Kafka CLI tools.</li>
<li>Run the Java application.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCBrYWZrYS10b3BpY3Muc2ggLS1jcmVhdGUgLS10b3BpYyBpbnB1dC10b3BpYyAtLWJvb3RzdHJhcC1zZXJ2ZXIgbG9jYWxob3N0OjkwOTIgLS1wYXJ0aXRpb25zIDEgLS1yZXBsaWNhdGlvbi1mYWN0b3IgMQokIGthZmthLXRvcGljcy5zaCAtLWNyZWF0ZSAtLXRvcGljIG91dHB1dC10b3BpYyAtLWJvb3RzdHJhcC1zZXJ2ZXIgbG9jYWxob3N0OjkwOTIgLS1wYXJ0aXRpb25zIDEgLS1yZXBsaWNhdGlvbi1mYWN0b3IgMQokIGphdmEgLWNwIHRhcmdldC9rYWZrYS1zdHJlYW1zLWV4YW1wbGUtMS4wLVNOQVBTSE9ULmphciBjb20uZXhhbXBsZS5TaW1wbGVLYWZrYVN0cmVhbXNBcHA="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ kafka-topics.sh --create --topic input-topic --bootstrap-server localhost:9092 --partitions 1 --replication-factor 1
$ kafka-topics.sh --create --topic output-topic --bootstrap-server localhost:9092 --partitions 1 --replication-factor 1
$ java -cp target/kafka-streams-example-1.0-SNAPSHOT.jar com.example.SimpleKafkaStreamsApp</pre></div><div class='content'></div><h1>Advanced Kafka Streams Concepts</h1>
<div class='content'><p>Once you are comfortable with the basics, you can explore more advanced features.</p>
<ul>
<li><strong>Stateful Operations:</strong>
<ul>
<li>Aggregations</li>
<li>Joins</li>
<li>Windowing</li>
</ul>
</li>
</ul>
</div><h2>Example: Word Count Application</h2>
<div class='content'><p>A common example is a word count application that counts the occurrences of words in the input stream.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5hcGFjaGUua2Fma2Euc3RyZWFtcy5TdHJlYW1zQnVpbGRlcjsKaW1wb3J0IG9yZy5hcGFjaGUua2Fma2Euc3RyZWFtcy5LYWZrYVN0cmVhbXM7CmltcG9ydCBvcmcuYXBhY2hlLmthZmthLnN0cmVhbXMuU3RyZWFtc0NvbmZpZzsKaW1wb3J0IG9yZy5hcGFjaGUua2Fma2Euc3RyZWFtcy5rc3RyZWFtLktTdHJlYW07CmltcG9ydCBvcmcuYXBhY2hlLmthZmthLnN0cmVhbXMua3N0cmVhbS5LVGFibGU7CmltcG9ydCBvcmcuYXBhY2hlLmthZmthLnN0cmVhbXMua3N0cmVhbS5NYXRlcmlhbGl6ZWQ7CmltcG9ydCBvcmcuYXBhY2hlLmthZmthLnN0cmVhbXMua3N0cmVhbS5Qcm9kdWNlZDsKaW1wb3J0IG9yZy5hcGFjaGUua2Fma2EuY29tbW9uLnNlcmlhbGl6YXRpb24uU2VyZGVzOwoKaW1wb3J0IGphdmEudXRpbC5BcnJheXM7CmltcG9ydCBqYXZhLnV0aWwuUHJvcGVydGllczsKCnB1YmxpYyBjbGFzcyBXb3JkQ291bnRBcHAgewogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgICAgIFByb3BlcnRpZXMgcHJvcHMgPSBuZXcgUHJvcGVydGllcygpOwogICAgICAgIHByb3BzLnB1dChTdHJlYW1zQ29uZmlnLkFQUExJQ0FUSU9OX0lEX0NPTkZJRywgIndvcmRjb3VudC1leGFtcGxlIik7CiAgICAgICAgcHJvcHMucHV0KFN0cmVhbXNDb25maWcuQk9PVFNUUkFQX1NFUlZFUlNfQ09ORklHLCAibG9jYWxob3N0OjkwOTIiKTsKICAgICAgICBwcm9wcy5wdXQoU3RyZWFtc0NvbmZpZy5ERUZBVUxUX0tFWV9TRVJERV9DTEFTU19DT05GSUcsIFNlcmRlcy5TdHJpbmcoKS5nZXRDbGFzcygpLmdldE5hbWUoKSk7CiAgICAgICAgcHJvcHMucHV0KFN0cmVhbXNDb25maWcuREVGQVVMVF9WQUxVRV9TRVJERV9DTEFTU19DT05GSUcsIFNlcmRlcy5TdHJpbmcoKS5nZXRDbGFzcygpLmdldE5hbWUoKSk7CgogICAgICAgIFN0cmVhbXNCdWlsZGVyIGJ1aWxkZXIgPSBuZXcgU3RyZWFtc0J1aWxkZXIoKTsKICAgICAgICBLU3RyZWFtPFN0cmluZywgU3RyaW5nPiB0ZXh0TGluZXMgPSBidWlsZGVyLnN0cmVhbSgiaW5wdXQtdG9waWMiKTsKICAgICAgICBLVGFibGU8U3RyaW5nLCBMb25nPiB3b3JkQ291bnRzID0gdGV4dExpbmVzCiAgICAgICAgICAgIC5mbGF0TWFwVmFsdWVzKHZhbHVlIC0+IEFycmF5cy5hc0xpc3QodmFsdWUudG9Mb3dlckNhc2UoKS5zcGxpdCgiXFxXKyIpKSkKICAgICAgICAgICAgLmdyb3VwQnkoKGtleSwgdmFsdWUpIC0+IHZhbHVlKQogICAgICAgICAgICAuY291bnQoTWF0ZXJpYWxpemVkLmFzKCJjb3VudHMtc3RvcmUiKSk7CgogICAgICAgIHdvcmRDb3VudHMudG9TdHJlYW0oKS50bygib3V0cHV0LXRvcGljIiwgUHJvZHVjZWQud2l0aChTZXJkZXMuU3RyaW5nKCksIFNlcmRlcy5Mb25nKCkpKTsKCiAgICAgICAgS2Fma2FTdHJlYW1zIHN0cmVhbXMgPSBuZXcgS2Fma2FTdHJlYW1zKGJ1aWxkZXIuYnVpbGQoKSwgcHJvcHMpOwogICAgICAgIHN0cmVhbXMuc3RhcnQoKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.apache.kafka.streams.StreamsBuilder;
import org.apache.kafka.streams.KafkaStreams;
import org.apache.kafka.streams.StreamsConfig;
import org.apache.kafka.streams.kstream.KStream;
import org.apache.kafka.streams.kstream.KTable;
import org.apache.kafka.streams.kstream.Materialized;
import org.apache.kafka.streams.kstream.Produced;
import org.apache.kafka.common.serialization.Serdes;

import java.util.Arrays;
import java.util.Properties;

public class WordCountApp {
    public static void main(String[] args) {
        Properties props = new Properties();
        props.put(StreamsConfig.APPLICATION_ID_CONFIG, &quot;wordcount-example&quot;);
        props.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);
        props.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());
        props.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());

        StreamsBuilder builder = new StreamsBuilder();
        KStream&lt;String, String&gt; textLines = builder.stream(&quot;input-topic&quot;);
        KTable&lt;String, Long&gt; wordCounts = textLines
            .flatMapValues(value -&gt; Arrays.asList(value.toLowerCase().split(&quot;\\W+&quot;)))
            .groupBy((key, value) -&gt; value)
            .count(Materialized.as(&quot;counts-store&quot;));

        wordCounts.toStream().to(&quot;output-topic&quot;, Produced.with(Serdes.String(), Serdes.Long()));

        KafkaStreams streams = new KafkaStreams(builder.build(), props);
        streams.start();
    }
}</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Building a Kafka Streams application involves setting up your environment, defining the topology, and running the application. As you advance, you can leverage stateful operations to build more complex stream processing applications. Kafka Streams provides a powerful and flexible framework for real-time data processing, making it a valuable tool for any developer working with streaming data.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='stream-processing-concepts'>&#x25C4;Stream Processing Concepts</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Building a Kafka Streams Application</a>
	</div>
	<div class='col-4 text-end'>
					<a href='stateful-vs-stateless-processing'>Stateful vs Stateless Processing &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
