<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kafka Performance Tuning</title>

    <link rel="alternate" href="https://campusempresa.com/kafka/kafka-performance-tuning" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/kafka/kafka-performance-tuning" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/kafka/kafka-performance-tuning" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/kafka/kafka-performance-tuning" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/kafka/kafka-performance-tuning" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='kafka-monitoring-and-management'>&#x25C4;Kafka Monitoring and Management</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Kafka Performance Tuning</a>
	</div>
	<div class='col-4 text-end'>
					<a href='kafka-in-a-multi-data-center-setup'>Kafka in a Multi-Data Center Setup &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Kafka performance tuning is essential for ensuring that your Kafka cluster operates efficiently and can handle the required throughput and latency. This topic will cover various aspects of performance tuning, including broker configurations, producer and consumer optimizations, and monitoring tools.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Throughput</strong>: The amount of data processed by Kafka in a given time period.</li>
<li><strong>Latency</strong>: The time taken for a message to travel from producer to consumer.</li>
<li><strong>Broker</strong>: A Kafka server that stores and serves messages.</li>
<li><strong>Producer</strong>: An application that sends messages to Kafka.</li>
<li><strong>Consumer</strong>: An application that reads messages from Kafka.</li>
</ul>
</div><h1>Broker Configurations</h1>
<div class='content'><p>Optimizing broker configurations is crucial for enhancing Kafka performance. Here are some key configurations to consider:</p>
<ul>
<li><strong>num.network.threads</strong>: Number of threads handling network requests.</li>
<li><strong>num.io.threads</strong>: Number of threads handling disk I/O.</li>
<li><strong>socket.send.buffer.bytes</strong>: Size of the TCP send buffer.</li>
<li><strong>socket.receive.buffer.bytes</strong>: Size of the TCP receive buffer.</li>
<li><strong>log.segment.bytes</strong>: Size of a single log segment file.</li>
<li><strong>log.retention.hours</strong>: Time to retain a log segment before deletion.</li>
</ul>
</div><h2>Example Configuration</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnVtLm5ldHdvcmsudGhyZWFkcz0zCm51bS5pby50aHJlYWRzPTgKc29ja2V0LnNlbmQuYnVmZmVyLmJ5dGVzPTEwMjQwMApzb2NrZXQucmVjZWl2ZS5idWZmZXIuYnl0ZXM9MTAyNDAwCmxvZy5zZWdtZW50LmJ5dGVzPTEwNzM3NDE4MjQKbG9nLnJldGVudGlvbi5ob3Vycz0xNjg="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>num.network.threads=3
num.io.threads=8
socket.send.buffer.bytes=102400
socket.receive.buffer.bytes=102400
log.segment.bytes=1073741824
log.retention.hours=168</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>num.network.threads=3</code>: Allocates three threads for handling network requests.</li>
<li><code>num.io.threads=8</code>: Allocates eight threads for handling disk I/O operations.</li>
<li><code>socket.send.buffer.bytes=102400</code>: Sets the TCP send buffer size to 100 KB.</li>
<li><code>socket.receive.buffer.bytes=102400</code>: Sets the TCP receive buffer size to 100 KB.</li>
<li><code>log.segment.bytes=1073741824</code>: Sets the log segment size to 1 GB.</li>
<li><code>log.retention.hours=168</code>: Retains log segments for 7 days (168 hours).</li>
</ul>
</div><h1>Producer Optimizations</h1>
<div class='content'><p>Producers play a significant role in Kafka performance. Here are some configurations to optimize producer performance:</p>
<ul>
<li><strong>batch.size</strong>: Size of the batch for sending messages.</li>
<li><strong>linger.ms</strong>: Time to wait before sending a batch.</li>
<li><strong>compression.type</strong>: Type of compression to use (none, gzip, snappy, lz4, zstd).</li>
<li><strong>acks</strong>: Number of acknowledgments the producer requires (0, 1, all).</li>
</ul>
</div><h2>Example Configuration</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YmF0Y2guc2l6ZT0xNjM4NApsaW5nZXIubXM9NQpjb21wcmVzc2lvbi50eXBlPXNuYXBweQphY2tzPTE="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>batch.size=16384
linger.ms=5
compression.type=snappy
acks=1</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>batch.size=16384</code>: Sets the batch size to 16 KB.</li>
<li><code>linger.ms=5</code>: Waits for 5 milliseconds before sending a batch.</li>
<li><code>compression.type=snappy</code>: Uses Snappy compression for messages.</li>
<li><code>acks=1</code>: Requires acknowledgment from the leader only.</li>
</ul>
</div><h1>Consumer Optimizations</h1>
<div class='content'><p>Consumers also need to be optimized for better performance. Key configurations include:</p>
<ul>
<li><strong>fetch.min.bytes</strong>: Minimum amount of data the server should return for a fetch request.</li>
<li><strong>fetch.max.wait.ms</strong>: Maximum time the server will block before answering a fetch request.</li>
<li><strong>max.partition.fetch.bytes</strong>: Maximum data per partition the server will return.</li>
</ul>
</div><h2>Example Configuration</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmV0Y2gubWluLmJ5dGVzPTEKZmV0Y2gubWF4LndhaXQubXM9NTAwCm1heC5wYXJ0aXRpb24uZmV0Y2guYnl0ZXM9MTA0ODU3Ng=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>fetch.min.bytes=1
fetch.max.wait.ms=500
max.partition.fetch.bytes=1048576</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>fetch.min.bytes=1</code>: Sets the minimum amount of data to 1 byte.</li>
<li><code>fetch.max.wait.ms=500</code>: Waits for up to 500 milliseconds before responding to a fetch request.</li>
<li><code>max.partition.fetch.bytes=1048576</code>: Sets the maximum data per partition to 1 MB.</li>
</ul>
</div><h1>Monitoring Tools</h1>
<div class='content'><p>Monitoring Kafka performance is essential for identifying bottlenecks and ensuring optimal operation. Key tools include:</p>
<ul>
<li><strong>Kafka Manager</strong>: A web-based tool for managing and monitoring Kafka clusters.</li>
<li><strong>Prometheus and Grafana</strong>: Open-source tools for monitoring and visualizing metrics.</li>
<li><strong>JMX (Java Management Extensions)</strong>: Used for monitoring Kafka metrics.</li>
</ul>
</div><h2>Example: Using Prometheus and Grafana</h2>
<div class='content'><ol>
<li><strong>Install Prometheus</strong>: Follow the installation guide on the <a href="https://prometheus.io/docs/introduction/first_steps/">Prometheus website</a>.</li>
<li><strong>Install Grafana</strong>: Follow the installation guide on the <a href="https://grafana.com/docs/grafana/latest/getting-started/getting-started-prometheus/">Grafana website</a>.</li>
<li><strong>Configure Kafka JMX Exporter</strong>: Add the JMX exporter to your Kafka brokers to expose metrics.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBwcm9tZXRoZXVzLnltbApzY3JhcGVfY29uZmlnczoKICAtIGpvYl9uYW1lOiAna2Fma2EnCiAgICBzdGF0aWNfY29uZmlnczoKICAgICAgLSB0YXJnZXRzOiBbJ2xvY2FsaG9zdDo3MDcxJ10="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># prometheus.yml
scrape_configs:
  - job_name: 'kafka'
    static_configs:
      - targets: ['localhost:7071']</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Prometheus</strong>: Collects metrics from Kafka brokers.</li>
<li><strong>Grafana</strong>: Visualizes the collected metrics.</li>
<li><strong>JMX Exporter</strong>: Exposes Kafka metrics for Prometheus to scrape.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Kafka performance tuning involves optimizing broker configurations, producer and consumer settings, and using monitoring tools to ensure efficient operation. By carefully adjusting these parameters and continuously monitoring the system, you can achieve optimal throughput and latency for your Kafka cluster.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='kafka-monitoring-and-management'>&#x25C4;Kafka Monitoring and Management</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Kafka Performance Tuning</a>
	</div>
	<div class='col-4 text-end'>
					<a href='kafka-in-a-multi-data-center-setup'>Kafka in a Multi-Data Center Setup &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
