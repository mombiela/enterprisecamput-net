<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stateful vs Stateless Processing</title>

    <link rel="alternate" href="https://campusempresa.com/kafka/stateful-vs-stateless-processing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/kafka/stateful-vs-stateless-processing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/kafka/stateful-vs-stateless-processing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/kafka/stateful-vs-stateless-processing" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/kafka/stateful-vs-stateless-processing" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='building-a-kafka-streams-application'>&#x25C4;Building a Kafka Streams Application</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Stateful vs Stateless Processing</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-kafka-connect'>Introduction to Kafka Connect &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Apache Kafka is a powerful tool for building real-time data pipelines and streaming applications. Understanding the difference between stateful and stateless processing is crucial for designing efficient and scalable Kafka applications. This topic will cover the key concepts, provide examples, and offer exercises to solidify your understanding.</p>
</div><h1>Key Concepts</h1>
<div class='content'></div><h2>Stateless Processing</h2>
<div class='content'><ul>
<li><strong>Definition</strong>: Stateless processing means that each event is processed independently without any knowledge of previous events.</li>
<li><strong>Characteristics</strong>:
<ul>
<li>No need to maintain state between events.</li>
<li>Easier to scale horizontally.</li>
<li>Typically involves simple transformations or filtering.</li>
</ul>
</li>
<li><strong>Use Cases</strong>:
<ul>
<li>Filtering out unwanted messages.</li>
<li>Simple transformations like converting data formats.</li>
</ul>
</li>
</ul>
</div><h2>Stateful Processing</h2>
<div class='content'><ul>
<li><strong>Definition</strong>: Stateful processing involves maintaining state across multiple events, allowing the application to remember information between events.</li>
<li><strong>Characteristics</strong>:
<ul>
<li>Requires maintaining state, often in a local store or external database.</li>
<li>More complex to scale and manage.</li>
<li>Enables more complex operations like aggregations, joins, and windowed computations.</li>
</ul>
</li>
<li><strong>Use Cases</strong>:
<ul>
<li>Counting occurrences of events.</li>
<li>Aggregating data over time windows.</li>
<li>Joining streams of data.</li>
</ul>
</li>
</ul>
</div><h1>Stateless Processing in Kafka Streams</h1>
<div class='content'></div><h2>Example: Filtering Messages</h2>
<div class='content'><p>Let's start with a simple example of stateless processing: filtering messages.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5hcGFjaGUua2Fma2Euc3RyZWFtcy5LYWZrYVN0cmVhbXM7CmltcG9ydCBvcmcuYXBhY2hlLmthZmthLnN0cmVhbXMuU3RyZWFtc0J1aWxkZXI7CmltcG9ydCBvcmcuYXBhY2hlLmthZmthLnN0cmVhbXMua3N0cmVhbS5LU3RyZWFtOwppbXBvcnQgb3JnLmFwYWNoZS5rYWZrYS5zdHJlYW1zLmtzdHJlYW0uS1RhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5rYWZrYS5zdHJlYW1zLmtzdHJlYW0uQ29uc3VtZWQ7CmltcG9ydCBvcmcuYXBhY2hlLmthZmthLnN0cmVhbXMua3N0cmVhbS5Qcm9kdWNlZDsKCnB1YmxpYyBjbGFzcyBTdGF0ZWxlc3NFeGFtcGxlIHsKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsKICAgICAgICBTdHJlYW1zQnVpbGRlciBidWlsZGVyID0gbmV3IFN0cmVhbXNCdWlsZGVyKCk7CiAgICAgICAgS1N0cmVhbTxTdHJpbmcsIFN0cmluZz4gc291cmNlU3RyZWFtID0gYnVpbGRlci5zdHJlYW0oImlucHV0LXRvcGljIik7CgogICAgICAgIEtTdHJlYW08U3RyaW5nLCBTdHJpbmc+IGZpbHRlcmVkU3RyZWFtID0gc291cmNlU3RyZWFtLmZpbHRlcigKICAgICAgICAgICAgKGtleSwgdmFsdWUpIC0+IHZhbHVlLmNvbnRhaW5zKCJpbXBvcnRhbnQiKQogICAgICAgICk7CgogICAgICAgIGZpbHRlcmVkU3RyZWFtLnRvKCJvdXRwdXQtdG9waWMiLCBQcm9kdWNlZC53aXRoKFNlcmRlcy5TdHJpbmcoKSwgU2VyZGVzLlN0cmluZygpKSk7CgogICAgICAgIEthZmthU3RyZWFtcyBzdHJlYW1zID0gbmV3IEthZmthU3RyZWFtcyhidWlsZGVyLmJ1aWxkKCksIG5ldyBQcm9wZXJ0aWVzKCkpOwogICAgICAgIHN0cmVhbXMuc3RhcnQoKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.apache.kafka.streams.KafkaStreams;
import org.apache.kafka.streams.StreamsBuilder;
import org.apache.kafka.streams.kstream.KStream;
import org.apache.kafka.streams.kstream.KTable;
import org.apache.kafka.streams.kstream.Consumed;
import org.apache.kafka.streams.kstream.Produced;

public class StatelessExample {
    public static void main(String[] args) {
        StreamsBuilder builder = new StreamsBuilder();
        KStream&lt;String, String&gt; sourceStream = builder.stream(&quot;input-topic&quot;);

        KStream&lt;String, String&gt; filteredStream = sourceStream.filter(
            (key, value) -&gt; value.contains(&quot;important&quot;)
        );

        filteredStream.to(&quot;output-topic&quot;, Produced.with(Serdes.String(), Serdes.String()));

        KafkaStreams streams = new KafkaStreams(builder.build(), new Properties());
        streams.start();
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Source Stream</strong>: Reads from &quot;input-topic&quot;.</li>
<li><strong>Filter Operation</strong>: Keeps only messages containing the word &quot;important&quot;.</li>
<li><strong>Output Stream</strong>: Writes the filtered messages to &quot;output-topic&quot;.</li>
</ul>
</div><h1>Stateful Processing in Kafka Streams</h1>
<div class='content'></div><h2>Example: Counting Occurrences</h2>
<div class='content'><p>Now, let's look at an example of stateful processing: counting occurrences of words.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5hcGFjaGUua2Fma2Euc3RyZWFtcy5LYWZrYVN0cmVhbXM7CmltcG9ydCBvcmcuYXBhY2hlLmthZmthLnN0cmVhbXMuU3RyZWFtc0J1aWxkZXI7CmltcG9ydCBvcmcuYXBhY2hlLmthZmthLnN0cmVhbXMua3N0cmVhbS5LU3RyZWFtOwppbXBvcnQgb3JnLmFwYWNoZS5rYWZrYS5zdHJlYW1zLmtzdHJlYW0uS1RhYmxlOwppbXBvcnQgb3JnLmFwYWNoZS5rYWZrYS5zdHJlYW1zLmtzdHJlYW0uQ29uc3VtZWQ7CmltcG9ydCBvcmcuYXBhY2hlLmthZmthLnN0cmVhbXMua3N0cmVhbS5Qcm9kdWNlZDsKaW1wb3J0IG9yZy5hcGFjaGUua2Fma2Euc3RyZWFtcy5rc3RyZWFtLk1hdGVyaWFsaXplZDsKaW1wb3J0IG9yZy5hcGFjaGUua2Fma2Euc3RyZWFtcy5zdGF0ZS5TdG9yZXM7CgpwdWJsaWMgY2xhc3MgU3RhdGVmdWxFeGFtcGxlIHsKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsKICAgICAgICBTdHJlYW1zQnVpbGRlciBidWlsZGVyID0gbmV3IFN0cmVhbXNCdWlsZGVyKCk7CiAgICAgICAgS1N0cmVhbTxTdHJpbmcsIFN0cmluZz4gc291cmNlU3RyZWFtID0gYnVpbGRlci5zdHJlYW0oImlucHV0LXRvcGljIik7CgogICAgICAgIEtUYWJsZTxTdHJpbmcsIExvbmc+IHdvcmRDb3VudHMgPSBzb3VyY2VTdHJlYW0KICAgICAgICAgICAgLmZsYXRNYXBWYWx1ZXModmFsdWUgLT4gQXJyYXlzLmFzTGlzdCh2YWx1ZS50b0xvd2VyQ2FzZSgpLnNwbGl0KCJcXFcrIikpKQogICAgICAgICAgICAuZ3JvdXBCeSgoa2V5LCB3b3JkKSAtPiB3b3JkKQogICAgICAgICAgICAuY291bnQoTWF0ZXJpYWxpemVkLjxTdHJpbmcsIExvbmcsIEtleVZhbHVlU3RvcmU8Qnl0ZXMsIGJ5dGVbXT4+YXMoImNvdW50cy1zdG9yZSIpKTsKCiAgICAgICAgd29yZENvdW50cy50b1N0cmVhbSgpLnRvKCJvdXRwdXQtdG9waWMiLCBQcm9kdWNlZC53aXRoKFNlcmRlcy5TdHJpbmcoKSwgU2VyZGVzLkxvbmcoKSkpOwoKICAgICAgICBLYWZrYVN0cmVhbXMgc3RyZWFtcyA9IG5ldyBLYWZrYVN0cmVhbXMoYnVpbGRlci5idWlsZCgpLCBuZXcgUHJvcGVydGllcygpKTsKICAgICAgICBzdHJlYW1zLnN0YXJ0KCk7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.apache.kafka.streams.KafkaStreams;
import org.apache.kafka.streams.StreamsBuilder;
import org.apache.kafka.streams.kstream.KStream;
import org.apache.kafka.streams.kstream.KTable;
import org.apache.kafka.streams.kstream.Consumed;
import org.apache.kafka.streams.kstream.Produced;
import org.apache.kafka.streams.kstream.Materialized;
import org.apache.kafka.streams.state.Stores;

public class StatefulExample {
    public static void main(String[] args) {
        StreamsBuilder builder = new StreamsBuilder();
        KStream&lt;String, String&gt; sourceStream = builder.stream(&quot;input-topic&quot;);

        KTable&lt;String, Long&gt; wordCounts = sourceStream
            .flatMapValues(value -&gt; Arrays.asList(value.toLowerCase().split(&quot;\\W+&quot;)))
            .groupBy((key, word) -&gt; word)
            .count(Materialized.&lt;String, Long, KeyValueStore&lt;Bytes, byte[]&gt;&gt;as(&quot;counts-store&quot;));

        wordCounts.toStream().to(&quot;output-topic&quot;, Produced.with(Serdes.String(), Serdes.Long()));

        KafkaStreams streams = new KafkaStreams(builder.build(), new Properties());
        streams.start();
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Source Stream</strong>: Reads from &quot;input-topic&quot;.</li>
<li><strong>FlatMapValues Operation</strong>: Splits each message into words.</li>
<li><strong>GroupBy Operation</strong>: Groups the words.</li>
<li><strong>Count Operation</strong>: Counts the occurrences of each word, maintaining state in &quot;counts-store&quot;.</li>
<li><strong>Output Stream</strong>: Writes the word counts to &quot;output-topic&quot;.</li>
</ul>
</div><h1>Comparison</h1>
<div class='content'><p>| Feature                | Stateless Processing                  | Stateful Processing                    |
|------------------------|----------------------------------------|----------------------------------------|
| <strong>State Management</strong>   | No state management required           | Requires state management              |
| <strong>Complexity</strong>         | Simpler to implement and scale         | More complex, requires careful state management |
| <strong>Use Cases</strong>          | Filtering, simple transformations      | Aggregations, joins, windowed computations |
| <strong>Scalability</strong>        | Easier to scale horizontally           | More challenging to scale              |</p>
</div><h1>Exercises</h1>
<div class='content'><ol>
<li>
<p><strong>Stateless Processing Exercise</strong>:</p>
<ul>
<li>Modify the stateless example to filter messages that contain the word &quot;urgent&quot;.</li>
<li>Write the filtered messages to a new topic called &quot;urgent-messages&quot;.</li>
</ul>
</li>
<li>
<p><strong>Stateful Processing Exercise</strong>:</p>
<ul>
<li>Modify the stateful example to count the occurrences of each character instead of words.</li>
<li>Write the character counts to a new topic called &quot;character-counts&quot;.</li>
</ul>
</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>Understanding the difference between stateful and stateless processing is essential for designing effective Kafka applications. Stateless processing is simpler and easier to scale, making it suitable for straightforward tasks like filtering and simple transformations. Stateful processing, while more complex, enables powerful operations like aggregations and joins, which are crucial for many real-time data processing applications. By mastering both approaches, you can leverage Kafka Streams to build robust and scalable streaming applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='building-a-kafka-streams-application'>&#x25C4;Building a Kafka Streams Application</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Stateful vs Stateless Processing</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-kafka-connect'>Introduction to Kafka Connect &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
