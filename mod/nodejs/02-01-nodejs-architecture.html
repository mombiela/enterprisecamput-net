<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Node.js Architecture</title>

    <link rel="alternate" href="https://campusempresa.com/mod/nodejs/02-01-nodejs-architecture" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/nodejs/02-01-nodejs-architecture" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/nodejs/02-01-nodejs-architecture" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=3" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/nodejs/02-01-nodejs-architecture" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/nodejs/02-01-nodejs-architecture" class="px-2">CA</a>
</span>
			<span class="d-none d-md-inline"><br><cite>Building today's and tomorrow's society</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Languages</a>
				 					<a href="/categ/frameworks">Frameworks</a>
				 					<a href="/categ/tech-tools">Tools</a>
				 					<a href="/categ/foundations">Foundations</a>
				 					<a href="/categ/soft-skills">Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='01-04-nodejs-repl' title="Node.js REPL">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Node.js Architecture</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='02-02-event-loop' title="Event Loop">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Node.js is a powerful and popular runtime environment that allows developers to run JavaScript on the server side. Understanding its architecture is crucial for leveraging its full potential. In this section, we will explore the core components and design principles that make Node.js unique.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Single-Threaded Event Loop</strong>:</p>
<ul>
<li>Node.js operates on a single-threaded event loop model, which allows it to handle multiple concurrent operations without creating multiple threads.</li>
<li>This model is efficient for I/O-bound tasks but may not be suitable for CPU-intensive tasks.</li>
</ul>
</li>
<li>
<p><strong>Non-Blocking I/O</strong>:</p>
<ul>
<li>Node.js uses non-blocking I/O operations, meaning it can handle other tasks while waiting for I/O operations to complete.</li>
<li>This is achieved through asynchronous programming, which is a core concept in Node.js.</li>
</ul>
</li>
<li>
<p><strong>Event-Driven Architecture</strong>:</p>
<ul>
<li>Node.js is event-driven, meaning it uses events to handle asynchronous operations.</li>
<li>The EventEmitter class is central to this architecture, allowing objects to emit and listen for events.</li>
</ul>
</li>
<li>
<p><strong>V8 JavaScript Engine</strong>:</p>
<ul>
<li>Node.js is built on the V8 JavaScript engine, developed by Google for the Chrome browser.</li>
<li>V8 compiles JavaScript directly to native machine code, providing high performance.</li>
</ul>
</li>
</ol>
</div><h1><p>Components of Node.js Architecture</p>
</h1>
<div class='content'></div><h2><ol>
<li>V8 Engine</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Role</strong>: Executes JavaScript code.</li>
<li><strong>Features</strong>: High performance, Just-In-Time (JIT) compilation.</li>
</ul>
</div><h2><ol start="2">
<li>Libuv</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Role</strong>: Provides the event loop and asynchronous I/O.</li>
<li><strong>Features</strong>: Cross-platform support, handles file system, DNS, network, child processes, and more.</li>
</ul>
</div><h2><ol start="3">
<li>Event Loop</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Role</strong>: Manages asynchronous operations.</li>
<li><strong>Phases</strong>:
<ol>
<li><strong>Timers</strong>: Executes callbacks scheduled by <code>setTimeout()</code> and <code>setInterval()</code>.</li>
<li><strong>Pending Callbacks</strong>: Executes I/O callbacks deferred to the next loop iteration.</li>
<li><strong>Idle, Prepare</strong>: Internal use only.</li>
<li><strong>Poll</strong>: Retrieves new I/O events; executes I/O-related callbacks.</li>
<li><strong>Check</strong>: Executes <code>setImmediate()</code> callbacks.</li>
<li><strong>Close Callbacks</strong>: Executes close event callbacks, e.g., <code>socket.on('close', ...)</code>.</li>
</ol>
</li>
</ul>
</div><h2><ol start="4">
<li>C++ Bindings</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Role</strong>: Provides bindings to C++ libraries.</li>
<li><strong>Features</strong>: Allows Node.js to interface with low-level system operations.</li>
</ul>
</div><h2><ol start="5">
<li>Node.js APIs</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Role</strong>: Provides built-in modules and APIs.</li>
<li><strong>Examples</strong>: <code>fs</code> for file system operations, <code>http</code> for creating servers, <code>path</code> for handling file paths.</li>
</ul>
</div><h1><p>Practical Example: Understanding the Event Loop</p>
</h1>
<div class='content'><p>Let's look at a simple example to understand how the event loop works:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZnMgPSByZXF1aXJlKCdmcycpOwoKY29uc29sZS5sb2coJ1N0YXJ0Jyk7Cgpmcy5yZWFkRmlsZSgnZXhhbXBsZS50eHQnLCAndXRmOCcsIChlcnIsIGRhdGEpID0+IHsKICBpZiAoZXJyKSB7CiAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICByZXR1cm47CiAgfQogIGNvbnNvbGUubG9nKCdGaWxlIGNvbnRlbnQ6JywgZGF0YSk7Cn0pOwoKY29uc29sZS5sb2coJ0VuZCcpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const fs = require('fs');

console.log('Start');

fs.readFile('example.txt', 'utf8', (err, data) =&gt; {
  if (err) {
    console.error(err);
    return;
  }
  console.log('File content:', data);
});

console.log('End');</pre></div><div class='content'></div><h2><p>Explanation:</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Synchronous Operations</strong>:</p>
<ul>
<li><code>console.log('Start')</code> is executed first.</li>
<li><code>fs.readFile</code> is called, but it is an asynchronous operation, so it doesn't block the execution.</li>
<li><code>console.log('End')</code> is executed next.</li>
</ul>
</li>
<li>
<p><strong>Asynchronous Operation</strong>:</p>
<ul>
<li>Once the file reading is complete, the callback function provided to <code>fs.readFile</code> is executed.</li>
<li>This happens after the synchronous code has finished executing.</li>
</ul>
</li>
</ol>
</div><h2><p>Output:</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U3RhcnQKRW5kCkZpbGUgY29udGVudDogW2NvbnRlbnQgb2YgZXhhbXBsZS50eHRd"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Start
End
File content: [content of example.txt]</pre></div><div class='content'></div><h1><p>Exercise: Exploring the Event Loop</p>
</h1>
<div class='content'></div><h2><p>Task:</p>
</h2>
<div class='content'><p>Write a Node.js script that demonstrates the order of execution of different asynchronous operations, such as <code>setTimeout</code>, <code>setImmediate</code>, and <code>process.nextTick</code>.</p>
</div><h2><p>Solution:</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc29sZS5sb2coJ1N0YXJ0Jyk7CgpzZXRUaW1lb3V0KCgpID0+IHsKICBjb25zb2xlLmxvZygnVGltZW91dCcpOwp9LCAwKTsKCnNldEltbWVkaWF0ZSgoKSA9PiB7CiAgY29uc29sZS5sb2coJ0ltbWVkaWF0ZScpOwp9KTsKCnByb2Nlc3MubmV4dFRpY2soKCkgPT4gewogIGNvbnNvbGUubG9nKCdOZXh0IFRpY2snKTsKfSk7Cgpjb25zb2xlLmxvZygnRW5kJyk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>console.log('Start');

setTimeout(() =&gt; {
  console.log('Timeout');
}, 0);

setImmediate(() =&gt; {
  console.log('Immediate');
});

process.nextTick(() =&gt; {
  console.log('Next Tick');
});

console.log('End');</pre></div><div class='content'></div><h2><p>Expected Output:</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U3RhcnQKRW5kCk5leHQgVGljawpJbW1lZGlhdGUKVGltZW91dA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Start
End
Next Tick
Immediate
Timeout</pre></div><div class='content'></div><h2><p>Explanation:</p>
</h2>
<div class='content'><ul>
<li><code>process.nextTick</code> is executed after the current operation completes, before the event loop continues.</li>
<li><code>setImmediate</code> is executed in the check phase of the event loop.</li>
<li><code>setTimeout</code> with a delay of 0 is executed in the timers phase, which comes after the check phase.</li>
</ul>
</div><h1><p>Summary</p>
</h1>
<div class='content'><p>In this section, we covered the architecture of Node.js, focusing on its single-threaded event loop, non-blocking I/O, and event-driven nature. We also explored the key components like the V8 engine, libuv, and Node.js APIs. Understanding these concepts is fundamental for writing efficient and scalable Node.js applications. In the next module, we will dive deeper into the event loop and asynchronous programming with callbacks.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='01-04-nodejs-repl' title="Node.js REPL">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='02-02-event-loop' title="Event Loop">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Advertising</h1>
<p>This space is reserved for advertising.</p>
<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Thank you for collaborating!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
