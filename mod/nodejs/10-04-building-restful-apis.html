<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building RESTful APIs</title>

    <link rel="alternate" href="https://campusempresa.com/mod/nodejs/10-04-building-restful-apis" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/nodejs/10-04-building-restful-apis" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/nodejs/10-04-building-restful-apis" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/nodejs/10-04-building-restful-apis" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/nodejs/10-04-building-restful-apis" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Programming Languages</a>
				 					<a href="/categ/frameworks">Frameworks and Libraries</a>
				 					<a href="/categ/tech-tools">Technical Tools</a>
				 					<a href="/categ/foundations">Theoretical Foundations</a>
				 					<a href="/categ/soft-skills">Social Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='10-03-performance-optimization' title="Performance Optimization">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Building RESTful APIs</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='10-05-graphql-nodejs' title="GraphQL with Node.js">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to build RESTful APIs using Node.js. REST (Representational State Transfer) is an architectural style for designing networked applications. It relies on a stateless, client-server, cacheable communications protocol -- the HTTP protocol. RESTful APIs are designed to take advantage of existing protocols. While REST can be used over nearly any protocol, it usually takes advantage of HTTP when used for Web APIs.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>REST Principles</strong>:</p>
<ul>
<li><strong>Stateless</strong>: Each request from a client to server must contain all the information needed to understand and process the request.</li>
<li><strong>Client-Server</strong>: The client and server are separate entities that communicate over a network.</li>
<li><strong>Cacheable</strong>: Responses must define themselves as cacheable or not to prevent clients from reusing stale or inappropriate data.</li>
<li><strong>Uniform Interface</strong>: A consistent way to interact with the server, typically using standard HTTP methods (GET, POST, PUT, DELETE).</li>
</ul>
</li>
<li>
<p><strong>HTTP Methods</strong>:</p>
<ul>
<li><strong>GET</strong>: Retrieve data from the server.</li>
<li><strong>POST</strong>: Send data to the server to create a new resource.</li>
<li><strong>PUT</strong>: Update an existing resource on the server.</li>
<li><strong>DELETE</strong>: Remove a resource from the server.</li>
</ul>
</li>
<li>
<p><strong>Endpoints</strong>: URLs that represent the resources in your API. For example, <code>/users</code> might represent a collection of user resources.</p>
</li>
<li>
<p><strong>Status Codes</strong>: HTTP status codes indicate the result of the HTTP request. Common codes include:</p>
<ul>
<li><code>200 OK</code>: The request was successful.</li>
<li><code>201 Created</code>: A new resource was successfully created.</li>
<li><code>400 Bad Request</code>: The request was invalid.</li>
<li><code>404 Not Found</code>: The requested resource was not found.</li>
<li><code>500 Internal Server Error</code>: A generic error message for server-side issues.</li>
</ul>
</li>
</ol>
</div><h1><p>Setting Up</p>
</h1>
<div class='content'><p>Before we start building our RESTful API, ensure you have Node.js and npm installed. We will use the Express.js framework to simplify the process.</p>
</div><h2><p>Step 1: Initialize a New Node.js Project</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bWtkaXIgcmVzdGZ1bC1hcGkKY2QgcmVzdGZ1bC1hcGkKbnBtIGluaXQgLXk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>mkdir restful-api
cd restful-api
npm init -y</pre></div><div class='content'></div><h2><p>Step 2: Install Express.js</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgZXhwcmVzcw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install express</pre></div><div class='content'></div><h2><p>Step 3: Create the Project Structure</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bWtkaXIgc3JjCnRvdWNoIHNyYy9pbmRleC5qcw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>mkdir src
touch src/index.js</pre></div><div class='content'></div><h1><p>Building the API</p>
</h1>
<div class='content'></div><h2><p>Step 1: Setting Up Express</p>
</h2>
<div class='content'><p>In <code>src/index.js</code>, set up a basic Express server:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3QgYXBwID0gZXhwcmVzcygpOwpjb25zdCBwb3J0ID0gMzAwMDsKCmFwcC51c2UoZXhwcmVzcy5qc29uKCkpOwoKYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7CiAgY29uc29sZS5sb2coYFNlcnZlciBpcyBydW5uaW5nIG9uIGh0dHA6Ly9sb2NhbGhvc3Q6JHtwb3J0fWApOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const express = require('express');
const app = express();
const port = 3000;

app.use(express.json());

app.listen(port, () =&gt; {
  console.log(`Server is running on http://localhost:${port}`);
});</pre></div><div class='content'></div><h2><p>Step 2: Define Routes</p>
</h2>
<div class='content'><p>Let's create a simple API for managing a list of users. We'll define routes for CRUD operations.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgdXNlcnMgPSBbXTsKCi8vIEdldCBhbGwgdXNlcnMKYXBwLmdldCgnL3VzZXJzJywgKHJlcSwgcmVzKSA9PiB7CiAgcmVzLnN0YXR1cygyMDApLmpzb24odXNlcnMpOwp9KTsKCi8vIEdldCBhIHNpbmdsZSB1c2VyIGJ5IElECmFwcC5nZXQoJy91c2Vycy86aWQnLCAocmVxLCByZXMpID0+IHsKICBjb25zdCB1c2VyID0gdXNlcnMuZmluZCh1ID0+IHUuaWQgPT09IHBhcnNlSW50KHJlcS5wYXJhbXMuaWQpKTsKICBpZiAoIXVzZXIpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCgnVXNlciBub3QgZm91bmQnKTsKICByZXMuc3RhdHVzKDIwMCkuanNvbih1c2VyKTsKfSk7CgovLyBDcmVhdGUgYSBuZXcgdXNlcgphcHAucG9zdCgnL3VzZXJzJywgKHJlcSwgcmVzKSA9PiB7CiAgY29uc3QgdXNlciA9IHsKICAgIGlkOiB1c2Vycy5sZW5ndGggKyAxLAogICAgbmFtZTogcmVxLmJvZHkubmFtZSwKICAgIGVtYWlsOiByZXEuYm9keS5lbWFpbAogIH07CiAgdXNlcnMucHVzaCh1c2VyKTsKICByZXMuc3RhdHVzKDIwMSkuanNvbih1c2VyKTsKfSk7CgovLyBVcGRhdGUgYW4gZXhpc3RpbmcgdXNlcgphcHAucHV0KCcvdXNlcnMvOmlkJywgKHJlcSwgcmVzKSA9PiB7CiAgY29uc3QgdXNlciA9IHVzZXJzLmZpbmQodSA9PiB1LmlkID09PSBwYXJzZUludChyZXEucGFyYW1zLmlkKSk7CiAgaWYgKCF1c2VyKSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoJ1VzZXIgbm90IGZvdW5kJyk7CgogIHVzZXIubmFtZSA9IHJlcS5ib2R5Lm5hbWU7CiAgdXNlci5lbWFpbCA9IHJlcS5ib2R5LmVtYWlsOwogIHJlcy5zdGF0dXMoMjAwKS5qc29uKHVzZXIpOwp9KTsKCi8vIERlbGV0ZSBhIHVzZXIKYXBwLmRlbGV0ZSgnL3VzZXJzLzppZCcsIChyZXEsIHJlcykgPT4gewogIGNvbnN0IHVzZXJJbmRleCA9IHVzZXJzLmZpbmRJbmRleCh1ID0+IHUuaWQgPT09IHBhcnNlSW50KHJlcS5wYXJhbXMuaWQpKTsKICBpZiAodXNlckluZGV4ID09PSAtMSkgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKCdVc2VyIG5vdCBmb3VuZCcpOwoKICB1c2Vycy5zcGxpY2UodXNlckluZGV4LCAxKTsKICByZXMuc3RhdHVzKDIwNCkuc2VuZCgpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const users = [];

// Get all users
app.get('/users', (req, res) =&gt; {
  res.status(200).json(users);
});

// Get a single user by ID
app.get('/users/:id', (req, res) =&gt; {
  const user = users.find(u =&gt; u.id === parseInt(req.params.id));
  if (!user) return res.status(404).send('User not found');
  res.status(200).json(user);
});

// Create a new user
app.post('/users', (req, res) =&gt; {
  const user = {
    id: users.length + 1,
    name: req.body.name,
    email: req.body.email
  };
  users.push(user);
  res.status(201).json(user);
});

// Update an existing user
app.put('/users/:id', (req, res) =&gt; {
  const user = users.find(u =&gt; u.id === parseInt(req.params.id));
  if (!user) return res.status(404).send('User not found');

  user.name = req.body.name;
  user.email = req.body.email;
  res.status(200).json(user);
});

// Delete a user
app.delete('/users/:id', (req, res) =&gt; {
  const userIndex = users.findIndex(u =&gt; u.id === parseInt(req.params.id));
  if (userIndex === -1) return res.status(404).send('User not found');

  users.splice(userIndex, 1);
  res.status(204).send();
});</pre></div><div class='content'></div><h2><p>Step 3: Test the API</p>
</h2>
<div class='content'><p>You can use tools like Postman or curl to test your API endpoints.</p>
<h4>Example Requests</h4>
<ul>
<li><strong>GET /users</strong>: Retrieve all users.</li>
<li><strong>GET /users/1</strong>: Retrieve the user with ID 1.</li>
<li><strong>POST /users</strong>: Create a new user.
<pre><code class="language-json">{
  &quot;name&quot;: &quot;John Doe&quot;,
  &quot;email&quot;: &quot;john.doe@example.com&quot;
}
</code></pre>
</li>
<li><strong>PUT /users/1</strong>: Update the user with ID 1.
<pre><code class="language-json">{
  &quot;name&quot;: &quot;Jane Doe&quot;,
  &quot;email&quot;: &quot;jane.doe@example.com&quot;
}
</code></pre>
</li>
<li><strong>DELETE /users/1</strong>: Delete the user with ID 1.</li>
</ul>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Task</p>
</h2>
<div class='content'><ol>
<li>Extend the current API to include a new resource, <code>posts</code>, with the following fields: <code>id</code>, <code>title</code>, <code>content</code>, and <code>userId</code>.</li>
<li>Implement CRUD operations for the <code>posts</code> resource.</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgcG9zdHMgPSBbXTsKCi8vIEdldCBhbGwgcG9zdHMKYXBwLmdldCgnL3Bvc3RzJywgKHJlcSwgcmVzKSA9PiB7CiAgcmVzLnN0YXR1cygyMDApLmpzb24ocG9zdHMpOwp9KTsKCi8vIEdldCBhIHNpbmdsZSBwb3N0IGJ5IElECmFwcC5nZXQoJy9wb3N0cy86aWQnLCAocmVxLCByZXMpID0+IHsKICBjb25zdCBwb3N0ID0gcG9zdHMuZmluZChwID0+IHAuaWQgPT09IHBhcnNlSW50KHJlcS5wYXJhbXMuaWQpKTsKICBpZiAoIXBvc3QpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCgnUG9zdCBub3QgZm91bmQnKTsKICByZXMuc3RhdHVzKDIwMCkuanNvbihwb3N0KTsKfSk7CgovLyBDcmVhdGUgYSBuZXcgcG9zdAphcHAucG9zdCgnL3Bvc3RzJywgKHJlcSwgcmVzKSA9PiB7CiAgY29uc3QgcG9zdCA9IHsKICAgIGlkOiBwb3N0cy5sZW5ndGggKyAxLAogICAgdGl0bGU6IHJlcS5ib2R5LnRpdGxlLAogICAgY29udGVudDogcmVxLmJvZHkuY29udGVudCwKICAgIHVzZXJJZDogcmVxLmJvZHkudXNlcklkCiAgfTsKICBwb3N0cy5wdXNoKHBvc3QpOwogIHJlcy5zdGF0dXMoMjAxKS5qc29uKHBvc3QpOwp9KTsKCi8vIFVwZGF0ZSBhbiBleGlzdGluZyBwb3N0CmFwcC5wdXQoJy9wb3N0cy86aWQnLCAocmVxLCByZXMpID0+IHsKICBjb25zdCBwb3N0ID0gcG9zdHMuZmluZChwID0+IHAuaWQgPT09IHBhcnNlSW50KHJlcS5wYXJhbXMuaWQpKTsKICBpZiAoIXBvc3QpIHJldHVybiByZXMuc3RhdHVzKDQwNCkuc2VuZCgnUG9zdCBub3QgZm91bmQnKTsKCiAgcG9zdC50aXRsZSA9IHJlcS5ib2R5LnRpdGxlOwogIHBvc3QuY29udGVudCA9IHJlcS5ib2R5LmNvbnRlbnQ7CiAgcG9zdC51c2VySWQgPSByZXEuYm9keS51c2VySWQ7CiAgcmVzLnN0YXR1cygyMDApLmpzb24ocG9zdCk7Cn0pOwoKLy8gRGVsZXRlIGEgcG9zdAphcHAuZGVsZXRlKCcvcG9zdHMvOmlkJywgKHJlcSwgcmVzKSA9PiB7CiAgY29uc3QgcG9zdEluZGV4ID0gcG9zdHMuZmluZEluZGV4KHAgPT4gcC5pZCA9PT0gcGFyc2VJbnQocmVxLnBhcmFtcy5pZCkpOwogIGlmIChwb3N0SW5kZXggPT09IC0xKSByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoJ1Bvc3Qgbm90IGZvdW5kJyk7CgogIHBvc3RzLnNwbGljZShwb3N0SW5kZXgsIDEpOwogIHJlcy5zdGF0dXMoMjA0KS5zZW5kKCk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const posts = [];

// Get all posts
app.get('/posts', (req, res) =&gt; {
  res.status(200).json(posts);
});

// Get a single post by ID
app.get('/posts/:id', (req, res) =&gt; {
  const post = posts.find(p =&gt; p.id === parseInt(req.params.id));
  if (!post) return res.status(404).send('Post not found');
  res.status(200).json(post);
});

// Create a new post
app.post('/posts', (req, res) =&gt; {
  const post = {
    id: posts.length + 1,
    title: req.body.title,
    content: req.body.content,
    userId: req.body.userId
  };
  posts.push(post);
  res.status(201).json(post);
});

// Update an existing post
app.put('/posts/:id', (req, res) =&gt; {
  const post = posts.find(p =&gt; p.id === parseInt(req.params.id));
  if (!post) return res.status(404).send('Post not found');

  post.title = req.body.title;
  post.content = req.body.content;
  post.userId = req.body.userId;
  res.status(200).json(post);
});

// Delete a post
app.delete('/posts/:id', (req, res) =&gt; {
  const postIndex = posts.findIndex(p =&gt; p.id === parseInt(req.params.id));
  if (postIndex === -1) return res.status(404).send('Post not found');

  posts.splice(postIndex, 1);
  res.status(204).send();
});</pre></div><div class='content'></div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ul>
<li><strong>Mistake</strong>: Forgetting to parse JSON bodies in requests.
<ul>
<li><strong>Tip</strong>: Always use <code>express.json()</code> middleware to parse JSON bodies.</li>
</ul>
</li>
<li><strong>Mistake</strong>: Not handling errors properly.
<ul>
<li><strong>Tip</strong>: Always check if the resource exists before performing operations on it.</li>
</ul>
</li>
<li><strong>Mistake</strong>: Hardcoding IDs.
<ul>
<li><strong>Tip</strong>: Use a database or a more sophisticated ID generation strategy for production applications.</li>
</ul>
</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the basics of building RESTful APIs with Node.js and Express. We learned about REST principles, HTTP methods, and how to set up routes for CRUD operations. We also implemented a practical exercise to reinforce the concepts. In the next module, we will dive deeper into advanced topics such as performance optimization and building more complex APIs.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='10-03-performance-optimization' title="Performance Optimization">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='10-05-graphql-nodejs' title="GraphQL with Node.js">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
