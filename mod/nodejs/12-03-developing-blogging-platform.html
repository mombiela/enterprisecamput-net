<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developing a Blogging Platform</title>

    <link rel="alternate" href="https://campusempresa.com/mod/nodejs/12-03-developing-blogging-platform" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/nodejs/12-03-developing-blogging-platform" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/nodejs/12-03-developing-blogging-platform" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/nodejs/12-03-developing-blogging-platform" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/nodejs/12-03-developing-blogging-platform" class="px-2">CA</a>
					</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='12-02-creating-ecommerce-api' title="Creating an E-commerce API">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Developing a Blogging Platform</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='12-04-building-task-management' title="Building a Task Management Tool">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this module, we will build a fully functional blogging platform using Node.js and Express.js. This project will help you understand how to integrate various concepts and technologies you've learned throughout the course. By the end of this module, you will have a solid understanding of how to create a real-world application with Node.js.</p>
</div><h1><p>Table of Contents</p>
</h1>
<div class='content'><ol>
<li><a href="#project-setup">Project Setup</a></li>
<li><a href="#database-design">Database Design</a></li>
<li><a href="#user-authentication">User Authentication</a></li>
<li><a href="#creating-blog-posts">Creating Blog Posts</a></li>
<li><a href="#reading-blog-posts">Reading Blog Posts</a></li>
<li><a href="#updating-and-deleting-blog-posts">Updating and Deleting Blog Posts</a></li>
<li><a href="#commenting-system">Commenting System</a></li>
<li><a href="#deploying-the-application">Deploying the Application</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ol>
</div><h1><p>Project Setup</p>
</h1>
<div class='content'></div><h2><ol>
<li>Initialize the Project</li>
</ol>
</h2>
<div class='content'><p>First, create a new directory for your project and initialize it with npm.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bWtkaXIgYmxvZ2dpbmctcGxhdGZvcm0KY2QgYmxvZ2dpbmctcGxhdGZvcm0KbnBtIGluaXQgLXk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>mkdir blogging-platform
cd blogging-platform
npm init -y</pre></div><div class='content'></div><h2><ol start="2">
<li>Install Dependencies</li>
</ol>
</h2>
<div class='content'><p>Install the necessary packages for our project.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgZXhwcmVzcyBtb25nb29zZSBiY3J5cHRqcyBqc29ud2VidG9rZW4gYm9keS1wYXJzZXIKbnBtIGluc3RhbGwgLS1zYXZlLWRldiBub2RlbW9u"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install express mongoose bcryptjs jsonwebtoken body-parser
npm install --save-dev nodemon</pre></div><div class='content'></div><h2><ol start="3">
<li>Project Structure</li>
</ol>
</h2>
<div class='content'><p>Create the following directory structure:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YmxvZ2dpbmctcGxhdGZvcm0vCuKUnOKUgOKUgCBjb25maWcvCuKUgiAgIOKUlOKUgOKUgCBkYi5qcwrilJzilIDilIAgY29udHJvbGxlcnMvCuKUgiAgIOKUnOKUgOKUgCBhdXRoQ29udHJvbGxlci5qcwrilIIgICDilJzilIDilIAgcG9zdENvbnRyb2xsZXIuanMK4pSCICAg4pSU4pSA4pSAIGNvbW1lbnRDb250cm9sbGVyLmpzCuKUnOKUgOKUgCBtb2RlbHMvCuKUgiAgIOKUnOKUgOKUgCBVc2VyLmpzCuKUgiAgIOKUnOKUgOKUgCBQb3N0LmpzCuKUgiAgIOKUlOKUgOKUgCBDb21tZW50LmpzCuKUnOKUgOKUgCByb3V0ZXMvCuKUgiAgIOKUnOKUgOKUgCBhdXRoUm91dGVzLmpzCuKUgiAgIOKUnOKUgOKUgCBwb3N0Um91dGVzLmpzCuKUgiAgIOKUlOKUgOKUgCBjb21tZW50Um91dGVzLmpzCuKUnOKUgOKUgCBtaWRkbGV3YXJlLwrilIIgICDilJTilIDilIAgYXV0aE1pZGRsZXdhcmUuanMK4pSc4pSA4pSAIC5lbnYK4pSc4pSA4pSAIGFwcC5qcwrilJTilIDilIAgcGFja2FnZS5qc29u"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>blogging-platform/
├── config/
│   └── db.js
├── controllers/
│   ├── authController.js
│   ├── postController.js
│   └── commentController.js
├── models/
│   ├── User.js
│   ├── Post.js
│   └── Comment.js
├── routes/
│   ├── authRoutes.js
│   ├── postRoutes.js
│   └── commentRoutes.js
├── middleware/
│   └── authMiddleware.js
├── .env
├── app.js
└── package.json</pre></div><div class='content'></div><h2><ol start="4">
<li>Setting Up Express</li>
</ol>
</h2>
<div class='content'><p>Create <code>app.js</code> and set up the basic Express server.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpOwpjb25zdCBib2R5UGFyc2VyID0gcmVxdWlyZSgnYm9keS1wYXJzZXInKTsKcmVxdWlyZSgnZG90ZW52JykuY29uZmlnKCk7Cgpjb25zdCBhcHAgPSBleHByZXNzKCk7CgovLyBNaWRkbGV3YXJlCmFwcC51c2UoYm9keVBhcnNlci5qc29uKCkpOwoKLy8gUm91dGVzCmFwcC51c2UoJy9hcGkvYXV0aCcsIHJlcXVpcmUoJy4vcm91dGVzL2F1dGhSb3V0ZXMnKSk7CmFwcC51c2UoJy9hcGkvcG9zdHMnLCByZXF1aXJlKCcuL3JvdXRlcy9wb3N0Um91dGVzJykpOwphcHAudXNlKCcvYXBpL2NvbW1lbnRzJywgcmVxdWlyZSgnLi9yb3V0ZXMvY29tbWVudFJvdXRlcycpKTsKCi8vIENvbm5lY3QgdG8gTW9uZ29EQgptb25nb29zZS5jb25uZWN0KHByb2Nlc3MuZW52Lk1PTkdPX1VSSSwgeyB1c2VOZXdVcmxQYXJzZXI6IHRydWUsIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSB9KQogICAgLnRoZW4oKCkgPT4gY29uc29sZS5sb2coJ01vbmdvREIgY29ubmVjdGVkJykpCiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpOwoKY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgNTAwMDsKYXBwLmxpc3RlbihQT1JULCAoKSA9PiBjb25zb2xlLmxvZyhgU2VydmVyIHJ1bm5pbmcgb24gcG9ydCAke1BPUlR9YCkpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const express = require('express');
const mongoose = require('mongoose');
const bodyParser = require('body-parser');
require('dotenv').config();

const app = express();

// Middleware
app.use(bodyParser.json());

// Routes
app.use('/api/auth', require('./routes/authRoutes'));
app.use('/api/posts', require('./routes/postRoutes'));
app.use('/api/comments', require('./routes/commentRoutes'));

// Connect to MongoDB
mongoose.connect(process.env.MONGO_URI, { useNewUrlParser: true, useUnifiedTopology: true })
    .then(() =&gt; console.log('MongoDB connected'))
    .catch(err =&gt; console.log(err));

const PORT = process.env.PORT || 5000;
app.listen(PORT, () =&gt; console.log(`Server running on port ${PORT}`));</pre></div><div class='content'></div><h2><ol start="5">
<li>Database Configuration</li>
</ol>
</h2>
<div class='content'><p>Create <code>config/db.js</code> to handle the MongoDB connection.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpOwoKY29uc3QgY29ubmVjdERCID0gYXN5bmMgKCkgPT4gewogICAgdHJ5IHsKICAgICAgICBhd2FpdCBtb25nb29zZS5jb25uZWN0KHByb2Nlc3MuZW52Lk1PTkdPX1VSSSwgewogICAgICAgICAgICB1c2VOZXdVcmxQYXJzZXI6IHRydWUsCiAgICAgICAgICAgIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSwKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygnTW9uZ29EQiBjb25uZWN0ZWQnKTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpOwogICAgICAgIHByb2Nlc3MuZXhpdCgxKTsKICAgIH0KfTsKCm1vZHVsZS5leHBvcnRzID0gY29ubmVjdERCOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const mongoose = require('mongoose');

const connectDB = async () =&gt; {
    try {
        await mongoose.connect(process.env.MONGO_URI, {
            useNewUrlParser: true,
            useUnifiedTopology: true,
        });
        console.log('MongoDB connected');
    } catch (err) {
        console.error(err.message);
        process.exit(1);
    }
};

module.exports = connectDB;</pre></div><div class='content'></div><h1><p>Database Design</p>
</h1>
<div class='content'></div><h2><ol>
<li>User Model</li>
</ol>
</h2>
<div class='content'><p>Create <code>models/User.js</code> to define the User schema.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpOwoKY29uc3QgVXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoewogICAgdXNlcm5hbWU6IHsKICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgdW5pcXVlOiB0cnVlLAogICAgfSwKICAgIGVtYWlsOiB7CiAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHVuaXF1ZTogdHJ1ZSwKICAgIH0sCiAgICBwYXNzd29yZDogewogICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgIH0sCiAgICBkYXRlOiB7CiAgICAgICAgdHlwZTogRGF0ZSwKICAgICAgICBkZWZhdWx0OiBEYXRlLm5vdywKICAgIH0sCn0pOwoKbW9kdWxlLmV4cG9ydHMgPSBtb25nb29zZS5tb2RlbCgnVXNlcicsIFVzZXJTY2hlbWEpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const mongoose = require('mongoose');

const UserSchema = new mongoose.Schema({
    username: {
        type: String,
        required: true,
        unique: true,
    },
    email: {
        type: String,
        required: true,
        unique: true,
    },
    password: {
        type: String,
        required: true,
    },
    date: {
        type: Date,
        default: Date.now,
    },
});

module.exports = mongoose.model('User', UserSchema);</pre></div><div class='content'></div><h2><ol start="2">
<li>Post Model</li>
</ol>
</h2>
<div class='content'><p>Create <code>models/Post.js</code> to define the Post schema.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpOwoKY29uc3QgUG9zdFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoewogICAgdGl0bGU6IHsKICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICB9LAogICAgYm9keTogewogICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgIH0sCiAgICBhdXRob3I6IHsKICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsCiAgICAgICAgcmVmOiAnVXNlcicsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICB9LAogICAgZGF0ZTogewogICAgICAgIHR5cGU6IERhdGUsCiAgICAgICAgZGVmYXVsdDogRGF0ZS5ub3csCiAgICB9LAp9KTsKCm1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoJ1Bvc3QnLCBQb3N0U2NoZW1hKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const mongoose = require('mongoose');

const PostSchema = new mongoose.Schema({
    title: {
        type: String,
        required: true,
    },
    body: {
        type: String,
        required: true,
    },
    author: {
        type: mongoose.Schema.Types.ObjectId,
        ref: 'User',
        required: true,
    },
    date: {
        type: Date,
        default: Date.now,
    },
});

module.exports = mongoose.model('Post', PostSchema);</pre></div><div class='content'></div><h2><ol start="3">
<li>Comment Model</li>
</ol>
</h2>
<div class='content'><p>Create <code>models/Comment.js</code> to define the Comment schema.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpOwoKY29uc3QgQ29tbWVudFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoewogICAgYm9keTogewogICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgIH0sCiAgICBhdXRob3I6IHsKICAgICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuVHlwZXMuT2JqZWN0SWQsCiAgICAgICAgcmVmOiAnVXNlcicsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICB9LAogICAgcG9zdDogewogICAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5UeXBlcy5PYmplY3RJZCwKICAgICAgICByZWY6ICdQb3N0JywKICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgIH0sCiAgICBkYXRlOiB7CiAgICAgICAgdHlwZTogRGF0ZSwKICAgICAgICBkZWZhdWx0OiBEYXRlLm5vdywKICAgIH0sCn0pOwoKbW9kdWxlLmV4cG9ydHMgPSBtb25nb29zZS5tb2RlbCgnQ29tbWVudCcsIENvbW1lbnRTY2hlbWEpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const mongoose = require('mongoose');

const CommentSchema = new mongoose.Schema({
    body: {
        type: String,
        required: true,
    },
    author: {
        type: mongoose.Schema.Types.ObjectId,
        ref: 'User',
        required: true,
    },
    post: {
        type: mongoose.Schema.Types.ObjectId,
        ref: 'Post',
        required: true,
    },
    date: {
        type: Date,
        default: Date.now,
    },
});

module.exports = mongoose.model('Comment', CommentSchema);</pre></div><div class='content'></div><h1><p>User Authentication</p>
</h1>
<div class='content'></div><h2><ol>
<li>Register User</li>
</ol>
</h2>
<div class='content'><p>Create <code>controllers/authController.js</code> to handle user registration.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgVXNlciA9IHJlcXVpcmUoJy4uL21vZGVscy9Vc2VyJyk7CmNvbnN0IGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdGpzJyk7CmNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpOwoKZXhwb3J0cy5yZWdpc3RlciA9IGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgY29uc3QgeyB1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkIH0gPSByZXEuYm9keTsKCiAgICB0cnkgewogICAgICAgIGxldCB1c2VyID0gYXdhaXQgVXNlci5maW5kT25lKHsgZW1haWwgfSk7CiAgICAgICAgaWYgKHVzZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbXNnOiAnVXNlciBhbHJlYWR5IGV4aXN0cycgfSk7CiAgICAgICAgfQoKICAgICAgICB1c2VyID0gbmV3IFVzZXIoewogICAgICAgICAgICB1c2VybmFtZSwKICAgICAgICAgICAgZW1haWwsCiAgICAgICAgICAgIHBhc3N3b3JkLAogICAgICAgIH0pOwoKICAgICAgICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHQoMTApOwogICAgICAgIHVzZXIucGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaChwYXNzd29yZCwgc2FsdCk7CgogICAgICAgIGF3YWl0IHVzZXIuc2F2ZSgpOwoKICAgICAgICBjb25zdCBwYXlsb2FkID0gewogICAgICAgICAgICB1c2VyOiB7CiAgICAgICAgICAgICAgICBpZDogdXNlci5pZCwKICAgICAgICAgICAgfSwKICAgICAgICB9OwoKICAgICAgICBqd3Quc2lnbigKICAgICAgICAgICAgcGF5bG9hZCwKICAgICAgICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwKICAgICAgICAgICAgeyBleHBpcmVzSW46IDM2MDAwMCB9LAogICAgICAgICAgICAoZXJyLCB0b2tlbikgPT4gewogICAgICAgICAgICAgICAgaWYgKGVycikgdGhyb3cgZXJyOwogICAgICAgICAgICAgICAgcmVzLmpzb24oeyB0b2tlbiB9KTsKICAgICAgICAgICAgfQogICAgICAgICk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTsKICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCgnU2VydmVyIGVycm9yJyk7CiAgICB9Cn07"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const User = require('../models/User');
const bcrypt = require('bcryptjs');
const jwt = require('jsonwebtoken');

exports.register = async (req, res) =&gt; {
    const { username, email, password } = req.body;

    try {
        let user = await User.findOne({ email });
        if (user) {
            return res.status(400).json({ msg: 'User already exists' });
        }

        user = new User({
            username,
            email,
            password,
        });

        const salt = await bcrypt.genSalt(10);
        user.password = await bcrypt.hash(password, salt);

        await user.save();

        const payload = {
            user: {
                id: user.id,
            },
        };

        jwt.sign(
            payload,
            process.env.JWT_SECRET,
            { expiresIn: 360000 },
            (err, token) =&gt; {
                if (err) throw err;
                res.json({ token });
            }
        );
    } catch (err) {
        console.error(err.message);
        res.status(500).send('Server error');
    }
};</pre></div><div class='content'></div><h2><ol start="2">
<li>Login User</li>
</ol>
</h2>
<div class='content'><p>Add the login functionality in <code>authController.js</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXhwb3J0cy5sb2dpbiA9IGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgY29uc3QgeyBlbWFpbCwgcGFzc3dvcmQgfSA9IHJlcS5ib2R5OwoKICAgIHRyeSB7CiAgICAgICAgbGV0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoeyBlbWFpbCB9KTsKICAgICAgICBpZiAoIXVzZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbXNnOiAnSW52YWxpZCBDcmVkZW50aWFscycgfSk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBpc01hdGNoID0gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpOwogICAgICAgIGlmICghaXNNYXRjaCkgewogICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBtc2c6ICdJbnZhbGlkIENyZWRlbnRpYWxzJyB9KTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHBheWxvYWQgPSB7CiAgICAgICAgICAgIHVzZXI6IHsKICAgICAgICAgICAgICAgIGlkOiB1c2VyLmlkLAogICAgICAgICAgICB9LAogICAgICAgIH07CgogICAgICAgIGp3dC5zaWduKAogICAgICAgICAgICBwYXlsb2FkLAogICAgICAgICAgICBwcm9jZXNzLmVudi5KV1RfU0VDUkVULAogICAgICAgICAgICB7IGV4cGlyZXNJbjogMzYwMDAwIH0sCiAgICAgICAgICAgIChlcnIsIHRva2VuKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoZXJyKSB0aHJvdyBlcnI7CiAgICAgICAgICAgICAgICByZXMuanNvbih7IHRva2VuIH0pOwogICAgICAgICAgICB9CiAgICAgICAgKTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpOwogICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKCdTZXJ2ZXIgZXJyb3InKTsKICAgIH0KfTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>exports.login = async (req, res) =&gt; {
    const { email, password } = req.body;

    try {
        let user = await User.findOne({ email });
        if (!user) {
            return res.status(400).json({ msg: 'Invalid Credentials' });
        }

        const isMatch = await bcrypt.compare(password, user.password);
        if (!isMatch) {
            return res.status(400).json({ msg: 'Invalid Credentials' });
        }

        const payload = {
            user: {
                id: user.id,
            },
        };

        jwt.sign(
            payload,
            process.env.JWT_SECRET,
            { expiresIn: 360000 },
            (err, token) =&gt; {
                if (err) throw err;
                res.json({ token });
            }
        );
    } catch (err) {
        console.error(err.message);
        res.status(500).send('Server error');
    }
};</pre></div><div class='content'></div><h2><ol start="3">
<li>Authentication Middleware</li>
</ol>
</h2>
<div class='content'><p>Create <code>middleware/authMiddleware.js</code> to protect routes.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7Cgptb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkgewogICAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVyKCd4LWF1dGgtdG9rZW4nKTsKCiAgICBpZiAoIXRva2VuKSB7CiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbXNnOiAnTm8gdG9rZW4sIGF1dGhvcml6YXRpb24gZGVuaWVkJyB9KTsKICAgIH0KCiAgICB0cnkgewogICAgICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KHRva2VuLCBwcm9jZXNzLmVudi5KV1RfU0VDUkVUKTsKICAgICAgICByZXEudXNlciA9IGRlY29kZWQudXNlcjsKICAgICAgICBuZXh0KCk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1zZzogJ1Rva2VuIGlzIG5vdCB2YWxpZCcgfSk7CiAgICB9Cn07"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const jwt = require('jsonwebtoken');

module.exports = function (req, res, next) {
    const token = req.header('x-auth-token');

    if (!token) {
        return res.status(401).json({ msg: 'No token, authorization denied' });
    }

    try {
        const decoded = jwt.verify(token, process.env.JWT_SECRET);
        req.user = decoded.user;
        next();
    } catch (err) {
        res.status(401).json({ msg: 'Token is not valid' });
    }
};</pre></div><div class='content'></div><h2><ol start="4">
<li>Auth Routes</li>
</ol>
</h2>
<div class='content'><p>Create <code>routes/authRoutes.js</code> to handle authentication routes.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTsKY29uc3QgeyByZWdpc3RlciwgbG9naW4gfSA9IHJlcXVpcmUoJy4uL2NvbnRyb2xsZXJzL2F1dGhDb250cm9sbGVyJyk7Cgpyb3V0ZXIucG9zdCgnL3JlZ2lzdGVyJywgcmVnaXN0ZXIpOwpyb3V0ZXIucG9zdCgnL2xvZ2luJywgbG9naW4pOwoKbW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const express = require('express');
const router = express.Router();
const { register, login } = require('../controllers/authController');

router.post('/register', register);
router.post('/login', login);

module.exports = router;</pre></div><div class='content'></div><h1><p>Creating Blog Posts</p>
</h1>
<div class='content'></div><h2><ol>
<li>Create Post Controller</li>
</ol>
</h2>
<div class='content'><p>Create <code>controllers/postController.js</code> to handle creating posts.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgUG9zdCA9IHJlcXVpcmUoJy4uL21vZGVscy9Qb3N0Jyk7CgpleHBvcnRzLmNyZWF0ZVBvc3QgPSBhc3luYyAocmVxLCByZXMpID0+IHsKICAgIGNvbnN0IHsgdGl0bGUsIGJvZHkgfSA9IHJlcS5ib2R5OwoKICAgIHRyeSB7CiAgICAgICAgY29uc3QgbmV3UG9zdCA9IG5ldyBQb3N0KHsKICAgICAgICAgICAgdGl0bGUsCiAgICAgICAgICAgIGJvZHksCiAgICAgICAgICAgIGF1dGhvcjogcmVxLnVzZXIuaWQsCiAgICAgICAgfSk7CgogICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBuZXdQb3N0LnNhdmUoKTsKICAgICAgICByZXMuanNvbihwb3N0KTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpOwogICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKCdTZXJ2ZXIgZXJyb3InKTsKICAgIH0KfTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const Post = require('../models/Post');

exports.createPost = async (req, res) =&gt; {
    const { title, body } = req.body;

    try {
        const newPost = new Post({
            title,
            body,
            author: req.user.id,
        });

        const post = await newPost.save();
        res.json(post);
    } catch (err) {
        console.error(err.message);
        res.status(500).send('Server error');
    }
};</pre></div><div class='content'></div><h2><ol start="2">
<li>Post Routes</li>
</ol>
</h2>
<div class='content'><p>Create <code>routes/postRoutes.js</code> to handle post routes.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTsKY29uc3QgeyBjcmVhdGVQb3N0IH0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9wb3N0Q29udHJvbGxlcicpOwpjb25zdCBhdXRoID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZS9hdXRoTWlkZGxld2FyZScpOwoKcm91dGVyLnBvc3QoJy8nLCBhdXRoLCBjcmVhdGVQb3N0KTsKCm1vZHVsZS5leHBvcnRzID0gcm91dGVyOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const express = require('express');
const router = express.Router();
const { createPost } = require('../controllers/postController');
const auth = require('../middleware/authMiddleware');

router.post('/', auth, createPost);

module.exports = router;</pre></div><div class='content'></div><h1><p>Reading Blog Posts</p>
</h1>
<div class='content'></div><h2><ol>
<li>Get All Posts</li>
</ol>
</h2>
<div class='content'><p>Add functionality to get all posts in <code>postController.js</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXhwb3J0cy5nZXRBbGxQb3N0cyA9IGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgdHJ5IHsKICAgICAgICBjb25zdCBwb3N0cyA9IGF3YWl0IFBvc3QuZmluZCgpLnBvcHVsYXRlKCdhdXRob3InLCBbJ3VzZXJuYW1lJ10pOwogICAgICAgIHJlcy5qc29uKHBvc3RzKTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpOwogICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKCdTZXJ2ZXIgZXJyb3InKTsKICAgIH0KfTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>exports.getAllPosts = async (req, res) =&gt; {
    try {
        const posts = await Post.find().populate('author', ['username']);
        res.json(posts);
    } catch (err) {
        console.error(err.message);
        res.status(500).send('Server error');
    }
};</pre></div><div class='content'></div><h2><ol start="2">
<li>Get Single Post</li>
</ol>
</h2>
<div class='content'><p>Add functionality to get a single post by ID in <code>postController.js</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXhwb3J0cy5nZXRQb3N0QnlJZCA9IGFzeW5jIChyZXEsIHJlcykgPT4gewogICAgdHJ5IHsKICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdC5maW5kQnlJZChyZXEucGFyYW1zLmlkKS5wb3B1bGF0ZSgnYXV0aG9yJywgWyd1c2VybmFtZSddKTsKICAgICAgICBpZiAoIXBvc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbXNnOiAnUG9zdCBub3QgZm91bmQnIH0pOwogICAgICAgIH0KICAgICAgICByZXMuanNvbihwb3N0KTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpOwogICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKCdTZXJ2ZXIgZXJyb3InKTsKICAgIH0KfTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>exports.getPostById = async (req, res) =&gt; {
    try {
        const post = await Post.findById(req.params.id).populate('author', ['username']);
        if (!post) {
            return res.status(404).json({ msg: 'Post not found' });
        }
        res.json(post);
    } catch (err) {
        console.error(err.message);
        res.status(500).send('Server error');
    }
};</pre></div><div class='content'></div><h2><ol start="3">
<li>Update Post Routes</li>
</ol>
</h2>
<div class='content'><p>Update <code>routes/postRoutes.js</code> to include the new routes.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTsKY29uc3QgeyBjcmVhdGVQb3N0LCBnZXRBbGxQb3N0cywgZ2V0UG9zdEJ5SWQgfSA9IHJlcXVpcmUoJy4uL2NvbnRyb2xsZXJzL3Bvc3RDb250cm9sbGVyJyk7CmNvbnN0IGF1dGggPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2F1dGhNaWRkbGV3YXJlJyk7Cgpyb3V0ZXIucG9zdCgnLycsIGF1dGgsIGNyZWF0ZVBvc3QpOwpyb3V0ZXIuZ2V0KCcvJywgZ2V0QWxsUG9zdHMpOwpyb3V0ZXIuZ2V0KCcvOmlkJywgZ2V0UG9zdEJ5SWQpOwoKbW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const express = require('express');
const router = express.Router();
const { createPost, getAllPosts, getPostById } = require('../controllers/postController');
const auth = require('../middleware/authMiddleware');

router.post('/', auth, createPost);
router.get('/', getAllPosts);
router.get('/:id', getPostById);

module.exports = router;</pre></div><div class='content'></div><h1><p>Updating and Deleting Blog Posts</p>
</h1>
<div class='content'></div><h2><ol>
<li>Update Post</li>
</ol>
</h2>
<div class='content'><p>Add functionality to update a post in <code>postController.js</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXhwb3J0cy51cGRhdGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgICBjb25zdCB7IHRpdGxlLCBib2R5IH0gPSByZXEuYm9keTsKCiAgICB0cnkgewogICAgICAgIGxldCBwb3N0ID0gYXdhaXQgUG9zdC5maW5kQnlJZChyZXEucGFyYW1zLmlkKTsKICAgICAgICBpZiAoIXBvc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbXNnOiAnUG9zdCBub3QgZm91bmQnIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKHBvc3QuYXV0aG9yLnRvU3RyaW5nKCkgIT09IHJlcS51c2VyLmlkKSB7CiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1zZzogJ1VzZXIgbm90IGF1dGhvcml6ZWQnIH0pOwogICAgICAgIH0KCiAgICAgICAgcG9zdCA9IGF3YWl0IFBvc3QuZmluZEJ5SWRBbmRVcGRhdGUoCiAgICAgICAgICAgIHJlcS5wYXJhbXMuaWQsCiAgICAgICAgICAgIHsgJHNldDogeyB0aXRsZSwgYm9keSB9IH0sCiAgICAgICAgICAgIHsgbmV3OiB0cnVlIH0KICAgICAgICApOwoKICAgICAgICByZXMuanNvbihwb3N0KTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpOwogICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKCdTZXJ2ZXIgZXJyb3InKTsKICAgIH0KfTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>exports.updatePost = async (req, res) =&gt; {
    const { title, body } = req.body;

    try {
        let post = await Post.findById(req.params.id);
        if (!post) {
            return res.status(404).json({ msg: 'Post not found' });
        }

        if (post.author.toString() !== req.user.id) {
            return res.status(401).json({ msg: 'User not authorized' });
        }

        post = await Post.findByIdAndUpdate(
            req.params.id,
            { $set: { title, body } },
            { new: true }
        );

        res.json(post);
    } catch (err) {
        console.error(err.message);
        res.status(500).send('Server error');
    }
};</pre></div><div class='content'></div><h2><ol start="2">
<li>Delete Post</li>
</ol>
</h2>
<div class='content'><p>Add functionality to delete a post in <code>postController.js</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXhwb3J0cy5kZWxldGVQb3N0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgICB0cnkgewogICAgICAgIGNvbnN0IHBvc3QgPSBhd2FpdCBQb3N0LmZpbmRCeUlkKHJlcS5wYXJhbXMuaWQpOwogICAgICAgIGlmICghcG9zdCkgewogICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtc2c6ICdQb3N0IG5vdCBmb3VuZCcgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAocG9zdC5hdXRob3IudG9TdHJpbmcoKSAhPT0gcmVxLnVzZXIuaWQpIHsKICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbXNnOiAnVXNlciBub3QgYXV0aG9yaXplZCcgfSk7CiAgICAgICAgfQoKICAgICAgICBhd2FpdCBwb3N0LnJlbW92ZSgpOwogICAgICAgIHJlcy5qc29uKHsgbXNnOiAnUG9zdCByZW1vdmVkJyB9KTsKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpOwogICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKCdTZXJ2ZXIgZXJyb3InKTsKICAgIH0KfTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>exports.deletePost = async (req, res) =&gt; {
    try {
        const post = await Post.findById(req.params.id);
        if (!post) {
            return res.status(404).json({ msg: 'Post not found' });
        }

        if (post.author.toString() !== req.user.id) {
            return res.status(401).json({ msg: 'User not authorized' });
        }

        await post.remove();
        res.json({ msg: 'Post removed' });
    } catch (err) {
        console.error(err.message);
        res.status(500).send('Server error');
    }
};</pre></div><div class='content'></div><h2><ol start="3">
<li>Update Post Routes</li>
</ol>
</h2>
<div class='content'><p>Update <code>routes/postRoutes.js</code> to include the new routes.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTsKY29uc3QgeyBjcmVhdGVQb3N0LCBnZXRBbGxQb3N0cywgZ2V0UG9zdEJ5SWQsIHVwZGF0ZVBvc3QsIGRlbGV0ZVBvc3QgfSA9IHJlcXVpcmUoJy4uL2NvbnRyb2xsZXJzL3Bvc3RDb250cm9sbGVyJyk7CmNvbnN0IGF1dGggPSByZXF1aXJlKCcuLi9taWRkbGV3YXJlL2F1dGhNaWRkbGV3YXJlJyk7Cgpyb3V0ZXIucG9zdCgnLycsIGF1dGgsIGNyZWF0ZVBvc3QpOwpyb3V0ZXIuZ2V0KCcvJywgZ2V0QWxsUG9zdHMpOwpyb3V0ZXIuZ2V0KCcvOmlkJywgZ2V0UG9zdEJ5SWQpOwpyb3V0ZXIucHV0KCcvOmlkJywgYXV0aCwgdXBkYXRlUG9zdCk7CnJvdXRlci5kZWxldGUoJy86aWQnLCBhdXRoLCBkZWxldGVQb3N0KTsKCm1vZHVsZS5leHBvcnRzID0gcm91dGVyOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const express = require('express');
const router = express.Router();
const { createPost, getAllPosts, getPostById, updatePost, deletePost } = require('../controllers/postController');
const auth = require('../middleware/authMiddleware');

router.post('/', auth, createPost);
router.get('/', getAllPosts);
router.get('/:id', getPostById);
router.put('/:id', auth, updatePost);
router.delete('/:id', auth, deletePost);

module.exports = router;</pre></div><div class='content'></div><h1><p>Commenting System</p>
</h1>
<div class='content'></div><h2><ol>
<li>Create Comment Controller</li>
</ol>
</h2>
<div class='content'><p>Create <code>controllers/commentController.js</code> to handle comments.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgQ29tbWVudCA9IHJlcXVpcmUoJy4uL21vZGVscy9Db21tZW50Jyk7CmNvbnN0IFBvc3QgPSByZXF1aXJlKCcuLi9tb2RlbHMvUG9zdCcpOwoKZXhwb3J0cy5jcmVhdGVDb21tZW50ID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgICBjb25zdCB7IGJvZHkgfSA9IHJlcS5ib2R5OwoKICAgIHRyeSB7CiAgICAgICAgY29uc3QgcG9zdCA9IGF3YWl0IFBvc3QuZmluZEJ5SWQocmVxLnBhcmFtcy5wb3N0SWQpOwogICAgICAgIGlmICghcG9zdCkgewogICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBtc2c6ICdQb3N0IG5vdCBmb3VuZCcgfSk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBuZXdDb21tZW50ID0gbmV3IENvbW1lbnQoewogICAgICAgICAgICBib2R5LAogICAgICAgICAgICBhdXRob3I6IHJlcS51c2VyLmlkLAogICAgICAgICAgICBwb3N0OiByZXEucGFyYW1zLnBvc3RJZCwKICAgICAgICB9KTsKCiAgICAgICAgY29uc3QgY29tbWVudCA9IGF3YWl0IG5ld0NvbW1lbnQuc2F2ZSgpOwogICAgICAgIHJlcy5qc29uKGNvbW1lbnQpOwogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7CiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoJ1NlcnZlciBlcnJvcicpOwogICAgfQp9Ow=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const Comment = require('../models/Comment');
const Post = require('../models/Post');

exports.createComment = async (req, res) =&gt; {
    const { body } = req.body;

    try {
        const post = await Post.findById(req.params.postId);
        if (!post) {
            return res.status(404).json({ msg: 'Post not found' });
        }

        const newComment = new Comment({
            body,
            author: req.user.id,
            post: req.params.postId,
        });

        const comment = await newComment.save();
        res.json(comment);
    } catch (err) {
        console.error(err.message);
        res.status(500).send('Server error');
    }
};</pre></div><div class='content'></div><h2><ol start="2">
<li>Comment Routes</li>
</ol>
</h2>
<div class='content'><p>Create <code>routes/commentRoutes.js</code> to handle comment routes.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTsKY29uc3QgeyBjcmVhdGVDb21tZW50IH0gPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9jb21tZW50Q29udHJvbGxlcicpOwpjb25zdCBhdXRoID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZS9hdXRoTWlkZGxld2FyZScpOwoKcm91dGVyLnBvc3QoJy86cG9zdElkJywgYXV0aCwgY3JlYXRlQ29tbWVudCk7Cgptb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const express = require('express');
const router = express.Router();
const { createComment } = require('../controllers/commentController');
const auth = require('../middleware/authMiddleware');

router.post('/:postId', auth, createComment);

module.exports = router;</pre></div><div class='content'></div><h1><p>Deploying the Application</p>
</h1>
<div class='content'></div><h2><ol>
<li>Environment Variables</li>
</ol>
</h2>
<div class='content'><p>Create a <code>.env</code> file to store environment variables.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TU9OR09fVVJJPXlvdXJfbW9uZ29kYl9jb25uZWN0aW9uX3N0cmluZwpKV1RfU0VDUkVUPXlvdXJfand0X3NlY3JldApQT1JUPTUwMDA="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>MONGO_URI=your_mongodb_connection_string
JWT_SECRET=your_jwt_secret
PORT=5000</pre></div><div class='content'></div><h2><ol start="2">
<li>Using PM2 for Process Management</li>
</ol>
</h2>
<div class='content'><p>Install PM2 globally and use it to manage your application.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgLWcgcG0yCnBtMiBzdGFydCBhcHAuanM="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install -g pm2
pm2 start app.js</pre></div><div class='content'></div><h2><ol start="3">
<li>Deploying to Heroku</li>
</ol>
</h2>
<div class='content'><p>Follow the steps to deploy your application to Heroku.</p>
<ol>
<li>Create a new Heroku application.</li>
<li>Set up your environment variables on Heroku.</li>
<li>Push your code to Heroku.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aGVyb2t1IGNyZWF0ZQpoZXJva3UgY29uZmlnOnNldCBNT05HT19VUkk9eW91cl9tb25nb2RiX2Nvbm5lY3Rpb25fc3RyaW5nCmhlcm9rdSBjb25maWc6c2V0IEpXVF9TRUNSRVQ9eW91cl9qd3Rfc2VjcmV0CmdpdCBwdXNoIGhlcm9rdSBtYWlu"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>heroku create
heroku config:set MONGO_URI=your_mongodb_connection_string
heroku config:set JWT_SECRET=your_jwt_secret
git push heroku main</pre></div><div class='content'></div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this module, we have built a complete blogging platform using Node.js and Express.js. We covered user authentication, creating, reading, updating, and deleting blog posts, and adding a commenting system. We also learned how to deploy our application to Heroku. This project has provided a comprehensive overview of how to build a real-world application with Node.js.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='12-02-creating-ecommerce-api' title="Creating an E-commerce API">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='12-04-building-task-management' title="Building a Task Management Tool">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
