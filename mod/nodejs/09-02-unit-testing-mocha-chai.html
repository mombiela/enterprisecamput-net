<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    <title>Unit Testing with Mocha and Chai</title>

    <link rel="alternate" href="https://campusempresa.com/mod/nodejs/09-02-unit-testing-mocha-chai" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/nodejs/09-02-unit-testing-mocha-chai" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/nodejs/09-02-unit-testing-mocha-chai" hreflang="en" />
    
	<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"> -->
	<link href="/css/bootstrap/bootstrap.css?v=1" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.2b8e6213f8.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "nodejs";
  		var TEMA_NAME = "09-02";
  		var TYPE = "mod";
  		var PATH = "mod/nodejs/09-02-unit-testing-mocha-chai";
  		var IS_INDEX = false;
  		var DEVELOP = sessionStorage.getItem("DEVELOP") == "true";
  		  		var ALL_PAGES_MOD = ["01-01-what-is-nodejs","01-02-setting-up-nodejs","01-03-first-nodejs-program","01-04-nodejs-repl","02-01-nodejs-architecture","02-02-event-loop","02-03-callbacks-async","02-04-modules-require","03-01-reading-writing-files","03-02-working-with-streams","03-03-file-system-module","03-04-path-module","04-01-simple-http-server","04-02-handling-requests-responses","04-03-serving-static-files","04-04-routing","05-01-introduction-to-npm","05-02-installing-using-packages","05-03-creating-publishing-packages","05-04-semantic-versioning","06-01-introduction-to-express","06-02-setting-up-express","06-03-middleware","06-04-routing-express","06-05-error-handling","07-01-introduction-databases","07-02-mongodb-mongoose","07-03-sql-sequelize","07-04-crud-operations","08-01-introduction-authentication","08-02-using-passport","08-03-jwt-authentication","08-04-role-based-access","09-01-introduction-testing","09-02-unit-testing-mocha-chai","09-03-integration-testing","09-04-debugging-nodejs","10-01-cluster-module","10-02-worker-threads","10-03-performance-optimization","10-04-building-restful-apis","10-05-graphql-nodejs","11-01-environment-variables","11-02-using-pm2","11-03-deploying-heroku","11-04-ci-cd","12-01-building-chat-app","12-02-creating-ecommerce-api","12-03-developing-blogging-platform","12-04-building-task-management"];
  		  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<!-- <script type="text/javascript" src="/js/main.js"></script> -->
  	<script type="module" src="/js/app.198aab099d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/nodejs/09-02-unit-testing-mocha-chai" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/nodejs/09-02-unit-testing-mocha-chai" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my_modules" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/end_modules" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" style="display:none;" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="nodejs">
		<a  href="#" class="text-secondary d-none" data-read-mod="nodejs" data-read-unit="09-02" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="nodejs" data-unread-unit="09-02" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='09-01-introduction-testing' title="Introduction to Testing" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='09-01-introduction-testing' title="Introduction to Testing" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">Unit Testing with Mocha and Chai</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='09-03-integration-testing' title="Integration Testing" class="py-2 px-3 btn btn-primary"
				data-read-mod="nodejs" data-read-unit="09-02">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='09-03-integration-testing' title="Integration Testing" class="py-2 px-3 btn btn-primary" 
				data-read-mod="nodejs" data-read-unit="09-02">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Unit testing is a crucial part of software development that ensures individual components of your application work as expected. In this section, we will explore how to perform unit testing in Node.js using Mocha and Chai.</p>
</div><h1>What is Mocha?</h1>
<div class='content'><p>Mocha is a feature-rich JavaScript test framework running on Node.js, making asynchronous testing simple and fun. It provides a variety of features such as:</p>
<ul>
<li><strong>Descriptive Test Cases</strong>: Allows you to write test cases in a readable and organized manner.</li>
<li><strong>Asynchronous Testing</strong>: Supports asynchronous tests, making it suitable for testing Node.js applications.</li>
<li><strong>Hooks</strong>: Provides hooks like <code>before</code>, <code>after</code>, <code>beforeEach</code>, and <code>afterEach</code> to set up preconditions and clean up after tests.</li>
</ul>
</div><h1>What is Chai?</h1>
<div class='content'><p>Chai is a BDD/TDD assertion library for Node.js that can be paired with any JavaScript testing framework. It provides:</p>
<ul>
<li><strong>Assertions</strong>: Allows you to write assertions in a readable and expressive manner.</li>
<li><strong>Plugins</strong>: Supports various plugins to extend its functionality.</li>
<li><strong>Styles</strong>: Offers different assertion styles like <code>should</code>, <code>expect</code>, and <code>assert</code>.</li>
</ul>
</div><h1>Setting Up Mocha and Chai</h1>
<div class='content'></div><h2>Step 1: Install Mocha and Chai</h2>
<div class='content'><p>First, you need to install Mocha and Chai using npm. Run the following commands in your project directory:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgLS1zYXZlLWRldiBtb2NoYSBjaGFp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install --save-dev mocha chai</pre></div><div class='content'></div><h2>Step 2: Create a Test Directory</h2>
<div class='content'><p>Create a directory named <code>test</code> in your project root to store your test files:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bWtkaXIgdGVzdA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>mkdir test</pre></div><div class='content'></div><h2>Step 3: Write Your First Test</h2>
<div class='content'><p>Create a file named <code>test/sampleTest.js</code> and add the following code:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgeyBleHBlY3QgfSA9IHJlcXVpcmUoJ2NoYWknKTsKCmRlc2NyaWJlKCdBcnJheScsIGZ1bmN0aW9uKCkgewogIGRlc2NyaWJlKCcjaW5kZXhPZigpJywgZnVuY3Rpb24oKSB7CiAgICBpdCgnc2hvdWxkIHJldHVybiAtMSB3aGVuIHRoZSB2YWx1ZSBpcyBub3QgcHJlc2VudCcsIGZ1bmN0aW9uKCkgewogICAgICBleHBlY3QoWzEsIDIsIDNdLmluZGV4T2YoNCkpLnRvLmVxdWFsKC0xKTsKICAgIH0pOwogIH0pOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const { expect } = require('chai');

describe('Array', function() {
  describe('#indexOf()', function() {
    it('should return -1 when the value is not present', function() {
      expect([1, 2, 3].indexOf(4)).to.equal(-1);
    });
  });
});</pre></div><div class='content'></div><h2>Step 4: Run Your Tests</h2>
<div class='content'><p>Add a test script to your <code>package.json</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("InNjcmlwdHMiOiB7CiAgInRlc3QiOiAibW9jaGEiCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&quot;scripts&quot;: {
  &quot;test&quot;: &quot;mocha&quot;
}</pre></div><div class='content'><p>Now, run your tests using the following command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIHRlc3Q="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm test</pre></div><div class='content'><p>You should see output indicating that your test has passed.</p>
</div><h1>Writing More Complex Tests</h1>
<div class='content'></div><h2>Using Hooks</h2>
<div class='content'><p>Hooks allow you to run code before and after tests. Here’s an example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgeyBleHBlY3QgfSA9IHJlcXVpcmUoJ2NoYWknKTsKCmRlc2NyaWJlKCdBcnJheScsIGZ1bmN0aW9uKCkgewogIGxldCBhcnI7CgogIGJlZm9yZUVhY2goZnVuY3Rpb24oKSB7CiAgICBhcnIgPSBbMSwgMiwgM107CiAgfSk7CgogIGRlc2NyaWJlKCcjcHVzaCgpJywgZnVuY3Rpb24oKSB7CiAgICBpdCgnc2hvdWxkIGFkZCBhIHZhbHVlIHRvIHRoZSBlbmQgb2YgdGhlIGFycmF5JywgZnVuY3Rpb24oKSB7CiAgICAgIGFyci5wdXNoKDQpOwogICAgICBleHBlY3QoYXJyKS50by5oYXZlLmxlbmd0aE9mKDQpOwogICAgICBleHBlY3QoYXJyWzNdKS50by5lcXVhbCg0KTsKICAgIH0pOwogIH0pOwoKICBkZXNjcmliZSgnI3BvcCgpJywgZnVuY3Rpb24oKSB7CiAgICBpdCgnc2hvdWxkIHJlbW92ZSB0aGUgbGFzdCB2YWx1ZSBmcm9tIHRoZSBhcnJheScsIGZ1bmN0aW9uKCkgewogICAgICBhcnIucG9wKCk7CiAgICAgIGV4cGVjdChhcnIpLnRvLmhhdmUubGVuZ3RoT2YoMik7CiAgICAgIGV4cGVjdChhcnIpLnRvLm5vdC5pbmNsdWRlKDMpOwogICAgfSk7CiAgfSk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const { expect } = require('chai');

describe('Array', function() {
  let arr;

  beforeEach(function() {
    arr = [1, 2, 3];
  });

  describe('#push()', function() {
    it('should add a value to the end of the array', function() {
      arr.push(4);
      expect(arr).to.have.lengthOf(4);
      expect(arr[3]).to.equal(4);
    });
  });

  describe('#pop()', function() {
    it('should remove the last value from the array', function() {
      arr.pop();
      expect(arr).to.have.lengthOf(2);
      expect(arr).to.not.include(3);
    });
  });
});</pre></div><div class='content'></div><h2>Testing Asynchronous Code</h2>
<div class='content'><p>Mocha supports testing asynchronous code using callbacks, promises, or async/await. Here’s an example using async/await:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgeyBleHBlY3QgfSA9IHJlcXVpcmUoJ2NoYWknKTsKCmRlc2NyaWJlKCdBc3luYyBGdW5jdGlvbicsIGZ1bmN0aW9uKCkgewogIGl0KCdzaG91bGQgcmV0dXJuIGEgcmVzb2x2ZWQgcHJvbWlzZScsIGFzeW5jIGZ1bmN0aW9uKCkgewogICAgY29uc3QgYXN5bmNGdW5jdGlvbiA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgnSGVsbG8sIFdvcmxkIScpOwogICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXN5bmNGdW5jdGlvbigpOwogICAgZXhwZWN0KHJlc3VsdCkudG8uZXF1YWwoJ0hlbGxvLCBXb3JsZCEnKTsKICB9KTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const { expect } = require('chai');

describe('Async Function', function() {
  it('should return a resolved promise', async function() {
    const asyncFunction = () =&gt; Promise.resolve('Hello, World!');
    const result = await asyncFunction();
    expect(result).to.equal('Hello, World!');
  });
});</pre></div><div class='content'></div><h1>Practical Exercises</h1>
<div class='content'></div><h2>Exercise 1: Testing a Calculator Module</h2>
<div class='content'><p>Create a simple calculator module and write tests for its functions.</p>
<h4>Step 1: Create the Calculator Module</h4>
<p>Create a file named <code>calculator.js</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgQ2FsY3VsYXRvciB7CiAgYWRkKGEsIGIpIHsKICAgIHJldHVybiBhICsgYjsKICB9CgogIHN1YnRyYWN0KGEsIGIpIHsKICAgIHJldHVybiBhIC0gYjsKICB9CgogIG11bHRpcGx5KGEsIGIpIHsKICAgIHJldHVybiBhICogYjsKICB9CgogIGRpdmlkZShhLCBiKSB7CiAgICBpZiAoYiA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZGl2aWRlIGJ5IHplcm8nKTsKICAgIHJldHVybiBhIC8gYjsKICB9Cn0KCm1vZHVsZS5leHBvcnRzID0gQ2FsY3VsYXRvcjs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Calculator {
  add(a, b) {
    return a + b;
  }

  subtract(a, b) {
    return a - b;
  }

  multiply(a, b) {
    return a * b;
  }

  divide(a, b) {
    if (b === 0) throw new Error('Cannot divide by zero');
    return a / b;
  }
}

module.exports = Calculator;</pre></div><div class='content'><h4>Step 2: Write Tests for the Calculator Module</h4>
<p>Create a file named <code>test/calculatorTest.js</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgeyBleHBlY3QgfSA9IHJlcXVpcmUoJ2NoYWknKTsKY29uc3QgQ2FsY3VsYXRvciA9IHJlcXVpcmUoJy4uL2NhbGN1bGF0b3InKTsKCmRlc2NyaWJlKCdDYWxjdWxhdG9yJywgZnVuY3Rpb24oKSB7CiAgbGV0IGNhbGN1bGF0b3I7CgogIGJlZm9yZUVhY2goZnVuY3Rpb24oKSB7CiAgICBjYWxjdWxhdG9yID0gbmV3IENhbGN1bGF0b3IoKTsKICB9KTsKCiAgZGVzY3JpYmUoJyNhZGQoKScsIGZ1bmN0aW9uKCkgewogICAgaXQoJ3Nob3VsZCByZXR1cm4gdGhlIHN1bSBvZiB0d28gbnVtYmVycycsIGZ1bmN0aW9uKCkgewogICAgICBleHBlY3QoY2FsY3VsYXRvci5hZGQoMiwgMykpLnRvLmVxdWFsKDUpOwogICAgfSk7CiAgfSk7CgogIGRlc2NyaWJlKCcjc3VidHJhY3QoKScsIGZ1bmN0aW9uKCkgewogICAgaXQoJ3Nob3VsZCByZXR1cm4gdGhlIGRpZmZlcmVuY2Ugb2YgdHdvIG51bWJlcnMnLCBmdW5jdGlvbigpIHsKICAgICAgZXhwZWN0KGNhbGN1bGF0b3Iuc3VidHJhY3QoNSwgMykpLnRvLmVxdWFsKDIpOwogICAgfSk7CiAgfSk7CgogIGRlc2NyaWJlKCcjbXVsdGlwbHkoKScsIGZ1bmN0aW9uKCkgewogICAgaXQoJ3Nob3VsZCByZXR1cm4gdGhlIHByb2R1Y3Qgb2YgdHdvIG51bWJlcnMnLCBmdW5jdGlvbigpIHsKICAgICAgZXhwZWN0KGNhbGN1bGF0b3IubXVsdGlwbHkoMiwgMykpLnRvLmVxdWFsKDYpOwogICAgfSk7CiAgfSk7CgogIGRlc2NyaWJlKCcjZGl2aWRlKCknLCBmdW5jdGlvbigpIHsKICAgIGl0KCdzaG91bGQgcmV0dXJuIHRoZSBxdW90aWVudCBvZiB0d28gbnVtYmVycycsIGZ1bmN0aW9uKCkgewogICAgICBleHBlY3QoY2FsY3VsYXRvci5kaXZpZGUoNiwgMykpLnRvLmVxdWFsKDIpOwogICAgfSk7CgogICAgaXQoJ3Nob3VsZCB0aHJvdyBhbiBlcnJvciB3aGVuIGRpdmlkaW5nIGJ5IHplcm8nLCBmdW5jdGlvbigpIHsKICAgICAgZXhwZWN0KCgpID0+IGNhbGN1bGF0b3IuZGl2aWRlKDYsIDApKS50by50aHJvdygnQ2Fubm90IGRpdmlkZSBieSB6ZXJvJyk7CiAgICB9KTsKICB9KTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const { expect } = require('chai');
const Calculator = require('../calculator');

describe('Calculator', function() {
  let calculator;

  beforeEach(function() {
    calculator = new Calculator();
  });

  describe('#add()', function() {
    it('should return the sum of two numbers', function() {
      expect(calculator.add(2, 3)).to.equal(5);
    });
  });

  describe('#subtract()', function() {
    it('should return the difference of two numbers', function() {
      expect(calculator.subtract(5, 3)).to.equal(2);
    });
  });

  describe('#multiply()', function() {
    it('should return the product of two numbers', function() {
      expect(calculator.multiply(2, 3)).to.equal(6);
    });
  });

  describe('#divide()', function() {
    it('should return the quotient of two numbers', function() {
      expect(calculator.divide(6, 3)).to.equal(2);
    });

    it('should throw an error when dividing by zero', function() {
      expect(() =&gt; calculator.divide(6, 0)).to.throw('Cannot divide by zero');
    });
  });
});</pre></div><div class='content'></div><h2>Exercise 2: Testing Asynchronous Functions</h2>
<div class='content'><p>Create a module with an asynchronous function and write tests for it.</p>
<h4>Step 1: Create the Async Module</h4>
<p>Create a file named <code>asyncModule.js</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgQXN5bmNNb2R1bGUgewogIGFzeW5jIGZldGNoRGF0YSgpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICByZXNvbHZlKCdEYXRhIGZldGNoZWQnKTsKICAgICAgfSwgMTAwMCk7CiAgICB9KTsKICB9Cn0KCm1vZHVsZS5leHBvcnRzID0gQXN5bmNNb2R1bGU7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class AsyncModule {
  async fetchData() {
    return new Promise((resolve) =&gt; {
      setTimeout(() =&gt; {
        resolve('Data fetched');
      }, 1000);
    });
  }
}

module.exports = AsyncModule;</pre></div><div class='content'><h4>Step 2: Write Tests for the Async Module</h4>
<p>Create a file named <code>test/asyncModuleTest.js</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgeyBleHBlY3QgfSA9IHJlcXVpcmUoJ2NoYWknKTsKY29uc3QgQXN5bmNNb2R1bGUgPSByZXF1aXJlKCcuLi9hc3luY01vZHVsZScpOwoKZGVzY3JpYmUoJ0FzeW5jTW9kdWxlJywgZnVuY3Rpb24oKSB7CiAgbGV0IGFzeW5jTW9kdWxlOwoKICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCkgewogICAgYXN5bmNNb2R1bGUgPSBuZXcgQXN5bmNNb2R1bGUoKTsKICB9KTsKCiAgZGVzY3JpYmUoJyNmZXRjaERhdGEoKScsIGZ1bmN0aW9uKCkgewogICAgaXQoJ3Nob3VsZCByZXR1cm4gIkRhdGEgZmV0Y2hlZCIgYWZ0ZXIgMSBzZWNvbmQnLCBhc3luYyBmdW5jdGlvbigpIHsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXN5bmNNb2R1bGUuZmV0Y2hEYXRhKCk7CiAgICAgIGV4cGVjdChyZXN1bHQpLnRvLmVxdWFsKCdEYXRhIGZldGNoZWQnKTsKICAgIH0pOwogIH0pOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const { expect } = require('chai');
const AsyncModule = require('../asyncModule');

describe('AsyncModule', function() {
  let asyncModule;

  beforeEach(function() {
    asyncModule = new AsyncModule();
  });

  describe('#fetchData()', function() {
    it('should return &quot;Data fetched&quot; after 1 second', async function() {
      const result = await asyncModule.fetchData();
      expect(result).to.equal('Data fetched');
    });
  });
});</pre></div><div class='content'></div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Forgetting to Return Promises</strong>: When testing asynchronous code, ensure you return the promise or use async/await.</li>
<li><strong>Not Using Hooks Properly</strong>: Use hooks like <code>beforeEach</code> to set up the state before each test to avoid code duplication.</li>
<li><strong>Ignoring Edge Cases</strong>: Always test edge cases, such as dividing by zero or handling null values.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, you learned how to set up and use Mocha and Chai for unit testing in Node.js. You wrote tests for both synchronous and asynchronous functions and explored the use of hooks to manage test state. By practicing with the provided exercises, you should now be comfortable writing and running unit tests for your Node.js applications.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='09-01-introduction-testing' title="Introduction to Testing" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='09-01-introduction-testing' title="Introduction to Testing" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='09-03-integration-testing' title="Integration Testing" class="py-2 px-3 btn btn-primary"
				data-read-mod="nodejs" data-read-unit="09-02">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='09-03-integration-testing' title="Integration Testing" class="py-2 px-3 btn btn-primary" 
				data-read-mod="nodejs" data-read-unit="09-02">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			
	<div class="container mt-2 d-none d-md-block index">
		<h1>Node.js Course</h1>
<h2>Module 1: Introduction to Node.js</h2>
<ul>
<li><a href="01-01-what-is-nodejs">What is Node.js?</a></li>
<li><a href="01-02-setting-up-nodejs">Setting Up Node.js</a></li>
<li><a href="01-03-first-nodejs-program">Your First Node.js Program</a></li>
<li><a href="01-04-nodejs-repl">Node.js REPL</a></li>
</ul>
<h2>Module 2: Core Concepts</h2>
<ul>
<li><a href="02-01-nodejs-architecture">Node.js Architecture</a></li>
<li><a href="02-02-event-loop">Event Loop</a></li>
<li><a href="02-03-callbacks-async">Callbacks and Asynchronous Programming</a></li>
<li><a href="02-04-modules-require">Modules and require()</a></li>
</ul>
<h2>Module 3: File System and I/O</h2>
<ul>
<li><a href="03-01-reading-writing-files">Reading and Writing Files</a></li>
<li><a href="03-02-working-with-streams">Working with Streams</a></li>
<li><a href="03-03-file-system-module">File System Module</a></li>
<li><a href="03-04-path-module">Path Module</a></li>
</ul>
<h2>Module 4: HTTP and Web Servers</h2>
<ul>
<li><a href="04-01-simple-http-server">Creating a Simple HTTP Server</a></li>
<li><a href="04-02-handling-requests-responses">Handling Requests and Responses</a></li>
<li><a href="04-03-serving-static-files">Serving Static Files</a></li>
<li><a href="04-04-routing">Routing</a></li>
</ul>
<h2>Module 5: NPM and Package Management</h2>
<ul>
<li><a href="05-01-introduction-to-npm">Introduction to NPM</a></li>
<li><a href="05-02-installing-using-packages">Installing and Using Packages</a></li>
<li><a href="05-03-creating-publishing-packages">Creating and Publishing Packages</a></li>
<li><a href="05-04-semantic-versioning">Semantic Versioning</a></li>
</ul>
<h2>Module 6: Express.js Framework</h2>
<ul>
<li><a href="06-01-introduction-to-express">Introduction to Express.js</a></li>
<li><a href="06-02-setting-up-express">Setting Up an Express Application</a></li>
<li><a href="06-03-middleware">Middleware</a></li>
<li><a href="06-04-routing-express">Routing in Express</a></li>
<li><a href="06-05-error-handling">Error Handling</a></li>
</ul>
<h2>Module 7: Databases and ORMs</h2>
<ul>
<li><a href="07-01-introduction-databases">Introduction to Databases</a></li>
<li><a href="07-02-mongodb-mongoose">Using MongoDB with Mongoose</a></li>
<li><a href="07-03-sql-sequelize">Using SQL Databases with Sequelize</a></li>
<li><a href="07-04-crud-operations">CRUD Operations</a></li>
</ul>
<h2>Module 8: Authentication and Authorization</h2>
<ul>
<li><a href="08-01-introduction-authentication">Introduction to Authentication</a></li>
<li><a href="08-02-using-passport">Using Passport.js</a></li>
<li><a href="08-03-jwt-authentication">JWT Authentication</a></li>
<li><a href="08-04-role-based-access">Role-Based Access Control</a></li>
</ul>
<h2>Module 9: Testing and Debugging</h2>
<ul>
<li><a href="09-01-introduction-testing">Introduction to Testing</a></li>
<li><a href="09-02-unit-testing-mocha-chai">Unit Testing with Mocha and Chai</a></li>
<li><a href="09-03-integration-testing">Integration Testing</a></li>
<li><a href="09-04-debugging-nodejs">Debugging Node.js Applications</a></li>
</ul>
<h2>Module 10: Advanced Topics</h2>
<ul>
<li><a href="10-01-cluster-module">Cluster Module</a></li>
<li><a href="10-02-worker-threads">Worker Threads</a></li>
<li><a href="10-03-performance-optimization">Performance Optimization</a></li>
<li><a href="10-04-building-restful-apis">Building RESTful APIs</a></li>
<li><a href="10-05-graphql-nodejs">GraphQL with Node.js</a></li>
</ul>
<h2>Module 11: Deployment and DevOps</h2>
<ul>
<li><a href="11-01-environment-variables">Environment Variables</a></li>
<li><a href="11-02-using-pm2">Using PM2 for Process Management</a></li>
<li><a href="11-03-deploying-heroku">Deploying to Heroku</a></li>
<li><a href="11-04-ci-cd">Continuous Integration and Deployment</a></li>
</ul>
<h2>Module 12: Real-World Projects</h2>
<ul>
<li><a href="12-01-building-chat-app">Building a Chat Application</a></li>
<li><a href="12-02-creating-ecommerce-api">Creating an E-commerce API</a></li>
<li><a href="12-03-developing-blogging-platform">Developing a Blogging Platform</a></li>
<li><a href="12-04-building-task-management">Building a Task Management Tool</a></li>
</ul>

	</div>










			<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<p id="loginModalEmail"></p>
            	<div id="mensaje" class="d-none alert alert-danger"></div>
            	<div id="mensaje_info" class="d-none alert alert-success"></div>
            	
            	<div id="modal-body-main">
					<div class="mt-4 d-none" id="forgotPasswordSection">
						<div class="mb-3">
    <label for="recovery-email" class="form-label">Email</label>
    <input type="email" required class="form-control" id="recovery-email" placeholder="Enter your email">
</div>
<button class="btn btn-primary" id="btnRecover">Send recovery link</button>

					</div>
									
					<div class="mt-4 d-none" id="deleteUserSection">	
						<div class="mb-3 alert alert-danger">
	Warning! You are about to delete all registration and progress data.<br><b>This action cannot be undone.</b>
</div>
<div class="mb-3">
    <input type="password" required class="form-control" id="delete-user-pwd" placeholder="Enter your password">
</div>
<button class="btn btn-primary" id="btnDeleteUser">Delete user</button>

					</div>
					
					<div class="mt-4 d-none" id="changePassordSection">
						<div class="mb-3 row">
	<div class="col col-12 my-2">
	    <input type="password" required class="form-control" id="change-pwd-actual" placeholder="Enter current password">
	</div>
	<div class="col col-12 my-2">
    	<input type="password" required class="form-control" id="change-pwd-new-1" placeholder="Enter new password">
	</div>
	<div class="col col-12 my-2">
    	<input type="password" required class="form-control" id="change-pwd-new-2" placeholder="Repeat new password">
	</div>
</div>
<button class="btn btn-primary" id="btnChangePassword">Change password</button>

					</div>
					
					<div class="mt-4 d-none alert alert-warning" id="verifyPasswordSection">
						<p><b>Falta verificar correu</b></p>
						<a id="btnVerifyEmail" href="#">Send verification link</a>

					</div>
					
					<div class="mt-4 d-none" id="disconnectUserSection">
						<div class="mb-3">
    <button id="btnDisconnect" class="btn btn-primary">Disconnect</button>
</div>

<hr>

<div class="mt-3">
    <button class="btn btn-outline-secondary" id="change-password-link">Change password</button>
</div>

<div class="mt-3">
    <a href="#" id="delete-user-link">Delete user</a>
</div>

					</div>
	            
	            	<div class="mt-4 d-none" id="modalTabsSection">
	            		<ul class="nav nav-tabs" id="authTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button" role="tab" aria-controls="login" aria-selected="true">
        	Log in
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register" type="button" role="tab" aria-controls="register" aria-selected="false">
        	Sign up
        </button>
    </li>
</ul>

<div class="tab-content mt-3" id="authTabsContent">
    <div class="tab-pane fade show active" id="login" role="tabpanel" aria-labelledby="login-tab">
    	<div class="mb-3">
    <label for="login-username" class="form-label">Email</label>
    <input type="email" required class="form-control" id="login-username" placeholder="Enter your email">
</div>
<div class="mb-3">
    <label for="login-password" class="form-label">Password</label>
    <input type="password"  required class="form-control" id="login-password" placeholder="Enter your password">
</div>
<button class="btn btn-primary" id="btnLogin">Log in</button>
<div class="mt-3">
    <a href="#" id="forgot-password-link">Have you forgotten your password?</a>
</div>
    </div>

    <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
    	<div class="mb-3">
    <label for="register-email" class="form-label">Email</label>
    <input type="email" class="form-control" id="register-email" required placeholder="Enter your email">
</div>

<div class="mb-3">
    <label for="register-password" class="form-label">Password</label>
    <input type="password" class="form-control"  required id="register-password" placeholder="Enter your password">
</div>

<div class="mb-3">
    <label for="register-name" class="form-label">Name</label>
    <input type="text" class="form-control"  required id="register-name" placeholder="Enter your name">
</div>

<div class="form-check mb-3">
    <input type="checkbox" class="form-check-input" id="accept-conditions-reg">
    <label for="accept-conditions-reg" class="form-check-label">
        I have read and accept the <a href="/privacity" target="blank">Privacy Policy</a> and the <a href="/licence" target="blank">Terms and Conditions of Use</a>.
    </label>
</div>

<div class="form-check mb-3">
    <input type="checkbox" class="form-check-input" id="accept-allow_comunications">
    <label for="accept-allow_comunications" class="form-check-label">
        I wish to receive news and updates about courses (optional).
    </label>
</div>

<button id="btnRegister" class="btn btn-primary">Sign up</button>
    </div>
</div>
	            	</div>
            	</div>
            </div>
        </div>
    </div>
</div>

	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
