<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NGINX Configuration File Structure</title>

    <link rel="alternate" href="https://campusempresa.com/mod/nginx/nginx-configuration-file-structure" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/nginx/nginx-configuration-file-structure" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/nginx/nginx-configuration-file-structure" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/nginx/nginx-configuration-file-structure" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/nginx/nginx-configuration-file-structure" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='nginx-architecture'>&#x25C4;Understanding NGINX Architecture</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">NGINX Configuration File Structure</a>
	</div>
	<div class='col-4 text-end'>
					<a href='directives-and-contexts'>Directives and Contexts &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>NGINX is a powerful web server and reverse proxy server that is widely used for its performance and scalability. Understanding the structure of the NGINX configuration file is crucial for effectively managing and optimizing your server. This section will guide you through the basics of the NGINX configuration file structure, from beginner to advanced concepts.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Directives</strong>: Instructions that define the behavior of NGINX.</li>
<li><strong>Contexts</strong>: Scopes within the configuration file where directives are valid.</li>
<li><strong>Blocks</strong>: Groupings of directives enclosed in curly braces <code>{}</code>.</li>
<li><strong>Inheritance</strong>: How directives in different contexts relate to each other.</li>
</ul>
</div><h1>Basic Structure</h1>
<div class='content'><p>The NGINX configuration file is typically located at <code>/etc/nginx/nginx.conf</code>. The basic structure includes the following contexts:</p>
<ul>
<li><strong>Main Context</strong>: The global scope for directives that affect the entire server.</li>
<li><strong>Events Context</strong>: Defines settings related to connection processing.</li>
<li><strong>HTTP Context</strong>: Contains configurations for handling HTTP requests.</li>
<li><strong>Server Context</strong>: Defines settings for a specific virtual server.</li>
<li><strong>Location Context</strong>: Specifies how to process requests for specific URIs.</li>
</ul>
</div><h2>Example Configuration</h2>
<div class='content'><p>Here is a simple example of an NGINX configuration file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBNYWluIENvbnRleHQKdXNlciB3d3ctZGF0YTsKd29ya2VyX3Byb2Nlc3NlcyBhdXRvOwpwaWQgL3J1bi9uZ2lueC5waWQ7CgojIEV2ZW50cyBDb250ZXh0CmV2ZW50cyB7CiAgICB3b3JrZXJfY29ubmVjdGlvbnMgMTAyNDsKfQoKIyBIVFRQIENvbnRleHQKaHR0cCB7CiAgICBzZW5kZmlsZSBvbjsKICAgIHRjcF9ub3B1c2ggb247CiAgICB0Y3Bfbm9kZWxheSBvbjsKICAgIGtlZXBhbGl2ZV90aW1lb3V0IDY1OwogICAgdHlwZXNfaGFzaF9tYXhfc2l6ZSAyMDQ4OwoKICAgIGluY2x1ZGUgL2V0Yy9uZ2lueC9taW1lLnR5cGVzOwogICAgZGVmYXVsdF90eXBlIGFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTsKCiAgICAjIFNlcnZlciBDb250ZXh0CiAgICBzZXJ2ZXIgewogICAgICAgIGxpc3RlbiA4MDsKICAgICAgICBzZXJ2ZXJfbmFtZSBleGFtcGxlLmNvbTsKCiAgICAgICAgIyBMb2NhdGlvbiBDb250ZXh0CiAgICAgICAgbG9jYXRpb24gLyB7CiAgICAgICAgICAgIHJvb3QgL3Zhci93d3cvaHRtbDsKICAgICAgICAgICAgaW5kZXggaW5kZXguaHRtbCBpbmRleC5odG07CiAgICAgICAgfQoKICAgICAgICBsb2NhdGlvbiAvaW1hZ2VzLyB7CiAgICAgICAgICAgIHJvb3QgL2RhdGE7CiAgICAgICAgfQogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Main Context
user www-data;
worker_processes auto;
pid /run/nginx.pid;

# Events Context
events {
    worker_connections 1024;
}

# HTTP Context
http {
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    # Server Context
    server {
        listen 80;
        server_name example.com;

        # Location Context
        location / {
            root /var/www/html;
            index index.html index.htm;
        }

        location /images/ {
            root /data;
        }
    }
}</pre></div><div class='content'></div><h1>Detailed Explanation</h1>
<h2>Main Context</h2>
<div class='content'><ul>
<li><strong>user</strong>: Defines the user and group that the NGINX worker processes will run as.</li>
<li><strong>worker_processes</strong>: Specifies the number of worker processes.</li>
<li><strong>pid</strong>: Sets the file where the process ID of the master process is stored.</li>
</ul>
</div><h2>Events Context</h2>
<div class='content'><ul>
<li><strong>worker_connections</strong>: Limits the number of simultaneous connections that can be handled by a worker process.</li>
</ul>
</div><h2>HTTP Context</h2>
<div class='content'><ul>
<li><strong>sendfile</strong>: Enables or disables the use of <code>sendfile()</code> for file transfers.</li>
<li><strong>tcp_nopush</strong>: Controls the use of TCP_CORK.</li>
<li><strong>tcp_nodelay</strong>: Controls the use of the TCP_NODELAY option.</li>
<li><strong>keepalive_timeout</strong>: Sets the timeout for keep-alive connections.</li>
<li><strong>types_hash_max_size</strong>: Sets the maximum size of the types hash tables.</li>
<li><strong>include</strong>: Includes additional configuration files.</li>
<li><strong>default_type</strong>: Sets the default MIME type for files.</li>
</ul>
</div><h2>Server Context</h2>
<div class='content'><ul>
<li><strong>listen</strong>: Specifies the port and address that the server will listen on.</li>
<li><strong>server_name</strong>: Defines the domain names that the server will respond to.</li>
</ul>
</div><h2>Location Context</h2>
<div class='content'><ul>
<li><strong>root</strong>: Sets the root directory for requests.</li>
<li><strong>index</strong>: Specifies the index files for directories.</li>
</ul>
</div><h1>Advanced Concepts</h1>
<h2>Inheritance</h2>
<div class='content'><p>Directives in nested contexts inherit values from their parent contexts unless explicitly overridden. For example, a <code>location</code> block will inherit settings from its parent <code>server</code> block.</p>
</div><h2>Conditional Configuration</h2>
<div class='content'><p>You can use conditional statements to apply configurations based on specific conditions, such as the value of a variable or the presence of a file.</p>
</div><h2>Example of Conditional Configuration</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmVyIHsKICAgIGxpc3RlbiA4MDsKICAgIHNlcnZlcl9uYW1lIGV4YW1wbGUuY29tOwoKICAgIGxvY2F0aW9uIC8gewogICAgICAgIGlmICgkcmVxdWVzdF9tZXRob2QgPSBQT1NUKSB7CiAgICAgICAgICAgIHJldHVybiA0MDU7CiAgICAgICAgfQogICAgICAgIHJvb3QgL3Zhci93d3cvaHRtbDsKICAgICAgICBpbmRleCBpbmRleC5odG1sIGluZGV4Lmh0bTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>server {
    listen 80;
    server_name example.com;

    location / {
        if ($request_method = POST) {
            return 405;
        }
        root /var/www/html;
        index index.html index.htm;
    }
}</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Understanding the structure of the NGINX configuration file is essential for effectively managing your web server. By mastering the use of contexts, directives, and inheritance, you can create powerful and flexible configurations that meet your specific needs. As you progress from basic to advanced concepts, you'll be able to optimize your server for performance, security, and scalability.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='nginx-architecture'>&#x25C4;Understanding NGINX Architecture</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">NGINX Configuration File Structure</a>
	</div>
	<div class='col-4 text-end'>
					<a href='directives-and-contexts'>Directives and Contexts &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
