<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case Study: NGINX as a Load Balancer</title>

    <link rel="alternate" href="https://campusempresa.com/mod/nginx/case-study-load-balancer" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/nginx/case-study-load-balancer" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/nginx/case-study-load-balancer" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/nginx/case-study-load-balancer" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/nginx/case-study-load-balancer" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='best-practices-for-production'>&#x25C4;Best Practices for Production</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Case Study: NGINX as a Load Balancer</a>
	</div>
	<div class='col-4 text-end'>
					<a href='case-study-microservices'>Case Study: NGINX in Microservices &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In this section, we will explore how NGINX can be used as a load balancer. Load balancing is a critical aspect of modern web applications, ensuring high availability and reliability by distributing incoming traffic across multiple servers.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Load Balancing</strong>: The process of distributing network or application traffic across multiple servers.</li>
<li><strong>NGINX</strong>: A high-performance HTTP server and reverse proxy, as well as an IMAP/POP3 proxy server.</li>
<li><strong>Reverse Proxy</strong>: A type of proxy server that retrieves resources on behalf of a client from one or more servers.</li>
</ul>
</div><h1>Types of Load Balancing in NGINX</h1>
<div class='content'><p>NGINX supports several load balancing methods:</p>
<ul>
<li><strong>Round Robin</strong>: Distributes requests evenly across all servers.</li>
<li><strong>Least Connections</strong>: Sends requests to the server with the fewest active connections.</li>
<li><strong>IP Hash</strong>: Distributes requests based on the client's IP address.</li>
</ul>
</div><h1>Configuration Example: Round Robin Load Balancing</h1>
<div class='content'><p>Let's start with a basic example of setting up NGINX as a load balancer using the Round Robin method.</p>
</div><h2>Step 1: Install NGINX</h2>
<div class='content'><p>First, ensure that NGINX is installed on your system. You can install it using the following commands:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBGb3IgRGViaWFuL1VidW50dQpzdWRvIGFwdCB1cGRhdGUKc3VkbyBhcHQgaW5zdGFsbCBuZ2lueAoKIyBGb3IgQ2VudE9TL1JIRUwKc3VkbyB5dW0gaW5zdGFsbCBlcGVsLXJlbGVhc2UKc3VkbyB5dW0gaW5zdGFsbCBuZ2lueA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># For Debian/Ubuntu
sudo apt update
sudo apt install nginx

# For CentOS/RHEL
sudo yum install epel-release
sudo yum install nginx</pre></div><div class='content'></div><h2>Step 2: Configure NGINX</h2>
<div class='content'><p>Edit the NGINX configuration file to set up load balancing. The configuration file is typically located at <code>/etc/nginx/nginx.conf</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICB1cHN0cmVhbSBiYWNrZW5kIHsKICAgICAgICBzZXJ2ZXIgYmFja2VuZDEuZXhhbXBsZS5jb207CiAgICAgICAgc2VydmVyIGJhY2tlbmQyLmV4YW1wbGUuY29tOwogICAgICAgIHNlcnZlciBiYWNrZW5kMy5leGFtcGxlLmNvbTsKICAgIH0KCiAgICBzZXJ2ZXIgewogICAgICAgIGxpc3RlbiA4MDsKCiAgICAgICAgbG9jYXRpb24gLyB7CiAgICAgICAgICAgIHByb3h5X3Bhc3MgaHR0cDovL2JhY2tlbmQ7CiAgICAgICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICAgICAgcHJveHlfc2V0X2hlYWRlciBYLVJlYWwtSVAgJHJlbW90ZV9hZGRyOwogICAgICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLUZvciAkcHJveHlfYWRkX3hfZm9yd2FyZGVkX2ZvcjsKICAgICAgICAgICAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Qcm90byAkc2NoZW1lOwogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    upstream backend {
        server backend1.example.com;
        server backend2.example.com;
        server backend3.example.com;
    }

    server {
        listen 80;

        location / {
            proxy_pass http://backend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>upstream backend</strong>: Defines a group of servers (backend1, backend2, backend3) that NGINX will distribute requests to.</li>
<li><strong>proxy_pass</strong>: Forwards requests to the defined upstream group.</li>
<li><strong>proxy_set_header</strong>: Sets various headers to pass along with the request.</li>
</ul>
</div><h2>Step 3: Restart NGINX</h2>
<div class='content'><p>After making the configuration changes, restart NGINX to apply them.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBzeXN0ZW1jdGwgcmVzdGFydCBuZ2lueA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo systemctl restart nginx</pre></div><div class='content'></div><h1>Advanced Configuration: Least Connections Load Balancing</h1>
<div class='content'><p>For more advanced load balancing, you can use the Least Connections method. This method sends requests to the server with the fewest active connections.</p>
</div><h2>Configuration Example</h2>
<div class='content'><p>Modify the <code>upstream</code> block to use the <code>least_conn</code> directive.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICB1cHN0cmVhbSBiYWNrZW5kIHsKICAgICAgICBsZWFzdF9jb25uOwogICAgICAgIHNlcnZlciBiYWNrZW5kMS5leGFtcGxlLmNvbTsKICAgICAgICBzZXJ2ZXIgYmFja2VuZDIuZXhhbXBsZS5jb207CiAgICAgICAgc2VydmVyIGJhY2tlbmQzLmV4YW1wbGUuY29tOwogICAgfQoKICAgIHNlcnZlciB7CiAgICAgICAgbGlzdGVuIDgwOwoKICAgICAgICBsb2NhdGlvbiAvIHsKICAgICAgICAgICAgcHJveHlfcGFzcyBodHRwOi8vYmFja2VuZDsKICAgICAgICAgICAgcHJveHlfc2V0X2hlYWRlciBIb3N0ICRob3N0OwogICAgICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFgtUmVhbC1JUCAkcmVtb3RlX2FkZHI7CiAgICAgICAgICAgIHByb3h5X3NldF9oZWFkZXIgWC1Gb3J3YXJkZWQtRm9yICRwcm94eV9hZGRfeF9mb3J3YXJkZWRfZm9yOwogICAgICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLVByb3RvICRzY2hlbWU7CiAgICAgICAgfQogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    upstream backend {
        least_conn;
        server backend1.example.com;
        server backend2.example.com;
        server backend3.example.com;
    }

    server {
        listen 80;

        location / {
            proxy_pass http://backend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>least_conn</strong>: Instructs NGINX to use the Least Connections load balancing method.</li>
</ul>
</div><h1>Monitoring and Health Checks</h1>
<div class='content'><p>To ensure that your load balancer is distributing traffic to healthy servers, you can configure health checks.</p>
</div><h2>Configuration Example</h2>
<div class='content'><p>Add the <code>health_check</code> directive within the <code>upstream</code> block.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICB1cHN0cmVhbSBiYWNrZW5kIHsKICAgICAgICBsZWFzdF9jb25uOwogICAgICAgIHNlcnZlciBiYWNrZW5kMS5leGFtcGxlLmNvbTsKICAgICAgICBzZXJ2ZXIgYmFja2VuZDIuZXhhbXBsZS5jb207CiAgICAgICAgc2VydmVyIGJhY2tlbmQzLmV4YW1wbGUuY29tOwogICAgICAgIGhlYWx0aF9jaGVjazsKICAgIH0KCiAgICBzZXJ2ZXIgewogICAgICAgIGxpc3RlbiA4MDsKCiAgICAgICAgbG9jYXRpb24gLyB7CiAgICAgICAgICAgIHByb3h5X3Bhc3MgaHR0cDovL2JhY2tlbmQ7CiAgICAgICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICAgICAgcHJveHlfc2V0X2hlYWRlciBYLVJlYWwtSVAgJHJlbW90ZV9hZGRyOwogICAgICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLUZvciAkcHJveHlfYWRkX3hfZm9yd2FyZGVkX2ZvcjsKICAgICAgICAgICAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Qcm90byAkc2NoZW1lOwogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    upstream backend {
        least_conn;
        server backend1.example.com;
        server backend2.example.com;
        server backend3.example.com;
        health_check;
    }

    server {
        listen 80;

        location / {
            proxy_pass http://backend;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>health_check</strong>: Enables health checks for the upstream servers.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this case study, we have covered the basics of setting up NGINX as a load balancer using different methods such as Round Robin and Least Connections. We also touched on the importance of monitoring and health checks to ensure the reliability of your load balancer. By understanding these concepts and configurations, you can effectively distribute traffic and maintain high availability for your web applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='best-practices-for-production'>&#x25C4;Best Practices for Production</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Case Study: NGINX as a Load Balancer</a>
	</div>
	<div class='col-4 text-end'>
					<a href='case-study-microservices'>Case Study: NGINX in Microservices &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
