<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Tuning</title>

    <link rel="alternate" href="https://campusempresa.com/mod/mongodb/06-01-performance-tuning" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/mongodb/06-01-performance-tuning" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/mongodb/06-01-performance-tuning" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/mongodb/06-01-performance-tuning" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/mongodb/06-01-performance-tuning" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-04-mongodb-atlas' title="MongoDB Atlas">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Performance Tuning</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-backup-and-restore' title="Backup and Restore">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Performance tuning in MongoDB is crucial for ensuring that your database operates efficiently and can handle the demands of your application. This section will cover various strategies and best practices for optimizing MongoDB performance.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Indexes</strong>: Proper indexing can significantly improve query performance.</li>
<li><strong>Query Optimization</strong>: Writing efficient queries to minimize resource usage.</li>
<li><strong>Sharding</strong>: Distributing data across multiple servers to balance the load.</li>
<li><strong>Hardware Considerations</strong>: Ensuring your hardware is adequate for your workload.</li>
<li><strong>Configuration Settings</strong>: Tuning MongoDB configuration for optimal performance.</li>
</ol>
</div><h1>Indexes</h1>
<div class='content'><p>Indexes are one of the most effective ways to improve query performance. They allow MongoDB to quickly locate and access the data without scanning the entire collection.</p>
</div><h2>Creating Indexes</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ3JlYXRlIGFuIGluZGV4IG9uIHRoZSAnbmFtZScgZmllbGQKZGIuY29sbGVjdGlvbi5jcmVhdGVJbmRleCh7IG5hbWU6IDEgfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Create an index on the 'name' field
db.collection.createIndex({ name: 1 });</pre></div><div class='content'></div><h2>Types of Indexes</h2>
<div class='content'><ul>
<li><strong>Single Field Index</strong>: Indexes a single field.</li>
<li><strong>Compound Index</strong>: Indexes multiple fields.</li>
<li><strong>Multikey Index</strong>: Indexes array fields.</li>
<li><strong>Text Index</strong>: Supports text search queries.</li>
<li><strong>Geospatial Index</strong>: Supports geospatial queries.</li>
</ul>
</div><h2>Practical Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ3JlYXRlIGEgY29tcG91bmQgaW5kZXggb24gJ25hbWUnIGFuZCAnYWdlJwpkYi5jb2xsZWN0aW9uLmNyZWF0ZUluZGV4KHsgbmFtZTogMSwgYWdlOiAtMSB9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Create a compound index on 'name' and 'age'
db.collection.createIndex({ name: 1, age: -1 });</pre></div><div class='content'></div><h2>Exercise</h2>
<div class='content'><ol>
<li>Create an index on the <code>email</code> field of a <code>users</code> collection.</li>
<li>Create a compound index on the <code>firstName</code> and <code>lastName</code> fields of a <code>contacts</code> collection.</li>
</ol>
<p><strong>Solution:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5kZXggb24gJ2VtYWlsJwpkYi51c2Vycy5jcmVhdGVJbmRleCh7IGVtYWlsOiAxIH0pOwoKLy8gQ29tcG91bmQgaW5kZXggb24gJ2ZpcnN0TmFtZScgYW5kICdsYXN0TmFtZScKZGIuY29udGFjdHMuY3JlYXRlSW5kZXgoeyBmaXJzdE5hbWU6IDEsIGxhc3ROYW1lOiAxIH0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Index on 'email'
db.users.createIndex({ email: 1 });

// Compound index on 'firstName' and 'lastName'
db.contacts.createIndex({ firstName: 1, lastName: 1 });</pre></div><div class='content'></div><h1>Query Optimization</h1>
<div class='content'><p>Writing efficient queries is essential for performance. Here are some tips:</p>
<ul>
<li><strong>Use Projections</strong>: Retrieve only the necessary fields.</li>
<li><strong>Filter Early</strong>: Use filters to reduce the amount of data processed.</li>
<li><strong>Avoid $where</strong>: The <code>$where</code> operator can be slow and should be avoided.</li>
</ul>
</div><h2>Practical Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5lZmZpY2llbnQgcXVlcnkKZGIuY29sbGVjdGlvbi5maW5kKHsgYWdlOiB7ICRndDogMjUgfSB9KTsKCi8vIEVmZmljaWVudCBxdWVyeSB3aXRoIHByb2plY3Rpb24KZGIuY29sbGVjdGlvbi5maW5kKHsgYWdlOiB7ICRndDogMjUgfSB9LCB7IG5hbWU6IDEsIGFnZTogMSB9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Inefficient query
db.collection.find({ age: { $gt: 25 } });

// Efficient query with projection
db.collection.find({ age: { $gt: 25 } }, { name: 1, age: 1 });</pre></div><div class='content'></div><h2>Exercise</h2>
<div class='content'><ol>
<li>Write a query to find users older than 30, retrieving only their <code>name</code> and <code>email</code>.</li>
</ol>
<p><strong>Solution:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIudXNlcnMuZmluZCh7IGFnZTogeyAkZ3Q6IDMwIH0gfSwgeyBuYW1lOiAxLCBlbWFpbDogMSB9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.users.find({ age: { $gt: 30 } }, { name: 1, email: 1 });</pre></div><div class='content'></div><h1>Sharding</h1>
<div class='content'><p>Sharding distributes data across multiple servers, improving performance and scalability.</p>
</div><h2>Enabling Sharding</h2>
<div class='content'><ol>
<li><strong>Enable Sharding on the Database</strong></li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2guZW5hYmxlU2hhcmRpbmcoIm15RGF0YWJhc2UiKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sh.enableSharding(&quot;myDatabase&quot;);</pre></div><div class='content'><ol start="2">
<li><strong>Shard a Collection</strong></li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2guc2hhcmRDb2xsZWN0aW9uKCJteURhdGFiYXNlLm15Q29sbGVjdGlvbiIsIHsgc2hhcmRLZXk6IDEgfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sh.shardCollection(&quot;myDatabase.myCollection&quot;, { shardKey: 1 });</pre></div><div class='content'></div><h2>Practical Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRW5hYmxlIHNoYXJkaW5nIG9uICd0ZXN0REInCnNoLmVuYWJsZVNoYXJkaW5nKCJ0ZXN0REIiKTsKCi8vIFNoYXJkIHRoZSAnb3JkZXJzJyBjb2xsZWN0aW9uIG9uICdvcmRlcklkJwpzaC5zaGFyZENvbGxlY3Rpb24oInRlc3REQi5vcmRlcnMiLCB7IG9yZGVySWQ6IDEgfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Enable sharding on 'testDB'
sh.enableSharding(&quot;testDB&quot;);

// Shard the 'orders' collection on 'orderId'
sh.shardCollection(&quot;testDB.orders&quot;, { orderId: 1 });</pre></div><div class='content'></div><h2>Exercise</h2>
<div class='content'><ol>
<li>Enable sharding on a database named <code>shopDB</code>.</li>
<li>Shard the <code>products</code> collection on the <code>productId</code> field.</li>
</ol>
<p><strong>Solution:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRW5hYmxlIHNoYXJkaW5nIG9uICdzaG9wREInCnNoLmVuYWJsZVNoYXJkaW5nKCJzaG9wREIiKTsKCi8vIFNoYXJkIHRoZSAncHJvZHVjdHMnIGNvbGxlY3Rpb24gb24gJ3Byb2R1Y3RJZCcKc2guc2hhcmRDb2xsZWN0aW9uKCJzaG9wREIucHJvZHVjdHMiLCB7IHByb2R1Y3RJZDogMSB9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Enable sharding on 'shopDB'
sh.enableSharding(&quot;shopDB&quot;);

// Shard the 'products' collection on 'productId'
sh.shardCollection(&quot;shopDB.products&quot;, { productId: 1 });</pre></div><div class='content'></div><h1>Hardware Considerations</h1>
<div class='content'><p>Ensure your hardware is adequate for your workload:</p>
<ul>
<li><strong>CPU</strong>: More cores can handle more concurrent operations.</li>
<li><strong>RAM</strong>: Sufficient RAM to hold working set in memory.</li>
<li><strong>Disk I/O</strong>: Fast SSDs for better read/write performance.</li>
</ul>
</div><h1>Configuration Settings</h1>
<div class='content'><p>Tuning MongoDB configuration can also improve performance:</p>
<ul>
<li><strong>WiredTiger Cache Size</strong>: Adjust the cache size for the WiredTiger storage engine.</li>
<li><strong>Journal Commit Interval</strong>: Adjust the interval for committing journal writes.</li>
</ul>
</div><h2>Practical Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBtb25nb2QuY29uZgpzdG9yYWdlOgogIHdpcmVkVGlnZXI6CiAgICBlbmdpbmVDb25maWc6CiAgICAgIGNhY2hlU2l6ZUdCOiAy"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># mongod.conf
storage:
  wiredTiger:
    engineConfig:
      cacheSizeGB: 2</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>In this section, we covered various strategies for performance tuning in MongoDB, including:</p>
<ul>
<li>Creating and using indexes effectively.</li>
<li>Writing optimized queries.</li>
<li>Implementing sharding for scalability.</li>
<li>Considering hardware requirements.</li>
<li>Adjusting configuration settings.</li>
</ul>
<p>By applying these techniques, you can significantly improve the performance of your MongoDB database, ensuring it can handle the demands of your application efficiently.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-04-mongodb-atlas' title="MongoDB Atlas">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-backup-and-restore' title="Backup and Restore">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
