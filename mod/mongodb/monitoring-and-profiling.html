<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoring and Profiling</title>

    <link rel="alternate" href="https://campusempresa.com/mod/mongodb/monitoring-and-profiling" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/mongodb/monitoring-and-profiling" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/mongodb/monitoring-and-profiling" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/mongodb/monitoring-and-profiling" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/mongodb/monitoring-and-profiling" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='query-optimization'>&#x25C4;Query Optimization</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Monitoring and Profiling</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-replication'>Introduction to Replication &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Monitoring and profiling are essential practices for maintaining the health and performance of your MongoDB databases. This section will cover the tools and techniques available for monitoring and profiling MongoDB, from basic to advanced levels.</p>
</div><h1>Monitoring MongoDB</h1>
<div class='content'></div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Monitoring</strong>: The process of collecting, analyzing, and using information to track the performance and health of a MongoDB deployment.</li>
<li><strong>Metrics</strong>: Quantitative measures used to gauge the performance of various aspects of MongoDB.</li>
<li><strong>Alerts</strong>: Notifications triggered when certain metrics exceed predefined thresholds.</li>
</ul>
</div><h2>Tools for Monitoring</h2>
<div class='content'><ul>
<li><strong>MongoDB Atlas</strong>: A fully managed cloud database service that includes built-in monitoring and alerting.</li>
<li><strong>MongoDB Cloud Manager</strong>: A service for managing, monitoring, and backing up MongoDB deployments.</li>
<li><strong>mongostat</strong>: A command-line tool that provides a quick overview of the status of a MongoDB instance.</li>
<li><strong>mongotop</strong>: A command-line tool that tracks and reports the read and write activity on a MongoDB instance.</li>
</ul>
</div><h2>Example: Using `mongostat`</h2>
<div class='content'><p><code>mongostat</code> provides a quick overview of the status of a MongoDB instance, showing metrics such as inserts, queries, updates, deletes, and more.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9uZ29zdGF0IC0taG9zdCB5b3VyX21vbmdvZGJfaG9zdCAtLXBvcnQgeW91cl9tb25nb2RiX3BvcnQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>mongostat --host your_mongodb_host --port your_mongodb_port</pre></div><div class='content'><p>Output:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW5zZXJ0IHF1ZXJ5IHVwZGF0ZSBkZWxldGUgZ2V0bW9yZSBjb21tYW5kIGZsdXNoZXMgbWFwcGVkICB2c2l6ZSAgIHJlcyBmYXVsdHMgIGxvY2tlZCBkYiBpZHggbWlzcyAlICAgICBxcnxxdyAgIGFyfGF3ICBuZXRJbiBuZXRPdXQgIGNvbm4gICAgICAgdGltZQogICAgMCAgICAgMCAgICAgIDAgICAgICAwICAgICAgIDAgICAgIDJ8MCAgICAgICAwICAgICAgIDAgIDEuMTJHICAwLjAwayAgICAgICAwICAgICAgIDAuMCAgICAgICAgICAwfDAgICAgICAgMHwwICAgIDFrICAgICAxayAgICAgMSAgIDEyOjAwOjAw"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>insert query update delete getmore command flushes mapped  vsize   res faults  locked db idx miss %     qr|qw   ar|aw  netIn netOut  conn       time
    0     0      0      0       0     2|0       0       0  1.12G  0.00k       0       0.0          0|0       0|0    1k     1k     1   12:00:00</pre></div><div class='content'></div><h2>Example: Using `mongotop`</h2>
<div class='content'><p><code>mongotop</code> provides a breakdown of time spent reading and writing data in each collection.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9uZ290b3AgLS1ob3N0IHlvdXJfbW9uZ29kYl9ob3N0IC0tcG9ydCB5b3VyX21vbmdvZGJfcG9ydA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>mongotop --host your_mongodb_host --port your_mongodb_port</pre></div><div class='content'><p>Output:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ICAgICAgICAgICAgICAgICAgICBucyAgICB0b3RhbCAgICByZWFkICAgIHdyaXRlICAgIDIwMTktMDEtMDFUMDA6MDA6MDBaCiAgICAgICB0ZXN0LmNvbGxlY3Rpb24gICAgMG1zICAgICAgMG1zICAgICAgMG1z"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>                    ns    total    read    write    2019-01-01T00:00:00Z
       test.collection    0ms      0ms      0ms</pre></div><div class='content'></div><h1>Profiling MongoDB</h1>
<div class='content'></div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Profiling</strong>: The process of recording and analyzing the performance of database operations to identify slow queries and other performance bottlenecks.</li>
<li><strong>Profiler Levels</strong>: MongoDB provides different levels of profiling to control the amount of data collected.</li>
</ul>
</div><h2>Profiling Levels</h2>
<div class='content'><ul>
<li><strong>Level 0</strong>: No profiling.</li>
<li><strong>Level 1</strong>: Profiles slow operations.</li>
<li><strong>Level 2</strong>: Profiles all operations.</li>
</ul>
</div><h2>Enabling Profiling</h2>
<div class='content'><p>To enable profiling, you can use the <code>db.setProfilingLevel()</code> method.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRW5hYmxlIHByb2ZpbGluZyBmb3Igc2xvdyBvcGVyYXRpb25zIChkZWZhdWx0IHRocmVzaG9sZCBpcyAxMDBtcykKZGIuc2V0UHJvZmlsaW5nTGV2ZWwoMSk7CgovLyBFbmFibGUgcHJvZmlsaW5nIGZvciBhbGwgb3BlcmF0aW9ucwpkYi5zZXRQcm9maWxpbmdMZXZlbCgyKTsKCi8vIERpc2FibGUgcHJvZmlsaW5nCmRiLnNldFByb2ZpbGluZ0xldmVsKDApOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Enable profiling for slow operations (default threshold is 100ms)
db.setProfilingLevel(1);

// Enable profiling for all operations
db.setProfilingLevel(2);

// Disable profiling
db.setProfilingLevel(0);</pre></div><div class='content'></div><h2>Viewing Profiling Data</h2>
<div class='content'><p>Profiling data is stored in the <code>system.profile</code> collection. You can query this collection to analyze the performance of your database operations.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRmluZCBhbGwgcHJvZmlsaW5nIGRhdGEKZGIuc3lzdGVtLnByb2ZpbGUuZmluZCgpLnByZXR0eSgpOwoKLy8gRmluZCBzbG93IG9wZXJhdGlvbnMgKGUuZy4sIG9wZXJhdGlvbnMgdGFraW5nIGxvbmdlciB0aGFuIDIwMG1zKQpkYi5zeXN0ZW0ucHJvZmlsZS5maW5kKHsgbWlsbGlzOiB7ICRndDogMjAwIH0gfSkucHJldHR5KCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Find all profiling data
db.system.profile.find().pretty();

// Find slow operations (e.g., operations taking longer than 200ms)
db.system.profile.find({ millis: { $gt: 200 } }).pretty();</pre></div><div class='content'></div><h1>Advanced Monitoring and Profiling</h1>
<div class='content'></div><h2>Custom Alerts and Dashboards</h2>
<div class='content'><ul>
<li><strong>Custom Alerts</strong>: Set up custom alerts in MongoDB Atlas or Cloud Manager to notify you when specific metrics exceed thresholds.</li>
<li><strong>Dashboards</strong>: Create custom dashboards to visualize key metrics and trends over time.</li>
</ul>
</div><h2>Integration with Third-Party Tools</h2>
<div class='content'><ul>
<li><strong>Prometheus</strong>: Use the MongoDB Exporter to integrate MongoDB metrics with Prometheus for advanced monitoring and alerting.</li>
<li><strong>Grafana</strong>: Visualize MongoDB metrics in Grafana by integrating it with Prometheus.</li>
</ul>
</div><h2>Example: Setting Up a Custom Alert in MongoDB Atlas</h2>
<div class='content'><ol>
<li>Navigate to the Alerts section in MongoDB Atlas.</li>
<li>Click on &quot;Create Alert&quot;.</li>
<li>Choose the metric you want to monitor (e.g., CPU usage, memory usage).</li>
<li>Set the threshold and notification settings.</li>
<li>Save the alert.</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>Monitoring and profiling are critical for maintaining the performance and reliability of your MongoDB deployments. By using the tools and techniques covered in this section, you can gain valuable insights into the health of your database, identify performance bottlenecks, and take proactive measures to ensure optimal performance. Whether you are using built-in tools like <code>mongostat</code> and <code>mongotop</code>, or integrating with third-party solutions like Prometheus and Grafana, effective monitoring and profiling will help you manage your MongoDB databases more efficiently.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='query-optimization'>&#x25C4;Query Optimization</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Monitoring and Profiling</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-replication'>Introduction to Replication &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
