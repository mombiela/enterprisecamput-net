<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introduction to Aggregation</title>

    <link rel="alternate" href="https://campusempresa.com/mod/mongodb/introduction-to-aggregation" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/mongodb/introduction-to-aggregation" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/mongodb/introduction-to-aggregation" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/mongodb/introduction-to-aggregation" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/mongodb/introduction-to-aggregation" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='many-to-many-relationships'>&#x25C4;Many-to-Many Relationships</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Introduction to Aggregation</a>
	</div>
	<div class='col-4 text-end'>
					<a href='aggregation-pipeline'>Aggregation Pipeline &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Aggregation operations process data records and return computed results. MongoDB provides a powerful aggregation framework that allows you to perform complex data processing and analysis directly within the database.</p>
</div><h1>Key Concepts of Aggregation</h1>
<div class='content'><ul>
<li><strong>Aggregation Pipeline</strong>: A framework for data aggregation modeled on the concept of data processing pipelines. Documents enter a multi-stage pipeline that transforms the documents into aggregated results.</li>
<li><strong>Stages</strong>: Each stage in the pipeline performs an operation on the input documents. Stages can filter, sort, group, reshape, and modify documents that pass through the pipeline.</li>
<li><strong>Expressions</strong>: Used within stages to compute values, perform operations, and transform data.</li>
</ul>
</div><h1>Aggregation Pipeline</h1>
<div class='content'><p>The aggregation pipeline is a series of stages that process documents:</p>
<ol>
<li><strong>$match</strong>: Filters documents to pass only those that match the specified condition(s).</li>
<li><strong>$group</strong>: Groups input documents by a specified identifier expression and applies the accumulator expressions to each group.</li>
<li><strong>$project</strong>: Reshapes each document in the stream, such as by adding, removing, or renaming fields.</li>
<li><strong>$sort</strong>: Reorders the documents in the stream by a specified sort key.</li>
<li><strong>$limit</strong>: Restricts the number of documents in the output.</li>
<li><strong>$skip</strong>: Skips over a specified number of documents from the pipeline and passes the rest along.</li>
</ol>
</div><h2>Example Aggregation Pipeline</h2>
<div class='content'><p>Consider a collection <code>orders</code> with documents like:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJfaWQiOiAxLAogICJwcm9kdWN0IjogIkxhcHRvcCIsCiAgInF1YW50aXR5IjogMiwKICAicHJpY2UiOiAxMDAwLAogICJjdXN0b21lciI6ICJKb2huIERvZSIKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;_id&quot;: 1,
  &quot;product&quot;: &quot;Laptop&quot;,
  &quot;quantity&quot;: 2,
  &quot;price&quot;: 1000,
  &quot;customer&quot;: &quot;John Doe&quot;
}</pre></div><div class='content'><p>To calculate the total sales for each product, you can use the following aggregation pipeline:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIub3JkZXJzLmFnZ3JlZ2F0ZShbCiAgewogICAgJGdyb3VwOiB7CiAgICAgIF9pZDogIiRwcm9kdWN0IiwKICAgICAgdG90YWxTYWxlczogeyAkc3VtOiB7ICRtdWx0aXBseTogWyIkcXVhbnRpdHkiLCAiJHByaWNlIl0gfSB9CiAgICB9CiAgfQpdKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.orders.aggregate([
  {
    $group: {
      _id: &quot;$product&quot;,
      totalSales: { $sum: { $multiply: [&quot;$quantity&quot;, &quot;$price&quot;] } }
    }
  }
])</pre></div><div class='content'><p>Explanation:</p>
<ul>
<li><strong>$group</strong>: Groups documents by the <code>product</code> field.</li>
<li><strong>_id</strong>: The field by which to group documents.</li>
<li><strong>totalSales</strong>: Calculates the total sales by multiplying <code>quantity</code> and <code>price</code> for each document and summing the results.</li>
</ul>
</div><h1>Common Aggregation Stages</h1>
<div class='content'></div><h2>$match</h2>
<div class='content'><p>Filters documents to pass only those that match the specified condition(s).</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIub3JkZXJzLmFnZ3JlZ2F0ZShbCiAgeyAkbWF0Y2g6IHsgY3VzdG9tZXI6ICJKb2huIERvZSIgfSB9Cl0p"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.orders.aggregate([
  { $match: { customer: &quot;John Doe&quot; } }
])</pre></div><div class='content'></div><h2>$group</h2>
<div class='content'><p>Groups input documents by a specified identifier expression and applies the accumulator expressions to each group.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIub3JkZXJzLmFnZ3JlZ2F0ZShbCiAgewogICAgJGdyb3VwOiB7CiAgICAgIF9pZDogIiRjdXN0b21lciIsCiAgICAgIHRvdGFsUXVhbnRpdHk6IHsgJHN1bTogIiRxdWFudGl0eSIgfQogICAgfQogIH0KXSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.orders.aggregate([
  {
    $group: {
      _id: &quot;$customer&quot;,
      totalQuantity: { $sum: &quot;$quantity&quot; }
    }
  }
])</pre></div><div class='content'></div><h2>$project</h2>
<div class='content'><p>Reshapes each document in the stream, such as by adding, removing, or renaming fields.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIub3JkZXJzLmFnZ3JlZ2F0ZShbCiAgewogICAgJHByb2plY3Q6IHsKICAgICAgcHJvZHVjdDogMSwKICAgICAgdG90YWxDb3N0OiB7ICRtdWx0aXBseTogWyIkcXVhbnRpdHkiLCAiJHByaWNlIl0gfQogICAgfQogIH0KXSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.orders.aggregate([
  {
    $project: {
      product: 1,
      totalCost: { $multiply: [&quot;$quantity&quot;, &quot;$price&quot;] }
    }
  }
])</pre></div><div class='content'></div><h2>$sort</h2>
<div class='content'><p>Reorders the documents in the stream by a specified sort key.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIub3JkZXJzLmFnZ3JlZ2F0ZShbCiAgeyAkc29ydDogeyB0b3RhbFNhbGVzOiAtMSB9IH0KXSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.orders.aggregate([
  { $sort: { totalSales: -1 } }
])</pre></div><div class='content'></div><h2>$limit</h2>
<div class='content'><p>Restricts the number of documents in the output.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIub3JkZXJzLmFnZ3JlZ2F0ZShbCiAgeyAkbGltaXQ6IDUgfQpdKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.orders.aggregate([
  { $limit: 5 }
])</pre></div><div class='content'></div><h2>$skip</h2>
<div class='content'><p>Skips over a specified number of documents from the pipeline and passes the rest along.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIub3JkZXJzLmFnZ3JlZ2F0ZShbCiAgeyAkc2tpcDogMTAgfQpdKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.orders.aggregate([
  { $skip: 10 }
])</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Aggregation in MongoDB is a powerful tool for data analysis and transformation. By understanding and utilizing the aggregation pipeline and its stages, you can perform complex queries and derive meaningful insights from your data. Practice using different stages and expressions to become proficient in building efficient aggregation pipelines.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='many-to-many-relationships'>&#x25C4;Many-to-Many Relationships</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Introduction to Aggregation</a>
	</div>
	<div class='col-4 text-end'>
					<a href='aggregation-pipeline'>Aggregation Pipeline &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
