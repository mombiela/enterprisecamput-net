<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schema Design Best Practices</title>

    <link rel="alternate" href="https://campusempresa.com/mod/mongodb/schema-design-best-practices" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/mongodb/schema-design-best-practices" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/mongodb/schema-design-best-practices" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/mongodb/schema-design-best-practices" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/mongodb/schema-design-best-practices" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='indexes-in-mongodb'>&#x25C4;Indexes in MongoDB</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Schema Design Best Practices</a>
	</div>
	<div class='col-4 text-end'>
					<a href='embedded-documents-vs-references'>Embedded Documents vs. References &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Schema design is a critical aspect of working with MongoDB. A well-designed schema can significantly improve the performance, scalability, and maintainability of your application. This section will cover best practices for designing schemas in MongoDB, from beginner to advanced levels.</p>
</div><h1>Understanding MongoDB Schema Design</h1>
<div class='content'><p>MongoDB is a NoSQL database, which means it does not require a fixed schema. However, having a well-thought-out schema design is still essential for efficient data management.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Documents and Collections</strong>: MongoDB stores data in BSON format within documents, which are grouped into collections.</li>
<li><strong>Embedded Documents</strong>: Documents can contain sub-documents, allowing for nested data structures.</li>
<li><strong>References</strong>: Documents can reference other documents, similar to foreign keys in relational databases.</li>
</ul>
</div><h1>Best Practices for Schema Design</h1>
<div class='content'></div><h2>1. Embed vs. Reference</h2>
<div class='content'><p>Choosing between embedding documents and referencing them is a fundamental decision in schema design.</p>
<ul>
<li>
<p><strong>Embed</strong> when:</p>
<ul>
<li>Data is frequently accessed together.</li>
<li>The embedded document is not expected to grow indefinitely.</li>
<li>The relationship between documents is one-to-few.</li>
</ul>
</li>
<li>
<p><strong>Reference</strong> when:</p>
<ul>
<li>Data is accessed separately.</li>
<li>The referenced document is large or expected to grow.</li>
<li>The relationship between documents is one-to-many or many-to-many.</li>
</ul>
</li>
</ul>
<h4>Example: Embedding</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJuYW1lIjogIkpvaG4gRG9lIiwKICAiYWRkcmVzcyI6IHsKICAgICJzdHJlZXQiOiAiMTIzIE1haW4gU3QiLAogICAgImNpdHkiOiAiQW55dG93biIsCiAgICAic3RhdGUiOiAiQ0EiCiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;name&quot;: &quot;John Doe&quot;,
  &quot;address&quot;: {
    &quot;street&quot;: &quot;123 Main St&quot;,
    &quot;city&quot;: &quot;Anytown&quot;,
    &quot;state&quot;: &quot;CA&quot;
  }
}</pre></div><div class='content'><h4>Example: Referencing</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJuYW1lIjogIkpvaG4gRG9lIiwKICAiYWRkcmVzc19pZCI6ICI1ZjhmOGM0NGI1NDc2NDQyMWI3MTU2YzMiCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;name&quot;: &quot;John Doe&quot;,
  &quot;address_id&quot;: &quot;5f8f8c44b54764421b7156c3&quot;
}</pre></div><div class='content'></div><h2>2. Optimize for Read Operations</h2>
<div class='content'><p>Design your schema to optimize for the most common read operations.</p>
<ul>
<li><strong>Denormalize data</strong>: Duplicate data across documents to reduce the number of read operations.</li>
<li><strong>Use indexes</strong>: Create indexes on fields that are frequently queried.</li>
</ul>
<h4>Example: Denormalization</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJvcmRlcl9pZCI6ICIxMjM0NSIsCiAgImN1c3RvbWVyX25hbWUiOiAiSm9obiBEb2UiLAogICJwcm9kdWN0X25hbWUiOiAiTGFwdG9wIiwKICAicHJpY2UiOiAxMjAwCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;order_id&quot;: &quot;12345&quot;,
  &quot;customer_name&quot;: &quot;John Doe&quot;,
  &quot;product_name&quot;: &quot;Laptop&quot;,
  &quot;price&quot;: 1200
}</pre></div><div class='content'></div><h2>3. Optimize for Write Operations</h2>
<div class='content'><p>If your application performs many write operations, consider the following:</p>
<ul>
<li><strong>Avoid large documents</strong>: Large documents can slow down write operations.</li>
<li><strong>Use capped collections</strong>: For logs or other data that has a fixed size.</li>
</ul>
<h4>Example: Capped Collection</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIuY3JlYXRlQ29sbGVjdGlvbigibG9ncyIsIHsgY2FwcGVkOiB0cnVlLCBzaXplOiA1MjQyODgwLCBtYXg6IDUwMDAgfSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.createCollection(&quot;logs&quot;, { capped: true, size: 5242880, max: 5000 })</pre></div><div class='content'></div><h2>4. Schema Versioning</h2>
<div class='content'><p>As your application evolves, your schema may need to change. Plan for schema versioning to handle these changes gracefully.</p>
<ul>
<li><strong>Include a version field</strong>: Add a version field to your documents to track schema changes.</li>
<li><strong>Migrate data</strong>: Write scripts to migrate data to the new schema version.</li>
</ul>
<h4>Example: Versioning</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJuYW1lIjogIkpvaG4gRG9lIiwKICAiYWRkcmVzcyI6ICIxMjMgTWFpbiBTdCwgQW55dG93biwgQ0EiLAogICJzY2hlbWFfdmVyc2lvbiI6IDIKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;name&quot;: &quot;John Doe&quot;,
  &quot;address&quot;: &quot;123 Main St, Anytown, CA&quot;,
  &quot;schema_version&quot;: 2
}</pre></div><div class='content'></div><h2>5. Use Aggregation Framework</h2>
<div class='content'><p>MongoDB's aggregation framework allows for complex data processing and transformation.</p>
<ul>
<li><strong>Pipeline stages</strong>: Use stages like <code>$match</code>, <code>$group</code>, <code>$project</code>, and <code>$sort</code> to process data.</li>
<li><strong>Avoid excessive use</strong>: While powerful, overusing aggregation can lead to performance issues.</li>
</ul>
<h4>Example: Aggregation Pipeline</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIub3JkZXJzLmFnZ3JlZ2F0ZShbCiAgeyAkbWF0Y2g6IHsgc3RhdHVzOiAic2hpcHBlZCIgfSB9LAogIHsgJGdyb3VwOiB7IF9pZDogIiRjdXN0b21lcl9pZCIsIHRvdGFsOiB7ICRzdW06ICIkYW1vdW50IiB9IH0gfSwKICB7ICRzb3J0OiB7IHRvdGFsOiAtMSB9IH0KXSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.orders.aggregate([
  { $match: { status: &quot;shipped&quot; } },
  { $group: { _id: &quot;$customer_id&quot;, total: { $sum: &quot;$amount&quot; } } },
  { $sort: { total: -1 } }
])</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Designing an efficient schema in MongoDB requires careful consideration of how your application will access and manipulate data. By following best practices such as choosing between embedding and referencing, optimizing for read and write operations, planning for schema versioning, and leveraging the aggregation framework, you can create a robust and scalable schema. Remember, the key to a successful schema design is understanding your application's specific needs and usage patterns.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='indexes-in-mongodb'>&#x25C4;Indexes in MongoDB</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Schema Design Best Practices</a>
	</div>
	<div class='col-4 text-end'>
					<a href='embedded-documents-vs-references'>Embedded Documents vs. References &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
