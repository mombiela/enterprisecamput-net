<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backup and Restore</title>

    <link rel="alternate" href="https://campusempresa.com/mod/mongodb/06-02-backup-and-restore" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/mongodb/06-02-backup-and-restore" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/mongodb/06-02-backup-and-restore" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/mongodb/06-02-backup-and-restore" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/mongodb/06-02-backup-and-restore" class="px-2">CA</a>
					</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-01-performance-tuning' title="Performance Tuning">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Backup and Restore</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-03-security-best-practices' title="Security Best Practices">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will cover the essential concepts and practical steps for backing up and restoring data in MongoDB. Ensuring that your data is backed up and can be restored is crucial for maintaining data integrity and availability.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Backup</strong>: The process of creating a copy of your data that can be used to restore the original in case of data loss.</li>
<li><strong>Restore</strong>: The process of using a backup to bring the database back to a previous state.</li>
<li><strong>Mongodump</strong>: A utility for creating a binary export of the contents of a MongoDB instance.</li>
<li><strong>Mongorestore</strong>: A utility for importing content from a binary export created by <code>mongodump</code>.</li>
</ol>
</div><h1><p>Backup Methods</p>
</h1>
<div class='content'></div><h2><ol>
<li>Mongodump and Mongorestore</li>
</ol>
</h2>
<div class='content'><h4>Mongodump</h4>
<p><code>mongodump</code> is a command-line tool that creates a binary export of the contents of a MongoDB instance. It can be used to back up a single database or an entire MongoDB deployment.</p>
<p><strong>Basic Usage:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9uZ29kdW1wIC0tZGIgPGRhdGFiYXNlX25hbWU+IC0tb3V0IDxvdXRwdXRfZGlyZWN0b3J5Pg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>mongodump --db &lt;database_name&gt; --out &lt;output_directory&gt;</pre></div><div class='content'><p><strong>Example:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9uZ29kdW1wIC0tZGIgbXlkYXRhYmFzZSAtLW91dCAvYmFja3Vwcy9teWRhdGFiYXNlX2JhY2t1cA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>mongodump --db mydatabase --out /backups/mydatabase_backup</pre></div><div class='content'><p>This command will create a backup of the <code>mydatabase</code> database and store it in the <code>/backups/mydatabase_backup</code> directory.</p>
<h4>Mongorestore</h4>
<p><code>mongorestore</code> is a command-line tool that imports content from a binary export created by <code>mongodump</code>.</p>
<p><strong>Basic Usage:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9uZ29yZXN0b3JlIC0tZGIgPGRhdGFiYXNlX25hbWU+IDxpbnB1dF9kaXJlY3Rvcnk+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>mongorestore --db &lt;database_name&gt; &lt;input_directory&gt;</pre></div><div class='content'><p><strong>Example:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9uZ29yZXN0b3JlIC0tZGIgbXlkYXRhYmFzZSAvYmFja3Vwcy9teWRhdGFiYXNlX2JhY2t1cA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>mongorestore --db mydatabase /backups/mydatabase_backup</pre></div><div class='content'><p>This command will restore the <code>mydatabase</code> database from the backup located in the <code>/backups/mydatabase_backup</code> directory.</p>
</div><h2><ol start="2">
<li>File System Snapshots</li>
</ol>
</h2>
<div class='content'><p>File system snapshots are another method for backing up MongoDB data. This method involves taking a snapshot of the file system where MongoDB data files are stored. This approach is typically used in environments where MongoDB is deployed on a storage system that supports snapshots.</p>
<p><strong>Steps:</strong></p>
<ol>
<li><strong>Lock the Database</strong>: Ensure that the database is in a consistent state before taking the snapshot.</li>
<li><strong>Take the Snapshot</strong>: Use the storage system's snapshot feature to create a snapshot of the file system.</li>
<li><strong>Unlock the Database</strong>: Once the snapshot is complete, unlock the database.</li>
</ol>
<p><strong>Example:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBMb2NrIHRoZSBkYXRhYmFzZQpkYi5mc3luY0xvY2soKQoKIyBUYWtlIHRoZSBzbmFwc2hvdCAodGhpcyBjb21tYW5kIHdpbGwgdmFyeSBkZXBlbmRpbmcgb24geW91ciBzdG9yYWdlIHN5c3RlbSkKIyBFeGFtcGxlIGZvciBMVk0gb24gTGludXg6Cmx2Y3JlYXRlIC0tc25hcHNob3QgLS1uYW1lIG15ZGF0YWJhc2Vfc25hcHNob3QgLS1zaXplIDFHIC9kZXYvdmcwL215ZGF0YWJhc2UKCiMgVW5sb2NrIHRoZSBkYXRhYmFzZQpkYi5mc3luY1VubG9jaygp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Lock the database
db.fsyncLock()

# Take the snapshot (this command will vary depending on your storage system)
# Example for LVM on Linux:
lvcreate --snapshot --name mydatabase_snapshot --size 1G /dev/vg0/mydatabase

# Unlock the database
db.fsyncUnlock()</pre></div><div class='content'></div><h2><ol start="3">
<li>MongoDB Atlas Backups</li>
</ol>
</h2>
<div class='content'><p>MongoDB Atlas, the managed database service, provides automated backup and restore capabilities. Backups in MongoDB Atlas are taken automatically and can be restored through the Atlas UI or API.</p>
<p><strong>Steps:</strong></p>
<ol>
<li><strong>Navigate to the Backups Tab</strong>: In the MongoDB Atlas UI, go to the &quot;Backups&quot; tab for your cluster.</li>
<li><strong>Select a Backup</strong>: Choose the backup you want to restore from the list of available backups.</li>
<li><strong>Restore the Backup</strong>: Follow the prompts to restore the backup to a new or existing cluster.</li>
</ol>
</div><h1><p>Practical Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Creating a Backup with Mongodump</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Objective</strong>: Create a backup of the <code>testdb</code> database using <code>mongodump</code>.</p>
</li>
<li>
<p><strong>Steps</strong>:</p>
<ul>
<li>Open a terminal.</li>
<li>Run the following command:</li>
</ul>
<pre><code class="language-sh">mongodump --db testdb --out /backups/testdb_backup
</code></pre>
</li>
<li>
<p><strong>Expected Result</strong>: A backup of the <code>testdb</code> database should be created in the <code>/backups/testdb_backup</code> directory.</p>
</li>
</ol>
</div><h2><p>Exercise 2: Restoring a Backup with Mongorestore</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Objective</strong>: Restore the <code>testdb</code> database from the backup created in Exercise 1.</p>
</li>
<li>
<p><strong>Steps</strong>:</p>
<ul>
<li>Open a terminal.</li>
<li>Run the following command:</li>
</ul>
<pre><code class="language-sh">mongorestore --db testdb /backups/testdb_backup
</code></pre>
</li>
<li>
<p><strong>Expected Result</strong>: The <code>testdb</code> database should be restored from the backup.</p>
</li>
</ol>
</div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ul>
<li>
<p><strong>Mistake</strong>: Forgetting to specify the database name when using <code>mongodump</code> or <code>mongorestore</code>.</p>
<ul>
<li><strong>Tip</strong>: Always double-check the command syntax and ensure you specify the correct database name.</li>
</ul>
</li>
<li>
<p><strong>Mistake</strong>: Not having sufficient permissions to write to the backup directory.</p>
<ul>
<li><strong>Tip</strong>: Ensure that the user running the <code>mongodump</code> or <code>mongorestore</code> command has the necessary permissions to read from and write to the specified directories.</li>
</ul>
</li>
<li>
<p><strong>Mistake</strong>: Overwriting existing data unintentionally during restore.</p>
<ul>
<li><strong>Tip</strong>: Use the <code>--drop</code> option with <code>mongorestore</code> to drop the target database before restoring if you want to ensure a clean restore.</li>
</ul>
</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the essential concepts and practical steps for backing up and restoring data in MongoDB. We explored different methods, including using <code>mongodump</code> and <code>mongorestore</code>, file system snapshots, and MongoDB Atlas backups. By understanding and practicing these techniques, you can ensure the integrity and availability of your MongoDB data. In the next section, we will delve into performance tuning to optimize your MongoDB deployment.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-01-performance-tuning' title="Performance Tuning">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-03-security-best-practices' title="Security Best Practices">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
