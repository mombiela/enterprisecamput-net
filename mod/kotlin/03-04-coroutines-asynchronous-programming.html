<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Coroutines and Asynchronous Programming</title>

    <link rel="alternate" href="https://campusempresa.com/mod/kotlin/03-04-coroutines-asynchronous-programming" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/kotlin/03-04-coroutines-asynchronous-programming" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/kotlin/03-04-coroutines-asynchronous-programming" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/kotlin/03-04-coroutines-asynchronous-programming" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/kotlin/03-04-coroutines-asynchronous-programming" class="px-2">CA</a>
</span>
			<span class="d-none d-md-inline"><br><cite>All the knowledge within your reach</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
					 				<a href="/"><i class="bi bi-house-fill"></i> HOME</a>
											</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-03-higher-order-functions-functional-programming' title="Higher-Order Functions and Functional Programming">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Coroutines and Asynchronous Programming</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='03-05-dsl-domain-specific-language' title="DSL (Domain Specific Language) in Kotlin">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Asynchronous programming is essential for building responsive applications, especially when dealing with tasks like network requests, file I/O, or any operation that might block the main thread. Kotlin provides a powerful feature called coroutines to handle asynchronous programming in a more straightforward and efficient way.</p>
</div><h1>Key Concepts</h1>
<div class='content'></div><h2><ol>
<li>What are Coroutines?</li>
</ol></h2>
<div class='content'><ul>
<li><strong>Coroutines</strong> are a design pattern for asynchronous programming that allows you to write code that is sequential but can be paused and resumed.</li>
<li>They are lightweight threads that can be suspended and resumed without blocking the main thread.</li>
</ul>
</div><h2><ol start="2">
<li>Benefits of Coroutines</li>
</ol></h2>
<div class='content'><ul>
<li><strong>Non-blocking</strong>: Coroutines do not block the main thread, making your application more responsive.</li>
<li><strong>Lightweight</strong>: They are much lighter than traditional threads, allowing you to run thousands of coroutines without significant overhead.</li>
<li><strong>Structured Concurrency</strong>: Coroutines provide a structured way to manage concurrency, making your code easier to read and maintain.</li>
</ul>
</div><h1>Setting Up Coroutines</h1>
<div class='content'><p>To use coroutines in Kotlin, you need to add the following dependencies to your <code>build.gradle</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wbGVtZW50YXRpb24gJ29yZy5qZXRicmFpbnMua290bGlueDprb3RsaW54LWNvcm91dGluZXMtY29yZToxLjUuMic="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.5.2'</pre></div><div class='content'></div><h1>Basic Coroutine Usage</h1>
<div class='content'></div><h2>Launching a Coroutine</h2>
<div class='content'><p>The <code>launch</code> function is used to start a new coroutine. Here’s a simple example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGtvdGxpbnguY29yb3V0aW5lcy4qCgpmdW4gbWFpbigpID0gcnVuQmxvY2tpbmcgewogICAgbGF1bmNoIHsKICAgICAgICBkZWxheSgxMDAwTCkKICAgICAgICBwcmludGxuKCJXb3JsZCEiKQogICAgfQogICAgcHJpbnRsbigiSGVsbG8sIikKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import kotlinx.coroutines.*

fun main() = runBlocking {
    launch {
        delay(1000L)
        println(&quot;World!&quot;)
    }
    println(&quot;Hello,&quot;)
}</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li><code>runBlocking</code>: This function blocks the main thread until the coroutine inside it completes.</li>
<li><code>launch</code>: Starts a new coroutine.</li>
<li><code>delay</code>: Suspends the coroutine for a specified time without blocking the thread.</li>
</ul>
</div><h2>Async and Await</h2>
<div class='content'><p>The <code>async</code> function is used to start a coroutine that returns a result. You can use <code>await</code> to get the result of the coroutine.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGtvdGxpbnguY29yb3V0aW5lcy4qCgpmdW4gbWFpbigpID0gcnVuQmxvY2tpbmcgewogICAgdmFsIGRlZmVycmVkID0gYXN5bmMgewogICAgICAgIGRlbGF5KDEwMDBMKQogICAgICAgICJIZWxsbywgV29ybGQhIgogICAgfQogICAgcHJpbnRsbihkZWZlcnJlZC5hd2FpdCgpKQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import kotlinx.coroutines.*

fun main() = runBlocking {
    val deferred = async {
        delay(1000L)
        &quot;Hello, World!&quot;
    }
    println(deferred.await())
}</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li><code>async</code>: Starts a new coroutine and returns a <code>Deferred</code> object.</li>
<li><code>await</code>: Waits for the result of the coroutine without blocking the main thread.</li>
</ul>
</div><h1>Structured Concurrency</h1>
<div class='content'><p>Structured concurrency ensures that coroutines are launched in a structured way, making it easier to manage their lifecycle.</p>
</div><h2>Coroutine Scope</h2>
<div class='content'><p>A <code>CoroutineScope</code> defines the lifecycle of coroutines. When the scope is cancelled, all coroutines within that scope are also cancelled.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGtvdGxpbnguY29yb3V0aW5lcy4qCgpmdW4gbWFpbigpID0gcnVuQmxvY2tpbmcgewogICAgdmFsIHNjb3BlID0gQ29yb3V0aW5lU2NvcGUoRGlzcGF0Y2hlcnMuRGVmYXVsdCkKICAgIHNjb3BlLmxhdW5jaCB7CiAgICAgICAgZGVsYXkoMTAwMEwpCiAgICAgICAgcHJpbnRsbigiVGFzayBmcm9tIGNvcm91dGluZSBzY29wZSIpCiAgICB9CiAgICBwcmludGxuKCJUYXNrIGZyb20gcnVuQmxvY2tpbmciKQogICAgZGVsYXkoMjAwMEwpCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import kotlinx.coroutines.*

fun main() = runBlocking {
    val scope = CoroutineScope(Dispatchers.Default)
    scope.launch {
        delay(1000L)
        println(&quot;Task from coroutine scope&quot;)
    }
    println(&quot;Task from runBlocking&quot;)
    delay(2000L)
}</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li><code>CoroutineScope</code>: Defines a scope for coroutines.</li>
<li><code>Dispatchers.Default</code>: Specifies the dispatcher for the coroutine, which determines the thread it runs on.</li>
</ul>
</div><h1>Practical Example: Fetching Data from a Network</h1>
<div class='content'><p>Here’s a practical example of using coroutines to fetch data from a network:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGtvdGxpbnguY29yb3V0aW5lcy4qCmltcG9ydCBqYXZhLm5ldC5VUkwKCmZ1biBtYWluKCkgPSBydW5CbG9ja2luZyB7CiAgICB2YWwgZGF0YSA9IGZldGNoRGF0YUZyb21OZXR3b3JrKCkKICAgIHByaW50bG4oZGF0YSkKfQoKc3VzcGVuZCBmdW4gZmV0Y2hEYXRhRnJvbU5ldHdvcmsoKTogU3RyaW5nID0gd2l0aENvbnRleHQoRGlzcGF0Y2hlcnMuSU8pIHsKICAgIHZhbCB1cmwgPSBVUkwoImh0dHBzOi8vYXBpLmdpdGh1Yi5jb20iKQogICAgdXJsLnJlYWRUZXh0KCkKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import kotlinx.coroutines.*
import java.net.URL

fun main() = runBlocking {
    val data = fetchDataFromNetwork()
    println(data)
}

suspend fun fetchDataFromNetwork(): String = withContext(Dispatchers.IO) {
    val url = URL(&quot;https://api.github.com&quot;)
    url.readText()
}</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li><code>suspend</code>: Marks a function as suspendable, meaning it can be paused and resumed.</li>
<li><code>withContext</code>: Switches the context to a different dispatcher, in this case, <code>Dispatchers.IO</code> for network operations.</li>
</ul>
</div><h1>Exercises</h1>
<div class='content'></div><h2>Exercise 1: Simple Coroutine</h2>
<div class='content'><p>Write a coroutine that prints &quot;Hello, Coroutine!&quot; after a delay of 2 seconds.</p>
<p><strong>Solution:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGtvdGxpbnguY29yb3V0aW5lcy4qCgpmdW4gbWFpbigpID0gcnVuQmxvY2tpbmcgewogICAgbGF1bmNoIHsKICAgICAgICBkZWxheSgyMDAwTCkKICAgICAgICBwcmludGxuKCJIZWxsbywgQ29yb3V0aW5lISIpCiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import kotlinx.coroutines.*

fun main() = runBlocking {
    launch {
        delay(2000L)
        println(&quot;Hello, Coroutine!&quot;)
    }
}</pre></div><div class='content'></div><h2>Exercise 2: Fetch Data with Coroutines</h2>
<div class='content'><p>Modify the practical example to fetch data from a different URL and print the first 100 characters of the response.</p>
<p><strong>Solution:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGtvdGxpbnguY29yb3V0aW5lcy4qCmltcG9ydCBqYXZhLm5ldC5VUkwKCmZ1biBtYWluKCkgPSBydW5CbG9ja2luZyB7CiAgICB2YWwgZGF0YSA9IGZldGNoRGF0YUZyb21OZXR3b3JrKCkKICAgIHByaW50bG4oZGF0YS50YWtlKDEwMCkpCn0KCnN1c3BlbmQgZnVuIGZldGNoRGF0YUZyb21OZXR3b3JrKCk6IFN0cmluZyA9IHdpdGhDb250ZXh0KERpc3BhdGNoZXJzLklPKSB7CiAgICB2YWwgdXJsID0gVVJMKCJodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vcG9zdHMiKQogICAgdXJsLnJlYWRUZXh0KCkKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import kotlinx.coroutines.*
import java.net.URL

fun main() = runBlocking {
    val data = fetchDataFromNetwork()
    println(data.take(100))
}

suspend fun fetchDataFromNetwork(): String = withContext(Dispatchers.IO) {
    val url = URL(&quot;https://jsonplaceholder.typicode.com/posts&quot;)
    url.readText()
}</pre></div><div class='content'></div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Blocking the Main Thread</strong>: Avoid using <code>runBlocking</code> in the main thread of an Android application as it can freeze the UI.</li>
<li><strong>Not Handling Exceptions</strong>: Always handle exceptions in coroutines using <code>try-catch</code> or <code>CoroutineExceptionHandler</code>.</li>
<li><strong>Ignoring Coroutine Scope</strong>: Use structured concurrency to manage the lifecycle of coroutines effectively.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, you learned about coroutines and their benefits for asynchronous programming in Kotlin. You explored basic coroutine usage, structured concurrency, and practical examples. By mastering coroutines, you can write more efficient and responsive applications. In the next module, we will delve into Kotlin for Android development, where you will see how coroutines can be applied in real-world Android applications.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-03-higher-order-functions-functional-programming' title="Higher-Order Functions and Functional Programming">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='03-05-dsl-domain-specific-language' title="DSL (Domain Specific Language) in Kotlin">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Advertising</h1>
<p>This space is reserved for advertising.</p>
<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Thank you for collaborating!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			









		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
