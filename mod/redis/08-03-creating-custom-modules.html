<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    <title>Creating Custom Modules</title>

    <link rel="alternate" href="https://campusempresa.com/mod/redis/08-03-creating-custom-modules" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/redis/08-03-creating-custom-modules" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/redis/08-03-creating-custom-modules" hreflang="en" />
    
	<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"> -->
	<link href="/css/bootstrap/bootstrap.css?v=1" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.2b8e6213f8.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "redis";
  		var TEMA_NAME = "08-03";
  		var TYPE = "mod";
  		var PATH = "mod/redis/08-03-creating-custom-modules";
  		var IS_INDEX = false;
  		var DEVELOP = sessionStorage.getItem("DEVELOP") == "true";
  		  		var ALL_PAGES_MOD = ["01-01-what-is-redis","01-02-installing-redis","01-03-basic-redis-data-types","01-04-redis-cli-basics","02-01-strings","02-02-lists","02-03-sets","02-04-hashes","02-05-sorted-sets","03-01-basic-commands","03-02-advanced-commands","03-03-transactions","03-04-pipelining","04-01-snapshots-rdb","04-02-append-only-files-aof","04-03-persistence-configuration","04-04-backup-and-restore","05-01-authentication","05-02-encryption","05-03-access-control-lists-acls","05-04-security-best-practices","06-01-memory-optimization","06-02-latency-and-throughput","06-03-performance-tuning","06-04-monitoring-and-metrics","07-01-replication","07-02-sentinel","07-03-cluster-mode","07-04-scaling-redis","08-01-introduction-to-redis-modules","08-02-popular-redis-modules","08-03-creating-custom-modules","08-04-using-redis-with-other-technologies","09-01-caching","09-02-session-storage","09-03-message-queues","09-04-real-time-analytics","10-01-deployment-strategies","10-02-monitoring-and-maintenance","10-03-troubleshooting","10-04-case-studies"];
  		  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<!-- <script type="text/javascript" src="/js/main.js"></script> -->
  	<script type="module" src="/js/app.198aab099d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/redis/08-03-creating-custom-modules" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/redis/08-03-creating-custom-modules" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my_modules" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/end_modules" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" style="display:none;" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="redis">
		<a  href="#" class="text-secondary d-none" data-read-mod="redis" data-read-unit="08-03" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="redis" data-unread-unit="08-03" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='08-02-popular-redis-modules' title="Popular Redis Modules" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='08-02-popular-redis-modules' title="Popular Redis Modules" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">Creating Custom Modules</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='08-04-using-redis-with-other-technologies' title="Using Redis with Other Technologies" class="py-2 px-3 btn btn-primary"
				data-read-mod="redis" data-read-unit="08-03">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='08-04-using-redis-with-other-technologies' title="Using Redis with Other Technologies" class="py-2 px-3 btn btn-primary" 
				data-read-mod="redis" data-read-unit="08-03">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Redis modules extend the functionality of Redis by allowing developers to add custom commands and data types. This module will guide you through the process of creating your own Redis module, from setting up the development environment to writing and deploying your custom module.</p>
</div><h1><ol>
<li>Setting Up the Development Environment</li>
</ol></h1>
<div class='content'><p>Before you start creating a custom Redis module, you need to set up your development environment.</p>
</div><h2>Prerequisites</h2>
<div class='content'><ul>
<li><strong>Redis</strong>: Ensure you have Redis installed on your machine.</li>
<li><strong>C Compiler</strong>: Redis modules are typically written in C, so you need a C compiler like <code>gcc</code>.</li>
<li><strong>Redis Module SDK</strong>: Download the Redis Module SDK from the <a href="https://github.com/RedisLabs/redis-module-sdk">Redis Labs GitHub repository</a>.</li>
</ul>
</div><h2>Steps</h2>
<div class='content'><ol>
<li>
<p><strong>Install Redis</strong>:</p>
<pre><code class="language-bash">sudo apt-get update
sudo apt-get install redis-server
</code></pre>
</li>
<li>
<p><strong>Install GCC</strong>:</p>
<pre><code class="language-bash">sudo apt-get install build-essential
</code></pre>
</li>
<li>
<p><strong>Clone the Redis Module SDK</strong>:</p>
<pre><code class="language-bash">git clone https://github.com/RedisLabs/redis-module-sdk.git
cd redis-module-sdk
</code></pre>
</li>
</ol>
</div><h1><ol start="2">
<li>Writing Your First Redis Module</li>
</ol></h1>
<div class='content'></div><h2>Creating the Module File</h2>
<div class='content'><p>Create a new file named <code>mymodule.c</code> in the <code>redis-module-sdk</code> directory.</p>
</div><h2>Basic Structure of a Redis Module</h2>
<div class='content'><p>Here is a basic structure of a Redis module:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgInJlZGlzbW9kdWxlLmgiCgovLyBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiB0aGUgY29tbWFuZCBpcyBleGVjdXRlZAppbnQgTXlDb21tYW5kX1JlZGlzQ29tbWFuZChSZWRpc01vZHVsZUN0eCAqY3R4LCBSZWRpc01vZHVsZVN0cmluZyAqKmFyZ3YsIGludCBhcmdjKSB7CiAgICBpZiAoYXJnYyAhPSAyKSB7CiAgICAgICAgcmV0dXJuIFJlZGlzTW9kdWxlX1dyb25nQXJpdHkoY3R4KTsKICAgIH0KICAgIFJlZGlzTW9kdWxlX1JlcGx5V2l0aFN0cmluZyhjdHgsIGFyZ3ZbMV0pOwogICAgcmV0dXJuIFJFRElTTU9EVUxFX09LOwp9CgovLyBNb2R1bGUgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24KaW50IFJlZGlzTW9kdWxlX09uTG9hZChSZWRpc01vZHVsZUN0eCAqY3R4LCBSZWRpc01vZHVsZVN0cmluZyAqKmFyZ3YsIGludCBhcmdjKSB7CiAgICBpZiAoUmVkaXNNb2R1bGVfSW5pdChjdHgsICJteW1vZHVsZSIsIDEsIFJFRElTTU9EVUxFX0FQSVZFUl8xKSA9PSBSRURJU01PRFVMRV9FUlIpIHsKICAgICAgICByZXR1cm4gUkVESVNNT0RVTEVfRVJSOwogICAgfQogICAgaWYgKFJlZGlzTW9kdWxlX0NyZWF0ZUNvbW1hbmQoY3R4LCAibXltb2R1bGUubXljb21tYW5kIiwgTXlDb21tYW5kX1JlZGlzQ29tbWFuZCwgInJlYWRvbmx5IiwgMSwgMSwgMSkgPT0gUkVESVNNT0RVTEVfRVJSKSB7CiAgICAgICAgcmV0dXJuIFJFRElTTU9EVUxFX0VSUjsKICAgIH0KICAgIHJldHVybiBSRURJU01PRFVMRV9PSzsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &quot;redismodule.h&quot;

// Function to be called when the command is executed
int MyCommand_RedisCommand(RedisModuleCtx *ctx, RedisModuleString **argv, int argc) {
    if (argc != 2) {
        return RedisModule_WrongArity(ctx);
    }
    RedisModule_ReplyWithString(ctx, argv[1]);
    return REDISMODULE_OK;
}

// Module initialization function
int RedisModule_OnLoad(RedisModuleCtx *ctx, RedisModuleString **argv, int argc) {
    if (RedisModule_Init(ctx, &quot;mymodule&quot;, 1, REDISMODULE_APIVER_1) == REDISMODULE_ERR) {
        return REDISMODULE_ERR;
    }
    if (RedisModule_CreateCommand(ctx, &quot;mymodule.mycommand&quot;, MyCommand_RedisCommand, &quot;readonly&quot;, 1, 1, 1) == REDISMODULE_ERR) {
        return REDISMODULE_ERR;
    }
    return REDISMODULE_OK;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Include the Redis Module API</strong>: <code>#include &quot;redismodule.h&quot;</code></li>
<li><strong>Define the Command Function</strong>: <code>MyCommand_RedisCommand</code> is the function that will be executed when the custom command is called.</li>
<li><strong>Initialize the Module</strong>: <code>RedisModule_OnLoad</code> is the entry point of the module. It registers the module and the custom command.</li>
</ul>
</div><h2>Compiling the Module</h2>
<div class='content'><p>Compile the module using <code>gcc</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2NjIC1vIG15bW9kdWxlLnNvIC1zaGFyZWQgLWZQSUMgbXltb2R1bGUuYyAtSS9wYXRoL3RvL3JlZGlzL3NyYw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcc -o mymodule.so -shared -fPIC mymodule.c -I/path/to/redis/src</pre></div><div class='content'><p>Replace <code>/path/to/redis/src</code> with the path to the Redis source code.</p>
</div><h1><ol start="3">
<li>Loading and Testing the Module</li>
</ol></h1>
<div class='content'></div><h2>Loading the Module</h2>
<div class='content'><p>Start the Redis server with the module loaded:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVkaXMtc2VydmVyIC0tbG9hZG1vZHVsZSAuL215bW9kdWxlLnNv"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>redis-server --loadmodule ./mymodule.so</pre></div><div class='content'></div><h2>Testing the Module</h2>
<div class='content'><p>Open the Redis CLI and test the custom command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVkaXMtY2xpCjEyNy4wLjAuMTo2Mzc5PiBteW1vZHVsZS5teWNvbW1hbmQgIkhlbGxvLCBSZWRpcyEiCiJIZWxsbywgUmVkaXMhIg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>redis-cli
127.0.0.1:6379&gt; mymodule.mycommand &quot;Hello, Redis!&quot;
&quot;Hello, Redis!&quot;</pre></div><div class='content'></div><h1><ol start="4">
<li>Advanced Module Features</li>
</ol></h1>
<div class='content'></div><h2>Adding Custom Data Types</h2>
<div class='content'><p>Redis modules can define custom data types. Here is an example of how to define a custom data type:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRGVmaW5lIHRoZSBjdXN0b20gZGF0YSB0eXBlClJlZGlzTW9kdWxlVHlwZSAqTXlUeXBlOwoKdHlwZWRlZiBzdHJ1Y3QgewogICAgbG9uZyBsb25nIHZhbHVlOwp9IE15VHlwZU9iamVjdDsKCi8vIEZ1bmN0aW9uIHRvIGNyZWF0ZSBhIG5ldyBvYmplY3QKdm9pZCAqTXlUeXBlX1JkYkxvYWQoUmVkaXNNb2R1bGVJTyAqcmRiLCBpbnQgZW5jdmVyKSB7CiAgICBNeVR5cGVPYmplY3QgKm8gPSBSZWRpc01vZHVsZV9BbGxvYyhzaXplb2YoKm8pKTsKICAgIG8tPnZhbHVlID0gUmVkaXNNb2R1bGVfTG9hZFNpZ25lZChyZGIpOwogICAgcmV0dXJuIG87Cn0KCi8vIEZ1bmN0aW9uIHRvIHNhdmUgdGhlIG9iamVjdCB0byBSREIKdm9pZCBNeVR5cGVfUmRiU2F2ZShSZWRpc01vZHVsZUlPICpyZGIsIHZvaWQgKnZhbHVlKSB7CiAgICBNeVR5cGVPYmplY3QgKm8gPSB2YWx1ZTsKICAgIFJlZGlzTW9kdWxlX1NhdmVTaWduZWQocmRiLCBvLT52YWx1ZSk7Cn0KCi8vIEZ1bmN0aW9uIHRvIGZyZWUgdGhlIG9iamVjdAp2b2lkIE15VHlwZV9GcmVlKHZvaWQgKnZhbHVlKSB7CiAgICBSZWRpc01vZHVsZV9GcmVlKHZhbHVlKTsKfQoKLy8gTW9kdWxlIGluaXRpYWxpemF0aW9uIGZ1bmN0aW9uCmludCBSZWRpc01vZHVsZV9PbkxvYWQoUmVkaXNNb2R1bGVDdHggKmN0eCwgUmVkaXNNb2R1bGVTdHJpbmcgKiphcmd2LCBpbnQgYXJnYykgewogICAgaWYgKFJlZGlzTW9kdWxlX0luaXQoY3R4LCAibXltb2R1bGUiLCAxLCBSRURJU01PRFVMRV9BUElWRVJfMSkgPT0gUkVESVNNT0RVTEVfRVJSKSB7CiAgICAgICAgcmV0dXJuIFJFRElTTU9EVUxFX0VSUjsKICAgIH0KCiAgICAvLyBSZWdpc3RlciB0aGUgY3VzdG9tIGRhdGEgdHlwZQogICAgUmVkaXNNb2R1bGVUeXBlTWV0aG9kcyB0bSA9IHsKICAgICAgICAudmVyc2lvbiA9IFJFRElTTU9EVUxFX1RZUEVfTUVUSE9EX1ZFUlNJT04sCiAgICAgICAgLnJkYl9sb2FkID0gTXlUeXBlX1JkYkxvYWQsCiAgICAgICAgLnJkYl9zYXZlID0gTXlUeXBlX1JkYlNhdmUsCiAgICAgICAgLmFvZl9yZXdyaXRlID0gTlVMTCwKICAgICAgICAubWVtX3VzYWdlID0gTlVMTCwKICAgICAgICAuZGlnZXN0ID0gTlVMTCwKICAgICAgICAuZnJlZSA9IE15VHlwZV9GcmVlCiAgICB9OwoKICAgIE15VHlwZSA9IFJlZGlzTW9kdWxlX0NyZWF0ZURhdGFUeXBlKGN0eCwgIm15dHlwZSIsIDAsICZ0bSk7CiAgICBpZiAoTXlUeXBlID09IE5VTEwpIHJldHVybiBSRURJU01PRFVMRV9FUlI7CgogICAgcmV0dXJuIFJFRElTTU9EVUxFX09LOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Define the custom data type
RedisModuleType *MyType;

typedef struct {
    long long value;
} MyTypeObject;

// Function to create a new object
void *MyType_RdbLoad(RedisModuleIO *rdb, int encver) {
    MyTypeObject *o = RedisModule_Alloc(sizeof(*o));
    o-&gt;value = RedisModule_LoadSigned(rdb);
    return o;
}

// Function to save the object to RDB
void MyType_RdbSave(RedisModuleIO *rdb, void *value) {
    MyTypeObject *o = value;
    RedisModule_SaveSigned(rdb, o-&gt;value);
}

// Function to free the object
void MyType_Free(void *value) {
    RedisModule_Free(value);
}

// Module initialization function
int RedisModule_OnLoad(RedisModuleCtx *ctx, RedisModuleString **argv, int argc) {
    if (RedisModule_Init(ctx, &quot;mymodule&quot;, 1, REDISMODULE_APIVER_1) == REDISMODULE_ERR) {
        return REDISMODULE_ERR;
    }

    // Register the custom data type
    RedisModuleTypeMethods tm = {
        .version = REDISMODULE_TYPE_METHOD_VERSION,
        .rdb_load = MyType_RdbLoad,
        .rdb_save = MyType_RdbSave,
        .aof_rewrite = NULL,
        .mem_usage = NULL,
        .digest = NULL,
        .free = MyType_Free
    };

    MyType = RedisModule_CreateDataType(ctx, &quot;mytype&quot;, 0, &amp;tm);
    if (MyType == NULL) return REDISMODULE_ERR;

    return REDISMODULE_OK;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Define the Custom Data Type</strong>: <code>MyTypeObject</code> is a simple structure with a single <code>value</code> field.</li>
<li><strong>Implement RDB Load and Save Functions</strong>: These functions handle the serialization and deserialization of the custom data type.</li>
<li><strong>Register the Custom Data Type</strong>: The <code>RedisModule_CreateDataType</code> function registers the custom data type with Redis.</li>
</ul>
</div><h1><ol start="5">
<li>Practical Exercise</li>
</ol></h1>
<div class='content'></div><h2>Exercise</h2>
<div class='content'><p>Create a Redis module that defines a custom command <code>mymodule.add</code> which takes two integer arguments and returns their sum.</p>
</div><h2>Solution</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgInJlZGlzbW9kdWxlLmgiCgppbnQgQWRkQ29tbWFuZF9SZWRpc0NvbW1hbmQoUmVkaXNNb2R1bGVDdHggKmN0eCwgUmVkaXNNb2R1bGVTdHJpbmcgKiphcmd2LCBpbnQgYXJnYykgewogICAgaWYgKGFyZ2MgIT0gMykgewogICAgICAgIHJldHVybiBSZWRpc01vZHVsZV9Xcm9uZ0FyaXR5KGN0eCk7CiAgICB9CgogICAgbG9uZyBsb25nIGEsIGI7CiAgICBpZiAoUmVkaXNNb2R1bGVfU3RyaW5nVG9Mb25nTG9uZyhhcmd2WzFdLCAmYSkgIT0gUkVESVNNT0RVTEVfT0sgfHwKICAgICAgICBSZWRpc01vZHVsZV9TdHJpbmdUb0xvbmdMb25nKGFyZ3ZbMl0sICZiKSAhPSBSRURJU01PRFVMRV9PSykgewogICAgICAgIFJlZGlzTW9kdWxlX1JlcGx5V2l0aEVycm9yKGN0eCwgIkVSUiBpbnZhbGlkIGludGVnZXIiKTsKICAgICAgICByZXR1cm4gUkVESVNNT0RVTEVfRVJSOwogICAgfQoKICAgIFJlZGlzTW9kdWxlX1JlcGx5V2l0aExvbmdMb25nKGN0eCwgYSArIGIpOwogICAgcmV0dXJuIFJFRElTTU9EVUxFX09LOwp9CgppbnQgUmVkaXNNb2R1bGVfT25Mb2FkKFJlZGlzTW9kdWxlQ3R4ICpjdHgsIFJlZGlzTW9kdWxlU3RyaW5nICoqYXJndiwgaW50IGFyZ2MpIHsKICAgIGlmIChSZWRpc01vZHVsZV9Jbml0KGN0eCwgIm15bW9kdWxlIiwgMSwgUkVESVNNT0RVTEVfQVBJVkVSXzEpID09IFJFRElTTU9EVUxFX0VSUikgewogICAgICAgIHJldHVybiBSRURJU01PRFVMRV9FUlI7CiAgICB9CiAgICBpZiAoUmVkaXNNb2R1bGVfQ3JlYXRlQ29tbWFuZChjdHgsICJteW1vZHVsZS5hZGQiLCBBZGRDb21tYW5kX1JlZGlzQ29tbWFuZCwgInJlYWRvbmx5IiwgMSwgMSwgMSkgPT0gUkVESVNNT0RVTEVfRVJSKSB7CiAgICAgICAgcmV0dXJuIFJFRElTTU9EVUxFX0VSUjsKICAgIH0KICAgIHJldHVybiBSRURJU01PRFVMRV9PSzsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &quot;redismodule.h&quot;

int AddCommand_RedisCommand(RedisModuleCtx *ctx, RedisModuleString **argv, int argc) {
    if (argc != 3) {
        return RedisModule_WrongArity(ctx);
    }

    long long a, b;
    if (RedisModule_StringToLongLong(argv[1], &amp;a) != REDISMODULE_OK ||
        RedisModule_StringToLongLong(argv[2], &amp;b) != REDISMODULE_OK) {
        RedisModule_ReplyWithError(ctx, &quot;ERR invalid integer&quot;);
        return REDISMODULE_ERR;
    }

    RedisModule_ReplyWithLongLong(ctx, a + b);
    return REDISMODULE_OK;
}

int RedisModule_OnLoad(RedisModuleCtx *ctx, RedisModuleString **argv, int argc) {
    if (RedisModule_Init(ctx, &quot;mymodule&quot;, 1, REDISMODULE_APIVER_1) == REDISMODULE_ERR) {
        return REDISMODULE_ERR;
    }
    if (RedisModule_CreateCommand(ctx, &quot;mymodule.add&quot;, AddCommand_RedisCommand, &quot;readonly&quot;, 1, 1, 1) == REDISMODULE_ERR) {
        return REDISMODULE_ERR;
    }
    return REDISMODULE_OK;
}</pre></div><div class='content'></div><h2>Compiling and Testing</h2>
<div class='content'><ol>
<li>
<p><strong>Compile the Module</strong>:</p>
<pre><code class="language-bash">gcc -o mymodule.so -shared -fPIC mymodule.c -I/path/to/redis/src
</code></pre>
</li>
<li>
<p><strong>Load the Module</strong>:</p>
<pre><code class="language-bash">redis-server --loadmodule ./mymodule.so
</code></pre>
</li>
<li>
<p><strong>Test the Command</strong>:</p>
<pre><code class="language-bash">redis-cli
127.0.0.1:6379&gt; mymodule.add 5 10
(integer) 15
</code></pre>
</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, you learned how to create custom Redis modules, including setting up the development environment, writing a basic module, and adding custom commands and data types. You also practiced creating a simple module that adds two integers. With this knowledge, you can extend Redis to meet your specific needs and integrate it more deeply into your applications.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='08-02-popular-redis-modules' title="Popular Redis Modules" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='08-02-popular-redis-modules' title="Popular Redis Modules" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='08-04-using-redis-with-other-technologies' title="Using Redis with Other Technologies" class="py-2 px-3 btn btn-primary"
				data-read-mod="redis" data-read-unit="08-03">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='08-04-using-redis-with-other-technologies' title="Using Redis with Other Technologies" class="py-2 px-3 btn btn-primary" 
				data-read-mod="redis" data-read-unit="08-03">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Redis Course</h1>
<h2>Module 1: Introduction to Redis</h2>
<ul>
<li><a href="01-01-what-is-redis">What is Redis?</a></li>
<li><a href="01-02-installing-redis">Installing Redis</a></li>
<li><a href="01-03-basic-redis-data-types">Basic Redis Data Types</a></li>
<li><a href="01-04-redis-cli-basics">Redis CLI Basics</a></li>
</ul>
<h2>Module 2: Redis Data Structures</h2>
<ul>
<li><a href="02-01-strings">Strings</a></li>
<li><a href="02-02-lists">Lists</a></li>
<li><a href="02-03-sets">Sets</a></li>
<li><a href="02-04-hashes">Hashes</a></li>
<li><a href="02-05-sorted-sets">Sorted Sets</a></li>
</ul>
<h2>Module 3: Redis Commands and Operations</h2>
<ul>
<li><a href="03-01-basic-commands">Basic Commands</a></li>
<li><a href="03-02-advanced-commands">Advanced Commands</a></li>
<li><a href="03-03-transactions">Transactions</a></li>
<li><a href="03-04-pipelining">Pipelining</a></li>
</ul>
<h2>Module 4: Redis Persistence</h2>
<ul>
<li><a href="04-01-snapshots-rdb">Snapshots (RDB)</a></li>
<li><a href="04-02-append-only-files-aof">Append-Only Files (AOF)</a></li>
<li><a href="04-03-persistence-configuration">Persistence Configuration</a></li>
<li><a href="04-04-backup-and-restore">Backup and Restore</a></li>
</ul>
<h2>Module 5: Redis Security</h2>
<ul>
<li><a href="05-01-authentication">Authentication</a></li>
<li><a href="05-02-encryption">Encryption</a></li>
<li><a href="05-03-access-control-lists-acls">Access Control Lists (ACLs)</a></li>
<li><a href="05-04-security-best-practices">Security Best Practices</a></li>
</ul>
<h2>Module 6: Redis Performance Optimization</h2>
<ul>
<li><a href="06-01-memory-optimization">Memory Optimization</a></li>
<li><a href="06-02-latency-and-throughput">Latency and Throughput</a></li>
<li><a href="06-03-performance-tuning">Performance Tuning</a></li>
<li><a href="06-04-monitoring-and-metrics">Monitoring and Metrics</a></li>
</ul>
<h2>Module 7: Redis Clustering and High Availability</h2>
<ul>
<li><a href="07-01-replication">Replication</a></li>
<li><a href="07-02-sentinel">Sentinel</a></li>
<li><a href="07-03-cluster-mode">Cluster Mode</a></li>
<li><a href="07-04-scaling-redis">Scaling Redis</a></li>
</ul>
<h2>Module 8: Redis Modules and Extensions</h2>
<ul>
<li><a href="08-01-introduction-to-redis-modules">Introduction to Redis Modules</a></li>
<li><a href="08-02-popular-redis-modules">Popular Redis Modules</a></li>
<li><a href="08-03-creating-custom-modules">Creating Custom Modules</a></li>
<li><a href="08-04-using-redis-with-other-technologies">Using Redis with Other Technologies</a></li>
</ul>
<h2>Module 9: Advanced Redis Use Cases</h2>
<ul>
<li><a href="09-01-caching">Caching</a></li>
<li><a href="09-02-session-storage">Session Storage</a></li>
<li><a href="09-03-message-queues">Message Queues</a></li>
<li><a href="09-04-real-time-analytics">Real-Time Analytics</a></li>
</ul>
<h2>Module 10: Redis in Production</h2>
<ul>
<li><a href="10-01-deployment-strategies">Deployment Strategies</a></li>
<li><a href="10-02-monitoring-and-maintenance">Monitoring and Maintenance</a></li>
<li><a href="10-03-troubleshooting">Troubleshooting</a></li>
<li><a href="10-04-case-studies">Case Studies</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<p id="loginModalEmail"></p>
            	<div id="mensaje" class="d-none alert alert-danger"></div>
            	<div id="mensaje_info" class="d-none alert alert-success"></div>
            	
            	<div id="modal-body-main">
					<div class="mt-4 d-none" id="forgotPasswordSection">
						<div class="mb-3">
    <label for="recovery-email" class="form-label">Email</label>
    <input type="email" required class="form-control" id="recovery-email" placeholder="Enter your email">
</div>
<button class="btn btn-primary" id="btnRecover">Send recovery link</button>

					</div>
									
					<div class="mt-4 d-none" id="deleteUserSection">	
						<div class="mb-3 alert alert-danger">
	Warning! You are about to delete all registration and progress data.<br><b>This action cannot be undone.</b>
</div>
<div class="mb-3">
    <input type="password" required class="form-control" id="delete-user-pwd" placeholder="Enter your password">
</div>
<button class="btn btn-primary" id="btnDeleteUser">Delete user</button>

					</div>
					
					<div class="mt-4 d-none" id="changePassordSection">
						<div class="mb-3 row">
	<div class="col col-12 my-2">
	    <input type="password" required class="form-control" id="change-pwd-actual" placeholder="Enter current password">
	</div>
	<div class="col col-12 my-2">
    	<input type="password" required class="form-control" id="change-pwd-new-1" placeholder="Enter new password">
	</div>
	<div class="col col-12 my-2">
    	<input type="password" required class="form-control" id="change-pwd-new-2" placeholder="Repeat new password">
	</div>
</div>
<button class="btn btn-primary" id="btnChangePassword">Change password</button>

					</div>
					
					<div class="mt-4 d-none alert alert-warning" id="verifyPasswordSection">
						<p><b>Falta verificar correu</b></p>
						<a id="btnVerifyEmail" href="#">Send verification link</a>

					</div>
					
					<div class="mt-4 d-none" id="disconnectUserSection">
						<div class="mb-3">
    <button id="btnDisconnect" class="btn btn-primary">Disconnect</button>
</div>

<hr>

<div class="mt-3">
    <button class="btn btn-outline-secondary" id="change-password-link">Change password</button>
</div>

<div class="mt-3">
    <a href="#" id="delete-user-link">Delete user</a>
</div>

					</div>
	            
	            	<div class="mt-4 d-none" id="modalTabsSection">
	            		<ul class="nav nav-tabs" id="authTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button" role="tab" aria-controls="login" aria-selected="true">
        	Log in
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register" type="button" role="tab" aria-controls="register" aria-selected="false">
        	Sign up
        </button>
    </li>
</ul>

<div class="tab-content mt-3" id="authTabsContent">
    <div class="tab-pane fade show active" id="login" role="tabpanel" aria-labelledby="login-tab">
    	<div class="mb-3">
    <label for="login-username" class="form-label">Email</label>
    <input type="email" required class="form-control" id="login-username" placeholder="Enter your email">
</div>
<div class="mb-3">
    <label for="login-password" class="form-label">Password</label>
    <input type="password"  required class="form-control" id="login-password" placeholder="Enter your password">
</div>
<button class="btn btn-primary" id="btnLogin">Log in</button>
<div class="mt-3">
    <a href="#" id="forgot-password-link">Have you forgotten your password?</a>
</div>
    </div>

    <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
    	<div class="mb-3">
    <label for="register-email" class="form-label">Email</label>
    <input type="email" class="form-control" id="register-email" required placeholder="Enter your email">
</div>

<div class="mb-3">
    <label for="register-password" class="form-label">Password</label>
    <input type="password" class="form-control"  required id="register-password" placeholder="Enter your password">
</div>

<div class="mb-3">
    <label for="register-name" class="form-label">Name</label>
    <input type="text" class="form-control"  required id="register-name" placeholder="Enter your name">
</div>

<div class="form-check mb-3">
    <input type="checkbox" class="form-check-input" id="accept-conditions-reg">
    <label for="accept-conditions-reg" class="form-check-label">
        I have read and accept the <a href="/privacity" target="blank">Privacy Policy</a> and the <a href="/licence" target="blank">Terms and Conditions of Use</a>.
    </label>
</div>

<div class="form-check mb-3">
    <input type="checkbox" class="form-check-input" id="accept-allow_comunications">
    <label for="accept-allow_comunications" class="form-check-label">
        I wish to receive news and updates about courses (optional).
    </label>
</div>

<button id="btnRegister" class="btn btn-primary">Sign up</button>
    </div>
</div>
	            	</div>
            	</div>
            </div>
        </div>
    </div>
</div>

	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
