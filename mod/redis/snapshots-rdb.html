<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snapshots (RDB)</title>

    <link rel="alternate" href="https://campusempresa.com/mod/redis/snapshots-rdb" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/redis/snapshots-rdb" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/redis/snapshots-rdb" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/redis/snapshots-rdb" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/redis/snapshots-rdb" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='scripting-with-lua'>&#x25C4;Scripting with Lua</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Snapshots (RDB)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='append-only-files-aof'>Append-Only Files (AOF) &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Snapshots (RDB)</h1>
<div class='content'><p>Redis Database (RDB) snapshots are a mechanism for persisting the in-memory data to disk. This allows Redis to save the current state of the database at specified intervals, ensuring data durability and enabling recovery in case of a server crash.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>RDB File</strong>: A binary file that contains a snapshot of the Redis dataset at a particular point in time.</li>
<li><strong>Persistence</strong>: The process of saving the in-memory data to disk.</li>
<li><strong>Snapshotting</strong>: The act of taking a snapshot of the current dataset and writing it to an RDB file.</li>
</ul>
</div><h1>How Snapshots Work</h1>
<div class='content'><p>Redis can be configured to take snapshots of the dataset at specified intervals. These snapshots are stored in RDB files, which can be used to restore the dataset in case of a failure.</p>
</div><h2>Configuration</h2>
<div class='content'><p>You can configure Redis to take snapshots by editing the <code>redis.conf</code> file. The <code>save</code> directive specifies the intervals at which snapshots should be taken.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBTYXZlIHRoZSBEQiBldmVyeSA2MCBzZWNvbmRzIGlmIGF0IGxlYXN0IDEwMDAga2V5cyBoYXZlIGNoYW5nZWQKc2F2ZSA2MCAxMDAwCgojIFNhdmUgdGhlIERCIGV2ZXJ5IDMwMCBzZWNvbmRzIGlmIGF0IGxlYXN0IDEwIGtleXMgaGF2ZSBjaGFuZ2VkCnNhdmUgMzAwIDEw"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Save the DB every 60 seconds if at least 1000 keys have changed
save 60 1000

# Save the DB every 300 seconds if at least 10 keys have changed
save 300 10</pre></div><div class='content'></div><h2>Triggering Snapshots</h2>
<div class='content'><p>Snapshots can be triggered manually or automatically based on the configuration.</p>
<ul>
<li>
<p><strong>Manual Trigger</strong>: You can manually trigger a snapshot using the <code>BGSAVE</code> command.</p>
<pre><code class="language-plaintext">BGSAVE
</code></pre>
</li>
<li>
<p><strong>Automatic Trigger</strong>: Redis will automatically trigger a snapshot based on the <code>save</code> directives in the configuration file.</p>
</li>
</ul>
</div><h2>Example</h2>
<div class='content'><p>Let's consider an example where we configure Redis to take a snapshot every 60 seconds if at least 1000 keys have changed.</p>
<ol>
<li>
<p>Edit the <code>redis.conf</code> file to include the following line:</p>
<pre><code class="language-plaintext">save 60 1000
</code></pre>
</li>
<li>
<p>Restart the Redis server to apply the changes:</p>
<pre><code class="language-sh">redis-server /path/to/redis.conf
</code></pre>
</li>
<li>
<p>Perform some operations to change the dataset:</p>
<pre><code class="language-plaintext">SET key1 value1
SET key2 value2
...
</code></pre>
</li>
<li>
<p>After 60 seconds, if at least 1000 keys have changed, Redis will automatically take a snapshot and save it to an RDB file.</p>
</li>
</ol>
</div><h1>Advantages and Disadvantages</h1>
<h2>Advantages</h2>
<div class='content'><ul>
<li><strong>Efficiency</strong>: RDB snapshots are compact and efficient, making them suitable for backups.</li>
<li><strong>Speed</strong>: Loading an RDB file is faster compared to other persistence mechanisms.</li>
<li><strong>Simplicity</strong>: Easy to configure and use.</li>
</ul>
</div><h2>Disadvantages</h2>
<div class='content'><ul>
<li><strong>Data Loss</strong>: Since snapshots are taken at intervals, there is a risk of losing data between snapshots.</li>
<li><strong>Resource Intensive</strong>: Taking a snapshot can be resource-intensive, especially for large datasets.</li>
</ul>
<p>| Feature          | RDB Snapshots                |
|------------------|------------------------------|
| Persistence Type | Snapshot-based               |
| Data Loss Risk   | Possible between snapshots   |
| Performance      | Efficient for backups        |
| Resource Usage   | Can be resource-intensive    |</p>
</div><h1>Conclusion</h1>
<div class='content'><p>RDB snapshots provide a simple and efficient way to persist Redis data to disk. While they offer advantages in terms of speed and simplicity, they also come with the risk of potential data loss between snapshots. Understanding how to configure and use RDB snapshots effectively is crucial for maintaining data durability in Redis.</p>
<p>By mastering RDB snapshots, you can ensure that your Redis database remains resilient and can recover from failures with minimal data loss.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='scripting-with-lua'>&#x25C4;Scripting with Lua</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Snapshots (RDB)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='append-only-files-aof'>Append-Only Files (AOF) &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
