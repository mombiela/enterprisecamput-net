<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    <title>Persistence Configuration</title>

    <link rel="alternate" href="https://campusempresa.com/mod/redis/04-03-persistence-configuration" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/redis/04-03-persistence-configuration" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/redis/04-03-persistence-configuration" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>var DEVELOP = window.location.href.indexOf("localhost")!=-1 && true;</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/redis/04-03-persistence-configuration" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/redis/04-03-persistence-configuration" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col" id="left_menu">
					<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Course Content
	</a>

			</div>
		</div>
	</div>
</div>

<!--  
<div class="top-bar container-fluid">
	<div class="container-xxl">
		<nav class="navbar navbar-expand-md p-0">
			<div class="container-fluid">
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				
				<div class="collapse navbar-collapse" id="navbarNav">
					<div class="navbar-nav me-auto">
							<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Course Content
	</a>

					</div>
				</div>			
							</div>
		</nav>
	</div>
</div>
 -->				<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-02-append-only-files-aof' title="Append-Only Files (AOF)">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<h2 style="text-decoration:underline">Persistence Configuration</h2>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-04-backup-and-restore' title="Backup and Restore">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to configure Redis persistence to ensure data durability and reliability. Redis offers two main persistence mechanisms: RDB (Redis Database) snapshots and AOF (Append-Only File). Understanding how to configure these options will help you tailor Redis to your specific use case and performance requirements.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>RDB Snapshots</strong>: Periodic snapshots of your dataset, saved to disk.</li>
<li><strong>AOF (Append-Only File)</strong>: Logs every write operation received by the server, providing a more durable persistence mechanism.</li>
<li><strong>Persistence Configuration Parameters</strong>: Settings in the <code>redis.conf</code> file that control how and when data is saved.</li>
</ol>
</div><h1>Configuring RDB Snapshots</h1>
<div class='content'><p>RDB snapshots are configured using the <code>save</code> directive in the <code>redis.conf</code> file. This directive specifies the intervals at which Redis will create snapshots of the dataset.</p>
</div><h2>Example Configuration</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBTYXZlIHRoZSBEQiBpZiBib3RoIHRoZSBnaXZlbiBudW1iZXIgb2Ygc2Vjb25kcyBhbmQgdGhlIGdpdmVuIG51bWJlciBvZiB3cml0ZSBvcGVyYXRpb25zIGFnYWluc3QgdGhlIERCIG9jY3VycmVkLgpzYXZlIDkwMCAxICAgIyBTYXZlIGFmdGVyIDkwMCBzZWNvbmRzICgxNSBtaW51dGVzKSBpZiBhdCBsZWFzdCAxIGtleSBjaGFuZ2VkCnNhdmUgMzAwIDEwICAjIFNhdmUgYWZ0ZXIgMzAwIHNlY29uZHMgKDUgbWludXRlcykgaWYgYXQgbGVhc3QgMTAga2V5cyBjaGFuZ2VkCnNhdmUgNjAgMTAwMDAgIyBTYXZlIGFmdGVyIDYwIHNlY29uZHMgKDEgbWludXRlKSBpZiBhdCBsZWFzdCAxMDAwMCBrZXlzIGNoYW5nZWQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Save the DB if both the given number of seconds and the given number of write operations against the DB occurred.
save 900 1   # Save after 900 seconds (15 minutes) if at least 1 key changed
save 300 10  # Save after 300 seconds (5 minutes) if at least 10 keys changed
save 60 10000 # Save after 60 seconds (1 minute) if at least 10000 keys changed</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>save 900 1</code>: Redis will create a snapshot if at least one key has changed in the last 900 seconds.</li>
<li><code>save 300 10</code>: Redis will create a snapshot if at least ten keys have changed in the last 300 seconds.</li>
<li><code>save 60 10000</code>: Redis will create a snapshot if at least 10,000 keys have changed in the last 60 seconds.</li>
</ul>
</div><h2>Practical Exercise</h2>
<div class='content'><p><strong>Task</strong>: Configure Redis to save a snapshot every 10 minutes if at least 5 keys have changed.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2F2ZSA2MDAgNQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>save 600 5</pre></div><div class='content'></div><h1>Configuring AOF (Append-Only File)</h1>
<div class='content'><p>AOF provides a more durable persistence mechanism by logging every write operation. This can be configured using the <code>appendonly</code> and <code>appendfsync</code> directives in the <code>redis.conf</code> file.</p>
</div><h2>Example Configuration</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwZW5kb25seSB5ZXMKYXBwZW5kZnN5bmMgZXZlcnlzZWM="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>appendonly yes
appendfsync everysec</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>appendonly yes</code>: Enables AOF persistence.</li>
<li><code>appendfsync everysec</code>: Redis will synchronize the AOF file to disk every second. Other options include <code>always</code> (synchronize after every write operation) and <code>no</code> (let the operating system decide when to synchronize).</li>
</ul>
</div><h2>Practical Exercise</h2>
<div class='content'><p><strong>Task</strong>: Configure Redis to use AOF and synchronize the file to disk after every write operation.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBwZW5kb25seSB5ZXMKYXBwZW5kZnN5bmMgYWx3YXlz"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>appendonly yes
appendfsync always</pre></div><div class='content'></div><h1>Combining RDB and AOF</h1>
<div class='content'><p>Redis allows you to use both RDB and AOF persistence simultaneously. This can provide a balance between performance and durability.</p>
</div><h2>Example Configuration</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2F2ZSA5MDAgMQpzYXZlIDMwMCAxMApzYXZlIDYwIDEwMDAwCmFwcGVuZG9ubHkgeWVzCmFwcGVuZGZzeW5jIGV2ZXJ5c2Vj"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>save 900 1
save 300 10
save 60 10000
appendonly yes
appendfsync everysec</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li>The <code>save</code> directives configure RDB snapshots.</li>
<li>The <code>appendonly</code> and <code>appendfsync</code> directives configure AOF.</li>
</ul>
</div><h1>Persistence Configuration Parameters</h1>
<div class='content'><p>Here are some additional parameters you might find useful:</p>
<ul>
<li><code>dir</code>: The directory where Redis will store the RDB and AOF files.</li>
<li><code>dbfilename</code>: The name of the RDB file.</li>
<li><code>appendfilename</code>: The name of the AOF file.</li>
<li><code>stop-writes-on-bgsave-error</code>: Whether Redis should stop accepting writes if it encounters an error while saving a snapshot.</li>
</ul>
</div><h2>Example Configuration</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGlyIC92YXIvbGliL3JlZGlzCmRiZmlsZW5hbWUgZHVtcC5yZGIKYXBwZW5kZmlsZW5hbWUgYXBwZW5kb25seS5hb2YKc3RvcC13cml0ZXMtb24tYmdzYXZlLWVycm9yIHllcw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dir /var/lib/redis
dbfilename dump.rdb
appendfilename appendonly.aof
stop-writes-on-bgsave-error yes</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>dir /var/lib/redis</code>: Sets the directory for storing persistence files.</li>
<li><code>dbfilename dump.rdb</code>: Sets the name of the RDB file.</li>
<li><code>appendfilename appendonly.aof</code>: Sets the name of the AOF file.</li>
<li><code>stop-writes-on-bgsave-error yes</code>: Stops accepting writes if a background save (bgsave) error occurs.</li>
</ul>
</div><h1>Practical Exercise</h1>
<div class='content'><p><strong>Task</strong>: Configure Redis to store persistence files in <code>/data/redis</code>, name the RDB file <code>redis-dump.rdb</code>, and the AOF file <code>redis-appendonly.aof</code>. Ensure Redis stops accepting writes if a background save error occurs.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGlyIC9kYXRhL3JlZGlzCmRiZmlsZW5hbWUgcmVkaXMtZHVtcC5yZGIKYXBwZW5kZmlsZW5hbWUgcmVkaXMtYXBwZW5kb25seS5hb2YKc3RvcC13cml0ZXMtb24tYmdzYXZlLWVycm9yIHllcw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dir /data/redis
dbfilename redis-dump.rdb
appendfilename redis-appendonly.aof
stop-writes-on-bgsave-error yes</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>In this section, we covered how to configure Redis persistence using RDB snapshots and AOF. We explored various configuration parameters and provided practical exercises to reinforce the concepts. Properly configuring persistence is crucial for ensuring data durability and reliability in your Redis deployment.</p>
<p>Next, we will delve into <strong>Backup and Restore</strong> to understand how to manage Redis data effectively.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-02-append-only-files-aof' title="Append-Only Files (AOF)">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-04-backup-and-restore' title="Backup and Restore">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
				<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
	     crossorigin="anonymous"></script>
	<!-- enterprise_campus -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-0611338592562725"
	     data-ad-slot="6914733106"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
	     (adsbygoogle = window.adsbygoogle || []).push({});
	</script>
			
	<div class="container mt-2 d-none d-md-block index">
		<h1>Redis Course</h1>
<h2>Module 1: Introduction to Redis</h2>
<ul>
<li><a href="01-01-what-is-redis">What is Redis?</a></li>
<li><a href="01-02-installing-redis">Installing Redis</a></li>
<li><a href="01-03-basic-redis-data-types">Basic Redis Data Types</a></li>
<li><a href="01-04-redis-cli-basics">Redis CLI Basics</a></li>
</ul>
<h2>Module 2: Redis Data Structures</h2>
<ul>
<li><a href="02-01-strings">Strings</a></li>
<li><a href="02-02-lists">Lists</a></li>
<li><a href="02-03-sets">Sets</a></li>
<li><a href="02-04-hashes">Hashes</a></li>
<li><a href="02-05-sorted-sets">Sorted Sets</a></li>
</ul>
<h2>Module 3: Redis Commands and Operations</h2>
<ul>
<li><a href="03-01-basic-commands">Basic Commands</a></li>
<li><a href="03-02-advanced-commands">Advanced Commands</a></li>
<li><a href="03-03-transactions">Transactions</a></li>
<li><a href="03-04-pipelining">Pipelining</a></li>
</ul>
<h2>Module 4: Redis Persistence</h2>
<ul>
<li><a href="04-01-snapshots-rdb">Snapshots (RDB)</a></li>
<li><a href="04-02-append-only-files-aof">Append-Only Files (AOF)</a></li>
<li><a href="04-03-persistence-configuration">Persistence Configuration</a></li>
<li><a href="04-04-backup-and-restore">Backup and Restore</a></li>
</ul>
<h2>Module 5: Redis Security</h2>
<ul>
<li><a href="05-01-authentication">Authentication</a></li>
<li><a href="05-02-encryption">Encryption</a></li>
<li><a href="05-03-access-control-lists-acls">Access Control Lists (ACLs)</a></li>
<li><a href="05-04-security-best-practices">Security Best Practices</a></li>
</ul>
<h2>Module 6: Redis Performance Optimization</h2>
<ul>
<li><a href="06-01-memory-optimization">Memory Optimization</a></li>
<li><a href="06-02-latency-and-throughput">Latency and Throughput</a></li>
<li><a href="06-03-performance-tuning">Performance Tuning</a></li>
<li><a href="06-04-monitoring-and-metrics">Monitoring and Metrics</a></li>
</ul>
<h2>Module 7: Redis Clustering and High Availability</h2>
<ul>
<li><a href="07-01-replication">Replication</a></li>
<li><a href="07-02-sentinel">Sentinel</a></li>
<li><a href="07-03-cluster-mode">Cluster Mode</a></li>
<li><a href="07-04-scaling-redis">Scaling Redis</a></li>
</ul>
<h2>Module 8: Redis Modules and Extensions</h2>
<ul>
<li><a href="08-01-introduction-to-redis-modules">Introduction to Redis Modules</a></li>
<li><a href="08-02-popular-redis-modules">Popular Redis Modules</a></li>
<li><a href="08-03-creating-custom-modules">Creating Custom Modules</a></li>
<li><a href="08-04-using-redis-with-other-technologies">Using Redis with Other Technologies</a></li>
</ul>
<h2>Module 9: Advanced Redis Use Cases</h2>
<ul>
<li><a href="09-01-caching">Caching</a></li>
<li><a href="09-02-session-storage">Session Storage</a></li>
<li><a href="09-03-message-queues">Message Queues</a></li>
<li><a href="09-04-real-time-analytics">Real-Time Analytics</a></li>
</ul>
<h2>Module 10: Redis in Production</h2>
<ul>
<li><a href="10-01-deployment-strategies">Deployment Strategies</a></li>
<li><a href="10-02-monitoring-and-maintenance">Monitoring and Maintenance</a></li>
<li><a href="10-03-troubleshooting">Troubleshooting</a></li>
<li><a href="10-04-case-studies">Case Studies</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
