<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Replication in Redis</title>

    <link rel="alternate" href="https://campusempresa.com/mod/redis/replication" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/redis/replication" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/redis/replication" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/redis/replication" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/redis/replication" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='performance-tuning'>&#x25C4;Performance Tuning</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Replication in Redis</a>
	</div>
	<div class='col-4 text-end'>
					<a href='sentinel'>Sentinel &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Replication is a fundamental feature in Redis that allows data from one Redis server (the master) to be replicated to one or more Redis servers (the replicas). This ensures high availability, load balancing, and data redundancy.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Master</strong>: The primary Redis server where all write operations are performed.</li>
<li><strong>Replica</strong>: A secondary Redis server that receives data from the master and can serve read operations.</li>
<li><strong>Replication Link</strong>: The connection between the master and replica servers.</li>
<li><strong>Replication Lag</strong>: The delay between the master and replica data synchronization.</li>
</ul>
</div><h1>Setting Up Replication</h1>
<div class='content'></div><h2>Configuring the Master</h2>
<div class='content'><p>The master server does not require any special configuration to enable replication. It simply needs to be running and accessible by the replicas.</p>
</div><h2>Configuring the Replica</h2>
<div class='content'><p>To set up a replica, you need to configure it to connect to the master. This can be done by modifying the <code>redis.conf</code> file or using the <code>SLAVEOF</code> command.</p>
<h4>Using <code>redis.conf</code></h4>
<p>Add the following lines to the replica's <code>redis.conf</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVwbGljYW9mIDxtYXN0ZXItaXA+IDxtYXN0ZXItcG9ydD4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>replicaof &lt;master-ip&gt; &lt;master-port&gt;</pre></div><div class='content'><p>For example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVwbGljYW9mIDEyNy4wLjAuMSA2Mzc5"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>replicaof 127.0.0.1 6379</pre></div><div class='content'><h4>Using <code>SLAVEOF</code> Command</h4>
<p>You can also configure a replica at runtime using the <code>SLAVEOF</code> command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0xBVkVPRiAxMjcuMC4wLjEgNjM3OQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SLAVEOF 127.0.0.1 6379</pre></div><div class='content'></div><h2>Example</h2>
<div class='content'><p>Here is a simple example to illustrate setting up a master and a replica:</p>
<ol>
<li>
<p><strong>Start the Master Server</strong></p>
<pre><code class="language-bash">redis-server --port 6379
</code></pre>
</li>
<li>
<p><strong>Start the Replica Server</strong></p>
<pre><code class="language-bash">redis-server --port 6380
</code></pre>
</li>
<li>
<p><strong>Configure the Replica to Follow the Master</strong></p>
<pre><code class="language-bash">redis-cli -p 6380 SLAVEOF 127.0.0.1 6379
</code></pre>
</li>
</ol>
</div><h1>Verifying Replication</h1>
<div class='content'><p>To verify that replication is working, you can use the <code>INFO replication</code> command on both the master and the replica.</p>
</div><h2>On the Master</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVkaXMtY2xpIElORk8gcmVwbGljYXRpb24="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>redis-cli INFO replication</pre></div><div class='content'><p>Output:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBSZXBsaWNhdGlvbgpyb2xlOm1hc3Rlcgpjb25uZWN0ZWRfc2xhdmVzOjEKc2xhdmUwOmlwPTEyNy4wLjAuMSxwb3J0PTYzODAsc3RhdGU9b25saW5lLG9mZnNldD0xMjM0NSxsYWc9MA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Replication
role:master
connected_slaves:1
slave0:ip=127.0.0.1,port=6380,state=online,offset=12345,lag=0</pre></div><div class='content'></div><h2>On the Replica</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVkaXMtY2xpIC1wIDYzODAgSU5GTyByZXBsaWNhdGlvbg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>redis-cli -p 6380 INFO replication</pre></div><div class='content'><p>Output:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBSZXBsaWNhdGlvbgpyb2xlOnNsYXZlCm1hc3Rlcl9ob3N0OjEyNy4wLjAuMQptYXN0ZXJfcG9ydDo2Mzc5Cm1hc3Rlcl9saW5rX3N0YXR1czp1cA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Replication
role:slave
master_host:127.0.0.1
master_port:6379
master_link_status:up</pre></div><div class='content'></div><h1>Handling Failover</h1>
<div class='content'><p>Failover is the process of promoting a replica to master if the master fails. Redis does not handle automatic failover by default, but you can use Redis Sentinel for this purpose.</p>
</div><h2>Redis Sentinel</h2>
<div class='content'><p>Redis Sentinel is a system designed to manage Redis instances, providing high availability and monitoring.</p>
<h4>Setting Up Sentinel</h4>
<ol>
<li>
<p><strong>Create a Sentinel Configuration File</strong></p>
<pre><code class="language-plaintext">sentinel monitor mymaster 127.0.0.1 6379 2
sentinel down-after-milliseconds mymaster 5000
sentinel failover-timeout mymaster 60000
sentinel parallel-syncs mymaster 1
</code></pre>
</li>
<li>
<p><strong>Start Sentinel</strong></p>
<pre><code class="language-bash">redis-sentinel /path/to/sentinel.conf
</code></pre>
</li>
</ol>
</div><h2>Example</h2>
<div class='content'><p>Here is an example of a simple Sentinel setup:</p>
<ol>
<li>
<p><strong>Create Sentinel Configuration</strong></p>
<pre><code class="language-plaintext">sentinel monitor mymaster 127.0.0.1 6379 2
sentinel down-after-milliseconds mymaster 5000
sentinel failover-timeout mymaster 60000
sentinel parallel-syncs mymaster 1
</code></pre>
</li>
<li>
<p><strong>Start Sentinel</strong></p>
<pre><code class="language-bash">redis-sentinel sentinel.conf
</code></pre>
</li>
</ol>
</div><h1>Summary</h1>
<div class='content'><p>Replication in Redis is a powerful feature that enhances data availability, load balancing, and redundancy. By setting up a master and one or more replicas, you can ensure that your data is always available and can handle increased read loads. For automatic failover and high availability, Redis Sentinel can be used to monitor and manage your Redis instances. Understanding and implementing replication is crucial for building robust and scalable Redis-based applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='performance-tuning'>&#x25C4;Performance Tuning</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Replication in Redis</a>
	</div>
	<div class='col-4 text-end'>
					<a href='sentinel'>Sentinel &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
