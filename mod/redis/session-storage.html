<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Session Storage with Redis</title>

    <link rel="alternate" href="https://campusempresa.com/mod/redis/session-storage" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/redis/session-storage" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/redis/session-storage" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/redis/session-storage" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/redis/session-storage" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='caching'>&#x25C4;Caching</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Session Storage with Redis</a>
	</div>
	<div class='col-4 text-end'>
					<a href='real-time-analytics'>Real-Time Analytics &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Session Storage</h1>
<div class='content'><p>Session storage is a critical aspect of web development, allowing you to store user-specific data between HTTP requests. Redis, an in-memory data structure store, is widely used for session storage due to its speed and efficiency.</p>
</div><h1>Why Use Redis for Session Storage?</h1>
<div class='content'><ul>
<li><strong>Performance</strong>: Redis operates in-memory, providing extremely fast read and write operations.</li>
<li><strong>Scalability</strong>: Redis can handle a large number of concurrent connections and data.</li>
<li><strong>Persistence</strong>: Redis offers options for data persistence, ensuring session data is not lost.</li>
<li><strong>Data Structures</strong>: Redis supports various data structures like strings, hashes, lists, sets, and sorted sets, making it versatile for different session storage needs.</li>
</ul>
</div><h1>Setting Up Redis for Session Storage</h1>
<div class='content'><p>To use Redis for session storage, you need to install Redis and a Redis client library for your programming language. Below are steps for setting up Redis with Node.js.</p>
</div><h2>Installing Redis</h2>
<div class='content'><p>First, install Redis on your machine. For example, on Ubuntu:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBhcHQgdXBkYXRlCnN1ZG8gYXB0IGluc3RhbGwgcmVkaXMtc2VydmVy"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo apt update
sudo apt install redis-server</pre></div><div class='content'><p>Start the Redis server:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBzeXN0ZW1jdGwgc3RhcnQgcmVkaXMtc2VydmVy"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo systemctl start redis-server</pre></div><div class='content'></div><h2>Installing Redis Client for Node.js</h2>
<div class='content'><p>Install the <code>redis</code> package using npm:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgcmVkaXM="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install redis</pre></div><div class='content'></div><h1>Storing Sessions in Redis</h1>
<h2>Basic Example</h2>
<div class='content'><p>Here's a basic example of storing and retrieving session data using Redis in a Node.js application.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgcmVkaXMgPSByZXF1aXJlKCdyZWRpcycpOwpjb25zdCBjbGllbnQgPSByZWRpcy5jcmVhdGVDbGllbnQoKTsKCi8vIENvbm5lY3QgdG8gUmVkaXMgc2VydmVyCmNsaWVudC5vbignY29ubmVjdCcsIGZ1bmN0aW9uKCkgewogICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBSZWRpcy4uLicpOwp9KTsKCi8vIFN0b3Jpbmcgc2Vzc2lvbiBkYXRhCmNvbnN0IHNlc3Npb25JZCA9ICdzZXNzOjEyMzQ1JzsKY29uc3Qgc2Vzc2lvbkRhdGEgPSB7CiAgICB1c2VySWQ6ICd1c2VyMTIzJywKICAgIGlzQXV0aGVudGljYXRlZDogdHJ1ZSwKICAgIGxhc3RBY2Nlc3M6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKQp9OwoKY2xpZW50Lmhtc2V0KHNlc3Npb25JZCwgc2Vzc2lvbkRhdGEsIChlcnIsIHJlcykgPT4gewogICAgaWYgKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN0b3Jpbmcgc2Vzc2lvbiBkYXRhOicsIGVycik7CiAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCdTZXNzaW9uIGRhdGEgc3RvcmVkOicsIHJlcyk7CiAgICB9Cn0pOwoKLy8gUmV0cmlldmluZyBzZXNzaW9uIGRhdGEKY2xpZW50LmhnZXRhbGwoc2Vzc2lvbklkLCAoZXJyLCBzZXNzaW9uKSA9PiB7CiAgICBpZiAoZXJyKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcmV0cmlldmluZyBzZXNzaW9uIGRhdGE6JywgZXJyKTsKICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coJ1Nlc3Npb24gZGF0YSByZXRyaWV2ZWQ6Jywgc2Vzc2lvbik7CiAgICB9Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const redis = require('redis');
const client = redis.createClient();

// Connect to Redis server
client.on('connect', function() {
    console.log('Connected to Redis...');
});

// Storing session data
const sessionId = 'sess:12345';
const sessionData = {
    userId: 'user123',
    isAuthenticated: true,
    lastAccess: new Date().toISOString()
};

client.hmset(sessionId, sessionData, (err, res) =&gt; {
    if (err) {
        console.error('Error storing session data:', err);
    } else {
        console.log('Session data stored:', res);
    }
});

// Retrieving session data
client.hgetall(sessionId, (err, session) =&gt; {
    if (err) {
        console.error('Error retrieving session data:', err);
    } else {
        console.log('Session data retrieved:', session);
    }
});</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Connecting to Redis</strong>: The <code>redis.createClient()</code> method creates a new Redis client.</li>
<li><strong>Storing Data</strong>: The <code>hmset</code> method stores a hash (key-value pairs) in Redis.</li>
<li><strong>Retrieving Data</strong>: The <code>hgetall</code> method retrieves all fields and values of the hash stored at the given key.</li>
</ul>
</div><h1>Advanced Session Management</h1>
<h2>Expiring Sessions</h2>
<div class='content'><p>To automatically expire sessions after a certain period, use the <code>expire</code> command.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3Qgc2Vzc2lvbklkID0gJ3Nlc3M6MTIzNDUnOwpjb25zdCBzZXNzaW9uVFRMID0gMzYwMDsgLy8gVGltZS10by1saXZlIGluIHNlY29uZHMgKDEgaG91cikKCmNsaWVudC5leHBpcmUoc2Vzc2lvbklkLCBzZXNzaW9uVFRMLCAoZXJyLCByZXMpID0+IHsKICAgIGlmIChlcnIpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZXR0aW5nIHNlc3Npb24gVFRMOicsIGVycik7CiAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCdTZXNzaW9uIFRUTCBzZXQ6JywgcmVzKTsKICAgIH0KfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const sessionId = 'sess:12345';
const sessionTTL = 3600; // Time-to-live in seconds (1 hour)

client.expire(sessionId, sessionTTL, (err, res) =&gt; {
    if (err) {
        console.error('Error setting session TTL:', err);
    } else {
        console.log('Session TTL set:', res);
    }
});</pre></div><div class='content'></div><h2>Persistent Storage</h2>
<div class='content'><p>Redis can be configured to persist data to disk, ensuring session data is not lost on server restarts. This can be done using RDB (Redis Database) snapshots or AOF (Append-Only File) logs.</p>
</div><h2>Scaling Redis</h2>
<div class='content'><p>For large-scale applications, you can scale Redis using:</p>
<ul>
<li><strong>Replication</strong>: Create replicas of the Redis server for read scalability and data redundancy.</li>
<li><strong>Sharding</strong>: Distribute data across multiple Redis instances to handle more data and traffic.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Redis is a powerful tool for session storage, offering high performance, scalability, and flexibility. By understanding the basics of storing and retrieving session data, setting expiration times, and configuring persistence, you can effectively manage user sessions in your web applications. As you advance, consider exploring Redis replication and sharding to scale your session storage solution.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='caching'>&#x25C4;Caching</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Session Storage with Redis</a>
	</div>
	<div class='col-4 text-end'>
					<a href='real-time-analytics'>Real-Time Analytics &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
