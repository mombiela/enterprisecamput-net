<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Widget Testing</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flutter/09-03-widget-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flutter/09-03-widget-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flutter/09-03-widget-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=2" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/flutter/09-03-widget-testing" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/flutter/09-03-widget-testing" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Programming Languages</a>
				 					<a href="/categ/frameworks">Frameworks and Libraries</a>
				 					<a href="/categ/tech-tools">Technical Tools</a>
				 					<a href="/categ/foundations">Theoretical Foundations</a>
				 					<a href="/categ/soft-skills">Social Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='09-02-unit-testing' title="Unit Testing">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Widget Testing</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-04-integration-testing' title="Integration Testing">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Widget testing is a crucial part of ensuring that your Flutter applications work as expected. It allows you to test the UI components of your app in isolation, ensuring that they behave correctly under various conditions. In this section, we will cover the basics of widget testing, how to write and run widget tests, and best practices to follow.</p>
</div><h1><p>What is Widget Testing?</p>
</h1>
<div class='content'><p>Widget testing, also known as component testing, focuses on verifying the behavior of individual widgets. Unlike unit tests, which test the smallest parts of your code (like functions and methods), widget tests ensure that the UI components render correctly and respond to user interactions as expected.</p>
</div><h1><p>Why Widget Testing?</p>
</h1>
<div class='content'><ul>
<li><strong>Ensures UI correctness</strong>: Verifies that the UI components render correctly.</li>
<li><strong>Automates user interactions</strong>: Simulates user interactions like taps, swipes, and text input.</li>
<li><strong>Catches regressions</strong>: Helps identify issues early in the development cycle.</li>
<li><strong>Improves code quality</strong>: Encourages writing modular and testable code.</li>
</ul>
</div><h1><p>Setting Up Widget Testing</p>
</h1>
<div class='content'><p>Before you start writing widget tests, ensure you have the <code>flutter_test</code> package included in your <code>pubspec.yaml</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGV2X2RlcGVuZGVuY2llczoKICBmbHV0dGVyX3Rlc3Q6CiAgICBzZGs6IGZsdXR0ZXI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dev_dependencies:
  flutter_test:
    sdk: flutter</pre></div><div class='content'></div><h1><p>Writing a Basic Widget Test</p>
</h1>
<div class='content'><p>Let's start with a simple example. Suppose we have a widget that displays a counter and a button to increment the counter.</p>
</div><h2><p>Example Widget</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7CgpjbGFzcyBDb3VudGVyV2lkZ2V0IGV4dGVuZHMgU3RhdGVmdWxXaWRnZXQgewogIEBvdmVycmlkZQogIF9Db3VudGVyV2lkZ2V0U3RhdGUgY3JlYXRlU3RhdGUoKSA9PiBfQ291bnRlcldpZGdldFN0YXRlKCk7Cn0KCmNsYXNzIF9Db3VudGVyV2lkZ2V0U3RhdGUgZXh0ZW5kcyBTdGF0ZTxDb3VudGVyV2lkZ2V0PiB7CiAgaW50IF9jb3VudGVyID0gMDsKCiAgdm9pZCBfaW5jcmVtZW50Q291bnRlcigpIHsKICAgIHNldFN0YXRlKCgpIHsKICAgICAgX2NvdW50ZXIrKzsKICAgIH0pOwogIH0KCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gQ29sdW1uKAogICAgICBtYWluQXhpc0FsaWdubWVudDogTWFpbkF4aXNBbGlnbm1lbnQuY2VudGVyLAogICAgICBjaGlsZHJlbjogPFdpZGdldD5bCiAgICAgICAgVGV4dCgnQ291bnRlcjogJF9jb3VudGVyJyksCiAgICAgICAgRWxldmF0ZWRCdXR0b24oCiAgICAgICAgICBvblByZXNzZWQ6IF9pbmNyZW1lbnRDb3VudGVyLAogICAgICAgICAgY2hpbGQ6IFRleHQoJ0luY3JlbWVudCcpLAogICAgICAgICksCiAgICAgIF0sCiAgICApOwogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'package:flutter/material.dart';

class CounterWidget extends StatefulWidget {
  @override
  _CounterWidgetState createState() =&gt; _CounterWidgetState();
}

class _CounterWidgetState extends State&lt;CounterWidget&gt; {
  int _counter = 0;

  void _incrementCounter() {
    setState(() {
      _counter++;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Column(
      mainAxisAlignment: MainAxisAlignment.center,
      children: &lt;Widget&gt;[
        Text('Counter: $_counter'),
        ElevatedButton(
          onPressed: _incrementCounter,
          child: Text('Increment'),
        ),
      ],
    );
  }
}</pre></div><div class='content'></div><h2><p>Writing the Test</p>
</h2>
<div class='content'><p>Now, let's write a widget test for the <code>CounterWidget</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7CmltcG9ydCAncGFja2FnZTpmbHV0dGVyX3Rlc3QvZmx1dHRlcl90ZXN0LmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6eW91cl9hcHAvY291bnRlcl93aWRnZXQuZGFydCc7IC8vIFVwZGF0ZSB3aXRoIHlvdXIgYWN0dWFsIGltcG9ydAoKdm9pZCBtYWluKCkgewogIHRlc3RXaWRnZXRzKCdDb3VudGVyIGluY3JlbWVudHMgc21va2UgdGVzdCcsIChXaWRnZXRUZXN0ZXIgdGVzdGVyKSBhc3luYyB7CiAgICAvLyBCdWlsZCB0aGUgd2lkZ2V0CiAgICBhd2FpdCB0ZXN0ZXIucHVtcFdpZGdldChNYXRlcmlhbEFwcChob21lOiBDb3VudGVyV2lkZ2V0KCkpKTsKCiAgICAvLyBWZXJpZnkgdGhlIGluaXRpYWwgc3RhdGUKICAgIGV4cGVjdChmaW5kLnRleHQoJ0NvdW50ZXI6IDAnKSwgZmluZHNPbmVXaWRnZXQpOwogICAgZXhwZWN0KGZpbmQudGV4dCgnQ291bnRlcjogMScpLCBmaW5kc05vdGhpbmcpOwoKICAgIC8vIFRhcCB0aGUgaW5jcmVtZW50IGJ1dHRvbiBhbmQgdHJpZ2dlciBhIGZyYW1lCiAgICBhd2FpdCB0ZXN0ZXIudGFwKGZpbmQuYnlUeXBlKEVsZXZhdGVkQnV0dG9uKSk7CiAgICBhd2FpdCB0ZXN0ZXIucHVtcCgpOwoKICAgIC8vIFZlcmlmeSB0aGUgY291bnRlciBoYXMgaW5jcmVtZW50ZWQKICAgIGV4cGVjdChmaW5kLnRleHQoJ0NvdW50ZXI6IDAnKSwgZmluZHNOb3RoaW5nKTsKICAgIGV4cGVjdChmaW5kLnRleHQoJ0NvdW50ZXI6IDEnKSwgZmluZHNPbmVXaWRnZXQpOwogIH0pOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'package:flutter/material.dart';
import 'package:flutter_test/flutter_test.dart';
import 'package:your_app/counter_widget.dart'; // Update with your actual import

void main() {
  testWidgets('Counter increments smoke test', (WidgetTester tester) async {
    // Build the widget
    await tester.pumpWidget(MaterialApp(home: CounterWidget()));

    // Verify the initial state
    expect(find.text('Counter: 0'), findsOneWidget);
    expect(find.text('Counter: 1'), findsNothing);

    // Tap the increment button and trigger a frame
    await tester.tap(find.byType(ElevatedButton));
    await tester.pump();

    // Verify the counter has incremented
    expect(find.text('Counter: 0'), findsNothing);
    expect(find.text('Counter: 1'), findsOneWidget);
  });
}</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ol>
<li><strong>Build the Widget</strong>: The <code>pumpWidget</code> method builds the widget tree.</li>
<li><strong>Verify Initial State</strong>: The <code>expect</code> function checks the initial state of the widget.</li>
<li><strong>Simulate User Interaction</strong>: The <code>tap</code> method simulates a tap on the button.</li>
<li><strong>Trigger a Frame</strong>: The <code>pump</code> method triggers a frame to rebuild the widget tree.</li>
<li><strong>Verify Updated State</strong>: The <code>expect</code> function checks the updated state of the widget.</li>
</ol>
</div><h1><p>Running Widget Tests</p>
</h1>
<div class='content'><p>To run the widget tests, use the following command in your terminal:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Zmx1dHRlciB0ZXN0"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>flutter test</pre></div><div class='content'><p>This command will execute all the tests in your <code>test</code> directory.</p>
</div><h1><p>Best Practices for Widget Testing</p>
</h1>
<div class='content'><ul>
<li><strong>Isolate Widgets</strong>: Test widgets in isolation to avoid dependencies on other parts of the app.</li>
<li><strong>Use Test IDs</strong>: Assign unique keys to widgets to make them easier to find in tests.</li>
<li><strong>Mock External Dependencies</strong>: Use mock objects to simulate external dependencies like network calls.</li>
<li><strong>Test Edge Cases</strong>: Ensure your tests cover edge cases and unexpected user interactions.</li>
<li><strong>Keep Tests Fast</strong>: Write efficient tests to keep the test suite fast and responsive.</li>
</ul>
</div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ul>
<li><strong>Not Triggering Frames</strong>: Always call <code>pump</code> after simulating user interactions to trigger a frame.</li>
<li><strong>Ignoring Async Operations</strong>: Use <code>pumpAndSettle</code> to wait for async operations to complete.</li>
<li><strong>Overcomplicating Tests</strong>: Keep tests simple and focused on specific behaviors.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>Widget testing is an essential part of Flutter development that helps ensure your UI components work correctly. By writing and running widget tests, you can catch issues early, improve code quality, and deliver a more reliable app. In the next section, we will dive into integration testing, which focuses on testing the entire app's behavior.</p>
<hr />
<p>By following this structured approach, you can effectively test your Flutter widgets and ensure they behave as expected. Happy testing!</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='09-02-unit-testing' title="Unit Testing">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-04-integration-testing' title="Integration Testing">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Advertising</h1>
<p>This space is reserved for advertising.</p>
<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Thank you for collaborating!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
