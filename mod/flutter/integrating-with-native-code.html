<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integrating with Native Code</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flutter/integrating-with-native-code" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flutter/integrating-with-native-code" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flutter/integrating-with-native-code" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/flutter/integrating-with-native-code" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/flutter/integrating-with-native-code" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='advanced-state-management'>&#x25C4;Advanced State Management</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Integrating with Native Code</a>
	</div>
	<div class='col-4 text-end'>
					<a href='using-firebase-with-flutter'>Using Firebase with Flutter &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Integrating with native code is a crucial aspect of Flutter development, allowing you to leverage platform-specific functionality and libraries that are not available in Dart. This section will guide you through the process of integrating Flutter with native code on both Android and iOS platforms.</p>
</div><h1>Why Integrate with Native Code?</h1>
<div class='content'><ul>
<li><strong>Access Platform-Specific Features</strong>: Utilize features like camera, GPS, and sensors that are specific to Android or iOS.</li>
<li><strong>Leverage Existing Libraries</strong>: Use existing native libraries and SDKs that are not available in Dart.</li>
<li><strong>Performance Optimization</strong>: Execute performance-critical code natively for better efficiency.</li>
</ul>
</div><h1>Method Channels</h1>
<div class='content'><p>Method channels provide a way for your Dart code to communicate with platform-specific code using asynchronous message passing.</p>
</div><h2>Setting Up Method Channels</h2>
<div class='content'><ol>
<li>
<p><strong>Define a Method Channel in Dart</strong>:</p>
<pre><code class="language-dart">import 'package:flutter/services.dart';

class NativeIntegration {
  static const platform = MethodChannel('com.example/native');

  Future&lt;String&gt; getNativeMessage() async {
    try {
      final String result = await platform.invokeMethod('getNativeMessage');
      return result;
    } on PlatformException catch (e) {
      return &quot;Failed to get native message: '${e.message}'.&quot;;
    }
  }
}
</code></pre>
</li>
<li>
<p><strong>Handle Method Channel in Android (Kotlin)</strong>:</p>
<pre><code class="language-kotlin">import io.flutter.embedding.engine.FlutterEngine
import io.flutter.plugin.common.MethodChannel

class MainActivity: FlutterActivity() {
    private val CHANNEL = &quot;com.example/native&quot;

    override fun configureFlutterEngine(flutterEngine: FlutterEngine) {
        super.configureFlutterEngine(flutterEngine)
        MethodChannel(flutterEngine.dartExecutor.binaryMessenger, CHANNEL).setMethodCallHandler {
            call, result -&gt;
            if (call.method == &quot;getNativeMessage&quot;) {
                val message = getNativeMessage()
                if (message != null) {
                    result.success(message)
                } else {
                    result.error(&quot;UNAVAILABLE&quot;, &quot;Message not available.&quot;, null)
                }
            } else {
                result.notImplemented()
            }
        }
    }

    private fun getNativeMessage(): String {
        return &quot;Hello from Android Native Code!&quot;
    }
}
</code></pre>
</li>
<li>
<p><strong>Handle Method Channel in iOS (Swift)</strong>:</p>
<pre><code class="language-swift">import Flutter
import UIKit

@UIApplicationMain
@objc class AppDelegate: FlutterAppDelegate {
    override func application(
        _ application: UIApplication,
        didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?
    ) -&gt; Bool {
        let controller : FlutterViewController = window?.rootViewController as! FlutterViewController
        let nativeChannel = FlutterMethodChannel(name: &quot;com.example/native&quot;,
                                                  binaryMessenger: controller.binaryMessenger)
        nativeChannel.setMethodCallHandler({
            (call: FlutterMethodCall, result: @escaping FlutterResult) -&gt; Void in
            if call.method == &quot;getNativeMessage&quot; {
                result(&quot;Hello from iOS Native Code!&quot;)
            } else {
                result(FlutterMethodNotImplemented)
            }
        })

        return super.application(application, didFinishLaunchingWithOptions: launchOptions)
    }
}
</code></pre>
</li>
</ol>
</div><h1>Platform Channels</h1>
<div class='content'><p>Platform channels are another way to communicate between Dart and native code, but they are more flexible and can handle more complex data types.</p>
</div><h2>Setting Up Platform Channels</h2>
<div class='content'><ol>
<li>
<p><strong>Define a Platform Channel in Dart</strong>:</p>
<pre><code class="language-dart">import 'package:flutter/services.dart';

class NativeIntegration {
  static const platform = BasicMessageChannel&lt;String&gt;('com.example/native', StringCodec());

  Future&lt;String&gt; getNativeMessage() async {
    final String result = await platform.send('getNativeMessage');
    return result;
  }
}
</code></pre>
</li>
<li>
<p><strong>Handle Platform Channel in Android (Kotlin)</strong>:</p>
<pre><code class="language-kotlin">import io.flutter.embedding.engine.FlutterEngine
import io.flutter.plugin.common.BasicMessageChannel
import io.flutter.plugin.common.StringCodec

class MainActivity: FlutterActivity() {
    private val CHANNEL = &quot;com.example/native&quot;

    override fun configureFlutterEngine(flutterEngine: FlutterEngine) {
        super.configureFlutterEngine(flutterEngine)
        BasicMessageChannel&lt;String&gt;(flutterEngine.dartExecutor.binaryMessenger, CHANNEL, StringCodec.INSTANCE)
            .setMessageHandler { message, reply -&gt;
                if (message == &quot;getNativeMessage&quot;) {
                    reply.reply(&quot;Hello from Android Native Code!&quot;)
                } else {
                    reply.reply(null)
                }
            }
    }
}
</code></pre>
</li>
<li>
<p><strong>Handle Platform Channel in iOS (Swift)</strong>:</p>
<pre><code class="language-swift">import Flutter
import UIKit

@UIApplicationMain
@objc class AppDelegate: FlutterAppDelegate {
    override func application(
        _ application: UIApplication,
        didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?
    ) -&gt; Bool {
        let controller : FlutterViewController = window?.rootViewController as! FlutterViewController
        let nativeChannel = FlutterBasicMessageChannel(name: &quot;com.example/native&quot;,
                                                       binaryMessenger: controller.binaryMessenger,
                                                       codec: FlutterStringCodec.sharedInstance())
        nativeChannel.setMessageHandler { (message, reply) in
            if message == &quot;getNativeMessage&quot; {
                reply(&quot;Hello from iOS Native Code!&quot;)
            } else {
                reply(nil)
            }
        }

        return super.application(application, didFinishLaunchingWithOptions: launchOptions)
    }
}
</code></pre>
</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>Integrating with native code in Flutter allows you to extend the functionality of your app by leveraging platform-specific features and libraries. By using method channels and platform channels, you can efficiently communicate between Dart and native code, ensuring that your app can utilize the full capabilities of the underlying platform.</p>
<p>Understanding these integration techniques is essential for advanced Flutter development, enabling you to create more powerful and feature-rich applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='advanced-state-management'>&#x25C4;Advanced State Management</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Integrating with Native Code</a>
	</div>
	<div class='col-4 text-end'>
					<a href='using-firebase-with-flutter'>Using Firebase with Flutter &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
