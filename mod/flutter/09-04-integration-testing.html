<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integration Testing</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flutter/09-04-integration-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flutter/09-04-integration-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flutter/09-04-integration-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/flutter/09-04-integration-testing" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/flutter/09-04-integration-testing" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='09-03-widget-testing' title="Widget Testing">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Integration Testing</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='09-05-debugging-techniques' title="Debugging Techniques">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Integration testing in Flutter is a crucial step to ensure that different parts of your application work together as expected. Unlike unit tests, which test individual components in isolation, integration tests verify the behavior of a complete application or a large part of it.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li>
<p><strong>Integration Tests vs. Unit Tests</strong>:</p>
<ul>
<li><strong>Unit Tests</strong>: Focus on testing individual components or functions in isolation.</li>
<li><strong>Integration Tests</strong>: Focus on testing the interaction between different components and the overall behavior of the application.</li>
</ul>
</li>
<li>
<p><strong>Flutter Integration Test Package</strong>:</p>
<ul>
<li>Flutter provides a dedicated package for integration testing called <code>integration_test</code>.</li>
<li>This package allows you to write tests that interact with your app in a real environment.</li>
</ul>
</li>
<li>
<p><strong>Test Environment</strong>:</p>
<ul>
<li>Integration tests run on a real device or an emulator, providing a more accurate representation of how the app will behave in production.</li>
</ul>
</li>
</ol>
</div><h1>Setting Up Integration Testing</h1>
<div class='content'></div><h2>Step 1: Add Dependencies</h2>
<div class='content'><p>Add the <code>integration_test</code> package to your <code>pubspec.yaml</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGV2X2RlcGVuZGVuY2llczoKICBpbnRlZ3JhdGlvbl90ZXN0OgogICAgc2RrOiBmbHV0dGVyCiAgZmx1dHRlcl90ZXN0OgogICAgc2RrOiBmbHV0dGVy"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dev_dependencies:
  integration_test:
    sdk: flutter
  flutter_test:
    sdk: flutter</pre></div><div class='content'></div><h2>Step 2: Create a Test File</h2>
<div class='content'><p>Create a new directory called <code>test_driver</code> and inside it, create a file named <code>integration_test.dart</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdwYWNrYWdlOmludGVncmF0aW9uX3Rlc3QvaW50ZWdyYXRpb25fdGVzdF9kcml2ZXIuZGFydCc7CgpGdXR1cmU8dm9pZD4gbWFpbigpID0+IGludGVncmF0aW9uRHJpdmVyKCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'package:integration_test/integration_test_driver.dart';

Future&lt;void&gt; main() =&gt; integrationDriver();</pre></div><div class='content'></div><h2>Step 3: Write an Integration Test</h2>
<div class='content'><p>Create a new directory called <code>integration_test</code> and inside it, create a file named <code>app_test.dart</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXJfdGVzdC9mbHV0dGVyX3Rlc3QuZGFydCc7CmltcG9ydCAncGFja2FnZTppbnRlZ3JhdGlvbl90ZXN0L2ludGVncmF0aW9uX3Rlc3QuZGFydCc7CmltcG9ydCAncGFja2FnZTp5b3VyX2FwcC9tYWluLmRhcnQnIGFzIGFwcDsKCnZvaWQgbWFpbigpIHsKICBJbnRlZ3JhdGlvblRlc3RXaWRnZXRzRmx1dHRlckJpbmRpbmcuZW5zdXJlSW5pdGlhbGl6ZWQoKTsKCiAgdGVzdFdpZGdldHMoJ0NvdW50ZXIgaW5jcmVtZW50cyBzbW9rZSB0ZXN0JywgKFdpZGdldFRlc3RlciB0ZXN0ZXIpIGFzeW5jIHsKICAgIGFwcC5tYWluKCk7CiAgICBhd2FpdCB0ZXN0ZXIucHVtcEFuZFNldHRsZSgpOwoKICAgIC8vIFZlcmlmeSB0aGUgaW5pdGlhbCBjb3VudGVyIHZhbHVlIGlzIDAuCiAgICBleHBlY3QoZmluZC50ZXh0KCcwJyksIGZpbmRzT25lV2lkZ2V0KTsKICAgIGV4cGVjdChmaW5kLnRleHQoJzEnKSwgZmluZHNOb3RoaW5nKTsKCiAgICAvLyBUYXAgdGhlICcrJyBpY29uIGFuZCB0cmlnZ2VyIGEgZnJhbWUuCiAgICBhd2FpdCB0ZXN0ZXIudGFwKGZpbmQuYnlJY29uKEljb25zLmFkZCkpOwogICAgYXdhaXQgdGVzdGVyLnB1bXBBbmRTZXR0bGUoKTsKCiAgICAvLyBWZXJpZnkgdGhlIGNvdW50ZXIgdmFsdWUgaXMgaW5jcmVtZW50ZWQuCiAgICBleHBlY3QoZmluZC50ZXh0KCcwJyksIGZpbmRzTm90aGluZyk7CiAgICBleHBlY3QoZmluZC50ZXh0KCcxJyksIGZpbmRzT25lV2lkZ2V0KTsKICB9KTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'package:flutter_test/flutter_test.dart';
import 'package:integration_test/integration_test.dart';
import 'package:your_app/main.dart' as app;

void main() {
  IntegrationTestWidgetsFlutterBinding.ensureInitialized();

  testWidgets('Counter increments smoke test', (WidgetTester tester) async {
    app.main();
    await tester.pumpAndSettle();

    // Verify the initial counter value is 0.
    expect(find.text('0'), findsOneWidget);
    expect(find.text('1'), findsNothing);

    // Tap the '+' icon and trigger a frame.
    await tester.tap(find.byIcon(Icons.add));
    await tester.pumpAndSettle();

    // Verify the counter value is incremented.
    expect(find.text('0'), findsNothing);
    expect(find.text('1'), findsOneWidget);
  });
}</pre></div><div class='content'></div><h2>Step 4: Run the Integration Test</h2>
<div class='content'><p>Run the integration test using the following command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Zmx1dHRlciBkcml2ZSAtLWRyaXZlcj10ZXN0X2RyaXZlci9pbnRlZ3JhdGlvbl90ZXN0LmRhcnQgLS10YXJnZXQ9aW50ZWdyYXRpb25fdGVzdC9hcHBfdGVzdC5kYXJ0"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>flutter drive --driver=test_driver/integration_test.dart --target=integration_test/app_test.dart</pre></div><div class='content'></div><h1>Practical Example</h1>
<div class='content'><p>Let's create a simple Flutter app with a counter and write an integration test for it.</p>
</div><h2>Step 1: Create the App</h2>
<div class='content'><p>Create a new Flutter app with the following code in <code>lib/main.dart</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7Cgp2b2lkIG1haW4oKSB7CiAgcnVuQXBwKE15QXBwKCkpOwp9CgpjbGFzcyBNeUFwcCBleHRlbmRzIFN0YXRlbGVzc1dpZGdldCB7CiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gTWF0ZXJpYWxBcHAoCiAgICAgIGhvbWU6IE15SG9tZVBhZ2UoKSwKICAgICk7CiAgfQp9CgpjbGFzcyBNeUhvbWVQYWdlIGV4dGVuZHMgU3RhdGVmdWxXaWRnZXQgewogIEBvdmVycmlkZQogIF9NeUhvbWVQYWdlU3RhdGUgY3JlYXRlU3RhdGUoKSA9PiBfTXlIb21lUGFnZVN0YXRlKCk7Cn0KCmNsYXNzIF9NeUhvbWVQYWdlU3RhdGUgZXh0ZW5kcyBTdGF0ZTxNeUhvbWVQYWdlPiB7CiAgaW50IF9jb3VudGVyID0gMDsKCiAgdm9pZCBfaW5jcmVtZW50Q291bnRlcigpIHsKICAgIHNldFN0YXRlKCgpIHsKICAgICAgX2NvdW50ZXIrKzsKICAgIH0pOwogIH0KCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gU2NhZmZvbGQoCiAgICAgIGFwcEJhcjogQXBwQmFyKAogICAgICAgIHRpdGxlOiBUZXh0KCdGbHV0dGVyIERlbW8gSG9tZSBQYWdlJyksCiAgICAgICksCiAgICAgIGJvZHk6IENlbnRlcigKICAgICAgICBjaGlsZDogQ29sdW1uKAogICAgICAgICAgbWFpbkF4aXNBbGlnbm1lbnQ6IE1haW5BeGlzQWxpZ25tZW50LmNlbnRlciwKICAgICAgICAgIGNoaWxkcmVuOiA8V2lkZ2V0PlsKICAgICAgICAgICAgVGV4dCgKICAgICAgICAgICAgICAnWW91IGhhdmUgcHVzaGVkIHRoZSBidXR0b24gdGhpcyBtYW55IHRpbWVzOicsCiAgICAgICAgICAgICksCiAgICAgICAgICAgIFRleHQoCiAgICAgICAgICAgICAgJyRfY291bnRlcicsCiAgICAgICAgICAgICAgc3R5bGU6IFRoZW1lLm9mKGNvbnRleHQpLnRleHRUaGVtZS5oZWFkbGluZTQsCiAgICAgICAgICAgICksCiAgICAgICAgICBdLAogICAgICAgICksCiAgICAgICksCiAgICAgIGZsb2F0aW5nQWN0aW9uQnV0dG9uOiBGbG9hdGluZ0FjdGlvbkJ1dHRvbigKICAgICAgICBvblByZXNzZWQ6IF9pbmNyZW1lbnRDb3VudGVyLAogICAgICAgIHRvb2x0aXA6ICdJbmNyZW1lbnQnLAogICAgICAgIGNoaWxkOiBJY29uKEljb25zLmFkZCksCiAgICAgICksCiAgICApOwogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'package:flutter/material.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: MyHomePage(),
    );
  }
}

class MyHomePage extends StatefulWidget {
  @override
  _MyHomePageState createState() =&gt; _MyHomePageState();
}

class _MyHomePageState extends State&lt;MyHomePage&gt; {
  int _counter = 0;

  void _incrementCounter() {
    setState(() {
      _counter++;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Flutter Demo Home Page'),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: &lt;Widget&gt;[
            Text(
              'You have pushed the button this many times:',
            ),
            Text(
              '$_counter',
              style: Theme.of(context).textTheme.headline4,
            ),
          ],
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: _incrementCounter,
        tooltip: 'Increment',
        child: Icon(Icons.add),
      ),
    );
  }
}</pre></div><div class='content'></div><h2>Step 2: Write the Integration Test</h2>
<div class='content'><p>Create the <code>integration_test/app_test.dart</code> file with the following code:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXJfdGVzdC9mbHV0dGVyX3Rlc3QuZGFydCc7CmltcG9ydCAncGFja2FnZTppbnRlZ3JhdGlvbl90ZXN0L2ludGVncmF0aW9uX3Rlc3QuZGFydCc7CmltcG9ydCAncGFja2FnZTp5b3VyX2FwcC9tYWluLmRhcnQnIGFzIGFwcDsKCnZvaWQgbWFpbigpIHsKICBJbnRlZ3JhdGlvblRlc3RXaWRnZXRzRmx1dHRlckJpbmRpbmcuZW5zdXJlSW5pdGlhbGl6ZWQoKTsKCiAgdGVzdFdpZGdldHMoJ0NvdW50ZXIgaW5jcmVtZW50cyBzbW9rZSB0ZXN0JywgKFdpZGdldFRlc3RlciB0ZXN0ZXIpIGFzeW5jIHsKICAgIGFwcC5tYWluKCk7CiAgICBhd2FpdCB0ZXN0ZXIucHVtcEFuZFNldHRsZSgpOwoKICAgIC8vIFZlcmlmeSB0aGUgaW5pdGlhbCBjb3VudGVyIHZhbHVlIGlzIDAuCiAgICBleHBlY3QoZmluZC50ZXh0KCcwJyksIGZpbmRzT25lV2lkZ2V0KTsKICAgIGV4cGVjdChmaW5kLnRleHQoJzEnKSwgZmluZHNOb3RoaW5nKTsKCiAgICAvLyBUYXAgdGhlICcrJyBpY29uIGFuZCB0cmlnZ2VyIGEgZnJhbWUuCiAgICBhd2FpdCB0ZXN0ZXIudGFwKGZpbmQuYnlJY29uKEljb25zLmFkZCkpOwogICAgYXdhaXQgdGVzdGVyLnB1bXBBbmRTZXR0bGUoKTsKCiAgICAvLyBWZXJpZnkgdGhlIGNvdW50ZXIgdmFsdWUgaXMgaW5jcmVtZW50ZWQuCiAgICBleHBlY3QoZmluZC50ZXh0KCcwJyksIGZpbmRzTm90aGluZyk7CiAgICBleHBlY3QoZmluZC50ZXh0KCcxJyksIGZpbmRzT25lV2lkZ2V0KTsKICB9KTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import 'package:flutter_test/flutter_test.dart';
import 'package:integration_test/integration_test.dart';
import 'package:your_app/main.dart' as app;

void main() {
  IntegrationTestWidgetsFlutterBinding.ensureInitialized();

  testWidgets('Counter increments smoke test', (WidgetTester tester) async {
    app.main();
    await tester.pumpAndSettle();

    // Verify the initial counter value is 0.
    expect(find.text('0'), findsOneWidget);
    expect(find.text('1'), findsNothing);

    // Tap the '+' icon and trigger a frame.
    await tester.tap(find.byIcon(Icons.add));
    await tester.pumpAndSettle();

    // Verify the counter value is incremented.
    expect(find.text('0'), findsNothing);
    expect(find.text('1'), findsOneWidget);
  });
}</pre></div><div class='content'></div><h2>Step 3: Run the Test</h2>
<div class='content'><p>Run the integration test using the following command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Zmx1dHRlciBkcml2ZSAtLWRyaXZlcj10ZXN0X2RyaXZlci9pbnRlZ3JhdGlvbl90ZXN0LmRhcnQgLS10YXJnZXQ9aW50ZWdyYXRpb25fdGVzdC9hcHBfdGVzdC5kYXJ0"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>flutter drive --driver=test_driver/integration_test.dart --target=integration_test/app_test.dart</pre></div><div class='content'></div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Not Using <code>pumpAndSettle</code></strong>: Ensure you use <code>await tester.pumpAndSettle()</code> to wait for all animations and frames to complete before making assertions.</li>
<li><strong>Incorrect Widget Finding</strong>: Double-check the widget finding logic to ensure you are targeting the correct widgets.</li>
<li><strong>Running Tests on Real Devices</strong>: Always run integration tests on real devices or emulators to get accurate results.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Integration testing is an essential part of the Flutter development process, ensuring that different parts of your application work together seamlessly. By following the steps outlined in this guide, you can set up and run integration tests to verify the overall behavior of your Flutter app. This will help you catch bugs early and ensure a smooth user experience.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='09-03-widget-testing' title="Widget Testing">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='09-05-debugging-techniques' title="Debugging Techniques">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
