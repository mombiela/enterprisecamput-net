<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introduction to Persistence</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flutter/07-01-introduction-to-persistence" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flutter/07-01-introduction-to-persistence" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flutter/07-01-introduction-to-persistence" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/flutter/07-01-introduction-to-persistence" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/flutter/07-01-introduction-to-persistence" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='06-05-graphql-integration' title="GraphQL Integration">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Introduction to Persistence</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-02-shared-preferences' title="Shared Preferences">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Persistence in mobile applications refers to the ability to save data locally on the device so that it can be retrieved and used later, even after the app has been closed and reopened. This is crucial for providing a seamless user experience, as it allows the app to remember user preferences, store data for offline use, and maintain state across sessions.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Types of Persistence</strong>:</p>
<ul>
<li><strong>In-Memory Storage</strong>: Data is stored in the device's RAM and is lost when the app is closed.</li>
<li><strong>Local Storage</strong>: Data is stored on the device's storage and persists across app sessions.</li>
<li><strong>Remote Storage</strong>: Data is stored on a remote server and accessed via network calls.</li>
</ul>
</li>
<li>
<p><strong>Common Local Storage Solutions</strong>:</p>
<ul>
<li><strong>Shared Preferences</strong>: Used for storing simple key-value pairs.</li>
<li><strong>File Storage</strong>: Used for storing files such as text, images, and other media.</li>
<li><strong>SQLite Database</strong>: Used for storing structured data in a relational database.</li>
<li><strong>Hive</strong>: A lightweight and fast key-value database for Flutter.</li>
</ul>
</li>
<li>
<p><strong>Choosing the Right Storage Solution</strong>:</p>
<ul>
<li><strong>Shared Preferences</strong>: Best for small amounts of simple data, such as user settings.</li>
<li><strong>File Storage</strong>: Best for large files or binary data.</li>
<li><strong>SQLite Database</strong>: Best for complex data structures and relationships.</li>
<li><strong>Hive</strong>: Best for high-performance needs and when using Dart objects directly.</li>
</ul>
</li>
</ol>
</div><h1><p>Practical Example: Using Shared Preferences</p>
</h1>
<div class='content'><p>Shared Preferences is a simple way to store key-value pairs persistently. Let's look at a practical example of how to use Shared Preferences in a Flutter app.</p>
</div><h2><p>Step-by-Step Guide</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Add Dependency</strong>:
Add the <code>shared_preferences</code> package to your <code>pubspec.yaml</code> file.</p>
<pre><code class="language-yaml">dependencies:
  flutter:
    sdk: flutter
  shared_preferences: ^2.0.6
</code></pre>
</li>
<li>
<p><strong>Import the Package</strong>:</p>
<pre><code class="language-dart">import 'package:shared_preferences/shared_preferences.dart';
</code></pre>
</li>
<li>
<p><strong>Save Data</strong>:</p>
<pre><code class="language-dart">Future&lt;void&gt; saveData(String key, String value) async {
  final prefs = await SharedPreferences.getInstance();
  await prefs.setString(key, value);
}
</code></pre>
</li>
<li>
<p><strong>Retrieve Data</strong>:</p>
<pre><code class="language-dart">Future&lt;String?&gt; getData(String key) async {
  final prefs = await SharedPreferences.getInstance();
  return prefs.getString(key);
}
</code></pre>
</li>
<li>
<p><strong>Example Usage</strong>:</p>
<pre><code class="language-dart">void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await saveData('username', 'JohnDoe');
  String? username = await getData('username');
  print('Saved username: $username');
}
</code></pre>
</li>
</ol>
</div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>Adding Dependency</strong>: The <code>shared_preferences</code> package is added to the project to enable the use of Shared Preferences.</li>
<li><strong>Importing the Package</strong>: The package is imported into the Dart file where it will be used.</li>
<li><strong>Saving Data</strong>: The <code>saveData</code> function saves a string value with a specified key.</li>
<li><strong>Retrieving Data</strong>: The <code>getData</code> function retrieves the string value associated with a specified key.</li>
<li><strong>Example Usage</strong>: The <code>main</code> function demonstrates how to save and retrieve data using Shared Preferences.</li>
</ul>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Task</p>
</h2>
<div class='content'><p>Create a simple Flutter app that allows users to enter their name and save it using Shared Preferences. When the app is reopened, it should display the saved name.</p>
</div><h2><p>Solution</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Create a New Flutter Project</strong>:</p>
<pre><code class="language-bash">flutter create persistence_example
cd persistence_example
</code></pre>
</li>
<li>
<p><strong>Update <code>pubspec.yaml</code></strong>:</p>
<pre><code class="language-yaml">dependencies:
  flutter:
    sdk: flutter
  shared_preferences: ^2.0.6
</code></pre>
</li>
<li>
<p><strong>Update <code>main.dart</code></strong>:</p>
<pre><code class="language-dart">import 'package:flutter/material.dart';
import 'package:shared_preferences/shared_preferences.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: HomeScreen(),
    );
  }
}

class HomeScreen extends StatefulWidget {
  @override
  _HomeScreenState createState() =&gt; _HomeScreenState();
}

class _HomeScreenState extends State&lt;HomeScreen&gt; {
  TextEditingController _controller = TextEditingController();
  String _savedName = '';

  @override
  void initState() {
    super.initState();
    _loadSavedName();
  }

  Future&lt;void&gt; _loadSavedName() async {
    final prefs = await SharedPreferences.getInstance();
    setState(() {
      _savedName = prefs.getString('name') ?? '';
    });
  }

  Future&lt;void&gt; _saveName() async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.setString('name', _controller.text);
    _loadSavedName();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text('Persistence Example'),
      ),
      body: Padding(
        padding: const EdgeInsets.all(16.0),
        child: Column(
          children: [
            TextField(
              controller: _controller,
              decoration: InputDecoration(labelText: 'Enter your name'),
            ),
            SizedBox(height: 20),
            ElevatedButton(
              onPressed: _saveName,
              child: Text('Save Name'),
            ),
            SizedBox(height: 20),
            Text('Saved Name: $_savedName'),
          ],
        ),
      ),
    );
  }
}
</code></pre>
</li>
</ol>
</div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>HomeScreen</strong>: A stateful widget that contains a text field for entering a name and a button to save the name.</li>
<li><strong>_loadSavedName</strong>: A function that loads the saved name from Shared Preferences and updates the state.</li>
<li><strong>_saveName</strong>: A function that saves the entered name to Shared Preferences and reloads the saved name.</li>
</ul>
</div><h1><p>Summary</p>
</h1>
<div class='content'><p>In this section, we introduced the concept of persistence in Flutter applications. We discussed different types of persistence and common local storage solutions. We provided a practical example of using Shared Preferences to save and retrieve data. Finally, we included a practical exercise to reinforce the learned concepts. In the next section, we will dive deeper into other local storage solutions such as file storage and SQLite databases.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='06-05-graphql-integration' title="GraphQL Integration">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-02-shared-preferences' title="Shared Preferences">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
