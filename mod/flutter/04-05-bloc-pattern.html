<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Bloc Pattern</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flutter/04-05-bloc-pattern" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flutter/04-05-bloc-pattern" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flutter/04-05-bloc-pattern" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=3" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/flutter/04-05-bloc-pattern" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/flutter/04-05-bloc-pattern" class="px-2">CA</a>
</span>
			<span class="d-none d-md-inline"><br><cite>Building today's and tomorrow's society</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Languages</a>
				 					<a href="/categ/frameworks">Frameworks</a>
				 					<a href="/categ/tech-tools">Tools</a>
				 					<a href="/categ/foundations">Foundations</a>
				 					<a href="/categ/soft-skills">Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-04-riverpod' title="Riverpod">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Bloc Pattern</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-01-introduction-to-navigation' title="Introduction to Navigation">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>The BLoC (Business Logic Component) pattern is a state management solution in Flutter that helps separate business logic from the UI. It promotes a reactive programming approach, making it easier to manage and test the state of your application.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Streams</strong>: Asynchronous sequences of data.</li>
<li><strong>Sinks</strong>: Input points for streams.</li>
<li><strong>BLoC</strong>: A class that manages the state and business logic.</li>
<li><strong>Events</strong>: Actions that trigger state changes.</li>
<li><strong>States</strong>: Representations of the UI at a given point in time.</li>
</ol>
</div><h1><p>Why Use BLoC?</p>
</h1>
<div class='content'><ul>
<li><strong>Separation of Concerns</strong>: Keeps UI code separate from business logic.</li>
<li><strong>Testability</strong>: Easier to write unit tests for business logic.</li>
<li><strong>Reusability</strong>: Business logic can be reused across different parts of the app.</li>
</ul>
</div><h1><p>Setting Up BLoC</p>
</h1>
<div class='content'></div><h2><p>Step 1: Add Dependencies</p>
</h2>
<div class='content'><p>Add the <code>flutter_bloc</code> and <code>bloc</code> packages to your <code>pubspec.yaml</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVwZW5kZW5jaWVzOgogIGZsdXR0ZXI6CiAgICBzZGs6IGZsdXR0ZXIKICBmbHV0dGVyX2Jsb2M6IF44LjAuMAogIGJsb2M6IF44LjAuMA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dependencies:
  flutter:
    sdk: flutter
  flutter_bloc: ^8.0.0
  bloc: ^8.0.0</pre></div><div class='content'><p>Run <code>flutter pub get</code> to install the packages.</p>
</div><h2><p>Step 2: Define Events</p>
</h2>
<div class='content'><p>Create an event class to represent the actions that can trigger state changes.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gY291bnRlcl9ldmVudC5kYXJ0CmFic3RyYWN0IGNsYXNzIENvdW50ZXJFdmVudCB7fQoKY2xhc3MgSW5jcmVtZW50IGV4dGVuZHMgQ291bnRlckV2ZW50IHt9CgpjbGFzcyBEZWNyZW1lbnQgZXh0ZW5kcyBDb3VudGVyRXZlbnQge30="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// counter_event.dart
abstract class CounterEvent {}

class Increment extends CounterEvent {}

class Decrement extends CounterEvent {}</pre></div><div class='content'></div><h2><p>Step 3: Define States</p>
</h2>
<div class='content'><p>Create a state class to represent the different states of the UI.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gY291bnRlcl9zdGF0ZS5kYXJ0CmNsYXNzIENvdW50ZXJTdGF0ZSB7CiAgZmluYWwgaW50IGNvdW50ZXJWYWx1ZTsKCiAgQ291bnRlclN0YXRlKHtyZXF1aXJlZCB0aGlzLmNvdW50ZXJWYWx1ZX0pOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// counter_state.dart
class CounterState {
  final int counterValue;

  CounterState({required this.counterValue});
}</pre></div><div class='content'></div><h2><p>Step 4: Create the BLoC</p>
</h2>
<div class='content'><p>Create a BLoC class that extends <code>Bloc</code> and handles the events to produce new states.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gY291bnRlcl9ibG9jLmRhcnQKaW1wb3J0ICdwYWNrYWdlOmJsb2MvYmxvYy5kYXJ0JzsKaW1wb3J0ICdjb3VudGVyX2V2ZW50LmRhcnQnOwppbXBvcnQgJ2NvdW50ZXJfc3RhdGUuZGFydCc7CgpjbGFzcyBDb3VudGVyQmxvYyBleHRlbmRzIEJsb2M8Q291bnRlckV2ZW50LCBDb3VudGVyU3RhdGU+IHsKICBDb3VudGVyQmxvYygpIDogc3VwZXIoQ291bnRlclN0YXRlKGNvdW50ZXJWYWx1ZTogMCkpIHsKICAgIG9uPEluY3JlbWVudD4oKGV2ZW50LCBlbWl0KSB7CiAgICAgIGVtaXQoQ291bnRlclN0YXRlKGNvdW50ZXJWYWx1ZTogc3RhdGUuY291bnRlclZhbHVlICsgMSkpOwogICAgfSk7CgogICAgb248RGVjcmVtZW50PigoZXZlbnQsIGVtaXQpIHsKICAgICAgZW1pdChDb3VudGVyU3RhdGUoY291bnRlclZhbHVlOiBzdGF0ZS5jb3VudGVyVmFsdWUgLSAxKSk7CiAgICB9KTsKICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// counter_bloc.dart
import 'package:bloc/bloc.dart';
import 'counter_event.dart';
import 'counter_state.dart';

class CounterBloc extends Bloc&lt;CounterEvent, CounterState&gt; {
  CounterBloc() : super(CounterState(counterValue: 0)) {
    on&lt;Increment&gt;((event, emit) {
      emit(CounterState(counterValue: state.counterValue + 1));
    });

    on&lt;Decrement&gt;((event, emit) {
      emit(CounterState(counterValue: state.counterValue - 1));
    });
  }
}</pre></div><div class='content'></div><h2><p>Step 5: Use BLoC in the UI</p>
</h2>
<div class='content'><p>Wrap your widget tree with <code>BlocProvider</code> and use <code>BlocBuilder</code> to rebuild the UI based on the state.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gbWFpbi5kYXJ0CmltcG9ydCAncGFja2FnZTpmbHV0dGVyL21hdGVyaWFsLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6Zmx1dHRlcl9ibG9jL2ZsdXR0ZXJfYmxvYy5kYXJ0JzsKaW1wb3J0ICdjb3VudGVyX2Jsb2MuZGFydCc7CmltcG9ydCAnY291bnRlcl9ldmVudC5kYXJ0JzsKaW1wb3J0ICdjb3VudGVyX3N0YXRlLmRhcnQnOwoKdm9pZCBtYWluKCkgewogIHJ1bkFwcChNeUFwcCgpKTsKfQoKY2xhc3MgTXlBcHAgZXh0ZW5kcyBTdGF0ZWxlc3NXaWRnZXQgewogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgcmV0dXJuIE1hdGVyaWFsQXBwKAogICAgICBob21lOiBCbG9jUHJvdmlkZXIoCiAgICAgICAgY3JlYXRlOiAoY29udGV4dCkgPT4gQ291bnRlckJsb2MoKSwKICAgICAgICBjaGlsZDogQ291bnRlclNjcmVlbigpLAogICAgICApLAogICAgKTsKICB9Cn0KCmNsYXNzIENvdW50ZXJTY3JlZW4gZXh0ZW5kcyBTdGF0ZWxlc3NXaWRnZXQgewogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgZmluYWwgY291bnRlckJsb2MgPSBCbG9jUHJvdmlkZXIub2Y8Q291bnRlckJsb2M+KGNvbnRleHQpOwoKICAgIHJldHVybiBTY2FmZm9sZCgKICAgICAgYXBwQmFyOiBBcHBCYXIodGl0bGU6IFRleHQoJ0JMb0MgUGF0dGVybiBFeGFtcGxlJykpLAogICAgICBib2R5OiBDZW50ZXIoCiAgICAgICAgY2hpbGQ6IEJsb2NCdWlsZGVyPENvdW50ZXJCbG9jLCBDb3VudGVyU3RhdGU+KAogICAgICAgICAgYnVpbGRlcjogKGNvbnRleHQsIHN0YXRlKSB7CiAgICAgICAgICAgIHJldHVybiBUZXh0KCdDb3VudGVyIFZhbHVlOiAke3N0YXRlLmNvdW50ZXJWYWx1ZX0nKTsKICAgICAgICAgIH0sCiAgICAgICAgKSwKICAgICAgKSwKICAgICAgZmxvYXRpbmdBY3Rpb25CdXR0b246IENvbHVtbigKICAgICAgICBtYWluQXhpc0FsaWdubWVudDogTWFpbkF4aXNBbGlnbm1lbnQuZW5kLAogICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICBGbG9hdGluZ0FjdGlvbkJ1dHRvbigKICAgICAgICAgICAgb25QcmVzc2VkOiAoKSA9PiBjb3VudGVyQmxvYy5hZGQoSW5jcmVtZW50KCkpLAogICAgICAgICAgICBjaGlsZDogSWNvbihJY29ucy5hZGQpLAogICAgICAgICAgKSwKICAgICAgICAgIFNpemVkQm94KGhlaWdodDogMTApLAogICAgICAgICAgRmxvYXRpbmdBY3Rpb25CdXR0b24oCiAgICAgICAgICAgIG9uUHJlc3NlZDogKCkgPT4gY291bnRlckJsb2MuYWRkKERlY3JlbWVudCgpKSwKICAgICAgICAgICAgY2hpbGQ6IEljb24oSWNvbnMucmVtb3ZlKSwKICAgICAgICAgICksCiAgICAgICAgXSwKICAgICAgKSwKICAgICk7CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// main.dart
import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'counter_bloc.dart';
import 'counter_event.dart';
import 'counter_state.dart';

void main() {
  runApp(MyApp());
}

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: BlocProvider(
        create: (context) =&gt; CounterBloc(),
        child: CounterScreen(),
      ),
    );
  }
}

class CounterScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    final counterBloc = BlocProvider.of&lt;CounterBloc&gt;(context);

    return Scaffold(
      appBar: AppBar(title: Text('BLoC Pattern Example')),
      body: Center(
        child: BlocBuilder&lt;CounterBloc, CounterState&gt;(
          builder: (context, state) {
            return Text('Counter Value: ${state.counterValue}');
          },
        ),
      ),
      floatingActionButton: Column(
        mainAxisAlignment: MainAxisAlignment.end,
        children: [
          FloatingActionButton(
            onPressed: () =&gt; counterBloc.add(Increment()),
            child: Icon(Icons.add),
          ),
          SizedBox(height: 10),
          FloatingActionButton(
            onPressed: () =&gt; counterBloc.add(Decrement()),
            child: Icon(Icons.remove),
          ),
        ],
      ),
    );
  }
}</pre></div><div class='content'></div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Task</p>
</h2>
<div class='content'><ol>
<li>Create a new Flutter project.</li>
<li>Implement the BLoC pattern to manage a counter.</li>
<li>Add buttons to increment and decrement the counter.</li>
<li>Display the current counter value in the UI.</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'><p>Follow the steps outlined above to complete the exercise. Ensure you have the necessary dependencies and that your BLoC, events, and states are correctly set up.</p>
</div><h1><p>Common Mistakes</p>
</h1>
<div class='content'><ul>
<li><strong>Forgetting to Dispose BLoC</strong>: Always dispose of your BLoC to avoid memory leaks.</li>
<li><strong>Incorrect State Emission</strong>: Ensure that the correct state is emitted in response to events.</li>
<li><strong>Not Using BlocBuilder</strong>: Use <code>BlocBuilder</code> to rebuild the UI based on state changes.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>The BLoC pattern is a powerful way to manage state in Flutter applications. By separating business logic from the UI, it makes your code more maintainable and testable. Practice implementing BLoC in different scenarios to become proficient in using this pattern.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-04-riverpod' title="Riverpod">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-01-introduction-to-navigation' title="Introduction to Navigation">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Advertising</h1>
<p>This space is reserved for advertising.</p>
<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Thank you for collaborating!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
