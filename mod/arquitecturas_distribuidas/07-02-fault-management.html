<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fault Management and Recovery</title>

    <link rel="alternate" href="https://campusempresa.com/mod/arquitecturas_distribuidas/07-02-gestion-fallos" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/arquitecturas_distribuidas/07-02-gestio-fallades" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/arquitecturas_distribuidas/07-02-fault-management" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/arquitecturas_distribuidas/07-02-gestion-fallos" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/arquitecturas_distribuidas/07-02-gestio-fallades" class="px-2">CA</a>
					</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-01-system-monitoring' title="Monitoring Distributed Systems">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Fault Management and Recovery</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-03-automation-orchestration' title="Automation and Orchestration">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Fault management and recovery are critical components of maintaining the reliability and availability of distributed systems. This section will cover the key concepts, techniques, and tools used to detect, diagnose, and recover from faults in distributed systems.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Fault Types</strong>:</p>
<ul>
<li><strong>Transient Faults</strong>: Temporary issues that resolve themselves.</li>
<li><strong>Intermittent Faults</strong>: Occur sporadically and are harder to diagnose.</li>
<li><strong>Permanent Faults</strong>: Persistent issues that require intervention to resolve.</li>
</ul>
</li>
<li>
<p><strong>Fault Tolerance</strong>:</p>
<ul>
<li>The ability of a system to continue operating properly in the event of the failure of some of its components.</li>
</ul>
</li>
<li>
<p><strong>Redundancy</strong>:</p>
<ul>
<li><strong>Hardware Redundancy</strong>: Using multiple hardware components to ensure system reliability.</li>
<li><strong>Software Redundancy</strong>: Using multiple software components or versions to achieve fault tolerance.</li>
</ul>
</li>
<li>
<p><strong>Failover Mechanisms</strong>:</p>
<ul>
<li>Techniques to switch to a standby system or component when the primary one fails.</li>
</ul>
</li>
</ol>
</div><h1><p>Techniques for Fault Management</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Error Detection</strong>:</p>
<ul>
<li><strong>Heartbeat Mechanisms</strong>: Regular signals sent between components to indicate they are operational.</li>
<li><strong>Checksums and Hashing</strong>: Techniques to verify data integrity.</li>
<li><strong>Watchdog Timers</strong>: Timers that trigger actions if a system does not respond within a specified time.</li>
</ul>
</li>
<li>
<p><strong>Error Diagnosis</strong>:</p>
<ul>
<li><strong>Log Analysis</strong>: Reviewing logs to identify patterns or anomalies.</li>
<li><strong>Monitoring Tools</strong>: Using tools to continuously monitor system health and performance.</li>
<li><strong>Root Cause Analysis</strong>: Techniques to determine the underlying cause of a fault.</li>
</ul>
</li>
<li>
<p><strong>Error Recovery</strong>:</p>
<ul>
<li><strong>Checkpointing</strong>: Saving the state of a system at intervals to allow rollback in case of failure.</li>
<li><strong>Replication</strong>: Maintaining copies of data or services to ensure availability.</li>
<li><strong>Rollback and Rollforward</strong>: Techniques to revert to a previous state or move forward to a consistent state after a fault.</li>
</ul>
</li>
</ol>
</div><h1><p>Practical Example: Implementing a Heartbeat Mechanism</p>
</h1>
<div class='content'></div><h2><p>Code Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHRpbWUKaW1wb3J0IHRocmVhZGluZwoKY2xhc3MgSGVhcnRiZWF0OgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGludGVydmFsPTUpOgogICAgICAgIHNlbGYuaW50ZXJ2YWwgPSBpbnRlcnZhbAogICAgICAgIHNlbGYubGFzdF9oZWFydGJlYXQgPSB0aW1lLnRpbWUoKQogICAgICAgIHNlbGYucnVubmluZyA9IFRydWUKCiAgICBkZWYgc2VuZF9oZWFydGJlYXQoc2VsZik6CiAgICAgICAgd2hpbGUgc2VsZi5ydW5uaW5nOgogICAgICAgICAgICBwcmludCgiSGVhcnRiZWF0IHNlbnQgYXQiLCB0aW1lLnRpbWUoKSkKICAgICAgICAgICAgc2VsZi5sYXN0X2hlYXJ0YmVhdCA9IHRpbWUudGltZSgpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoc2VsZi5pbnRlcnZhbCkKCiAgICBkZWYgY2hlY2tfaGVhcnRiZWF0KHNlbGYpOgogICAgICAgIHdoaWxlIHNlbGYucnVubmluZzoKICAgICAgICAgICAgY3VycmVudF90aW1lID0gdGltZS50aW1lKCkKICAgICAgICAgICAgaWYgY3VycmVudF90aW1lIC0gc2VsZi5sYXN0X2hlYXJ0YmVhdCA+IHNlbGYuaW50ZXJ2YWwgKiAyOgogICAgICAgICAgICAgICAgcHJpbnQoIkhlYXJ0YmVhdCBtaXNzZWQhIFRha2luZyBjb3JyZWN0aXZlIGFjdGlvbi4iKQogICAgICAgICAgICAgICAgc2VsZi50YWtlX2NvcnJlY3RpdmVfYWN0aW9uKCkKICAgICAgICAgICAgdGltZS5zbGVlcChzZWxmLmludGVydmFsKQoKICAgIGRlZiB0YWtlX2NvcnJlY3RpdmVfYWN0aW9uKHNlbGYpOgogICAgICAgIHByaW50KCJSZXN0YXJ0aW5nIHNlcnZpY2UuLi4iKQoKICAgIGRlZiBzdGFydChzZWxmKToKICAgICAgICB0aHJlYWRpbmcuVGhyZWFkKHRhcmdldD1zZWxmLnNlbmRfaGVhcnRiZWF0KS5zdGFydCgpCiAgICAgICAgdGhyZWFkaW5nLlRocmVhZCh0YXJnZXQ9c2VsZi5jaGVja19oZWFydGJlYXQpLnN0YXJ0KCkKCiAgICBkZWYgc3RvcChzZWxmKToKICAgICAgICBzZWxmLnJ1bm5pbmcgPSBGYWxzZQoKIyBVc2FnZQpoZWFydGJlYXQgPSBIZWFydGJlYXQoaW50ZXJ2YWw9NSkKaGVhcnRiZWF0LnN0YXJ0KCkKCiMgTGV0IGl0IHJ1biBmb3Igc29tZSB0aW1lCnRpbWUuc2xlZXAoMzApCmhlYXJ0YmVhdC5zdG9wKCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import time
import threading

class Heartbeat:
    def __init__(self, interval=5):
        self.interval = interval
        self.last_heartbeat = time.time()
        self.running = True

    def send_heartbeat(self):
        while self.running:
            print(&quot;Heartbeat sent at&quot;, time.time())
            self.last_heartbeat = time.time()
            time.sleep(self.interval)

    def check_heartbeat(self):
        while self.running:
            current_time = time.time()
            if current_time - self.last_heartbeat &gt; self.interval * 2:
                print(&quot;Heartbeat missed! Taking corrective action.&quot;)
                self.take_corrective_action()
            time.sleep(self.interval)

    def take_corrective_action(self):
        print(&quot;Restarting service...&quot;)

    def start(self):
        threading.Thread(target=self.send_heartbeat).start()
        threading.Thread(target=self.check_heartbeat).start()

    def stop(self):
        self.running = False

# Usage
heartbeat = Heartbeat(interval=5)
heartbeat.start()

# Let it run for some time
time.sleep(30)
heartbeat.stop()</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>Heartbeat Class</strong>: Manages the sending and checking of heartbeats.</li>
<li><strong>send_heartbeat Method</strong>: Sends a heartbeat signal at regular intervals.</li>
<li><strong>check_heartbeat Method</strong>: Checks if a heartbeat has been missed and takes corrective action if necessary.</li>
<li><strong>take_corrective_action Method</strong>: Placeholder for actions to take when a heartbeat is missed.</li>
<li><strong>start Method</strong>: Starts the heartbeat and checking threads.</li>
<li><strong>stop Method</strong>: Stops the heartbeat mechanism.</li>
</ul>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise</p>
</h2>
<div class='content'><ol>
<li><strong>Implement a Checkpointing Mechanism</strong>:
<ul>
<li>Write a Python script that periodically saves the state of a counter to a file.</li>
<li>Implement a recovery mechanism that reads the state from the file and resumes counting from the last saved state.</li>
</ul>
</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHRpbWUKaW1wb3J0IG9zCgpjbGFzcyBDaGVja3BvaW50aW5nOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGNoZWNrcG9pbnRfZmlsZT0nY2hlY2twb2ludC50eHQnLCBpbnRlcnZhbD01KToKICAgICAgICBzZWxmLmNoZWNrcG9pbnRfZmlsZSA9IGNoZWNrcG9pbnRfZmlsZQogICAgICAgIHNlbGYuaW50ZXJ2YWwgPSBpbnRlcnZhbAogICAgICAgIHNlbGYuY291bnRlciA9IDAKCiAgICBkZWYgc2F2ZV9zdGF0ZShzZWxmKToKICAgICAgICB3aXRoIG9wZW4oc2VsZi5jaGVja3BvaW50X2ZpbGUsICd3JykgYXMgZjoKICAgICAgICAgICAgZi53cml0ZShzdHIoc2VsZi5jb3VudGVyKSkKICAgICAgICBwcmludChmIlN0YXRlIHNhdmVkOiB7c2VsZi5jb3VudGVyfSIpCgogICAgZGVmIGxvYWRfc3RhdGUoc2VsZik6CiAgICAgICAgaWYgb3MucGF0aC5leGlzdHMoc2VsZi5jaGVja3BvaW50X2ZpbGUpOgogICAgICAgICAgICB3aXRoIG9wZW4oc2VsZi5jaGVja3BvaW50X2ZpbGUsICdyJykgYXMgZjoKICAgICAgICAgICAgICAgIHNlbGYuY291bnRlciA9IGludChmLnJlYWQoKSkKICAgICAgICAgICAgcHJpbnQoZiJTdGF0ZSBsb2FkZWQ6IHtzZWxmLmNvdW50ZXJ9IikKCiAgICBkZWYgc3RhcnQoc2VsZik6CiAgICAgICAgc2VsZi5sb2FkX3N0YXRlKCkKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICBzZWxmLmNvdW50ZXIgKz0gMQogICAgICAgICAgICBwcmludChmIkNvdW50ZXI6IHtzZWxmLmNvdW50ZXJ9IikKICAgICAgICAgICAgaWYgc2VsZi5jb3VudGVyICUgc2VsZi5pbnRlcnZhbCA9PSAwOgogICAgICAgICAgICAgICAgc2VsZi5zYXZlX3N0YXRlKCkKICAgICAgICAgICAgdGltZS5zbGVlcCgxKQoKIyBVc2FnZQpjaGVja3BvaW50aW5nID0gQ2hlY2twb2ludGluZyhpbnRlcnZhbD01KQpjaGVja3BvaW50aW5nLnN0YXJ0KCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import time
import os

class Checkpointing:
    def __init__(self, checkpoint_file='checkpoint.txt', interval=5):
        self.checkpoint_file = checkpoint_file
        self.interval = interval
        self.counter = 0

    def save_state(self):
        with open(self.checkpoint_file, 'w') as f:
            f.write(str(self.counter))
        print(f&quot;State saved: {self.counter}&quot;)

    def load_state(self):
        if os.path.exists(self.checkpoint_file):
            with open(self.checkpoint_file, 'r') as f:
                self.counter = int(f.read())
            print(f&quot;State loaded: {self.counter}&quot;)

    def start(self):
        self.load_state()
        while True:
            self.counter += 1
            print(f&quot;Counter: {self.counter}&quot;)
            if self.counter % self.interval == 0:
                self.save_state()
            time.sleep(1)

# Usage
checkpointing = Checkpointing(interval=5)
checkpointing.start()</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>Checkpointing Class</strong>: Manages the saving and loading of the counter state.</li>
<li><strong>save_state Method</strong>: Saves the current counter value to a file.</li>
<li><strong>load_state Method</strong>: Loads the counter value from the file if it exists.</li>
<li><strong>start Method</strong>: Starts the counter and periodically saves the state.</li>
</ul>
</div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ol>
<li><strong>Ignoring Transient Faults</strong>: Even though they are temporary, transient faults can indicate underlying issues.</li>
<li><strong>Overlooking Log Analysis</strong>: Regularly review logs to catch issues early.</li>
<li><strong>Inadequate Testing</strong>: Test fault tolerance mechanisms under various scenarios to ensure reliability.</li>
</ol>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>Fault management and recovery are essential for maintaining the reliability and availability of distributed systems. By understanding fault types, implementing error detection and recovery techniques, and using practical tools like heartbeat mechanisms and checkpointing, you can build robust distributed systems that can handle failures gracefully.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-01-system-monitoring' title="Monitoring Distributed Systems">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-03-automation-orchestration' title="Automation and Orchestration">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
