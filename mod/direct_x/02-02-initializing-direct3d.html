<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Initializing Direct3D</title>

    <link rel="alternate" href="https://campusempresa.com/mod/direct_x/02-02-initializing-direct3d" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/direct_x/02-02-initializing-direct3d" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/direct_x/02-02-initializing-direct3d" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/direct_x/02-02-initializing-direct3d" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/direct_x/02-02-initializing-direct3d" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='02-01-introduction-to-direct3d' title="Introduction to Direct3D">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Initializing Direct3D</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='02-03-rendering-a-triangle' title="Rendering a Triangle">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will cover the essential steps to initialize Direct3D, which is a crucial part of any DirectX application. By the end of this module, you will have a basic Direct3D setup that can be used as a foundation for rendering graphics.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Direct3D Device and Device Context</strong>: These are the core components used to interface with the GPU.</li>
<li><strong>Swap Chain</strong>: Manages the buffers that are displayed on the screen.</li>
<li><strong>Render Target View</strong>: Defines the render target, which is where the GPU will draw the output.</li>
<li><strong>Viewport</strong>: Defines the area of the render target to which Direct3D will draw.</li>
</ol>
</div><h1>Steps to Initialize Direct3D</h1>
<div class='content'><ol>
<li><strong>Create the Direct3D Device and Device Context</strong></li>
<li><strong>Create the Swap Chain</strong></li>
<li><strong>Create the Render Target View</strong></li>
<li><strong>Set the Viewport</strong></li>
</ol>
</div><h2>Step 1: Create the Direct3D Device and Device Context</h2>
<div class='content'><p>The Direct3D device and device context are created using the <code>D3D11CreateDevice</code> function. This function initializes the Direct3D device and device context, which are used to interface with the GPU.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGQzZDExLmg+CiNpbmNsdWRlIDxkeGdpLmg+CiNpbmNsdWRlIDxkM2Rjb21waWxlci5oPgojaW5jbHVkZSA8RGlyZWN0WE1hdGguaD4KCi8vIEdsb2JhbCBEZWNsYXJhdGlvbnMKSUQzRDExRGV2aWNlKiBnX3BkM2REZXZpY2UgPSBudWxscHRyOwpJRDNEMTFEZXZpY2VDb250ZXh0KiBnX3BJbW1lZGlhdGVDb250ZXh0ID0gbnVsbHB0cjsKCkhSRVNVTFQgaHIgPSBEM0QxMUNyZWF0ZURldmljZSgKICAgIG51bGxwdHIsICAgICAgICAgICAgICAgICAgICAvLyBTcGVjaWZ5IG51bGxwdHIgdG8gdXNlIHRoZSBkZWZhdWx0IGFkYXB0ZXIuCiAgICBEM0RfRFJJVkVSX1RZUEVfSEFSRFdBUkUsICAgLy8gQ3JlYXRlIGEgZGV2aWNlIHVzaW5nIHRoZSBoYXJkd2FyZSBncmFwaGljcyBkcml2ZXIuCiAgICAwLCAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2hvdWxkIGJlIDAgdW5sZXNzIHRoZSBkcml2ZXIgaXMgRDNEX0RSSVZFUl9UWVBFX1NPRlRXQVJFLgogICAgMCwgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCBkZWJ1ZyBhbmQgRGlyZWN0MkQgY29tcGF0aWJpbGl0eSBmbGFncy4KICAgIG51bGxwdHIsICAgICAgICAgICAgICAgICAgICAvLyBMaXN0IG9mIGZlYXR1cmUgbGV2ZWxzIHRoaXMgYXBwIGNhbiBzdXBwb3J0LgogICAgMCwgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgZmVhdHVyZSBsZXZlbCBhcnJheS4KICAgIEQzRDExX1NES19WRVJTSU9OLCAgICAgICAgICAvLyBBbHdheXMgc2V0IHRoaXMgdG8gRDNEMTFfU0RLX1ZFUlNJT04uCiAgICAmZ19wZDNkRGV2aWNlLCAgICAgICAgICAgICAgLy8gUmV0dXJucyB0aGUgRGlyZWN0M0QgZGV2aWNlIGNyZWF0ZWQuCiAgICBudWxscHRyLCAgICAgICAgICAgICAgICAgICAgLy8gUmV0dXJucyBmZWF0dXJlIGxldmVsIG9mIGRldmljZSBjcmVhdGVkLgogICAgJmdfcEltbWVkaWF0ZUNvbnRleHQgICAgICAgIC8vIFJldHVybnMgdGhlIGRldmljZSBpbW1lZGlhdGUgY29udGV4dC4KKTsKCmlmIChGQUlMRUQoaHIpKSB7CiAgICAvLyBIYW5kbGUgZGV2aWNlIGNyZWF0aW9uIGZhaWx1cmUKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;d3d11.h&gt;
#include &lt;dxgi.h&gt;
#include &lt;d3dcompiler.h&gt;
#include &lt;DirectXMath.h&gt;

// Global Declarations
ID3D11Device* g_pd3dDevice = nullptr;
ID3D11DeviceContext* g_pImmediateContext = nullptr;

HRESULT hr = D3D11CreateDevice(
    nullptr,                    // Specify nullptr to use the default adapter.
    D3D_DRIVER_TYPE_HARDWARE,   // Create a device using the hardware graphics driver.
    0,                          // Should be 0 unless the driver is D3D_DRIVER_TYPE_SOFTWARE.
    0,                          // Set debug and Direct2D compatibility flags.
    nullptr,                    // List of feature levels this app can support.
    0,                          // Number of elements in the feature level array.
    D3D11_SDK_VERSION,          // Always set this to D3D11_SDK_VERSION.
    &amp;g_pd3dDevice,              // Returns the Direct3D device created.
    nullptr,                    // Returns feature level of device created.
    &amp;g_pImmediateContext        // Returns the device immediate context.
);

if (FAILED(hr)) {
    // Handle device creation failure
}</pre></div><div class='content'></div><h2>Step 2: Create the Swap Chain</h2>
<div class='content'><p>The swap chain is responsible for presenting the rendered image to the screen. It manages the back buffer and the front buffer.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SURYR0lTd2FwQ2hhaW4qIGdfcFN3YXBDaGFpbiA9IG51bGxwdHI7CgpEWEdJX1NXQVBfQ0hBSU5fREVTQyBzZDsKWmVyb01lbW9yeSgmc2QsIHNpemVvZihzZCkpOwpzZC5CdWZmZXJDb3VudCA9IDE7CnNkLkJ1ZmZlckRlc2MuV2lkdGggPSA4MDA7CnNkLkJ1ZmZlckRlc2MuSGVpZ2h0ID0gNjAwOwpzZC5CdWZmZXJEZXNjLkZvcm1hdCA9IERYR0lfRk9STUFUX1I4RzhCOEE4X1VOT1JNOwpzZC5CdWZmZXJEZXNjLlJlZnJlc2hSYXRlLk51bWVyYXRvciA9IDYwOwpzZC5CdWZmZXJEZXNjLlJlZnJlc2hSYXRlLkRlbm9taW5hdG9yID0gMTsKc2QuQnVmZmVyVXNhZ2UgPSBEWEdJX1VTQUdFX1JFTkRFUl9UQVJHRVRfT1VUUFVUOwpzZC5PdXRwdXRXaW5kb3cgPSBoV25kOyAvLyBIYW5kbGUgdG8gdGhlIHdpbmRvdwpzZC5TYW1wbGVEZXNjLkNvdW50ID0gMTsKc2QuU2FtcGxlRGVzYy5RdWFsaXR5ID0gMDsKc2QuV2luZG93ZWQgPSBUUlVFOwoKSURYR0lEZXZpY2UqIHBEWEdJRGV2aWNlID0gbnVsbHB0cjsKZ19wZDNkRGV2aWNlLT5RdWVyeUludGVyZmFjZShfX3V1aWRvZihJRFhHSURldmljZSksICh2b2lkKiopJnBEWEdJRGV2aWNlKTsKCklEWEdJQWRhcHRlciogcERYR0lBZGFwdGVyID0gbnVsbHB0cjsKcERYR0lEZXZpY2UtPkdldFBhcmVudChfX3V1aWRvZihJRFhHSUFkYXB0ZXIpLCAodm9pZCoqKSZwRFhHSUFkYXB0ZXIpOwoKSURYR0lGYWN0b3J5KiBwSURYR0lGYWN0b3J5ID0gbnVsbHB0cjsKcERYR0lBZGFwdGVyLT5HZXRQYXJlbnQoX191dWlkb2YoSURYR0lGYWN0b3J5KSwgKHZvaWQqKikmcElEWEdJRmFjdG9yeSk7CgpociA9IHBJRFhHSUZhY3RvcnktPkNyZWF0ZVN3YXBDaGFpbihnX3BkM2REZXZpY2UsICZzZCwgJmdfcFN3YXBDaGFpbik7CgppZiAoRkFJTEVEKGhyKSkgewogICAgLy8gSGFuZGxlIHN3YXAgY2hhaW4gY3JlYXRpb24gZmFpbHVyZQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>IDXGISwapChain* g_pSwapChain = nullptr;

DXGI_SWAP_CHAIN_DESC sd;
ZeroMemory(&amp;sd, sizeof(sd));
sd.BufferCount = 1;
sd.BufferDesc.Width = 800;
sd.BufferDesc.Height = 600;
sd.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;
sd.BufferDesc.RefreshRate.Numerator = 60;
sd.BufferDesc.RefreshRate.Denominator = 1;
sd.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;
sd.OutputWindow = hWnd; // Handle to the window
sd.SampleDesc.Count = 1;
sd.SampleDesc.Quality = 0;
sd.Windowed = TRUE;

IDXGIDevice* pDXGIDevice = nullptr;
g_pd3dDevice-&gt;QueryInterface(__uuidof(IDXGIDevice), (void**)&amp;pDXGIDevice);

IDXGIAdapter* pDXGIAdapter = nullptr;
pDXGIDevice-&gt;GetParent(__uuidof(IDXGIAdapter), (void**)&amp;pDXGIAdapter);

IDXGIFactory* pIDXGIFactory = nullptr;
pDXGIAdapter-&gt;GetParent(__uuidof(IDXGIFactory), (void**)&amp;pIDXGIFactory);

hr = pIDXGIFactory-&gt;CreateSwapChain(g_pd3dDevice, &amp;sd, &amp;g_pSwapChain);

if (FAILED(hr)) {
    // Handle swap chain creation failure
}</pre></div><div class='content'></div><h2>Step 3: Create the Render Target View</h2>
<div class='content'><p>The render target view is created from the back buffer of the swap chain. This is where the GPU will draw the output.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SUQzRDExUmVuZGVyVGFyZ2V0VmlldyogZ19wUmVuZGVyVGFyZ2V0VmlldyA9IG51bGxwdHI7CklEM0QxMVRleHR1cmUyRCogcEJhY2tCdWZmZXIgPSBudWxscHRyOwoKaHIgPSBnX3BTd2FwQ2hhaW4tPkdldEJ1ZmZlcigwLCBfX3V1aWRvZihJRDNEMTFUZXh0dXJlMkQpLCAodm9pZCoqKSZwQmFja0J1ZmZlcik7CmlmIChGQUlMRUQoaHIpKSB7CiAgICAvLyBIYW5kbGUgZ2V0dGluZyBidWZmZXIgZmFpbHVyZQp9CgpociA9IGdfcGQzZERldmljZS0+Q3JlYXRlUmVuZGVyVGFyZ2V0VmlldyhwQmFja0J1ZmZlciwgbnVsbHB0ciwgJmdfcFJlbmRlclRhcmdldFZpZXcpOwpwQmFja0J1ZmZlci0+UmVsZWFzZSgpOwppZiAoRkFJTEVEKGhyKSkgewogICAgLy8gSGFuZGxlIHJlbmRlciB0YXJnZXQgdmlldyBjcmVhdGlvbiBmYWlsdXJlCn0KCmdfcEltbWVkaWF0ZUNvbnRleHQtPk9NU2V0UmVuZGVyVGFyZ2V0cygxLCAmZ19wUmVuZGVyVGFyZ2V0VmlldywgbnVsbHB0cik7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ID3D11RenderTargetView* g_pRenderTargetView = nullptr;
ID3D11Texture2D* pBackBuffer = nullptr;

hr = g_pSwapChain-&gt;GetBuffer(0, __uuidof(ID3D11Texture2D), (void**)&amp;pBackBuffer);
if (FAILED(hr)) {
    // Handle getting buffer failure
}

hr = g_pd3dDevice-&gt;CreateRenderTargetView(pBackBuffer, nullptr, &amp;g_pRenderTargetView);
pBackBuffer-&gt;Release();
if (FAILED(hr)) {
    // Handle render target view creation failure
}

g_pImmediateContext-&gt;OMSetRenderTargets(1, &amp;g_pRenderTargetView, nullptr);</pre></div><div class='content'></div><h2>Step 4: Set the Viewport</h2>
<div class='content'><p>The viewport defines the area of the render target to which Direct3D will draw.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RDNEMTFfVklFV1BPUlQgdnA7CnZwLldpZHRoID0gKEZMT0FUKTgwMDsKdnAuSGVpZ2h0ID0gKEZMT0FUKTYwMDsKdnAuTWluRGVwdGggPSAwLjBmOwp2cC5NYXhEZXB0aCA9IDEuMGY7CnZwLlRvcExlZnRYID0gMDsKdnAuVG9wTGVmdFkgPSAwOwpnX3BJbW1lZGlhdGVDb250ZXh0LT5SU1NldFZpZXdwb3J0cygxLCAmdnApOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>D3D11_VIEWPORT vp;
vp.Width = (FLOAT)800;
vp.Height = (FLOAT)600;
vp.MinDepth = 0.0f;
vp.MaxDepth = 1.0f;
vp.TopLeftX = 0;
vp.TopLeftY = 0;
g_pImmediateContext-&gt;RSSetViewports(1, &amp;vp);</pre></div><div class='content'></div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise: Initialize Direct3D</h2>
<div class='content'><ol>
<li>Create a new Win32 application project.</li>
<li>Include the necessary Direct3D headers.</li>
<li>Follow the steps outlined above to initialize Direct3D.</li>
<li>Compile and run your application to ensure that Direct3D is initialized correctly.</li>
</ol>
</div><h2>Solution</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGQzZDExLmg+CiNpbmNsdWRlIDxkeGdpLmg+CiNpbmNsdWRlIDxkM2Rjb21waWxlci5oPgojaW5jbHVkZSA8RGlyZWN0WE1hdGguaD4KCi8vIEdsb2JhbCBEZWNsYXJhdGlvbnMKSUQzRDExRGV2aWNlKiBnX3BkM2REZXZpY2UgPSBudWxscHRyOwpJRDNEMTFEZXZpY2VDb250ZXh0KiBnX3BJbW1lZGlhdGVDb250ZXh0ID0gbnVsbHB0cjsKSURYR0lTd2FwQ2hhaW4qIGdfcFN3YXBDaGFpbiA9IG51bGxwdHI7CklEM0QxMVJlbmRlclRhcmdldFZpZXcqIGdfcFJlbmRlclRhcmdldFZpZXcgPSBudWxscHRyOwoKSFJFU1VMVCBJbml0RDNEKEhXTkQgaFduZCkgewogICAgSFJFU1VMVCBociA9IFNfT0s7CgogICAgLy8gQ3JlYXRlIERldmljZSBhbmQgRGV2aWNlIENvbnRleHQKICAgIGhyID0gRDNEMTFDcmVhdGVEZXZpY2UoCiAgICAgICAgbnVsbHB0ciwKICAgICAgICBEM0RfRFJJVkVSX1RZUEVfSEFSRFdBUkUsCiAgICAgICAgMCwKICAgICAgICAwLAogICAgICAgIG51bGxwdHIsCiAgICAgICAgMCwKICAgICAgICBEM0QxMV9TREtfVkVSU0lPTiwKICAgICAgICAmZ19wZDNkRGV2aWNlLAogICAgICAgIG51bGxwdHIsCiAgICAgICAgJmdfcEltbWVkaWF0ZUNvbnRleHQKICAgICk7CiAgICBpZiAoRkFJTEVEKGhyKSkgcmV0dXJuIGhyOwoKICAgIC8vIENyZWF0ZSBTd2FwIENoYWluCiAgICBEWEdJX1NXQVBfQ0hBSU5fREVTQyBzZDsKICAgIFplcm9NZW1vcnkoJnNkLCBzaXplb2Yoc2QpKTsKICAgIHNkLkJ1ZmZlckNvdW50ID0gMTsKICAgIHNkLkJ1ZmZlckRlc2MuV2lkdGggPSA4MDA7CiAgICBzZC5CdWZmZXJEZXNjLkhlaWdodCA9IDYwMDsKICAgIHNkLkJ1ZmZlckRlc2MuRm9ybWF0ID0gRFhHSV9GT1JNQVRfUjhHOEI4QThfVU5PUk07CiAgICBzZC5CdWZmZXJEZXNjLlJlZnJlc2hSYXRlLk51bWVyYXRvciA9IDYwOwogICAgc2QuQnVmZmVyRGVzYy5SZWZyZXNoUmF0ZS5EZW5vbWluYXRvciA9IDE7CiAgICBzZC5CdWZmZXJVc2FnZSA9IERYR0lfVVNBR0VfUkVOREVSX1RBUkdFVF9PVVRQVVQ7CiAgICBzZC5PdXRwdXRXaW5kb3cgPSBoV25kOwogICAgc2QuU2FtcGxlRGVzYy5Db3VudCA9IDE7CiAgICBzZC5TYW1wbGVEZXNjLlF1YWxpdHkgPSAwOwogICAgc2QuV2luZG93ZWQgPSBUUlVFOwoKICAgIElEWEdJRGV2aWNlKiBwRFhHSURldmljZSA9IG51bGxwdHI7CiAgICBnX3BkM2REZXZpY2UtPlF1ZXJ5SW50ZXJmYWNlKF9fdXVpZG9mKElEWEdJRGV2aWNlKSwgKHZvaWQqKikmcERYR0lEZXZpY2UpOwoKICAgIElEWEdJQWRhcHRlciogcERYR0lBZGFwdGVyID0gbnVsbHB0cjsKICAgIHBEWEdJRGV2aWNlLT5HZXRQYXJlbnQoX191dWlkb2YoSURYR0lBZGFwdGVyKSwgKHZvaWQqKikmcERYR0lBZGFwdGVyKTsKCiAgICBJRFhHSUZhY3RvcnkqIHBJRFhHSUZhY3RvcnkgPSBudWxscHRyOwogICAgcERYR0lBZGFwdGVyLT5HZXRQYXJlbnQoX191dWlkb2YoSURYR0lGYWN0b3J5KSwgKHZvaWQqKikmcElEWEdJRmFjdG9yeSk7CgogICAgaHIgPSBwSURYR0lGYWN0b3J5LT5DcmVhdGVTd2FwQ2hhaW4oZ19wZDNkRGV2aWNlLCAmc2QsICZnX3BTd2FwQ2hhaW4pOwogICAgaWYgKEZBSUxFRChocikpIHJldHVybiBocjsKCiAgICAvLyBDcmVhdGUgUmVuZGVyIFRhcmdldCBWaWV3CiAgICBJRDNEMTFUZXh0dXJlMkQqIHBCYWNrQnVmZmVyID0gbnVsbHB0cjsKICAgIGhyID0gZ19wU3dhcENoYWluLT5HZXRCdWZmZXIoMCwgX191dWlkb2YoSUQzRDExVGV4dHVyZTJEKSwgKHZvaWQqKikmcEJhY2tCdWZmZXIpOwogICAgaWYgKEZBSUxFRChocikpIHJldHVybiBocjsKCiAgICBociA9IGdfcGQzZERldmljZS0+Q3JlYXRlUmVuZGVyVGFyZ2V0VmlldyhwQmFja0J1ZmZlciwgbnVsbHB0ciwgJmdfcFJlbmRlclRhcmdldFZpZXcpOwogICAgcEJhY2tCdWZmZXItPlJlbGVhc2UoKTsKICAgIGlmIChGQUlMRUQoaHIpKSByZXR1cm4gaHI7CgogICAgZ19wSW1tZWRpYXRlQ29udGV4dC0+T01TZXRSZW5kZXJUYXJnZXRzKDEsICZnX3BSZW5kZXJUYXJnZXRWaWV3LCBudWxscHRyKTsKCiAgICAvLyBTZXQgVmlld3BvcnQKICAgIEQzRDExX1ZJRVdQT1JUIHZwOwogICAgdnAuV2lkdGggPSAoRkxPQVQpODAwOwogICAgdnAuSGVpZ2h0ID0gKEZMT0FUKTYwMDsKICAgIHZwLk1pbkRlcHRoID0gMC4wZjsKICAgIHZwLk1heERlcHRoID0gMS4wZjsKICAgIHZwLlRvcExlZnRYID0gMDsKICAgIHZwLlRvcExlZnRZID0gMDsKICAgIGdfcEltbWVkaWF0ZUNvbnRleHQtPlJTU2V0Vmlld3BvcnRzKDEsICZ2cCk7CgogICAgcmV0dXJuIFNfT0s7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;d3d11.h&gt;
#include &lt;dxgi.h&gt;
#include &lt;d3dcompiler.h&gt;
#include &lt;DirectXMath.h&gt;

// Global Declarations
ID3D11Device* g_pd3dDevice = nullptr;
ID3D11DeviceContext* g_pImmediateContext = nullptr;
IDXGISwapChain* g_pSwapChain = nullptr;
ID3D11RenderTargetView* g_pRenderTargetView = nullptr;

HRESULT InitD3D(HWND hWnd) {
    HRESULT hr = S_OK;

    // Create Device and Device Context
    hr = D3D11CreateDevice(
        nullptr,
        D3D_DRIVER_TYPE_HARDWARE,
        0,
        0,
        nullptr,
        0,
        D3D11_SDK_VERSION,
        &amp;g_pd3dDevice,
        nullptr,
        &amp;g_pImmediateContext
    );
    if (FAILED(hr)) return hr;

    // Create Swap Chain
    DXGI_SWAP_CHAIN_DESC sd;
    ZeroMemory(&amp;sd, sizeof(sd));
    sd.BufferCount = 1;
    sd.BufferDesc.Width = 800;
    sd.BufferDesc.Height = 600;
    sd.BufferDesc.Format = DXGI_FORMAT_R8G8B8A8_UNORM;
    sd.BufferDesc.RefreshRate.Numerator = 60;
    sd.BufferDesc.RefreshRate.Denominator = 1;
    sd.BufferUsage = DXGI_USAGE_RENDER_TARGET_OUTPUT;
    sd.OutputWindow = hWnd;
    sd.SampleDesc.Count = 1;
    sd.SampleDesc.Quality = 0;
    sd.Windowed = TRUE;

    IDXGIDevice* pDXGIDevice = nullptr;
    g_pd3dDevice-&gt;QueryInterface(__uuidof(IDXGIDevice), (void**)&amp;pDXGIDevice);

    IDXGIAdapter* pDXGIAdapter = nullptr;
    pDXGIDevice-&gt;GetParent(__uuidof(IDXGIAdapter), (void**)&amp;pDXGIAdapter);

    IDXGIFactory* pIDXGIFactory = nullptr;
    pDXGIAdapter-&gt;GetParent(__uuidof(IDXGIFactory), (void**)&amp;pIDXGIFactory);

    hr = pIDXGIFactory-&gt;CreateSwapChain(g_pd3dDevice, &amp;sd, &amp;g_pSwapChain);
    if (FAILED(hr)) return hr;

    // Create Render Target View
    ID3D11Texture2D* pBackBuffer = nullptr;
    hr = g_pSwapChain-&gt;GetBuffer(0, __uuidof(ID3D11Texture2D), (void**)&amp;pBackBuffer);
    if (FAILED(hr)) return hr;

    hr = g_pd3dDevice-&gt;CreateRenderTargetView(pBackBuffer, nullptr, &amp;g_pRenderTargetView);
    pBackBuffer-&gt;Release();
    if (FAILED(hr)) return hr;

    g_pImmediateContext-&gt;OMSetRenderTargets(1, &amp;g_pRenderTargetView, nullptr);

    // Set Viewport
    D3D11_VIEWPORT vp;
    vp.Width = (FLOAT)800;
    vp.Height = (FLOAT)600;
    vp.MinDepth = 0.0f;
    vp.MaxDepth = 1.0f;
    vp.TopLeftX = 0;
    vp.TopLeftY = 0;
    g_pImmediateContext-&gt;RSSetViewports(1, &amp;vp);

    return S_OK;
}</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>In this section, we covered the essential steps to initialize Direct3D, including creating the Direct3D device and device context, creating the swap chain, creating the render target view, and setting the viewport. These steps form the foundation for any Direct3D application and are crucial for rendering graphics. In the next section, we will learn how to render a simple triangle using Direct3D.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='02-01-introduction-to-direct3d' title="Introduction to Direct3D">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='02-03-rendering-a-triangle' title="Rendering a Triangle">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
