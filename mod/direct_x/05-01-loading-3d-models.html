<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading 3D Models</title>

    <link rel="alternate" href="https://campusempresa.com/mod/direct_x/05-01-loading-3d-models" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/direct_x/05-01-loading-3d-models" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/direct_x/05-01-loading-3d-models" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/direct_x/05-01-loading-3d-models" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/direct_x/05-01-loading-3d-models" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-04-shadow-mapping' title="Shadow Mapping">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Loading 3D Models</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-02-animating-3d-models' title="Animating 3D Models">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to load 3D models into a DirectX application. This is a crucial step in creating complex and visually appealing graphics. We will cover the following topics:</p>
<ol>
<li><strong>Understanding 3D Models</strong></li>
<li><strong>File Formats for 3D Models</strong></li>
<li><strong>Loading Models Using Assimp</strong></li>
<li><strong>Rendering Loaded Models</strong></li>
<li><strong>Practical Exercises</strong></li>
</ol>
</div><h1><p>Understanding 3D Models</p>
</h1>
<div class='content'><p>3D models are representations of objects in a three-dimensional space. They consist of vertices, edges, and faces that define the shape and appearance of the object. Key concepts include:</p>
<ul>
<li><strong>Vertices</strong>: Points in 3D space.</li>
<li><strong>Edges</strong>: Lines connecting vertices.</li>
<li><strong>Faces</strong>: Surfaces enclosed by edges, typically triangles or quads.</li>
</ul>
</div><h1><p>File Formats for 3D Models</p>
</h1>
<div class='content'><p>There are various file formats for 3D models, each with its own advantages and use cases. Some common formats include:</p>
<table>
<thead>
<tr>
<th>Format</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>OBJ</td>
<td>Simple and widely supported, but lacks advanced features.</td>
</tr>
<tr>
<td>FBX</td>
<td>Rich in features, supports animations, widely used in game development.</td>
</tr>
<tr>
<td>COLLADA</td>
<td>XML-based, supports complex scenes and animations.</td>
</tr>
<tr>
<td>STL</td>
<td>Commonly used for 3D printing, simple and easy to parse.</td>
</tr>
</tbody>
</table>
<p>For this tutorial, we will use the Assimp (Open Asset Import Library) to load models, as it supports a wide range of formats.</p>
</div><h1><p>Loading Models Using Assimp</p>
</h1>
<div class='content'></div><h2><p>Setting Up Assimp</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Download and Install Assimp</strong>:</p>
<ul>
<li>Visit the <a href="https://github.com/assimp/assimp">Assimp GitHub page</a> and download the latest release.</li>
<li>Follow the installation instructions for your development environment.</li>
</ul>
</li>
<li>
<p><strong>Include Assimp in Your Project</strong>:</p>
<ul>
<li>Add the Assimp include directory to your project settings.</li>
<li>Link against the Assimp library.</li>
</ul>
</li>
</ol>
</div><h2><p>Loading a Model</p>
</h2>
<div class='content'><p>Here is a step-by-step guide to loading a 3D model using Assimp:</p>
<ol>
<li>
<p><strong>Include Assimp Headers</strong>:</p>
<pre><code class="language-cpp">#include &lt;assimp/Importer.hpp&gt;
#include &lt;assimp/scene.h&gt;
#include &lt;assimp/postprocess.h&gt;
</code></pre>
</li>
<li>
<p><strong>Load the Model</strong>:</p>
<pre><code class="language-cpp">Assimp::Importer importer;
const aiScene* scene = importer.ReadFile(&quot;path/to/your/model.obj&quot;, 
    aiProcess_Triangulate | aiProcess_FlipUVs);

if (!scene || scene-&gt;mFlags &amp; AI_SCENE_FLAGS_INCOMPLETE || !scene-&gt;mRootNode) {
    std::cerr &lt;&lt; &quot;ERROR::ASSIMP::&quot; &lt;&lt; importer.GetErrorString() &lt;&lt; std::endl;
    return;
}
</code></pre>
</li>
<li>
<p><strong>Process the Model</strong>:</p>
<pre><code class="language-cpp">void processNode(aiNode* node, const aiScene* scene) {
    // Process all the node's meshes (if any)
    for (unsigned int i = 0; i &lt; node-&gt;mNumMeshes; i++) {
        aiMesh* mesh = scene-&gt;mMeshes[node-&gt;mMeshes[i]];
        processMesh(mesh, scene);
    }
    // Then do the same for each of its children
    for (unsigned int i = 0; i &lt; node-&gt;mNumChildren; i++) {
        processNode(node-&gt;mChildren[i], scene);
    }
}

void processMesh(aiMesh* mesh, const aiScene* scene) {
    // Extract vertex data
    std::vector&lt;Vertex&gt; vertices;
    for (unsigned int i = 0; i &lt; mesh-&gt;mNumVertices; i++) {
        Vertex vertex;
        vertex.Position = glm::vec3(mesh-&gt;mVertices[i].x, mesh-&gt;mVertices[i].y, mesh-&gt;mVertices[i].z);
        vertex.Normal = glm::vec3(mesh-&gt;mNormals[i].x, mesh-&gt;mNormals[i].y, mesh-&gt;mNormals[i].z);
        if (mesh-&gt;mTextureCoords[0]) {
            vertex.TexCoords = glm::vec2(mesh-&gt;mTextureCoords[0][i].x, mesh-&gt;mTextureCoords[0][i].y);
        } else {
            vertex.TexCoords = glm::vec2(0.0f, 0.0f);
        }
        vertices.push_back(vertex);
    }

    // Extract index data
    std::vector&lt;unsigned int&gt; indices;
    for (unsigned int i = 0; i &lt; mesh-&gt;mNumFaces; i++) {
        aiFace face = mesh-&gt;mFaces[i];
        for (unsigned int j = 0; j &lt; face.mNumIndices; j++) {
            indices.push_back(face.mIndices[j]);
        }
    }

    // Create and populate buffers with vertex data
    // (This part will depend on your specific rendering setup)
}
</code></pre>
</li>
<li>
<p><strong>Integrate with DirectX</strong>:</p>
<ul>
<li>Create DirectX buffers (vertex buffer, index buffer) using the extracted data.</li>
<li>Set up shaders to render the model.</li>
</ul>
</li>
</ol>
</div><h1><p>Rendering Loaded Models</p>
</h1>
<div class='content'><p>Once the model is loaded and processed, you can render it using DirectX. Here is a basic example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQXNzdW1pbmcgeW91IGhhdmUgYWxyZWFkeSBjcmVhdGVkIERpcmVjdFggZGV2aWNlIGFuZCBjb250ZXh0CgovLyBDcmVhdGUgdmVydGV4IGJ1ZmZlcgpEM0QxMV9CVUZGRVJfREVTQyB2ZXJ0ZXhCdWZmZXJEZXNjID0gezB9Owp2ZXJ0ZXhCdWZmZXJEZXNjLlVzYWdlID0gRDNEMTFfVVNBR0VfREVGQVVMVDsKdmVydGV4QnVmZmVyRGVzYy5CeXRlV2lkdGggPSBzaXplb2YoVmVydGV4KSAqIHZlcnRpY2VzLnNpemUoKTsKdmVydGV4QnVmZmVyRGVzYy5CaW5kRmxhZ3MgPSBEM0QxMV9CSU5EX1ZFUlRFWF9CVUZGRVI7CnZlcnRleEJ1ZmZlckRlc2MuQ1BVQWNjZXNzRmxhZ3MgPSAwOwoKRDNEMTFfU1VCUkVTT1VSQ0VfREFUQSB2ZXJ0ZXhEYXRhID0gezB9Owp2ZXJ0ZXhEYXRhLnBTeXNNZW0gPSAmdmVydGljZXNbMF07CmRldmljZS0+Q3JlYXRlQnVmZmVyKCZ2ZXJ0ZXhCdWZmZXJEZXNjLCAmdmVydGV4RGF0YSwgJnZlcnRleEJ1ZmZlcik7CgovLyBDcmVhdGUgaW5kZXggYnVmZmVyCkQzRDExX0JVRkZFUl9ERVNDIGluZGV4QnVmZmVyRGVzYyA9IHswfTsKaW5kZXhCdWZmZXJEZXNjLlVzYWdlID0gRDNEMTFfVVNBR0VfREVGQVVMVDsKaW5kZXhCdWZmZXJEZXNjLkJ5dGVXaWR0aCA9IHNpemVvZih1bnNpZ25lZCBpbnQpICogaW5kaWNlcy5zaXplKCk7CmluZGV4QnVmZmVyRGVzYy5CaW5kRmxhZ3MgPSBEM0QxMV9CSU5EX0lOREVYX0JVRkZFUjsKaW5kZXhCdWZmZXJEZXNjLkNQVUFjY2Vzc0ZsYWdzID0gMDsKCkQzRDExX1NVQlJFU09VUkNFX0RBVEEgaW5kZXhEYXRhID0gezB9OwppbmRleERhdGEucFN5c01lbSA9ICZpbmRpY2VzWzBdOwpkZXZpY2UtPkNyZWF0ZUJ1ZmZlcigmaW5kZXhCdWZmZXJEZXNjLCAmaW5kZXhEYXRhLCAmaW5kZXhCdWZmZXIpOwoKLy8gU2V0IGJ1ZmZlcnMgYW5kIGRyYXcKVUlOVCBzdHJpZGUgPSBzaXplb2YoVmVydGV4KTsKVUlOVCBvZmZzZXQgPSAwOwpjb250ZXh0LT5JQVNldFZlcnRleEJ1ZmZlcnMoMCwgMSwgJnZlcnRleEJ1ZmZlciwgJnN0cmlkZSwgJm9mZnNldCk7CmNvbnRleHQtPklBU2V0SW5kZXhCdWZmZXIoaW5kZXhCdWZmZXIsIERYR0lfRk9STUFUX1IzMl9VSU5ULCAwKTsKY29udGV4dC0+RHJhd0luZGV4ZWQoaW5kaWNlcy5zaXplKCksIDAsIDApOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Assuming you have already created DirectX device and context

// Create vertex buffer
D3D11_BUFFER_DESC vertexBufferDesc = {0};
vertexBufferDesc.Usage = D3D11_USAGE_DEFAULT;
vertexBufferDesc.ByteWidth = sizeof(Vertex) * vertices.size();
vertexBufferDesc.BindFlags = D3D11_BIND_VERTEX_BUFFER;
vertexBufferDesc.CPUAccessFlags = 0;

D3D11_SUBRESOURCE_DATA vertexData = {0};
vertexData.pSysMem = &amp;vertices[0];
device-&gt;CreateBuffer(&amp;vertexBufferDesc, &amp;vertexData, &amp;vertexBuffer);

// Create index buffer
D3D11_BUFFER_DESC indexBufferDesc = {0};
indexBufferDesc.Usage = D3D11_USAGE_DEFAULT;
indexBufferDesc.ByteWidth = sizeof(unsigned int) * indices.size();
indexBufferDesc.BindFlags = D3D11_BIND_INDEX_BUFFER;
indexBufferDesc.CPUAccessFlags = 0;

D3D11_SUBRESOURCE_DATA indexData = {0};
indexData.pSysMem = &amp;indices[0];
device-&gt;CreateBuffer(&amp;indexBufferDesc, &amp;indexData, &amp;indexBuffer);

// Set buffers and draw
UINT stride = sizeof(Vertex);
UINT offset = 0;
context-&gt;IASetVertexBuffers(0, 1, &amp;vertexBuffer, &amp;stride, &amp;offset);
context-&gt;IASetIndexBuffer(indexBuffer, DXGI_FORMAT_R32_UINT, 0);
context-&gt;DrawIndexed(indices.size(), 0, 0);</pre></div><div class='content'></div><h1><p>Practical Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Load and Render a Simple Model</p>
</h2>
<div class='content'><ol>
<li><strong>Objective</strong>: Load and render a simple 3D model (e.g., a cube) using Assimp and DirectX.</li>
<li><strong>Steps</strong>:
<ul>
<li>Download a simple 3D model in OBJ format.</li>
<li>Use Assimp to load the model.</li>
<li>Extract vertex and index data.</li>
<li>Create DirectX buffers and render the model.</li>
</ul>
</li>
</ol>
</div><h2><p>Exercise 2: Load and Render a Complex Model</p>
</h2>
<div class='content'><ol>
<li><strong>Objective</strong>: Load and render a more complex 3D model (e.g., a character model) with textures.</li>
<li><strong>Steps</strong>:
<ul>
<li>Download a complex 3D model in FBX format.</li>
<li>Use Assimp to load the model.</li>
<li>Extract vertex, index, and texture data.</li>
<li>Create DirectX buffers and render the model with textures.</li>
</ul>
</li>
</ol>
</div><h2><p>Solutions</p>
</h2>
<div class='content'><h4>Solution to Exercise 1</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gTG9hZCBhbmQgcmVuZGVyIGEgc2ltcGxlIGN1YmUgbW9kZWwKLy8gKFJlZmVyIHRvIHRoZSBjb2RlIGV4YW1wbGVzIHByb3ZpZGVkIGFib3ZlIGZvciBkZXRhaWxlZCBzdGVwcyk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Load and render a simple cube model
// (Refer to the code examples provided above for detailed steps)</pre></div><div class='content'><h4>Solution to Exercise 2</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gTG9hZCBhbmQgcmVuZGVyIGEgY29tcGxleCBjaGFyYWN0ZXIgbW9kZWwgd2l0aCB0ZXh0dXJlcwovLyAoUmVmZXIgdG8gdGhlIGNvZGUgZXhhbXBsZXMgcHJvdmlkZWQgYWJvdmUgZm9yIGRldGFpbGVkIHN0ZXBzKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Load and render a complex character model with textures
// (Refer to the code examples provided above for detailed steps)</pre></div><div class='content'></div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the basics of loading 3D models into a DirectX application using Assimp. We discussed different file formats, how to set up Assimp, and how to process and render models. By completing the practical exercises, you should now have a solid understanding of how to integrate 3D models into your DirectX projects. In the next section, we will explore animating these models to bring them to life.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-04-shadow-mapping' title="Shadow Mapping">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-02-animating-3d-models' title="Animating 3D Models">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
