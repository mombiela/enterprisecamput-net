<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integrating Physics</title>

    <link rel="alternate" href="https://campusempresa.com/mod/direct_x/08-02-integrating-physics" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/direct_x/08-02-integrating-physics" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/direct_x/08-02-integrating-physics" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/direct_x/08-02-integrating-physics" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/direct_x/08-02-integrating-physics" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='08-01-building-game-engine' title="Building a Game Engine">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Integrating Physics</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='08-03-networking-directx' title="Networking in DirectX">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this module, we will explore how to integrate physics into your DirectX applications. Physics simulation is crucial for creating realistic and interactive 3D environments, especially in game development. We will cover the basics of physics engines, how to integrate them with DirectX, and provide practical examples and exercises to solidify your understanding.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Physics Engines</strong>: Understand what a physics engine is and its role in a 3D application.</li>
<li><strong>Rigid Body Dynamics</strong>: Learn about rigid body dynamics and how they are simulated.</li>
<li><strong>Collision Detection</strong>: Explore methods for detecting collisions between objects.</li>
<li><strong>Integrating Physics with DirectX</strong>: Learn how to integrate a physics engine with DirectX.</li>
<li><strong>Practical Example</strong>: Implement a simple physics simulation in DirectX.</li>
</ol>
</div><h1><p>Physics Engines</p>
</h1>
<div class='content'><p>A physics engine is a software component that simulates physical systems. It handles the calculations required to simulate the laws of physics, such as gravity, collisions, and other forces. Popular physics engines include:</p>
<ul>
<li><strong>Bullet Physics</strong></li>
<li><strong>PhysX</strong></li>
<li><strong>Havok</strong></li>
</ul>
</div><h2><p>Comparison of Physics Engines</p>
</h2>
<div class='content'><table>
<thead>
<tr>
<th>Feature</th>
<th>Bullet Physics</th>
<th>PhysX</th>
<th>Havok</th>
</tr>
</thead>
<tbody>
<tr>
<td>Open Source</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td>Platform Support</td>
<td>Cross-platform</td>
<td>Cross-platform</td>
<td>Cross-platform</td>
</tr>
<tr>
<td>Ease of Integration</td>
<td>Moderate</td>
<td>Easy</td>
<td>Moderate</td>
</tr>
<tr>
<td>Performance</td>
<td>High</td>
<td>High</td>
<td>High</td>
</tr>
</tbody>
</table>
</div><h1><p>Rigid Body Dynamics</p>
</h1>
<div class='content'><p>Rigid body dynamics involve the simulation of solid objects that do not deform. Key concepts include:</p>
<ul>
<li><strong>Mass</strong>: The amount of matter in an object.</li>
<li><strong>Inertia</strong>: The resistance of an object to changes in its state of motion.</li>
<li><strong>Forces</strong>: External influences that cause an object to accelerate.</li>
</ul>
</div><h2><p>Example: Rigid Body Dynamics</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RydWN0IFJpZ2lkQm9keSB7CiAgICBmbG9hdCBtYXNzOwogICAgRGlyZWN0WDo6WE1GTE9BVDMgcG9zaXRpb247CiAgICBEaXJlY3RYOjpYTUZMT0FUMyB2ZWxvY2l0eTsKICAgIERpcmVjdFg6OlhNRkxPQVQzIGFjY2VsZXJhdGlvbjsKfTsKCnZvaWQgQXBwbHlGb3JjZShSaWdpZEJvZHkmIGJvZHksIGNvbnN0IERpcmVjdFg6OlhNRkxPQVQzJiBmb3JjZSkgewogICAgYm9keS5hY2NlbGVyYXRpb24ueCArPSBmb3JjZS54IC8gYm9keS5tYXNzOwogICAgYm9keS5hY2NlbGVyYXRpb24ueSArPSBmb3JjZS55IC8gYm9keS5tYXNzOwogICAgYm9keS5hY2NlbGVyYXRpb24ueiArPSBmb3JjZS56IC8gYm9keS5tYXNzOwp9Cgp2b2lkIFVwZGF0ZVJpZ2lkQm9keShSaWdpZEJvZHkmIGJvZHksIGZsb2F0IGRlbHRhVGltZSkgewogICAgYm9keS52ZWxvY2l0eS54ICs9IGJvZHkuYWNjZWxlcmF0aW9uLnggKiBkZWx0YVRpbWU7CiAgICBib2R5LnZlbG9jaXR5LnkgKz0gYm9keS5hY2NlbGVyYXRpb24ueSAqIGRlbHRhVGltZTsKICAgIGJvZHkudmVsb2NpdHkueiArPSBib2R5LmFjY2VsZXJhdGlvbi56ICogZGVsdGFUaW1lOwoKICAgIGJvZHkucG9zaXRpb24ueCArPSBib2R5LnZlbG9jaXR5LnggKiBkZWx0YVRpbWU7CiAgICBib2R5LnBvc2l0aW9uLnkgKz0gYm9keS52ZWxvY2l0eS55ICogZGVsdGFUaW1lOwogICAgYm9keS5wb3NpdGlvbi56ICs9IGJvZHkudmVsb2NpdHkueiAqIGRlbHRhVGltZTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>struct RigidBody {
    float mass;
    DirectX::XMFLOAT3 position;
    DirectX::XMFLOAT3 velocity;
    DirectX::XMFLOAT3 acceleration;
};

void ApplyForce(RigidBody&amp; body, const DirectX::XMFLOAT3&amp; force) {
    body.acceleration.x += force.x / body.mass;
    body.acceleration.y += force.y / body.mass;
    body.acceleration.z += force.z / body.mass;
}

void UpdateRigidBody(RigidBody&amp; body, float deltaTime) {
    body.velocity.x += body.acceleration.x * deltaTime;
    body.velocity.y += body.acceleration.y * deltaTime;
    body.velocity.z += body.acceleration.z * deltaTime;

    body.position.x += body.velocity.x * deltaTime;
    body.position.y += body.velocity.y * deltaTime;
    body.position.z += body.velocity.z * deltaTime;
}</pre></div><div class='content'></div><h1><p>Collision Detection</p>
</h1>
<div class='content'><p>Collision detection is the process of determining if two or more objects intersect. Common techniques include:</p>
<ul>
<li><strong>Bounding Volume Hierarchies (BVH)</strong></li>
<li><strong>Axis-Aligned Bounding Boxes (AABB)</strong></li>
<li><strong>Oriented Bounding Boxes (OBB)</strong></li>
<li><strong>Sphere Collisions</strong></li>
</ul>
</div><h2><p>Example: AABB Collision Detection</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RydWN0IEFBQkIgewogICAgRGlyZWN0WDo6WE1GTE9BVDMgbWluOwogICAgRGlyZWN0WDo6WE1GTE9BVDMgbWF4Owp9OwoKYm9vbCBDaGVja0NvbGxpc2lvbihjb25zdCBBQUJCJiBib3gxLCBjb25zdCBBQUJCJiBib3gyKSB7CiAgICByZXR1cm4gKGJveDEubWluLnggPD0gYm94Mi5tYXgueCAmJiBib3gxLm1heC54ID49IGJveDIubWluLngpICYmCiAgICAgICAgICAgKGJveDEubWluLnkgPD0gYm94Mi5tYXgueSAmJiBib3gxLm1heC55ID49IGJveDIubWluLnkpICYmCiAgICAgICAgICAgKGJveDEubWluLnogPD0gYm94Mi5tYXgueiAmJiBib3gxLm1heC56ID49IGJveDIubWluLnopOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>struct AABB {
    DirectX::XMFLOAT3 min;
    DirectX::XMFLOAT3 max;
};

bool CheckCollision(const AABB&amp; box1, const AABB&amp; box2) {
    return (box1.min.x &lt;= box2.max.x &amp;&amp; box1.max.x &gt;= box2.min.x) &amp;&amp;
           (box1.min.y &lt;= box2.max.y &amp;&amp; box1.max.y &gt;= box2.min.y) &amp;&amp;
           (box1.min.z &lt;= box2.max.z &amp;&amp; box1.max.z &gt;= box2.min.z);
}</pre></div><div class='content'></div><h1><p>Integrating Physics with DirectX</p>
</h1>
<div class='content'><p>To integrate a physics engine with DirectX, follow these steps:</p>
<ol>
<li><strong>Initialize the Physics Engine</strong>: Set up the physics engine and create the necessary objects.</li>
<li><strong>Update Physics</strong>: Update the physics simulation each frame.</li>
<li><strong>Render Physics Objects</strong>: Use DirectX to render the objects based on their updated positions.</li>
</ol>
</div><h2><p>Example: Integrating Bullet Physics with DirectX</p>
</h2>
<div class='content'><ol>
<li><strong>Initialize Bullet Physics</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YnRCcm9hZHBoYXNlSW50ZXJmYWNlKiBicm9hZHBoYXNlID0gbmV3IGJ0RGJ2dEJyb2FkcGhhc2UoKTsKYnREZWZhdWx0Q29sbGlzaW9uQ29uZmlndXJhdGlvbiogY29sbGlzaW9uQ29uZmlndXJhdGlvbiA9IG5ldyBidERlZmF1bHRDb2xsaXNpb25Db25maWd1cmF0aW9uKCk7CmJ0Q29sbGlzaW9uRGlzcGF0Y2hlciogZGlzcGF0Y2hlciA9IG5ldyBidENvbGxpc2lvbkRpc3BhdGNoZXIoY29sbGlzaW9uQ29uZmlndXJhdGlvbik7CmJ0U2VxdWVudGlhbEltcHVsc2VDb25zdHJhaW50U29sdmVyKiBzb2x2ZXIgPSBuZXcgYnRTZXF1ZW50aWFsSW1wdWxzZUNvbnN0cmFpbnRTb2x2ZXIoKTsKYnREaXNjcmV0ZUR5bmFtaWNzV29ybGQqIGR5bmFtaWNzV29ybGQgPSBuZXcgYnREaXNjcmV0ZUR5bmFtaWNzV29ybGQoZGlzcGF0Y2hlciwgYnJvYWRwaGFzZSwgc29sdmVyLCBjb2xsaXNpb25Db25maWd1cmF0aW9uKTsKZHluYW1pY3NXb3JsZC0+c2V0R3Jhdml0eShidFZlY3RvcjMoMCwgLTkuODFmLCAwKSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>btBroadphaseInterface* broadphase = new btDbvtBroadphase();
btDefaultCollisionConfiguration* collisionConfiguration = new btDefaultCollisionConfiguration();
btCollisionDispatcher* dispatcher = new btCollisionDispatcher(collisionConfiguration);
btSequentialImpulseConstraintSolver* solver = new btSequentialImpulseConstraintSolver();
btDiscreteDynamicsWorld* dynamicsWorld = new btDiscreteDynamicsWorld(dispatcher, broadphase, solver, collisionConfiguration);
dynamicsWorld-&gt;setGravity(btVector3(0, -9.81f, 0));</pre></div><div class='content'><ol start="2">
<li><strong>Create Rigid Bodies</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YnRDb2xsaXNpb25TaGFwZSogZ3JvdW5kU2hhcGUgPSBuZXcgYnRTdGF0aWNQbGFuZVNoYXBlKGJ0VmVjdG9yMygwLCAxLCAwKSwgMSk7CmJ0Q29sbGlzaW9uU2hhcGUqIGZhbGxTaGFwZSA9IG5ldyBidFNwaGVyZVNoYXBlKDEpOwoKYnREZWZhdWx0TW90aW9uU3RhdGUqIGdyb3VuZE1vdGlvblN0YXRlID0gbmV3IGJ0RGVmYXVsdE1vdGlvblN0YXRlKGJ0VHJhbnNmb3JtKGJ0UXVhdGVybmlvbigwLCAwLCAwLCAxKSwgYnRWZWN0b3IzKDAsIC0xLCAwKSkpOwpidFJpZ2lkQm9keTo6YnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvIGdyb3VuZFJpZ2lkQm9keUNJKDAsIGdyb3VuZE1vdGlvblN0YXRlLCBncm91bmRTaGFwZSwgYnRWZWN0b3IzKDAsIDAsIDApKTsKYnRSaWdpZEJvZHkqIGdyb3VuZFJpZ2lkQm9keSA9IG5ldyBidFJpZ2lkQm9keShncm91bmRSaWdpZEJvZHlDSSk7CmR5bmFtaWNzV29ybGQtPmFkZFJpZ2lkQm9keShncm91bmRSaWdpZEJvZHkpOwoKYnREZWZhdWx0TW90aW9uU3RhdGUqIGZhbGxNb3Rpb25TdGF0ZSA9IG5ldyBidERlZmF1bHRNb3Rpb25TdGF0ZShidFRyYW5zZm9ybShidFF1YXRlcm5pb24oMCwgMCwgMCwgMSksIGJ0VmVjdG9yMygwLCA1MCwgMCkpKTsKYnRTY2FsYXIgbWFzcyA9IDE7CmJ0VmVjdG9yMyBmYWxsSW5lcnRpYSgwLCAwLCAwKTsKZmFsbFNoYXBlLT5jYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgZmFsbEluZXJ0aWEpOwpidFJpZ2lkQm9keTo6YnRSaWdpZEJvZHlDb25zdHJ1Y3Rpb25JbmZvIGZhbGxSaWdpZEJvZHlDSShtYXNzLCBmYWxsTW90aW9uU3RhdGUsIGZhbGxTaGFwZSwgZmFsbEluZXJ0aWEpOwpidFJpZ2lkQm9keSogZmFsbFJpZ2lkQm9keSA9IG5ldyBidFJpZ2lkQm9keShmYWxsUmlnaWRCb2R5Q0kpOwpkeW5hbWljc1dvcmxkLT5hZGRSaWdpZEJvZHkoZmFsbFJpZ2lkQm9keSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>btCollisionShape* groundShape = new btStaticPlaneShape(btVector3(0, 1, 0), 1);
btCollisionShape* fallShape = new btSphereShape(1);

btDefaultMotionState* groundMotionState = new btDefaultMotionState(btTransform(btQuaternion(0, 0, 0, 1), btVector3(0, -1, 0)));
btRigidBody::btRigidBodyConstructionInfo groundRigidBodyCI(0, groundMotionState, groundShape, btVector3(0, 0, 0));
btRigidBody* groundRigidBody = new btRigidBody(groundRigidBodyCI);
dynamicsWorld-&gt;addRigidBody(groundRigidBody);

btDefaultMotionState* fallMotionState = new btDefaultMotionState(btTransform(btQuaternion(0, 0, 0, 1), btVector3(0, 50, 0)));
btScalar mass = 1;
btVector3 fallInertia(0, 0, 0);
fallShape-&gt;calculateLocalInertia(mass, fallInertia);
btRigidBody::btRigidBodyConstructionInfo fallRigidBodyCI(mass, fallMotionState, fallShape, fallInertia);
btRigidBody* fallRigidBody = new btRigidBody(fallRigidBodyCI);
dynamicsWorld-&gt;addRigidBody(fallRigidBody);</pre></div><div class='content'><ol start="3">
<li><strong>Update Physics and Render</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCBVcGRhdGVQaHlzaWNzKGZsb2F0IGRlbHRhVGltZSkgewogICAgZHluYW1pY3NXb3JsZC0+c3RlcFNpbXVsYXRpb24oZGVsdGFUaW1lLCAxMCk7CgogICAgYnRUcmFuc2Zvcm0gdHJhbnM7CiAgICBmYWxsUmlnaWRCb2R5LT5nZXRNb3Rpb25TdGF0ZSgpLT5nZXRXb3JsZFRyYW5zZm9ybSh0cmFucyk7CiAgICBEaXJlY3RYOjpYTUZMT0FUMyBwb3NpdGlvbih0cmFucy5nZXRPcmlnaW4oKS5nZXRYKCksIHRyYW5zLmdldE9yaWdpbigpLmdldFkoKSwgdHJhbnMuZ2V0T3JpZ2luKCkuZ2V0WigpKTsKCiAgICAvLyBVc2UgRGlyZWN0WCB0byByZW5kZXIgdGhlIG9iamVjdCBhdCB0aGUgbmV3IHBvc2l0aW9uCiAgICBSZW5kZXJPYmplY3QocG9zaXRpb24pOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void UpdatePhysics(float deltaTime) {
    dynamicsWorld-&gt;stepSimulation(deltaTime, 10);

    btTransform trans;
    fallRigidBody-&gt;getMotionState()-&gt;getWorldTransform(trans);
    DirectX::XMFLOAT3 position(trans.getOrigin().getX(), trans.getOrigin().getY(), trans.getOrigin().getZ());

    // Use DirectX to render the object at the new position
    RenderObject(position);
}</pre></div><div class='content'></div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise: Implement a Simple Physics Simulation</p>
</h2>
<div class='content'><ol>
<li><strong>Set up Bullet Physics in your DirectX project</strong>.</li>
<li><strong>Create a ground plane and a falling sphere</strong>.</li>
<li><strong>Update the physics simulation each frame</strong>.</li>
<li><strong>Render the sphere at its updated position</strong>.</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'><p>Follow the steps provided in the example above to set up Bullet Physics, create the ground plane and sphere, update the physics simulation, and render the objects.</p>
</div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ul>
<li><strong>Incorrect Initialization</strong>: Ensure all physics engine components are correctly initialized.</li>
<li><strong>Frame Rate Independence</strong>: Use a consistent time step for physics updates to avoid simulation instability.</li>
<li><strong>Collision Shapes</strong>: Choose appropriate collision shapes for your objects to improve performance and accuracy.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this module, we covered the basics of integrating physics into DirectX applications. We explored physics engines, rigid body dynamics, collision detection, and provided a practical example using Bullet Physics. By completing the exercises, you should now have a solid understanding of how to add realistic physics simulations to your DirectX projects. In the next module, we will delve into more advanced topics to further enhance your DirectX applications.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='08-01-building-game-engine' title="Building a Game Engine">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='08-03-networking-directx' title="Networking in DirectX">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
