<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lighting and Shading in DirectX</title>

    <link rel="alternate" href="https://campusempresa.com/mod/direct_x/lighting-and-shading" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/direct_x/lighting-and-shading" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/direct_x/lighting-and-shading" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/direct_x/lighting-and-shading" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/direct_x/lighting-and-shading" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='textures-and-materials'>&#x25C4;Textures and Materials</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Lighting and Shading in DirectX</a>
	</div>
	<div class='col-4 text-end'>
					<a href='camera-and-view-transformations'>Camera and View Transformations &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Lighting and shading are crucial concepts in computer graphics, as they significantly enhance the realism and visual appeal of 3D scenes. This topic will guide you through the basics of lighting and shading in DirectX, progressing to more advanced techniques.</p>
</div><h1>Introduction to Lighting</h1>
<div class='content'><p>Lighting in DirectX involves simulating how light interacts with objects in a 3D scene. There are several types of lights you can use:</p>
<ul>
<li><strong>Ambient Light</strong>: Provides a base level of light to all objects in the scene, ensuring no part is completely dark.</li>
<li><strong>Directional Light</strong>: Simulates light coming from a specific direction, like sunlight.</li>
<li><strong>Point Light</strong>: Emits light in all directions from a single point, similar to a light bulb.</li>
<li><strong>Spotlight</strong>: Emits light in a cone shape, like a flashlight.</li>
</ul>
</div><h2>Ambient Light</h2>
<div class='content'><p>Ambient light is the simplest form of lighting. It affects all objects uniformly, providing a base level of illumination.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmxvYXQ0IEFtYmllbnRMaWdodGluZyhmbG9hdDQgY29sb3IsIGZsb2F0MyBhbWJpZW50Q29sb3IsIGZsb2F0IGFtYmllbnRJbnRlbnNpdHkpIHsKICAgIHJldHVybiBjb2xvciAqIGFtYmllbnRDb2xvciAqIGFtYmllbnRJbnRlbnNpdHk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>float4 AmbientLighting(float4 color, float3 ambientColor, float ambientIntensity) {
    return color * ambientColor * ambientIntensity;
}</pre></div><div class='content'></div><h2>Directional Light</h2>
<div class='content'><p>Directional lights simulate light from a distant source, such as the sun. They have a direction but no position.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RydWN0IERpcmVjdGlvbmFsTGlnaHQgewogICAgZmxvYXQzIGRpcmVjdGlvbjsKICAgIGZsb2F0MyBjb2xvcjsKfTsKCmZsb2F0NCBEaXJlY3Rpb25hbExpZ2h0aW5nKGZsb2F0NCBjb2xvciwgZmxvYXQzIG5vcm1hbCwgRGlyZWN0aW9uYWxMaWdodCBsaWdodCkgewogICAgZmxvYXQgTmRvdEwgPSBtYXgoZG90KG5vcm1hbCwgLWxpZ2h0LmRpcmVjdGlvbiksIDAuMCk7CiAgICByZXR1cm4gY29sb3IgKiBsaWdodC5jb2xvciAqIE5kb3RMOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>struct DirectionalLight {
    float3 direction;
    float3 color;
};

float4 DirectionalLighting(float4 color, float3 normal, DirectionalLight light) {
    float NdotL = max(dot(normal, -light.direction), 0.0);
    return color * light.color * NdotL;
}</pre></div><div class='content'></div><h2>Point Light</h2>
<div class='content'><p>Point lights emit light in all directions from a single point. They have a position and a range.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RydWN0IFBvaW50TGlnaHQgewogICAgZmxvYXQzIHBvc2l0aW9uOwogICAgZmxvYXQzIGNvbG9yOwogICAgZmxvYXQgcmFuZ2U7Cn07CgpmbG9hdDQgUG9pbnRMaWdodGluZyhmbG9hdDQgY29sb3IsIGZsb2F0MyBwb3NpdGlvbiwgZmxvYXQzIG5vcm1hbCwgUG9pbnRMaWdodCBsaWdodCkgewogICAgZmxvYXQzIGxpZ2h0RGlyID0gbGlnaHQucG9zaXRpb24gLSBwb3NpdGlvbjsKICAgIGZsb2F0IGRpc3RhbmNlID0gbGVuZ3RoKGxpZ2h0RGlyKTsKICAgIGxpZ2h0RGlyID0gbm9ybWFsaXplKGxpZ2h0RGlyKTsKICAgIGZsb2F0IGF0dGVudWF0aW9uID0gc2F0dXJhdGUoMS4wIC0gZGlzdGFuY2UgLyBsaWdodC5yYW5nZSk7CiAgICBmbG9hdCBOZG90TCA9IG1heChkb3Qobm9ybWFsLCBsaWdodERpciksIDAuMCk7CiAgICByZXR1cm4gY29sb3IgKiBsaWdodC5jb2xvciAqIE5kb3RMICogYXR0ZW51YXRpb247Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>struct PointLight {
    float3 position;
    float3 color;
    float range;
};

float4 PointLighting(float4 color, float3 position, float3 normal, PointLight light) {
    float3 lightDir = light.position - position;
    float distance = length(lightDir);
    lightDir = normalize(lightDir);
    float attenuation = saturate(1.0 - distance / light.range);
    float NdotL = max(dot(normal, lightDir), 0.0);
    return color * light.color * NdotL * attenuation;
}</pre></div><div class='content'></div><h2>Spotlight</h2>
<div class='content'><p>Spotlights are similar to point lights but emit light in a cone shape.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RydWN0IFNwb3RsaWdodCB7CiAgICBmbG9hdDMgcG9zaXRpb247CiAgICBmbG9hdDMgZGlyZWN0aW9uOwogICAgZmxvYXQzIGNvbG9yOwogICAgZmxvYXQgcmFuZ2U7CiAgICBmbG9hdCBzcG90QW5nbGU7Cn07CgpmbG9hdDQgU3BvdGxpZ2h0TGlnaHRpbmcoZmxvYXQ0IGNvbG9yLCBmbG9hdDMgcG9zaXRpb24sIGZsb2F0MyBub3JtYWwsIFNwb3RsaWdodCBsaWdodCkgewogICAgZmxvYXQzIGxpZ2h0RGlyID0gbGlnaHQucG9zaXRpb24gLSBwb3NpdGlvbjsKICAgIGZsb2F0IGRpc3RhbmNlID0gbGVuZ3RoKGxpZ2h0RGlyKTsKICAgIGxpZ2h0RGlyID0gbm9ybWFsaXplKGxpZ2h0RGlyKTsKICAgIGZsb2F0IGF0dGVudWF0aW9uID0gc2F0dXJhdGUoMS4wIC0gZGlzdGFuY2UgLyBsaWdodC5yYW5nZSk7CiAgICBmbG9hdCBOZG90TCA9IG1heChkb3Qobm9ybWFsLCBsaWdodERpciksIDAuMCk7CiAgICAKICAgIGZsb2F0IHNwb3RFZmZlY3QgPSBkb3QobGlnaHREaXIsIC1saWdodC5kaXJlY3Rpb24pOwogICAgaWYgKHNwb3RFZmZlY3QgPiBjb3MobGlnaHQuc3BvdEFuZ2xlKSkgewogICAgICAgIHNwb3RFZmZlY3QgPSBwb3coc3BvdEVmZmVjdCwgNC4wKTsKICAgICAgICByZXR1cm4gY29sb3IgKiBsaWdodC5jb2xvciAqIE5kb3RMICogYXR0ZW51YXRpb24gKiBzcG90RWZmZWN0OwogICAgfQogICAgcmV0dXJuIGZsb2F0NCgwLCAwLCAwLCAwKTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>struct Spotlight {
    float3 position;
    float3 direction;
    float3 color;
    float range;
    float spotAngle;
};

float4 SpotlightLighting(float4 color, float3 position, float3 normal, Spotlight light) {
    float3 lightDir = light.position - position;
    float distance = length(lightDir);
    lightDir = normalize(lightDir);
    float attenuation = saturate(1.0 - distance / light.range);
    float NdotL = max(dot(normal, lightDir), 0.0);
    
    float spotEffect = dot(lightDir, -light.direction);
    if (spotEffect &gt; cos(light.spotAngle)) {
        spotEffect = pow(spotEffect, 4.0);
        return color * light.color * NdotL * attenuation * spotEffect;
    }
    return float4(0, 0, 0, 0);
}</pre></div><div class='content'></div><h1>Introduction to Shading</h1>
<div class='content'><p>Shading determines how the surface of an object interacts with light. The most common shading models are:</p>
<ul>
<li><strong>Flat Shading</strong>: Each polygon is shaded with a single color.</li>
<li><strong>Gouraud Shading</strong>: Colors are interpolated across the vertices of polygons.</li>
<li><strong>Phong Shading</strong>: Colors are interpolated across the surface of polygons, providing smoother transitions.</li>
</ul>
</div><h2>Flat Shading</h2>
<div class='content'><p>Flat shading applies a single color to each polygon, based on the polygon's normal.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmxvYXQ0IEZsYXRTaGFkaW5nKGZsb2F0NCBjb2xvciwgZmxvYXQzIG5vcm1hbCwgRGlyZWN0aW9uYWxMaWdodCBsaWdodCkgewogICAgZmxvYXQgTmRvdEwgPSBtYXgoZG90KG5vcm1hbCwgLWxpZ2h0LmRpcmVjdGlvbiksIDAuMCk7CiAgICByZXR1cm4gY29sb3IgKiBsaWdodC5jb2xvciAqIE5kb3RMOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>float4 FlatShading(float4 color, float3 normal, DirectionalLight light) {
    float NdotL = max(dot(normal, -light.direction), 0.0);
    return color * light.color * NdotL;
}</pre></div><div class='content'></div><h2>Gouraud Shading</h2>
<div class='content'><p>Gouraud shading interpolates vertex colors across the surface of the polygon.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RydWN0IFZlcnRleCB7CiAgICBmbG9hdDMgcG9zaXRpb247CiAgICBmbG9hdDMgbm9ybWFsOwogICAgZmxvYXQ0IGNvbG9yOwp9OwoKZmxvYXQ0IEdvdXJhdWRTaGFkaW5nKFZlcnRleCB2MCwgVmVydGV4IHYxLCBWZXJ0ZXggdjIsIERpcmVjdGlvbmFsTGlnaHQgbGlnaHQpIHsKICAgIGZsb2F0NCBjb2xvcjAgPSBEaXJlY3Rpb25hbExpZ2h0aW5nKHYwLmNvbG9yLCB2MC5ub3JtYWwsIGxpZ2h0KTsKICAgIGZsb2F0NCBjb2xvcjEgPSBEaXJlY3Rpb25hbExpZ2h0aW5nKHYxLmNvbG9yLCB2MS5ub3JtYWwsIGxpZ2h0KTsKICAgIGZsb2F0NCBjb2xvcjIgPSBEaXJlY3Rpb25hbExpZ2h0aW5nKHYyLmNvbG9yLCB2Mi5ub3JtYWwsIGxpZ2h0KTsKICAgIC8vIEludGVycG9sYXRlIGNvbG9ycyBhY3Jvc3MgdGhlIHRyaWFuZ2xlCiAgICByZXR1cm4gKGNvbG9yMCArIGNvbG9yMSArIGNvbG9yMikgLyAzLjA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>struct Vertex {
    float3 position;
    float3 normal;
    float4 color;
};

float4 GouraudShading(Vertex v0, Vertex v1, Vertex v2, DirectionalLight light) {
    float4 color0 = DirectionalLighting(v0.color, v0.normal, light);
    float4 color1 = DirectionalLighting(v1.color, v1.normal, light);
    float4 color2 = DirectionalLighting(v2.color, v2.normal, light);
    // Interpolate colors across the triangle
    return (color0 + color1 + color2) / 3.0;
}</pre></div><div class='content'></div><h2>Phong Shading</h2>
<div class='content'><p>Phong shading interpolates normals across the surface and computes the color per pixel.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmxvYXQ0IFBob25nU2hhZGluZyhmbG9hdDMgcG9zaXRpb24sIGZsb2F0MyBub3JtYWwsIERpcmVjdGlvbmFsTGlnaHQgbGlnaHQpIHsKICAgIGZsb2F0MyBpbnRlcnBvbGF0ZWROb3JtYWwgPSBub3JtYWxpemUobm9ybWFsKTsKICAgIHJldHVybiBEaXJlY3Rpb25hbExpZ2h0aW5nKGZsb2F0NCgxLCAxLCAxLCAxKSwgaW50ZXJwb2xhdGVkTm9ybWFsLCBsaWdodCk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>float4 PhongShading(float3 position, float3 normal, DirectionalLight light) {
    float3 interpolatedNormal = normalize(normal);
    return DirectionalLighting(float4(1, 1, 1, 1), interpolatedNormal, light);
}</pre></div><div class='content'></div><h1>Advanced Lighting Techniques</h1>
<div class='content'><p>Advanced lighting techniques include:</p>
<ul>
<li><strong>Normal Mapping</strong>: Adds detail to surfaces without increasing polygon count.</li>
<li><strong>Specular Highlights</strong>: Simulates shiny surfaces by adding bright spots where light reflects directly.</li>
<li><strong>Shadow Mapping</strong>: Creates realistic shadows by determining which parts of the scene are occluded from the light source.</li>
</ul>
</div><h2>Normal Mapping</h2>
<div class='content'><p>Normal mapping uses a texture to perturb the surface normals, adding detail.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmxvYXQzIFBlcnR1cmJOb3JtYWwoZmxvYXQzIG5vcm1hbCwgZmxvYXQzIHRhbmdlbnQsIGZsb2F0MyBiaXRhbmdlbnQsIGZsb2F0MyBub3JtYWxNYXApIHsKICAgIGZsb2F0M3gzIFRCTiA9IGZsb2F0M3gzKHRhbmdlbnQsIGJpdGFuZ2VudCwgbm9ybWFsKTsKICAgIHJldHVybiBub3JtYWxpemUobXVsKG5vcm1hbE1hcCwgVEJOKSk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>float3 PerturbNormal(float3 normal, float3 tangent, float3 bitangent, float3 normalMap) {
    float3x3 TBN = float3x3(tangent, bitangent, normal);
    return normalize(mul(normalMap, TBN));
}</pre></div><div class='content'></div><h2>Specular Highlights</h2>
<div class='content'><p>Specular highlights simulate shiny surfaces.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmxvYXQ0IFNwZWN1bGFyTGlnaHRpbmcoZmxvYXQ0IGNvbG9yLCBmbG9hdDMgcG9zaXRpb24sIGZsb2F0MyBub3JtYWwsIGZsb2F0MyB2aWV3RGlyLCBEaXJlY3Rpb25hbExpZ2h0IGxpZ2h0LCBmbG9hdCBzaGluaW5lc3MpIHsKICAgIGZsb2F0MyBsaWdodERpciA9IG5vcm1hbGl6ZSgtbGlnaHQuZGlyZWN0aW9uKTsKICAgIGZsb2F0MyByZWZsZWN0RGlyID0gcmVmbGVjdCgtbGlnaHREaXIsIG5vcm1hbCk7CiAgICBmbG9hdCBzcGVjID0gcG93KG1heChkb3Qodmlld0RpciwgcmVmbGVjdERpciksIDAuMCksIHNoaW5pbmVzcyk7CiAgICByZXR1cm4gY29sb3IgKyBsaWdodC5jb2xvciAqIHNwZWM7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>float4 SpecularLighting(float4 color, float3 position, float3 normal, float3 viewDir, DirectionalLight light, float shininess) {
    float3 lightDir = normalize(-light.direction);
    float3 reflectDir = reflect(-lightDir, normal);
    float spec = pow(max(dot(viewDir, reflectDir), 0.0), shininess);
    return color + light.color * spec;
}</pre></div><div class='content'></div><h2>Shadow Mapping</h2>
<div class='content'><p>Shadow mapping involves rendering the scene from the light's perspective to determine which areas are in shadow.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmxvYXQgU2hhZG93Q2FsY3VsYXRpb24oZmxvYXQ0IGZyYWdQb3NMaWdodFNwYWNlLCBzYW1wbGVyMkQgc2hhZG93TWFwKSB7CiAgICBmbG9hdCBzaGFkb3cgPSAwLjA7CiAgICBmbG9hdCBjdXJyZW50RGVwdGggPSBmcmFnUG9zTGlnaHRTcGFjZS56IC8gZnJhZ1Bvc0xpZ2h0U3BhY2UudzsKICAgIGZsb2F0IGNsb3Nlc3REZXB0aCA9IHRleDJEKHNoYWRvd01hcCwgZnJhZ1Bvc0xpZ2h0U3BhY2UueHkpLnI7CiAgICBpZiAoY3VycmVudERlcHRoID4gY2xvc2VzdERlcHRoKSB7CiAgICAgICAgc2hhZG93ID0gMS4wOwogICAgfQogICAgcmV0dXJuIHNoYWRvdzsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>float ShadowCalculation(float4 fragPosLightSpace, sampler2D shadowMap) {
    float shadow = 0.0;
    float currentDepth = fragPosLightSpace.z / fragPosLightSpace.w;
    float closestDepth = tex2D(shadowMap, fragPosLightSpace.xy).r;
    if (currentDepth &gt; closestDepth) {
        shadow = 1.0;
    }
    return shadow;
}</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Lighting and shading are essential for creating realistic and visually appealing 3D scenes in DirectX. By understanding and implementing various lighting types and shading models, you can significantly enhance the quality of your graphics. As you progress to more advanced techniques like normal mapping, specular highlights, and shadow mapping, you'll be able to create even more detailed and dynamic scenes. Keep experimenting and refining your skills to master the art of lighting and shading in DirectX.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='textures-and-materials'>&#x25C4;Textures and Materials</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Lighting and Shading in DirectX</a>
	</div>
	<div class='col-4 text-end'>
					<a href='camera-and-view-transformations'>Camera and View Transformations &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
