<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Structure and Security Rules</title>

    <link rel="alternate" href="https://campusempresa.com/mod/firebase/03-03-data-structure-and-security-rules" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/firebase/03-03-data-structure-and-security-rules" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/firebase/03-03-data-structure-and-security-rules" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/firebase/03-03-data-structure-and-security-rules" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/firebase/03-03-data-structure-and-security-rules" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='03-02-reading-and-writing-data' title="Reading and Writing Data">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Data Structure and Security Rules</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='03-04-offline-capabilities' title="Offline Capabilities">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will delve into the data structure of Firebase Realtime Database and the security rules that help protect your data. Understanding these concepts is crucial for building efficient, secure, and scalable applications.</p>
</div><h1>Data Structure</h1>
<div class='content'></div><h2>1. JSON Data Model</h2>
<div class='content'><p>Firebase Realtime Database stores data as JSON (JavaScript Object Notation) objects. This allows for a flexible, hierarchical data structure.</p>
<h4>Example:</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJ1c2VycyI6IHsKICAgICJ1c2VyMSI6IHsKICAgICAgIm5hbWUiOiAiSm9obiBEb2UiLAogICAgICAiZW1haWwiOiAiam9obi5kb2VAZXhhbXBsZS5jb20iCiAgICB9LAogICAgInVzZXIyIjogewogICAgICAibmFtZSI6ICJKYW5lIFNtaXRoIiwKICAgICAgImVtYWlsIjogImphbmUuc21pdGhAZXhhbXBsZS5jb20iCiAgICB9CiAgfSwKICAicG9zdHMiOiB7CiAgICAicG9zdDEiOiB7CiAgICAgICJ0aXRsZSI6ICJGaXJzdCBQb3N0IiwKICAgICAgImNvbnRlbnQiOiAiVGhpcyBpcyBteSBmaXJzdCBwb3N0ISIsCiAgICAgICJhdXRob3IiOiAidXNlcjEiCiAgICB9LAogICAgInBvc3QyIjogewogICAgICAidGl0bGUiOiAiU2Vjb25kIFBvc3QiLAogICAgICAiY29udGVudCI6ICJUaGlzIGlzIG15IHNlY29uZCBwb3N0ISIsCiAgICAgICJhdXRob3IiOiAidXNlcjIiCiAgICB9CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;users&quot;: {
    &quot;user1&quot;: {
      &quot;name&quot;: &quot;John Doe&quot;,
      &quot;email&quot;: &quot;john.doe@example.com&quot;
    },
    &quot;user2&quot;: {
      &quot;name&quot;: &quot;Jane Smith&quot;,
      &quot;email&quot;: &quot;jane.smith@example.com&quot;
    }
  },
  &quot;posts&quot;: {
    &quot;post1&quot;: {
      &quot;title&quot;: &quot;First Post&quot;,
      &quot;content&quot;: &quot;This is my first post!&quot;,
      &quot;author&quot;: &quot;user1&quot;
    },
    &quot;post2&quot;: {
      &quot;title&quot;: &quot;Second Post&quot;,
      &quot;content&quot;: &quot;This is my second post!&quot;,
      &quot;author&quot;: &quot;user2&quot;
    }
  }
}</pre></div><div class='content'></div><h2>2. Structuring Data</h2>
<div class='content'><p>When structuring your data, consider the following best practices:</p>
<ul>
<li><strong>Denormalization</strong>: Unlike traditional SQL databases, Firebase encourages denormalization to reduce the number of reads.</li>
<li><strong>Flattening Data</strong>: Avoid deeply nested structures to improve performance and ease of access.</li>
</ul>
<h4>Example:</h4>
<p>Instead of:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJ1c2VycyI6IHsKICAgICJ1c2VyMSI6IHsKICAgICAgInBvc3RzIjogewogICAgICAgICJwb3N0MSI6IHsKICAgICAgICAgICJ0aXRsZSI6ICJGaXJzdCBQb3N0IiwKICAgICAgICAgICJjb250ZW50IjogIlRoaXMgaXMgbXkgZmlyc3QgcG9zdCEiCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;users&quot;: {
    &quot;user1&quot;: {
      &quot;posts&quot;: {
        &quot;post1&quot;: {
          &quot;title&quot;: &quot;First Post&quot;,
          &quot;content&quot;: &quot;This is my first post!&quot;
        }
      }
    }
  }
}</pre></div><div class='content'><p>Use:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJ1c2VycyI6IHsKICAgICJ1c2VyMSI6IHsKICAgICAgIm5hbWUiOiAiSm9obiBEb2UiLAogICAgICAiZW1haWwiOiAiam9obi5kb2VAZXhhbXBsZS5jb20iCiAgICB9CiAgfSwKICAicG9zdHMiOiB7CiAgICAicG9zdDEiOiB7CiAgICAgICJ0aXRsZSI6ICJGaXJzdCBQb3N0IiwKICAgICAgImNvbnRlbnQiOiAiVGhpcyBpcyBteSBmaXJzdCBwb3N0ISIsCiAgICAgICJhdXRob3IiOiAidXNlcjEiCiAgICB9CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;users&quot;: {
    &quot;user1&quot;: {
      &quot;name&quot;: &quot;John Doe&quot;,
      &quot;email&quot;: &quot;john.doe@example.com&quot;
    }
  },
  &quot;posts&quot;: {
    &quot;post1&quot;: {
      &quot;title&quot;: &quot;First Post&quot;,
      &quot;content&quot;: &quot;This is my first post!&quot;,
      &quot;author&quot;: &quot;user1&quot;
    }
  }
}</pre></div><div class='content'></div><h2>3. Indexing Data</h2>
<div class='content'><p>Indexing helps in optimizing queries. Firebase allows you to create indexes to speed up data retrieval.</p>
<h4>Example:</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJydWxlcyI6IHsKICAgICJwb3N0cyI6IHsKICAgICAgIi5pbmRleE9uIjogWyJhdXRob3IiXQogICAgfQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;rules&quot;: {
    &quot;posts&quot;: {
      &quot;.indexOn&quot;: [&quot;author&quot;]
    }
  }
}</pre></div><div class='content'></div><h1>Security Rules</h1>
<div class='content'></div><h2>1. Introduction to Security Rules</h2>
<div class='content'><p>Firebase Security Rules control access to your database. They are written in a JSON-like syntax and are evaluated every time data is read or written.</p>
</div><h2>2. Basic Structure</h2>
<div class='content'><p>Security rules are defined in the <code>rules</code> section of your Firebase Realtime Database.</p>
<h4>Example:</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJydWxlcyI6IHsKICAgICIucmVhZCI6ICJhdXRoICE9IG51bGwiLAogICAgIi53cml0ZSI6ICJhdXRoICE9IG51bGwiCiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;rules&quot;: {
    &quot;.read&quot;: &quot;auth != null&quot;,
    &quot;.write&quot;: &quot;auth != null&quot;
  }
}</pre></div><div class='content'><p>This rule allows only authenticated users to read and write data.</p>
</div><h2>3. Granular Rules</h2>
<div class='content'><p>You can define more granular rules to control access to specific parts of your database.</p>
<h4>Example:</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJydWxlcyI6IHsKICAgICJ1c2VycyI6IHsKICAgICAgIiR1c2VyX2lkIjogewogICAgICAgICIucmVhZCI6ICIkdXNlcl9pZCA9PT0gYXV0aC51aWQiLAogICAgICAgICIud3JpdGUiOiAiJHVzZXJfaWQgPT09IGF1dGgudWlkIgogICAgICB9CiAgICB9LAogICAgInBvc3RzIjogewogICAgICAiLnJlYWQiOiAiYXV0aCAhPSBudWxsIiwKICAgICAgIi53cml0ZSI6ICJhdXRoICE9IG51bGwiCiAgICB9CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;rules&quot;: {
    &quot;users&quot;: {
      &quot;$user_id&quot;: {
        &quot;.read&quot;: &quot;$user_id === auth.uid&quot;,
        &quot;.write&quot;: &quot;$user_id === auth.uid&quot;
      }
    },
    &quot;posts&quot;: {
      &quot;.read&quot;: &quot;auth != null&quot;,
      &quot;.write&quot;: &quot;auth != null&quot;
    }
  }
}</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>Users can only read and write their own data.</li>
<li>Any authenticated user can read and write posts.</li>
</ul>
</div><h2>4. Validation Rules</h2>
<div class='content'><p>Validation rules ensure that the data being written meets certain criteria.</p>
<h4>Example:</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJydWxlcyI6IHsKICAgICJwb3N0cyI6IHsKICAgICAgIiRwb3N0X2lkIjogewogICAgICAgICIud3JpdGUiOiAibmV3RGF0YS5jaGlsZCgndGl0bGUnKS5pc1N0cmluZygpICYmIG5ld0RhdGEuY2hpbGQoJ2NvbnRlbnQnKS5pc1N0cmluZygpIgogICAgICB9CiAgICB9CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;rules&quot;: {
    &quot;posts&quot;: {
      &quot;$post_id&quot;: {
        &quot;.write&quot;: &quot;newData.child('title').isString() &amp;&amp; newData.child('content').isString()&quot;
      }
    }
  }
}</pre></div><div class='content'><p>This rule ensures that the <code>title</code> and <code>content</code> fields are strings.</p>
</div><h2>5. Common Mistakes and Tips</h2>
<div class='content'><ul>
<li><strong>Overly Permissive Rules</strong>: Avoid using overly permissive rules like <code>&quot;.read&quot;: &quot;true&quot;</code> and <code>&quot;.write&quot;: &quot;true&quot;</code>.</li>
<li><strong>Testing Rules</strong>: Use the Firebase Console to test your security rules and ensure they work as expected.</li>
<li><strong>Keep Rules Simple</strong>: Complex rules can be hard to manage and debug. Keep them as simple as possible.</li>
</ul>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise 1: Structuring Data</h2>
<div class='content'><p>Given the following requirements, structure the data in Firebase Realtime Database:</p>
<ul>
<li>Users have a name and email.</li>
<li>Posts have a title, content, and author (user ID).</li>
</ul>
<h4>Solution:</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJ1c2VycyI6IHsKICAgICJ1c2VyMSI6IHsKICAgICAgIm5hbWUiOiAiSm9obiBEb2UiLAogICAgICAiZW1haWwiOiAiam9obi5kb2VAZXhhbXBsZS5jb20iCiAgICB9LAogICAgInVzZXIyIjogewogICAgICAibmFtZSI6ICJKYW5lIFNtaXRoIiwKICAgICAgImVtYWlsIjogImphbmUuc21pdGhAZXhhbXBsZS5jb20iCiAgICB9CiAgfSwKICAicG9zdHMiOiB7CiAgICAicG9zdDEiOiB7CiAgICAgICJ0aXRsZSI6ICJGaXJzdCBQb3N0IiwKICAgICAgImNvbnRlbnQiOiAiVGhpcyBpcyBteSBmaXJzdCBwb3N0ISIsCiAgICAgICJhdXRob3IiOiAidXNlcjEiCiAgICB9LAogICAgInBvc3QyIjogewogICAgICAidGl0bGUiOiAiU2Vjb25kIFBvc3QiLAogICAgICAiY29udGVudCI6ICJUaGlzIGlzIG15IHNlY29uZCBwb3N0ISIsCiAgICAgICJhdXRob3IiOiAidXNlcjIiCiAgICB9CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;users&quot;: {
    &quot;user1&quot;: {
      &quot;name&quot;: &quot;John Doe&quot;,
      &quot;email&quot;: &quot;john.doe@example.com&quot;
    },
    &quot;user2&quot;: {
      &quot;name&quot;: &quot;Jane Smith&quot;,
      &quot;email&quot;: &quot;jane.smith@example.com&quot;
    }
  },
  &quot;posts&quot;: {
    &quot;post1&quot;: {
      &quot;title&quot;: &quot;First Post&quot;,
      &quot;content&quot;: &quot;This is my first post!&quot;,
      &quot;author&quot;: &quot;user1&quot;
    },
    &quot;post2&quot;: {
      &quot;title&quot;: &quot;Second Post&quot;,
      &quot;content&quot;: &quot;This is my second post!&quot;,
      &quot;author&quot;: &quot;user2&quot;
    }
  }
}</pre></div><div class='content'></div><h2>Exercise 2: Writing Security Rules</h2>
<div class='content'><p>Write security rules to ensure:</p>
<ul>
<li>Only authenticated users can read and write data.</li>
<li>Users can only read and write their own data.</li>
</ul>
<h4>Solution:</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJydWxlcyI6IHsKICAgICIucmVhZCI6ICJhdXRoICE9IG51bGwiLAogICAgIi53cml0ZSI6ICJhdXRoICE9IG51bGwiLAogICAgInVzZXJzIjogewogICAgICAiJHVzZXJfaWQiOiB7CiAgICAgICAgIi5yZWFkIjogIiR1c2VyX2lkID09PSBhdXRoLnVpZCIsCiAgICAgICAgIi53cml0ZSI6ICIkdXNlcl9pZCA9PT0gYXV0aC51aWQiCiAgICAgIH0KICAgIH0KICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;rules&quot;: {
    &quot;.read&quot;: &quot;auth != null&quot;,
    &quot;.write&quot;: &quot;auth != null&quot;,
    &quot;users&quot;: {
      &quot;$user_id&quot;: {
        &quot;.read&quot;: &quot;$user_id === auth.uid&quot;,
        &quot;.write&quot;: &quot;$user_id === auth.uid&quot;
      }
    }
  }
}</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered the basics of structuring data in Firebase Realtime Database and writing security rules to protect your data. Understanding these concepts is essential for building secure and efficient applications. In the next module, we will explore the offline capabilities of Firebase Realtime Database.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='03-02-reading-and-writing-data' title="Reading and Writing Data">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='03-04-offline-capabilities' title="Offline Capabilities">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
