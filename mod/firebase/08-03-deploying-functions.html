<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deploying Functions</title>

    <link rel="alternate" href="https://campusempresa.com/mod/firebase/08-03-deploying-functions" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/firebase/08-03-deploying-functions" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/firebase/08-03-deploying-functions" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/firebase/08-03-deploying-functions" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/firebase/08-03-deploying-functions" class="px-2">CA</a>
					</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-02-writing-functions' title="Writing Functions">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Deploying Functions</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-04-triggering-functions' title="Triggering Functions">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will cover how to deploy Firebase Functions to the cloud. Firebase Functions allow you to run backend code in response to events triggered by Firebase features and HTTPS requests. Deploying these functions is a crucial step to make them live and accessible.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Firebase CLI</strong>: The command-line interface used to manage and deploy Firebase projects.</li>
<li><strong>Function Deployment</strong>: The process of uploading your function code to Firebase's servers.</li>
<li><strong>Environment Configuration</strong>: Setting up environment variables and configurations for your functions.</li>
<li><strong>Versioning and Rollbacks</strong>: Managing different versions of your functions and rolling back if necessary.</li>
</ol>
</div><h1><p>Prerequisites</p>
</h1>
<div class='content'><p>Before deploying functions, ensure you have:</p>
<ul>
<li>A Firebase project set up.</li>
<li>Firebase CLI installed and configured.</li>
<li>Functions written and tested locally.</li>
</ul>
</div><h1><p>Step-by-Step Guide to Deploying Functions</p>
</h1>
<div class='content'></div><h2><ol>
<li>Initialize Firebase in Your Project</li>
</ol>
</h2>
<div class='content'><p>If you haven't already initialized Firebase in your project, you can do so by running:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmlyZWJhc2UgaW5pdCBmdW5jdGlvbnM="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>firebase init functions</pre></div><div class='content'><p>This command will prompt you to select your Firebase project and set up the necessary files for Firebase Functions.</p>
</div><h2><ol start="2">
<li>Write Your Functions</li>
</ol>
</h2>
<div class='content'><p>Ensure your functions are written and tested. Here is a simple example of an HTTP function:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZnVuY3Rpb25zID0gcmVxdWlyZSgnZmlyZWJhc2UtZnVuY3Rpb25zJyk7CgpleHBvcnRzLmhlbGxvV29ybGQgPSBmdW5jdGlvbnMuaHR0cHMub25SZXF1ZXN0KChyZXF1ZXN0LCByZXNwb25zZSkgPT4gewogIHJlc3BvbnNlLnNlbmQoIkhlbGxvIGZyb20gRmlyZWJhc2UhIik7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const functions = require('firebase-functions');

exports.helloWorld = functions.https.onRequest((request, response) =&gt; {
  response.send(&quot;Hello from Firebase!&quot;);
});</pre></div><div class='content'></div><h2><ol start="3">
<li>Deploy Your Functions</li>
</ol>
</h2>
<div class='content'><p>To deploy your functions, use the following command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmlyZWJhc2UgZGVwbG95IC0tb25seSBmdW5jdGlvbnM="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>firebase deploy --only functions</pre></div><div class='content'><p>This command will deploy all functions defined in your <code>index.js</code> file. If you want to deploy a specific function, you can specify its name:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmlyZWJhc2UgZGVwbG95IC0tb25seSBmdW5jdGlvbnM6aGVsbG9Xb3JsZA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>firebase deploy --only functions:helloWorld</pre></div><div class='content'></div><h2><ol start="4">
<li>Verify Deployment</li>
</ol>
</h2>
<div class='content'><p>After deployment, you can verify that your functions are live by visiting the Firebase Console under the Functions section. You can also test your HTTP functions by accessing their URLs.</p>
</div><h2><ol start="5">
<li>Environment Configuration</li>
</ol>
</h2>
<div class='content'><p>You can set environment variables for your functions using the Firebase CLI:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmlyZWJhc2UgZnVuY3Rpb25zOmNvbmZpZzpzZXQgc29tZXNlcnZpY2Uua2V5PSJUSEUgQVBJIEtFWSIgc29tZXNlcnZpY2UuaWQ9IlRIRSBDTElFTlQgSUQi"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>firebase functions:config:set someservice.key=&quot;THE API KEY&quot; someservice.id=&quot;THE CLIENT ID&quot;</pre></div><div class='content'><p>Access these variables in your functions like this:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZnVuY3Rpb25zID0gcmVxdWlyZSgnZmlyZWJhc2UtZnVuY3Rpb25zJyk7CmNvbnN0IGFwaUtleSA9IGZ1bmN0aW9ucy5jb25maWcoKS5zb21lc2VydmljZS5rZXk7CmNvbnN0IGNsaWVudElkID0gZnVuY3Rpb25zLmNvbmZpZygpLnNvbWVzZXJ2aWNlLmlkOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const functions = require('firebase-functions');
const apiKey = functions.config().someservice.key;
const clientId = functions.config().someservice.id;</pre></div><div class='content'></div><h2><ol start="6">
<li>Versioning and Rollbacks</li>
</ol>
</h2>
<div class='content'><p>Firebase keeps track of different versions of your functions. If you need to roll back to a previous version, you can do so from the Firebase Console. Navigate to the Functions section, select the function, and choose the version you want to roll back to.</p>
</div><h1><p>Practical Example</p>
</h1>
<div class='content'><p>Let's deploy a more complex function that interacts with Firestore:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZnVuY3Rpb25zID0gcmVxdWlyZSgnZmlyZWJhc2UtZnVuY3Rpb25zJyk7CmNvbnN0IGFkbWluID0gcmVxdWlyZSgnZmlyZWJhc2UtYWRtaW4nKTsKYWRtaW4uaW5pdGlhbGl6ZUFwcCgpOwoKZXhwb3J0cy5hZGRNZXNzYWdlID0gZnVuY3Rpb25zLmh0dHBzLm9uUmVxdWVzdChhc3luYyAocmVxLCByZXMpID0+IHsKICBjb25zdCBvcmlnaW5hbCA9IHJlcS5xdWVyeS50ZXh0OwogIGNvbnN0IHdyaXRlUmVzdWx0ID0gYXdhaXQgYWRtaW4uZmlyZXN0b3JlKCkuY29sbGVjdGlvbignbWVzc2FnZXMnKS5hZGQoe29yaWdpbmFsOiBvcmlnaW5hbH0pOwogIHJlcy5qc29uKHtyZXN1bHQ6IGBNZXNzYWdlIHdpdGggSUQ6ICR7d3JpdGVSZXN1bHQuaWR9IGFkZGVkLmB9KTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const functions = require('firebase-functions');
const admin = require('firebase-admin');
admin.initializeApp();

exports.addMessage = functions.https.onRequest(async (req, res) =&gt; {
  const original = req.query.text;
  const writeResult = await admin.firestore().collection('messages').add({original: original});
  res.json({result: `Message with ID: ${writeResult.id} added.`});
});</pre></div><div class='content'></div><h2><p>Steps to Deploy</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Initialize Firebase Functions</strong>:</p>
<pre><code class="language-bash">firebase init functions
</code></pre>
</li>
<li>
<p><strong>Write the Function</strong>: Add the above code to your <code>index.js</code> file.</p>
</li>
<li>
<p><strong>Deploy the Function</strong>:</p>
<pre><code class="language-bash">firebase deploy --only functions:addMessage
</code></pre>
</li>
<li>
<p><strong>Test the Function</strong>: Access the function URL and pass a query parameter:</p>
<pre><code>https://&lt;your-region&gt;-&lt;your-project-id&gt;.cloudfunctions.net/addMessage?text=HelloWorld
</code></pre>
</li>
</ol>
</div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ul>
<li><strong>Syntax Errors</strong>: Ensure your code is free of syntax errors before deploying.</li>
<li><strong>Environment Variables</strong>: Always set and access environment variables securely.</li>
<li><strong>Testing Locally</strong>: Test your functions locally using <code>firebase serve</code> before deploying.</li>
<li><strong>Deployment Limits</strong>: Be aware of Firebase's deployment limits and quotas.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>Deploying Firebase Functions is a straightforward process that involves writing your functions, using the Firebase CLI to deploy them, and managing them through the Firebase Console. By following the steps outlined in this section, you can ensure your functions are live and functioning correctly. In the next section, we will cover how to trigger these functions using various Firebase services.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-02-writing-functions' title="Writing Functions">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-04-triggering-functions' title="Triggering Functions">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
