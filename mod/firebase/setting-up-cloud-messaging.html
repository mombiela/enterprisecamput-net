<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setting Up Cloud Messaging</title>

    <link rel="alternate" href="https://campusempresa.com/mod/firebase/setting-up-cloud-messaging" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/firebase/setting-up-cloud-messaging" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/firebase/setting-up-cloud-messaging" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/firebase/setting-up-cloud-messaging" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/firebase/setting-up-cloud-messaging" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='introduction-to-cloud-messaging'>&#x25C4;Introduction to Cloud Messaging</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Setting Up Cloud Messaging</a>
	</div>
	<div class='col-4 text-end'>
					<a href='sending-notifications'>Sending Notifications &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Firebase Cloud Messaging (FCM) is a cross-platform messaging solution that lets you reliably send messages at no cost. This topic will guide you through setting up FCM from a beginner to an advanced level.</p>
</div><h1>Introduction to Firebase Cloud Messaging</h1>
<div class='content'><ul>
<li><strong>What is FCM?</strong>
<ul>
<li>A service for sending notifications and messages to users across platforms.</li>
<li>Supports both direct messages and topic-based messages.</li>
</ul>
</li>
<li><strong>Why use FCM?</strong>
<ul>
<li>Free and scalable.</li>
<li>Easy integration with Firebase services.</li>
<li>Supports various message types (notification, data, etc.).</li>
</ul>
</li>
</ul>
</div><h1>Prerequisites</h1>
<div class='content'><ul>
<li>Basic understanding of Firebase.</li>
<li>Firebase project set up in the Firebase Console.</li>
<li>Basic knowledge of Android/iOS development.</li>
</ul>
</div><h1>Setting Up FCM for Android</h1>
<div class='content'></div><h2>Step 1: Add Firebase to Your Android Project</h2>
<div class='content'><ol>
<li><strong>Create a Firebase project</strong> in the Firebase Console.</li>
<li><strong>Register your app</strong> with Firebase:
<ul>
<li>Add your Android app's package name.</li>
<li>Download the <code>google-services.json</code> file.</li>
</ul>
</li>
<li><strong>Add the <code>google-services.json</code> file</strong> to your project:
<ul>
<li>Place it in the <code>app</code> directory.</li>
</ul>
</li>
</ol>
</div><h2>Step 2: Add Firebase SDK to Your Project</h2>
<div class='content'><ol>
<li>Open your <code>build.gradle</code> file (project-level) and add the following:
<pre><code class="language-gradle">buildscript {
    dependencies {
        // Add this line
        classpath 'com.google.gms:google-services:4.3.10'
    }
}
</code></pre>
</li>
<li>Open your <code>build.gradle</code> file (app-level) and add the following:
<pre><code class="language-gradle">dependencies {
    // Add the Firebase SDK for FCM
    implementation 'com.google.firebase:firebase-messaging:23.0.0'
}

// Add this line at the bottom of the file
apply plugin: 'com.google.gms.google-services'
</code></pre>
</li>
</ol>
</div><h2>Step 3: Configure FCM in Your App</h2>
<div class='content'><ol>
<li><strong>Initialize Firebase</strong> in your <code>MainActivity.java</code>:
<pre><code class="language-java">import com.google.firebase.messaging.FirebaseMessaging;

public class MainActivity extends AppCompatActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Initialize Firebase
        FirebaseMessaging.getInstance().subscribeToTopic(&quot;news&quot;)
            .addOnCompleteListener(task -&gt; {
                String msg = &quot;Subscribed to news topic&quot;;
                if (!task.isSuccessful()) {
                    msg = &quot;Subscription failed&quot;;
                }
                Log.d(&quot;FCM&quot;, msg);
            });
    }
}
</code></pre>
</li>
</ol>
</div><h1>Setting Up FCM for iOS</h1>
<div class='content'></div><h2>Step 1: Add Firebase to Your iOS Project</h2>
<div class='content'><ol>
<li><strong>Create a Firebase project</strong> in the Firebase Console.</li>
<li><strong>Register your app</strong> with Firebase:
<ul>
<li>Add your iOS app's bundle ID.</li>
<li>Download the <code>GoogleService-Info.plist</code> file.</li>
</ul>
</li>
<li><strong>Add the <code>GoogleService-Info.plist</code> file</strong> to your project:
<ul>
<li>Drag and drop it into your Xcode project.</li>
</ul>
</li>
</ol>
</div><h2>Step 2: Add Firebase SDK to Your Project</h2>
<div class='content'><ol>
<li>Open your <code>Podfile</code> and add the following:
<pre><code class="language-ruby">pod 'Firebase/Messaging'
</code></pre>
</li>
<li>Run <code>pod install</code> to install the Firebase SDK.</li>
</ol>
</div><h2>Step 3: Configure FCM in Your App</h2>
<div class='content'><ol>
<li><strong>Initialize Firebase</strong> in your <code>AppDelegate.swift</code>:
<pre><code class="language-swift">import Firebase

@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate {

    var window: UIWindow?

    func application(_ application: UIApplication,
                     didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool {
        // Initialize Firebase
        FirebaseApp.configure()

        // Subscribe to a topic
        Messaging.messaging().subscribe(toTopic: &quot;news&quot;) { error in
            print(&quot;Subscribed to news topic&quot;)
        }

        return true
    }
}
</code></pre>
</li>
</ol>
</div><h1>Sending Messages with FCM</h1>
<div class='content'></div><h2>Sending a Notification Message</h2>
<div class='content'><ul>
<li><strong>Via Firebase Console</strong>:
<ul>
<li>Navigate to the Firebase Console.</li>
<li>Select your project and go to the Cloud Messaging section.</li>
<li>Click on &quot;Send your first message&quot;.</li>
<li>Fill in the message details and target (e.g., topic &quot;news&quot;).</li>
<li>Click &quot;Send&quot;.</li>
</ul>
</li>
</ul>
</div><h2>Sending a Data Message</h2>
<div class='content'><ul>
<li><strong>Via Firebase Admin SDK</strong>:
<pre><code class="language-javascript">const admin = require('firebase-admin');
admin.initializeApp();

const message = {
  data: {
    score: '850',
    time: '2:45'
  },
  topic: 'news'
};

admin.messaging().send(message)
  .then((response) =&gt; {
    console.log('Successfully sent message:', response);
  })
  .catch((error) =&gt; {
    console.log('Error sending message:', error);
  });
</code></pre>
</li>
</ul>
</div><h1>Advanced Topics</h1>
<div class='content'></div><h2>Handling Message Payloads</h2>
<div class='content'><ul>
<li><strong>Notification Messages</strong>: Automatically displayed by the system.</li>
<li><strong>Data Messages</strong>: Handled by the app in the background or foreground.</li>
</ul>
</div><h2>Customizing Notifications</h2>
<div class='content'><ul>
<li><strong>Custom Sound</strong>: Specify a custom sound file in the notification payload.</li>
<li><strong>Custom Actions</strong>: Add action buttons to notifications.</li>
</ul>
</div><h2>Error Handling</h2>
<div class='content'><ul>
<li><strong>Common Errors</strong>:
<ul>
<li>Invalid registration token.</li>
<li>Message rate exceeded.</li>
</ul>
</li>
<li><strong>Debugging Tips</strong>:
<ul>
<li>Check the Firebase Console logs.</li>
<li>Use the Firebase DebugView.</li>
</ul>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Setting up Firebase Cloud Messaging involves integrating the Firebase SDK into your Android or iOS project, configuring your app to receive messages, and sending messages via the Firebase Console or Admin SDK. With FCM, you can send both notification and data messages, customize notifications, and handle errors effectively. This setup provides a robust foundation for implementing real-time messaging in your applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='introduction-to-cloud-messaging'>&#x25C4;Introduction to Cloud Messaging</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Setting Up Cloud Messaging</a>
	</div>
	<div class='col-4 text-end'>
					<a href='sending-notifications'>Sending Notifications &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
