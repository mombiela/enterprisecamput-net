<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Messaging Features</title>

    <link rel="alternate" href="https://campusempresa.com/mod/firebase/advanced-messaging-features" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/firebase/advanced-messaging-features" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/firebase/advanced-messaging-features" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/firebase/advanced-messaging-features" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/firebase/advanced-messaging-features" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='handling-notifications'>&#x25C4;Handling Notifications</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Advanced Messaging Features</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-performance-monitoring'>Introduction to Performance Monitoring &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Firebase Cloud Messaging (FCM) is a powerful tool for sending notifications and messages to users across different platforms. In this section, we will explore advanced features of FCM that allow for more sophisticated messaging strategies.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Topics Messaging</strong>: Allows you to send messages to multiple devices that have opted into a particular topic.</li>
<li><strong>Device Group Messaging</strong>: Enables sending messages to a group of devices that belong to a single user.</li>
<li><strong>Message Priorities</strong>: Control the delivery speed and conditions of messages.</li>
<li><strong>Message Scheduling</strong>: Schedule messages to be sent at a specific time.</li>
<li><strong>Message Filtering</strong>: Filter messages based on user properties or conditions.</li>
</ul>
</div><h1>Topics Messaging</h1>
<div class='content'><p>Topics messaging allows you to send a message to multiple devices that have subscribed to a particular topic. This is useful for broadcasting messages to a large audience.</p>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gU3Vic2NyaWJlIHRvIGEgdG9waWMKZmlyZWJhc2UubWVzc2FnaW5nKCkuc3Vic2NyaWJlVG9Ub3BpYyh0b2tlbiwgIm5ld3MiKTsKCi8vIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSB0b3BpYwpjb25zdCBtZXNzYWdlID0gewogIG5vdGlmaWNhdGlvbjogewogICAgdGl0bGU6ICJCcmVha2luZyBOZXdzIiwKICAgIGJvZHk6ICJOZXcgYXJ0aWNsZSBhdmFpbGFibGUhIgogIH0sCiAgdG9waWM6ICJuZXdzIgp9OwoKYWRtaW4ubWVzc2FnaW5nKCkuc2VuZChtZXNzYWdlKQogIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgY29uc29sZS5sb2coIlN1Y2Nlc3NmdWxseSBzZW50IG1lc3NhZ2U6IiwgcmVzcG9uc2UpOwogIH0pCiAgLmNhdGNoKChlcnJvcikgPT4gewogICAgY29uc29sZS5sb2coIkVycm9yIHNlbmRpbmcgbWVzc2FnZToiLCBlcnJvcik7CiAgfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Subscribe to a topic
firebase.messaging().subscribeToTopic(token, &quot;news&quot;);

// Send a message to the topic
const message = {
  notification: {
    title: &quot;Breaking News&quot;,
    body: &quot;New article available!&quot;
  },
  topic: &quot;news&quot;
};

admin.messaging().send(message)
  .then((response) =&gt; {
    console.log(&quot;Successfully sent message:&quot;, response);
  })
  .catch((error) =&gt; {
    console.log(&quot;Error sending message:&quot;, error);
  });</pre></div><div class='content'><p>In this example, devices subscribe to the &quot;news&quot; topic and receive notifications when a new message is sent to that topic.</p>
</div><h1>Device Group Messaging</h1>
<div class='content'><p>Device group messaging allows you to send a message to multiple devices that belong to a single user. This is useful for targeting all devices of a particular user.</p>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ3JlYXRlIGEgbm90aWZpY2F0aW9uIGtleSBmb3IgYSBkZXZpY2UgZ3JvdXAKY29uc3Qgbm90aWZpY2F0aW9uS2V5ID0gInlvdXItbm90aWZpY2F0aW9uLWtleSI7CmNvbnN0IHJlZ2lzdHJhdGlvblRva2VucyA9IFsidG9rZW4xIiwgInRva2VuMiIsICJ0b2tlbjMiXTsKCmNvbnN0IG1lc3NhZ2UgPSB7CiAgbm90aWZpY2F0aW9uOiB7CiAgICB0aXRsZTogIkhlbGxvIFVzZXIiLAogICAgYm9keTogIlRoaXMgaXMgYSBtZXNzYWdlIHRvIGFsbCB5b3VyIGRldmljZXMuIgogIH0sCiAgbm90aWZpY2F0aW9uX2tleTogbm90aWZpY2F0aW9uS2V5Cn07CgphZG1pbi5tZXNzYWdpbmcoKS5zZW5kVG9EZXZpY2VHcm91cChub3RpZmljYXRpb25LZXksIG1lc3NhZ2UpCiAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICBjb25zb2xlLmxvZygiU3VjY2Vzc2Z1bGx5IHNlbnQgbWVzc2FnZToiLCByZXNwb25zZSk7CiAgfSkKICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICBjb25zb2xlLmxvZygiRXJyb3Igc2VuZGluZyBtZXNzYWdlOiIsIGVycm9yKTsKICB9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Create a notification key for a device group
const notificationKey = &quot;your-notification-key&quot;;
const registrationTokens = [&quot;token1&quot;, &quot;token2&quot;, &quot;token3&quot;];

const message = {
  notification: {
    title: &quot;Hello User&quot;,
    body: &quot;This is a message to all your devices.&quot;
  },
  notification_key: notificationKey
};

admin.messaging().sendToDeviceGroup(notificationKey, message)
  .then((response) =&gt; {
    console.log(&quot;Successfully sent message:&quot;, response);
  })
  .catch((error) =&gt; {
    console.log(&quot;Error sending message:&quot;, error);
  });</pre></div><div class='content'><p>In this example, a message is sent to all devices associated with a particular notification key.</p>
</div><h1>Message Priorities</h1>
<div class='content'><p>FCM allows you to set the priority of messages to control their delivery speed and conditions.</p>
</div><h2>Priority Levels</h2>
<div class='content'><ul>
<li><strong>High Priority</strong>: Messages are delivered immediately and wake the device if necessary.</li>
<li><strong>Normal Priority</strong>: Messages are delivered when the device is active.</li>
</ul>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbWVzc2FnZSA9IHsKICBub3RpZmljYXRpb246IHsKICAgIHRpdGxlOiAiVXJnZW50IFVwZGF0ZSIsCiAgICBib2R5OiAiUGxlYXNlIGNoZWNrIHRoZSBhcHAgZm9yIGltcG9ydGFudCBpbmZvcm1hdGlvbi4iCiAgfSwKICBhbmRyb2lkOiB7CiAgICBwcmlvcml0eTogImhpZ2giCiAgfSwKICB0b2tlbjogInVzZXItZGV2aWNlLXRva2VuIgp9OwoKYWRtaW4ubWVzc2FnaW5nKCkuc2VuZChtZXNzYWdlKQogIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgY29uc29sZS5sb2coIlN1Y2Nlc3NmdWxseSBzZW50IGhpZ2ggcHJpb3JpdHkgbWVzc2FnZToiLCByZXNwb25zZSk7CiAgfSkKICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICBjb25zb2xlLmxvZygiRXJyb3Igc2VuZGluZyBtZXNzYWdlOiIsIGVycm9yKTsKICB9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const message = {
  notification: {
    title: &quot;Urgent Update&quot;,
    body: &quot;Please check the app for important information.&quot;
  },
  android: {
    priority: &quot;high&quot;
  },
  token: &quot;user-device-token&quot;
};

admin.messaging().send(message)
  .then((response) =&gt; {
    console.log(&quot;Successfully sent high priority message:&quot;, response);
  })
  .catch((error) =&gt; {
    console.log(&quot;Error sending message:&quot;, error);
  });</pre></div><div class='content'><p>In this example, a high-priority message is sent to a specific device.</p>
</div><h1>Message Scheduling</h1>
<div class='content'><p>You can schedule messages to be sent at a specific time using the <code>sendAt</code> parameter.</p>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbWVzc2FnZSA9IHsKICBub3RpZmljYXRpb246IHsKICAgIHRpdGxlOiAiU2NoZWR1bGVkIE1lc3NhZ2UiLAogICAgYm9keTogIlRoaXMgbWVzc2FnZSB3YXMgc2NoZWR1bGVkLiIKICB9LAogIGFuZHJvaWQ6IHsKICAgIHR0bDogMzYwMCAqIDEwMDAgIC8vIDEgaG91ciBpbiBtaWxsaXNlY29uZHMKICB9LAogIHRva2VuOiAidXNlci1kZXZpY2UtdG9rZW4iCn07Cgpjb25zdCBzZW5kVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgMzYwMCAqIDEwMDA7IC8vIDEgaG91ciBmcm9tIG5vdwoKYWRtaW4ubWVzc2FnaW5nKCkuc2VuZChtZXNzYWdlLCB7IHNlbmRBdDogc2VuZFRpbWUgfSkKICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgIGNvbnNvbGUubG9nKCJTdWNjZXNzZnVsbHkgc2NoZWR1bGVkIG1lc3NhZ2U6IiwgcmVzcG9uc2UpOwogIH0pCiAgLmNhdGNoKChlcnJvcikgPT4gewogICAgY29uc29sZS5sb2coIkVycm9yIHNjaGVkdWxpbmcgbWVzc2FnZToiLCBlcnJvcik7CiAgfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const message = {
  notification: {
    title: &quot;Scheduled Message&quot;,
    body: &quot;This message was scheduled.&quot;
  },
  android: {
    ttl: 3600 * 1000  // 1 hour in milliseconds
  },
  token: &quot;user-device-token&quot;
};

const sendTime = new Date().getTime() + 3600 * 1000; // 1 hour from now

admin.messaging().send(message, { sendAt: sendTime })
  .then((response) =&gt; {
    console.log(&quot;Successfully scheduled message:&quot;, response);
  })
  .catch((error) =&gt; {
    console.log(&quot;Error scheduling message:&quot;, error);
  });</pre></div><div class='content'><p>In this example, a message is scheduled to be sent 1 hour from the current time.</p>
</div><h1>Message Filtering</h1>
<div class='content'><p>Message filtering allows you to send messages based on user properties or conditions.</p>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbWVzc2FnZSA9IHsKICBub3RpZmljYXRpb246IHsKICAgIHRpdGxlOiAiRmlsdGVyZWQgTWVzc2FnZSIsCiAgICBib2R5OiAiVGhpcyBtZXNzYWdlIGlzIGZvciBwcmVtaXVtIHVzZXJzIG9ubHkuIgogIH0sCiAgY29uZGl0aW9uOiAiJ3ByZW1pdW1Vc2VyJyBpbiB0b3BpY3MiCn07CgphZG1pbi5tZXNzYWdpbmcoKS5zZW5kKG1lc3NhZ2UpCiAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICBjb25zb2xlLmxvZygiU3VjY2Vzc2Z1bGx5IHNlbnQgZmlsdGVyZWQgbWVzc2FnZToiLCByZXNwb25zZSk7CiAgfSkKICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICBjb25zb2xlLmxvZygiRXJyb3Igc2VuZGluZyBtZXNzYWdlOiIsIGVycm9yKTsKICB9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const message = {
  notification: {
    title: &quot;Filtered Message&quot;,
    body: &quot;This message is for premium users only.&quot;
  },
  condition: &quot;'premiumUser' in topics&quot;
};

admin.messaging().send(message)
  .then((response) =&gt; {
    console.log(&quot;Successfully sent filtered message:&quot;, response);
  })
  .catch((error) =&gt; {
    console.log(&quot;Error sending message:&quot;, error);
  });</pre></div><div class='content'><p>In this example, a message is sent only to users who are subscribed to the &quot;premiumUser&quot; topic.</p>
</div><h1>Conclusion</h1>
<div class='content'><p>Advanced messaging features in Firebase Cloud Messaging provide powerful tools for targeting and delivering messages to users. By leveraging topics, device groups, message priorities, scheduling, and filtering, you can create sophisticated messaging strategies that enhance user engagement and experience.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='handling-notifications'>&#x25C4;Handling Notifications</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Advanced Messaging Features</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-performance-monitoring'>Introduction to Performance Monitoring &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
