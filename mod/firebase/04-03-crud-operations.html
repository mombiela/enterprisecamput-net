<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRUD Operations</title>

    <link rel="alternate" href="https://campusempresa.com/mod/firebase/04-03-crud-operations" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/firebase/04-03-crud-operations" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/firebase/04-03-crud-operations" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/firebase/04-03-crud-operations" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/firebase/04-03-crud-operations" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-02-firestore-data-model' title="Firestore Data Model">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">CRUD Operations</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='04-04-advanced-queries' title="Advanced Queries">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will cover the fundamental CRUD (Create, Read, Update, Delete) operations in Cloud Firestore. These operations are essential for interacting with your Firestore database and managing your data effectively.</p>
</div><h1>1. Introduction to CRUD Operations</h1>
<div class='content'><p>CRUD operations are the basic operations you can perform on a database. They stand for:</p>
<ul>
<li><strong>Create</strong>: Adding new data to the database.</li>
<li><strong>Read</strong>: Retrieving data from the database.</li>
<li><strong>Update</strong>: Modifying existing data in the database.</li>
<li><strong>Delete</strong>: Removing data from the database.</li>
</ul>
</div><h1>2. Setting Up Firestore</h1>
<div class='content'><p>Before we dive into CRUD operations, ensure you have set up Firestore in your Firebase project. If you haven't, follow these steps:</p>
<ol>
<li>Go to the Firebase Console.</li>
<li>Select your project.</li>
<li>Navigate to Firestore Database.</li>
<li>Click on &quot;Create Database&quot; and follow the prompts to set up Firestore.</li>
</ol>
</div><h1>3. Create Operation</h1>
<div class='content'><p>To add new data to Firestore, you use the <code>set()</code> or <code>add()</code> methods.</p>
</div><h2>Using `set()`</h2>
<div class='content'><p>The <code>set()</code> method is used to create or overwrite a document with a specified ID.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5pdGlhbGl6ZSBGaXJlc3RvcmUKY29uc3QgZGIgPSBmaXJlYmFzZS5maXJlc3RvcmUoKTsKCi8vIFJlZmVyZW5jZSB0byBhIGRvY3VtZW50CmNvbnN0IGRvY1JlZiA9IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZG9jKCd1c2VyX2lkJyk7CgovLyBTZXQgZGF0YQpkb2NSZWYuc2V0KHsKICAgIG5hbWU6ICdKb2huIERvZScsCiAgICBlbWFpbDogJ2pvaG4uZG9lQGV4YW1wbGUuY29tJywKICAgIGFnZTogMzAKfSkKLnRoZW4oKCkgPT4gewogICAgY29uc29sZS5sb2coJ0RvY3VtZW50IHN1Y2Nlc3NmdWxseSB3cml0dGVuIScpOwp9KQouY2F0Y2goKGVycm9yKSA9PiB7CiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB3cml0aW5nIGRvY3VtZW50OiAnLCBlcnJvcik7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Initialize Firestore
const db = firebase.firestore();

// Reference to a document
const docRef = db.collection('users').doc('user_id');

// Set data
docRef.set({
    name: 'John Doe',
    email: 'john.doe@example.com',
    age: 30
})
.then(() =&gt; {
    console.log('Document successfully written!');
})
.catch((error) =&gt; {
    console.error('Error writing document: ', error);
});</pre></div><div class='content'></div><h2>Using `add()`</h2>
<div class='content'><p>The <code>add()</code> method is used to add a new document with an auto-generated ID.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5pdGlhbGl6ZSBGaXJlc3RvcmUKY29uc3QgZGIgPSBmaXJlYmFzZS5maXJlc3RvcmUoKTsKCi8vIFJlZmVyZW5jZSB0byBhIGNvbGxlY3Rpb24KY29uc3QgdXNlcnNSZWYgPSBkYi5jb2xsZWN0aW9uKCd1c2VycycpOwoKLy8gQWRkIGRhdGEKdXNlcnNSZWYuYWRkKHsKICAgIG5hbWU6ICdKYW5lIERvZScsCiAgICBlbWFpbDogJ2phbmUuZG9lQGV4YW1wbGUuY29tJywKICAgIGFnZTogMjUKfSkKLnRoZW4oKGRvY1JlZikgPT4gewogICAgY29uc29sZS5sb2coJ0RvY3VtZW50IHdyaXR0ZW4gd2l0aCBJRDogJywgZG9jUmVmLmlkKTsKfSkKLmNhdGNoKChlcnJvcikgPT4gewogICAgY29uc29sZS5lcnJvcignRXJyb3IgYWRkaW5nIGRvY3VtZW50OiAnLCBlcnJvcik7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Initialize Firestore
const db = firebase.firestore();

// Reference to a collection
const usersRef = db.collection('users');

// Add data
usersRef.add({
    name: 'Jane Doe',
    email: 'jane.doe@example.com',
    age: 25
})
.then((docRef) =&gt; {
    console.log('Document written with ID: ', docRef.id);
})
.catch((error) =&gt; {
    console.error('Error adding document: ', error);
});</pre></div><div class='content'></div><h1>4. Read Operation</h1>
<div class='content'><p>To retrieve data from Firestore, you use the <code>get()</code> method.</p>
</div><h2>Reading a Single Document</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5pdGlhbGl6ZSBGaXJlc3RvcmUKY29uc3QgZGIgPSBmaXJlYmFzZS5maXJlc3RvcmUoKTsKCi8vIFJlZmVyZW5jZSB0byBhIGRvY3VtZW50CmNvbnN0IGRvY1JlZiA9IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZG9jKCd1c2VyX2lkJyk7CgovLyBHZXQgZG9jdW1lbnQKZG9jUmVmLmdldCgpLnRoZW4oKGRvYykgPT4gewogICAgaWYgKGRvYy5leGlzdHMpIHsKICAgICAgICBjb25zb2xlLmxvZygnRG9jdW1lbnQgZGF0YTonLCBkb2MuZGF0YSgpKTsKICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coJ05vIHN1Y2ggZG9jdW1lbnQhJyk7CiAgICB9Cn0pLmNhdGNoKChlcnJvcikgPT4gewogICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBkb2N1bWVudDogJywgZXJyb3IpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Initialize Firestore
const db = firebase.firestore();

// Reference to a document
const docRef = db.collection('users').doc('user_id');

// Get document
docRef.get().then((doc) =&gt; {
    if (doc.exists) {
        console.log('Document data:', doc.data());
    } else {
        console.log('No such document!');
    }
}).catch((error) =&gt; {
    console.error('Error getting document: ', error);
});</pre></div><div class='content'></div><h2>Reading Multiple Documents</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5pdGlhbGl6ZSBGaXJlc3RvcmUKY29uc3QgZGIgPSBmaXJlYmFzZS5maXJlc3RvcmUoKTsKCi8vIFJlZmVyZW5jZSB0byBhIGNvbGxlY3Rpb24KY29uc3QgdXNlcnNSZWYgPSBkYi5jb2xsZWN0aW9uKCd1c2VycycpOwoKLy8gR2V0IGFsbCBkb2N1bWVudHMKdXNlcnNSZWYuZ2V0KCkudGhlbigocXVlcnlTbmFwc2hvdCkgPT4gewogICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhgJHtkb2MuaWR9ID0+ICR7ZG9jLmRhdGEoKX1gKTsKICAgIH0pOwp9KS5jYXRjaCgoZXJyb3IpID0+IHsKICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGdldHRpbmcgZG9jdW1lbnRzOiAnLCBlcnJvcik7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Initialize Firestore
const db = firebase.firestore();

// Reference to a collection
const usersRef = db.collection('users');

// Get all documents
usersRef.get().then((querySnapshot) =&gt; {
    querySnapshot.forEach((doc) =&gt; {
        console.log(`${doc.id} =&gt; ${doc.data()}`);
    });
}).catch((error) =&gt; {
    console.error('Error getting documents: ', error);
});</pre></div><div class='content'></div><h1>5. Update Operation</h1>
<div class='content'><p>To update existing data, you use the <code>update()</code> method.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5pdGlhbGl6ZSBGaXJlc3RvcmUKY29uc3QgZGIgPSBmaXJlYmFzZS5maXJlc3RvcmUoKTsKCi8vIFJlZmVyZW5jZSB0byBhIGRvY3VtZW50CmNvbnN0IGRvY1JlZiA9IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZG9jKCd1c2VyX2lkJyk7CgovLyBVcGRhdGUgZGF0YQpkb2NSZWYudXBkYXRlKHsKICAgIGFnZTogMzEKfSkKLnRoZW4oKCkgPT4gewogICAgY29uc29sZS5sb2coJ0RvY3VtZW50IHN1Y2Nlc3NmdWxseSB1cGRhdGVkIScpOwp9KQouY2F0Y2goKGVycm9yKSA9PiB7CiAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBkb2N1bWVudDogJywgZXJyb3IpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Initialize Firestore
const db = firebase.firestore();

// Reference to a document
const docRef = db.collection('users').doc('user_id');

// Update data
docRef.update({
    age: 31
})
.then(() =&gt; {
    console.log('Document successfully updated!');
})
.catch((error) =&gt; {
    console.error('Error updating document: ', error);
});</pre></div><div class='content'></div><h1>6. Delete Operation</h1>
<div class='content'><p>To delete data, you use the <code>delete()</code> method.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5pdGlhbGl6ZSBGaXJlc3RvcmUKY29uc3QgZGIgPSBmaXJlYmFzZS5maXJlc3RvcmUoKTsKCi8vIFJlZmVyZW5jZSB0byBhIGRvY3VtZW50CmNvbnN0IGRvY1JlZiA9IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZG9jKCd1c2VyX2lkJyk7CgovLyBEZWxldGUgZG9jdW1lbnQKZG9jUmVmLmRlbGV0ZSgpCi50aGVuKCgpID0+IHsKICAgIGNvbnNvbGUubG9nKCdEb2N1bWVudCBzdWNjZXNzZnVsbHkgZGVsZXRlZCEnKTsKfSkKLmNhdGNoKChlcnJvcikgPT4gewogICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgZG9jdW1lbnQ6ICcsIGVycm9yKTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Initialize Firestore
const db = firebase.firestore();

// Reference to a document
const docRef = db.collection('users').doc('user_id');

// Delete document
docRef.delete()
.then(() =&gt; {
    console.log('Document successfully deleted!');
})
.catch((error) =&gt; {
    console.error('Error deleting document: ', error);
});</pre></div><div class='content'></div><h1>7. Practical Exercise</h1>
<div class='content'></div><h2>Exercise: Implement CRUD Operations</h2>
<div class='content'><ol>
<li>
<p><strong>Create</strong>: Add a new user to the <code>users</code> collection with the following data:</p>
<ul>
<li>Name: Alice Smith</li>
<li>Email: alice.smith@example.com</li>
<li>Age: 28</li>
</ul>
</li>
<li>
<p><strong>Read</strong>: Retrieve and log all users from the <code>users</code> collection.</p>
</li>
<li>
<p><strong>Update</strong>: Update Alice Smith's age to 29.</p>
</li>
<li>
<p><strong>Delete</strong>: Delete the user with the name &quot;Alice Smith&quot;.</p>
</li>
</ol>
</div><h2>Solution</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5pdGlhbGl6ZSBGaXJlc3RvcmUKY29uc3QgZGIgPSBmaXJlYmFzZS5maXJlc3RvcmUoKTsKCi8vIDEuIENyZWF0ZQpkYi5jb2xsZWN0aW9uKCd1c2VycycpLmFkZCh7CiAgICBuYW1lOiAnQWxpY2UgU21pdGgnLAogICAgZW1haWw6ICdhbGljZS5zbWl0aEBleGFtcGxlLmNvbScsCiAgICBhZ2U6IDI4Cn0pCi50aGVuKChkb2NSZWYpID0+IHsKICAgIGNvbnNvbGUubG9nKCdEb2N1bWVudCB3cml0dGVuIHdpdGggSUQ6ICcsIGRvY1JlZi5pZCk7CgogICAgLy8gMi4gUmVhZAogICAgcmV0dXJuIGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZ2V0KCk7Cn0pCi50aGVuKChxdWVyeVNuYXBzaG90KSA9PiB7CiAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGAke2RvYy5pZH0gPT4gJHtkb2MuZGF0YSgpfWApOwogICAgfSk7CgogICAgLy8gMy4gVXBkYXRlCiAgICBjb25zdCBhbGljZVJlZiA9IHF1ZXJ5U25hcHNob3QuZG9jcy5maW5kKGRvYyA9PiBkb2MuZGF0YSgpLm5hbWUgPT09ICdBbGljZSBTbWl0aCcpLnJlZjsKICAgIHJldHVybiBhbGljZVJlZi51cGRhdGUoeyBhZ2U6IDI5IH0pOwp9KQoudGhlbigoKSA9PiB7CiAgICBjb25zb2xlLmxvZygnRG9jdW1lbnQgc3VjY2Vzc2Z1bGx5IHVwZGF0ZWQhJyk7CgogICAgLy8gNC4gRGVsZXRlCiAgICBjb25zdCBhbGljZVJlZiA9IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykud2hlcmUoJ25hbWUnLCAnPT0nLCAnQWxpY2UgU21pdGgnKTsKICAgIHJldHVybiBhbGljZVJlZi5nZXQoKTsKfSkKLnRoZW4oKHF1ZXJ5U25hcHNob3QpID0+IHsKICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7CiAgICAgICAgZG9jLnJlZi5kZWxldGUoKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ0RvY3VtZW50IHN1Y2Nlc3NmdWxseSBkZWxldGVkIScpOwogICAgICAgIH0pOwogICAgfSk7Cn0pCi5jYXRjaCgoZXJyb3IpID0+IHsKICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOiAnLCBlcnJvcik7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Initialize Firestore
const db = firebase.firestore();

// 1. Create
db.collection('users').add({
    name: 'Alice Smith',
    email: 'alice.smith@example.com',
    age: 28
})
.then((docRef) =&gt; {
    console.log('Document written with ID: ', docRef.id);

    // 2. Read
    return db.collection('users').get();
})
.then((querySnapshot) =&gt; {
    querySnapshot.forEach((doc) =&gt; {
        console.log(`${doc.id} =&gt; ${doc.data()}`);
    });

    // 3. Update
    const aliceRef = querySnapshot.docs.find(doc =&gt; doc.data().name === 'Alice Smith').ref;
    return aliceRef.update({ age: 29 });
})
.then(() =&gt; {
    console.log('Document successfully updated!');

    // 4. Delete
    const aliceRef = db.collection('users').where('name', '==', 'Alice Smith');
    return aliceRef.get();
})
.then((querySnapshot) =&gt; {
    querySnapshot.forEach((doc) =&gt; {
        doc.ref.delete().then(() =&gt; {
            console.log('Document successfully deleted!');
        });
    });
})
.catch((error) =&gt; {
    console.error('Error: ', error);
});</pre></div><div class='content'></div><h1>8. Conclusion</h1>
<div class='content'><p>In this section, we covered the basic CRUD operations in Cloud Firestore. You learned how to create, read, update, and delete documents in your Firestore database. These operations are fundamental for managing your data and will be used frequently in your applications. In the next section, we will explore advanced queries in Firestore to help you retrieve data more efficiently.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-02-firestore-data-model' title="Firestore Data Model">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='04-04-advanced-queries' title="Advanced Queries">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
