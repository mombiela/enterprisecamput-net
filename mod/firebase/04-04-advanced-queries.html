<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    <title>Advanced Queries</title>

    <link rel="alternate" href="https://campusempresa.com/mod/firebase/04-04-advanced-queries" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/firebase/04-04-advanced-queries" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/firebase/04-04-advanced-queries" hreflang="en" />
    
	<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"> -->
	<link href="/css/bootstrap/bootstrap.css?v=1" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.2b8e6213f8.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "firebase";
  		var TEMA_NAME = "04-04";
  		var TYPE = "mod";
  		var PATH = "mod/firebase/04-04-advanced-queries";
  		var IS_INDEX = false;
  		var DEVELOP = sessionStorage.getItem("DEVELOP") == "true";
  		  		var ALL_PAGES_MOD = ["01-01-what-is-firebase","01-02-setting-up-firebase","01-03-firebase-console-overview","02-01-introduction-to-firebase-authentication","02-02-email-and-password-authentication","02-03-social-media-authentication","02-04-managing-users","03-01-introduction-to-realtime-database","03-02-reading-and-writing-data","03-03-data-structure-and-security-rules","03-04-offline-capabilities","04-01-introduction-to-cloud-firestore","04-02-firestore-data-model","04-03-crud-operations","04-04-advanced-queries","04-05-security-rules","05-01-introduction-to-firebase-storage","05-02-uploading-files","05-03-downloading-files","05-04-file-metadata-and-security","06-01-introduction-to-cloud-messaging","06-02-sending-notifications","06-03-handling-notifications","06-04-advanced-messaging-features","07-01-introduction-to-firebase-analytics","07-02-logging-events","07-03-user-properties","07-04-analyzing-data","08-01-introduction-to-firebase-functions","08-02-writing-functions","08-03-deploying-functions","08-04-triggering-functions","09-01-introduction-to-performance-monitoring","09-02-setting-up-performance-monitoring","09-03-analyzing-performance-data","10-01-introduction-to-firebase-test-lab","10-02-running-tests","10-03-analyzing-test-results","11-01-firebase-ml-kit","11-02-firebase-dynamic-links","11-03-firebase-remote-config","11-04-firebase-app-distribution"];
  		  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<!-- <script type="text/javascript" src="/js/main.js"></script> -->
  	<script type="module" src="/js/app.198aab099d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/firebase/04-04-advanced-queries" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/firebase/04-04-advanced-queries" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my_modules" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/end_modules" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" style="display:none;" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="firebase">
		<a  href="#" class="text-secondary d-none" data-read-mod="firebase" data-read-unit="04-04" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="firebase" data-unread-unit="04-04" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-03-crud-operations' title="CRUD Operations" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-03-crud-operations' title="CRUD Operations" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">Advanced Queries</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='04-05-security-rules' title="Security Rules" class="py-2 px-3 btn btn-primary"
				data-read-mod="firebase" data-read-unit="04-04">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='04-05-security-rules' title="Security Rules" class="py-2 px-3 btn btn-primary" 
				data-read-mod="firebase" data-read-unit="04-04">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will delve into advanced querying techniques in Cloud Firestore. These techniques will help you retrieve data more efficiently and perform complex queries that go beyond basic CRUD operations.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Compound Queries</strong>: Combining multiple conditions in a single query.</li>
<li><strong>Array-Contains Queries</strong>: Querying documents where a specific array field contains a certain value.</li>
<li><strong>In Queries</strong>: Querying documents where a field matches any value in a given list.</li>
<li><strong>Range Queries</strong>: Querying documents within a specific range of values.</li>
<li><strong>Pagination</strong>: Retrieving data in chunks to handle large datasets.</li>
<li><strong>Indexing</strong>: Optimizing queries with custom indexes.</li>
</ol>
</div><h1>Compound Queries</h1>
<div class='content'><p>Compound queries allow you to combine multiple conditions using logical operators.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUXVlcnkgZG9jdW1lbnRzIHdoZXJlICdhZ2UnIGlzIGdyZWF0ZXIgdGhhbiAyNSBhbmQgJ2NpdHknIGlzICdOZXcgWW9yaycKZGIuY29sbGVjdGlvbigidXNlcnMiKQogIC53aGVyZSgiYWdlIiwgIj4iLCAyNSkKICAud2hlcmUoImNpdHkiLCAiPT0iLCAiTmV3IFlvcmsiKQogIC5nZXQoKQogIC50aGVuKChxdWVyeVNuYXBzaG90KSA9PiB7CiAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4gewogICAgICBjb25zb2xlLmxvZyhkb2MuaWQsICIgPT4gIiwgZG9jLmRhdGEoKSk7CiAgICB9KTsKICB9KQogIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgIGNvbnNvbGUubG9nKCJFcnJvciBnZXR0aW5nIGRvY3VtZW50czogIiwgZXJyb3IpOwogIH0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Query documents where 'age' is greater than 25 and 'city' is 'New York'
db.collection(&quot;users&quot;)
  .where(&quot;age&quot;, &quot;&gt;&quot;, 25)
  .where(&quot;city&quot;, &quot;==&quot;, &quot;New York&quot;)
  .get()
  .then((querySnapshot) =&gt; {
    querySnapshot.forEach((doc) =&gt; {
      console.log(doc.id, &quot; =&gt; &quot;, doc.data());
    });
  })
  .catch((error) =&gt; {
    console.log(&quot;Error getting documents: &quot;, error);
  });</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>where(&quot;age&quot;, &quot;&gt;&quot;, 25)</code>: Filters documents where the <code>age</code> field is greater than 25.</li>
<li><code>where(&quot;city&quot;, &quot;==&quot;, &quot;New York&quot;)</code>: Further filters documents where the <code>city</code> field is 'New York'.</li>
</ul>
</div><h1>Array-Contains Queries</h1>
<div class='content'><p>Array-contains queries allow you to filter documents where a specific array field contains a certain value.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUXVlcnkgZG9jdW1lbnRzIHdoZXJlICd0YWdzJyBhcnJheSBjb250YWlucyAnZmlyZWJhc2UnCmRiLmNvbGxlY3Rpb24oInBvc3RzIikKICAud2hlcmUoInRhZ3MiLCAiYXJyYXktY29udGFpbnMiLCAiZmlyZWJhc2UiKQogIC5nZXQoKQogIC50aGVuKChxdWVyeVNuYXBzaG90KSA9PiB7CiAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4gewogICAgICBjb25zb2xlLmxvZyhkb2MuaWQsICIgPT4gIiwgZG9jLmRhdGEoKSk7CiAgICB9KTsKICB9KQogIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgIGNvbnNvbGUubG9nKCJFcnJvciBnZXR0aW5nIGRvY3VtZW50czogIiwgZXJyb3IpOwogIH0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Query documents where 'tags' array contains 'firebase'
db.collection(&quot;posts&quot;)
  .where(&quot;tags&quot;, &quot;array-contains&quot;, &quot;firebase&quot;)
  .get()
  .then((querySnapshot) =&gt; {
    querySnapshot.forEach((doc) =&gt; {
      console.log(doc.id, &quot; =&gt; &quot;, doc.data());
    });
  })
  .catch((error) =&gt; {
    console.log(&quot;Error getting documents: &quot;, error);
  });</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>where(&quot;tags&quot;, &quot;array-contains&quot;, &quot;firebase&quot;)</code>: Filters documents where the <code>tags</code> array contains the value 'firebase'.</li>
</ul>
</div><h1>In Queries</h1>
<div class='content'><p>In queries allow you to filter documents where a field matches any value in a given list.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUXVlcnkgZG9jdW1lbnRzIHdoZXJlICdzdGF0dXMnIGlzIGVpdGhlciAnYWN0aXZlJyBvciAncGVuZGluZycKZGIuY29sbGVjdGlvbigidGFza3MiKQogIC53aGVyZSgic3RhdHVzIiwgImluIiwgWyJhY3RpdmUiLCAicGVuZGluZyJdKQogIC5nZXQoKQogIC50aGVuKChxdWVyeVNuYXBzaG90KSA9PiB7CiAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4gewogICAgICBjb25zb2xlLmxvZyhkb2MuaWQsICIgPT4gIiwgZG9jLmRhdGEoKSk7CiAgICB9KTsKICB9KQogIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgIGNvbnNvbGUubG9nKCJFcnJvciBnZXR0aW5nIGRvY3VtZW50czogIiwgZXJyb3IpOwogIH0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Query documents where 'status' is either 'active' or 'pending'
db.collection(&quot;tasks&quot;)
  .where(&quot;status&quot;, &quot;in&quot;, [&quot;active&quot;, &quot;pending&quot;])
  .get()
  .then((querySnapshot) =&gt; {
    querySnapshot.forEach((doc) =&gt; {
      console.log(doc.id, &quot; =&gt; &quot;, doc.data());
    });
  })
  .catch((error) =&gt; {
    console.log(&quot;Error getting documents: &quot;, error);
  });</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>where(&quot;status&quot;, &quot;in&quot;, [&quot;active&quot;, &quot;pending&quot;])</code>: Filters documents where the <code>status</code> field is either 'active' or 'pending'.</li>
</ul>
</div><h1>Range Queries</h1>
<div class='content'><p>Range queries allow you to filter documents within a specific range of values.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUXVlcnkgZG9jdW1lbnRzIHdoZXJlICdwcmljZScgaXMgYmV0d2VlbiAxMCBhbmQgNTAKZGIuY29sbGVjdGlvbigicHJvZHVjdHMiKQogIC53aGVyZSgicHJpY2UiLCAiPj0iLCAxMCkKICAud2hlcmUoInByaWNlIiwgIjw9IiwgNTApCiAgLmdldCgpCiAgLnRoZW4oKHF1ZXJ5U25hcHNob3QpID0+IHsKICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGRvYy5pZCwgIiA9PiAiLCBkb2MuZGF0YSgpKTsKICAgIH0pOwogIH0pCiAgLmNhdGNoKChlcnJvcikgPT4gewogICAgY29uc29sZS5sb2coIkVycm9yIGdldHRpbmcgZG9jdW1lbnRzOiAiLCBlcnJvcik7CiAgfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Query documents where 'price' is between 10 and 50
db.collection(&quot;products&quot;)
  .where(&quot;price&quot;, &quot;&gt;=&quot;, 10)
  .where(&quot;price&quot;, &quot;&lt;=&quot;, 50)
  .get()
  .then((querySnapshot) =&gt; {
    querySnapshot.forEach((doc) =&gt; {
      console.log(doc.id, &quot; =&gt; &quot;, doc.data());
    });
  })
  .catch((error) =&gt; {
    console.log(&quot;Error getting documents: &quot;, error);
  });</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>where(&quot;price&quot;, &quot;&gt;=&quot;, 10)</code>: Filters documents where the <code>price</code> field is greater than or equal to 10.</li>
<li><code>where(&quot;price&quot;, &quot;&lt;=&quot;, 50)</code>: Further filters documents where the <code>price</code> field is less than or equal to 50.</li>
</ul>
</div><h1>Pagination</h1>
<div class='content'><p>Pagination helps in retrieving data in chunks, which is useful for handling large datasets.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGZpcnN0ID0gZGIuY29sbGVjdGlvbigidXNlcnMiKQogIC5vcmRlckJ5KCJuYW1lIikKICAubGltaXQoMTApOwoKZmlyc3QuZ2V0KCkudGhlbigoZG9jdW1lbnRTbmFwc2hvdHMpID0+IHsKICAvLyBHZXQgdGhlIGxhc3QgdmlzaWJsZSBkb2N1bWVudAogIGxldCBsYXN0VmlzaWJsZSA9IGRvY3VtZW50U25hcHNob3RzLmRvY3NbZG9jdW1lbnRTbmFwc2hvdHMuZG9jcy5sZW5ndGgtMV07CgogIC8vIENvbnN0cnVjdCBhIG5ldyBxdWVyeSBzdGFydGluZyBhdCB0aGlzIGRvY3VtZW50CiAgbGV0IG5leHQgPSBkYi5jb2xsZWN0aW9uKCJ1c2VycyIpCiAgICAub3JkZXJCeSgibmFtZSIpCiAgICAuc3RhcnRBZnRlcihsYXN0VmlzaWJsZSkKICAgIC5saW1pdCgxMCk7CgogIG5leHQuZ2V0KCkudGhlbigocXVlcnlTbmFwc2hvdCkgPT4gewogICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHsKICAgICAgY29uc29sZS5sb2coZG9jLmlkLCAiID0+ICIsIGRvYy5kYXRhKCkpOwogICAgfSk7CiAgfSk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let first = db.collection(&quot;users&quot;)
  .orderBy(&quot;name&quot;)
  .limit(10);

first.get().then((documentSnapshots) =&gt; {
  // Get the last visible document
  let lastVisible = documentSnapshots.docs[documentSnapshots.docs.length-1];

  // Construct a new query starting at this document
  let next = db.collection(&quot;users&quot;)
    .orderBy(&quot;name&quot;)
    .startAfter(lastVisible)
    .limit(10);

  next.get().then((querySnapshot) =&gt; {
    querySnapshot.forEach((doc) =&gt; {
      console.log(doc.id, &quot; =&gt; &quot;, doc.data());
    });
  });
});</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>orderBy(&quot;name&quot;)</code>: Orders the documents by the <code>name</code> field.</li>
<li><code>limit(10)</code>: Limits the query to 10 documents.</li>
<li><code>startAfter(lastVisible)</code>: Starts the next query after the last visible document from the previous query.</li>
</ul>
</div><h1>Indexing</h1>
<div class='content'><p>Custom indexes can optimize your queries, especially when using compound queries.</p>
</div><h2>Example</h2>
<div class='content'><p>To create a custom index, you need to use the Firebase Console. Navigate to the Firestore section, and under the Indexes tab, you can create a new index by specifying the fields and their order.</p>
</div><h2>Explanation</h2>
<div class='content'><ul>
<li>Custom indexes help in optimizing queries that involve multiple fields or complex conditions.</li>
</ul>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Task</h2>
<div class='content'><ol>
<li>Create a Firestore collection named <code>books</code>.</li>
<li>Add documents with the following fields: <code>title</code>, <code>author</code>, <code>genre</code>, <code>publishedYear</code>, and <code>ratings</code> (an array of numbers).</li>
<li>Write a query to retrieve books published after the year 2000 and have a rating of at least 4.</li>
</ol>
</div><h2>Solution</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQWRkIHNhbXBsZSBkb2N1bWVudHMKZGIuY29sbGVjdGlvbigiYm9va3MiKS5hZGQoewogIHRpdGxlOiAiQm9vayBPbmUiLAogIGF1dGhvcjogIkF1dGhvciBBIiwKICBnZW5yZTogIkZpY3Rpb24iLAogIHB1Ymxpc2hlZFllYXI6IDIwMDEsCiAgcmF0aW5nczogWzQsIDVdCn0pOwoKZGIuY29sbGVjdGlvbigiYm9va3MiKS5hZGQoewogIHRpdGxlOiAiQm9vayBUd28iLAogIGF1dGhvcjogIkF1dGhvciBCIiwKICBnZW5yZTogIk5vbi1GaWN0aW9uIiwKICBwdWJsaXNoZWRZZWFyOiAxOTk5LAogIHJhdGluZ3M6IFszLCA0XQp9KTsKCi8vIFF1ZXJ5IGRvY3VtZW50cwpkYi5jb2xsZWN0aW9uKCJib29rcyIpCiAgLndoZXJlKCJwdWJsaXNoZWRZZWFyIiwgIj4iLCAyMDAwKQogIC53aGVyZSgicmF0aW5ncyIsICJhcnJheS1jb250YWlucyIsIDQpCiAgLmdldCgpCiAgLnRoZW4oKHF1ZXJ5U25hcHNob3QpID0+IHsKICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGRvYy5pZCwgIiA9PiAiLCBkb2MuZGF0YSgpKTsKICAgIH0pOwogIH0pCiAgLmNhdGNoKChlcnJvcikgPT4gewogICAgY29uc29sZS5sb2coIkVycm9yIGdldHRpbmcgZG9jdW1lbnRzOiAiLCBlcnJvcik7CiAgfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Add sample documents
db.collection(&quot;books&quot;).add({
  title: &quot;Book One&quot;,
  author: &quot;Author A&quot;,
  genre: &quot;Fiction&quot;,
  publishedYear: 2001,
  ratings: [4, 5]
});

db.collection(&quot;books&quot;).add({
  title: &quot;Book Two&quot;,
  author: &quot;Author B&quot;,
  genre: &quot;Non-Fiction&quot;,
  publishedYear: 1999,
  ratings: [3, 4]
});

// Query documents
db.collection(&quot;books&quot;)
  .where(&quot;publishedYear&quot;, &quot;&gt;&quot;, 2000)
  .where(&quot;ratings&quot;, &quot;array-contains&quot;, 4)
  .get()
  .then((querySnapshot) =&gt; {
    querySnapshot.forEach((doc) =&gt; {
      console.log(doc.id, &quot; =&gt; &quot;, doc.data());
    });
  })
  .catch((error) =&gt; {
    console.log(&quot;Error getting documents: &quot;, error);
  });</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>where(&quot;publishedYear&quot;, &quot;&gt;&quot;, 2000)</code>: Filters books published after the year 2000.</li>
<li><code>where(&quot;ratings&quot;, &quot;array-contains&quot;, 4)</code>: Further filters books that have a rating of at least 4.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, we explored advanced querying techniques in Cloud Firestore, including compound queries, array-contains queries, in queries, range queries, pagination, and indexing. These techniques will help you retrieve data more efficiently and perform complex queries. In the next module, we will discuss security rules to protect your Firestore data.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='04-03-crud-operations' title="CRUD Operations" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='04-03-crud-operations' title="CRUD Operations" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='04-05-security-rules' title="Security Rules" class="py-2 px-3 btn btn-primary"
				data-read-mod="firebase" data-read-unit="04-04">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='04-05-security-rules' title="Security Rules" class="py-2 px-3 btn btn-primary" 
				data-read-mod="firebase" data-read-unit="04-04">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			
	<div class="container mt-2 d-none d-md-block index">
		<h1>Firebase Course</h1>
<h2>Module 1: Introduction to Firebase</h2>
<ul>
<li><a href="01-01-what-is-firebase">What is Firebase?</a></li>
<li><a href="01-02-setting-up-firebase">Setting Up Firebase</a></li>
<li><a href="01-03-firebase-console-overview">Firebase Console Overview</a></li>
</ul>
<h2>Module 2: Firebase Authentication</h2>
<ul>
<li><a href="02-01-introduction-to-firebase-authentication">Introduction to Firebase Authentication</a></li>
<li><a href="02-02-email-and-password-authentication">Email and Password Authentication</a></li>
<li><a href="02-03-social-media-authentication">Social Media Authentication</a></li>
<li><a href="02-04-managing-users">Managing Users</a></li>
</ul>
<h2>Module 3: Firebase Realtime Database</h2>
<ul>
<li><a href="03-01-introduction-to-realtime-database">Introduction to Realtime Database</a></li>
<li><a href="03-02-reading-and-writing-data">Reading and Writing Data</a></li>
<li><a href="03-03-data-structure-and-security-rules">Data Structure and Security Rules</a></li>
<li><a href="03-04-offline-capabilities">Offline Capabilities</a></li>
</ul>
<h2>Module 4: Cloud Firestore</h2>
<ul>
<li><a href="04-01-introduction-to-cloud-firestore">Introduction to Cloud Firestore</a></li>
<li><a href="04-02-firestore-data-model">Firestore Data Model</a></li>
<li><a href="04-03-crud-operations">CRUD Operations</a></li>
<li><a href="04-04-advanced-queries">Advanced Queries</a></li>
<li><a href="04-05-security-rules">Security Rules</a></li>
</ul>
<h2>Module 5: Firebase Storage</h2>
<ul>
<li><a href="05-01-introduction-to-firebase-storage">Introduction to Firebase Storage</a></li>
<li><a href="05-02-uploading-files">Uploading Files</a></li>
<li><a href="05-03-downloading-files">Downloading Files</a></li>
<li><a href="05-04-file-metadata-and-security">File Metadata and Security</a></li>
</ul>
<h2>Module 6: Firebase Cloud Messaging</h2>
<ul>
<li><a href="06-01-introduction-to-cloud-messaging">Introduction to Cloud Messaging</a></li>
<li><a href="06-02-sending-notifications">Sending Notifications</a></li>
<li><a href="06-03-handling-notifications">Handling Notifications</a></li>
<li><a href="06-04-advanced-messaging-features">Advanced Messaging Features</a></li>
</ul>
<h2>Module 7: Firebase Analytics</h2>
<ul>
<li><a href="07-01-introduction-to-firebase-analytics">Introduction to Firebase Analytics</a></li>
<li><a href="07-02-logging-events">Logging Events</a></li>
<li><a href="07-03-user-properties">User Properties</a></li>
<li><a href="07-04-analyzing-data">Analyzing Data</a></li>
</ul>
<h2>Module 8: Firebase Functions</h2>
<ul>
<li><a href="08-01-introduction-to-firebase-functions">Introduction to Firebase Functions</a></li>
<li><a href="08-02-writing-functions">Writing Functions</a></li>
<li><a href="08-03-deploying-functions">Deploying Functions</a></li>
<li><a href="08-04-triggering-functions">Triggering Functions</a></li>
</ul>
<h2>Module 9: Firebase Performance Monitoring</h2>
<ul>
<li><a href="09-01-introduction-to-performance-monitoring">Introduction to Performance Monitoring</a></li>
<li><a href="09-02-setting-up-performance-monitoring">Setting Up Performance Monitoring</a></li>
<li><a href="09-03-analyzing-performance-data">Analyzing Performance Data</a></li>
</ul>
<h2>Module 10: Firebase Test Lab</h2>
<ul>
<li><a href="10-01-introduction-to-firebase-test-lab">Introduction to Firebase Test Lab</a></li>
<li><a href="10-02-running-tests">Running Tests</a></li>
<li><a href="10-03-analyzing-test-results">Analyzing Test Results</a></li>
</ul>
<h2>Module 11: Advanced Firebase Topics</h2>
<ul>
<li><a href="11-01-firebase-ml-kit">Firebase ML Kit</a></li>
<li><a href="11-02-firebase-dynamic-links">Firebase Dynamic Links</a></li>
<li><a href="11-03-firebase-remote-config">Firebase Remote Config</a></li>
<li><a href="11-04-firebase-app-distribution">Firebase App Distribution</a></li>
</ul>

	</div>










			<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<p id="loginModalEmail"></p>
            	<div id="mensaje" class="d-none alert alert-danger"></div>
            	<div id="mensaje_info" class="d-none alert alert-success"></div>
            	
            	<div id="modal-body-main">
					<div class="mt-4 d-none" id="forgotPasswordSection">
						<div class="mb-3">
    <label for="recovery-email" class="form-label">Email</label>
    <input type="email" required class="form-control" id="recovery-email" placeholder="Enter your email">
</div>
<button class="btn btn-primary" id="btnRecover">Send recovery link</button>

					</div>
									
					<div class="mt-4 d-none" id="deleteUserSection">	
						<div class="mb-3 alert alert-danger">
	Warning! You are about to delete all registration and progress data.<br><b>This action cannot be undone.</b>
</div>
<div class="mb-3">
    <input type="password" required class="form-control" id="delete-user-pwd" placeholder="Enter your password">
</div>
<button class="btn btn-primary" id="btnDeleteUser">Delete user</button>

					</div>
					
					<div class="mt-4 d-none" id="changePassordSection">
						<div class="mb-3 row">
	<div class="col col-12 my-2">
	    <input type="password" required class="form-control" id="change-pwd-actual" placeholder="Enter current password">
	</div>
	<div class="col col-12 my-2">
    	<input type="password" required class="form-control" id="change-pwd-new-1" placeholder="Enter new password">
	</div>
	<div class="col col-12 my-2">
    	<input type="password" required class="form-control" id="change-pwd-new-2" placeholder="Repeat new password">
	</div>
</div>
<button class="btn btn-primary" id="btnChangePassword">Change password</button>

					</div>
					
					<div class="mt-4 d-none alert alert-warning" id="verifyPasswordSection">
						<p><b>Falta verificar correu</b></p>
						<a id="btnVerifyEmail" href="#">Send verification link</a>

					</div>
					
					<div class="mt-4 d-none" id="disconnectUserSection">
						<div class="mb-3">
    <button id="btnDisconnect" class="btn btn-primary">Disconnect</button>
</div>

<hr>

<div class="mt-3">
    <button class="btn btn-outline-secondary" id="change-password-link">Change password</button>
</div>

<div class="mt-3">
    <a href="#" id="delete-user-link">Delete user</a>
</div>

					</div>
	            
	            	<div class="mt-4 d-none" id="modalTabsSection">
	            		<ul class="nav nav-tabs" id="authTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button" role="tab" aria-controls="login" aria-selected="true">
        	Log in
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register" type="button" role="tab" aria-controls="register" aria-selected="false">
        	Sign up
        </button>
    </li>
</ul>

<div class="tab-content mt-3" id="authTabsContent">
    <div class="tab-pane fade show active" id="login" role="tabpanel" aria-labelledby="login-tab">
    	<div class="mb-3">
    <label for="login-username" class="form-label">Email</label>
    <input type="email" required class="form-control" id="login-username" placeholder="Enter your email">
</div>
<div class="mb-3">
    <label for="login-password" class="form-label">Password</label>
    <input type="password"  required class="form-control" id="login-password" placeholder="Enter your password">
</div>
<button class="btn btn-primary" id="btnLogin">Log in</button>
<div class="mt-3">
    <a href="#" id="forgot-password-link">Have you forgotten your password?</a>
</div>
    </div>

    <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
    	<div class="mb-3">
    <label for="register-email" class="form-label">Email</label>
    <input type="email" class="form-control" id="register-email" required placeholder="Enter your email">
</div>

<div class="mb-3">
    <label for="register-password" class="form-label">Password</label>
    <input type="password" class="form-control"  required id="register-password" placeholder="Enter your password">
</div>

<div class="mb-3">
    <label for="register-name" class="form-label">Name</label>
    <input type="text" class="form-control"  required id="register-name" placeholder="Enter your name">
</div>

<div class="form-check mb-3">
    <input type="checkbox" class="form-check-input" id="accept-conditions-reg">
    <label for="accept-conditions-reg" class="form-check-label">
        I have read and accept the <a href="/privacity" target="blank">Privacy Policy</a> and the <a href="/licence" target="blank">Terms and Conditions of Use</a>.
    </label>
</div>

<div class="form-check mb-3">
    <input type="checkbox" class="form-check-input" id="accept-allow_comunications">
    <label for="accept-allow_comunications" class="form-check-label">
        I wish to receive news and updates about courses (optional).
    </label>
</div>

<button id="btnRegister" class="btn btn-primary">Sign up</button>
    </div>
</div>
	            	</div>
            	</div>
            </div>
        </div>
    </div>
</div>

	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
