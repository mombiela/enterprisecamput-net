<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triggering Functions</title>

    <link rel="alternate" href="https://campusempresa.com/mod/firebase/08-04-triggering-functions" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/firebase/08-04-triggering-functions" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/firebase/08-04-triggering-functions" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/firebase/08-04-triggering-functions" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/firebase/08-04-triggering-functions" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='08-03-deploying-functions' title="Deploying Functions">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Triggering Functions</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='09-01-introduction-to-performance-monitoring' title="Introduction to Performance Monitoring">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to trigger Firebase Functions. Firebase Functions can be triggered by various events, such as changes in the Firebase Realtime Database, Firestore, Authentication events, HTTP requests, and more. Understanding how to set up these triggers is crucial for building responsive and dynamic applications.</p>
</div><h1><p>Types of Triggers</p>
</h1>
<div class='content'><p>Firebase Functions can be triggered by the following types of events:</p>
<ol>
<li><strong>HTTP Triggers</strong>: Functions that are triggered by HTTP requests.</li>
<li><strong>Database Triggers</strong>: Functions that respond to changes in the Firebase Realtime Database.</li>
<li><strong>Firestore Triggers</strong>: Functions that respond to changes in Firestore documents.</li>
<li><strong>Authentication Triggers</strong>: Functions that respond to user creation and deletion events.</li>
<li><strong>Storage Triggers</strong>: Functions that respond to changes in Firebase Storage.</li>
<li><strong>Analytics Triggers</strong>: Functions that respond to Firebase Analytics events.</li>
<li><strong>Pub/Sub Triggers</strong>: Functions that respond to messages published to Google Cloud Pub/Sub topics.</li>
</ol>
</div><h1><p>HTTP Triggers</p>
</h1>
<div class='content'><p>HTTP triggers are the simplest type of trigger. They allow you to create functions that can be invoked via HTTP requests.</p>
</div><h2><p>Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZnVuY3Rpb25zID0gcmVxdWlyZSgnZmlyZWJhc2UtZnVuY3Rpb25zJyk7CgpleHBvcnRzLmhlbGxvV29ybGQgPSBmdW5jdGlvbnMuaHR0cHMub25SZXF1ZXN0KChyZXF1ZXN0LCByZXNwb25zZSkgPT4gewogIHJlc3BvbnNlLnNlbmQoIkhlbGxvIGZyb20gRmlyZWJhc2UhIik7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const functions = require('firebase-functions');

exports.helloWorld = functions.https.onRequest((request, response) =&gt; {
  response.send(&quot;Hello from Firebase!&quot;);
});</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><code>functions.https.onRequest</code>: This method sets up an HTTP trigger.</li>
<li><code>request</code>: The HTTP request object.</li>
<li><code>response</code>: The HTTP response object.</li>
</ul>
</div><h2><p>Exercise</p>
</h2>
<div class='content'><p>Create an HTTP-triggered function that returns the current server time.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZnVuY3Rpb25zID0gcmVxdWlyZSgnZmlyZWJhc2UtZnVuY3Rpb25zJyk7CgpleHBvcnRzLmdldFRpbWUgPSBmdW5jdGlvbnMuaHR0cHMub25SZXF1ZXN0KChyZXF1ZXN0LCByZXNwb25zZSkgPT4gewogIGNvbnN0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOwogIHJlc3BvbnNlLnNlbmQoYEN1cnJlbnQgc2VydmVyIHRpbWUgaXM6ICR7Y3VycmVudFRpbWV9YCk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const functions = require('firebase-functions');

exports.getTime = functions.https.onRequest((request, response) =&gt; {
  const currentTime = new Date().toISOString();
  response.send(`Current server time is: ${currentTime}`);
});</pre></div><div class='content'></div><h1><p>Database Triggers</p>
</h1>
<div class='content'><p>Database triggers respond to changes in the Firebase Realtime Database.</p>
</div><h2><p>Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZnVuY3Rpb25zID0gcmVxdWlyZSgnZmlyZWJhc2UtZnVuY3Rpb25zJyk7CgpleHBvcnRzLm9uVXNlckNyZWF0ZSA9IGZ1bmN0aW9ucy5kYXRhYmFzZS5yZWYoJy91c2Vycy97dXNlcklkfScpCiAgLm9uQ3JlYXRlKChzbmFwc2hvdCwgY29udGV4dCkgPT4gewogICAgY29uc3QgbmV3VXNlciA9IHNuYXBzaG90LnZhbCgpOwogICAgY29uc29sZS5sb2coJ05ldyB1c2VyIGNyZWF0ZWQ6JywgbmV3VXNlcik7CiAgICByZXR1cm4gbnVsbDsKICB9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const functions = require('firebase-functions');

exports.onUserCreate = functions.database.ref('/users/{userId}')
  .onCreate((snapshot, context) =&gt; {
    const newUser = snapshot.val();
    console.log('New user created:', newUser);
    return null;
  });</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><code>functions.database.ref('/users/{userId}')</code>: This method sets up a trigger for changes at the specified database path.</li>
<li><code>onCreate</code>: This event is triggered when a new child is added to the specified path.</li>
<li><code>snapshot</code>: Contains the data of the newly created child.</li>
<li><code>context</code>: Contains metadata about the event.</li>
</ul>
</div><h2><p>Exercise</p>
</h2>
<div class='content'><p>Create a database-triggered function that logs a message whenever a user is deleted.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZnVuY3Rpb25zID0gcmVxdWlyZSgnZmlyZWJhc2UtZnVuY3Rpb25zJyk7CgpleHBvcnRzLm9uVXNlckRlbGV0ZSA9IGZ1bmN0aW9ucy5kYXRhYmFzZS5yZWYoJy91c2Vycy97dXNlcklkfScpCiAgLm9uRGVsZXRlKChzbmFwc2hvdCwgY29udGV4dCkgPT4gewogICAgY29uc3QgZGVsZXRlZFVzZXIgPSBzbmFwc2hvdC52YWwoKTsKICAgIGNvbnNvbGUubG9nKCdVc2VyIGRlbGV0ZWQ6JywgZGVsZXRlZFVzZXIpOwogICAgcmV0dXJuIG51bGw7CiAgfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const functions = require('firebase-functions');

exports.onUserDelete = functions.database.ref('/users/{userId}')
  .onDelete((snapshot, context) =&gt; {
    const deletedUser = snapshot.val();
    console.log('User deleted:', deletedUser);
    return null;
  });</pre></div><div class='content'></div><h1><p>Firestore Triggers</p>
</h1>
<div class='content'><p>Firestore triggers respond to changes in Firestore documents.</p>
</div><h2><p>Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZnVuY3Rpb25zID0gcmVxdWlyZSgnZmlyZWJhc2UtZnVuY3Rpb25zJyk7CgpleHBvcnRzLm9uRG9jdW1lbnRDcmVhdGUgPSBmdW5jdGlvbnMuZmlyZXN0b3JlLmRvY3VtZW50KCcvdXNlcnMve3VzZXJJZH0nKQogIC5vbkNyZWF0ZSgoc25hcCwgY29udGV4dCkgPT4gewogICAgY29uc3QgbmV3VmFsdWUgPSBzbmFwLmRhdGEoKTsKICAgIGNvbnNvbGUubG9nKCdOZXcgZG9jdW1lbnQgY3JlYXRlZDonLCBuZXdWYWx1ZSk7CiAgICByZXR1cm4gbnVsbDsKICB9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const functions = require('firebase-functions');

exports.onDocumentCreate = functions.firestore.document('/users/{userId}')
  .onCreate((snap, context) =&gt; {
    const newValue = snap.data();
    console.log('New document created:', newValue);
    return null;
  });</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><code>functions.firestore.document('/users/{userId}')</code>: This method sets up a trigger for changes to the specified Firestore document.</li>
<li><code>onCreate</code>: This event is triggered when a new document is created.</li>
<li><code>snap</code>: Contains the data of the newly created document.</li>
<li><code>context</code>: Contains metadata about the event.</li>
</ul>
</div><h2><p>Exercise</p>
</h2>
<div class='content'><p>Create a Firestore-triggered function that logs a message whenever a document is updated.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZnVuY3Rpb25zID0gcmVxdWlyZSgnZmlyZWJhc2UtZnVuY3Rpb25zJyk7CgpleHBvcnRzLm9uRG9jdW1lbnRVcGRhdGUgPSBmdW5jdGlvbnMuZmlyZXN0b3JlLmRvY3VtZW50KCcvdXNlcnMve3VzZXJJZH0nKQogIC5vblVwZGF0ZSgoY2hhbmdlLCBjb250ZXh0KSA9PiB7CiAgICBjb25zdCBuZXdWYWx1ZSA9IGNoYW5nZS5hZnRlci5kYXRhKCk7CiAgICBjb25zdCBwcmV2aW91c1ZhbHVlID0gY2hhbmdlLmJlZm9yZS5kYXRhKCk7CiAgICBjb25zb2xlLmxvZygnRG9jdW1lbnQgdXBkYXRlZCBmcm9tJywgcHJldmlvdXNWYWx1ZSwgJ3RvJywgbmV3VmFsdWUpOwogICAgcmV0dXJuIG51bGw7CiAgfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const functions = require('firebase-functions');

exports.onDocumentUpdate = functions.firestore.document('/users/{userId}')
  .onUpdate((change, context) =&gt; {
    const newValue = change.after.data();
    const previousValue = change.before.data();
    console.log('Document updated from', previousValue, 'to', newValue);
    return null;
  });</pre></div><div class='content'></div><h1><p>Authentication Triggers</p>
</h1>
<div class='content'><p>Authentication triggers respond to user creation and deletion events.</p>
</div><h2><p>Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZnVuY3Rpb25zID0gcmVxdWlyZSgnZmlyZWJhc2UtZnVuY3Rpb25zJyk7CgpleHBvcnRzLm9uVXNlckNyZWF0ZSA9IGZ1bmN0aW9ucy5hdXRoLnVzZXIoKS5vbkNyZWF0ZSgodXNlcikgPT4gewogIGNvbnNvbGUubG9nKCdOZXcgdXNlciBjcmVhdGVkOicsIHVzZXIuZW1haWwpOwogIHJldHVybiBudWxsOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const functions = require('firebase-functions');

exports.onUserCreate = functions.auth.user().onCreate((user) =&gt; {
  console.log('New user created:', user.email);
  return null;
});</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><code>functions.auth.user().onCreate</code>: This method sets up a trigger for user creation events.</li>
<li><code>user</code>: Contains the data of the newly created user.</li>
</ul>
</div><h2><p>Exercise</p>
</h2>
<div class='content'><p>Create an authentication-triggered function that logs a message whenever a user is deleted.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZnVuY3Rpb25zID0gcmVxdWlyZSgnZmlyZWJhc2UtZnVuY3Rpb25zJyk7CgpleHBvcnRzLm9uVXNlckRlbGV0ZSA9IGZ1bmN0aW9ucy5hdXRoLnVzZXIoKS5vbkRlbGV0ZSgodXNlcikgPT4gewogIGNvbnNvbGUubG9nKCdVc2VyIGRlbGV0ZWQ6JywgdXNlci5lbWFpbCk7CiAgcmV0dXJuIG51bGw7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const functions = require('firebase-functions');

exports.onUserDelete = functions.auth.user().onDelete((user) =&gt; {
  console.log('User deleted:', user.email);
  return null;
});</pre></div><div class='content'></div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the various types of triggers available in Firebase Functions, including HTTP, Database, Firestore, and Authentication triggers. We provided examples and exercises to help you understand how to set up and use these triggers effectively. Understanding how to trigger functions is essential for building dynamic and responsive applications with Firebase. In the next section, we will delve into deploying these functions to Firebase.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='08-03-deploying-functions' title="Deploying Functions">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='09-01-introduction-to-performance-monitoring' title="Introduction to Performance Monitoring">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
