<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realtime Database Security Rules</title>

    <link rel="alternate" href="https://campusempresa.com/mod/firebase/realtime-database-security-rules" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/firebase/realtime-database-security-rules" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/firebase/realtime-database-security-rules" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/firebase/realtime-database-security-rules" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/firebase/realtime-database-security-rules" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='crud-operations-realtime-database'>&#x25C4;CRUD Operations in Realtime Database</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Realtime Database Security Rules</a>
	</div>
	<div class='col-4 text-end'>
					<a href='offline-capabilities'>Offline Capabilities &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Realtime Database Security Rules</h1>
<div class='content'><p>Firebase Realtime Database Security Rules are a powerful way to control access to your database. They allow you to define how your data should be structured, how it should be indexed, and when data can be read from or written to.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Authentication</strong>: Ensuring that users are who they say they are.</li>
<li><strong>Authorization</strong>: Determining what authenticated users are allowed to do.</li>
<li><strong>Validation</strong>: Ensuring that data written to the database is correct and follows a specified format.</li>
<li><strong>Indexing</strong>: Optimizing data retrieval by specifying how data should be indexed.</li>
</ul>
</div><h1>Basic Security Rules</h1>
<h2>Setting Up Basic Rules</h2>
<div class='content'><p>To start with, you need to understand the basic structure of security rules. Here’s a simple example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJydWxlcyI6IHsKICAgICIucmVhZCI6ICJhdXRoICE9IG51bGwiLAogICAgIi53cml0ZSI6ICJhdXRoICE9IG51bGwiCiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;rules&quot;: {
    &quot;.read&quot;: &quot;auth != null&quot;,
    &quot;.write&quot;: &quot;auth != null&quot;
  }
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>.read</code>: Specifies who can read data from the database.</li>
<li><code>.write</code>: Specifies who can write data to the database.</li>
<li><code>auth != null</code>: Ensures that only authenticated users can read or write data.</li>
</ul>
</li>
</ul>
</div><h2>Allowing Public Read Access</h2>
<div class='content'><p>Sometimes, you might want to allow public read access but restrict write access to authenticated users:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJydWxlcyI6IHsKICAgICIucmVhZCI6IHRydWUsCiAgICAiLndyaXRlIjogImF1dGggIT0gbnVsbCIKICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;rules&quot;: {
    &quot;.read&quot;: true,
    &quot;.write&quot;: &quot;auth != null&quot;
  }
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>.read: true</code>: Allows anyone to read data.</li>
<li><code>.write: auth != null</code>: Only authenticated users can write data.</li>
</ul>
</li>
</ul>
</div><h1>Intermediate Security Rules</h1>
<h2>Structuring Rules for Specific Paths</h2>
<div class='content'><p>You can define rules for specific paths in your database. For example, if you have a <code>users</code> node:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJydWxlcyI6IHsKICAgICJ1c2VycyI6IHsKICAgICAgIiR1aWQiOiB7CiAgICAgICAgIi5yZWFkIjogIiR1aWQgPT09IGF1dGgudWlkIiwKICAgICAgICAiLndyaXRlIjogIiR1aWQgPT09IGF1dGgudWlkIgogICAgICB9CiAgICB9CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;rules&quot;: {
    &quot;users&quot;: {
      &quot;$uid&quot;: {
        &quot;.read&quot;: &quot;$uid === auth.uid&quot;,
        &quot;.write&quot;: &quot;$uid === auth.uid&quot;
      }
    }
  }
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>$uid</code>: A wildcard that represents a user ID.</li>
<li><code>$uid === auth.uid</code>: Ensures that users can only read and write their own data.</li>
</ul>
</li>
</ul>
</div><h2>Validating Data</h2>
<div class='content'><p>You can also validate data to ensure it meets certain criteria before being written to the database:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJydWxlcyI6IHsKICAgICJ1c2VycyI6IHsKICAgICAgIiR1aWQiOiB7CiAgICAgICAgIi53cml0ZSI6ICIkdWlkID09PSBhdXRoLnVpZCIsCiAgICAgICAgIi52YWxpZGF0ZSI6ICJuZXdEYXRhLmhhc0NoaWxkcmVuKFsnbmFtZScsICdlbWFpbCddKSAmJiBuZXdEYXRhLmNoaWxkKCdlbWFpbCcpLmlzU3RyaW5nKCkiCiAgICAgIH0KICAgIH0KICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;rules&quot;: {
    &quot;users&quot;: {
      &quot;$uid&quot;: {
        &quot;.write&quot;: &quot;$uid === auth.uid&quot;,
        &quot;.validate&quot;: &quot;newData.hasChildren(['name', 'email']) &amp;&amp; newData.child('email').isString()&quot;
      }
    }
  }
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>newData.hasChildren(['name', 'email'])</code>: Ensures that the data being written has both <code>name</code> and <code>email</code> fields.</li>
<li><code>newData.child('email').isString()</code>: Ensures that the <code>email</code> field is a string.</li>
</ul>
</li>
</ul>
</div><h1>Advanced Security Rules</h1>
<h2>Using Custom Functions</h2>
<div class='content'><p>For more complex logic, you can define custom functions within your security rules:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJydWxlcyI6IHsKICAgICJ1c2VycyI6IHsKICAgICAgIiR1aWQiOiB7CiAgICAgICAgIi53cml0ZSI6ICIkdWlkID09PSBhdXRoLnVpZCAmJiBpc1ZhbGlkRW1haWwobmV3RGF0YS5jaGlsZCgnZW1haWwnKS52YWwoKSkiCiAgICAgIH0KICAgIH0sCiAgICAiZnVuY3Rpb25zIjogewogICAgICAiaXNWYWxpZEVtYWlsIjogewogICAgICAgICJydWxlIjogIm5ld0RhdGEuY2hpbGQoJ2VtYWlsJykudmFsKCkubWF0Y2hlcygvXlthLXpBLVowLTkuXyUrLV0rQFthLXpBLVowLTkuLV0rXFwuW2EtekEtWl17Miw0fSQvKSIKICAgICAgfQogICAgfQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;rules&quot;: {
    &quot;users&quot;: {
      &quot;$uid&quot;: {
        &quot;.write&quot;: &quot;$uid === auth.uid &amp;&amp; isValidEmail(newData.child('email').val())&quot;
      }
    },
    &quot;functions&quot;: {
      &quot;isValidEmail&quot;: {
        &quot;rule&quot;: &quot;newData.child('email').val().matches(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/)&quot;
      }
    }
  }
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>isValidEmail</code>: A custom function that checks if the email format is valid using a regular expression.</li>
</ul>
</li>
</ul>
</div><h2>Indexing Data</h2>
<div class='content'><p>To optimize queries, you can specify how data should be indexed:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJydWxlcyI6IHsKICAgICJ1c2VycyI6IHsKICAgICAgIi5pbmRleE9uIjogWyJlbWFpbCJdCiAgICB9CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;rules&quot;: {
    &quot;users&quot;: {
      &quot;.indexOn&quot;: [&quot;email&quot;]
    }
  }
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>.indexOn</code>: Specifies the fields that should be indexed to improve query performance.</li>
</ul>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Firebase Realtime Database Security Rules are essential for maintaining the integrity and security of your data. By understanding and implementing these rules, you can ensure that your data is both secure and efficiently accessible. Start with basic rules to control read and write access, then move on to more advanced concepts like data validation, custom functions, and indexing to optimize and secure your database further.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='crud-operations-realtime-database'>&#x25C4;CRUD Operations in Realtime Database</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Realtime Database Security Rules</a>
	</div>
	<div class='col-4 text-end'>
					<a href='offline-capabilities'>Offline Capabilities &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
