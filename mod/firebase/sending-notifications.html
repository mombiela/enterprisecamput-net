<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sending Notifications</title>

    <link rel="alternate" href="https://campusempresa.com/mod/firebase/sending-notifications" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/firebase/sending-notifications" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/firebase/sending-notifications" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/firebase/sending-notifications" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/firebase/sending-notifications" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='setting-up-cloud-messaging'>&#x25C4;Setting Up Cloud Messaging</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Sending Notifications</a>
	</div>
	<div class='col-4 text-end'>
					<a href='handling-notifications'>Handling Notifications &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Firebase Notifications</h1>
<div class='content'><p>Firebase Notifications is a service that allows you to send notifications to your users across different platforms such as Android, iOS, and web. It leverages Firebase Cloud Messaging (FCM) to deliver messages reliably and efficiently.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Firebase Cloud Messaging (FCM):</strong> A cross-platform messaging solution that lets you reliably send messages at no cost.</li>
<li><strong>Notification Messages:</strong> Messages that are displayed to the user by the system.</li>
<li><strong>Data Messages:</strong> Messages that are handled by the client app.</li>
</ul>
</div><h1>Setting Up Firebase Notifications</h1>
<div class='content'><p>Before you can send notifications, you need to set up Firebase in your project.</p>
</div><h2>Steps to Set Up Firebase</h2>
<div class='content'><ol>
<li>
<p><strong>Create a Firebase Project:</strong></p>
<ul>
<li>Go to the <a href="https://console.firebase.google.com/">Firebase Console</a>.</li>
<li>Click on &quot;Add project&quot; and follow the setup wizard.</li>
</ul>
</li>
<li>
<p><strong>Add Firebase to Your App:</strong></p>
<ul>
<li>For Android, download the <code>google-services.json</code> file and place it in your app's <code>app</code> directory.</li>
<li>For iOS, download the <code>GoogleService-Info.plist</code> file and add it to your Xcode project.</li>
</ul>
</li>
<li>
<p><strong>Add Firebase SDK:</strong></p>
<ul>
<li>For Android, add the following dependencies in your <code>build.gradle</code> file:
<pre><code class="language-gradle">implementation 'com.google.firebase:firebase-messaging:23.0.0'
</code></pre>
</li>
<li>For iOS, add the following to your <code>Podfile</code>:
<pre><code class="language-ruby">pod 'Firebase/Messaging'
</code></pre>
</li>
</ul>
</li>
</ol>
</div><h1>Sending Notifications</h1>
<div class='content'><p>There are multiple ways to send notifications using Firebase.</p>
</div><h2>Using Firebase Console</h2>
<div class='content'><ol>
<li>
<p><strong>Navigate to the Firebase Console:</strong></p>
<ul>
<li>Select your project.</li>
<li>Go to the &quot;Cloud Messaging&quot; section.</li>
</ul>
</li>
<li>
<p><strong>Compose a Message:</strong></p>
<ul>
<li>Click on &quot;Send your first message&quot;.</li>
<li>Enter the notification title and text.</li>
<li>Select the target (e.g., app, topic, or user segment).</li>
</ul>
</li>
<li>
<p><strong>Send the Message:</strong></p>
<ul>
<li>Click on &quot;Send&quot;.</li>
</ul>
</li>
</ol>
</div><h2>Using Firebase Admin SDK</h2>
<div class='content'><p>You can also send notifications programmatically using the Firebase Admin SDK.</p>
<h4>Example: Sending a Notification from a Node.js Server</h4>
<ol>
<li>
<p><strong>Install the Firebase Admin SDK:</strong></p>
<pre><code class="language-bash">npm install firebase-admin --save
</code></pre>
</li>
<li>
<p><strong>Initialize the SDK:</strong></p>
<pre><code class="language-javascript">const admin = require('firebase-admin');
const serviceAccount = require('path/to/serviceAccountKey.json');

admin.initializeApp({
  credential: admin.credential.cert(serviceAccount)
});
</code></pre>
</li>
<li>
<p><strong>Send a Notification:</strong></p>
<pre><code class="language-javascript">const message = {
  notification: {
    title: 'Hello World',
    body: 'This is a Firebase notification!'
  },
  token: 'user-device-token'
};

admin.messaging().send(message)
  .then((response) =&gt; {
    console.log('Successfully sent message:', response);
  })
  .catch((error) =&gt; {
    console.log('Error sending message:', error);
  });
</code></pre>
</li>
</ol>
</div><h1>Handling Notifications in the App</h1>
<div class='content'><p>To handle notifications in your app, you need to set up listeners.</p>
</div><h2>Android</h2>
<div class='content'><ol>
<li>
<p><strong>Create a Service to Handle Messages:</strong></p>
<pre><code class="language-java">public class MyFirebaseMessagingService extends FirebaseMessagingService {
  @Override
  public void onMessageReceived(RemoteMessage remoteMessage) {
    // Handle the message
    if (remoteMessage.getNotification() != null) {
      showNotification(remoteMessage.getNotification().getTitle(), remoteMessage.getNotification().getBody());
    }
  }

  private void showNotification(String title, String body) {
    NotificationCompat.Builder builder = new NotificationCompat.Builder(this, &quot;CHANNEL_ID&quot;)
        .setSmallIcon(R.drawable.notification_icon)
        .setContentTitle(title)
        .setContentText(body)
        .setPriority(NotificationCompat.PRIORITY_DEFAULT);

    NotificationManagerCompat notificationManager = NotificationManagerCompat.from(this);
    notificationManager.notify(0, builder.build());
  }
}
</code></pre>
</li>
<li>
<p><strong>Register the Service in <code>AndroidManifest.xml</code>:</strong></p>
<pre><code class="language-xml">&lt;service android:name=&quot;.MyFirebaseMessagingService&quot;&gt;
  &lt;intent-filter&gt;
    &lt;action android:name=&quot;com.google.firebase.MESSAGING_EVENT&quot;/&gt;
  &lt;/intent-filter&gt;
&lt;/service&gt;
</code></pre>
</li>
</ol>
</div><h2>iOS</h2>
<div class='content'><ol>
<li>
<p><strong>Request Notification Permissions:</strong></p>
<pre><code class="language-swift">import UserNotifications

UNUserNotificationCenter.current().requestAuthorization(options: [.alert, .sound, .badge]) { granted, error in
  // Handle permission granted or error
}
</code></pre>
</li>
<li>
<p><strong>Handle Incoming Notifications:</strong></p>
<pre><code class="language-swift">import Firebase

@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate, UNUserNotificationCenterDelegate, MessagingDelegate {
  func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool {
    FirebaseApp.configure()
    UNUserNotificationCenter.current().delegate = self
    Messaging.messaging().delegate = self
    return true
  }

  func messaging(_ messaging: Messaging, didReceive remoteMessage: MessagingRemoteMessage) {
    // Handle the message
  }

  func userNotificationCenter(_ center: UNUserNotificationCenter, willPresent notification: UNNotification, withCompletionHandler completionHandler: @escaping (UNNotificationPresentationOptions) -&gt; Void) {
    completionHandler([.alert, .sound, .badge])
  }
}
</code></pre>
</li>
</ol>
</div><h1>Advanced Topics</h1>
<h2>Sending Data Messages</h2>
<div class='content'><p>Data messages allow you to send custom key-value pairs to your app.</p>
<h4>Example: Sending a Data Message</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbWVzc2FnZSA9IHsKICBkYXRhOiB7CiAgICBrZXkxOiAndmFsdWUxJywKICAgIGtleTI6ICd2YWx1ZTInCiAgfSwKICB0b2tlbjogJ3VzZXItZGV2aWNlLXRva2VuJwp9OwoKYWRtaW4ubWVzc2FnaW5nKCkuc2VuZChtZXNzYWdlKQogIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBzZW50IG1lc3NhZ2U6JywgcmVzcG9uc2UpOwogIH0pCiAgLmNhdGNoKChlcnJvcikgPT4gewogICAgY29uc29sZS5sb2coJ0Vycm9yIHNlbmRpbmcgbWVzc2FnZTonLCBlcnJvcik7CiAgfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const message = {
  data: {
    key1: 'value1',
    key2: 'value2'
  },
  token: 'user-device-token'
};

admin.messaging().send(message)
  .then((response) =&gt; {
    console.log('Successfully sent message:', response);
  })
  .catch((error) =&gt; {
    console.log('Error sending message:', error);
  });</pre></div><div class='content'></div><h2>Topic Messaging</h2>
<div class='content'><p>Topic messaging allows you to send messages to multiple devices that have subscribed to a particular topic.</p>
<h4>Example: Subscribing to a Topic</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgdG9waWMgPSAnbmV3cyc7CgphZG1pbi5tZXNzYWdpbmcoKS5zdWJzY3JpYmVUb1RvcGljKFsndXNlci1kZXZpY2UtdG9rZW4nXSwgdG9waWMpCiAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IHN1YnNjcmliZWQgdG8gdG9waWM6JywgcmVzcG9uc2UpOwogIH0pCiAgLmNhdGNoKChlcnJvcikgPT4gewogICAgY29uc29sZS5sb2coJ0Vycm9yIHN1YnNjcmliaW5nIHRvIHRvcGljOicsIGVycm9yKTsKICB9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const topic = 'news';

admin.messaging().subscribeToTopic(['user-device-token'], topic)
  .then((response) =&gt; {
    console.log('Successfully subscribed to topic:', response);
  })
  .catch((error) =&gt; {
    console.log('Error subscribing to topic:', error);
  });</pre></div><div class='content'><h4>Example: Sending a Message to a Topic</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgbWVzc2FnZSA9IHsKICBub3RpZmljYXRpb246IHsKICAgIHRpdGxlOiAnQnJlYWtpbmcgTmV3cycsCiAgICBib2R5OiAnQ2hlY2sgb3V0IHRoZSBsYXRlc3QgbmV3cyEnCiAgfSwKICB0b3BpYzogJ25ld3MnCn07CgphZG1pbi5tZXNzYWdpbmcoKS5zZW5kKG1lc3NhZ2UpCiAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICBjb25zb2xlLmxvZygnU3VjY2Vzc2Z1bGx5IHNlbnQgbWVzc2FnZTonLCByZXNwb25zZSk7CiAgfSkKICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICBjb25zb2xlLmxvZygnRXJyb3Igc2VuZGluZyBtZXNzYWdlOicsIGVycm9yKTsKICB9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const message = {
  notification: {
    title: 'Breaking News',
    body: 'Check out the latest news!'
  },
  topic: 'news'
};

admin.messaging().send(message)
  .then((response) =&gt; {
    console.log('Successfully sent message:', response);
  })
  .catch((error) =&gt; {
    console.log('Error sending message:', error);
  });</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Firebase Notifications provide a powerful and flexible way to engage with your users. Whether you are sending simple notification messages or complex data messages, Firebase makes it easy to deliver your content reliably. By understanding the basics and exploring advanced topics like data messages and topic messaging, you can create a robust notification system for your app.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='setting-up-cloud-messaging'>&#x25C4;Setting Up Cloud Messaging</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Sending Notifications</a>
	</div>
	<div class='col-4 text-end'>
					<a href='handling-notifications'>Handling Notifications &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
