<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Storage Security Rules</title>

    <link rel="alternate" href="https://campusempresa.com/mod/firebase/storage-security-rules" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/firebase/storage-security-rules" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/firebase/storage-security-rules" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/firebase/storage-security-rules" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/firebase/storage-security-rules" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='managing-files'>&#x25C4;Managing Files</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Storage Security Rules</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-cloud-functions'>Introduction to Cloud Functions &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Firebase Storage Security Rules are essential for protecting your data and ensuring that only authorized users can access or modify it. This topic will guide you from the basics to advanced concepts of Firebase Storage Security Rules.</p>
</div><h1>Introduction to Firebase Storage Security Rules</h1>
<div class='content'><p>Firebase Storage Security Rules allow you to control access to your stored files. They are written in a custom language that is similar to JavaScript and are evaluated every time a file is read or written.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Rules Language</strong>: A custom language used to define security rules.</li>
<li><strong>Authentication</strong>: Ensuring that users are who they claim to be.</li>
<li><strong>Authorization</strong>: Determining what authenticated users are allowed to do.</li>
<li><strong>Conditions</strong>: Logical expressions that evaluate to true or false to enforce rules.</li>
</ul>
</div><h1>Basic Rules</h1>
<div class='content'></div><h2>Default Rules</h2>
<div class='content'><p>When you first set up Firebase Storage, it comes with default rules that allow read and write access to authenticated users.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmljZSBmaXJlYmFzZS5zdG9yYWdlIHsKICBtYXRjaCAvYi97YnVja2V0fS9vIHsKICAgIG1hdGNoIC97YWxsUGF0aHM9Kip9IHsKICAgICAgYWxsb3cgcmVhZCwgd3JpdGU6IGlmIHJlcXVlc3QuYXV0aCAhPSBudWxsOwogICAgfQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>service firebase.storage {
  match /b/{bucket}/o {
    match /{allPaths=**} {
      allow read, write: if request.auth != null;
    }
  }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>service firebase.storage</code>: Defines that these rules apply to Firebase Storage.</li>
<li><code>match /b/{bucket}/o</code>: Matches all files in the storage bucket.</li>
<li><code>match /{allPaths=**}</code>: Matches all paths within the bucket.</li>
<li><code>allow read, write: if request.auth != null;</code>: Allows read and write access if the user is authenticated.</li>
</ul>
</div><h1>Intermediate Rules</h1>
<div class='content'></div><h2>Restricting Access to Specific Paths</h2>
<div class='content'><p>You can restrict access to specific paths within your storage bucket.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmljZSBmaXJlYmFzZS5zdG9yYWdlIHsKICBtYXRjaCAvYi97YnVja2V0fS9vIHsKICAgIG1hdGNoIC9wdWJsaWMve2FsbFBhdGhzPSoqfSB7CiAgICAgIGFsbG93IHJlYWQ7CiAgICB9CiAgICBtYXRjaCAvcHJpdmF0ZS97dXNlcklkfS97YWxsUGF0aHM9Kip9IHsKICAgICAgYWxsb3cgcmVhZCwgd3JpdGU6IGlmIHJlcXVlc3QuYXV0aCAhPSBudWxsICYmIHJlcXVlc3QuYXV0aC51aWQgPT0gdXNlcklkOwogICAgfQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>service firebase.storage {
  match /b/{bucket}/o {
    match /public/{allPaths=**} {
      allow read;
    }
    match /private/{userId}/{allPaths=**} {
      allow read, write: if request.auth != null &amp;&amp; request.auth.uid == userId;
    }
  }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>match /public/{allPaths=**}</code>: Allows read access to all files in the <code>public</code> folder.</li>
<li><code>match /private/{userId}/{allPaths=**}</code>: Allows read and write access to files in the <code>private</code> folder only if the user is authenticated and their user ID matches the <code>userId</code> in the path.</li>
</ul>
</div><h1>Advanced Rules</h1>
<div class='content'></div><h2>Custom Conditions</h2>
<div class='content'><p>You can create custom conditions to enforce more complex rules.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmljZSBmaXJlYmFzZS5zdG9yYWdlIHsKICBtYXRjaCAvYi97YnVja2V0fS9vIHsKICAgIG1hdGNoIC97YWxsUGF0aHM9Kip9IHsKICAgICAgYWxsb3cgcmVhZDogaWYgaXNVc2VyU2lnbmVkSW4oKSAmJiBpc0VtYWlsVmVyaWZpZWQoKTsKICAgICAgYWxsb3cgd3JpdGU6IGlmIGlzVXNlclNpZ25lZEluKCkgJiYgaXNFbWFpbFZlcmlmaWVkKCkgJiYgaXNGaWxlU2l6ZVZhbGlkKCk7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBpc1VzZXJTaWduZWRJbigpIHsKICByZXR1cm4gcmVxdWVzdC5hdXRoICE9IG51bGw7Cn0KCmZ1bmN0aW9uIGlzRW1haWxWZXJpZmllZCgpIHsKICByZXR1cm4gcmVxdWVzdC5hdXRoLnRva2VuLmVtYWlsX3ZlcmlmaWVkID09IHRydWU7Cn0KCmZ1bmN0aW9uIGlzRmlsZVNpemVWYWxpZCgpIHsKICByZXR1cm4gcmVxdWVzdC5yZXNvdXJjZS5zaXplIDwgNSAqIDEwMjQgKiAxMDI0OyAvLyA1TUIKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>service firebase.storage {
  match /b/{bucket}/o {
    match /{allPaths=**} {
      allow read: if isUserSignedIn() &amp;&amp; isEmailVerified();
      allow write: if isUserSignedIn() &amp;&amp; isEmailVerified() &amp;&amp; isFileSizeValid();
    }
  }
}

function isUserSignedIn() {
  return request.auth != null;
}

function isEmailVerified() {
  return request.auth.token.email_verified == true;
}

function isFileSizeValid() {
  return request.resource.size &lt; 5 * 1024 * 1024; // 5MB
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>isUserSignedIn()</code>: Checks if the user is authenticated.</li>
<li><code>isEmailVerified()</code>: Checks if the user's email is verified.</li>
<li><code>isFileSizeValid()</code>: Checks if the file size is less than 5MB.</li>
<li>The <code>allow read</code> and <code>allow write</code> rules use these functions to enforce more complex conditions.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Firebase Storage Security Rules are a powerful tool for controlling access to your data. By understanding and applying these rules, you can ensure that your data is secure and only accessible to authorized users. Start with the basic rules and gradually move to more complex conditions as your application's security needs grow.</p>
</div><h2>Summary</h2>
<div class='content'><ul>
<li><strong>Basic Rules</strong>: Allow or deny access based on authentication.</li>
<li><strong>Intermediate Rules</strong>: Restrict access to specific paths and users.</li>
<li><strong>Advanced Rules</strong>: Use custom conditions for more complex security requirements.</li>
</ul>
<p>By mastering Firebase Storage Security Rules, you can protect your data and provide a secure experience for your users.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='managing-files'>&#x25C4;Managing Files</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Storage Security Rules</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-cloud-functions'>Introduction to Cloud Functions &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
