<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Security Rules</title>

    <link rel="alternate" href="https://campusempresa.com/mod/firebase/04-05-security-rules" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/firebase/04-05-security-rules" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/firebase/04-05-security-rules" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>var DEVELOP = window.location.href.indexOf("localhost")!=-1 && true;</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/firebase/04-05-security-rules" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/firebase/04-05-security-rules" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>
		<!-- <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
					<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Course Content
	</a>

			</div>
		</div>
	</div>
</div>
 -->
 
<div class="top-bar container-fluid">
	<div class="container-xxl">
		<nav class="navbar navbar-expand-md p-0">
			<div class="container-fluid">
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				
				<div class="collapse navbar-collapse" id="navbarNav">
					<div class="navbar-nav me-auto">
							<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Course Content
	</a>

					</div>
				</div>			
							</div>
		</nav>
	</div>
</div>				<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-04-advanced-queries' title="Advanced Queries">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<h2 style="text-decoration:underline">Security Rules</h2>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-01-introduction-to-firebase-storage' title="Introduction to Firebase Storage">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will delve into the security rules for Cloud Firestore. Security rules are essential for protecting your data and ensuring that only authorized users can access or modify it. Firebase provides a powerful and flexible rules language that allows you to define who has access to what data and under what conditions.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Security Rules Language</strong>: Firebase uses a custom language to define security rules. This language allows you to specify conditions under which data can be read or written.</li>
<li><strong>Authentication</strong>: Security rules often rely on Firebase Authentication to identify users and enforce access controls.</li>
<li><strong>Granularity</strong>: Rules can be applied at various levels of your database, from the entire database down to individual documents.</li>
<li><strong>Conditions</strong>: Rules can include conditions based on the data being accessed, the user's authentication status, and other factors.</li>
</ol>
</div><h1>Basic Structure of Security Rules</h1>
<div class='content'><p>Security rules are defined in a JSON-like syntax. Here is a basic example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmljZSBjbG91ZC5maXJlc3RvcmUgewogIG1hdGNoIC9kYXRhYmFzZXMve2RhdGFiYXNlfS9kb2N1bWVudHMgewogICAgbWF0Y2ggL3tkb2N1bWVudD0qKn0gewogICAgICBhbGxvdyByZWFkLCB3cml0ZTogaWYgdHJ1ZTsKICAgIH0KICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}</pre></div><div class='content'></div><h2>Explanation:</h2>
<div class='content'><ul>
<li><code>service cloud.firestore</code>: Specifies that these rules apply to Cloud Firestore.</li>
<li><code>match /databases/{database}/documents</code>: Applies the rules to all documents in the database.</li>
<li><code>match /{document=**}</code>: Applies the rules to all documents and subcollections.</li>
<li><code>allow read, write: if true;</code>: Allows all read and write operations unconditionally (not recommended for production).</li>
</ul>
</div><h1>Practical Example: User-Based Access Control</h1>
<div class='content'><p>Let's create a more practical example where users can only read and write their own data.</p>
</div><h2>Example Rule:</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmljZSBjbG91ZC5maXJlc3RvcmUgewogIG1hdGNoIC9kYXRhYmFzZXMve2RhdGFiYXNlfS9kb2N1bWVudHMgewogICAgbWF0Y2ggL3VzZXJzL3t1c2VySWR9IHsKICAgICAgYWxsb3cgcmVhZCwgd3JpdGU6IGlmIHJlcXVlc3QuYXV0aCAhPSBudWxsICYmIHJlcXVlc3QuYXV0aC51aWQgPT0gdXNlcklkOwogICAgfQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId} {
      allow read, write: if request.auth != null &amp;&amp; request.auth.uid == userId;
    }
  }
}</pre></div><div class='content'></div><h2>Explanation:</h2>
<div class='content'><ul>
<li><code>match /users/{userId}</code>: Applies the rules to documents in the <code>users</code> collection.</li>
<li><code>allow read, write: if request.auth != null &amp;&amp; request.auth.uid == userId;</code>: Allows read and write operations only if the user is authenticated and their UID matches the <code>userId</code> in the document path.</li>
</ul>
</div><h1>Advanced Conditions</h1>
<div class='content'><p>You can create more complex conditions using logical operators and functions.</p>
</div><h2>Example: Conditional Write Access</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmljZSBjbG91ZC5maXJlc3RvcmUgewogIG1hdGNoIC9kYXRhYmFzZXMve2RhdGFiYXNlfS9kb2N1bWVudHMgewogICAgbWF0Y2ggL3Bvc3RzL3twb3N0SWR9IHsKICAgICAgYWxsb3cgcmVhZDogaWYgdHJ1ZTsKICAgICAgYWxsb3cgd3JpdGU6IGlmIHJlcXVlc3QuYXV0aCAhPSBudWxsICYmIHJlcXVlc3QuYXV0aC51aWQgPT0gcmVzb3VyY2UuZGF0YS5hdXRob3JJZDsKICAgIH0KICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>service cloud.firestore {
  match /databases/{database}/documents {
    match /posts/{postId} {
      allow read: if true;
      allow write: if request.auth != null &amp;&amp; request.auth.uid == resource.data.authorId;
    }
  }
}</pre></div><div class='content'></div><h2>Explanation:</h2>
<div class='content'><ul>
<li><code>match /posts/{postId}</code>: Applies the rules to documents in the <code>posts</code> collection.</li>
<li><code>allow read: if true;</code>: Allows all read operations.</li>
<li><code>allow write: if request.auth != null &amp;&amp; request.auth.uid == resource.data.authorId;</code>: Allows write operations only if the user is authenticated and their UID matches the <code>authorId</code> field in the document.</li>
</ul>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Task:</h2>
<div class='content'><p>Create security rules for a <code>messages</code> collection where:</p>
<ol>
<li>Any authenticated user can read messages.</li>
<li>Only the user who created a message can edit or delete it.</li>
</ol>
</div><h2>Solution:</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmljZSBjbG91ZC5maXJlc3RvcmUgewogIG1hdGNoIC9kYXRhYmFzZXMve2RhdGFiYXNlfS9kb2N1bWVudHMgewogICAgbWF0Y2ggL21lc3NhZ2VzL3ttZXNzYWdlSWR9IHsKICAgICAgYWxsb3cgcmVhZDogaWYgcmVxdWVzdC5hdXRoICE9IG51bGw7CiAgICAgIGFsbG93IHdyaXRlOiBpZiByZXF1ZXN0LmF1dGggIT0gbnVsbCAmJiByZXF1ZXN0LmF1dGgudWlkID09IHJlc291cmNlLmRhdGEudXNlcklkOwogICAgfQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>service cloud.firestore {
  match /databases/{database}/documents {
    match /messages/{messageId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null &amp;&amp; request.auth.uid == resource.data.userId;
    }
  }
}</pre></div><div class='content'></div><h2>Explanation:</h2>
<div class='content'><ul>
<li><code>allow read: if request.auth != null;</code>: Allows read operations for authenticated users.</li>
<li><code>allow write: if request.auth != null &amp;&amp; request.auth.uid == resource.data.userId;</code>: Allows write operations only if the user is authenticated and their UID matches the <code>userId</code> field in the document.</li>
</ul>
</div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Overly Permissive Rules</strong>: Avoid using <code>if true</code> in production as it allows unrestricted access.</li>
<li><strong>Testing Rules</strong>: Use the Firebase Emulator Suite to test your security rules locally before deploying them.</li>
<li><strong>Granularity</strong>: Apply rules at the most specific level possible to minimize the risk of unintended access.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered the basics of Firebase security rules, including their structure, practical examples, and common mistakes. Security rules are a powerful tool for protecting your data and ensuring that only authorized users can access or modify it. In the next module, we will explore Firebase Storage and how to manage files securely.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-04-advanced-queries' title="Advanced Queries">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-01-introduction-to-firebase-storage' title="Introduction to Firebase Storage">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
				<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
	     crossorigin="anonymous"></script>
	<!-- enterprise_campus -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-0611338592562725"
	     data-ad-slot="6914733106"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
	     (adsbygoogle = window.adsbygoogle || []).push({});
	</script>
			
	<div class="container mt-2 d-none d-md-block index">
		<h1>Firebase Course</h1>
<h2>Module 1: Introduction to Firebase</h2>
<ul>
<li><a href="01-01-what-is-firebase">What is Firebase?</a></li>
<li><a href="01-02-setting-up-firebase">Setting Up Firebase</a></li>
<li><a href="01-03-firebase-console-overview">Firebase Console Overview</a></li>
</ul>
<h2>Module 2: Firebase Authentication</h2>
<ul>
<li><a href="02-01-introduction-to-firebase-authentication">Introduction to Firebase Authentication</a></li>
<li><a href="02-02-email-and-password-authentication">Email and Password Authentication</a></li>
<li><a href="02-03-social-media-authentication">Social Media Authentication</a></li>
<li><a href="02-04-managing-users">Managing Users</a></li>
</ul>
<h2>Module 3: Firebase Realtime Database</h2>
<ul>
<li><a href="03-01-introduction-to-realtime-database">Introduction to Realtime Database</a></li>
<li><a href="03-02-reading-and-writing-data">Reading and Writing Data</a></li>
<li><a href="03-03-data-structure-and-security-rules">Data Structure and Security Rules</a></li>
<li><a href="03-04-offline-capabilities">Offline Capabilities</a></li>
</ul>
<h2>Module 4: Cloud Firestore</h2>
<ul>
<li><a href="04-01-introduction-to-cloud-firestore">Introduction to Cloud Firestore</a></li>
<li><a href="04-02-firestore-data-model">Firestore Data Model</a></li>
<li><a href="04-03-crud-operations">CRUD Operations</a></li>
<li><a href="04-04-advanced-queries">Advanced Queries</a></li>
<li><a href="04-05-security-rules">Security Rules</a></li>
</ul>
<h2>Module 5: Firebase Storage</h2>
<ul>
<li><a href="05-01-introduction-to-firebase-storage">Introduction to Firebase Storage</a></li>
<li><a href="05-02-uploading-files">Uploading Files</a></li>
<li><a href="05-03-downloading-files">Downloading Files</a></li>
<li><a href="05-04-file-metadata-and-security">File Metadata and Security</a></li>
</ul>
<h2>Module 6: Firebase Cloud Messaging</h2>
<ul>
<li><a href="06-01-introduction-to-cloud-messaging">Introduction to Cloud Messaging</a></li>
<li><a href="06-02-sending-notifications">Sending Notifications</a></li>
<li><a href="06-03-handling-notifications">Handling Notifications</a></li>
<li><a href="06-04-advanced-messaging-features">Advanced Messaging Features</a></li>
</ul>
<h2>Module 7: Firebase Analytics</h2>
<ul>
<li><a href="07-01-introduction-to-firebase-analytics">Introduction to Firebase Analytics</a></li>
<li><a href="07-02-logging-events">Logging Events</a></li>
<li><a href="07-03-user-properties">User Properties</a></li>
<li><a href="07-04-analyzing-data">Analyzing Data</a></li>
</ul>
<h2>Module 8: Firebase Functions</h2>
<ul>
<li><a href="08-01-introduction-to-firebase-functions">Introduction to Firebase Functions</a></li>
<li><a href="08-02-writing-functions">Writing Functions</a></li>
<li><a href="08-03-deploying-functions">Deploying Functions</a></li>
<li><a href="08-04-triggering-functions">Triggering Functions</a></li>
</ul>
<h2>Module 9: Firebase Performance Monitoring</h2>
<ul>
<li><a href="09-01-introduction-to-performance-monitoring">Introduction to Performance Monitoring</a></li>
<li><a href="09-02-setting-up-performance-monitoring">Setting Up Performance Monitoring</a></li>
<li><a href="09-03-analyzing-performance-data">Analyzing Performance Data</a></li>
</ul>
<h2>Module 10: Firebase Test Lab</h2>
<ul>
<li><a href="10-01-introduction-to-firebase-test-lab">Introduction to Firebase Test Lab</a></li>
<li><a href="10-02-running-tests">Running Tests</a></li>
<li><a href="10-03-analyzing-test-results">Analyzing Test Results</a></li>
</ul>
<h2>Module 11: Advanced Firebase Topics</h2>
<ul>
<li><a href="11-01-firebase-ml-kit">Firebase ML Kit</a></li>
<li><a href="11-02-firebase-dynamic-links">Firebase Dynamic Links</a></li>
<li><a href="11-03-firebase-remote-config">Firebase Remote Config</a></li>
<li><a href="11-04-firebase-app-distribution">Firebase App Distribution</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</body>
</html>
