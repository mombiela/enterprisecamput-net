<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Communicating Between Fragments</title>

    <link rel="alternate" href="https://campusempresa.com/mod/androidstudio/communicating-between-fragments" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/androidstudio/communicating-between-fragments" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/androidstudio/communicating-between-fragments" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/androidstudio/communicating-between-fragments" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/androidstudio/communicating-between-fragments" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='creating-and-using-fragments'>&#x25C4;Creating and Using Fragments</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Communicating Between Fragments</a>
	</div>
	<div class='col-4 text-end'>
					<a href='fragment-transactions'>Fragment Transactions &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In Android development, fragments are modular sections of an activity that can be combined to create a more dynamic and flexible user interface. However, managing communication between fragments can be challenging, especially for beginners. This topic will guide you through the different methods of fragment communication, from basic to advanced techniques.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Fragment</strong>: A reusable portion of the user interface in an activity.</li>
<li><strong>Activity</strong>: A single, focused thing that the user can do.</li>
<li><strong>FragmentManager</strong>: Manages the fragments in an activity.</li>
<li><strong>FragmentTransaction</strong>: Used to perform actions like adding, removing, or replacing fragments.</li>
</ul>
</div><h1>Basic Communication Using Interfaces</h1>
<div class='content'><p>The most common and recommended way to communicate between fragments is by using interfaces. This method ensures that fragments remain decoupled and reusable.</p>
</div><h2>Step-by-Step Guide</h2>
<div class='content'><ol>
<li>
<p><strong>Define an Interface in the Fragment</strong>:</p>
<pre><code class="language-java">public class FirstFragment extends Fragment {
    // Define an interface to communicate with the activity
    public interface OnMessageSendListener {
        void onMessageSend(String message);
    }

    private OnMessageSendListener messageSendListener;

    @Override
    public void onAttach(Context context) {
        super.onAttach(context);
        try {
            messageSendListener = (OnMessageSendListener) context;
        } catch (ClassCastException e) {
            throw new ClassCastException(context.toString() + &quot; must implement OnMessageSendListener&quot;);
        }
    }

    // Call this method to send a message to the activity
    private void sendMessage() {
        String message = &quot;Hello from FirstFragment&quot;;
        messageSendListener.onMessageSend(message);
    }
}
</code></pre>
</li>
<li>
<p><strong>Implement the Interface in the Activity</strong>:</p>
<pre><code class="language-java">public class MainActivity extends AppCompatActivity implements FirstFragment.OnMessageSendListener {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public void onMessageSend(String message) {
        // Handle the message received from the fragment
        SecondFragment secondFragment = (SecondFragment) getSupportFragmentManager().findFragmentById(R.id.secondFragment);
        if (secondFragment != null) {
            secondFragment.updateTextView(message);
        }
    }
}
</code></pre>
</li>
<li>
<p><strong>Receive the Message in the Second Fragment</strong>:</p>
<pre><code class="language-java">public class SecondFragment extends Fragment {
    private TextView textView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_second, container, false);
        textView = view.findViewById(R.id.textView);
        return view;
    }

    public void updateTextView(String message) {
        textView.setText(message);
    }
}
</code></pre>
</li>
</ol>
</div><h1>Advanced Communication Using ViewModel</h1>
<div class='content'><p>For more complex applications, using ViewModel and LiveData from Android's Architecture Components is a more robust solution. This method allows fragments to share data without directly communicating with each other.</p>
</div><h2>Step-by-Step Guide</h2>
<div class='content'><ol>
<li>
<p><strong>Create a Shared ViewModel</strong>:</p>
<pre><code class="language-java">public class SharedViewModel extends ViewModel {
    private final MutableLiveData&lt;String&gt; selectedMessage = new MutableLiveData&lt;&gt;();

    public void selectMessage(String message) {
        selectedMessage.setValue(message);
    }

    public LiveData&lt;String&gt; getSelectedMessage() {
        return selectedMessage;
    }
}
</code></pre>
</li>
<li>
<p><strong>Update the ViewModel from the First Fragment</strong>:</p>
<pre><code class="language-java">public class FirstFragment extends Fragment {
    private SharedViewModel sharedViewModel;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        sharedViewModel = new ViewModelProvider(requireActivity()).get(SharedViewModel.class);
    }

    private void sendMessage() {
        String message = &quot;Hello from FirstFragment&quot;;
        sharedViewModel.selectMessage(message);
    }
}
</code></pre>
</li>
<li>
<p><strong>Observe the ViewModel in the Second Fragment</strong>:</p>
<pre><code class="language-java">public class SecondFragment extends Fragment {
    private SharedViewModel sharedViewModel;
    private TextView textView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.fragment_second, container, false);
        textView = view.findViewById(R.id.textView);
        return view;
    }

    @Override
    public void onActivityCreated(@Nullable Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        sharedViewModel = new ViewModelProvider(requireActivity()).get(SharedViewModel.class);
        sharedViewModel.getSelectedMessage().observe(getViewLifecycleOwner(), new Observer&lt;String&gt;() {
            @Override
            public void onChanged(@Nullable String message) {
                textView.setText(message);
            }
        });
    }
}
</code></pre>
</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>Communicating between fragments is a fundamental aspect of Android development. By using interfaces, you can keep your fragments decoupled and reusable. For more complex scenarios, leveraging ViewModel and LiveData provides a more robust and flexible solution. Understanding these methods will help you build more dynamic and maintainable Android applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='creating-and-using-fragments'>&#x25C4;Creating and Using Fragments</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Communicating Between Fragments</a>
	</div>
	<div class='col-4 text-end'>
					<a href='fragment-transactions'>Fragment Transactions &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
