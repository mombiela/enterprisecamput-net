<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>External Storage</title>

    <link rel="alternate" href="https://campusempresa.com/mod/androidstudio/external-storage" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/androidstudio/external-storage" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/androidstudio/external-storage" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/androidstudio/external-storage" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/androidstudio/external-storage" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='internal-storage'>&#x25C4;Internal Storage</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">External Storage</a>
	</div>
	<div class='col-4 text-end'>
					<a href='sqlite-databases'>SQLite Databases &#x25BA;</a>
			</div>
</div>
<div class='content'><p>External storage in Android refers to the storage that is accessible to all apps and the user. It can be used to store large files and data that need to be shared across different applications or with the user. This section will guide you through the basics of external storage, how to read and write files, and best practices for managing external storage in your Android applications.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li>
<p><strong>External Storage Types</strong>:</p>
<ul>
<li><strong>Primary External Storage</strong>: The main external storage, usually the internal shared storage of the device.</li>
<li><strong>Secondary External Storage</strong>: Additional storage options like SD cards or USB drives.</li>
</ul>
</li>
<li>
<p><strong>Permissions</strong>:</p>
<ul>
<li><strong>READ_EXTERNAL_STORAGE</strong>: Required to read files from external storage.</li>
<li><strong>WRITE_EXTERNAL_STORAGE</strong>: Required to write files to external storage.</li>
</ul>
</li>
<li>
<p><strong>Storage Directories</strong>:</p>
<ul>
<li><strong>Environment.getExternalStorageDirectory()</strong>: Returns the primary external storage directory.</li>
<li><strong>Environment.getExternalStoragePublicDirectory(String type)</strong>: Returns a public directory for storing files of a specific type (e.g., pictures, music).</li>
</ul>
</li>
</ul>
</div><h1>Reading and Writing Files</h1>
<div class='content'></div><h2>Requesting Permissions</h2>
<div class='content'><p>Before accessing external storage, you need to request the necessary permissions in your <code>AndroidManifest.xml</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PG1hbmlmZXN0IHhtbG5zOmFuZHJvaWQ9Imh0dHA6Ly9zY2hlbWFzLmFuZHJvaWQuY29tL2Fway9yZXMvYW5kcm9pZCIKICAgIHBhY2thZ2U9ImNvbS5leGFtcGxlLm15YXBwIj4KCiAgICA8dXNlcy1wZXJtaXNzaW9uIGFuZHJvaWQ6bmFtZT0iYW5kcm9pZC5wZXJtaXNzaW9uLlJFQURfRVhURVJOQUxfU1RPUkFHRSIvPgogICAgPHVzZXMtcGVybWlzc2lvbiBhbmRyb2lkOm5hbWU9ImFuZHJvaWQucGVybWlzc2lvbi5XUklURV9FWFRFUk5BTF9TVE9SQUdFIi8+CgogICAgPGFwcGxpY2F0aW9uCiAgICAgICAgLi4uID4KICAgICAgICAuLi4KICAgIDwvYXBwbGljYXRpb24+CjwvbWFuaWZlc3Q+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    package=&quot;com.example.myapp&quot;&gt;

    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;
    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;/&gt;

    &lt;application
        ... &gt;
        ...
    &lt;/application&gt;
&lt;/manifest&gt;</pre></div><div class='content'></div><h2>Checking Permissions at Runtime</h2>
<div class='content'><p>From Android 6.0 (API level 23) onwards, you need to request permissions at runtime:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aWYgKENvbnRleHRDb21wYXQuY2hlY2tTZWxmUGVybWlzc2lvbih0aGlzLCBNYW5pZmVzdC5wZXJtaXNzaW9uLldSSVRFX0VYVEVSTkFMX1NUT1JBR0UpCiAgICAgICAgIT0gUGFja2FnZU1hbmFnZXIuUEVSTUlTU0lPTl9HUkFOVEVEKSB7CiAgICBBY3Rpdml0eUNvbXBhdC5yZXF1ZXN0UGVybWlzc2lvbnModGhpcywgbmV3IFN0cmluZ1tde01hbmlmZXN0LnBlcm1pc3Npb24uV1JJVEVfRVhURVJOQUxfU1RPUkFHRX0sIFJFUVVFU1RfQ09ERSk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>if (ContextCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE)
        != PackageManager.PERMISSION_GRANTED) {
    ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, REQUEST_CODE);
}</pre></div><div class='content'></div><h2>Writing to External Storage</h2>
<div class='content'><p>To write a file to external storage, follow these steps:</p>
<ol>
<li><strong>Check if the storage is available</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U3RyaW5nIHN0YXRlID0gRW52aXJvbm1lbnQuZ2V0RXh0ZXJuYWxTdG9yYWdlU3RhdGUoKTsKaWYgKCFFbnZpcm9ubWVudC5NRURJQV9NT1VOVEVELmVxdWFscyhzdGF0ZSkpIHsKICAgIC8vIEhhbmRsZSBlcnJvcjogZXh0ZXJuYWwgc3RvcmFnZSBpcyBub3QgYXZhaWxhYmxlCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>String state = Environment.getExternalStorageState();
if (!Environment.MEDIA_MOUNTED.equals(state)) {
    // Handle error: external storage is not available
}</pre></div><div class='content'><ol start="2">
<li><strong>Get the external storage directory</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RmlsZSBleHRlcm5hbFN0b3JhZ2VEaXIgPSBFbnZpcm9ubWVudC5nZXRFeHRlcm5hbFN0b3JhZ2VEaXJlY3RvcnkoKTsKRmlsZSBteUZpbGUgPSBuZXcgRmlsZShleHRlcm5hbFN0b3JhZ2VEaXIsICJteWZpbGUudHh0Iik7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>File externalStorageDir = Environment.getExternalStorageDirectory();
File myFile = new File(externalStorageDir, &quot;myfile.txt&quot;);</pre></div><div class='content'><ol start="3">
<li><strong>Write to the file</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dHJ5IChGaWxlT3V0cHV0U3RyZWFtIGZvcyA9IG5ldyBGaWxlT3V0cHV0U3RyZWFtKG15RmlsZSkpIHsKICAgIGZvcy53cml0ZSgiSGVsbG8sIFdvcmxkISIuZ2V0Qnl0ZXMoKSk7Cn0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsKICAgIGUucHJpbnRTdGFja1RyYWNlKCk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>try (FileOutputStream fos = new FileOutputStream(myFile)) {
    fos.write(&quot;Hello, World!&quot;.getBytes());
} catch (IOException e) {
    e.printStackTrace();
}</pre></div><div class='content'></div><h2>Reading from External Storage</h2>
<div class='content'><p>To read a file from external storage, follow these steps:</p>
<ol>
<li><strong>Check if the storage is available</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U3RyaW5nIHN0YXRlID0gRW52aXJvbm1lbnQuZ2V0RXh0ZXJuYWxTdG9yYWdlU3RhdGUoKTsKaWYgKCFFbnZpcm9ubWVudC5NRURJQV9NT1VOVEVELmVxdWFscyhzdGF0ZSkgJiYgIUVudmlyb25tZW50Lk1FRElBX01PVU5URURfUkVBRF9PTkxZLmVxdWFscyhzdGF0ZSkpIHsKICAgIC8vIEhhbmRsZSBlcnJvcjogZXh0ZXJuYWwgc3RvcmFnZSBpcyBub3QgYXZhaWxhYmxlIG9yIG5vdCByZWFkYWJsZQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>String state = Environment.getExternalStorageState();
if (!Environment.MEDIA_MOUNTED.equals(state) &amp;&amp; !Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
    // Handle error: external storage is not available or not readable
}</pre></div><div class='content'><ol start="2">
<li><strong>Get the external storage directory</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RmlsZSBleHRlcm5hbFN0b3JhZ2VEaXIgPSBFbnZpcm9ubWVudC5nZXRFeHRlcm5hbFN0b3JhZ2VEaXJlY3RvcnkoKTsKRmlsZSBteUZpbGUgPSBuZXcgRmlsZShleHRlcm5hbFN0b3JhZ2VEaXIsICJteWZpbGUudHh0Iik7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>File externalStorageDir = Environment.getExternalStorageDirectory();
File myFile = new File(externalStorageDir, &quot;myfile.txt&quot;);</pre></div><div class='content'><ol start="3">
<li><strong>Read from the file</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dHJ5IChGaWxlSW5wdXRTdHJlYW0gZmlzID0gbmV3IEZpbGVJbnB1dFN0cmVhbShteUZpbGUpKSB7CiAgICBpbnQgY29udGVudDsKICAgIHdoaWxlICgoY29udGVudCA9IGZpcy5yZWFkKCkpICE9IC0xKSB7CiAgICAgICAgU3lzdGVtLm91dC5wcmludCgoY2hhcikgY29udGVudCk7CiAgICB9Cn0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHsKICAgIGUucHJpbnRTdGFja1RyYWNlKCk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>try (FileInputStream fis = new FileInputStream(myFile)) {
    int content;
    while ((content = fis.read()) != -1) {
        System.out.print((char) content);
    }
} catch (IOException e) {
    e.printStackTrace();
}</pre></div><div class='content'></div><h1>Best Practices</h1>
<div class='content'><ul>
<li><strong>Check Storage Availability</strong>: Always check if the external storage is available before reading or writing.</li>
<li><strong>Handle Permissions</strong>: Properly handle permission requests and responses.</li>
<li><strong>Use Public Directories</strong>: Store files in public directories when they need to be accessible by other apps or the user.</li>
<li><strong>Manage Storage Efficiently</strong>: Clean up unnecessary files to avoid filling up the storage.</li>
</ul>
</div><h1>Summary</h1>
<div class='content'><p>External storage is a powerful feature in Android that allows apps to store and share large files. By understanding the types of external storage, handling permissions correctly, and following best practices, you can effectively manage external storage in your Android applications. Always ensure that you check the availability of storage and handle permissions properly to provide a seamless user experience.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='internal-storage'>&#x25C4;Internal Storage</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">External Storage</a>
	</div>
	<div class='col-4 text-end'>
					<a href='sqlite-databases'>SQLite Databases &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
