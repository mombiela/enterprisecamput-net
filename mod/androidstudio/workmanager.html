<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorkManager in Android Studio</title>

    <link rel="alternate" href="https://campusempresa.com/mod/androidstudio/workmanager" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/androidstudio/workmanager" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/androidstudio/workmanager" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/androidstudio/workmanager" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/androidstudio/workmanager" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='broadcast-receivers'>&#x25C4;Broadcast Receivers</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">WorkManager in Android Studio</a>
	</div>
	<div class='col-4 text-end'>
					<a href='jobscheduler'>JobScheduler &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to WorkManager</h1>
<div class='content'><p>WorkManager is an Android library that simplifies the process of scheduling deferrable, asynchronous tasks that are expected to run even if the app exits or the device restarts. It is part of Android Jetpack and is suitable for tasks that require guaranteed execution.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Deferrable Tasks</strong>: Tasks that can be delayed and do not need to be executed immediately.</li>
<li><strong>Guaranteed Execution</strong>: Ensures that the task will run even if the app is closed or the device restarts.</li>
<li><strong>Asynchronous Tasks</strong>: Tasks that run on a background thread, not blocking the main UI thread.</li>
</ul>
</div><h1>Setting Up WorkManager</h1>
<div class='content'><p>To use WorkManager, you need to add the necessary dependencies to your <code>build.gradle</code> file.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVwZW5kZW5jaWVzIHsKICAgIGltcGxlbWVudGF0aW9uICJhbmRyb2lkeC53b3JrOndvcmstcnVudGltZToyLjcuMCIKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dependencies {
    implementation &quot;androidx.work:work-runtime:2.7.0&quot;
}</pre></div><div class='content'></div><h1>Creating a Simple Work Request</h1>
<div class='content'><p>A WorkRequest defines an individual task to be executed by WorkManager. There are two types of WorkRequests:</p>
<ul>
<li><strong>OneTimeWorkRequest</strong>: For tasks that should run only once.</li>
<li><strong>PeriodicWorkRequest</strong>: For tasks that should run periodically.</li>
</ul>
</div><h2>Example: OneTimeWorkRequest</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWR4LndvcmsuT25lVGltZVdvcmtSZXF1ZXN0CmltcG9ydCBhbmRyb2lkeC53b3JrLldvcmtNYW5hZ2VyCmltcG9ydCBhbmRyb2lkeC53b3JrLldvcmtlcgppbXBvcnQgYW5kcm9pZHgud29yay5Xb3JrZXJQYXJhbWV0ZXJzCgpjbGFzcyBTaW1wbGVXb3JrZXIoYXBwQ29udGV4dDogQ29udGV4dCwgd29ya2VyUGFyYW1zOiBXb3JrZXJQYXJhbWV0ZXJzKSA6IFdvcmtlcihhcHBDb250ZXh0LCB3b3JrZXJQYXJhbXMpIHsKICAgIG92ZXJyaWRlIGZ1biBkb1dvcmsoKTogUmVzdWx0IHsKICAgICAgICAvLyBEbyB0aGUgd29yayBoZXJlLS1pbiB0aGlzIGNhc2UsIHVwbG9hZCB0aGUgaW1hZ2VzLgogICAgICAgIHVwbG9hZEltYWdlcygpCiAgICAgICAgLy8gSW5kaWNhdGUgd2hldGhlciB0aGUgd29yayBmaW5pc2hlZCBzdWNjZXNzZnVsbHkgd2l0aCB0aGUgUmVzdWx0CiAgICAgICAgcmV0dXJuIFJlc3VsdC5zdWNjZXNzKCkKICAgIH0KfQoKZnVuIHVwbG9hZEltYWdlcygpIHsKICAgIC8vIENvZGUgdG8gdXBsb2FkIGltYWdlcwp9CgovLyBFbnF1ZXVlIHRoZSB3b3JrCnZhbCB1cGxvYWRXb3JrUmVxdWVzdCA9IE9uZVRpbWVXb3JrUmVxdWVzdC5CdWlsZGVyKFNpbXBsZVdvcmtlcjo6Y2xhc3MuamF2YSkuYnVpbGQoKQpXb3JrTWFuYWdlci5nZXRJbnN0YW5jZShjb250ZXh0KS5lbnF1ZXVlKHVwbG9hZFdvcmtSZXF1ZXN0KQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import androidx.work.OneTimeWorkRequest
import androidx.work.WorkManager
import androidx.work.Worker
import androidx.work.WorkerParameters

class SimpleWorker(appContext: Context, workerParams: WorkerParameters) : Worker(appContext, workerParams) {
    override fun doWork(): Result {
        // Do the work here--in this case, upload the images.
        uploadImages()
        // Indicate whether the work finished successfully with the Result
        return Result.success()
    }
}

fun uploadImages() {
    // Code to upload images
}

// Enqueue the work
val uploadWorkRequest = OneTimeWorkRequest.Builder(SimpleWorker::class.java).build()
WorkManager.getInstance(context).enqueue(uploadWorkRequest)</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>SimpleWorker</strong>: A class extending <code>Worker</code> where the actual work is defined.</li>
<li><strong>doWork()</strong>: The method where the task is executed.</li>
<li><strong>enqueue()</strong>: Method to schedule the work.</li>
</ul>
</div><h1>Adding Constraints</h1>
<div class='content'><p>Constraints specify conditions that need to be met for the work to run, such as network availability or device charging status.</p>
</div><h2>Example: Adding Constraints</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWR4LndvcmsuQ29uc3RyYWludHMKaW1wb3J0IGFuZHJvaWR4LndvcmsuTmV0d29ya1R5cGUKCnZhbCBjb25zdHJhaW50cyA9IENvbnN0cmFpbnRzLkJ1aWxkZXIoKQogICAgLnNldFJlcXVpcmVkTmV0d29ya1R5cGUoTmV0d29ya1R5cGUuQ09OTkVDVEVEKQogICAgLnNldFJlcXVpcmVzQ2hhcmdpbmcodHJ1ZSkKICAgIC5idWlsZCgpCgp2YWwgY29uc3RyYWluZWRXb3JrUmVxdWVzdCA9IE9uZVRpbWVXb3JrUmVxdWVzdC5CdWlsZGVyKFNpbXBsZVdvcmtlcjo6Y2xhc3MuamF2YSkKICAgIC5zZXRDb25zdHJhaW50cyhjb25zdHJhaW50cykKICAgIC5idWlsZCgpCgpXb3JrTWFuYWdlci5nZXRJbnN0YW5jZShjb250ZXh0KS5lbnF1ZXVlKGNvbnN0cmFpbmVkV29ya1JlcXVlc3Qp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import androidx.work.Constraints
import androidx.work.NetworkType

val constraints = Constraints.Builder()
    .setRequiredNetworkType(NetworkType.CONNECTED)
    .setRequiresCharging(true)
    .build()

val constrainedWorkRequest = OneTimeWorkRequest.Builder(SimpleWorker::class.java)
    .setConstraints(constraints)
    .build()

WorkManager.getInstance(context).enqueue(constrainedWorkRequest)</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Constraints.Builder()</strong>: Used to define the constraints.</li>
<li><strong>setRequiredNetworkType(NetworkType.CONNECTED)</strong>: Ensures the device is connected to a network.</li>
<li><strong>setRequiresCharging(true)</strong>: Ensures the device is charging.</li>
</ul>
</div><h1>Chaining Work Requests</h1>
<div class='content'><p>WorkManager allows chaining multiple work requests to run in a specified order.</p>
</div><h2>Example: Chaining Work Requests</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFsIHdvcmtBID0gT25lVGltZVdvcmtSZXF1ZXN0LkJ1aWxkZXIoV29ya2VyQTo6Y2xhc3MuamF2YSkuYnVpbGQoKQp2YWwgd29ya0IgPSBPbmVUaW1lV29ya1JlcXVlc3QuQnVpbGRlcihXb3JrZXJCOjpjbGFzcy5qYXZhKS5idWlsZCgpCnZhbCB3b3JrQyA9IE9uZVRpbWVXb3JrUmVxdWVzdC5CdWlsZGVyKFdvcmtlckM6OmNsYXNzLmphdmEpLmJ1aWxkKCkKCldvcmtNYW5hZ2VyLmdldEluc3RhbmNlKGNvbnRleHQpCiAgICAuYmVnaW5XaXRoKHdvcmtBKQogICAgLnRoZW4od29ya0IpCiAgICAudGhlbih3b3JrQykKICAgIC5lbnF1ZXVlKCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>val workA = OneTimeWorkRequest.Builder(WorkerA::class.java).build()
val workB = OneTimeWorkRequest.Builder(WorkerB::class.java).build()
val workC = OneTimeWorkRequest.Builder(WorkerC::class.java).build()

WorkManager.getInstance(context)
    .beginWith(workA)
    .then(workB)
    .then(workC)
    .enqueue()</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>beginWith(workA)</strong>: Starts the chain with <code>workA</code>.</li>
<li><strong>then(workB)</strong>: Specifies that <code>workB</code> should run after <code>workA</code>.</li>
<li><strong>then(workC)</strong>: Specifies that <code>workC</code> should run after <code>workB</code>.</li>
</ul>
</div><h1>Observing Work Status</h1>
<div class='content'><p>You can observe the status of a work request to get updates on its progress or completion.</p>
</div><h2>Example: Observing Work Status</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFsIHdvcmtSZXF1ZXN0ID0gT25lVGltZVdvcmtSZXF1ZXN0LkJ1aWxkZXIoU2ltcGxlV29ya2VyOjpjbGFzcy5qYXZhKS5idWlsZCgpCldvcmtNYW5hZ2VyLmdldEluc3RhbmNlKGNvbnRleHQpLmVucXVldWUod29ya1JlcXVlc3QpCgpXb3JrTWFuYWdlci5nZXRJbnN0YW5jZShjb250ZXh0KS5nZXRXb3JrSW5mb0J5SWRMaXZlRGF0YSh3b3JrUmVxdWVzdC5pZCkKICAgIC5vYnNlcnZlKHRoaXMsIE9ic2VydmVyIHsgd29ya0luZm8gLT4KICAgICAgICBpZiAod29ya0luZm8gIT0gbnVsbCAmJiB3b3JrSW5mby5zdGF0ZSA9PSBXb3JrSW5mby5TdGF0ZS5TVUNDRUVERUQpIHsKICAgICAgICAgICAgLy8gV29yayBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5CiAgICAgICAgfQogICAgfSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>val workRequest = OneTimeWorkRequest.Builder(SimpleWorker::class.java).build()
WorkManager.getInstance(context).enqueue(workRequest)

WorkManager.getInstance(context).getWorkInfoByIdLiveData(workRequest.id)
    .observe(this, Observer { workInfo -&gt;
        if (workInfo != null &amp;&amp; workInfo.state == WorkInfo.State.SUCCEEDED) {
            // Work completed successfully
        }
    })</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>getWorkInfoByIdLiveData(workRequest.id)</strong>: Returns a LiveData object that can be observed for changes in the work status.</li>
<li><strong>Observer</strong>: Reacts to changes in the work status.</li>
</ul>
</div><h1>Advanced WorkManager Features</h1>
<h2>Periodic Work Requests</h2>
<div class='content'><p>For tasks that need to run periodically, use <code>PeriodicWorkRequest</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFsIHBlcmlvZGljV29ya1JlcXVlc3QgPSBQZXJpb2RpY1dvcmtSZXF1ZXN0LkJ1aWxkZXIoU2ltcGxlV29ya2VyOjpjbGFzcy5qYXZhLCAxLCBUaW1lVW5pdC5IT1VSUykuYnVpbGQoKQpXb3JrTWFuYWdlci5nZXRJbnN0YW5jZShjb250ZXh0KS5lbnF1ZXVlKHBlcmlvZGljV29ya1JlcXVlc3Qp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>val periodicWorkRequest = PeriodicWorkRequest.Builder(SimpleWorker::class.java, 1, TimeUnit.HOURS).build()
WorkManager.getInstance(context).enqueue(periodicWorkRequest)</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>PeriodicWorkRequest.Builder</strong>: Schedules the work to run periodically.</li>
<li><strong>1, TimeUnit.HOURS</strong>: Specifies the interval between executions.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>WorkManager is a powerful tool for managing background tasks in Android applications. It provides a simple and flexible API for scheduling tasks, adding constraints, chaining tasks, and observing their status. By understanding and utilizing WorkManager, you can ensure that your app's background tasks are handled efficiently and reliably, even under challenging conditions like app termination or device restarts.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='broadcast-receivers'>&#x25C4;Broadcast Receivers</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">WorkManager in Android Studio</a>
	</div>
	<div class='col-4 text-end'>
					<a href='jobscheduler'>JobScheduler &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
