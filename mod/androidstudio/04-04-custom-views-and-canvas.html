<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Views and Canvas</title>

    <link rel="alternate" href="https://campusempresa.com/mod/androidstudio/04-04-custom-views-and-canvas" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/androidstudio/04-04-custom-views-and-canvas" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/androidstudio/04-04-custom-views-and-canvas" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/androidstudio/04-04-custom-views-and-canvas" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/androidstudio/04-04-custom-views-and-canvas" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-03-advanced-ui-components' title="Advanced UI Components">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Custom Views and Canvas</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-05-working-with-background-tasks' title="Working with Background Tasks">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to create custom views and use the Canvas class in Android. Custom views allow you to create unique UI components that are not available in the standard Android UI toolkit. The Canvas class provides a powerful way to draw shapes, text, and images directly onto the screen.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Custom Views</strong>: Creating your own view by extending the <code>View</code> class.</li>
<li><strong>Canvas</strong>: A class that provides methods for drawing on a bitmap.</li>
<li><strong>Paint</strong>: A class that holds the style and color information about how to draw geometries, text, and bitmaps.</li>
<li><strong>Drawing Shapes</strong>: Using Canvas methods to draw shapes like circles, rectangles, and lines.</li>
<li><strong>Handling Touch Events</strong>: Making your custom view interactive by handling touch events.</li>
</ol>
</div><h1><p>Creating a Custom View</p>
</h1>
<div class='content'><p>To create a custom view, you need to extend the <code>View</code> class and override its <code>onDraw</code> method. Here is a simple example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gTXlDdXN0b21WaWV3LmphdmEKcGFja2FnZSBjb20uZXhhbXBsZS5jdXN0b212aWV3OwoKaW1wb3J0IGFuZHJvaWQuY29udGVudC5Db250ZXh0OwppbXBvcnQgYW5kcm9pZC5ncmFwaGljcy5DYW52YXM7CmltcG9ydCBhbmRyb2lkLmdyYXBoaWNzLkNvbG9yOwppbXBvcnQgYW5kcm9pZC5ncmFwaGljcy5QYWludDsKaW1wb3J0IGFuZHJvaWQudXRpbC5BdHRyaWJ1dGVTZXQ7CmltcG9ydCBhbmRyb2lkLnZpZXcuVmlldzsKCnB1YmxpYyBjbGFzcyBNeUN1c3RvbVZpZXcgZXh0ZW5kcyBWaWV3IHsKICAgIHByaXZhdGUgUGFpbnQgcGFpbnQ7CgogICAgcHVibGljIE15Q3VzdG9tVmlldyhDb250ZXh0IGNvbnRleHQsIEF0dHJpYnV0ZVNldCBhdHRycykgewogICAgICAgIHN1cGVyKGNvbnRleHQsIGF0dHJzKTsKICAgICAgICBpbml0KCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGluaXQoKSB7CiAgICAgICAgcGFpbnQgPSBuZXcgUGFpbnQoKTsKICAgICAgICBwYWludC5zZXRDb2xvcihDb2xvci5SRUQpOwogICAgICAgIHBhaW50LnNldFN0cm9rZVdpZHRoKDUpOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgb25EcmF3KENhbnZhcyBjYW52YXMpIHsKICAgICAgICBzdXBlci5vbkRyYXcoY2FudmFzKTsKICAgICAgICAvLyBEcmF3IGEgcmVkIGNpcmNsZSBhdCB0aGUgY2VudGVyIG9mIHRoZSB2aWV3CiAgICAgICAgaW50IHdpZHRoID0gZ2V0V2lkdGgoKTsKICAgICAgICBpbnQgaGVpZ2h0ID0gZ2V0SGVpZ2h0KCk7CiAgICAgICAgaW50IHJhZGl1cyA9IE1hdGgubWluKHdpZHRoLCBoZWlnaHQpIC8gNDsKICAgICAgICBjYW52YXMuZHJhd0NpcmNsZSh3aWR0aCAvIDIsIGhlaWdodCAvIDIsIHJhZGl1cywgcGFpbnQpOwogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// MyCustomView.java
package com.example.customview;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.util.AttributeSet;
import android.view.View;

public class MyCustomView extends View {
    private Paint paint;

    public MyCustomView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    private void init() {
        paint = new Paint();
        paint.setColor(Color.RED);
        paint.setStrokeWidth(5);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        // Draw a red circle at the center of the view
        int width = getWidth();
        int height = getHeight();
        int radius = Math.min(width, height) / 4;
        canvas.drawCircle(width / 2, height / 2, radius, paint);
    }
}</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>Constructor</strong>: The constructor initializes the <code>Paint</code> object, which defines the color and style of the drawing.</li>
<li><strong>onDraw Method</strong>: The <code>onDraw</code> method is where you perform all your drawing. In this example, we draw a red circle at the center of the view.</li>
</ul>
</div><h1><p>Using the Custom View in XML</p>
</h1>
<div class='content'><p>To use the custom view in your layout, you need to add it to an XML layout file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSBhY3Rpdml0eV9tYWluLnhtbCAtLT4KPFJlbGF0aXZlTGF5b3V0IHhtbG5zOmFuZHJvaWQ9Imh0dHA6Ly9zY2hlbWFzLmFuZHJvaWQuY29tL2Fway9yZXMvYW5kcm9pZCIKICAgIHhtbG5zOnRvb2xzPSJodHRwOi8vc2NoZW1hcy5hbmRyb2lkLmNvbS90b29scyIKICAgIGFuZHJvaWQ6bGF5b3V0X3dpZHRoPSJtYXRjaF9wYXJlbnQiCiAgICBhbmRyb2lkOmxheW91dF9oZWlnaHQ9Im1hdGNoX3BhcmVudCIKICAgIHRvb2xzOmNvbnRleHQ9Ii5NYWluQWN0aXZpdHkiPgoKICAgIDxjb20uZXhhbXBsZS5jdXN0b212aWV3Lk15Q3VzdG9tVmlldwogICAgICAgIGFuZHJvaWQ6bGF5b3V0X3dpZHRoPSJtYXRjaF9wYXJlbnQiCiAgICAgICAgYW5kcm9pZDpsYXlvdXRfaGVpZ2h0PSJtYXRjaF9wYXJlbnQiIC8+CjwvUmVsYXRpdmVMYXlvdXQ+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- activity_main.xml --&gt;
&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    tools:context=&quot;.MainActivity&quot;&gt;

    &lt;com.example.customview.MyCustomView
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot; /&gt;
&lt;/RelativeLayout&gt;</pre></div><div class='content'></div><h1><p>Drawing Shapes with Canvas</p>
</h1>
<div class='content'><p>The <code>Canvas</code> class provides several methods for drawing shapes:</p>
<ul>
<li><code>drawCircle(float cx, float cy, float radius, Paint paint)</code></li>
<li><code>drawRect(float left, float top, float right, float bottom, Paint paint)</code></li>
<li><code>drawLine(float startX, float startY, float stopX, float stopY, Paint paint)</code></li>
</ul>
<p>Here is an example of drawing multiple shapes:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QE92ZXJyaWRlCnByb3RlY3RlZCB2b2lkIG9uRHJhdyhDYW52YXMgY2FudmFzKSB7CiAgICBzdXBlci5vbkRyYXcoY2FudmFzKTsKCiAgICAvLyBEcmF3IGEgcmVkIGNpcmNsZQogICAgcGFpbnQuc2V0Q29sb3IoQ29sb3IuUkVEKTsKICAgIGNhbnZhcy5kcmF3Q2lyY2xlKDEwMCwgMTAwLCA1MCwgcGFpbnQpOwoKICAgIC8vIERyYXcgYSBibHVlIHJlY3RhbmdsZQogICAgcGFpbnQuc2V0Q29sb3IoQ29sb3IuQkxVRSk7CiAgICBjYW52YXMuZHJhd1JlY3QoMjAwLCAyMDAsIDQwMCwgNDAwLCBwYWludCk7CgogICAgLy8gRHJhdyBhIGdyZWVuIGxpbmUKICAgIHBhaW50LnNldENvbG9yKENvbG9yLkdSRUVOKTsKICAgIGNhbnZhcy5kcmF3TGluZSg1MDAsIDUwMCwgNzAwLCA3MDAsIHBhaW50KTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    // Draw a red circle
    paint.setColor(Color.RED);
    canvas.drawCircle(100, 100, 50, paint);

    // Draw a blue rectangle
    paint.setColor(Color.BLUE);
    canvas.drawRect(200, 200, 400, 400, paint);

    // Draw a green line
    paint.setColor(Color.GREEN);
    canvas.drawLine(500, 500, 700, 700, paint);
}</pre></div><div class='content'></div><h1><p>Handling Touch Events</p>
</h1>
<div class='content'><p>To make your custom view interactive, you can override the <code>onTouchEvent</code> method:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QE92ZXJyaWRlCnB1YmxpYyBib29sZWFuIG9uVG91Y2hFdmVudChNb3Rpb25FdmVudCBldmVudCkgewogICAgc3dpdGNoIChldmVudC5nZXRBY3Rpb24oKSkgewogICAgICAgIGNhc2UgTW90aW9uRXZlbnQuQUNUSU9OX0RPV046CiAgICAgICAgICAgIC8vIEhhbmRsZSB0b3VjaCBkb3duIGV2ZW50CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIGNhc2UgTW90aW9uRXZlbnQuQUNUSU9OX01PVkU6CiAgICAgICAgICAgIC8vIEhhbmRsZSB0b3VjaCBtb3ZlIGV2ZW50CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIGNhc2UgTW90aW9uRXZlbnQuQUNUSU9OX1VQOgogICAgICAgICAgICAvLyBIYW5kbGUgdG91Y2ggdXAgZXZlbnQKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICByZXR1cm4gc3VwZXIub25Ub3VjaEV2ZW50KGV2ZW50KTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@Override
public boolean onTouchEvent(MotionEvent event) {
    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            // Handle touch down event
            return true;
        case MotionEvent.ACTION_MOVE:
            // Handle touch move event
            return true;
        case MotionEvent.ACTION_UP:
            // Handle touch up event
            return true;
    }
    return super.onTouchEvent(event);
}</pre></div><div class='content'></div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Task</p>
</h2>
<div class='content'><p>Create a custom view that draws a smiley face. The face should be a yellow circle, with two black eyes and a black smile.</p>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gU21pbGV5Vmlldy5qYXZhCnBhY2thZ2UgY29tLmV4YW1wbGUuY3VzdG9tdmlldzsKCmltcG9ydCBhbmRyb2lkLmNvbnRlbnQuQ29udGV4dDsKaW1wb3J0IGFuZHJvaWQuZ3JhcGhpY3MuQ2FudmFzOwppbXBvcnQgYW5kcm9pZC5ncmFwaGljcy5Db2xvcjsKaW1wb3J0IGFuZHJvaWQuZ3JhcGhpY3MuUGFpbnQ7CmltcG9ydCBhbmRyb2lkLnV0aWwuQXR0cmlidXRlU2V0OwppbXBvcnQgYW5kcm9pZC52aWV3LlZpZXc7CgpwdWJsaWMgY2xhc3MgU21pbGV5VmlldyBleHRlbmRzIFZpZXcgewogICAgcHJpdmF0ZSBQYWludCBwYWludDsKCiAgICBwdWJsaWMgU21pbGV5VmlldyhDb250ZXh0IGNvbnRleHQsIEF0dHJpYnV0ZVNldCBhdHRycykgewogICAgICAgIHN1cGVyKGNvbnRleHQsIGF0dHJzKTsKICAgICAgICBpbml0KCk7CiAgICB9CgogICAgcHJpdmF0ZSB2b2lkIGluaXQoKSB7CiAgICAgICAgcGFpbnQgPSBuZXcgUGFpbnQoKTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHByb3RlY3RlZCB2b2lkIG9uRHJhdyhDYW52YXMgY2FudmFzKSB7CiAgICAgICAgc3VwZXIub25EcmF3KGNhbnZhcyk7CgogICAgICAgIC8vIERyYXcgZmFjZQogICAgICAgIHBhaW50LnNldENvbG9yKENvbG9yLllFTExPVyk7CiAgICAgICAgY2FudmFzLmRyYXdDaXJjbGUoMzAwLCAzMDAsIDIwMCwgcGFpbnQpOwoKICAgICAgICAvLyBEcmF3IGV5ZXMKICAgICAgICBwYWludC5zZXRDb2xvcihDb2xvci5CTEFDSyk7CiAgICAgICAgY2FudmFzLmRyYXdDaXJjbGUoMjIwLCAyNTAsIDIwLCBwYWludCk7CiAgICAgICAgY2FudmFzLmRyYXdDaXJjbGUoMzgwLCAyNTAsIDIwLCBwYWludCk7CgogICAgICAgIC8vIERyYXcgbW91dGgKICAgICAgICBwYWludC5zZXRTdHlsZShQYWludC5TdHlsZS5TVFJPS0UpOwogICAgICAgIHBhaW50LnNldFN0cm9rZVdpZHRoKDUpOwogICAgICAgIGNhbnZhcy5kcmF3QXJjKDIwMCwgMjAwLCA0MDAsIDQwMCwgMCwgMTgwLCBmYWxzZSwgcGFpbnQpOwogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// SmileyView.java
package com.example.customview;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.util.AttributeSet;
import android.view.View;

public class SmileyView extends View {
    private Paint paint;

    public SmileyView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    private void init() {
        paint = new Paint();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        // Draw face
        paint.setColor(Color.YELLOW);
        canvas.drawCircle(300, 300, 200, paint);

        // Draw eyes
        paint.setColor(Color.BLACK);
        canvas.drawCircle(220, 250, 20, paint);
        canvas.drawCircle(380, 250, 20, paint);

        // Draw mouth
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeWidth(5);
        canvas.drawArc(200, 200, 400, 400, 0, 180, false, paint);
    }
}</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>Face</strong>: Drawn using a yellow circle.</li>
<li><strong>Eyes</strong>: Drawn using two smaller black circles.</li>
<li><strong>Mouth</strong>: Drawn using an arc.</li>
</ul>
</div><h1><p>Summary</p>
</h1>
<div class='content'><p>In this section, you learned how to create custom views and use the Canvas class to draw shapes, text, and images. You also learned how to handle touch events to make your custom views interactive. Custom views and Canvas provide a powerful way to create unique and engaging UI components in your Android applications.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-03-advanced-ui-components' title="Advanced UI Components">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-05-working-with-background-tasks' title="Working with Background Tasks">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
