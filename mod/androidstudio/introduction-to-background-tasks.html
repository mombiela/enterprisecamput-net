<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introduction to Background Tasks</title>

    <link rel="alternate" href="https://campusempresa.com/mod/androidstudio/introduction-to-background-tasks" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/androidstudio/introduction-to-background-tasks" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/androidstudio/introduction-to-background-tasks" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/androidstudio/introduction-to-background-tasks" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/androidstudio/introduction-to-background-tasks" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='animations-and-transitions'>&#x25C4;Animations and Transitions</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Introduction to Background Tasks</a>
	</div>
	<div class='col-4 text-end'>
					<a href='services'>Services &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore the concept of background tasks in Android development. Background tasks are essential for performing operations that should not block the main UI thread, ensuring a smooth user experience.</p>
</div><h1>What are Background Tasks?</h1>
<div class='content'><p>Background tasks are operations that run outside the main UI thread. They are used for tasks that:</p>
<ul>
<li>Take a long time to complete (e.g., downloading a file).</li>
<li>Need to be performed periodically (e.g., syncing data with a server).</li>
<li>Should continue running even when the user is not interacting with the app (e.g., background music playback).</li>
</ul>
</div><h1>Importance of Background Tasks</h1>
<div class='content'><ul>
<li><strong>Improved User Experience</strong>: By offloading long-running tasks to the background, the main UI thread remains responsive.</li>
<li><strong>Resource Management</strong>: Efficiently manage system resources by scheduling tasks during idle times.</li>
<li><strong>Battery Efficiency</strong>: Properly managed background tasks can help conserve battery life.</li>
</ul>
</div><h1>Common Methods for Implementing Background Tasks</h1>
<div class='content'></div><h2>AsyncTask (Deprecated)</h2>
<div class='content'><p><code>AsyncTask</code> was a popular way to perform background operations before it was deprecated in Android 11. It allowed for easy execution of background tasks with callbacks to the main thread.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJpdmF0ZSBjbGFzcyBEb3dubG9hZFRhc2sgZXh0ZW5kcyBBc3luY1Rhc2s8U3RyaW5nLCBWb2lkLCBTdHJpbmc+IHsKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIFN0cmluZyBkb0luQmFja2dyb3VuZChTdHJpbmcuLi4gdXJscykgewogICAgICAgIC8vIFBlcmZvcm0gYmFja2dyb3VuZCBvcGVyYXRpb24KICAgICAgICByZXR1cm4gZG93bmxvYWRGaWxlKHVybHNbMF0pOwogICAgfQoKICAgIEBPdmVycmlkZQogICAgcHJvdGVjdGVkIHZvaWQgb25Qb3N0RXhlY3V0ZShTdHJpbmcgcmVzdWx0KSB7CiAgICAgICAgLy8gVXBkYXRlIFVJIHdpdGggcmVzdWx0CiAgICAgICAgdGV4dFZpZXcuc2V0VGV4dChyZXN1bHQpOwogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>private class DownloadTask extends AsyncTask&lt;String, Void, String&gt; {
    @Override
    protected String doInBackground(String... urls) {
        // Perform background operation
        return downloadFile(urls[0]);
    }

    @Override
    protected void onPostExecute(String result) {
        // Update UI with result
        textView.setText(result);
    }
}</pre></div><div class='content'></div><h2>HandlerThread</h2>
<div class='content'><p><code>HandlerThread</code> is a simple way to create a background thread with a <code>Looper</code> and <code>Handler</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SGFuZGxlclRocmVhZCBoYW5kbGVyVGhyZWFkID0gbmV3IEhhbmRsZXJUaHJlYWQoIkJhY2tncm91bmRUaHJlYWQiKTsKaGFuZGxlclRocmVhZC5zdGFydCgpOwpIYW5kbGVyIGhhbmRsZXIgPSBuZXcgSGFuZGxlcihoYW5kbGVyVGhyZWFkLmdldExvb3BlcigpKTsKCmhhbmRsZXIucG9zdChuZXcgUnVubmFibGUoKSB7CiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyB2b2lkIHJ1bigpIHsKICAgICAgICAvLyBQZXJmb3JtIGJhY2tncm91bmQgb3BlcmF0aW9uCiAgICB9Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>HandlerThread handlerThread = new HandlerThread(&quot;BackgroundThread&quot;);
handlerThread.start();
Handler handler = new Handler(handlerThread.getLooper());

handler.post(new Runnable() {
    @Override
    public void run() {
        // Perform background operation
    }
});</pre></div><div class='content'></div><h2>WorkManager</h2>
<div class='content'><p><code>WorkManager</code> is the recommended solution for background tasks that need guaranteed execution. It is suitable for tasks that are deferrable and require guaranteed execution, such as periodic data syncs.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIE15V29ya2VyIGV4dGVuZHMgV29ya2VyIHsKICAgIHB1YmxpYyBNeVdvcmtlcihATm9uTnVsbCBDb250ZXh0IGNvbnRleHQsIEBOb25OdWxsIFdvcmtlclBhcmFtZXRlcnMgcGFyYW1zKSB7CiAgICAgICAgc3VwZXIoY29udGV4dCwgcGFyYW1zKTsKICAgIH0KCiAgICBATm9uTnVsbAogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgUmVzdWx0IGRvV29yaygpIHsKICAgICAgICAvLyBQZXJmb3JtIGJhY2tncm91bmQgb3BlcmF0aW9uCiAgICAgICAgcmV0dXJuIFJlc3VsdC5zdWNjZXNzKCk7CiAgICB9Cn0KCi8vIEVucXVldWUgdGhlIHdvcmsKV29ya01hbmFnZXIgd29ya01hbmFnZXIgPSBXb3JrTWFuYWdlci5nZXRJbnN0YW5jZShjb250ZXh0KTsKT25lVGltZVdvcmtSZXF1ZXN0IHdvcmtSZXF1ZXN0ID0gbmV3IE9uZVRpbWVXb3JrUmVxdWVzdC5CdWlsZGVyKE15V29ya2VyLmNsYXNzKS5idWlsZCgpOwp3b3JrTWFuYWdlci5lbnF1ZXVlKHdvcmtSZXF1ZXN0KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class MyWorker extends Worker {
    public MyWorker(@NonNull Context context, @NonNull WorkerParameters params) {
        super(context, params);
    }

    @NonNull
    @Override
    public Result doWork() {
        // Perform background operation
        return Result.success();
    }
}

// Enqueue the work
WorkManager workManager = WorkManager.getInstance(context);
OneTimeWorkRequest workRequest = new OneTimeWorkRequest.Builder(MyWorker.class).build();
workManager.enqueue(workRequest);</pre></div><div class='content'></div><h2>Services</h2>
<div class='content'><p><code>Service</code> is a component that can perform long-running operations in the background. There are two types of services:</p>
<ul>
<li><strong>Started Service</strong>: Runs indefinitely until stopped.</li>
<li><strong>Bound Service</strong>: Binds to a component and runs as long as the component is bound.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIE15U2VydmljZSBleHRlbmRzIFNlcnZpY2UgewogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgaW50IG9uU3RhcnRDb21tYW5kKEludGVudCBpbnRlbnQsIGludCBmbGFncywgaW50IHN0YXJ0SWQpIHsKICAgICAgICAvLyBQZXJmb3JtIGJhY2tncm91bmQgb3BlcmF0aW9uCiAgICAgICAgcmV0dXJuIFNUQVJUX1NUSUNLWTsKICAgIH0KCiAgICBAT3ZlcnJpZGUKICAgIHB1YmxpYyBJQmluZGVyIG9uQmluZChJbnRlbnQgaW50ZW50KSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class MyService extends Service {
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        // Perform background operation
        return START_STICKY;
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }
}</pre></div><div class='content'></div><h1>Choosing the Right Tool</h1>
<div class='content'><p>| Method       | Use Case                                      | Pros                                         | Cons                                      |
|--------------|-----------------------------------------------|----------------------------------------------|-------------------------------------------|
| AsyncTask    | Simple, short-lived tasks                     | Easy to implement                            | Deprecated, not suitable for long tasks   |
| HandlerThread| Background tasks with message handling        | Simple, lightweight                          | Manual thread management                  |
| WorkManager  | Guaranteed, deferrable tasks                  | Guaranteed execution, battery efficient      | More complex setup                        |
| Service      | Long-running tasks                            | Runs independently of UI                     | Requires more boilerplate code            |</p>
</div><h1>Code Example: Using WorkManager</h1>
<div class='content'><p>Let's implement a simple example using <code>WorkManager</code> to perform a background task that downloads data from a URL.</p>
<ol>
<li><strong>Add Dependency</strong>: Add the WorkManager dependency to your <code>build.gradle</code> file.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVwZW5kZW5jaWVzIHsKICAgIGltcGxlbWVudGF0aW9uICJhbmRyb2lkeC53b3JrOndvcmstcnVudGltZToyLjcuMCIKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dependencies {
    implementation &quot;androidx.work:work-runtime:2.7.0&quot;
}</pre></div><div class='content'><ol start="2">
<li><strong>Create Worker Class</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIERvd25sb2FkV29ya2VyIGV4dGVuZHMgV29ya2VyIHsKICAgIHB1YmxpYyBEb3dubG9hZFdvcmtlcihATm9uTnVsbCBDb250ZXh0IGNvbnRleHQsIEBOb25OdWxsIFdvcmtlclBhcmFtZXRlcnMgcGFyYW1zKSB7CiAgICAgICAgc3VwZXIoY29udGV4dCwgcGFyYW1zKTsKICAgIH0KCiAgICBATm9uTnVsbAogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgUmVzdWx0IGRvV29yaygpIHsKICAgICAgICAvLyBQZXJmb3JtIGRvd25sb2FkIG9wZXJhdGlvbgogICAgICAgIFN0cmluZyBkYXRhID0gZG93bmxvYWREYXRhKCk7CiAgICAgICAgaWYgKGRhdGEgIT0gbnVsbCkgewogICAgICAgICAgICByZXR1cm4gUmVzdWx0LnN1Y2Nlc3MoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gUmVzdWx0LnJldHJ5KCk7CiAgICAgICAgfQogICAgfQoKICAgIHByaXZhdGUgU3RyaW5nIGRvd25sb2FkRGF0YSgpIHsKICAgICAgICAvLyBTaW11bGF0ZSBkb3dubG9hZCBvcGVyYXRpb24KICAgICAgICByZXR1cm4gIkRvd25sb2FkZWQgZGF0YSI7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class DownloadWorker extends Worker {
    public DownloadWorker(@NonNull Context context, @NonNull WorkerParameters params) {
        super(context, params);
    }

    @NonNull
    @Override
    public Result doWork() {
        // Perform download operation
        String data = downloadData();
        if (data != null) {
            return Result.success();
        } else {
            return Result.retry();
        }
    }

    private String downloadData() {
        // Simulate download operation
        return &quot;Downloaded data&quot;;
    }
}</pre></div><div class='content'><ol start="3">
<li><strong>Enqueue Work Request</strong>:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("V29ya01hbmFnZXIgd29ya01hbmFnZXIgPSBXb3JrTWFuYWdlci5nZXRJbnN0YW5jZShjb250ZXh0KTsKT25lVGltZVdvcmtSZXF1ZXN0IGRvd25sb2FkUmVxdWVzdCA9IG5ldyBPbmVUaW1lV29ya1JlcXVlc3QuQnVpbGRlcihEb3dubG9hZFdvcmtlci5jbGFzcykuYnVpbGQoKTsKd29ya01hbmFnZXIuZW5xdWV1ZShkb3dubG9hZFJlcXVlc3QpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>WorkManager workManager = WorkManager.getInstance(context);
OneTimeWorkRequest downloadRequest = new OneTimeWorkRequest.Builder(DownloadWorker.class).build();
workManager.enqueue(downloadRequest);</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Background tasks are crucial for maintaining a responsive and efficient Android application. By understanding and utilizing the appropriate tools such as <code>HandlerThread</code>, <code>WorkManager</code>, and <code>Service</code>, developers can ensure that their apps perform smoothly and efficiently. Always choose the right tool based on the specific requirements of your task to achieve the best results.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='animations-and-transitions'>&#x25C4;Animations and Transitions</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Introduction to Background Tasks</a>
	</div>
	<div class='col-4 text-end'>
					<a href='services'>Services &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
