<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using Machine Learning in Android</title>

    <link rel="alternate" href="https://campusempresa.com/mod/androidstudio/06-04-using-machine-learning-in-android" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/androidstudio/06-04-using-machine-learning-in-android" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/androidstudio/06-04-using-machine-learning-in-android" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/androidstudio/06-04-using-machine-learning-in-android" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/androidstudio/06-04-using-machine-learning-in-android" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-03-implementing-in-app-purchases' title="Implementing In-App Purchases">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Using Machine Learning in Android</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-05-augmented-reality-with-arcore' title="Augmented Reality with ARCore">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introduction</p>
</h1>
<div class='content'><p>Machine Learning (ML) is transforming the way we interact with technology. Integrating ML into Android applications can enhance user experiences by providing features like image recognition, natural language processing, and predictive analytics. In this module, we will explore how to incorporate ML into your Android apps using TensorFlow Lite and ML Kit.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Machine Learning Basics</strong></p>
<ul>
<li>Understanding ML models</li>
<li>Training vs. inference</li>
<li>Types of ML models (classification, regression, clustering)</li>
</ul>
</li>
<li>
<p><strong>TensorFlow Lite</strong></p>
<ul>
<li>What is TensorFlow Lite?</li>
<li>Benefits of using TensorFlow Lite for mobile applications</li>
<li>Supported platforms and devices</li>
</ul>
</li>
<li>
<p><strong>ML Kit</strong></p>
<ul>
<li>Overview of ML Kit</li>
<li>Pre-trained models vs. custom models</li>
<li>Key features of ML Kit (Vision, Natural Language, etc.)</li>
</ul>
</li>
</ol>
</div><h1><p>Setting Up TensorFlow Lite</p>
</h1>
<div class='content'></div><h2><p>Step 1: Add TensorFlow Lite Dependency</p>
</h2>
<div class='content'><p>To use TensorFlow Lite in your Android project, you need to add the TensorFlow Lite dependency to your <code>build.gradle</code> file.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVwZW5kZW5jaWVzIHsKICAgIGltcGxlbWVudGF0aW9uICdvcmcudGVuc29yZmxvdzp0ZW5zb3JmbG93LWxpdGU6Mi41LjAnCiAgICBpbXBsZW1lbnRhdGlvbiAnb3JnLnRlbnNvcmZsb3c6dGVuc29yZmxvdy1saXRlLXN1cHBvcnQ6MC4xLjAnCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dependencies {
    implementation 'org.tensorflow:tensorflow-lite:2.5.0'
    implementation 'org.tensorflow:tensorflow-lite-support:0.1.0'
}</pre></div><div class='content'></div><h2><p>Step 2: Download a Pre-trained Model</p>
</h2>
<div class='content'><p>For this example, we will use a pre-trained image classification model. You can download a model from TensorFlow Hub or use a custom-trained model.</p>
</div><h2><p>Step 3: Load the Model in Your App</p>
</h2>
<div class='content'><p>Create a new class to handle the model loading and inference.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy50ZW5zb3JmbG93LmxpdGUuSW50ZXJwcmV0ZXI7CmltcG9ydCBqYXZhLm5pby5NYXBwZWRCeXRlQnVmZmVyOwppbXBvcnQgamF2YS5uaW8uY2hhbm5lbHMuRmlsZUNoYW5uZWw7CmltcG9ydCBqYXZhLmlvLkZpbGVJbnB1dFN0cmVhbTsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CgpwdWJsaWMgY2xhc3MgSW1hZ2VDbGFzc2lmaWVyIHsKICAgIHByaXZhdGUgSW50ZXJwcmV0ZXIgaW50ZXJwcmV0ZXI7CgogICAgcHVibGljIEltYWdlQ2xhc3NpZmllcihDb250ZXh0IGNvbnRleHQpIHRocm93cyBJT0V4Y2VwdGlvbiB7CiAgICAgICAgTWFwcGVkQnl0ZUJ1ZmZlciBtb2RlbCA9IGxvYWRNb2RlbEZpbGUoY29udGV4dCk7CiAgICAgICAgaW50ZXJwcmV0ZXIgPSBuZXcgSW50ZXJwcmV0ZXIobW9kZWwpOwogICAgfQoKICAgIHByaXZhdGUgTWFwcGVkQnl0ZUJ1ZmZlciBsb2FkTW9kZWxGaWxlKENvbnRleHQgY29udGV4dCkgdGhyb3dzIElPRXhjZXB0aW9uIHsKICAgICAgICBBc3NldEZpbGVEZXNjcmlwdG9yIGZpbGVEZXNjcmlwdG9yID0gY29udGV4dC5nZXRBc3NldHMoKS5vcGVuRmQoIm1vZGVsLnRmbGl0ZSIpOwogICAgICAgIEZpbGVJbnB1dFN0cmVhbSBpbnB1dFN0cmVhbSA9IG5ldyBGaWxlSW5wdXRTdHJlYW0oZmlsZURlc2NyaXB0b3IuZ2V0RmlsZURlc2NyaXB0b3IoKSk7CiAgICAgICAgRmlsZUNoYW5uZWwgZmlsZUNoYW5uZWwgPSBpbnB1dFN0cmVhbS5nZXRDaGFubmVsKCk7CiAgICAgICAgbG9uZyBzdGFydE9mZnNldCA9IGZpbGVEZXNjcmlwdG9yLmdldFN0YXJ0T2Zmc2V0KCk7CiAgICAgICAgbG9uZyBkZWNsYXJlZExlbmd0aCA9IGZpbGVEZXNjcmlwdG9yLmdldERlY2xhcmVkTGVuZ3RoKCk7CiAgICAgICAgcmV0dXJuIGZpbGVDaGFubmVsLm1hcChGaWxlQ2hhbm5lbC5NYXBNb2RlLlJFQURfT05MWSwgc3RhcnRPZmZzZXQsIGRlY2xhcmVkTGVuZ3RoKTsKICAgIH0KCiAgICBwdWJsaWMgZmxvYXRbXSBjbGFzc2lmeShmbG9hdFtdIGlucHV0KSB7CiAgICAgICAgZmxvYXRbXVtdIG91dHB1dCA9IG5ldyBmbG9hdFsxXVsxXTsKICAgICAgICBpbnRlcnByZXRlci5ydW4oaW5wdXQsIG91dHB1dCk7CiAgICAgICAgcmV0dXJuIG91dHB1dFswXTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.tensorflow.lite.Interpreter;
import java.nio.MappedByteBuffer;
import java.nio.channels.FileChannel;
import java.io.FileInputStream;
import java.io.IOException;

public class ImageClassifier {
    private Interpreter interpreter;

    public ImageClassifier(Context context) throws IOException {
        MappedByteBuffer model = loadModelFile(context);
        interpreter = new Interpreter(model);
    }

    private MappedByteBuffer loadModelFile(Context context) throws IOException {
        AssetFileDescriptor fileDescriptor = context.getAssets().openFd(&quot;model.tflite&quot;);
        FileInputStream inputStream = new FileInputStream(fileDescriptor.getFileDescriptor());
        FileChannel fileChannel = inputStream.getChannel();
        long startOffset = fileDescriptor.getStartOffset();
        long declaredLength = fileDescriptor.getDeclaredLength();
        return fileChannel.map(FileChannel.MapMode.READ_ONLY, startOffset, declaredLength);
    }

    public float[] classify(float[] input) {
        float[][] output = new float[1][1];
        interpreter.run(input, output);
        return output[0];
    }
}</pre></div><div class='content'></div><h2><p>Step 4: Perform Inference</p>
</h2>
<div class='content'><p>Use the <code>ImageClassifier</code> class to perform inference on an image.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SW1hZ2VDbGFzc2lmaWVyIGNsYXNzaWZpZXIgPSBuZXcgSW1hZ2VDbGFzc2lmaWVyKGNvbnRleHQpOwpmbG9hdFtdIGlucHV0ID0gcHJlcHJvY2Vzc0ltYWdlKGJpdG1hcCk7IC8vIENvbnZlcnQgYml0bWFwIHRvIGZsb2F0IGFycmF5CmZsb2F0W10gcmVzdWx0ID0gY2xhc3NpZmllci5jbGFzc2lmeShpbnB1dCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ImageClassifier classifier = new ImageClassifier(context);
float[] input = preprocessImage(bitmap); // Convert bitmap to float array
float[] result = classifier.classify(input);</pre></div><div class='content'></div><h1><p>Using ML Kit</p>
</h1>
<div class='content'></div><h2><p>Step 1: Add ML Kit Dependency</p>
</h2>
<div class='content'><p>Add the ML Kit dependency to your <code>build.gradle</code> file.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVwZW5kZW5jaWVzIHsKICAgIGltcGxlbWVudGF0aW9uICdjb20uZ29vZ2xlLm1sa2l0OnZpc2lvbjoxNi4wLjAnCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dependencies {
    implementation 'com.google.mlkit:vision:16.0.0'
}</pre></div><div class='content'></div><h2><p>Step 2: Implement Image Labeling</p>
</h2>
<div class='content'><p>Use ML Kit's Image Labeling API to recognize objects in an image.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGNvbS5nb29nbGUubWxraXQudmlzaW9uLmNvbW1vbi5JbnB1dEltYWdlOwppbXBvcnQgY29tLmdvb2dsZS5tbGtpdC52aXNpb24ubGFiZWwuSW1hZ2VMYWJlbDsKaW1wb3J0IGNvbS5nb29nbGUubWxraXQudmlzaW9uLmxhYmVsLkltYWdlTGFiZWxlcjsKaW1wb3J0IGNvbS5nb29nbGUubWxraXQudmlzaW9uLmxhYmVsLkltYWdlTGFiZWxpbmc7CmltcG9ydCBjb20uZ29vZ2xlLm1sa2l0LnZpc2lvbi5sYWJlbC5kZWZhdWx0cy5JbWFnZUxhYmVsZXJPcHRpb25zOwoKSW5wdXRJbWFnZSBpbWFnZSA9IElucHV0SW1hZ2UuZnJvbUJpdG1hcChiaXRtYXAsIDApOwpJbWFnZUxhYmVsZXIgbGFiZWxlciA9IEltYWdlTGFiZWxpbmcuZ2V0Q2xpZW50KEltYWdlTGFiZWxlck9wdGlvbnMuREVGQVVMVF9PUFRJT05TKTsKCmxhYmVsZXIucHJvY2VzcyhpbWFnZSkKICAgIC5hZGRPblN1Y2Nlc3NMaXN0ZW5lcihuZXcgT25TdWNjZXNzTGlzdGVuZXI8TGlzdDxJbWFnZUxhYmVsPj4oKSB7CiAgICAgICAgQE92ZXJyaWRlCiAgICAgICAgcHVibGljIHZvaWQgb25TdWNjZXNzKExpc3Q8SW1hZ2VMYWJlbD4gbGFiZWxzKSB7CiAgICAgICAgICAgIGZvciAoSW1hZ2VMYWJlbCBsYWJlbCA6IGxhYmVscykgewogICAgICAgICAgICAgICAgU3RyaW5nIHRleHQgPSBsYWJlbC5nZXRUZXh0KCk7CiAgICAgICAgICAgICAgICBmbG9hdCBjb25maWRlbmNlID0gbGFiZWwuZ2V0Q29uZmlkZW5jZSgpOwogICAgICAgICAgICAgICAgTG9nLmQoIk1MS2l0IiwgIkxhYmVsOiAiICsgdGV4dCArICIsIENvbmZpZGVuY2U6ICIgKyBjb25maWRlbmNlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0pCiAgICAuYWRkT25GYWlsdXJlTGlzdGVuZXIobmV3IE9uRmFpbHVyZUxpc3RlbmVyKCkgewogICAgICAgIEBPdmVycmlkZQogICAgICAgIHB1YmxpYyB2b2lkIG9uRmFpbHVyZShATm9uTnVsbCBFeGNlcHRpb24gZSkgewogICAgICAgICAgICBMb2cuZSgiTUxLaXQiLCAiRXJyb3I6ICIgKyBlLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQogICAgfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import com.google.mlkit.vision.common.InputImage;
import com.google.mlkit.vision.label.ImageLabel;
import com.google.mlkit.vision.label.ImageLabeler;
import com.google.mlkit.vision.label.ImageLabeling;
import com.google.mlkit.vision.label.defaults.ImageLabelerOptions;

InputImage image = InputImage.fromBitmap(bitmap, 0);
ImageLabeler labeler = ImageLabeling.getClient(ImageLabelerOptions.DEFAULT_OPTIONS);

labeler.process(image)
    .addOnSuccessListener(new OnSuccessListener&lt;List&lt;ImageLabel&gt;&gt;() {
        @Override
        public void onSuccess(List&lt;ImageLabel&gt; labels) {
            for (ImageLabel label : labels) {
                String text = label.getText();
                float confidence = label.getConfidence();
                Log.d(&quot;MLKit&quot;, &quot;Label: &quot; + text + &quot;, Confidence: &quot; + confidence);
            }
        }
    })
    .addOnFailureListener(new OnFailureListener() {
        @Override
        public void onFailure(@NonNull Exception e) {
            Log.e(&quot;MLKit&quot;, &quot;Error: &quot; + e.getMessage());
        }
    });</pre></div><div class='content'></div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise: Implement a Simple Image Classifier</p>
</h2>
<div class='content'><ol>
<li><strong>Objective</strong>: Create an Android app that uses TensorFlow Lite to classify images.</li>
<li><strong>Steps</strong>:
<ul>
<li>Set up a new Android project.</li>
<li>Add TensorFlow Lite dependencies.</li>
<li>Download a pre-trained image classification model.</li>
<li>Implement the <code>ImageClassifier</code> class.</li>
<li>Create a simple UI to capture or select an image.</li>
<li>Use the <code>ImageClassifier</code> to classify the selected image and display the result.</li>
</ul>
</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'><ol>
<li><strong>Set up a new Android project</strong>: Follow the standard steps to create a new Android project in Android Studio.</li>
<li><strong>Add TensorFlow Lite dependencies</strong>: Add the dependencies as shown in the &quot;Setting Up TensorFlow Lite&quot; section.</li>
<li><strong>Download a pre-trained model</strong>: Download a model from TensorFlow Hub and place it in the <code>assets</code> folder.</li>
<li><strong>Implement the <code>ImageClassifier</code> class</strong>: Use the provided code to create the <code>ImageClassifier</code> class.</li>
<li><strong>Create a simple UI</strong>: Design a layout with an <code>ImageView</code> to display the image and a <code>Button</code> to trigger the classification.</li>
<li><strong>Classify the image</strong>: Use the <code>ImageClassifier</code> to classify the image and display the result in a <code>TextView</code>.</li>
</ol>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this module, we explored how to integrate machine learning into Android applications using TensorFlow Lite and ML Kit. We covered the basics of setting up TensorFlow Lite, loading a pre-trained model, and performing inference. Additionally, we demonstrated how to use ML Kit for image labeling. By completing the practical exercise, you should now have a solid understanding of how to implement machine learning features in your Android apps.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-03-implementing-in-app-purchases' title="Implementing In-App Purchases">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-05-augmented-reality-with-arcore' title="Augmented Reality with ARCore">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
