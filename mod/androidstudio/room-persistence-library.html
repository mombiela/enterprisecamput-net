<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room Persistence Library</title>

    <link rel="alternate" href="https://campusempresa.com/mod/androidstudio/room-persistence-library" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/androidstudio/room-persistence-library" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/androidstudio/room-persistence-library" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/androidstudio/room-persistence-library" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/androidstudio/room-persistence-library" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='sqlite-databases'>&#x25C4;SQLite Databases</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Room Persistence Library</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-networking'>Introduction to Networking &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Room</h1>
<div class='content'><p>The Room Persistence Library is part of Android's Jetpack suite and provides an abstraction layer over SQLite to allow for more robust database access while harnessing the full power of SQLite. Room simplifies database work and eliminates boilerplate code.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Entity</strong>: Represents a table within the database.</li>
<li><strong>DAO (Data Access Object)</strong>: Contains the methods used for accessing the database.</li>
<li><strong>Database</strong>: The main access point for the underlying connection to the app's persisted data.</li>
</ul>
</div><h1>Setting Up Room</h1>
<div class='content'><p>To use Room in your Android project, you need to add the necessary dependencies in your <code>build.gradle</code> file.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVwZW5kZW5jaWVzIHsKICAgIGltcGxlbWVudGF0aW9uICJhbmRyb2lkeC5yb29tOnJvb20tcnVudGltZToyLjMuMCIKICAgIGFubm90YXRpb25Qcm9jZXNzb3IgImFuZHJvaWR4LnJvb206cm9vbS1jb21waWxlcjoyLjMuMCIKICAgIC8vIEZvciBLb3RsaW4gdXNlIGthcHQgaW5zdGVhZCBvZiBhbm5vdGF0aW9uUHJvY2Vzc29yCiAgICBrYXB0ICJhbmRyb2lkeC5yb29tOnJvb20tY29tcGlsZXI6Mi4zLjAiCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dependencies {
    implementation &quot;androidx.room:room-runtime:2.3.0&quot;
    annotationProcessor &quot;androidx.room:room-compiler:2.3.0&quot;
    // For Kotlin use kapt instead of annotationProcessor
    kapt &quot;androidx.room:room-compiler:2.3.0&quot;
}</pre></div><div class='content'></div><h1>Creating an Entity</h1>
<div class='content'><p>An entity represents a table within the database. Each field in the entity corresponds to a column in the table.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWR4LnJvb20uRW50aXR5OwppbXBvcnQgYW5kcm9pZHgucm9vbS5QcmltYXJ5S2V5OwoKQEVudGl0eSh0YWJsZU5hbWUgPSAidXNlcnMiKQpwdWJsaWMgY2xhc3MgVXNlciB7CiAgICBAUHJpbWFyeUtleShhdXRvR2VuZXJhdGUgPSB0cnVlKQogICAgcHVibGljIGludCBpZDsKCiAgICBwdWJsaWMgU3RyaW5nIGZpcnN0TmFtZTsKICAgIHB1YmxpYyBTdHJpbmcgbGFzdE5hbWU7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import androidx.room.Entity;
import androidx.room.PrimaryKey;

@Entity(tableName = &quot;users&quot;)
public class User {
    @PrimaryKey(autoGenerate = true)
    public int id;

    public String firstName;
    public String lastName;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>@Entity</code>: Marks the class as an entity and provides the table name.</li>
<li><code>@PrimaryKey</code>: Marks the field as the primary key. <code>autoGenerate = true</code> means the ID will be auto-generated.</li>
</ul>
</div><h1>Creating a DAO</h1>
<div class='content'><p>The DAO (Data Access Object) is where you define methods for accessing the database.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWR4LnJvb20uRGFvOwppbXBvcnQgYW5kcm9pZHgucm9vbS5JbnNlcnQ7CmltcG9ydCBhbmRyb2lkeC5yb29tLlF1ZXJ5OwoKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKQERhbwpwdWJsaWMgaW50ZXJmYWNlIFVzZXJEYW8gewogICAgQEluc2VydAogICAgdm9pZCBpbnNlcnQoVXNlciB1c2VyKTsKCiAgICBAUXVlcnkoIlNFTEVDVCAqIEZST00gdXNlcnMiKQogICAgTGlzdDxVc2VyPiBnZXRBbGxVc2VycygpOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import androidx.room.Dao;
import androidx.room.Insert;
import androidx.room.Query;

import java.util.List;

@Dao
public interface UserDao {
    @Insert
    void insert(User user);

    @Query(&quot;SELECT * FROM users&quot;)
    List&lt;User&gt; getAllUsers();
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>@Dao</code>: Marks the interface as a DAO.</li>
<li><code>@Insert</code>: Marks the method as an insert operation.</li>
<li><code>@Query</code>: Marks the method as a query operation. The SQL query is provided as a string.</li>
</ul>
</div><h1>Creating the Database</h1>
<div class='content'><p>The database class provides the main access point to the persisted data.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWR4LnJvb20uRGF0YWJhc2U7CmltcG9ydCBhbmRyb2lkeC5yb29tLlJvb21EYXRhYmFzZTsKCkBEYXRhYmFzZShlbnRpdGllcyA9IHtVc2VyLmNsYXNzfSwgdmVyc2lvbiA9IDEpCnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBBcHBEYXRhYmFzZSBleHRlbmRzIFJvb21EYXRhYmFzZSB7CiAgICBwdWJsaWMgYWJzdHJhY3QgVXNlckRhbyB1c2VyRGFvKCk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import androidx.room.Database;
import androidx.room.RoomDatabase;

@Database(entities = {User.class}, version = 1)
public abstract class AppDatabase extends RoomDatabase {
    public abstract UserDao userDao();
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>@Database</code>: Marks the class as a Room database. The <code>entities</code> attribute lists all the entities associated with the database.</li>
<li><code>RoomDatabase</code>: The base class for Room databases. It provides the DAOs defined in the database.</li>
</ul>
</div><h1>Using Room in Your Application</h1>
<div class='content'><p>To use Room, you need to create an instance of the database and use the DAO to perform database operations.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWQuY29udGVudC5Db250ZXh0OwppbXBvcnQgYW5kcm9pZHgucm9vbS5Sb29tOwoKcHVibGljIGNsYXNzIE15QXBwIHsKICAgIHByaXZhdGUgQXBwRGF0YWJhc2UgZGI7CgogICAgcHVibGljIE15QXBwKENvbnRleHQgY29udGV4dCkgewogICAgICAgIGRiID0gUm9vbS5kYXRhYmFzZUJ1aWxkZXIoY29udGV4dCwgQXBwRGF0YWJhc2UuY2xhc3MsICJteS1kYXRhYmFzZSIpLmJ1aWxkKCk7CiAgICB9CgogICAgcHVibGljIHZvaWQgYWRkVXNlcihVc2VyIHVzZXIpIHsKICAgICAgICBkYi51c2VyRGFvKCkuaW5zZXJ0KHVzZXIpOwogICAgfQoKICAgIHB1YmxpYyBMaXN0PFVzZXI+IGdldEFsbFVzZXJzKCkgewogICAgICAgIHJldHVybiBkYi51c2VyRGFvKCkuZ2V0QWxsVXNlcnMoKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import android.content.Context;
import androidx.room.Room;

public class MyApp {
    private AppDatabase db;

    public MyApp(Context context) {
        db = Room.databaseBuilder(context, AppDatabase.class, &quot;my-database&quot;).build();
    }

    public void addUser(User user) {
        db.userDao().insert(user);
    }

    public List&lt;User&gt; getAllUsers() {
        return db.userDao().getAllUsers();
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>Room.databaseBuilder</code>: Creates a Room database instance.</li>
<li><code>db.userDao()</code>: Accesses the DAO to perform database operations.</li>
</ul>
</div><h1>Advanced Topics</h1>
<h2>Migrations</h2>
<div class='content'><p>When you need to change the database schema, you must provide a migration strategy.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWR4LnJvb20ubWlncmF0aW9uLk1pZ3JhdGlvbjsKaW1wb3J0IGFuZHJvaWR4LnNxbGl0ZS5kYi5TdXBwb3J0U1FMaXRlRGF0YWJhc2U7CgpNaWdyYXRpb24gTUlHUkFUSU9OXzFfMiA9IG5ldyBNaWdyYXRpb24oMSwgMikgewogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgdm9pZCBtaWdyYXRlKFN1cHBvcnRTUUxpdGVEYXRhYmFzZSBkYXRhYmFzZSkgewogICAgICAgIGRhdGFiYXNlLmV4ZWNTUUwoIkFMVEVSIFRBQkxFIHVzZXJzIEFERCBDT0xVTU4gYWdlIElOVEVHRVIiKTsKICAgIH0KfTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import androidx.room.migration.Migration;
import androidx.sqlite.db.SupportSQLiteDatabase;

Migration MIGRATION_1_2 = new Migration(1, 2) {
    @Override
    public void migrate(SupportSQLiteDatabase database) {
        database.execSQL(&quot;ALTER TABLE users ADD COLUMN age INTEGER&quot;);
    }
};</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>Migration</code>: Defines a migration from one version to another.</li>
<li><code>migrate()</code>: Contains the SQL statements to migrate the database.</li>
</ul>
</div><h2>Using LiveData with Room</h2>
<div class='content'><p>Room supports returning LiveData objects from DAO methods, which allows you to observe database changes.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFuZHJvaWR4LmxpZmVjeWNsZS5MaXZlRGF0YTsKCkBEYW8KcHVibGljIGludGVyZmFjZSBVc2VyRGFvIHsKICAgIEBRdWVyeSgiU0VMRUNUICogRlJPTSB1c2VycyIpCiAgICBMaXZlRGF0YTxMaXN0PFVzZXI+PiBnZXRBbGxVc2VycygpOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import androidx.lifecycle.LiveData;

@Dao
public interface UserDao {
    @Query(&quot;SELECT * FROM users&quot;)
    LiveData&lt;List&lt;User&gt;&gt; getAllUsers();
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>LiveData</code>: A lifecycle-aware data holder that allows you to observe changes.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>The Room Persistence Library simplifies database management in Android applications by providing a robust abstraction layer over SQLite. By understanding entities, DAOs, and the database class, you can efficiently manage your app's data. Advanced features like migrations and LiveData integration further enhance Room's capabilities, making it a powerful tool for Android developers.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='sqlite-databases'>&#x25C4;SQLite Databases</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Room Persistence Library</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-networking'>Introduction to Networking &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
