<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mocking with Mockito</title>

    <link rel="alternate" href="https://campusempresa.com/mod/springboot/06-04-mocking-mockito" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/springboot/06-04-mocking-mockito" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/springboot/06-04-mocking-mockito" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/springboot/06-04-mocking-mockito" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/springboot/06-04-mocking-mockito" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='06-03-integration-testing' title="Integration Testing">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Mocking with Mockito</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-01-spring-boot-actuator' title="Spring Boot Actuator">Next &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1><p>Introduction</p>
</h1>
<div class='content'><p>Mockito is a popular mocking framework for Java that allows you to create mock objects for unit testing. Mocking is a technique where you create objects that simulate the behavior of real objects. This is particularly useful in unit testing when you want to isolate the class under test from its dependencies.</p>
<p>In this section, we will cover:</p>
<ul>
<li>What is Mockito?</li>
<li>Setting up Mockito in a Spring Boot project</li>
<li>Creating and using mock objects</li>
<li>Writing unit tests with Mockito</li>
<li>Common mistakes and tips</li>
</ul>
</div><h1><p>What is Mockito?</p>
</h1>
<div class='content'><p>Mockito is a Java-based framework that is used to create mock objects. It simplifies the process of writing unit tests by allowing you to:</p>
<ul>
<li>Mock dependencies</li>
<li>Verify interactions</li>
<li>Stub methods to return specific values</li>
</ul>
</div><h1><p>Setting Up Mockito in a Spring Boot Project</p>
</h1>
<div class='content'><p>To use Mockito in a Spring Boot project, you need to add the following dependencies to your <code>pom.xml</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGRlcGVuZGVuY3k+CiAgICA8Z3JvdXBJZD5vcmcubW9ja2l0bzwvZ3JvdXBJZD4KICAgIDxhcnRpZmFjdElkPm1vY2tpdG8tY29yZTwvYXJ0aWZhY3RJZD4KICAgIDx2ZXJzaW9uPjMuMTEuMjwvdmVyc2lvbj4KICAgIDxzY29wZT50ZXN0PC9zY29wZT4KPC9kZXBlbmRlbmN5Pgo8ZGVwZW5kZW5jeT4KICAgIDxncm91cElkPm9yZy5zcHJpbmdmcmFtZXdvcmsuYm9vdDwvZ3JvdXBJZD4KICAgIDxhcnRpZmFjdElkPnNwcmluZy1ib290LXN0YXJ0ZXItdGVzdDwvYXJ0aWZhY3RJZD4KICAgIDxzY29wZT50ZXN0PC9zY29wZT4KPC9kZXBlbmRlbmN5Pg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;dependency&gt;
    &lt;groupId&gt;org.mockito&lt;/groupId&gt;
    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;
    &lt;version&gt;3.11.2&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre></div><div class='content'></div><h1><p>Creating and Using Mock Objects</p>
</h1>
<div class='content'></div><h2><p>Example Scenario</p>
</h2>
<div class='content'><p>Let's consider a simple service class <code>UserService</code> that depends on a repository <code>UserRepository</code> to fetch user data.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QFNlcnZpY2UKcHVibGljIGNsYXNzIFVzZXJTZXJ2aWNlIHsKICAgIEBBdXRvd2lyZWQKICAgIHByaXZhdGUgVXNlclJlcG9zaXRvcnkgdXNlclJlcG9zaXRvcnk7CgogICAgcHVibGljIFVzZXIgZ2V0VXNlckJ5SWQoTG9uZyBpZCkgewogICAgICAgIHJldHVybiB1c2VyUmVwb3NpdG9yeS5maW5kQnlJZChpZCkub3JFbHNlKG51bGwpOwogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@Service
public class UserService {
    @Autowired
    private UserRepository userRepository;

    public User getUserById(Long id) {
        return userRepository.findById(id).orElse(null);
    }
}</pre></div><div class='content'></div><h2><p>Creating a Mock Object</p>
</h2>
<div class='content'><p>To create a mock object of <code>UserRepository</code>, you can use the <code>@Mock</code> annotation provided by Mockito.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QFJ1bldpdGgoTW9ja2l0b0pVbml0UnVubmVyLmNsYXNzKQpwdWJsaWMgY2xhc3MgVXNlclNlcnZpY2VUZXN0IHsKCiAgICBATW9jawogICAgcHJpdmF0ZSBVc2VyUmVwb3NpdG9yeSB1c2VyUmVwb3NpdG9yeTsKCiAgICBASW5qZWN0TW9ja3MKICAgIHByaXZhdGUgVXNlclNlcnZpY2UgdXNlclNlcnZpY2U7CgogICAgQFRlc3QKICAgIHB1YmxpYyB2b2lkIHRlc3RHZXRVc2VyQnlJZCgpIHsKICAgICAgICBVc2VyIG1vY2tVc2VyID0gbmV3IFVzZXIoMUwsICJKb2huIERvZSIpOwogICAgICAgIE1vY2tpdG8ud2hlbih1c2VyUmVwb3NpdG9yeS5maW5kQnlJZCgxTCkpLnRoZW5SZXR1cm4oT3B0aW9uYWwub2YobW9ja1VzZXIpKTsKCiAgICAgICAgVXNlciB1c2VyID0gdXNlclNlcnZpY2UuZ2V0VXNlckJ5SWQoMUwpOwoKICAgICAgICBhc3NlcnROb3ROdWxsKHVzZXIpOwogICAgICAgIGFzc2VydEVxdWFscygiSm9obiBEb2UiLCB1c2VyLmdldE5hbWUoKSk7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@RunWith(MockitoJUnitRunner.class)
public class UserServiceTest {

    @Mock
    private UserRepository userRepository;

    @InjectMocks
    private UserService userService;

    @Test
    public void testGetUserById() {
        User mockUser = new User(1L, &quot;John Doe&quot;);
        Mockito.when(userRepository.findById(1L)).thenReturn(Optional.of(mockUser));

        User user = userService.getUserById(1L);

        assertNotNull(user);
        assertEquals(&quot;John Doe&quot;, user.getName());
    }
}</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><code>@RunWith(MockitoJUnitRunner.class)</code>: This annotation tells JUnit to use the Mockito test runner.</li>
<li><code>@Mock</code>: This annotation creates a mock instance of <code>UserRepository</code>.</li>
<li><code>@InjectMocks</code>: This annotation injects the mock objects into the <code>UserService</code> instance.</li>
<li><code>Mockito.when(...).thenReturn(...)</code>: This method stubs the <code>findById</code> method of <code>UserRepository</code> to return a specific value.</li>
</ul>
</div><h1><p>Writing Unit Tests with Mockito</p>
</h1>
<div class='content'></div><h2><p>Example: Testing a Service Method</p>
</h2>
<div class='content'><p>Let's write a unit test for a method in <code>UserService</code> that fetches a user by ID.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QFJ1bldpdGgoTW9ja2l0b0pVbml0UnVubmVyLmNsYXNzKQpwdWJsaWMgY2xhc3MgVXNlclNlcnZpY2VUZXN0IHsKCiAgICBATW9jawogICAgcHJpdmF0ZSBVc2VyUmVwb3NpdG9yeSB1c2VyUmVwb3NpdG9yeTsKCiAgICBASW5qZWN0TW9ja3MKICAgIHByaXZhdGUgVXNlclNlcnZpY2UgdXNlclNlcnZpY2U7CgogICAgQFRlc3QKICAgIHB1YmxpYyB2b2lkIHRlc3RHZXRVc2VyQnlJZCgpIHsKICAgICAgICBVc2VyIG1vY2tVc2VyID0gbmV3IFVzZXIoMUwsICJKb2huIERvZSIpOwogICAgICAgIE1vY2tpdG8ud2hlbih1c2VyUmVwb3NpdG9yeS5maW5kQnlJZCgxTCkpLnRoZW5SZXR1cm4oT3B0aW9uYWwub2YobW9ja1VzZXIpKTsKCiAgICAgICAgVXNlciB1c2VyID0gdXNlclNlcnZpY2UuZ2V0VXNlckJ5SWQoMUwpOwoKICAgICAgICBhc3NlcnROb3ROdWxsKHVzZXIpOwogICAgICAgIGFzc2VydEVxdWFscygiSm9obiBEb2UiLCB1c2VyLmdldE5hbWUoKSk7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@RunWith(MockitoJUnitRunner.class)
public class UserServiceTest {

    @Mock
    private UserRepository userRepository;

    @InjectMocks
    private UserService userService;

    @Test
    public void testGetUserById() {
        User mockUser = new User(1L, &quot;John Doe&quot;);
        Mockito.when(userRepository.findById(1L)).thenReturn(Optional.of(mockUser));

        User user = userService.getUserById(1L);

        assertNotNull(user);
        assertEquals(&quot;John Doe&quot;, user.getName());
    }
}</pre></div><div class='content'></div><h2><p>Example: Verifying Interactions</p>
</h2>
<div class='content'><p>You can also verify that certain methods were called on the mock objects.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QFRlc3QKcHVibGljIHZvaWQgdGVzdEdldFVzZXJCeUlkX1ZlcmlmeUludGVyYWN0aW9uKCkgewogICAgVXNlciBtb2NrVXNlciA9IG5ldyBVc2VyKDFMLCAiSm9obiBEb2UiKTsKICAgIE1vY2tpdG8ud2hlbih1c2VyUmVwb3NpdG9yeS5maW5kQnlJZCgxTCkpLnRoZW5SZXR1cm4oT3B0aW9uYWwub2YobW9ja1VzZXIpKTsKCiAgICB1c2VyU2VydmljZS5nZXRVc2VyQnlJZCgxTCk7CgogICAgTW9ja2l0by52ZXJpZnkodXNlclJlcG9zaXRvcnkpLmZpbmRCeUlkKDFMKTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@Test
public void testGetUserById_VerifyInteraction() {
    User mockUser = new User(1L, &quot;John Doe&quot;);
    Mockito.when(userRepository.findById(1L)).thenReturn(Optional.of(mockUser));

    userService.getUserById(1L);

    Mockito.verify(userRepository).findById(1L);
}</pre></div><div class='content'></div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'></div><h2><p>Common Mistakes</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Forgetting to annotate the test class with <code>@RunWith(MockitoJUnitRunner.class)</code></strong>:</p>
<ul>
<li>This will result in <code>NullPointerException</code> because the mocks are not initialized.</li>
</ul>
</li>
<li>
<p><strong>Not using <code>@InjectMocks</code></strong>:</p>
<ul>
<li>This will result in the service class not having its dependencies injected, leading to <code>NullPointerException</code>.</li>
</ul>
</li>
<li>
<p><strong>Incorrect stubbing</strong>:</p>
<ul>
<li>Ensure that the method signature in <code>Mockito.when(...)</code> matches the actual method signature.</li>
</ul>
</li>
</ol>
</div><h2><p>Tips</p>
</h2>
<div class='content'><ul>
<li>
<p><strong>Use <code>@MockBean</code> for integration tests</strong>:</p>
<ul>
<li>In Spring Boot integration tests, use <code>@MockBean</code> to mock beans in the application context.</li>
</ul>
</li>
<li>
<p><strong>Use <code>ArgumentCaptor</code> to capture arguments</strong>:</p>
<ul>
<li>Use <code>ArgumentCaptor</code> to capture and assert the arguments passed to mock methods.</li>
</ul>
</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the basics of using Mockito for mocking in Spring Boot applications. We learned how to set up Mockito, create and use mock objects, write unit tests, and verify interactions. By mastering these techniques, you can write more effective and isolated unit tests for your Spring Boot applications.</p>
<p>Next, we will delve into more advanced testing techniques in Spring Boot, including integration testing.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='06-03-integration-testing' title="Integration Testing">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-01-spring-boot-actuator' title="Spring Boot Actuator">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
