<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Containers in Spring Boot</title>

    <link rel="alternate" href="https://campusempresa.com/mod/springboot/test-containers" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/springboot/test-containers" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/springboot/test-containers" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/springboot/test-containers" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/springboot/test-containers" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='testing-restful-web-services'>&#x25C4;Testing RESTful Web Services</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Test Containers in Spring Boot</a>
	</div>
	<div class='col-4 text-end'>
					<a href='spring-boot-actuator'>Spring Boot Actuator &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Test Containers</h1>
<div class='content'><p>Test Containers is a Java library that supports JUnit tests by providing lightweight, throwaway instances of common databases, Selenium web browsers, or anything else that can run in a Docker container. This allows developers to write reliable integration tests that interact with real instances of the services their application depends on.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Docker Containers</strong>: Lightweight, standalone, and executable software packages that include everything needed to run a piece of software, including the code, runtime, libraries, and settings.</li>
<li><strong>JUnit</strong>: A popular testing framework for Java applications.</li>
<li><strong>Integration Testing</strong>: Testing in which software modules are combined and tested as a group to ensure they work together as expected.</li>
</ul>
</div><h1>Setting Up Test Containers</h1>
<div class='content'><p>To use Test Containers in a Spring Boot project, you need to add the necessary dependencies to your <code>pom.xml</code> or <code>build.gradle</code> file.</p>
</div><h2>Maven Dependency</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGRlcGVuZGVuY3k+CiAgICA8Z3JvdXBJZD5vcmcudGVzdGNvbnRhaW5lcnM8L2dyb3VwSWQ+CiAgICA8YXJ0aWZhY3RJZD50ZXN0Y29udGFpbmVyczwvYXJ0aWZhY3RJZD4KICAgIDx2ZXJzaW9uPjEuMTYuMDwvdmVyc2lvbj4KICAgIDxzY29wZT50ZXN0PC9zY29wZT4KPC9kZXBlbmRlbmN5Pgo8ZGVwZW5kZW5jeT4KICAgIDxncm91cElkPm9yZy50ZXN0Y29udGFpbmVyczwvZ3JvdXBJZD4KICAgIDxhcnRpZmFjdElkPmp1bml0LWp1cGl0ZXI8L2FydGlmYWN0SWQ+CiAgICA8dmVyc2lvbj4xLjE2LjA8L3ZlcnNpb24+CiAgICA8c2NvcGU+dGVzdDwvc2NvcGU+CjwvZGVwZW5kZW5jeT4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;dependency&gt;
    &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;
    &lt;artifactId&gt;testcontainers&lt;/artifactId&gt;
    &lt;version&gt;1.16.0&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;
    &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;
    &lt;version&gt;1.16.0&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre></div><div class='content'></div><h2>Gradle Dependency</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVzdEltcGxlbWVudGF0aW9uICdvcmcudGVzdGNvbnRhaW5lcnM6dGVzdGNvbnRhaW5lcnM6MS4xNi4wJwp0ZXN0SW1wbGVtZW50YXRpb24gJ29yZy50ZXN0Y29udGFpbmVyczpqdW5pdC1qdXBpdGVyOjEuMTYuMCc="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>testImplementation 'org.testcontainers:testcontainers:1.16.0'
testImplementation 'org.testcontainers:junit-jupiter:1.16.0'</pre></div><div class='content'></div><h1>Using Test Containers with Spring Boot</h1>
<h2>Example: Running a PostgreSQL Container</h2>
<div class='content'><p>To demonstrate how to use Test Containers, let's set up a PostgreSQL container for integration testing.</p>
<ol>
<li>
<p><strong>Define the PostgreSQL Container</strong>:</p>
<pre><code class="language-java">import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;
import org.testcontainers.containers.PostgreSQLContainer;

@SpringBootTest
public class PostgresContainerTest {

    static PostgreSQLContainer&lt;?&gt; postgresContainer = new PostgreSQLContainer&lt;&gt;(&quot;postgres:13.1&quot;)
            .withDatabaseName(&quot;testdb&quot;)
            .withUsername(&quot;testuser&quot;)
            .withPassword(&quot;testpass&quot;);

    static {
        postgresContainer.start();
    }

    @Test
    void contextLoads() {
        // Your test logic here
    }
}
</code></pre>
</li>
<li>
<p><strong>Configure Spring Boot to Use the Container</strong>:
Update your <code>application.properties</code> to use the container's database configuration.</p>
<pre><code class="language-properties">spring.datasource.url=jdbc:postgresql://localhost:${postgresContainer.getMappedPort(5432)}/testdb
spring.datasource.username=testuser
spring.datasource.password=testpass
spring.datasource.driver-class-name=org.postgresql.Driver
</code></pre>
</li>
</ol>
</div><h2>Example: Running a Redis Container</h2>
<div class='content'><ol>
<li>
<p><strong>Define the Redis Container</strong>:</p>
<pre><code class="language-java">import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;
import org.testcontainers.containers.GenericContainer;

@SpringBootTest
public class RedisContainerTest {

    static GenericContainer&lt;?&gt; redisContainer = new GenericContainer&lt;&gt;(&quot;redis:6.2.5&quot;)
            .withExposedPorts(6379);

    static {
        redisContainer.start();
    }

    @Test
    void contextLoads() {
        // Your test logic here
    }
}
</code></pre>
</li>
<li>
<p><strong>Configure Spring Boot to Use the Container</strong>:
Update your <code>application.properties</code> to use the container's Redis configuration.</p>
<pre><code class="language-properties">spring.redis.host=localhost
spring.redis.port=${redisContainer.getMappedPort(6379)}
</code></pre>
</li>
</ol>
</div><h1>Advanced Usage</h1>
<h2>Customizing Containers</h2>
<div class='content'><p>You can customize containers further by adding environment variables, mounting volumes, or linking containers.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UG9zdGdyZVNRTENvbnRhaW5lcjw/PiBwb3N0Z3Jlc0NvbnRhaW5lciA9IG5ldyBQb3N0Z3JlU1FMQ29udGFpbmVyPD4oInBvc3RncmVzOjEzLjEiKQogICAgICAgIC53aXRoRGF0YWJhc2VOYW1lKCJ0ZXN0ZGIiKQogICAgICAgIC53aXRoVXNlcm5hbWUoInRlc3R1c2VyIikKICAgICAgICAud2l0aFBhc3N3b3JkKCJ0ZXN0cGFzcyIpCiAgICAgICAgLndpdGhFbnYoIlBPU1RHUkVTX0lOSVREQl9BUkdTIiwgIi0tZW5jb2Rpbmc9VVRGLTgiKQogICAgICAgIC53aXRoRmlsZVN5c3RlbUJpbmQoIi9wYXRoL3RvL2luaXQuc3FsIiwgIi9kb2NrZXItZW50cnlwb2ludC1pbml0ZGIuZC9pbml0LnNxbCIpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PostgreSQLContainer&lt;?&gt; postgresContainer = new PostgreSQLContainer&lt;&gt;(&quot;postgres:13.1&quot;)
        .withDatabaseName(&quot;testdb&quot;)
        .withUsername(&quot;testuser&quot;)
        .withPassword(&quot;testpass&quot;)
        .withEnv(&quot;POSTGRES_INITDB_ARGS&quot;, &quot;--encoding=UTF-8&quot;)
        .withFileSystemBind(&quot;/path/to/init.sql&quot;, &quot;/docker-entrypoint-initdb.d/init.sql&quot;);</pre></div><div class='content'></div><h2>Reusing Containers</h2>
<div class='content'><p>To speed up tests, you can reuse containers across multiple test classes.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5qdW5pdC5qdXBpdGVyLmFwaS5leHRlbnNpb24uRXh0ZW5kV2l0aDsKaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsudGVzdC5jb250ZXh0Lmp1bml0Lmp1cGl0ZXIuU3ByaW5nRXh0ZW5zaW9uOwppbXBvcnQgb3JnLnRlc3Rjb250YWluZXJzLmp1bml0Lmp1cGl0ZXIuQ29udGFpbmVyOwppbXBvcnQgb3JnLnRlc3Rjb250YWluZXJzLmp1bml0Lmp1cGl0ZXIuVGVzdGNvbnRhaW5lcnM7CgpAVGVzdGNvbnRhaW5lcnMKQEV4dGVuZFdpdGgoU3ByaW5nRXh0ZW5zaW9uLmNsYXNzKQpwdWJsaWMgY2xhc3MgUmV1c2VDb250YWluZXJUZXN0IHsKCiAgICBAQ29udGFpbmVyCiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBQb3N0Z3JlU1FMQ29udGFpbmVyPD8+IHBvc3RncmVzQ29udGFpbmVyID0gbmV3IFBvc3RncmVTUUxDb250YWluZXI8PigicG9zdGdyZXM6MTMuMSIpCiAgICAgICAgICAgIC53aXRoRGF0YWJhc2VOYW1lKCJ0ZXN0ZGIiKQogICAgICAgICAgICAud2l0aFVzZXJuYW1lKCJ0ZXN0dXNlciIpCiAgICAgICAgICAgIC53aXRoUGFzc3dvcmQoInRlc3RwYXNzIik7CgogICAgQFRlc3QKICAgIHZvaWQgdGVzdDEoKSB7CiAgICAgICAgLy8gVGVzdCBsb2dpYwogICAgfQoKICAgIEBUZXN0CiAgICB2b2lkIHRlc3QyKCkgewogICAgICAgIC8vIFRlc3QgbG9naWMKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.junit.jupiter.api.extension.ExtendWith;
import org.springframework.test.context.junit.jupiter.SpringExtension;
import org.testcontainers.junit.jupiter.Container;
import org.testcontainers.junit.jupiter.Testcontainers;

@Testcontainers
@ExtendWith(SpringExtension.class)
public class ReuseContainerTest {

    @Container
    private static final PostgreSQLContainer&lt;?&gt; postgresContainer = new PostgreSQLContainer&lt;&gt;(&quot;postgres:13.1&quot;)
            .withDatabaseName(&quot;testdb&quot;)
            .withUsername(&quot;testuser&quot;)
            .withPassword(&quot;testpass&quot;);

    @Test
    void test1() {
        // Test logic
    }

    @Test
    void test2() {
        // Test logic
    }
}</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Test Containers provide a powerful way to perform integration testing in Spring Boot applications by leveraging Docker containers. They allow you to test your application against real instances of the services it depends on, ensuring higher reliability and consistency in your tests. By following the examples and guidelines provided, you can set up and customize Test Containers to suit your testing needs, from simple database containers to more complex multi-service setups.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='testing-restful-web-services'>&#x25C4;Testing RESTful Web Services</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Test Containers in Spring Boot</a>
	</div>
	<div class='col-4 text-end'>
					<a href='spring-boot-actuator'>Spring Boot Actuator &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
