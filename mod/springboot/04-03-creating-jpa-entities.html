<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creating JPA Entities</title>

    <link rel="alternate" href="https://campusempresa.com/mod/springboot/04-03-creating-jpa-entities" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/springboot/04-03-creating-jpa-entities" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/springboot/04-03-creating-jpa-entities" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/springboot/04-03-creating-jpa-entities" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/springboot/04-03-creating-jpa-entities" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-02-configuring-data-sources' title="Configuring Data Sources">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Creating JPA Entities</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='04-04-using-spring-data-repositories' title="Using Spring Data Repositories">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will delve into creating JPA (Java Persistence API) entities in a Spring Boot application. JPA entities are the backbone of any data-driven application, representing the data stored in your database in a Java object-oriented manner.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>JPA Entity</strong>: A lightweight, persistent domain object that typically represents a table in a relational database.</li>
<li><strong>Annotations</strong>: Used to map Java classes to database tables and Java fields to database columns.</li>
<li><strong>Primary Key</strong>: A unique identifier for each entity instance.</li>
<li><strong>Relationships</strong>: Define how entities relate to each other (e.g., One-to-One, One-to-Many, Many-to-One, Many-to-Many).</li>
</ol>
</div><h1>Step-by-Step Guide</h1>
<div class='content'></div><h2>1. Define the Entity Class</h2>
<div class='content'><p>An entity class is a simple Java class annotated with <code>@Entity</code>. This annotation tells JPA that the class should be mapped to a database table.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLklkOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuR2VuZXJhdGVkVmFsdWU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5HZW5lcmF0aW9uVHlwZTsKCkBFbnRpdHkKcHVibGljIGNsYXNzIFVzZXIgewogICAgCiAgICBASWQKICAgIEBHZW5lcmF0ZWRWYWx1ZShzdHJhdGVneSA9IEdlbmVyYXRpb25UeXBlLklERU5USVRZKQogICAgcHJpdmF0ZSBMb25nIGlkOwogICAgCiAgICBwcml2YXRlIFN0cmluZyB1c2VybmFtZTsKICAgIHByaXZhdGUgU3RyaW5nIGVtYWlsOwogICAgCiAgICAvLyBHZXR0ZXJzIGFuZCBTZXR0ZXJzCiAgICBwdWJsaWMgTG9uZyBnZXRJZCgpIHsKICAgICAgICByZXR1cm4gaWQ7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0SWQoTG9uZyBpZCkgewogICAgICAgIHRoaXMuaWQgPSBpZDsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldFVzZXJuYW1lKCkgewogICAgICAgIHJldHVybiB1c2VybmFtZTsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBzZXRVc2VybmFtZShTdHJpbmcgdXNlcm5hbWUpIHsKICAgICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRFbWFpbCgpIHsKICAgICAgICByZXR1cm4gZW1haWw7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0RW1haWwoU3RyaW5nIGVtYWlsKSB7CiAgICAgICAgdGhpcy5lbWFpbCA9IGVtYWlsOwogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;

@Entity
public class User {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String username;
    private String email;
    
    // Getters and Setters
    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>@Entity</code>: Marks the class as a JPA entity.</li>
<li><code>@Id</code>: Specifies the primary key of the entity.</li>
<li><code>@GeneratedValue(strategy = GenerationType.IDENTITY)</code>: Indicates that the primary key should be generated automatically by the database.</li>
</ul>
</div><h2>2. Mapping Fields to Columns</h2>
<div class='content'><p>By default, JPA maps the fields of the entity to columns with the same name in the database table. You can customize this mapping using the <code>@Column</code> annotation.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkNvbHVtbjsKCkBFbnRpdHkKcHVibGljIGNsYXNzIFVzZXIgewogICAgCiAgICBASWQKICAgIEBHZW5lcmF0ZWRWYWx1ZShzdHJhdGVneSA9IEdlbmVyYXRpb25UeXBlLklERU5USVRZKQogICAgcHJpdmF0ZSBMb25nIGlkOwogICAgCiAgICBAQ29sdW1uKG5hbWUgPSAidXNlcl9uYW1lIiwgbnVsbGFibGUgPSBmYWxzZSwgdW5pcXVlID0gdHJ1ZSkKICAgIHByaXZhdGUgU3RyaW5nIHVzZXJuYW1lOwogICAgCiAgICBAQ29sdW1uKG5hbWUgPSAiZW1haWxfYWRkcmVzcyIsIG51bGxhYmxlID0gZmFsc2UpCiAgICBwcml2YXRlIFN0cmluZyBlbWFpbDsKICAgIAogICAgLy8gR2V0dGVycyBhbmQgU2V0dGVycwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import javax.persistence.Column;

@Entity
public class User {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(name = &quot;user_name&quot;, nullable = false, unique = true)
    private String username;
    
    @Column(name = &quot;email_address&quot;, nullable = false)
    private String email;
    
    // Getters and Setters
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>@Column(name = &quot;user_name&quot;, nullable = false, unique = true)</code>: Maps the <code>username</code> field to the <code>user_name</code> column in the database. The <code>nullable = false</code> attribute ensures that the column cannot be null, and <code>unique = true</code> ensures that the value is unique.</li>
</ul>
</div><h2>3. Defining Relationships</h2>
<div class='content'><p>Entities often have relationships with other entities. These relationships are defined using annotations such as <code>@OneToOne</code>, <code>@OneToMany</code>, <code>@ManyToOne</code>, and <code>@ManyToMany</code>.</p>
<h4>One-to-Many Relationship</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLk9uZVRvTWFueTsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKQEVudGl0eQpwdWJsaWMgY2xhc3MgVXNlciB7CiAgICAKICAgIEBJZAogICAgQEdlbmVyYXRlZFZhbHVlKHN0cmF0ZWd5ID0gR2VuZXJhdGlvblR5cGUuSURFTlRJVFkpCiAgICBwcml2YXRlIExvbmcgaWQ7CiAgICAKICAgIHByaXZhdGUgU3RyaW5nIHVzZXJuYW1lOwogICAgcHJpdmF0ZSBTdHJpbmcgZW1haWw7CiAgICAKICAgIEBPbmVUb01hbnkobWFwcGVkQnkgPSAidXNlciIpCiAgICBwcml2YXRlIExpc3Q8UG9zdD4gcG9zdHM7CiAgICAKICAgIC8vIEdldHRlcnMgYW5kIFNldHRlcnMKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import javax.persistence.OneToMany;
import java.util.List;

@Entity
public class User {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String username;
    private String email;
    
    @OneToMany(mappedBy = &quot;user&quot;)
    private List&lt;Post&gt; posts;
    
    // Getters and Setters
}</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLklkOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuR2VuZXJhdGVkVmFsdWU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5HZW5lcmF0aW9uVHlwZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLk1hbnlUb09uZTsKCkBFbnRpdHkKcHVibGljIGNsYXNzIFBvc3QgewogICAgCiAgICBASWQKICAgIEBHZW5lcmF0ZWRWYWx1ZShzdHJhdGVneSA9IEdlbmVyYXRpb25UeXBlLklERU5USVRZKQogICAgcHJpdmF0ZSBMb25nIGlkOwogICAgCiAgICBwcml2YXRlIFN0cmluZyB0aXRsZTsKICAgIHByaXZhdGUgU3RyaW5nIGNvbnRlbnQ7CiAgICAKICAgIEBNYW55VG9PbmUKICAgIHByaXZhdGUgVXNlciB1c2VyOwogICAgCiAgICAvLyBHZXR0ZXJzIGFuZCBTZXR0ZXJzCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.ManyToOne;

@Entity
public class Post {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String title;
    private String content;
    
    @ManyToOne
    private User user;
    
    // Getters and Setters
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>@OneToMany(mappedBy = &quot;user&quot;)</code>: Indicates a one-to-many relationship between <code>User</code> and <code>Post</code>. The <code>mappedBy</code> attribute specifies the field in the <code>Post</code> entity that owns the relationship.</li>
<li><code>@ManyToOne</code>: Indicates a many-to-one relationship from <code>Post</code> to <code>User</code>.</li>
</ul>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Task</h2>
<div class='content'><p>Create a <code>Book</code> entity and an <code>Author</code> entity with a one-to-many relationship. Each author can write multiple books, but each book is written by one author.</p>
</div><h2>Solution</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLklkOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuR2VuZXJhdGVkVmFsdWU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5HZW5lcmF0aW9uVHlwZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLk9uZVRvTWFueTsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKQEVudGl0eQpwdWJsaWMgY2xhc3MgQXV0aG9yIHsKICAgIAogICAgQElkCiAgICBAR2VuZXJhdGVkVmFsdWUoc3RyYXRlZ3kgPSBHZW5lcmF0aW9uVHlwZS5JREVOVElUWSkKICAgIHByaXZhdGUgTG9uZyBpZDsKICAgIAogICAgcHJpdmF0ZSBTdHJpbmcgbmFtZTsKICAgIAogICAgQE9uZVRvTWFueShtYXBwZWRCeSA9ICJhdXRob3IiKQogICAgcHJpdmF0ZSBMaXN0PEJvb2s+IGJvb2tzOwogICAgCiAgICAvLyBHZXR0ZXJzIGFuZCBTZXR0ZXJzCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.OneToMany;
import java.util.List;

@Entity
public class Author {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String name;
    
    @OneToMany(mappedBy = &quot;author&quot;)
    private List&lt;Book&gt; books;
    
    // Getters and Setters
}</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLklkOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuR2VuZXJhdGVkVmFsdWU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5HZW5lcmF0aW9uVHlwZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLk1hbnlUb09uZTsKCkBFbnRpdHkKcHVibGljIGNsYXNzIEJvb2sgewogICAgCiAgICBASWQKICAgIEBHZW5lcmF0ZWRWYWx1ZShzdHJhdGVneSA9IEdlbmVyYXRpb25UeXBlLklERU5USVRZKQogICAgcHJpdmF0ZSBMb25nIGlkOwogICAgCiAgICBwcml2YXRlIFN0cmluZyB0aXRsZTsKICAgIAogICAgQE1hbnlUb09uZQogICAgcHJpdmF0ZSBBdXRob3IgYXV0aG9yOwogICAgCiAgICAvLyBHZXR0ZXJzIGFuZCBTZXR0ZXJzCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.ManyToOne;

@Entity
public class Book {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    private String title;
    
    @ManyToOne
    private Author author;
    
    // Getters and Setters
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>Author</code> entity has a one-to-many relationship with the <code>Book</code> entity.</li>
<li><code>Book</code> entity has a many-to-one relationship with the <code>Author</code> entity.</li>
</ul>
</div><h1>Common Mistakes</h1>
<div class='content'><ol>
<li><strong>Forgetting to Annotate the Class with <code>@Entity</code></strong>: This will result in the class not being recognized as an entity.</li>
<li><strong>Not Defining a Primary Key</strong>: Every entity must have a primary key.</li>
<li><strong>Incorrect Mapping of Relationships</strong>: Ensure that the <code>mappedBy</code> attribute is correctly set to avoid issues with bidirectional relationships.</li>
</ol>
</div><h1>Summary</h1>
<div class='content'><p>In this section, we covered the basics of creating JPA entities in a Spring Boot application. We learned how to define entity classes, map fields to database columns, and establish relationships between entities. By understanding these concepts, you can effectively model your application's data layer using JPA.</p>
<p>Next, we will explore how to use Spring Data repositories to interact with these entities in the database.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-02-configuring-data-sources' title="Configuring Data Sources">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='04-04-using-spring-data-repositories' title="Using Spring Data Repositories">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
