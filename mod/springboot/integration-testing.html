<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integration Testing in Spring Boot</title>

    <link rel="alternate" href="https://campusempresa.com/mod/springboot/integration-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/springboot/integration-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/springboot/integration-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/springboot/integration-testing" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/springboot/integration-testing" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing-with-junit-and-mockito'>&#x25C4;Unit Testing with JUnit and Mockito</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Integration Testing in Spring Boot</a>
	</div>
	<div class='col-4 text-end'>
					<a href='testing-restful-web-services'>Testing RESTful Web Services &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Integration testing is a crucial part of the software development lifecycle, especially in Spring Boot applications. It ensures that different parts of the application work together as expected. This topic will guide you through the essentials of integration testing in Spring Boot, from beginner to advanced levels.</p>
</div><h1>What is Integration Testing?</h1>
<div class='content'><p>Integration testing involves testing the interactions between different modules or components of an application. Unlike unit tests, which test individual components in isolation, integration tests verify that the components work together correctly.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Integration Tests vs. Unit Tests</strong>: Unit tests focus on individual components, while integration tests focus on the interaction between components.</li>
<li><strong>Spring Context</strong>: In Spring Boot, integration tests often involve loading the Spring application context to test the interactions between beans.</li>
<li><strong>Test Environment</strong>: Integration tests may require a more complex setup, including databases, external services, and other dependencies.</li>
</ul>
</div><h1>Setting Up Integration Tests in Spring Boot</h1>
<div class='content'><p>To set up integration tests in Spring Boot, you need to include the necessary dependencies and configure your test environment.</p>
</div><h2>Dependencies</h2>
<div class='content'><p>Add the following dependencies to your <code>pom.xml</code> or <code>build.gradle</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSBGb3IgTWF2ZW4gLS0+CjxkZXBlbmRlbmN5PgogICAgPGdyb3VwSWQ+b3JnLnNwcmluZ2ZyYW1ld29yay5ib290PC9ncm91cElkPgogICAgPGFydGlmYWN0SWQ+c3ByaW5nLWJvb3Qtc3RhcnRlci10ZXN0PC9hcnRpZmFjdElkPgogICAgPHNjb3BlPnRlc3Q8L3Njb3BlPgo8L2RlcGVuZGVuY3k+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- For Maven --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRm9yIEdyYWRsZQp0ZXN0SW1wbGVtZW50YXRpb24gJ29yZy5zcHJpbmdmcmFtZXdvcmsuYm9vdDpzcHJpbmctYm9vdC1zdGFydGVyLXRlc3Qn"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// For Gradle
testImplementation 'org.springframework.boot:spring-boot-starter-test'</pre></div><div class='content'></div><h2>Configuration</h2>
<div class='content'><p>Spring Boot provides several annotations to help configure your integration tests:</p>
<ul>
<li><code>@SpringBootTest</code>: Loads the full application context.</li>
<li><code>@TestConfiguration</code>: Defines additional beans or configurations for testing.</li>
<li><code>@MockBean</code>: Creates and injects mocks into the Spring context.</li>
</ul>
</div><h1>Writing Your First Integration Test</h1>
<div class='content'><p>Let's write a simple integration test for a Spring Boot application.</p>
</div><h2>Example Application</h2>
<div class='content'><p>Assume we have a simple <code>UserService</code> that interacts with a <code>UserRepository</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QFNlcnZpY2UKcHVibGljIGNsYXNzIFVzZXJTZXJ2aWNlIHsKICAgIEBBdXRvd2lyZWQKICAgIHByaXZhdGUgVXNlclJlcG9zaXRvcnkgdXNlclJlcG9zaXRvcnk7CgogICAgcHVibGljIFVzZXIgZ2V0VXNlckJ5SWQoTG9uZyBpZCkgewogICAgICAgIHJldHVybiB1c2VyUmVwb3NpdG9yeS5maW5kQnlJZChpZCkub3JFbHNlKG51bGwpOwogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@Service
public class UserService {
    @Autowired
    private UserRepository userRepository;

    public User getUserById(Long id) {
        return userRepository.findById(id).orElse(null);
    }
}</pre></div><div class='content'></div><h2>Integration Test Example</h2>
<div class='content'><p>Here's how you can write an integration test for the <code>UserService</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QFJ1bldpdGgoU3ByaW5nUnVubmVyLmNsYXNzKQpAU3ByaW5nQm9vdFRlc3QKcHVibGljIGNsYXNzIFVzZXJTZXJ2aWNlSW50ZWdyYXRpb25UZXN0IHsKCiAgICBAQXV0b3dpcmVkCiAgICBwcml2YXRlIFVzZXJTZXJ2aWNlIHVzZXJTZXJ2aWNlOwoKICAgIEBBdXRvd2lyZWQKICAgIHByaXZhdGUgVXNlclJlcG9zaXRvcnkgdXNlclJlcG9zaXRvcnk7CgogICAgQEJlZm9yZQogICAgcHVibGljIHZvaWQgc2V0VXAoKSB7CiAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoKTsKICAgICAgICB1c2VyLnNldElkKDFMKTsKICAgICAgICB1c2VyLnNldE5hbWUoIkpvaG4gRG9lIik7CiAgICAgICAgdXNlclJlcG9zaXRvcnkuc2F2ZSh1c2VyKTsKICAgIH0KCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVzdEdldFVzZXJCeUlkKCkgewogICAgICAgIFVzZXIgdXNlciA9IHVzZXJTZXJ2aWNlLmdldFVzZXJCeUlkKDFMKTsKICAgICAgICBhc3NlcnROb3ROdWxsKHVzZXIpOwogICAgICAgIGFzc2VydEVxdWFscygiSm9obiBEb2UiLCB1c2VyLmdldE5hbWUoKSk7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@RunWith(SpringRunner.class)
@SpringBootTest
public class UserServiceIntegrationTest {

    @Autowired
    private UserService userService;

    @Autowired
    private UserRepository userRepository;

    @Before
    public void setUp() {
        User user = new User();
        user.setId(1L);
        user.setName(&quot;John Doe&quot;);
        userRepository.save(user);
    }

    @Test
    public void testGetUserById() {
        User user = userService.getUserById(1L);
        assertNotNull(user);
        assertEquals(&quot;John Doe&quot;, user.getName());
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Annotations</strong>:
<ul>
<li><code>@RunWith(SpringRunner.class)</code>: Integrates the Spring TestContext Framework with JUnit.</li>
<li><code>@SpringBootTest</code>: Loads the full application context.</li>
</ul>
</li>
<li><strong>Setup Method</strong>: The <code>setUp</code> method initializes the test data.</li>
<li><strong>Test Method</strong>: The <code>testGetUserById</code> method verifies that the <code>UserService</code> correctly retrieves a user by ID.</li>
</ul>
</div><h1>Advanced Integration Testing</h1>
<div class='content'><p>As you advance, you may need to test more complex scenarios, such as interactions with external services or databases.</p>
</div><h2>Mocking External Services</h2>
<div class='content'><p>Use <code>@MockBean</code> to mock external services in your integration tests.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QFJ1bldpdGgoU3ByaW5nUnVubmVyLmNsYXNzKQpAU3ByaW5nQm9vdFRlc3QKcHVibGljIGNsYXNzIEV4dGVybmFsU2VydmljZUludGVncmF0aW9uVGVzdCB7CgogICAgQE1vY2tCZWFuCiAgICBwcml2YXRlIEV4dGVybmFsU2VydmljZSBleHRlcm5hbFNlcnZpY2U7CgogICAgQEF1dG93aXJlZAogICAgcHJpdmF0ZSBNeVNlcnZpY2UgbXlTZXJ2aWNlOwoKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0RXh0ZXJuYWxTZXJ2aWNlSW50ZXJhY3Rpb24oKSB7CiAgICAgICAgd2hlbihleHRlcm5hbFNlcnZpY2UuY2FsbEV4dGVybmFsQXBpKCkpLnRoZW5SZXR1cm4oIk1vY2sgUmVzcG9uc2UiKTsKCiAgICAgICAgU3RyaW5nIHJlc3BvbnNlID0gbXlTZXJ2aWNlLmNhbGxFeHRlcm5hbFNlcnZpY2UoKTsKICAgICAgICBhc3NlcnRFcXVhbHMoIk1vY2sgUmVzcG9uc2UiLCByZXNwb25zZSk7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@RunWith(SpringRunner.class)
@SpringBootTest
public class ExternalServiceIntegrationTest {

    @MockBean
    private ExternalService externalService;

    @Autowired
    private MyService myService;

    @Test
    public void testExternalServiceInteraction() {
        when(externalService.callExternalApi()).thenReturn(&quot;Mock Response&quot;);

        String response = myService.callExternalService();
        assertEquals(&quot;Mock Response&quot;, response);
    }
}</pre></div><div class='content'></div><h2>Testing with Databases</h2>
<div class='content'><p>For database integration tests, you can use an in-memory database like H2.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCEtLSBBZGQgSDIgZGVwZW5kZW5jeSBpbiBwb20ueG1sIC0tPgo8ZGVwZW5kZW5jeT4KICAgIDxncm91cElkPmNvbS5oMmRhdGFiYXNlPC9ncm91cElkPgogICAgPGFydGlmYWN0SWQ+aDI8L2FydGlmYWN0SWQ+CiAgICA8c2NvcGU+dGVzdDwvc2NvcGU+CjwvZGVwZW5kZW5jeT4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!-- Add H2 dependency in pom.xml --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.h2database&lt;/groupId&gt;
    &lt;artifactId&gt;h2&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre></div><div class='content'><p>Configure your application to use the H2 database for tests:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBhcHBsaWNhdGlvbi10ZXN0LnltbApzcHJpbmc6CiAgZGF0YXNvdXJjZToKICAgIHVybDogamRiYzpoMjptZW06dGVzdGRiCiAgICBkcml2ZXJDbGFzc05hbWU6IG9yZy5oMi5Ecml2ZXIKICAgIHVzZXJuYW1lOiBzYQogICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgaDI6CiAgICBjb25zb2xlOgogICAgICBlbmFibGVkOiB0cnVlCiAganBhOgogICAgaGliZXJuYXRlOgogICAgICBkZGwtYXV0bzogdXBkYXRlCiAgICBzaG93LXNxbDogdHJ1ZQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># application-test.yml
spring:
  datasource:
    url: jdbc:h2:mem:testdb
    driverClassName: org.h2.Driver
    username: sa
    password: password
  h2:
    console:
      enabled: true
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Integration testing in Spring Boot is essential for ensuring that different parts of your application work together seamlessly. By understanding the key concepts, setting up your test environment, and writing effective tests, you can significantly improve the reliability and robustness of your application. As you progress, you can explore more advanced scenarios, such as mocking external services and testing with databases, to cover all aspects of your application's functionality.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing-with-junit-and-mockito'>&#x25C4;Unit Testing with JUnit and Mockito</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Integration Testing in Spring Boot</a>
	</div>
	<div class='col-4 text-end'>
					<a href='testing-restful-web-services'>Testing RESTful Web Services &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
