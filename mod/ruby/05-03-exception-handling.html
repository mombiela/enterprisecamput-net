<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exception Handling</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ruby/05-03-exception-handling" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ruby/05-03-exception-handling" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ruby/05-03-exception-handling" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/ruby/05-03-exception-handling" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/ruby/05-03-exception-handling" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-02-metaprogramming' title="Metaprogramming">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Exception Handling</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-04-file-io' title="File I/O">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Exception handling is a crucial part of any programming language, and Ruby is no exception. It allows you to manage errors gracefully and ensure that your program can handle unexpected situations without crashing.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Exceptions</strong>: An exception is an event that disrupts the normal flow of a program. In Ruby, exceptions are objects that are instances of the <code>Exception</code> class or its subclasses.</li>
<li><strong>Raising Exceptions</strong>: You can raise exceptions using the <code>raise</code> keyword.</li>
<li><strong>Rescuing Exceptions</strong>: You can handle exceptions using the <code>begin-rescue-end</code> block.</li>
<li><strong>Ensuring Execution</strong>: The <code>ensure</code> block allows you to run code regardless of whether an exception was raised or not.</li>
<li><strong>Custom Exceptions</strong>: You can define your own exception classes by inheriting from the <code>StandardError</code> class.</li>
</ol>
</div><h1><p>Raising Exceptions</p>
</h1>
<div class='content'><p>You can raise an exception using the <code>raise</code> keyword. Hereâ€™s a simple example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIGRpdmlkZShhLCBiKQogIHJhaXNlICJEaXZpc2lvbiBieSB6ZXJvIGVycm9yIiBpZiBiID09IDAKICBhIC8gYgplbmQKCmJlZ2luCiAgcHV0cyBkaXZpZGUoMTAsIDApCnJlc2N1ZSA9PiBlCiAgcHV0cyAiQW4gZXJyb3Igb2NjdXJyZWQ6ICN7ZS5tZXNzYWdlfSIKZW5k"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def divide(a, b)
  raise &quot;Division by zero error&quot; if b == 0
  a / b
end

begin
  puts divide(10, 0)
rescue =&gt; e
  puts &quot;An error occurred: #{e.message}&quot;
end</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong><code>raise &quot;Division by zero error&quot;</code></strong>: Raises an exception with the message &quot;Division by zero error&quot; if <code>b</code> is zero.</li>
<li><strong><code>begin-rescue-end</code> block</strong>: This block is used to handle exceptions. If an exception is raised within the <code>begin</code> block, the <code>rescue</code> block will catch it.</li>
<li><strong><code>rescue =&gt; e</code></strong>: Captures the exception object in the variable <code>e</code>.</li>
<li><strong><code>e.message</code></strong>: Retrieves the error message from the exception object.</li>
</ul>
</div><h1><p>Rescuing Specific Exceptions</p>
</h1>
<div class='content'><p>You can rescue specific exceptions by specifying the exception class:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YmVnaW4KICBGaWxlLm9wZW4oIm5vbl9leGlzdGVudF9maWxlLnR4dCIpCnJlc2N1ZSBFcnJubzo6RU5PRU5UID0+IGUKICBwdXRzICJGaWxlIG5vdCBmb3VuZDogI3tlLm1lc3NhZ2V9IgplbmQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>begin
  File.open(&quot;non_existent_file.txt&quot;)
rescue Errno::ENOENT =&gt; e
  puts &quot;File not found: #{e.message}&quot;
end</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong><code>rescue Errno::ENOENT =&gt; e</code></strong>: This line rescues only <code>Errno::ENOENT</code> exceptions, which are raised when a file is not found.</li>
</ul>
</div><h1><p>Ensuring Execution</p>
</h1>
<div class='content'><p>The <code>ensure</code> block runs code regardless of whether an exception was raised or not:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YmVnaW4KICBmaWxlID0gRmlsZS5vcGVuKCJleGFtcGxlLnR4dCIsICJ3IikKICBmaWxlLndyaXRlKCJIZWxsbywgd29ybGQhIikKcmVzY3VlID0+IGUKICBwdXRzICJBbiBlcnJvciBvY2N1cnJlZDogI3tlLm1lc3NhZ2V9IgplbnN1cmUKICBmaWxlLmNsb3NlIGlmIGZpbGUKZW5k"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>begin
  file = File.open(&quot;example.txt&quot;, &quot;w&quot;)
  file.write(&quot;Hello, world!&quot;)
rescue =&gt; e
  puts &quot;An error occurred: #{e.message}&quot;
ensure
  file.close if file
end</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong><code>ensure</code> block</strong>: Ensures that the file is closed whether an exception occurs or not.</li>
</ul>
</div><h1><p>Custom Exceptions</p>
</h1>
<div class='content'><p>You can create custom exceptions by subclassing <code>StandardError</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgQ3VzdG9tRXJyb3IgPCBTdGFuZGFyZEVycm9yOyBlbmQKCmRlZiByaXNreV9tZXRob2QKICByYWlzZSBDdXN0b21FcnJvciwgIlNvbWV0aGluZyB3ZW50IHdyb25nISIKZW5kCgpiZWdpbgogIHJpc2t5X21ldGhvZApyZXNjdWUgQ3VzdG9tRXJyb3IgPT4gZQogIHB1dHMgIkNhdWdodCBhIGN1c3RvbSBlcnJvcjogI3tlLm1lc3NhZ2V9IgplbmQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class CustomError &lt; StandardError; end

def risky_method
  raise CustomError, &quot;Something went wrong!&quot;
end

begin
  risky_method
rescue CustomError =&gt; e
  puts &quot;Caught a custom error: #{e.message}&quot;
end</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong><code>class CustomError &lt; StandardError; end</code></strong>: Defines a custom exception class.</li>
<li><strong><code>raise CustomError, &quot;Something went wrong!&quot;</code></strong>: Raises an instance of the custom exception.</li>
<li><strong><code>rescue CustomError =&gt; e</code></strong>: Catches the custom exception.</li>
</ul>
</div><h1><p>Practical Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Basic Exception Handling</p>
</h2>
<div class='content'><p>Write a method <code>safe_divide</code> that takes two arguments and returns their division. If the second argument is zero, it should raise an exception with the message &quot;Cannot divide by zero&quot;.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIHNhZmVfZGl2aWRlKGEsIGIpCiAgIyBZb3VyIGNvZGUgaGVyZQplbmQKCmJlZ2luCiAgcHV0cyBzYWZlX2RpdmlkZSgxMCwgMikgICMgU2hvdWxkIHByaW50IDUKICBwdXRzIHNhZmVfZGl2aWRlKDEwLCAwKSAgIyBTaG91bGQgcmFpc2UgYW4gZXhjZXB0aW9uCnJlc2N1ZSA9PiBlCiAgcHV0cyAiRXJyb3I6ICN7ZS5tZXNzYWdlfSIKZW5k"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def safe_divide(a, b)
  # Your code here
end

begin
  puts safe_divide(10, 2)  # Should print 5
  puts safe_divide(10, 0)  # Should raise an exception
rescue =&gt; e
  puts &quot;Error: #{e.message}&quot;
end</pre></div><div class='content'></div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIHNhZmVfZGl2aWRlKGEsIGIpCiAgcmFpc2UgIkNhbm5vdCBkaXZpZGUgYnkgemVybyIgaWYgYiA9PSAwCiAgYSAvIGIKZW5kCgpiZWdpbgogIHB1dHMgc2FmZV9kaXZpZGUoMTAsIDIpICAjIFNob3VsZCBwcmludCA1CiAgcHV0cyBzYWZlX2RpdmlkZSgxMCwgMCkgICMgU2hvdWxkIHJhaXNlIGFuIGV4Y2VwdGlvbgpyZXNjdWUgPT4gZQogIHB1dHMgIkVycm9yOiAje2UubWVzc2FnZX0iCmVuZA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def safe_divide(a, b)
  raise &quot;Cannot divide by zero&quot; if b == 0
  a / b
end

begin
  puts safe_divide(10, 2)  # Should print 5
  puts safe_divide(10, 0)  # Should raise an exception
rescue =&gt; e
  puts &quot;Error: #{e.message}&quot;
end</pre></div><div class='content'></div><h2><p>Exercise 2: Custom Exception</p>
</h2>
<div class='content'><p>Create a custom exception <code>NegativeNumberError</code> and write a method <code>square_root</code> that takes a number and returns its square root. If the number is negative, it should raise the custom exception.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgTmVnYXRpdmVOdW1iZXJFcnJvciA8IFN0YW5kYXJkRXJyb3I7IGVuZAoKZGVmIHNxdWFyZV9yb290KG51bWJlcikKICAjIFlvdXIgY29kZSBoZXJlCmVuZAoKYmVnaW4KICBwdXRzIHNxdWFyZV9yb290KDkpICAgIyBTaG91bGQgcHJpbnQgMy4wCiAgcHV0cyBzcXVhcmVfcm9vdCgtMSkgICMgU2hvdWxkIHJhaXNlIE5lZ2F0aXZlTnVtYmVyRXJyb3IKcmVzY3VlIE5lZ2F0aXZlTnVtYmVyRXJyb3IgPT4gZQogIHB1dHMgIkVycm9yOiAje2UubWVzc2FnZX0iCmVuZA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class NegativeNumberError &lt; StandardError; end

def square_root(number)
  # Your code here
end

begin
  puts square_root(9)   # Should print 3.0
  puts square_root(-1)  # Should raise NegativeNumberError
rescue NegativeNumberError =&gt; e
  puts &quot;Error: #{e.message}&quot;
end</pre></div><div class='content'></div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgTmVnYXRpdmVOdW1iZXJFcnJvciA8IFN0YW5kYXJkRXJyb3I7IGVuZAoKZGVmIHNxdWFyZV9yb290KG51bWJlcikKICByYWlzZSBOZWdhdGl2ZU51bWJlckVycm9yLCAiQ2Fubm90IHRha2UgdGhlIHNxdWFyZSByb290IG9mIGEgbmVnYXRpdmUgbnVtYmVyIiBpZiBudW1iZXIgPCAwCiAgTWF0aC5zcXJ0KG51bWJlcikKZW5kCgpiZWdpbgogIHB1dHMgc3F1YXJlX3Jvb3QoOSkgICAjIFNob3VsZCBwcmludCAzLjAKICBwdXRzIHNxdWFyZV9yb290KC0xKSAgIyBTaG91bGQgcmFpc2UgTmVnYXRpdmVOdW1iZXJFcnJvcgpyZXNjdWUgTmVnYXRpdmVOdW1iZXJFcnJvciA9PiBlCiAgcHV0cyAiRXJyb3I6ICN7ZS5tZXNzYWdlfSIKZW5k"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class NegativeNumberError &lt; StandardError; end

def square_root(number)
  raise NegativeNumberError, &quot;Cannot take the square root of a negative number&quot; if number &lt; 0
  Math.sqrt(number)
end

begin
  puts square_root(9)   # Should print 3.0
  puts square_root(-1)  # Should raise NegativeNumberError
rescue NegativeNumberError =&gt; e
  puts &quot;Error: #{e.message}&quot;
end</pre></div><div class='content'></div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ul>
<li><strong>Not rescuing specific exceptions</strong>: Always try to rescue specific exceptions rather than using a generic <code>rescue</code> clause. This makes your code more robust and easier to debug.</li>
<li><strong>Forgetting the <code>ensure</code> block</strong>: Use the <code>ensure</code> block to release resources like file handles or database connections.</li>
<li><strong>Raising exceptions unnecessarily</strong>: Only raise exceptions for truly exceptional conditions. Overusing exceptions can make your code harder to read and maintain.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, you learned how to handle exceptions in Ruby using the <code>raise</code>, <code>rescue</code>, and <code>ensure</code> keywords. You also learned how to create custom exceptions to handle specific error conditions. Exception handling is a powerful tool that helps you write robust and error-resistant code. In the next section, we will dive into file input/output operations in Ruby.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-02-metaprogramming' title="Metaprogramming">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-04-file-io' title="File I/O">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
