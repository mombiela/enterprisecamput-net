<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ensuring Cleanup with Ensure</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ruby/ensuring-cleanup-with-ensure" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ruby/ensuring-cleanup-with-ensure" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ruby/ensuring-cleanup-with-ensure" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/ruby/ensuring-cleanup-with-ensure" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/ruby/ensuring-cleanup-with-ensure" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='creating-custom-exceptions'>&#x25C4;Creating Custom Exceptions</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Ensuring Cleanup with Ensure</a>
	</div>
	<div class='col-4 text-end'>
					<a href='metaprogramming'>Metaprogramming &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to ensure that certain cleanup actions are always performed in Ruby, regardless of whether an error occurs. This is crucial for resource management, such as closing files or releasing network connections.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Exception Handling</strong>: Mechanism to handle runtime errors.</li>
<li><strong>Ensure Block</strong>: A block that always runs, whether an exception is raised or not.</li>
<li><strong>Resource Management</strong>: Ensuring resources like files, network connections, etc., are properly closed or released.</li>
</ul>
</div><h1>Exception Handling in Ruby</h1>
<div class='content'><p>Before diving into the <code>ensure</code> block, let's briefly review how exception handling works in Ruby.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YmVnaW4KICAjIENvZGUgdGhhdCBtaWdodCByYWlzZSBhbiBleGNlcHRpb24KcmVzY3VlIFNvbWVFeGNlcHRpb24gPT4gZQogICMgQ29kZSB0aGF0IHJ1bnMgaWYgYW4gZXhjZXB0aW9uIG9jY3VycwplbHNlCiAgIyBDb2RlIHRoYXQgcnVucyBpZiBubyBleGNlcHRpb24gb2NjdXJzCmVuc3VyZQogICMgQ29kZSB0aGF0IGFsd2F5cyBydW5zCmVuZA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>begin
  # Code that might raise an exception
rescue SomeException =&gt; e
  # Code that runs if an exception occurs
else
  # Code that runs if no exception occurs
ensure
  # Code that always runs
end</pre></div><div class='content'><ul>
<li><strong>begin</strong>: Starts the block of code where exceptions might occur.</li>
<li><strong>rescue</strong>: Handles specific exceptions.</li>
<li><strong>else</strong>: Executes if no exceptions are raised.</li>
<li><strong>ensure</strong>: Always executes, regardless of whether an exception was raised.</li>
</ul>
</div><h1>Using Ensure for Cleanup</h1>
<div class='content'><p>The <code>ensure</code> block is particularly useful for cleanup tasks. Let's look at an example involving file handling.</p>
</div><h2>Example: File Handling</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YmVnaW4KICBmaWxlID0gRmlsZS5vcGVuKCJleGFtcGxlLnR4dCIsICJyIikKICAjIFBlcmZvcm0gb3BlcmF0aW9ucyBvbiB0aGUgZmlsZQogIHB1dHMgZmlsZS5yZWFkCnJlc2N1ZSBJT0Vycm9yID0+IGUKICBwdXRzICJBbiBJT0Vycm9yIG9jY3VycmVkOiAje2UubWVzc2FnZX0iCmVuc3VyZQogIGZpbGUuY2xvc2UgaWYgZmlsZQogIHB1dHMgIkZpbGUgY2xvc2VkLiIKZW5k"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>begin
  file = File.open(&quot;example.txt&quot;, &quot;r&quot;)
  # Perform operations on the file
  puts file.read
rescue IOError =&gt; e
  puts &quot;An IOError occurred: #{e.message}&quot;
ensure
  file.close if file
  puts &quot;File closed.&quot;
end</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ol>
<li><strong>Opening the File</strong>: The <code>File.open</code> method is used to open a file.</li>
<li><strong>Reading the File</strong>: The <code>file.read</code> method reads the content of the file.</li>
<li><strong>Rescue Block</strong>: If an <code>IOError</code> occurs, it is caught and handled.</li>
<li><strong>Ensure Block</strong>: The <code>file.close</code> method ensures the file is closed, whether an error occurs or not.</li>
</ol>
</div><h2>Example: Network Connection</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVxdWlyZSAnbmV0L2h0dHAnCgpiZWdpbgogIHVyaSA9IFVSSSgnaHR0cDovL2V4YW1wbGUuY29tJykKICByZXNwb25zZSA9IE5ldDo6SFRUUC5nZXQodXJpKQogICMgUGVyZm9ybSBvcGVyYXRpb25zIHdpdGggdGhlIHJlc3BvbnNlCiAgcHV0cyByZXNwb25zZQpyZXNjdWUgU3RhbmRhcmRFcnJvciA9PiBlCiAgcHV0cyAiQW4gZXJyb3Igb2NjdXJyZWQ6ICN7ZS5tZXNzYWdlfSIKZW5zdXJlCiAgIyBDbGVhbnVwIGFjdGlvbnMsIGlmIGFueQogIHB1dHMgIkNsZWFudXAgYWN0aW9ucyBjb21wbGV0ZWQuIgplbmQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>require 'net/http'

begin
  uri = URI('http://example.com')
  response = Net::HTTP.get(uri)
  # Perform operations with the response
  puts response
rescue StandardError =&gt; e
  puts &quot;An error occurred: #{e.message}&quot;
ensure
  # Cleanup actions, if any
  puts &quot;Cleanup actions completed.&quot;
end</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ol>
<li><strong>Making a Request</strong>: The <code>Net::HTTP.get</code> method is used to make an HTTP GET request.</li>
<li><strong>Handling Errors</strong>: Any <code>StandardError</code> is caught and handled.</li>
<li><strong>Ensure Block</strong>: Executes cleanup actions, if any, ensuring that resources are properly managed.</li>
</ol>
</div><h1>Summary</h1>
<div class='content'><ul>
<li>The <code>ensure</code> block in Ruby is a powerful tool for ensuring that cleanup actions are always performed, regardless of whether an exception occurs.</li>
<li>It is particularly useful for resource management tasks such as closing files or releasing network connections.</li>
<li>By using <code>ensure</code>, you can write more robust and reliable code that properly manages resources.</li>
</ul>
<p>Understanding and using the <code>ensure</code> block effectively will help you write cleaner and more maintainable Ruby code.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='creating-custom-exceptions'>&#x25C4;Creating Custom Exceptions</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Ensuring Cleanup with Ensure</a>
	</div>
	<div class='col-4 text-end'>
					<a href='metaprogramming'>Metaprogramming &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
