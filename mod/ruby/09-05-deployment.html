<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deployment</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ruby/09-05-deployment" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ruby/09-05-deployment" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ruby/09-05-deployment" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/ruby/09-05-deployment" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/ruby/09-05-deployment" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='09-04-testing-debugging' title="Testing and Debugging">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Deployment</h2></a>
			</div>
	<div class='col-2 text-end'>
			</div>
</div>
<div class='content'><p>In this section, we will cover the essential steps and best practices for deploying a Ruby application, particularly focusing on Ruby on Rails applications. Deployment is the process of making your application available to users, typically by hosting it on a server. This involves several steps, including setting up the server, configuring the environment, and ensuring the application runs smoothly in a production setting.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Server Setup</strong>: Preparing the server environment to host your application.</li>
<li><strong>Environment Configuration</strong>: Configuring the application to run in a production environment.</li>
<li><strong>Database Setup</strong>: Ensuring the database is correctly configured and migrated.</li>
<li><strong>Application Deployment</strong>: Deploying the application code to the server.</li>
<li><strong>Monitoring and Maintenance</strong>: Setting up monitoring and maintenance tasks to ensure the application runs smoothly.</li>
</ol>
</div><h1><p>Steps for Deployment</p>
</h1>
<div class='content'></div><h2><ol>
<li>Server Setup</li>
</ol>
</h2>
<div class='content'><p>Before deploying your application, you need to set up a server. Common choices include cloud providers like AWS, Heroku, DigitalOcean, and others.</p>
<h4>Example: Setting Up a Server on DigitalOcean</h4>
<ol>
<li>
<p><strong>Create a Droplet</strong>:</p>
<ul>
<li>Log in to your DigitalOcean account.</li>
<li>Create a new Droplet (virtual server).</li>
<li>Choose an image (e.g., Ubuntu 20.04).</li>
<li>Select a plan based on your needs.</li>
<li>Add SSH keys for secure access.</li>
<li>Create the Droplet.</li>
</ul>
</li>
<li>
<p><strong>Access the Server</strong>:</p>
<ul>
<li>Use SSH to connect to your server:
<pre><code class="language-sh">ssh root@your_server_ip
</code></pre>
</li>
</ul>
</li>
</ol>
</div><h2><ol start="2">
<li>Environment Configuration</li>
</ol>
</h2>
<div class='content'><p>Configure the server environment to run your Ruby on Rails application.</p>
<h4>Example: Installing Required Software</h4>
<ol>
<li>
<p><strong>Install Ruby</strong>:</p>
<pre><code class="language-sh">sudo apt update
sudo apt install -y rbenv ruby-build
rbenv install 3.0.0
rbenv global 3.0.0
</code></pre>
</li>
<li>
<p><strong>Install Rails</strong>:</p>
<pre><code class="language-sh">gem install rails -v 6.1.3
</code></pre>
</li>
<li>
<p><strong>Install a Web Server (e.g., Nginx)</strong>:</p>
<pre><code class="language-sh">sudo apt install -y nginx
</code></pre>
</li>
<li>
<p><strong>Install a Database (e.g., PostgreSQL)</strong>:</p>
<pre><code class="language-sh">sudo apt install -y postgresql postgresql-contrib
</code></pre>
</li>
</ol>
</div><h2><ol start="3">
<li>Database Setup</li>
</ol>
</h2>
<div class='content'><p>Ensure your database is correctly configured and migrated.</p>
<h4>Example: Configuring PostgreSQL</h4>
<ol>
<li>
<p><strong>Create a Database User</strong>:</p>
<pre><code class="language-sh">sudo -u postgres createuser -s your_username
sudo -u postgres psql
\password your_username
</code></pre>
</li>
<li>
<p><strong>Create a Database</strong>:</p>
<pre><code class="language-sh">sudo -u postgres createdb your_database_name
</code></pre>
</li>
<li>
<p><strong>Configure Rails Database Settings</strong>:
Update <code>config/database.yml</code> with your database credentials.</p>
</li>
<li>
<p><strong>Run Migrations</strong>:</p>
<pre><code class="language-sh">rails db:migrate RAILS_ENV=production
</code></pre>
</li>
</ol>
</div><h2><ol start="4">
<li>Application Deployment</li>
</ol>
</h2>
<div class='content'><p>Deploy your application code to the server.</p>
<h4>Example: Using Capistrano for Deployment</h4>
<ol>
<li>
<p><strong>Add Capistrano to Your Gemfile</strong>:</p>
<pre><code class="language-ruby">gem 'capistrano', '~&gt; 3.14'
gem 'capistrano-rails', '~&gt; 1.6'
gem 'capistrano-rbenv', '~&gt; 2.2'
gem 'capistrano-bundler', '~&gt; 1.6'
</code></pre>
</li>
<li>
<p><strong>Install Capistrano</strong>:</p>
<pre><code class="language-sh">bundle install
bundle exec cap install
</code></pre>
</li>
<li>
<p><strong>Configure Capistrano</strong>:
Update <code>config/deploy.rb</code> and <code>config/deploy/production.rb</code> with your server details.</p>
</li>
<li>
<p><strong>Deploy the Application</strong>:</p>
<pre><code class="language-sh">bundle exec cap production deploy
</code></pre>
</li>
</ol>
</div><h2><ol start="5">
<li>Monitoring and Maintenance</li>
</ol>
</h2>
<div class='content'><p>Set up monitoring and maintenance tasks to ensure your application runs smoothly.</p>
<h4>Example: Using a Monitoring Tool</h4>
<ol>
<li>
<p><strong>Install a Monitoring Tool (e.g., New Relic)</strong>:</p>
<ul>
<li>Sign up for a New Relic account.</li>
<li>Follow the instructions to install the New Relic agent in your Rails application.</li>
</ul>
</li>
<li>
<p><strong>Set Up Automated Backups</strong>:</p>
<ul>
<li>Use a tool like <code>pg_dump</code> for PostgreSQL to create regular backups of your database.</li>
</ul>
</li>
<li>
<p><strong>Configure Log Rotation</strong>:</p>
<ul>
<li>Use a tool like <code>logrotate</code> to manage your application logs.</li>
</ul>
</li>
</ol>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise: Deploy a Simple Rails Application to Heroku</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Create a New Rails Application</strong>:</p>
<pre><code class="language-sh">rails new myapp
cd myapp
</code></pre>
</li>
<li>
<p><strong>Initialize a Git Repository</strong>:</p>
<pre><code class="language-sh">git init
git add .
git commit -m &quot;Initial commit&quot;
</code></pre>
</li>
<li>
<p><strong>Create a Heroku Application</strong>:</p>
<pre><code class="language-sh">heroku create
</code></pre>
</li>
<li>
<p><strong>Deploy to Heroku</strong>:</p>
<pre><code class="language-sh">git push heroku master
</code></pre>
</li>
<li>
<p><strong>Run Migrations</strong>:</p>
<pre><code class="language-sh">heroku run rails db:migrate
</code></pre>
</li>
<li>
<p><strong>Open Your Application</strong>:</p>
<pre><code class="language-sh">heroku open
</code></pre>
</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'><p>Follow the steps above to deploy your Rails application to Heroku. Ensure you have the Heroku CLI installed and are logged in to your Heroku account.</p>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the essential steps for deploying a Ruby on Rails application, including server setup, environment configuration, database setup, application deployment, and monitoring and maintenance. By following these steps, you can ensure your application is available to users and runs smoothly in a production environment. In the next module, we will focus on testing in Ruby to ensure your application is robust and reliable.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='09-04-testing-debugging' title="Testing and Debugging">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
