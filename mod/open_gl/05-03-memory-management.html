<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Efficient Memory Management</title>

    <link rel="alternate" href="https://campusempresa.com/mod/open_gl/05-03-memory-management" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/open_gl/05-03-memory-management" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/open_gl/05-03-memory-management" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/open_gl/05-03-memory-management" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/open_gl/05-03-memory-management" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-02-using-vaos' title="Using Vertex Array Objects (VAOs)">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Efficient Memory Management</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-04-profiling-debugging' title="Profiling and Debugging">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Efficient memory management is crucial in OpenGL programming to ensure that your applications run smoothly and make the best use of available resources. This section will cover the following key concepts:</p>
<ol>
<li><strong>Understanding OpenGL Memory Types</strong></li>
<li><strong>Managing Buffers Efficiently</strong></li>
<li><strong>Using Buffer Sub-Data</strong></li>
<li><strong>Memory Mapping</strong></li>
<li><strong>Garbage Collection and Resource Cleanup</strong></li>
</ol>
</div><h1><p>Understanding OpenGL Memory Types</p>
</h1>
<div class='content'><p>OpenGL uses different types of memory to store data. Understanding these types is essential for efficient memory management.</p>
</div><h2><p>Types of Memory</p>
</h2>
<div class='content'><ul>
<li><strong>Video Memory (VRAM):</strong> Used for storing textures, framebuffers, and other graphical data. It is faster but limited in size.</li>
<li><strong>System Memory (RAM):</strong> Used for storing application data and can be larger but slower compared to VRAM.</li>
</ul>
</div><h2><p>Key Concepts</p>
</h2>
<div class='content'><ul>
<li><strong>Buffers:</strong> Used to store vertex data, indices, and other information.</li>
<li><strong>Textures:</strong> Store image data for rendering.</li>
<li><strong>Framebuffers:</strong> Used for off-screen rendering.</li>
</ul>
</div><h1><p>Managing Buffers Efficiently</p>
</h1>
<div class='content'><p>Buffers are a fundamental part of OpenGL, and managing them efficiently can significantly impact performance.</p>
</div><h2><p>Creating and Binding Buffers</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0x1aW50IGJ1ZmZlcjsKZ2xHZW5CdWZmZXJzKDEsICZidWZmZXIpOyAvLyBHZW5lcmF0ZSBhIGJ1ZmZlciBJRApnbEJpbmRCdWZmZXIoR0xfQVJSQVlfQlVGRkVSLCBidWZmZXIpOyAvLyBCaW5kIHRoZSBidWZmZXIgdG8gdGhlIEdMX0FSUkFZX0JVRkZFUiB0YXJnZXQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GLuint buffer;
glGenBuffers(1, &amp;buffer); // Generate a buffer ID
glBindBuffer(GL_ARRAY_BUFFER, buffer); // Bind the buffer to the GL_ARRAY_BUFFER target</pre></div><div class='content'></div><h2><p>Allocating Buffer Data</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2xCdWZmZXJEYXRhKEdMX0FSUkFZX0JVRkZFUiwgc2l6ZW9mKHZlcnRpY2VzKSwgdmVydGljZXMsIEdMX1NUQVRJQ19EUkFXKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);</pre></div><div class='content'><ul>
<li><strong>GL_STATIC_DRAW:</strong> Data will not change frequently.</li>
<li><strong>GL_DYNAMIC_DRAW:</strong> Data will change frequently.</li>
<li><strong>GL_STREAM_DRAW:</strong> Data will change every frame.</li>
</ul>
</div><h2><p>Practical Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmxvYXQgdmVydGljZXNbXSA9IHsKICAgIC8vIFZlcnRleCBwb3NpdGlvbnMKICAgIDAuNWYsICAwLjVmLCAwLjBmLAogICAgMC41ZiwgLTAuNWYsIDAuMGYsCiAgIC0wLjVmLCAtMC41ZiwgMC4wZiwKICAgLTAuNWYsICAwLjVmLCAwLjBmCn07CgpHTHVpbnQgVkJPOwpnbEdlbkJ1ZmZlcnMoMSwgJlZCTyk7CmdsQmluZEJ1ZmZlcihHTF9BUlJBWV9CVUZGRVIsIFZCTyk7CmdsQnVmZmVyRGF0YShHTF9BUlJBWV9CVUZGRVIsIHNpemVvZih2ZXJ0aWNlcyksIHZlcnRpY2VzLCBHTF9TVEFUSUNfRFJBVyk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>float vertices[] = {
    // Vertex positions
    0.5f,  0.5f, 0.0f,
    0.5f, -0.5f, 0.0f,
   -0.5f, -0.5f, 0.0f,
   -0.5f,  0.5f, 0.0f
};

GLuint VBO;
glGenBuffers(1, &amp;VBO);
glBindBuffer(GL_ARRAY_BUFFER, VBO);
glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);</pre></div><div class='content'></div><h1><p>Using Buffer Sub-Data</p>
</h1>
<div class='content'><p>Buffer sub-data allows you to update a portion of the buffer without reallocating the entire buffer.</p>
</div><h2><p>Updating Buffer Data</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2xCdWZmZXJTdWJEYXRhKEdMX0FSUkFZX0JVRkZFUiwgb2Zmc2V0LCBzaXplLCBkYXRhKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>glBufferSubData(GL_ARRAY_BUFFER, offset, size, data);</pre></div><div class='content'></div><h2><p>Practical Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmxvYXQgbmV3VmVydGljZXNbXSA9IHsKICAgIC8vIE5ldyB2ZXJ0ZXggcG9zaXRpb25zCiAgICAwLjZmLCAgMC42ZiwgMC4wZiwKICAgIDAuNmYsIC0wLjZmLCAwLjBmCn07CgpnbEJ1ZmZlclN1YkRhdGEoR0xfQVJSQVlfQlVGRkVSLCAwLCBzaXplb2YobmV3VmVydGljZXMpLCBuZXdWZXJ0aWNlcyk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>float newVertices[] = {
    // New vertex positions
    0.6f,  0.6f, 0.0f,
    0.6f, -0.6f, 0.0f
};

glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(newVertices), newVertices);</pre></div><div class='content'></div><h1><p>Memory Mapping</p>
</h1>
<div class='content'><p>Memory mapping allows you to map a buffer's data store to the client's address space, providing direct access to the buffer's data.</p>
</div><h2><p>Mapping Buffer Data</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCogcHRyID0gZ2xNYXBCdWZmZXIoR0xfQVJSQVlfQlVGRkVSLCBHTF9XUklURV9PTkxZKTsKaWYgKHB0cikgewogICAgLy8gTW9kaWZ5IHRoZSBidWZmZXIncyBkYXRhCiAgICBtZW1jcHkocHRyLCBuZXdWZXJ0aWNlcywgc2l6ZW9mKG5ld1ZlcnRpY2VzKSk7CiAgICBnbFVubWFwQnVmZmVyKEdMX0FSUkFZX0JVRkZFUik7IC8vIFVubWFwIHRoZSBidWZmZXIgd2hlbiBkb25lCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void* ptr = glMapBuffer(GL_ARRAY_BUFFER, GL_WRITE_ONLY);
if (ptr) {
    // Modify the buffer's data
    memcpy(ptr, newVertices, sizeof(newVertices));
    glUnmapBuffer(GL_ARRAY_BUFFER); // Unmap the buffer when done
}</pre></div><div class='content'></div><h2><p>Practical Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmxvYXQqIHB0ciA9IChmbG9hdCopZ2xNYXBCdWZmZXIoR0xfQVJSQVlfQlVGRkVSLCBHTF9XUklURV9PTkxZKTsKaWYgKHB0cikgewogICAgcHRyWzBdID0gMC43ZjsgLy8gTW9kaWZ5IHRoZSBmaXJzdCB2ZXJ0ZXggcG9zaXRpb24KICAgIGdsVW5tYXBCdWZmZXIoR0xfQVJSQVlfQlVGRkVSKTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>float* ptr = (float*)glMapBuffer(GL_ARRAY_BUFFER, GL_WRITE_ONLY);
if (ptr) {
    ptr[0] = 0.7f; // Modify the first vertex position
    glUnmapBuffer(GL_ARRAY_BUFFER);
}</pre></div><div class='content'></div><h1><p>Garbage Collection and Resource Cleanup</p>
</h1>
<div class='content'><p>Properly cleaning up resources is essential to prevent memory leaks and ensure efficient memory usage.</p>
</div><h2><p>Deleting Buffers</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2xEZWxldGVCdWZmZXJzKDEsICZWQk8pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>glDeleteBuffers(1, &amp;VBO);</pre></div><div class='content'></div><h2><p>Practical Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("R0x1aW50IFZCTzsKZ2xHZW5CdWZmZXJzKDEsICZWQk8pOwpnbEJpbmRCdWZmZXIoR0xfQVJSQVlfQlVGRkVSLCBWQk8pOwpnbEJ1ZmZlckRhdGEoR0xfQVJSQVlfQlVGRkVSLCBzaXplb2YodmVydGljZXMpLCB2ZXJ0aWNlcywgR0xfU1RBVElDX0RSQVcpOwoKLy8gLi4uIFVzZSB0aGUgYnVmZmVyIC4uLgoKZ2xEZWxldGVCdWZmZXJzKDEsICZWQk8pOyAvLyBDbGVhbiB1cCB0aGUgYnVmZmVyIHdoZW4gZG9uZQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>GLuint VBO;
glGenBuffers(1, &amp;VBO);
glBindBuffer(GL_ARRAY_BUFFER, VBO);
glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);

// ... Use the buffer ...

glDeleteBuffers(1, &amp;VBO); // Clean up the buffer when done</pre></div><div class='content'></div><h1><p>Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Create and Update a Buffer</p>
</h2>
<div class='content'><ol>
<li>Create a buffer and allocate memory for vertex data.</li>
<li>Update a portion of the buffer using <code>glBufferSubData</code>.</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmxvYXQgdmVydGljZXNbXSA9IHsKICAgIDAuNWYsICAwLjVmLCAwLjBmLAogICAgMC41ZiwgLTAuNWYsIDAuMGYsCiAgIC0wLjVmLCAtMC41ZiwgMC4wZiwKICAgLTAuNWYsICAwLjVmLCAwLjBmCn07CgpHTHVpbnQgVkJPOwpnbEdlbkJ1ZmZlcnMoMSwgJlZCTyk7CmdsQmluZEJ1ZmZlcihHTF9BUlJBWV9CVUZGRVIsIFZCTyk7CmdsQnVmZmVyRGF0YShHTF9BUlJBWV9CVUZGRVIsIHNpemVvZih2ZXJ0aWNlcyksIHZlcnRpY2VzLCBHTF9TVEFUSUNfRFJBVyk7CgpmbG9hdCBuZXdWZXJ0aWNlc1tdID0gewogICAgMC42ZiwgIDAuNmYsIDAuMGYsCiAgICAwLjZmLCAtMC42ZiwgMC4wZgp9OwoKZ2xCdWZmZXJTdWJEYXRhKEdMX0FSUkFZX0JVRkZFUiwgMCwgc2l6ZW9mKG5ld1ZlcnRpY2VzKSwgbmV3VmVydGljZXMpOwpnbERlbGV0ZUJ1ZmZlcnMoMSwgJlZCTyk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>float vertices[] = {
    0.5f,  0.5f, 0.0f,
    0.5f, -0.5f, 0.0f,
   -0.5f, -0.5f, 0.0f,
   -0.5f,  0.5f, 0.0f
};

GLuint VBO;
glGenBuffers(1, &amp;VBO);
glBindBuffer(GL_ARRAY_BUFFER, VBO);
glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);

float newVertices[] = {
    0.6f,  0.6f, 0.0f,
    0.6f, -0.6f, 0.0f
};

glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(newVertices), newVertices);
glDeleteBuffers(1, &amp;VBO);</pre></div><div class='content'></div><h2><p>Exercise 2: Map and Modify Buffer Data</p>
</h2>
<div class='content'><ol>
<li>Create a buffer and allocate memory for vertex data.</li>
<li>Map the buffer and modify its data directly.</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmxvYXQgdmVydGljZXNbXSA9IHsKICAgIDAuNWYsICAwLjVmLCAwLjBmLAogICAgMC41ZiwgLTAuNWYsIDAuMGYsCiAgIC0wLjVmLCAtMC41ZiwgMC4wZiwKICAgLTAuNWYsICAwLjVmLCAwLjBmCn07CgpHTHVpbnQgVkJPOwpnbEdlbkJ1ZmZlcnMoMSwgJlZCTyk7CmdsQmluZEJ1ZmZlcihHTF9BUlJBWV9CVUZGRVIsIFZCTyk7CmdsQnVmZmVyRGF0YShHTF9BUlJBWV9CVUZGRVIsIHNpemVvZih2ZXJ0aWNlcyksIHZlcnRpY2VzLCBHTF9TVEFUSUNfRFJBVyk7CgpmbG9hdCogcHRyID0gKGZsb2F0KilnbE1hcEJ1ZmZlcihHTF9BUlJBWV9CVUZGRVIsIEdMX1dSSVRFX09OTFkpOwppZiAocHRyKSB7CiAgICBwdHJbMF0gPSAwLjdmOyAvLyBNb2RpZnkgdGhlIGZpcnN0IHZlcnRleCBwb3NpdGlvbgogICAgZ2xVbm1hcEJ1ZmZlcihHTF9BUlJBWV9CVUZGRVIpOwp9CgpnbERlbGV0ZUJ1ZmZlcnMoMSwgJlZCTyk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>float vertices[] = {
    0.5f,  0.5f, 0.0f,
    0.5f, -0.5f, 0.0f,
   -0.5f, -0.5f, 0.0f,
   -0.5f,  0.5f, 0.0f
};

GLuint VBO;
glGenBuffers(1, &amp;VBO);
glBindBuffer(GL_ARRAY_BUFFER, VBO);
glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);

float* ptr = (float*)glMapBuffer(GL_ARRAY_BUFFER, GL_WRITE_ONLY);
if (ptr) {
    ptr[0] = 0.7f; // Modify the first vertex position
    glUnmapBuffer(GL_ARRAY_BUFFER);
}

glDeleteBuffers(1, &amp;VBO);</pre></div><div class='content'></div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>Efficient memory management in OpenGL involves understanding different types of memory, managing buffers effectively, using buffer sub-data, and memory mapping. Proper resource cleanup is also essential to prevent memory leaks. By mastering these techniques, you can ensure that your OpenGL applications run efficiently and make the best use of available resources.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-02-using-vaos' title="Using Vertex Array Objects (VAOs)">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-04-profiling-debugging' title="Profiling and Debugging">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
