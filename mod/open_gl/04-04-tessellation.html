<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tessellation</title>

    <link rel="alternate" href="https://campusempresa.com/mod/open_gl/04-04-tessellation" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/open_gl/04-04-tessellation" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/open_gl/04-04-tessellation" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/open_gl/04-04-tessellation" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/open_gl/04-04-tessellation" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-03-instanced-rendering' title="Instanced Rendering">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Tessellation</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-01-optimizing-code' title="Optimizing OpenGL Code">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Tessellation is an advanced rendering technique in OpenGL that allows for the dynamic subdivision of polygons into smaller pieces. This can be used to create more detailed and smoother surfaces, which is particularly useful in applications like terrain rendering, character models, and other complex geometries.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Tessellation Control Shader (TCS)</strong>: This shader controls how much tessellation is applied to each patch of vertices.</li>
<li><strong>Tessellation Evaluation Shader (TES)</strong>: This shader evaluates the tessellated vertices and determines their final positions.</li>
<li><strong>Patch Primitives</strong>: These are the basic units of tessellation, defined by a set of vertices.</li>
</ol>
</div><h1>Tessellation Pipeline</h1>
<div class='content'><p>The tessellation process in OpenGL involves several stages:</p>
<ol>
<li><strong>Vertex Shader</strong>: Processes each vertex of the patch.</li>
<li><strong>Tessellation Control Shader (TCS)</strong>: Determines the tessellation levels.</li>
<li><strong>Tessellation Primitive Generator</strong>: Generates the tessellated vertices.</li>
<li><strong>Tessellation Evaluation Shader (TES)</strong>: Computes the final positions of the tessellated vertices.</li>
<li><strong>Fragment Shader</strong>: Processes the fragments generated from the tessellated vertices.</li>
</ol>
</div><h1>Practical Example</h1>
<div class='content'><p>Let's create a simple example to demonstrate tessellation. We'll start by setting up the shaders and then move on to the OpenGL code.</p>
</div><h2>Tessellation Control Shader (TCS)</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I3ZlcnNpb24gNDUwIGNvcmUKCmxheW91dCh2ZXJ0aWNlcyA9IDMpIG91dDsKCnZvaWQgbWFpbigpIHsKICAgIGlmIChnbF9JbnZvY2F0aW9uSUQgPT0gMCkgewogICAgICAgIGdsX1Rlc3NMZXZlbElubmVyWzBdID0gNS4wOwogICAgICAgIGdsX1Rlc3NMZXZlbE91dGVyWzBdID0gNS4wOwogICAgICAgIGdsX1Rlc3NMZXZlbE91dGVyWzFdID0gNS4wOwogICAgICAgIGdsX1Rlc3NMZXZlbE91dGVyWzJdID0gNS4wOwogICAgfQogICAgZ2xfb3V0W2dsX0ludm9jYXRpb25JRF0uZ2xfUG9zaXRpb24gPSBnbF9pbltnbF9JbnZvY2F0aW9uSURdLmdsX1Bvc2l0aW9uOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#version 450 core

layout(vertices = 3) out;

void main() {
    if (gl_InvocationID == 0) {
        gl_TessLevelInner[0] = 5.0;
        gl_TessLevelOuter[0] = 5.0;
        gl_TessLevelOuter[1] = 5.0;
        gl_TessLevelOuter[2] = 5.0;
    }
    gl_out[gl_InvocationID].gl_Position = gl_in[gl_InvocationID].gl_Position;
}</pre></div><div class='content'></div><h2>Tessellation Evaluation Shader (TES)</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I3ZlcnNpb24gNDUwIGNvcmUKCmxheW91dCh0cmlhbmdsZXMsIGVxdWFsX3NwYWNpbmcsIGN3KSBpbjsKCnZvaWQgbWFpbigpIHsKICAgIHZlYzMgcDAgPSBnbF9pblswXS5nbF9Qb3NpdGlvbi54eXo7CiAgICB2ZWMzIHAxID0gZ2xfaW5bMV0uZ2xfUG9zaXRpb24ueHl6OwogICAgdmVjMyBwMiA9IGdsX2luWzJdLmdsX1Bvc2l0aW9uLnh5ejsKCiAgICBmbG9hdCB1ID0gZ2xfVGVzc0Nvb3JkLng7CiAgICBmbG9hdCB2ID0gZ2xfVGVzc0Nvb3JkLnk7CiAgICBmbG9hdCB3ID0gZ2xfVGVzc0Nvb3JkLno7CgogICAgdmVjMyBwb3MgPSB1ICogcDAgKyB2ICogcDEgKyB3ICogcDI7CiAgICBnbF9Qb3NpdGlvbiA9IHZlYzQocG9zLCAxLjApOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#version 450 core

layout(triangles, equal_spacing, cw) in;

void main() {
    vec3 p0 = gl_in[0].gl_Position.xyz;
    vec3 p1 = gl_in[1].gl_Position.xyz;
    vec3 p2 = gl_in[2].gl_Position.xyz;

    float u = gl_TessCoord.x;
    float v = gl_TessCoord.y;
    float w = gl_TessCoord.z;

    vec3 pos = u * p0 + v * p1 + w * p2;
    gl_Position = vec4(pos, 1.0);
}</pre></div><div class='content'></div><h2>Vertex Shader</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I3ZlcnNpb24gNDUwIGNvcmUKCmxheW91dChsb2NhdGlvbiA9IDApIGluIHZlYzMgcG9zaXRpb247Cgp2b2lkIG1haW4oKSB7CiAgICBnbF9Qb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDEuMCk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#version 450 core

layout(location = 0) in vec3 position;

void main() {
    gl_Position = vec4(position, 1.0);
}</pre></div><div class='content'></div><h2>Fragment Shader</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I3ZlcnNpb24gNDUwIGNvcmUKCm91dCB2ZWM0IEZyYWdDb2xvcjsKCnZvaWQgbWFpbigpIHsKICAgIEZyYWdDb2xvciA9IHZlYzQoMS4wLCAwLjAsIDAuMCwgMS4wKTsgLy8gUmVkIGNvbG9yCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#version 450 core

out vec4 FragColor;

void main() {
    FragColor = vec4(1.0, 0.0, 0.0, 1.0); // Red color
}</pre></div><div class='content'></div><h2>OpenGL Code</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPEdML2dsZXcuaD4KI2luY2x1ZGUgPEdMRlcvZ2xmdzMuaD4KI2luY2x1ZGUgPGlvc3RyZWFtPgoKLy8gU2hhZGVyIGNvbXBpbGF0aW9uIHV0aWxpdHkgZnVuY3Rpb25zCkdMdWludCBjb21waWxlU2hhZGVyKGNvbnN0IGNoYXIqIHNvdXJjZSwgR0xlbnVtIHNoYWRlclR5cGUpOwpHTHVpbnQgbGlua1Byb2dyYW0oR0x1aW50IHZlcnRleFNoYWRlciwgR0x1aW50IHRjc1NoYWRlciwgR0x1aW50IHRlc1NoYWRlciwgR0x1aW50IGZyYWdtZW50U2hhZGVyKTsKCmludCBtYWluKCkgewogICAgLy8gSW5pdGlhbGl6ZSBHTEZXCiAgICBpZiAoIWdsZndJbml0KCkpIHsKICAgICAgICBzdGQ6OmNlcnIgPDwgIkZhaWxlZCB0byBpbml0aWFsaXplIEdMRlciIDw8IHN0ZDo6ZW5kbDsKICAgICAgICByZXR1cm4gLTE7CiAgICB9CgogICAgLy8gQ3JlYXRlIGEgd2luZG93ZWQgbW9kZSB3aW5kb3cgYW5kIGl0cyBPcGVuR0wgY29udGV4dAogICAgR0xGV3dpbmRvdyogd2luZG93ID0gZ2xmd0NyZWF0ZVdpbmRvdyg4MDAsIDYwMCwgIlRlc3NlbGxhdGlvbiBFeGFtcGxlIiwgTlVMTCwgTlVMTCk7CiAgICBpZiAoIXdpbmRvdykgewogICAgICAgIHN0ZDo6Y2VyciA8PCAiRmFpbGVkIHRvIGNyZWF0ZSBHTEZXIHdpbmRvdyIgPDwgc3RkOjplbmRsOwogICAgICAgIGdsZndUZXJtaW5hdGUoKTsKICAgICAgICByZXR1cm4gLTE7CiAgICB9CgogICAgLy8gTWFrZSB0aGUgd2luZG93J3MgY29udGV4dCBjdXJyZW50CiAgICBnbGZ3TWFrZUNvbnRleHRDdXJyZW50KHdpbmRvdyk7CgogICAgLy8gSW5pdGlhbGl6ZSBHTEVXCiAgICBpZiAoZ2xld0luaXQoKSAhPSBHTEVXX09LKSB7CiAgICAgICAgc3RkOjpjZXJyIDw8ICJGYWlsZWQgdG8gaW5pdGlhbGl6ZSBHTEVXIiA8PCBzdGQ6OmVuZGw7CiAgICAgICAgcmV0dXJuIC0xOwogICAgfQoKICAgIC8vIERlZmluZSB2ZXJ0aWNlcyBvZiBhIHRyaWFuZ2xlCiAgICBHTGZsb2F0IHZlcnRpY2VzW10gPSB7CiAgICAgICAgLTAuNWYsIC0wLjVmLCAwLjBmLAogICAgICAgICAwLjVmLCAtMC41ZiwgMC4wZiwKICAgICAgICAgMC4wZiwgIDAuNWYsIDAuMGYKICAgIH07CgogICAgLy8gQ3JlYXRlIGFuZCBiaW5kIGEgVmVydGV4IEFycmF5IE9iamVjdAogICAgR0x1aW50IFZBTzsKICAgIGdsR2VuVmVydGV4QXJyYXlzKDEsICZWQU8pOwogICAgZ2xCaW5kVmVydGV4QXJyYXkoVkFPKTsKCiAgICAvLyBDcmVhdGUgYW5kIGJpbmQgYSBWZXJ0ZXggQnVmZmVyIE9iamVjdAogICAgR0x1aW50IFZCTzsKICAgIGdsR2VuQnVmZmVycygxLCAmVkJPKTsKICAgIGdsQmluZEJ1ZmZlcihHTF9BUlJBWV9CVUZGRVIsIFZCTyk7CiAgICBnbEJ1ZmZlckRhdGEoR0xfQVJSQVlfQlVGRkVSLCBzaXplb2YodmVydGljZXMpLCB2ZXJ0aWNlcywgR0xfU1RBVElDX0RSQVcpOwoKICAgIC8vIERlZmluZSB0aGUgdmVydGV4IGF0dHJpYnV0ZQogICAgZ2xWZXJ0ZXhBdHRyaWJQb2ludGVyKDAsIDMsIEdMX0ZMT0FULCBHTF9GQUxTRSwgMyAqIHNpemVvZihHTGZsb2F0KSwgKEdMdm9pZCopMCk7CiAgICBnbEVuYWJsZVZlcnRleEF0dHJpYkFycmF5KDApOwoKICAgIC8vIENvbXBpbGUgc2hhZGVycwogICAgY29uc3QgY2hhciogdmVydGV4U2hhZGVyU291cmNlID0gLyogVmVydGV4IFNoYWRlciBTb3VyY2UgKi87CiAgICBjb25zdCBjaGFyKiB0Y3NTaGFkZXJTb3VyY2UgPSAvKiBUZXNzZWxsYXRpb24gQ29udHJvbCBTaGFkZXIgU291cmNlICovOwogICAgY29uc3QgY2hhciogdGVzU2hhZGVyU291cmNlID0gLyogVGVzc2VsbGF0aW9uIEV2YWx1YXRpb24gU2hhZGVyIFNvdXJjZSAqLzsKICAgIGNvbnN0IGNoYXIqIGZyYWdtZW50U2hhZGVyU291cmNlID0gLyogRnJhZ21lbnQgU2hhZGVyIFNvdXJjZSAqLzsKCiAgICBHTHVpbnQgdmVydGV4U2hhZGVyID0gY29tcGlsZVNoYWRlcih2ZXJ0ZXhTaGFkZXJTb3VyY2UsIEdMX1ZFUlRFWF9TSEFERVIpOwogICAgR0x1aW50IHRjc1NoYWRlciA9IGNvbXBpbGVTaGFkZXIodGNzU2hhZGVyU291cmNlLCBHTF9URVNTX0NPTlRST0xfU0hBREVSKTsKICAgIEdMdWludCB0ZXNTaGFkZXIgPSBjb21waWxlU2hhZGVyKHRlc1NoYWRlclNvdXJjZSwgR0xfVEVTU19FVkFMVUFUSU9OX1NIQURFUik7CiAgICBHTHVpbnQgZnJhZ21lbnRTaGFkZXIgPSBjb21waWxlU2hhZGVyKGZyYWdtZW50U2hhZGVyU291cmNlLCBHTF9GUkFHTUVOVF9TSEFERVIpOwoKICAgIC8vIExpbmsgc2hhZGVycyBpbnRvIGEgcHJvZ3JhbQogICAgR0x1aW50IHNoYWRlclByb2dyYW0gPSBsaW5rUHJvZ3JhbSh2ZXJ0ZXhTaGFkZXIsIHRjc1NoYWRlciwgdGVzU2hhZGVyLCBmcmFnbWVudFNoYWRlcik7CgogICAgLy8gVXNlIHRoZSBzaGFkZXIgcHJvZ3JhbQogICAgZ2xVc2VQcm9ncmFtKHNoYWRlclByb2dyYW0pOwoKICAgIC8vIFNldCB0aGUgcG9seWdvbiBtb2RlIHRvIGxpbmUgZm9yIGJldHRlciB2aXN1YWxpemF0aW9uCiAgICBnbFBvbHlnb25Nb2RlKEdMX0ZST05UX0FORF9CQUNLLCBHTF9MSU5FKTsKCiAgICAvLyBNYWluIGxvb3AKICAgIHdoaWxlICghZ2xmd1dpbmRvd1Nob3VsZENsb3NlKHdpbmRvdykpIHsKICAgICAgICAvLyBSZW5kZXIgaGVyZQogICAgICAgIGdsQ2xlYXIoR0xfQ09MT1JfQlVGRkVSX0JJVCk7CgogICAgICAgIC8vIERyYXcgdGhlIHRlc3NlbGxhdGVkIHRyaWFuZ2xlCiAgICAgICAgZ2xCaW5kVmVydGV4QXJyYXkoVkFPKTsKICAgICAgICBnbERyYXdBcnJheXMoR0xfUEFUQ0hFUywgMCwgMyk7CgogICAgICAgIC8vIFN3YXAgZnJvbnQgYW5kIGJhY2sgYnVmZmVycwogICAgICAgIGdsZndTd2FwQnVmZmVycyh3aW5kb3cpOwoKICAgICAgICAvLyBQb2xsIGZvciBhbmQgcHJvY2VzcyBldmVudHMKICAgICAgICBnbGZ3UG9sbEV2ZW50cygpOwogICAgfQoKICAgIC8vIENsZWFuIHVwCiAgICBnbERlbGV0ZVZlcnRleEFycmF5cygxLCAmVkFPKTsKICAgIGdsRGVsZXRlQnVmZmVycygxLCAmVkJPKTsKICAgIGdsRGVsZXRlUHJvZ3JhbShzaGFkZXJQcm9ncmFtKTsKCiAgICBnbGZ3RGVzdHJveVdpbmRvdyh3aW5kb3cpOwogICAgZ2xmd1Rlcm1pbmF0ZSgpOwoKICAgIHJldHVybiAwOwp9CgpHTHVpbnQgY29tcGlsZVNoYWRlcihjb25zdCBjaGFyKiBzb3VyY2UsIEdMZW51bSBzaGFkZXJUeXBlKSB7CiAgICBHTHVpbnQgc2hhZGVyID0gZ2xDcmVhdGVTaGFkZXIoc2hhZGVyVHlwZSk7CiAgICBnbFNoYWRlclNvdXJjZShzaGFkZXIsIDEsICZzb3VyY2UsIE5VTEwpOwogICAgZ2xDb21waWxlU2hhZGVyKHNoYWRlcik7CgogICAgR0xpbnQgc3VjY2VzczsKICAgIGdsR2V0U2hhZGVyaXYoc2hhZGVyLCBHTF9DT01QSUxFX1NUQVRVUywgJnN1Y2Nlc3MpOwogICAgaWYgKCFzdWNjZXNzKSB7CiAgICAgICAgY2hhciBpbmZvTG9nWzUxMl07CiAgICAgICAgZ2xHZXRTaGFkZXJJbmZvTG9nKHNoYWRlciwgNTEyLCBOVUxMLCBpbmZvTG9nKTsKICAgICAgICBzdGQ6OmNlcnIgPDwgIkVSUk9SOjpTSEFERVI6OkNPTVBJTEFUSU9OX0ZBSUxFRFxuIiA8PCBpbmZvTG9nIDw8IHN0ZDo6ZW5kbDsKICAgIH0KCiAgICByZXR1cm4gc2hhZGVyOwp9CgpHTHVpbnQgbGlua1Byb2dyYW0oR0x1aW50IHZlcnRleFNoYWRlciwgR0x1aW50IHRjc1NoYWRlciwgR0x1aW50IHRlc1NoYWRlciwgR0x1aW50IGZyYWdtZW50U2hhZGVyKSB7CiAgICBHTHVpbnQgcHJvZ3JhbSA9IGdsQ3JlYXRlUHJvZ3JhbSgpOwogICAgZ2xBdHRhY2hTaGFkZXIocHJvZ3JhbSwgdmVydGV4U2hhZGVyKTsKICAgIGdsQXR0YWNoU2hhZGVyKHByb2dyYW0sIHRjc1NoYWRlcik7CiAgICBnbEF0dGFjaFNoYWRlcihwcm9ncmFtLCB0ZXNTaGFkZXIpOwogICAgZ2xBdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnJhZ21lbnRTaGFkZXIpOwogICAgZ2xMaW5rUHJvZ3JhbShwcm9ncmFtKTsKCiAgICBHTGludCBzdWNjZXNzOwogICAgZ2xHZXRQcm9ncmFtaXYocHJvZ3JhbSwgR0xfTElOS19TVEFUVVMsICZzdWNjZXNzKTsKICAgIGlmICghc3VjY2VzcykgewogICAgICAgIGNoYXIgaW5mb0xvZ1s1MTJdOwogICAgICAgIGdsR2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSwgNTEyLCBOVUxMLCBpbmZvTG9nKTsKICAgICAgICBzdGQ6OmNlcnIgPDwgIkVSUk9SOjpQUk9HUkFNOjpMSU5LSU5HX0ZBSUxFRFxuIiA8PCBpbmZvTG9nIDw8IHN0ZDo6ZW5kbDsKICAgIH0KCiAgICByZXR1cm4gcHJvZ3JhbTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;GL/glew.h&gt;
#include &lt;GLFW/glfw3.h&gt;
#include &lt;iostream&gt;

// Shader compilation utility functions
GLuint compileShader(const char* source, GLenum shaderType);
GLuint linkProgram(GLuint vertexShader, GLuint tcsShader, GLuint tesShader, GLuint fragmentShader);

int main() {
    // Initialize GLFW
    if (!glfwInit()) {
        std::cerr &lt;&lt; &quot;Failed to initialize GLFW&quot; &lt;&lt; std::endl;
        return -1;
    }

    // Create a windowed mode window and its OpenGL context
    GLFWwindow* window = glfwCreateWindow(800, 600, &quot;Tessellation Example&quot;, NULL, NULL);
    if (!window) {
        std::cerr &lt;&lt; &quot;Failed to create GLFW window&quot; &lt;&lt; std::endl;
        glfwTerminate();
        return -1;
    }

    // Make the window's context current
    glfwMakeContextCurrent(window);

    // Initialize GLEW
    if (glewInit() != GLEW_OK) {
        std::cerr &lt;&lt; &quot;Failed to initialize GLEW&quot; &lt;&lt; std::endl;
        return -1;
    }

    // Define vertices of a triangle
    GLfloat vertices[] = {
        -0.5f, -0.5f, 0.0f,
         0.5f, -0.5f, 0.0f,
         0.0f,  0.5f, 0.0f
    };

    // Create and bind a Vertex Array Object
    GLuint VAO;
    glGenVertexArrays(1, &amp;VAO);
    glBindVertexArray(VAO);

    // Create and bind a Vertex Buffer Object
    GLuint VBO;
    glGenBuffers(1, &amp;VBO);
    glBindBuffer(GL_ARRAY_BUFFER, VBO);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);

    // Define the vertex attribute
    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(GLfloat), (GLvoid*)0);
    glEnableVertexAttribArray(0);

    // Compile shaders
    const char* vertexShaderSource = /* Vertex Shader Source */;
    const char* tcsShaderSource = /* Tessellation Control Shader Source */;
    const char* tesShaderSource = /* Tessellation Evaluation Shader Source */;
    const char* fragmentShaderSource = /* Fragment Shader Source */;

    GLuint vertexShader = compileShader(vertexShaderSource, GL_VERTEX_SHADER);
    GLuint tcsShader = compileShader(tcsShaderSource, GL_TESS_CONTROL_SHADER);
    GLuint tesShader = compileShader(tesShaderSource, GL_TESS_EVALUATION_SHADER);
    GLuint fragmentShader = compileShader(fragmentShaderSource, GL_FRAGMENT_SHADER);

    // Link shaders into a program
    GLuint shaderProgram = linkProgram(vertexShader, tcsShader, tesShader, fragmentShader);

    // Use the shader program
    glUseProgram(shaderProgram);

    // Set the polygon mode to line for better visualization
    glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);

    // Main loop
    while (!glfwWindowShouldClose(window)) {
        // Render here
        glClear(GL_COLOR_BUFFER_BIT);

        // Draw the tessellated triangle
        glBindVertexArray(VAO);
        glDrawArrays(GL_PATCHES, 0, 3);

        // Swap front and back buffers
        glfwSwapBuffers(window);

        // Poll for and process events
        glfwPollEvents();
    }

    // Clean up
    glDeleteVertexArrays(1, &amp;VAO);
    glDeleteBuffers(1, &amp;VBO);
    glDeleteProgram(shaderProgram);

    glfwDestroyWindow(window);
    glfwTerminate();

    return 0;
}

GLuint compileShader(const char* source, GLenum shaderType) {
    GLuint shader = glCreateShader(shaderType);
    glShaderSource(shader, 1, &amp;source, NULL);
    glCompileShader(shader);

    GLint success;
    glGetShaderiv(shader, GL_COMPILE_STATUS, &amp;success);
    if (!success) {
        char infoLog[512];
        glGetShaderInfoLog(shader, 512, NULL, infoLog);
        std::cerr &lt;&lt; &quot;ERROR::SHADER::COMPILATION_FAILED\n&quot; &lt;&lt; infoLog &lt;&lt; std::endl;
    }

    return shader;
}

GLuint linkProgram(GLuint vertexShader, GLuint tcsShader, GLuint tesShader, GLuint fragmentShader) {
    GLuint program = glCreateProgram();
    glAttachShader(program, vertexShader);
    glAttachShader(program, tcsShader);
    glAttachShader(program, tesShader);
    glAttachShader(program, fragmentShader);
    glLinkProgram(program);

    GLint success;
    glGetProgramiv(program, GL_LINK_STATUS, &amp;success);
    if (!success) {
        char infoLog[512];
        glGetProgramInfoLog(program, 512, NULL, infoLog);
        std::cerr &lt;&lt; &quot;ERROR::PROGRAM::LINKING_FAILED\n&quot; &lt;&lt; infoLog &lt;&lt; std::endl;
    }

    return program;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ol>
<li><strong>Vertex Shader</strong>: Processes each vertex and passes it to the TCS.</li>
<li><strong>Tessellation Control Shader (TCS)</strong>: Sets the tessellation levels and passes the vertices to the TES.</li>
<li><strong>Tessellation Evaluation Shader (TES)</strong>: Computes the final positions of the tessellated vertices.</li>
<li><strong>Fragment Shader</strong>: Colors the fragments generated from the tessellated vertices.</li>
<li><strong>OpenGL Code</strong>: Sets up the shaders, buffers, and renders the tessellated triangle.</li>
</ol>
</div><h1>Practical Exercises</h1>
<div class='content'></div><h2>Exercise 1: Modify Tessellation Levels</h2>
<div class='content'><p><strong>Task</strong>: Modify the tessellation levels in the TCS to see how it affects the tessellation.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gVGVzc2VsbGF0aW9uIENvbnRyb2wgU2hhZGVyIChUQ1MpCiN2ZXJzaW9uIDQ1MCBjb3JlCgpsYXlvdXQodmVydGljZXMgPSAzKSBvdXQ7Cgp2b2lkIG1haW4oKSB7CiAgICBpZiAoZ2xfSW52b2NhdGlvbklEID09IDApIHsKICAgICAgICBnbF9UZXNzTGV2ZWxJbm5lclswXSA9IDEwLjA7IC8vIEluY3JlYXNlIGlubmVyIHRlc3NlbGxhdGlvbiBsZXZlbAogICAgICAgIGdsX1Rlc3NMZXZlbE91dGVyWzBdID0gMTAuMDsgLy8gSW5jcmVhc2Ugb3V0ZXIgdGVzc2VsbGF0aW9uIGxldmVsCiAgICAgICAgZ2xfVGVzc0xldmVsT3V0ZXJbMV0gPSAxMC4wOwogICAgICAgIGdsX1Rlc3NMZXZlbE91dGVyWzJdID0gMTAuMDsKICAgIH0KICAgIGdsX291dFtnbF9JbnZvY2F0aW9uSURdLmdsX1Bvc2l0aW9uID0gZ2xfaW5bZ2xfSW52b2NhdGlvbklEXS5nbF9Qb3NpdGlvbjsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Tessellation Control Shader (TCS)
#version 450 core

layout(vertices = 3) out;

void main() {
    if (gl_InvocationID == 0) {
        gl_TessLevelInner[0] = 10.0; // Increase inner tessellation level
        gl_TessLevelOuter[0] = 10.0; // Increase outer tessellation level
        gl_TessLevelOuter[1] = 10.0;
        gl_TessLevelOuter[2] = 10.0;
    }
    gl_out[gl_InvocationID].gl_Position = gl_in[gl_InvocationID].gl_Position;
}</pre></div><div class='content'></div><h2>Exercise 2: Change Tessellation Evaluation Shader</h2>
<div class='content'><p><strong>Task</strong>: Modify the TES to create a different shape, such as a curved surface.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gVGVzc2VsbGF0aW9uIEV2YWx1YXRpb24gU2hhZGVyIChURVMpCiN2ZXJzaW9uIDQ1MCBjb3JlCgpsYXlvdXQodHJpYW5nbGVzLCBlcXVhbF9zcGFjaW5nLCBjdykgaW47Cgp2b2lkIG1haW4oKSB7CiAgICB2ZWMzIHAwID0gZ2xfaW5bMF0uZ2xfUG9zaXRpb24ueHl6OwogICAgdmVjMyBwMSA9IGdsX2luWzFdLmdsX1Bvc2l0aW9uLnh5ejsKICAgIHZlYzMgcDIgPSBnbF9pblsyXS5nbF9Qb3NpdGlvbi54eXo7CgogICAgZmxvYXQgdSA9IGdsX1Rlc3NDb29yZC54OwogICAgZmxvYXQgdiA9IGdsX1Rlc3NDb29yZC55OwogICAgZmxvYXQgdyA9IGdsX1Rlc3NDb29yZC56OwoKICAgIHZlYzMgcG9zID0gdSAqIHAwICsgdiAqIHAxICsgdyAqIHAyOwogICAgcG9zLnogPSBzaW4ocG9zLnggKiAzLjE0MTU5KSAqIHNpbihwb3MueSAqIDMuMTQxNTkpOyAvLyBDcmVhdGUgYSBjdXJ2ZWQgc3VyZmFjZQogICAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvcywgMS4wKTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Tessellation Evaluation Shader (TES)
#version 450 core

layout(triangles, equal_spacing, cw) in;

void main() {
    vec3 p0 = gl_in[0].gl_Position.xyz;
    vec3 p1 = gl_in[1].gl_Position.xyz;
    vec3 p2 = gl_in[2].gl_Position.xyz;

    float u = gl_TessCoord.x;
    float v = gl_TessCoord.y;
    float w = gl_TessCoord.z;

    vec3 pos = u * p0 + v * p1 + w * p2;
    pos.z = sin(pos.x * 3.14159) * sin(pos.y * 3.14159); // Create a curved surface
    gl_Position = vec4(pos, 1.0);
}</pre></div><div class='content'></div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Incorrect Tessellation Levels</strong>: Ensure that the tessellation levels are set correctly in the TCS. Incorrect levels can lead to unexpected results.</li>
<li><strong>Patch Primitive Size</strong>: Make sure the number of vertices in the patch matches the layout specified in the TCS.</li>
<li><strong>Shader Compilation</strong>: Always check for shader compilation and linking errors to debug issues effectively.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered the basics of tessellation in OpenGL, including the tessellation pipeline, shaders, and practical examples. Tessellation allows for dynamic subdivision of polygons, enabling more detailed and smoother surfaces. By understanding and utilizing tessellation, you can create more complex and visually appealing graphics in your OpenGL applications.</p>
<p>Next, we will explore performance optimization techniques to ensure your OpenGL applications run efficiently.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-03-instanced-rendering' title="Instanced Rendering">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-01-optimizing-code' title="Optimizing OpenGL Code">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
