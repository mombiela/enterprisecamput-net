<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post-Processing Effects</title>

    <link rel="alternate" href="https://campusempresa.com/mod/open_gl/06-02-post-processing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/open_gl/06-02-post-processing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/open_gl/06-02-post-processing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/open_gl/06-02-post-processing" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/open_gl/06-02-post-processing" class="px-2">CA</a>
					</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-01-particle-systems' title="Particle Systems">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Post-Processing Effects</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-03-shadow-mapping' title="Shadow Mapping">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Post-processing effects are techniques applied to the final rendered image to enhance its visual quality or achieve specific artistic effects. These effects are typically implemented using shaders and framebuffers. In this section, we will cover the basics of post-processing, including setting up framebuffers, writing post-processing shaders, and applying common effects such as bloom, blur, and color correction.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Framebuffers</strong>: Off-screen rendering targets that allow you to render scenes to textures instead of directly to the screen.</li>
<li><strong>Shaders</strong>: Programs that run on the GPU to process vertex and fragment data. Post-processing shaders typically operate on the entire screen.</li>
<li><strong>Textures</strong>: Images or data that can be sampled in shaders. In post-processing, the rendered scene is often stored in a texture for further processing.</li>
</ol>
</div><h1><p>Setting Up Framebuffers</p>
</h1>
<div class='content'><p>To apply post-processing effects, you need to render your scene to a framebuffer object (FBO) instead of directly to the screen. Here’s how to set up a basic framebuffer:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ3JlYXRlIGEgZnJhbWVidWZmZXIgb2JqZWN0CkdMdWludCBmcmFtZWJ1ZmZlcjsKZ2xHZW5GcmFtZWJ1ZmZlcnMoMSwgJmZyYW1lYnVmZmVyKTsKZ2xCaW5kRnJhbWVidWZmZXIoR0xfRlJBTUVCVUZGRVIsIGZyYW1lYnVmZmVyKTsKCi8vIENyZWF0ZSBhIHRleHR1cmUgdG8gaG9sZCB0aGUgY29sb3IgYnVmZmVyCkdMdWludCB0ZXh0dXJlQ29sb3JidWZmZXI7CmdsR2VuVGV4dHVyZXMoMSwgJnRleHR1cmVDb2xvcmJ1ZmZlcik7CmdsQmluZFRleHR1cmUoR0xfVEVYVFVSRV8yRCwgdGV4dHVyZUNvbG9yYnVmZmVyKTsKZ2xUZXhJbWFnZTJEKEdMX1RFWFRVUkVfMkQsIDAsIEdMX1JHQiwgc2NyZWVuV2lkdGgsIHNjcmVlbkhlaWdodCwgMCwgR0xfUkdCLCBHTF9VTlNJR05FRF9CWVRFLCBOVUxMKTsKZ2xUZXhQYXJhbWV0ZXJpKEdMX1RFWFRVUkVfMkQsIEdMX1RFWFRVUkVfTUlOX0ZJTFRFUiwgR0xfTElORUFSKTsKZ2xUZXhQYXJhbWV0ZXJpKEdMX1RFWFRVUkVfMkQsIEdMX1RFWFRVUkVfTUFHX0ZJTFRFUiwgR0xfTElORUFSKTsKZ2xGcmFtZWJ1ZmZlclRleHR1cmUyRChHTF9GUkFNRUJVRkZFUiwgR0xfQ09MT1JfQVRUQUNITUVOVDAsIEdMX1RFWFRVUkVfMkQsIHRleHR1cmVDb2xvcmJ1ZmZlciwgMCk7CgovLyBDcmVhdGUgYSByZW5kZXJidWZmZXIgb2JqZWN0IGZvciBkZXB0aCBhbmQgc3RlbmNpbCBhdHRhY2htZW50CkdMdWludCByYm87CmdsR2VuUmVuZGVyYnVmZmVycygxLCAmcmJvKTsKZ2xCaW5kUmVuZGVyYnVmZmVyKEdMX1JFTkRFUkJVRkZFUiwgcmJvKTsKZ2xSZW5kZXJidWZmZXJTdG9yYWdlKEdMX1JFTkRFUkJVRkZFUiwgR0xfREVQVEgyNF9TVEVOQ0lMOCwgc2NyZWVuV2lkdGgsIHNjcmVlbkhlaWdodCk7CmdsRnJhbWVidWZmZXJSZW5kZXJidWZmZXIoR0xfRlJBTUVCVUZGRVIsIEdMX0RFUFRIX1NURU5DSUxfQVRUQUNITUVOVCwgR0xfUkVOREVSQlVGRkVSLCByYm8pOwoKLy8gQ2hlY2sgaWYgZnJhbWVidWZmZXIgaXMgY29tcGxldGUKaWYgKGdsQ2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyhHTF9GUkFNRUJVRkZFUikgIT0gR0xfRlJBTUVCVUZGRVJfQ09NUExFVEUpCiAgICBzdGQ6OmNvdXQgPDwgIkVSUk9SOjpGUkFNRUJVRkZFUjo6IEZyYW1lYnVmZmVyIGlzIG5vdCBjb21wbGV0ZSEiIDw8IHN0ZDo6ZW5kbDsKZ2xCaW5kRnJhbWVidWZmZXIoR0xfRlJBTUVCVUZGRVIsIDApOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Create a framebuffer object
GLuint framebuffer;
glGenFramebuffers(1, &amp;framebuffer);
glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);

// Create a texture to hold the color buffer
GLuint textureColorbuffer;
glGenTextures(1, &amp;textureColorbuffer);
glBindTexture(GL_TEXTURE_2D, textureColorbuffer);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, screenWidth, screenHeight, 0, GL_RGB, GL_UNSIGNED_BYTE, NULL);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, textureColorbuffer, 0);

// Create a renderbuffer object for depth and stencil attachment
GLuint rbo;
glGenRenderbuffers(1, &amp;rbo);
glBindRenderbuffer(GL_RENDERBUFFER, rbo);
glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH24_STENCIL8, screenWidth, screenHeight);
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_STENCIL_ATTACHMENT, GL_RENDERBUFFER, rbo);

// Check if framebuffer is complete
if (glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE)
    std::cout &lt;&lt; &quot;ERROR::FRAMEBUFFER:: Framebuffer is not complete!&quot; &lt;&lt; std::endl;
glBindFramebuffer(GL_FRAMEBUFFER, 0);</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>Framebuffer Object (FBO)</strong>: A container for textures and renderbuffers.</li>
<li><strong>Texture</strong>: Used to store the color output of the rendering.</li>
<li><strong>Renderbuffer</strong>: Used for depth and stencil buffers.</li>
</ul>
</div><h1><p>Writing Post-Processing Shaders</p>
</h1>
<div class='content'><p>Post-processing shaders are typically fragment shaders that process the entire screen. Here’s an example of a simple shader that inverts the colors of the rendered scene:</p>
</div><h2><p>Vertex Shader</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I3ZlcnNpb24gMzMwIGNvcmUKbGF5b3V0IChsb2NhdGlvbiA9IDApIGluIHZlYzIgYVBvczsKbGF5b3V0IChsb2NhdGlvbiA9IDEpIGluIHZlYzIgYVRleENvb3JkczsKCm91dCB2ZWMyIFRleENvb3JkczsKCnZvaWQgbWFpbigpCnsKICAgIFRleENvb3JkcyA9IGFUZXhDb29yZHM7CiAgICBnbF9Qb3NpdGlvbiA9IHZlYzQoYVBvcywgMC4wLCAxLjApOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#version 330 core
layout (location = 0) in vec2 aPos;
layout (location = 1) in vec2 aTexCoords;

out vec2 TexCoords;

void main()
{
    TexCoords = aTexCoords;
    gl_Position = vec4(aPos, 0.0, 1.0);
}</pre></div><div class='content'></div><h2><p>Fragment Shader</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I3ZlcnNpb24gMzMwIGNvcmUKb3V0IHZlYzQgRnJhZ0NvbG9yOwoKaW4gdmVjMiBUZXhDb29yZHM7Cgp1bmlmb3JtIHNhbXBsZXIyRCBzY3JlZW5UZXh0dXJlOwoKdm9pZCBtYWluKCkKewogICAgdmVjMyBjb2xvciA9IHRleHR1cmUoc2NyZWVuVGV4dHVyZSwgVGV4Q29vcmRzKS5yZ2I7CiAgICBGcmFnQ29sb3IgPSB2ZWM0KHZlYzMoMS4wIC0gY29sb3IpLCAxLjApOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#version 330 core
out vec4 FragColor;

in vec2 TexCoords;

uniform sampler2D screenTexture;

void main()
{
    vec3 color = texture(screenTexture, TexCoords).rgb;
    FragColor = vec4(vec3(1.0 - color), 1.0);
}</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>Vertex Shader</strong>: Passes texture coordinates to the fragment shader.</li>
<li><strong>Fragment Shader</strong>: Samples the texture and inverts the colors.</li>
</ul>
</div><h1><p>Applying Post-Processing Effects</p>
</h1>
<div class='content'><p>To apply the post-processing effect, you need to render the scene to the framebuffer, then render a screen-filling quad using the post-processing shader:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRmlyc3QgcGFzczogcmVuZGVyIHRoZSBzY2VuZSB0byB0aGUgZnJhbWVidWZmZXIKZ2xCaW5kRnJhbWVidWZmZXIoR0xfRlJBTUVCVUZGRVIsIGZyYW1lYnVmZmVyKTsKZ2xDbGVhcihHTF9DT0xPUl9CVUZGRVJfQklUIHwgR0xfREVQVEhfQlVGRkVSX0JJVCk7Ci8vIFJlbmRlciB5b3VyIHNjZW5lIGhlcmUKZ2xCaW5kRnJhbWVidWZmZXIoR0xfRlJBTUVCVUZGRVIsIDApOwoKLy8gU2Vjb25kIHBhc3M6IHJlbmRlciB0aGUgcXVhZCB3aXRoIHRoZSBwb3N0LXByb2Nlc3Npbmcgc2hhZGVyCmdsQ2xlYXIoR0xfQ09MT1JfQlVGRkVSX0JJVCk7CnBvc3RQcm9jZXNzaW5nU2hhZGVyLnVzZSgpOwpnbEJpbmRWZXJ0ZXhBcnJheShxdWFkVkFPKTsKZ2xCaW5kVGV4dHVyZShHTF9URVhUVVJFXzJELCB0ZXh0dXJlQ29sb3JidWZmZXIpOwpnbERyYXdBcnJheXMoR0xfVFJJQU5HTEVTLCAwLCA2KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// First pass: render the scene to the framebuffer
glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
// Render your scene here
glBindFramebuffer(GL_FRAMEBUFFER, 0);

// Second pass: render the quad with the post-processing shader
glClear(GL_COLOR_BUFFER_BIT);
postProcessingShader.use();
glBindVertexArray(quadVAO);
glBindTexture(GL_TEXTURE_2D, textureColorbuffer);
glDrawArrays(GL_TRIANGLES, 0, 6);</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>First Pass</strong>: Render the scene to the framebuffer.</li>
<li><strong>Second Pass</strong>: Render a quad with the post-processing shader applied to the texture from the framebuffer.</li>
</ul>
</div><h1><p>Common Post-Processing Effects</p>
</h1>
<div class='content'></div><h2><p>Bloom</p>
</h2>
<div class='content'><p>Bloom adds a glow effect to bright areas of the image. It involves blurring the bright areas and then combining them with the original image.</p>
</div><h2><p>Blur</p>
</h2>
<div class='content'><p>Blurring smooths out the image by averaging the colors of neighboring pixels. This can be achieved using a Gaussian blur shader.</p>
</div><h2><p>Color Correction</p>
</h2>
<div class='content'><p>Color correction adjusts the colors of the image to achieve a desired look. This can include changing brightness, contrast, saturation, and applying color filters.</p>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise: Implement a Grayscale Post-Processing Effect</p>
</h2>
<div class='content'><ol>
<li><strong>Setup</strong>: Use the framebuffer setup code provided above.</li>
<li><strong>Shader</strong>: Write a fragment shader that converts the image to grayscale.</li>
<li><strong>Render</strong>: Apply the shader to the rendered scene.</li>
</ol>
</div><h2><p>Grayscale Fragment Shader</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I3ZlcnNpb24gMzMwIGNvcmUKb3V0IHZlYzQgRnJhZ0NvbG9yOwoKaW4gdmVjMiBUZXhDb29yZHM7Cgp1bmlmb3JtIHNhbXBsZXIyRCBzY3JlZW5UZXh0dXJlOwoKdm9pZCBtYWluKCkKewogICAgdmVjMyBjb2xvciA9IHRleHR1cmUoc2NyZWVuVGV4dHVyZSwgVGV4Q29vcmRzKS5yZ2I7CiAgICBmbG9hdCBncmF5ID0gZG90KGNvbG9yLCB2ZWMzKDAuMjk5LCAwLjU4NywgMC4xMTQpKTsKICAgIEZyYWdDb2xvciA9IHZlYzQodmVjMyhncmF5KSwgMS4wKTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#version 330 core
out vec4 FragColor;

in vec2 TexCoords;

uniform sampler2D screenTexture;

void main()
{
    vec3 color = texture(screenTexture, TexCoords).rgb;
    float gray = dot(color, vec3(0.299, 0.587, 0.114));
    FragColor = vec4(vec3(gray), 1.0);
}</pre></div><div class='content'></div><h2><p>Solution</p>
</h2>
<div class='content'><ol>
<li><strong>Setup</strong>: Use the provided framebuffer setup code.</li>
<li><strong>Shader</strong>: Use the grayscale fragment shader provided above.</li>
<li><strong>Render</strong>: Render the scene to the framebuffer, then render the quad with the grayscale shader.</li>
</ol>
</div><h1><p>Summary</p>
</h1>
<div class='content'><p>In this section, we covered the basics of post-processing effects in OpenGL. We learned how to set up framebuffers, write post-processing shaders, and apply common effects such as color inversion. We also provided a practical exercise to implement a grayscale effect. Post-processing is a powerful tool for enhancing the visual quality of your applications, and mastering it will allow you to create stunning graphics.</p>
<p>Next, we will explore more advanced rendering techniques and special effects to further enhance your OpenGL applications.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-01-particle-systems' title="Particle Systems">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-03-shadow-mapping' title="Shadow Mapping">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
