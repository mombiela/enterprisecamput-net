<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interpreter</title>

    <link rel="alternate" href="https://campusempresa.com/mod/patrones_diseno/04-04-interpreter" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/patrones_diseno/04-04-interpreter" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/patrones_diseno/04-04-interpreter" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/patrones_diseno/04-04-interpreter" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/patrones_diseno/04-04-interpreter" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-03-command' title="Command">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Interpreter</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='04-05-iterator' title="Iterator">Next &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to the Interpreter Pattern</h1>
<div class='content'><p>The Interpreter pattern is a behavioral design pattern that provides a way to evaluate language grammar or expressions. This pattern is used to define a grammatical representation for a language and an interpreter to interpret the grammar.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Grammar</strong>: A set of rules that define the structure of valid expressions in a language.</li>
<li><strong>Abstract Syntax Tree (AST)</strong>: A hierarchical tree representation of the structure of source code.</li>
<li><strong>Context</strong>: Contains information that is global to the interpreter, such as variable values.</li>
<li><strong>Terminal Expression</strong>: Represents the leaf nodes in the AST, which are the basic elements of the language.</li>
<li><strong>Non-terminal Expression</strong>: Represents the internal nodes in the AST, which are composed of terminal and/or other non-terminal expressions.</li>
</ul>
</div><h2>When to Use the Interpreter Pattern</h2>
<div class='content'><ul>
<li>When you have a simple language or grammar to interpret.</li>
<li>When the grammar is relatively stable and not subject to frequent changes.</li>
<li>When you need to interpret expressions repeatedly.</li>
</ul>
</div><h1>Structure of the Interpreter Pattern</h1>
<div class='content'><p>The Interpreter pattern typically involves the following classes:</p>
<ol>
<li><strong>AbstractExpression</strong>: Declares an abstract <code>interpret</code> method that is common to all nodes in the AST.</li>
<li><strong>TerminalExpression</strong>: Implements the <code>interpret</code> method for terminal symbols in the grammar.</li>
<li><strong>NonTerminalExpression</strong>: Implements the <code>interpret</code> method for non-terminal symbols in the grammar.</li>
<li><strong>Context</strong>: Contains information that is global to the interpreter.</li>
</ol>
</div><h2>UML Diagram</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ky0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tKwp8ICAgQWJzdHJhY3RFeHByZXNzaW9uICB8PC0tLS0tfCAgIFRlcm1pbmFsRXhwcmVzc2lvbiAgIHwKKy0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tKwp8ICsgaW50ZXJwcmV0KGN0eCkgIHwgICAgICAgfCArIGludGVycHJldChjdHgpICB8CistLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLSsKICAgICAgICBeICAgICAgICAgICAgICAgICAgICAgICAgICAgXgogICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICB8CiAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKKy0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tKwp8IE5vblRlcm1pbmFsRXhwcmVzc2lvbiB8PC0tLS0tfCAgICAgICBDb250ZXh0ICAgICAgIHwKKy0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tKwp8ICsgaW50ZXJwcmV0KGN0eCkgIHwgICAgICAgfCArIGdldFZhbHVlKCkgICAgICB8CistLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICB8ICsgc2V0VmFsdWUoKSAgICAgIHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tKw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>+-------------------+       +-------------------+
|   AbstractExpression  |&lt;-----|   TerminalExpression   |
+-------------------+       +-------------------+
| + interpret(ctx)  |       | + interpret(ctx)  |
+-------------------+       +-------------------+
        ^                           ^
        |                           |
        |                           |
+-------------------+       +-------------------+
| NonTerminalExpression |&lt;-----|       Context       |
+-------------------+       +-------------------+
| + interpret(ctx)  |       | + getValue()      |
+-------------------+       | + setValue()      |
                            +-------------------+</pre></div><div class='content'></div><h1>Example: Simple Arithmetic Interpreter</h1>
<div class='content'><p>Let's create a simple interpreter for arithmetic expressions involving addition and multiplication.</p>
</div><h2>Step 1: Define the Abstract Expression</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgRXhwcmVzc2lvbjoKICAgIGRlZiBpbnRlcnByZXQoc2VsZiwgY29udGV4dCk6CiAgICAgICAgcGFzcw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Expression:
    def interpret(self, context):
        pass</pre></div><div class='content'></div><h2>Step 2: Define Terminal Expressions</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgTnVtYmVyKEV4cHJlc3Npb24pOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIHZhbHVlKToKICAgICAgICBzZWxmLnZhbHVlID0gdmFsdWUKCiAgICBkZWYgaW50ZXJwcmV0KHNlbGYsIGNvbnRleHQpOgogICAgICAgIHJldHVybiBzZWxmLnZhbHVl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Number(Expression):
    def __init__(self, value):
        self.value = value

    def interpret(self, context):
        return self.value</pre></div><div class='content'></div><h2>Step 3: Define Non-terminal Expressions</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgQWRkKEV4cHJlc3Npb24pOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGxlZnQsIHJpZ2h0KToKICAgICAgICBzZWxmLmxlZnQgPSBsZWZ0CiAgICAgICAgc2VsZi5yaWdodCA9IHJpZ2h0CgogICAgZGVmIGludGVycHJldChzZWxmLCBjb250ZXh0KToKICAgICAgICByZXR1cm4gc2VsZi5sZWZ0LmludGVycHJldChjb250ZXh0KSArIHNlbGYucmlnaHQuaW50ZXJwcmV0KGNvbnRleHQpCgpjbGFzcyBNdWx0aXBseShFeHByZXNzaW9uKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBsZWZ0LCByaWdodCk6CiAgICAgICAgc2VsZi5sZWZ0ID0gbGVmdAogICAgICAgIHNlbGYucmlnaHQgPSByaWdodAoKICAgIGRlZiBpbnRlcnByZXQoc2VsZiwgY29udGV4dCk6CiAgICAgICAgcmV0dXJuIHNlbGYubGVmdC5pbnRlcnByZXQoY29udGV4dCkgKiBzZWxmLnJpZ2h0LmludGVycHJldChjb250ZXh0KQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Add(Expression):
    def __init__(self, left, right):
        self.left = left
        self.right = right

    def interpret(self, context):
        return self.left.interpret(context) + self.right.interpret(context)

class Multiply(Expression):
    def __init__(self, left, right):
        self.left = left
        self.right = right

    def interpret(self, context):
        return self.left.interpret(context) * self.right.interpret(context)</pre></div><div class='content'></div><h2>Step 4: Define the Context</h2>
<div class='content'><p>In this simple example, we don't need a complex context, so we can skip this step.</p>
</div><h2>Step 5: Use the Interpreter</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDb25zdHJ1Y3QgdGhlIGV4cHJlc3Npb24gKDUgKyAzKSAqIDIKZXhwcmVzc2lvbiA9IE11bHRpcGx5KAogICAgQWRkKE51bWJlcig1KSwgTnVtYmVyKDMpKSwKICAgIE51bWJlcigyKQopCgojIEludGVycHJldCB0aGUgZXhwcmVzc2lvbgpyZXN1bHQgPSBleHByZXNzaW9uLmludGVycHJldChOb25lKQpwcmludChmIlRoZSByZXN1bHQgb2YgdGhlIGV4cHJlc3Npb24gaXM6IHtyZXN1bHR9Iik="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Construct the expression (5 + 3) * 2
expression = Multiply(
    Add(Number(5), Number(3)),
    Number(2)
)

# Interpret the expression
result = expression.interpret(None)
print(f&quot;The result of the expression is: {result}&quot;)</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ol>
<li><strong>Number</strong>: Represents a terminal expression (a number).</li>
<li><strong>Add</strong>: Represents a non-terminal expression for addition.</li>
<li><strong>Multiply</strong>: Represents a non-terminal expression for multiplication.</li>
<li><strong>Expression</strong>: The abstract base class for all expressions.</li>
<li><strong>Context</strong>: Not used in this simple example.</li>
</ol>
</div><h2>Output</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("VGhlIHJlc3VsdCBvZiB0aGUgZXhwcmVzc2lvbiBpczogMTY="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>The result of the expression is: 16</pre></div><div class='content'></div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise</h2>
<div class='content'><p>Create an interpreter for boolean expressions involving AND, OR, and NOT operations.</p>
<ol>
<li>Define the abstract <code>Expression</code> class.</li>
<li>Implement terminal expressions for boolean values (<code>True</code> and <code>False</code>).</li>
<li>Implement non-terminal expressions for AND, OR, and NOT operations.</li>
<li>Construct and interpret the expression <code>NOT (True AND False) OR True</code>.</li>
</ol>
</div><h2>Solution</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgRXhwcmVzc2lvbjoKICAgIGRlZiBpbnRlcnByZXQoc2VsZiwgY29udGV4dCk6CiAgICAgICAgcGFzcwoKY2xhc3MgQm9vbGVhbihFeHByZXNzaW9uKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB2YWx1ZSk6CiAgICAgICAgc2VsZi52YWx1ZSA9IHZhbHVlCgogICAgZGVmIGludGVycHJldChzZWxmLCBjb250ZXh0KToKICAgICAgICByZXR1cm4gc2VsZi52YWx1ZQoKY2xhc3MgQW5kKEV4cHJlc3Npb24pOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGxlZnQsIHJpZ2h0KToKICAgICAgICBzZWxmLmxlZnQgPSBsZWZ0CiAgICAgICAgc2VsZi5yaWdodCA9IHJpZ2h0CgogICAgZGVmIGludGVycHJldChzZWxmLCBjb250ZXh0KToKICAgICAgICByZXR1cm4gc2VsZi5sZWZ0LmludGVycHJldChjb250ZXh0KSBhbmQgc2VsZi5yaWdodC5pbnRlcnByZXQoY29udGV4dCkKCmNsYXNzIE9yKEV4cHJlc3Npb24pOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGxlZnQsIHJpZ2h0KToKICAgICAgICBzZWxmLmxlZnQgPSBsZWZ0CiAgICAgICAgc2VsZi5yaWdodCA9IHJpZ2h0CgogICAgZGVmIGludGVycHJldChzZWxmLCBjb250ZXh0KToKICAgICAgICByZXR1cm4gc2VsZi5sZWZ0LmludGVycHJldChjb250ZXh0KSBvciBzZWxmLnJpZ2h0LmludGVycHJldChjb250ZXh0KQoKY2xhc3MgTm90KEV4cHJlc3Npb24pOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGV4cHIpOgogICAgICAgIHNlbGYuZXhwciA9IGV4cHIKCiAgICBkZWYgaW50ZXJwcmV0KHNlbGYsIGNvbnRleHQpOgogICAgICAgIHJldHVybiBub3Qgc2VsZi5leHByLmludGVycHJldChjb250ZXh0KQoKIyBDb25zdHJ1Y3QgdGhlIGV4cHJlc3Npb24gTk9UIChUcnVlIEFORCBGYWxzZSkgT1IgVHJ1ZQpleHByZXNzaW9uID0gT3IoCiAgICBOb3QoCiAgICAgICAgQW5kKEJvb2xlYW4oVHJ1ZSksIEJvb2xlYW4oRmFsc2UpKQogICAgKSwKICAgIEJvb2xlYW4oVHJ1ZSkKKQoKIyBJbnRlcnByZXQgdGhlIGV4cHJlc3Npb24KcmVzdWx0ID0gZXhwcmVzc2lvbi5pbnRlcnByZXQoTm9uZSkKcHJpbnQoZiJUaGUgcmVzdWx0IG9mIHRoZSBleHByZXNzaW9uIGlzOiB7cmVzdWx0fSIp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Expression:
    def interpret(self, context):
        pass

class Boolean(Expression):
    def __init__(self, value):
        self.value = value

    def interpret(self, context):
        return self.value

class And(Expression):
    def __init__(self, left, right):
        self.left = left
        self.right = right

    def interpret(self, context):
        return self.left.interpret(context) and self.right.interpret(context)

class Or(Expression):
    def __init__(self, left, right):
        self.left = left
        self.right = right

    def interpret(self, context):
        return self.left.interpret(context) or self.right.interpret(context)

class Not(Expression):
    def __init__(self, expr):
        self.expr = expr

    def interpret(self, context):
        return not self.expr.interpret(context)

# Construct the expression NOT (True AND False) OR True
expression = Or(
    Not(
        And(Boolean(True), Boolean(False))
    ),
    Boolean(True)
)

# Interpret the expression
result = expression.interpret(None)
print(f&quot;The result of the expression is: {result}&quot;)</pre></div><div class='content'></div><h2>Output</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("VGhlIHJlc3VsdCBvZiB0aGUgZXhwcmVzc2lvbiBpczogVHJ1ZQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>The result of the expression is: True</pre></div><div class='content'></div><h2>Common Mistakes</h2>
<div class='content'><ul>
<li><strong>Forgetting to Implement the <code>interpret</code> Method</strong>: Ensure that all expression classes implement the <code>interpret</code> method.</li>
<li><strong>Incorrect Expression Construction</strong>: Pay attention to the order of operations when constructing complex expressions.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>The Interpreter pattern is useful for defining and evaluating a language's grammar. By breaking down expressions into terminal and non-terminal expressions, you can create a flexible and reusable interpreter. This pattern is particularly useful for simple languages and grammars that are relatively stable.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-03-command' title="Command">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='04-05-iterator' title="Iterator">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
