<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design Patterns in Distributed Systems</title>

    <link rel="alternate" href="https://campusempresa.com/mod/patrones_diseno/06-03-patrones-sistemas-distribuidos" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/patrones_diseno/06-03-patrons-sistemes-distribuits" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/patrones_diseno/06-03-patterns-distributed-systems" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=2" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/patrones_diseno/06-03-patrones-sistemas-distribuidos" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/patrones_diseno/06-03-patrons-sistemes-distribuits" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Programming Languages</a>
				 					<a href="/categ/frameworks">Frameworks and Libraries</a>
				 					<a href="/categ/tech-tools">Technical Tools</a>
				 					<a href="/categ/foundations">Theoretical Foundations</a>
				 					<a href="/categ/soft-skills">Social Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-02-patterns-microservices' title="Design Patterns in Microservices">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Design Patterns in Distributed Systems</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-04-patterns-agile-development' title="Design Patterns in Agile Development">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introduction</p>
</h1>
<div class='content'><p>Distributed systems are complex architectures where components located on networked computers communicate and coordinate their actions by passing messages. Design patterns in distributed systems help manage this complexity by providing reusable solutions to common problems. This section will cover key design patterns that are particularly useful in distributed systems.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Scalability</strong>: The ability of a system to handle increased load by adding resources.</li>
<li><strong>Fault Tolerance</strong>: The capability of a system to continue operating properly in the event of the failure of some of its components.</li>
<li><strong>Consistency</strong>: Ensuring that all nodes in a distributed system have the same data at any given time.</li>
<li><strong>Latency</strong>: The time it takes for a message to travel from one node to another.</li>
<li><strong>Partitioning</strong>: Dividing a database into pieces that can be managed and accessed independently.</li>
</ol>
</div><h1><p>Common Design Patterns in Distributed Systems</p>
</h1>
<div class='content'></div><h2><ol>
<li><strong>Leader Election Pattern</strong></li>
</ol>
</h2>
<div class='content'><p><strong>Purpose</strong>: To ensure that one node in a distributed system acts as the leader to coordinate tasks.</p>
<p><strong>How it works</strong>:</p>
<ul>
<li>Nodes in the system communicate to elect a leader.</li>
<li>The leader is responsible for managing tasks and coordinating actions.</li>
<li>If the leader fails, a new leader is elected.</li>
</ul>
<p><strong>Example</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHJhbmRvbQppbXBvcnQgdGltZQoKY2xhc3MgTm9kZToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBpZCk6CiAgICAgICAgc2VsZi5pZCA9IGlkCiAgICAgICAgc2VsZi5pc19sZWFkZXIgPSBGYWxzZQoKICAgIGRlZiBlbGVjdF9sZWFkZXIoc2VsZiwgbm9kZXMpOgogICAgICAgIGhpZ2hlc3RfaWQgPSBtYXgobm9kZS5pZCBmb3Igbm9kZSBpbiBub2RlcykKICAgICAgICBmb3Igbm9kZSBpbiBub2RlczoKICAgICAgICAgICAgaWYgbm9kZS5pZCA9PSBoaWdoZXN0X2lkOgogICAgICAgICAgICAgICAgbm9kZS5pc19sZWFkZXIgPSBUcnVlCiAgICAgICAgICAgICAgICBwcmludChmIk5vZGUge25vZGUuaWR9IGlzIGVsZWN0ZWQgYXMgdGhlIGxlYWRlci4iKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgbm9kZS5pc19sZWFkZXIgPSBGYWxzZQoKIyBFeGFtcGxlIHVzYWdlCm5vZGVzID0gW05vZGUoaSkgZm9yIGkgaW4gcmFuZ2UoNSldCnJhbmRvbS5zaHVmZmxlKG5vZGVzKQpub2Rlc1swXS5lbGVjdF9sZWFkZXIobm9kZXMp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import random
import time

class Node:
    def __init__(self, id):
        self.id = id
        self.is_leader = False

    def elect_leader(self, nodes):
        highest_id = max(node.id for node in nodes)
        for node in nodes:
            if node.id == highest_id:
                node.is_leader = True
                print(f&quot;Node {node.id} is elected as the leader.&quot;)
            else:
                node.is_leader = False

# Example usage
nodes = [Node(i) for i in range(5)]
random.shuffle(nodes)
nodes[0].elect_leader(nodes)</pre></div><div class='content'></div><h2><ol start="2">
<li><strong>Replication Pattern</strong></li>
</ol>
</h2>
<div class='content'><p><strong>Purpose</strong>: To improve fault tolerance and availability by duplicating data across multiple nodes.</p>
<p><strong>How it works</strong>:</p>
<ul>
<li>Data is copied to multiple nodes.</li>
<li>If one node fails, data can still be accessed from another node.</li>
<li>Consistency mechanisms ensure that all copies of the data are the same.</li>
</ul>
<p><strong>Example</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgRGF0YU5vZGU6CiAgICBkZWYgX19pbml0X18oc2VsZiwgaWQpOgogICAgICAgIHNlbGYuaWQgPSBpZAogICAgICAgIHNlbGYuZGF0YSA9IHt9CgogICAgZGVmIHJlcGxpY2F0ZV9kYXRhKHNlbGYsIGtleSwgdmFsdWUsIG5vZGVzKToKICAgICAgICBmb3Igbm9kZSBpbiBub2RlczoKICAgICAgICAgICAgbm9kZS5kYXRhW2tleV0gPSB2YWx1ZQogICAgICAgICAgICBwcmludChmIkRhdGEge2tleX06e3ZhbHVlfSByZXBsaWNhdGVkIHRvIE5vZGUge25vZGUuaWR9IikKCiMgRXhhbXBsZSB1c2FnZQpub2RlcyA9IFtEYXRhTm9kZShpKSBmb3IgaSBpbiByYW5nZSgzKV0Kbm9kZXNbMF0ucmVwbGljYXRlX2RhdGEoJ2tleTEnLCAndmFsdWUxJywgbm9kZXMp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class DataNode:
    def __init__(self, id):
        self.id = id
        self.data = {}

    def replicate_data(self, key, value, nodes):
        for node in nodes:
            node.data[key] = value
            print(f&quot;Data {key}:{value} replicated to Node {node.id}&quot;)

# Example usage
nodes = [DataNode(i) for i in range(3)]
nodes[0].replicate_data('key1', 'value1', nodes)</pre></div><div class='content'></div><h2><ol start="3">
<li><strong>Sharding Pattern</strong></li>
</ol>
</h2>
<div class='content'><p><strong>Purpose</strong>: To improve scalability by partitioning data across multiple nodes.</p>
<p><strong>How it works</strong>:</p>
<ul>
<li>Data is divided into shards, each managed by a different node.</li>
<li>Each shard contains a subset of the data.</li>
<li>Requests are routed to the appropriate shard based on the data.</li>
</ul>
<p><strong>Example</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgU2hhcmQ6CiAgICBkZWYgX19pbml0X18oc2VsZiwgaWQpOgogICAgICAgIHNlbGYuaWQgPSBpZAogICAgICAgIHNlbGYuZGF0YSA9IHt9CgogICAgZGVmIGFkZF9kYXRhKHNlbGYsIGtleSwgdmFsdWUpOgogICAgICAgIHNlbGYuZGF0YVtrZXldID0gdmFsdWUKICAgICAgICBwcmludChmIkRhdGEge2tleX06e3ZhbHVlfSBhZGRlZCB0byBTaGFyZCB7c2VsZi5pZH0iKQoKY2xhc3MgU2hhcmRNYW5hZ2VyOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIG51bV9zaGFyZHMpOgogICAgICAgIHNlbGYuc2hhcmRzID0gW1NoYXJkKGkpIGZvciBpIGluIHJhbmdlKG51bV9zaGFyZHMpXQoKICAgIGRlZiBnZXRfc2hhcmQoc2VsZiwga2V5KToKICAgICAgICBzaGFyZF9pZCA9IGhhc2goa2V5KSAlIGxlbihzZWxmLnNoYXJkcykKICAgICAgICByZXR1cm4gc2VsZi5zaGFyZHNbc2hhcmRfaWRdCgojIEV4YW1wbGUgdXNhZ2UKc2hhcmRfbWFuYWdlciA9IFNoYXJkTWFuYWdlcigzKQpzaGFyZCA9IHNoYXJkX21hbmFnZXIuZ2V0X3NoYXJkKCdrZXkxJykKc2hhcmQuYWRkX2RhdGEoJ2tleTEnLCAndmFsdWUxJyk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Shard:
    def __init__(self, id):
        self.id = id
        self.data = {}

    def add_data(self, key, value):
        self.data[key] = value
        print(f&quot;Data {key}:{value} added to Shard {self.id}&quot;)

class ShardManager:
    def __init__(self, num_shards):
        self.shards = [Shard(i) for i in range(num_shards)]

    def get_shard(self, key):
        shard_id = hash(key) % len(self.shards)
        return self.shards[shard_id]

# Example usage
shard_manager = ShardManager(3)
shard = shard_manager.get_shard('key1')
shard.add_data('key1', 'value1')</pre></div><div class='content'></div><h2><ol start="4">
<li><strong>Circuit Breaker Pattern</strong></li>
</ol>
</h2>
<div class='content'><p><strong>Purpose</strong>: To prevent cascading failures in a distributed system by stopping the flow of requests to a failing service.</p>
<p><strong>How it works</strong>:</p>
<ul>
<li>Monitors the number of failures in a service.</li>
<li>If failures exceed a threshold, the circuit breaker trips, and requests are not sent to the failing service.</li>
<li>After a timeout period, the circuit breaker allows a limited number of test requests to check if the service has recovered.</li>
</ul>
<p><strong>Example</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgQ2lyY3VpdEJyZWFrZXI6CiAgICBkZWYgX19pbml0X18oc2VsZiwgZmFpbHVyZV90aHJlc2hvbGQsIHJlY292ZXJ5X3RpbWVvdXQpOgogICAgICAgIHNlbGYuZmFpbHVyZV90aHJlc2hvbGQgPSBmYWlsdXJlX3RocmVzaG9sZAogICAgICAgIHNlbGYucmVjb3ZlcnlfdGltZW91dCA9IHJlY292ZXJ5X3RpbWVvdXQKICAgICAgICBzZWxmLmZhaWx1cmVfY291bnQgPSAwCiAgICAgICAgc2VsZi5zdGF0ZSA9ICdDTE9TRUQnCiAgICAgICAgc2VsZi5sYXN0X2ZhaWx1cmVfdGltZSA9IE5vbmUKCiAgICBkZWYgY2FsbChzZWxmLCBmdW5jKToKICAgICAgICBpZiBzZWxmLnN0YXRlID09ICdPUEVOJzoKICAgICAgICAgICAgaWYgdGltZS50aW1lKCkgLSBzZWxmLmxhc3RfZmFpbHVyZV90aW1lID4gc2VsZi5yZWNvdmVyeV90aW1lb3V0OgogICAgICAgICAgICAgICAgc2VsZi5zdGF0ZSA9ICdIQUxGLU9QRU4nCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oIkNpcmN1aXQgaXMgb3BlbiIpCgogICAgICAgIHRyeToKICAgICAgICAgICAgcmVzdWx0ID0gZnVuYygpCiAgICAgICAgICAgIHNlbGYuZmFpbHVyZV9jb3VudCA9IDAKICAgICAgICAgICAgc2VsZi5zdGF0ZSA9ICdDTE9TRUQnCiAgICAgICAgICAgIHJldHVybiByZXN1bHQKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHNlbGYuZmFpbHVyZV9jb3VudCArPSAxCiAgICAgICAgICAgIGlmIHNlbGYuZmFpbHVyZV9jb3VudCA+PSBzZWxmLmZhaWx1cmVfdGhyZXNob2xkOgogICAgICAgICAgICAgICAgc2VsZi5zdGF0ZSA9ICdPUEVOJwogICAgICAgICAgICAgICAgc2VsZi5sYXN0X2ZhaWx1cmVfdGltZSA9IHRpbWUudGltZSgpCiAgICAgICAgICAgIHJhaXNlIGUKCiMgRXhhbXBsZSB1c2FnZQpkZWYgdW5yZWxpYWJsZV9zZXJ2aWNlKCk6CiAgICBpZiByYW5kb20ucmFuZG9tKCkgPCAwLjU6CiAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCJTZXJ2aWNlIGZhaWx1cmUiKQogICAgcmV0dXJuICJTZXJ2aWNlIHN1Y2Nlc3MiCgpjaXJjdWl0X2JyZWFrZXIgPSBDaXJjdWl0QnJlYWtlcihmYWlsdXJlX3RocmVzaG9sZD0zLCByZWNvdmVyeV90aW1lb3V0PTUpCgpmb3IgXyBpbiByYW5nZSgxMCk6CiAgICB0cnk6CiAgICAgICAgcmVzdWx0ID0gY2lyY3VpdF9icmVha2VyLmNhbGwodW5yZWxpYWJsZV9zZXJ2aWNlKQogICAgICAgIHByaW50KHJlc3VsdCkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludChlKQogICAgdGltZS5zbGVlcCgxKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class CircuitBreaker:
    def __init__(self, failure_threshold, recovery_timeout):
        self.failure_threshold = failure_threshold
        self.recovery_timeout = recovery_timeout
        self.failure_count = 0
        self.state = 'CLOSED'
        self.last_failure_time = None

    def call(self, func):
        if self.state == 'OPEN':
            if time.time() - self.last_failure_time &gt; self.recovery_timeout:
                self.state = 'HALF-OPEN'
            else:
                raise Exception(&quot;Circuit is open&quot;)

        try:
            result = func()
            self.failure_count = 0
            self.state = 'CLOSED'
            return result
        except Exception as e:
            self.failure_count += 1
            if self.failure_count &gt;= self.failure_threshold:
                self.state = 'OPEN'
                self.last_failure_time = time.time()
            raise e

# Example usage
def unreliable_service():
    if random.random() &lt; 0.5:
        raise Exception(&quot;Service failure&quot;)
    return &quot;Service success&quot;

circuit_breaker = CircuitBreaker(failure_threshold=3, recovery_timeout=5)

for _ in range(10):
    try:
        result = circuit_breaker.call(unreliable_service)
        print(result)
    except Exception as e:
        print(e)
    time.sleep(1)</pre></div><div class='content'></div><h1><p>Practical Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Implementing Leader Election</p>
</h2>
<div class='content'><p><strong>Task</strong>: Modify the <code>Node</code> class to handle leader failure and re-election.</p>
</div><h2><p>Exercise 2: Data Replication</p>
</h2>
<div class='content'><p><strong>Task</strong>: Extend the <code>DataNode</code> class to handle data consistency checks.</p>
</div><h2><p>Exercise 3: Sharding with Load Balancing</p>
</h2>
<div class='content'><p><strong>Task</strong>: Implement a load balancer that distributes requests evenly across shards.</p>
</div><h2><p>Exercise 4: Circuit Breaker with Retry Logic</p>
</h2>
<div class='content'><p><strong>Task</strong>: Enhance the <code>CircuitBreaker</code> class to include retry logic for failed requests.</p>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>Design patterns in distributed systems are essential for building scalable, fault-tolerant, and efficient architectures. By understanding and applying these patterns, developers can address common challenges and improve the robustness of their distributed applications. In the next section, we will explore how to select the right pattern for specific scenarios.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-02-patterns-microservices' title="Design Patterns in Microservices">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-04-patterns-agile-development' title="Design Patterns in Agile Development">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Advertising</h1>
<p>This space is reserved for advertising.</p>
<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Thank you for collaborating!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
