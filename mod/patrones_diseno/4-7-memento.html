<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 4: Behavioral Patterns</title>

    <link rel="alternate" href="https://campusempresa.com/mod/patrones_diseno/4-7-memento" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/patrones_diseno/4-7-memento" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/patrones_diseno/4-7-memento" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/patrones_diseno/4-7-memento" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/patrones_diseno/4-7-memento" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='4-6-mediator'>&#x25C4;Mediator</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Module 4: Behavioral Patterns</a>
	</div>
	<div class='col-4 text-end'>
					<a href='4-8-observer'>Observer &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Topic 4-7: Memento</h1>
<div class='content'></div><h2>What is the Memento Pattern?</h2>
<div class='content'><p>The Memento Pattern is a behavioral design pattern that allows an object to capture and store its current state so that it can be restored later. This is particularly useful for implementing undo mechanisms or saving the state of an object at a particular point in time.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ol>
<li><strong>Originator</strong>: The object whose state needs to be saved and restored.</li>
<li><strong>Memento</strong>: The object that stores the state of the Originator.</li>
<li><strong>Caretaker</strong>: The object that requests the Memento from the Originator and keeps it safe, but never modifies or examines its contents.</li>
</ol>
</div><h2>Structure</h2>
<div class='content'><p>The Memento Pattern involves three primary classes:</p>
<table>
<thead>
<tr>
<th>Role</th>
<th>Responsibility</th>
</tr>
</thead>
<tbody>
<tr>
<td>Originator</td>
<td>Creates a Memento containing a snapshot of its current state. Restores its state from the Memento.</td>
</tr>
<tr>
<td>Memento</td>
<td>Stores the internal state of the Originator. Protects against access by objects other than the Originator.</td>
</tr>
<tr>
<td>Caretaker</td>
<td>Requests a Memento from the Originator. Stores the Memento. Passes the Memento back to the Originator when needed.</td>
</tr>
</tbody>
</table>
</div><h2>UML Diagram</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ky0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tKyAgICAgICArLS0tLS0tLS0tLS0tLS0tLSsKfCAgIE9yaWdpbmF0b3IgICB8ICAgICAgIHwgICAgTWVtZW50byAgICAgfCAgICAgICB8ICAgQ2FyZXRha2VyICAgIHwKKy0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tKyAgICAgICArLS0tLS0tLS0tLS0tLS0tLSsKfCAtIHN0YXRlICAgICAgICB8ICAgICAgIHwgLSBzdGF0ZSAgICAgICAgfCAgICAgICB8IC0gbWVtZW50byAgICAgIHwKKy0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tKyAgICAgICArLS0tLS0tLS0tLS0tLS0tLSsKfCArIGNyZWF0ZU1lbWVudG8oKSAgICAgIHwgKyBnZXRTdGF0ZSgpICAgfCAgICAgICB8ICsgc2F2ZU1lbWVudG8oKXwKfCArIHJlc3RvcmUobWVtZW50bykgICAgIHwgKyBzZXRTdGF0ZSgpICAgfCAgICAgICB8ICsgZ2V0TWVtZW50bygpIHwKKy0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tKyAgICAgICArLS0tLS0tLS0tLS0tLS0tLSs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>+----------------+       +----------------+       +----------------+
|   Originator   |       |    Memento     |       |   Caretaker    |
+----------------+       +----------------+       +----------------+
| - state        |       | - state        |       | - memento      |
+----------------+       +----------------+       +----------------+
| + createMemento()      | + getState()   |       | + saveMemento()|
| + restore(memento)     | + setState()   |       | + getMemento() |
+----------------+       +----------------+       +----------------+</pre></div><div class='content'></div><h2>Example</h2>
<div class='content'><p>Let's consider a simple text editor that allows users to type text and undo their actions.</p>
<h4>Step 1: Define the Originator</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgVGV4dEVkaXRvcjoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLl90ZXh0ID0gIiIKCiAgICBkZWYgdHlwZShzZWxmLCB3b3Jkcyk6CiAgICAgICAgc2VsZi5fdGV4dCArPSB3b3JkcwoKICAgIGRlZiBnZXRfdGV4dChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fdGV4dAoKICAgIGRlZiBzYXZlKHNlbGYpOgogICAgICAgIHJldHVybiBNZW1lbnRvKHNlbGYuX3RleHQpCgogICAgZGVmIHJlc3RvcmUoc2VsZiwgbWVtZW50byk6CiAgICAgICAgc2VsZi5fdGV4dCA9IG1lbWVudG8uZ2V0X3NhdmVkX3RleHQoKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class TextEditor:
    def __init__(self):
        self._text = &quot;&quot;

    def type(self, words):
        self._text += words

    def get_text(self):
        return self._text

    def save(self):
        return Memento(self._text)

    def restore(self, memento):
        self._text = memento.get_saved_text()</pre></div><div class='content'><h4>Step 2: Define the Memento</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgTWVtZW50bzoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB0ZXh0KToKICAgICAgICBzZWxmLl90ZXh0ID0gdGV4dAoKICAgIGRlZiBnZXRfc2F2ZWRfdGV4dChzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi5fdGV4dA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Memento:
    def __init__(self, text):
        self._text = text

    def get_saved_text(self):
        return self._text</pre></div><div class='content'><h4>Step 3: Define the Caretaker</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgQ2FyZXRha2VyOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGVkaXRvcik6CiAgICAgICAgc2VsZi5fZWRpdG9yID0gZWRpdG9yCiAgICAgICAgc2VsZi5faGlzdG9yeSA9IFtdCgogICAgZGVmIHNhdmUoc2VsZik6CiAgICAgICAgc2VsZi5faGlzdG9yeS5hcHBlbmQoc2VsZi5fZWRpdG9yLnNhdmUoKSkKCiAgICBkZWYgdW5kbyhzZWxmKToKICAgICAgICBpZiBzZWxmLl9oaXN0b3J5OgogICAgICAgICAgICBtZW1lbnRvID0gc2VsZi5faGlzdG9yeS5wb3AoKQogICAgICAgICAgICBzZWxmLl9lZGl0b3IucmVzdG9yZShtZW1lbnRvKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Caretaker:
    def __init__(self, editor):
        self._editor = editor
        self._history = []

    def save(self):
        self._history.append(self._editor.save())

    def undo(self):
        if self._history:
            memento = self._history.pop()
            self._editor.restore(memento)</pre></div><div class='content'><h4>Step 4: Using the Memento Pattern</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDcmVhdGUgdGhlIHRleHQgZWRpdG9yIGFuZCBjYXJldGFrZXIKZWRpdG9yID0gVGV4dEVkaXRvcigpCmNhcmV0YWtlciA9IENhcmV0YWtlcihlZGl0b3IpCgojIFR5cGUgc29tZSB0ZXh0IGFuZCBzYXZlIHRoZSBzdGF0ZQplZGl0b3IudHlwZSgiSGVsbG8sICIpCmNhcmV0YWtlci5zYXZlKCkKCiMgVHlwZSBtb3JlIHRleHQgYW5kIHNhdmUgdGhlIHN0YXRlCmVkaXRvci50eXBlKCJXb3JsZCEiKQpjYXJldGFrZXIuc2F2ZSgpCgojIEN1cnJlbnQgdGV4dApwcmludChlZGl0b3IuZ2V0X3RleHQoKSkgICMgT3V0cHV0OiBIZWxsbywgV29ybGQhCgojIFVuZG8gdGhlIGxhc3QgYWN0aW9uCmNhcmV0YWtlci51bmRvKCkKcHJpbnQoZWRpdG9yLmdldF90ZXh0KCkpICAjIE91dHB1dDogSGVsbG8sIAoKIyBVbmRvIHRoZSBsYXN0IGFjdGlvbgpjYXJldGFrZXIudW5kbygpCnByaW50KGVkaXRvci5nZXRfdGV4dCgpKSAgIyBPdXRwdXQ6"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Create the text editor and caretaker
editor = TextEditor()
caretaker = Caretaker(editor)

# Type some text and save the state
editor.type(&quot;Hello, &quot;)
caretaker.save()

# Type more text and save the state
editor.type(&quot;World!&quot;)
caretaker.save()

# Current text
print(editor.get_text())  # Output: Hello, World!

# Undo the last action
caretaker.undo()
print(editor.get_text())  # Output: Hello, 

# Undo the last action
caretaker.undo()
print(editor.get_text())  # Output:</pre></div><div class='content'></div><h2>Advantages and Disadvantages</h2>
<div class='content'><h4>Advantages</h4>
<ul>
<li><strong>Encapsulation</strong>: The Memento pattern encapsulates the state of an object, ensuring that the state is not accessible to other objects.</li>
<li><strong>Undo/Redo Mechanism</strong>: It provides a straightforward way to implement undo and redo functionality.</li>
</ul>
<h4>Disadvantages</h4>
<ul>
<li><strong>Memory Overhead</strong>: Storing the state of an object can consume a significant amount of memory, especially if the state is large or if many states are stored.</li>
<li><strong>Complexity</strong>: Managing multiple mementos can add complexity to the system.</li>
</ul>
</div><h2>Conclusion</h2>
<div class='content'><p>The Memento Pattern is a powerful tool for managing the state of an object, particularly when implementing features like undo and redo. By encapsulating the state within a Memento object, the pattern ensures that the state can be saved and restored without exposing the internal details of the Originator. However, it is essential to consider the potential memory overhead and complexity that may arise from using this pattern.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='4-6-mediator'>&#x25C4;Mediator</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Module 4: Behavioral Patterns</a>
	</div>
	<div class='col-4 text-end'>
					<a href='4-8-observer'>Observer &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
