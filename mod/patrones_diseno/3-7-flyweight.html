<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 3: Structural Patterns</title>

    <link rel="alternate" href="https://campusempresa.com/mod/patrones_diseno/3-7-flyweight" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/patrones_diseno/3-7-flyweight" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/patrones_diseno/3-7-flyweight" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/patrones_diseno/3-7-flyweight" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/patrones_diseno/3-7-flyweight" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='3-6-facade'>&#x25C4;Facade</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Module 3: Structural Patterns</a>
	</div>
	<div class='col-4 text-end'>
					<a href='3-8-proxy'>Proxy &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Topic 3-7: Flyweight</h1>
<div class='content'></div><h2>Introduction to Flyweight Pattern</h2>
<div class='content'><p>The Flyweight pattern is a structural design pattern that focuses on minimizing memory usage by sharing as much data as possible with similar objects. This pattern is particularly useful when dealing with a large number of objects that share common data.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ol>
<li><strong>Intrinsic State</strong>: The state that is shared among multiple objects. This state is stored in the Flyweight object.</li>
<li><strong>Extrinsic State</strong>: The state that is unique to each object. This state is stored outside the Flyweight object and passed to it when needed.</li>
<li><strong>Flyweight Factory</strong>: Manages the Flyweight objects and ensures that shared objects are reused.</li>
</ol>
</div><h2>When to Use Flyweight Pattern</h2>
<div class='content'><ul>
<li>When an application uses a large number of objects.</li>
<li>When the memory cost of creating a large number of objects is high.</li>
<li>When most of the object state can be made extrinsic.</li>
</ul>
</div><h2>Example Scenario</h2>
<div class='content'><p>Consider a text editor where each character is an object. If we create a new object for each character, it would consume a lot of memory. Instead, we can use the Flyweight pattern to share character objects.</p>
</div><h2>Flyweight Pattern Structure</h2>
<div class='content'><table>
<thead>
<tr>
<th>Component</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Flyweight</td>
<td>Declares an interface through which flyweights can receive and act on extrinsic state.</td>
</tr>
<tr>
<td>ConcreteFlyweight</td>
<td>Implements the Flyweight interface and adds storage for intrinsic state.</td>
</tr>
<tr>
<td>FlyweightFactory</td>
<td>Creates and manages flyweight objects. Ensures that flyweights are shared properly.</td>
</tr>
<tr>
<td>Client</td>
<td>Maintains references to flyweights and computes or stores extrinsic state.</td>
</tr>
</tbody>
</table>
</div><h2>Code Example</h2>
<div class='content'><p>Let's implement the Flyweight pattern in Python for the text editor scenario:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgRmx5d2VpZ2h0OgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGludHJpbnNpY19zdGF0ZSk6CiAgICAgICAgc2VsZi5pbnRyaW5zaWNfc3RhdGUgPSBpbnRyaW5zaWNfc3RhdGUKCiAgICBkZWYgb3BlcmF0aW9uKHNlbGYsIGV4dHJpbnNpY19zdGF0ZSk6CiAgICAgICAgcHJpbnQoZiJJbnRyaW5zaWMgU3RhdGU6IHtzZWxmLmludHJpbnNpY19zdGF0ZX0sIEV4dHJpbnNpYyBTdGF0ZToge2V4dHJpbnNpY19zdGF0ZX0iKQoKY2xhc3MgRmx5d2VpZ2h0RmFjdG9yeToKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLmZseXdlaWdodHMgPSB7fQoKICAgIGRlZiBnZXRfZmx5d2VpZ2h0KHNlbGYsIGludHJpbnNpY19zdGF0ZSk6CiAgICAgICAgaWYgaW50cmluc2ljX3N0YXRlIG5vdCBpbiBzZWxmLmZseXdlaWdodHM6CiAgICAgICAgICAgIHNlbGYuZmx5d2VpZ2h0c1tpbnRyaW5zaWNfc3RhdGVdID0gRmx5d2VpZ2h0KGludHJpbnNpY19zdGF0ZSkKICAgICAgICByZXR1cm4gc2VsZi5mbHl3ZWlnaHRzW2ludHJpbnNpY19zdGF0ZV0KCiMgQ2xpZW50IGNvZGUKZmFjdG9yeSA9IEZseXdlaWdodEZhY3RvcnkoKQoKIyBFeHRyaW5zaWMgc3RhdGUKZXh0cmluc2ljX3N0YXRlcyA9IFsnUG9zaXRpb24xJywgJ1Bvc2l0aW9uMicsICdQb3NpdGlvbjMnXQoKIyBJbnRyaW5zaWMgc3RhdGUKaW50cmluc2ljX3N0YXRlcyA9IFsnQScsICdCJywgJ0MnXQoKZm9yIGludHJpbnNpYyBpbiBpbnRyaW5zaWNfc3RhdGVzOgogICAgZmx5d2VpZ2h0ID0gZmFjdG9yeS5nZXRfZmx5d2VpZ2h0KGludHJpbnNpYykKICAgIGZvciBleHRyaW5zaWMgaW4gZXh0cmluc2ljX3N0YXRlczoKICAgICAgICBmbHl3ZWlnaHQub3BlcmF0aW9uKGV4dHJpbnNpYyk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Flyweight:
    def __init__(self, intrinsic_state):
        self.intrinsic_state = intrinsic_state

    def operation(self, extrinsic_state):
        print(f&quot;Intrinsic State: {self.intrinsic_state}, Extrinsic State: {extrinsic_state}&quot;)

class FlyweightFactory:
    def __init__(self):
        self.flyweights = {}

    def get_flyweight(self, intrinsic_state):
        if intrinsic_state not in self.flyweights:
            self.flyweights[intrinsic_state] = Flyweight(intrinsic_state)
        return self.flyweights[intrinsic_state]

# Client code
factory = FlyweightFactory()

# Extrinsic state
extrinsic_states = ['Position1', 'Position2', 'Position3']

# Intrinsic state
intrinsic_states = ['A', 'B', 'C']

for intrinsic in intrinsic_states:
    flyweight = factory.get_flyweight(intrinsic)
    for extrinsic in extrinsic_states:
        flyweight.operation(extrinsic)</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ol>
<li><strong>Flyweight Class</strong>: This class stores the intrinsic state and provides a method to perform operations using the extrinsic state.</li>
<li><strong>FlyweightFactory Class</strong>: This class manages the Flyweight objects. It ensures that Flyweight objects are shared and reused.</li>
<li><strong>Client Code</strong>: The client code demonstrates how to use the FlyweightFactory to get Flyweight objects and perform operations using extrinsic states.</li>
</ol>
</div><h2>Advantages of Flyweight Pattern</h2>
<div class='content'><ul>
<li><strong>Reduced Memory Usage</strong>: By sharing objects, the Flyweight pattern significantly reduces the memory footprint.</li>
<li><strong>Improved Performance</strong>: Reducing the number of objects can lead to performance improvements.</li>
</ul>
</div><h2>Disadvantages of Flyweight Pattern</h2>
<div class='content'><ul>
<li><strong>Complexity</strong>: The Flyweight pattern can add complexity to the code, making it harder to understand and maintain.</li>
<li><strong>Overhead</strong>: Managing the extrinsic state can introduce additional overhead.</li>
</ul>
</div><h2>Conclusion</h2>
<div class='content'><p>The Flyweight pattern is a powerful tool for optimizing memory usage in applications that require a large number of similar objects. By sharing intrinsic state and managing extrinsic state separately, this pattern can lead to significant memory savings and performance improvements. However, it is essential to balance these benefits against the added complexity and potential overhead. Understanding when and how to apply the Flyweight pattern is crucial for leveraging its advantages effectively.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='3-6-facade'>&#x25C4;Facade</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Module 3: Structural Patterns</a>
	</div>
	<div class='col-4 text-end'>
					<a href='3-8-proxy'>Proxy &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
