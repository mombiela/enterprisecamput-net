<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creating Mocks</title>

    <link rel="alternate" href="https://campusempresa.com/mod/junit/creating-mocks" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/junit/creating-mocks" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/junit/creating-mocks" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/junit/creating-mocks" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/junit/creating-mocks" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='using-mockito-with-junit'>&#x25C4;Using Mockito with JUnit</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Creating Mocks</a>
	</div>
	<div class='col-4 text-end'>
					<a href='stubbing-methods'>Stubbing Methods &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we'll explore how to create and use mocks in JUnit tests. Mocks are essential for isolating the unit of work and ensuring that tests are both reliable and fast. We'll cover the basics of mocking, how to create mocks using popular libraries like Mockito, and advanced techniques for more complex scenarios.</p>
</div><h1>What are Mocks?</h1>
<div class='content'><p>Mocks are objects that simulate the behavior of real objects in controlled ways. They are used in unit testing to isolate the code being tested from its dependencies.</p>
<ul>
<li><strong>Isolation</strong>: Mocks help isolate the unit of work from external dependencies.</li>
<li><strong>Control</strong>: Mocks allow you to control the behavior of dependencies.</li>
<li><strong>Verification</strong>: Mocks can verify interactions between the unit of work and its dependencies.</li>
</ul>
</div><h1>Why Use Mocks?</h1>
<div class='content'><ul>
<li><strong>Speed</strong>: Mocks are faster than real objects, especially when dealing with external systems like databases or web services.</li>
<li><strong>Reliability</strong>: Mocks provide consistent behavior, making tests more reliable.</li>
<li><strong>Focus</strong>: Mocks allow you to focus on the unit of work without worrying about the behavior of its dependencies.</li>
</ul>
</div><h1>Creating Mocks with Mockito</h1>
<div class='content'><p>Mockito is a popular library for creating mocks in Java. It integrates seamlessly with JUnit and provides a simple API for creating and using mocks.</p>
</div><h2>Adding Mockito to Your Project</h2>
<div class='content'><p>First, you need to add Mockito to your project. If you're using Maven, add the following dependency to your <code>pom.xml</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGRlcGVuZGVuY3k+CiAgICA8Z3JvdXBJZD5vcmcubW9ja2l0bzwvZ3JvdXBJZD4KICAgIDxhcnRpZmFjdElkPm1vY2tpdG8tY29yZTwvYXJ0aWZhY3RJZD4KICAgIDx2ZXJzaW9uPjQuMC4wPC92ZXJzaW9uPgogICAgPHNjb3BlPnRlc3Q8L3Njb3BlPgo8L2RlcGVuZGVuY3k+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;dependency&gt;
    &lt;groupId&gt;org.mockito&lt;/groupId&gt;
    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;
    &lt;version&gt;4.0.0&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre></div><div class='content'></div><h2>Basic Mock Creation</h2>
<div class='content'><p>Here's a simple example of creating and using a mock with Mockito:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHN0YXRpYyBvcmcubW9ja2l0by5Nb2NraXRvLio7CmltcG9ydCBvcmcuanVuaXQuanVwaXRlci5hcGkuVGVzdDsKCnB1YmxpYyBjbGFzcyBVc2VyU2VydmljZVRlc3QgewoKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0R2V0VXNlcigpIHsKICAgICAgICAvLyBDcmVhdGUgYSBtb2NrIGluc3RhbmNlIG9mIFVzZXJSZXBvc2l0b3J5CiAgICAgICAgVXNlclJlcG9zaXRvcnkgbW9ja1JlcG9zaXRvcnkgPSBtb2NrKFVzZXJSZXBvc2l0b3J5LmNsYXNzKTsKCiAgICAgICAgLy8gRGVmaW5lIHRoZSBiZWhhdmlvciBvZiB0aGUgbW9jawogICAgICAgIHdoZW4obW9ja1JlcG9zaXRvcnkuZmluZFVzZXJCeUlkKDEpKS50aGVuUmV0dXJuKG5ldyBVc2VyKDEsICJKb2huIERvZSIpKTsKCiAgICAgICAgLy8gVXNlIHRoZSBtb2NrIGluIHRoZSBzZXJ2aWNlCiAgICAgICAgVXNlclNlcnZpY2UgdXNlclNlcnZpY2UgPSBuZXcgVXNlclNlcnZpY2UobW9ja1JlcG9zaXRvcnkpOwogICAgICAgIFVzZXIgdXNlciA9IHVzZXJTZXJ2aWNlLmdldFVzZXIoMSk7CgogICAgICAgIC8vIFZlcmlmeSB0aGUgcmVzdWx0CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJKb2huIERvZSIsIHVzZXIuZ2V0TmFtZSgpKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import static org.mockito.Mockito.*;
import org.junit.jupiter.api.Test;

public class UserServiceTest {

    @Test
    public void testGetUser() {
        // Create a mock instance of UserRepository
        UserRepository mockRepository = mock(UserRepository.class);

        // Define the behavior of the mock
        when(mockRepository.findUserById(1)).thenReturn(new User(1, &quot;John Doe&quot;));

        // Use the mock in the service
        UserService userService = new UserService(mockRepository);
        User user = userService.getUser(1);

        // Verify the result
        assertEquals(&quot;John Doe&quot;, user.getName());
    }
}</pre></div><div class='content'></div><h2>Verifying Interactions</h2>
<div class='content'><p>Mockito allows you to verify interactions with the mock to ensure that the expected methods were called:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHN0YXRpYyBvcmcubW9ja2l0by5Nb2NraXRvLio7CmltcG9ydCBvcmcuanVuaXQuanVwaXRlci5hcGkuVGVzdDsKCnB1YmxpYyBjbGFzcyBVc2VyU2VydmljZVRlc3QgewoKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0R2V0VXNlcigpIHsKICAgICAgICBVc2VyUmVwb3NpdG9yeSBtb2NrUmVwb3NpdG9yeSA9IG1vY2soVXNlclJlcG9zaXRvcnkuY2xhc3MpOwogICAgICAgIHdoZW4obW9ja1JlcG9zaXRvcnkuZmluZFVzZXJCeUlkKDEpKS50aGVuUmV0dXJuKG5ldyBVc2VyKDEsICJKb2huIERvZSIpKTsKCiAgICAgICAgVXNlclNlcnZpY2UgdXNlclNlcnZpY2UgPSBuZXcgVXNlclNlcnZpY2UobW9ja1JlcG9zaXRvcnkpOwogICAgICAgIHVzZXJTZXJ2aWNlLmdldFVzZXIoMSk7CgogICAgICAgIC8vIFZlcmlmeSB0aGF0IGZpbmRVc2VyQnlJZCB3YXMgY2FsbGVkIHdpdGggdGhlIGNvcnJlY3QgYXJndW1lbnQKICAgICAgICB2ZXJpZnkobW9ja1JlcG9zaXRvcnkpLmZpbmRVc2VyQnlJZCgxKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import static org.mockito.Mockito.*;
import org.junit.jupiter.api.Test;

public class UserServiceTest {

    @Test
    public void testGetUser() {
        UserRepository mockRepository = mock(UserRepository.class);
        when(mockRepository.findUserById(1)).thenReturn(new User(1, &quot;John Doe&quot;));

        UserService userService = new UserService(mockRepository);
        userService.getUser(1);

        // Verify that findUserById was called with the correct argument
        verify(mockRepository).findUserById(1);
    }
}</pre></div><div class='content'></div><h1>Advanced Mocking Techniques</h1>
<div class='content'></div><h2>Argument Matchers</h2>
<div class='content'><p>Mockito provides argument matchers to allow more flexible verification and stubbing:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHN0YXRpYyBvcmcubW9ja2l0by5Nb2NraXRvLio7CmltcG9ydCBzdGF0aWMgb3JnLm1vY2tpdG8uQXJndW1lbnRNYXRjaGVycy4qOwppbXBvcnQgb3JnLmp1bml0Lmp1cGl0ZXIuYXBpLlRlc3Q7CgpwdWJsaWMgY2xhc3MgVXNlclNlcnZpY2VUZXN0IHsKCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVzdEdldFVzZXIoKSB7CiAgICAgICAgVXNlclJlcG9zaXRvcnkgbW9ja1JlcG9zaXRvcnkgPSBtb2NrKFVzZXJSZXBvc2l0b3J5LmNsYXNzKTsKICAgICAgICB3aGVuKG1vY2tSZXBvc2l0b3J5LmZpbmRVc2VyQnlJZChhbnlJbnQoKSkpLnRoZW5SZXR1cm4obmV3IFVzZXIoMSwgIkpvaG4gRG9lIikpOwoKICAgICAgICBVc2VyU2VydmljZSB1c2VyU2VydmljZSA9IG5ldyBVc2VyU2VydmljZShtb2NrUmVwb3NpdG9yeSk7CiAgICAgICAgVXNlciB1c2VyID0gdXNlclNlcnZpY2UuZ2V0VXNlcigxKTsKCiAgICAgICAgYXNzZXJ0RXF1YWxzKCJKb2huIERvZSIsIHVzZXIuZ2V0TmFtZSgpKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import static org.mockito.Mockito.*;
import static org.mockito.ArgumentMatchers.*;
import org.junit.jupiter.api.Test;

public class UserServiceTest {

    @Test
    public void testGetUser() {
        UserRepository mockRepository = mock(UserRepository.class);
        when(mockRepository.findUserById(anyInt())).thenReturn(new User(1, &quot;John Doe&quot;));

        UserService userService = new UserService(mockRepository);
        User user = userService.getUser(1);

        assertEquals(&quot;John Doe&quot;, user.getName());
    }
}</pre></div><div class='content'></div><h2>Capturing Arguments</h2>
<div class='content'><p>Sometimes you need to capture the arguments passed to a mock method for further assertions:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHN0YXRpYyBvcmcubW9ja2l0by5Nb2NraXRvLio7CmltcG9ydCBzdGF0aWMgb3JnLm1vY2tpdG8uQXJndW1lbnRDYXB0b3IuKjsKaW1wb3J0IG9yZy5qdW5pdC5qdXBpdGVyLmFwaS5UZXN0OwppbXBvcnQgb3JnLm1vY2tpdG8uQXJndW1lbnRDYXB0b3I7CgpwdWJsaWMgY2xhc3MgVXNlclNlcnZpY2VUZXN0IHsKCiAgICBAVGVzdAogICAgcHVibGljIHZvaWQgdGVzdEdldFVzZXIoKSB7CiAgICAgICAgVXNlclJlcG9zaXRvcnkgbW9ja1JlcG9zaXRvcnkgPSBtb2NrKFVzZXJSZXBvc2l0b3J5LmNsYXNzKTsKICAgICAgICBVc2VyU2VydmljZSB1c2VyU2VydmljZSA9IG5ldyBVc2VyU2VydmljZShtb2NrUmVwb3NpdG9yeSk7CgogICAgICAgIHVzZXJTZXJ2aWNlLmdldFVzZXIoMSk7CgogICAgICAgIEFyZ3VtZW50Q2FwdG9yPEludGVnZXI+IGNhcHRvciA9IEFyZ3VtZW50Q2FwdG9yLmZvckNsYXNzKEludGVnZXIuY2xhc3MpOwogICAgICAgIHZlcmlmeShtb2NrUmVwb3NpdG9yeSkuZmluZFVzZXJCeUlkKGNhcHRvci5jYXB0dXJlKCkpOwoKICAgICAgICBhc3NlcnRFcXVhbHMoMSwgY2FwdG9yLmdldFZhbHVlKCkuaW50VmFsdWUoKSk7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import static org.mockito.Mockito.*;
import static org.mockito.ArgumentCaptor.*;
import org.junit.jupiter.api.Test;
import org.mockito.ArgumentCaptor;

public class UserServiceTest {

    @Test
    public void testGetUser() {
        UserRepository mockRepository = mock(UserRepository.class);
        UserService userService = new UserService(mockRepository);

        userService.getUser(1);

        ArgumentCaptor&lt;Integer&gt; captor = ArgumentCaptor.forClass(Integer.class);
        verify(mockRepository).findUserById(captor.capture());

        assertEquals(1, captor.getValue().intValue());
    }
}</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>In this section, we've covered the basics of creating and using mocks in JUnit tests with Mockito. Mocks are powerful tools for isolating the unit of work, controlling the behavior of dependencies, and verifying interactions. By mastering these techniques, you can write more reliable and focused unit tests.</p>
<ul>
<li><strong>Mocks</strong>: Simulate the behavior of real objects.</li>
<li><strong>Mockito</strong>: A popular library for creating mocks.</li>
<li><strong>Basic Techniques</strong>: Creating mocks, defining behavior, and verifying interactions.</li>
<li><strong>Advanced Techniques</strong>: Using argument matchers and capturing arguments.</li>
</ul>
<p>By incorporating these practices into your testing strategy, you can improve the quality and maintainability of your code.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='using-mockito-with-junit'>&#x25C4;Using Mockito with JUnit</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Creating Mocks</a>
	</div>
	<div class='col-4 text-end'>
					<a href='stubbing-methods'>Stubbing Methods &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
