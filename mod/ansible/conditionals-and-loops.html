<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conditionals and Loops in Ansible</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ansible/conditionals-and-loops" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ansible/conditionals-and-loops" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ansible/conditionals-and-loops" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/ansible/conditionals-and-loops" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/ansible/conditionals-and-loops" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='variables-and-facts'>&#x25C4;Variables and Facts</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Conditionals and Loops in Ansible</a>
	</div>
	<div class='col-4 text-end'>
					<a href='handlers-and-notifications'>Handlers and Notifications &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In this section, we will explore how to use conditionals and loops in Ansible to create more dynamic and flexible playbooks. Understanding these concepts is crucial for writing efficient automation scripts.</p>
</div><h1>Conditionals in Ansible</h1>
<div class='content'><p>Conditionals allow you to execute tasks based on certain conditions. This can be useful for making decisions within your playbooks.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>When Statement</strong>: Used to execute a task only if a certain condition is met.</li>
<li><strong>Facts</strong>: Variables that Ansible gathers about the system, which can be used in conditionals.</li>
</ul>
</div><h2>When Statement</h2>
<div class='content'><p>The <code>when</code> statement is used to control whether a task or a set of tasks should run based on a condition.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBJbnN0YWxsIEFwYWNoZSBvbiBEZWJpYW4tYmFzZWQgc3lzdGVtcwogIGFwdDoKICAgIG5hbWU6IGFwYWNoZTIKICAgIHN0YXRlOiBwcmVzZW50CiAgd2hlbjogYW5zaWJsZV9vc19mYW1pbHkgPT0gIkRlYmlhbiI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Install Apache on Debian-based systems
  apt:
    name: apache2
    state: present
  when: ansible_os_family == &quot;Debian&quot;</pre></div><div class='content'><p>In this example, the task to install Apache will only run if the system's OS family is Debian.</p>
</div><h2>Using Facts in Conditionals</h2>
<div class='content'><p>Ansible facts are variables that are automatically discovered by Ansible when it connects to a host. These facts can be used in conditionals.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBSZWJvb3QgdGhlIHNlcnZlciBpZiBpdCBpcyBydW5uaW5nIFVidW50dQogIGNvbW1hbmQ6IC9zYmluL3JlYm9vdAogIHdoZW46IGFuc2libGVfZGlzdHJpYnV0aW9uID09ICJVYnVudHUi"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Reboot the server if it is running Ubuntu
  command: /sbin/reboot
  when: ansible_distribution == &quot;Ubuntu&quot;</pre></div><div class='content'><p>Here, the server will only reboot if the operating system is Ubuntu.</p>
</div><h1>Loops in Ansible</h1>
<div class='content'><p>Loops allow you to repeat a task multiple times with different items. This is useful for tasks like installing multiple packages or creating multiple users.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>with_items</strong>: A common loop directive used to iterate over a list of items.</li>
<li><strong>loop</strong>: A more flexible directive introduced in Ansible 2.5, which can replace <code>with_items</code>.</li>
</ul>
</div><h2>with_items</h2>
<div class='content'><p>The <code>with_items</code> directive is used to loop over a list of items.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBJbnN0YWxsIG11bHRpcGxlIHBhY2thZ2VzCiAgYXB0OgogICAgbmFtZTogInt7IGl0ZW0gfX0iCiAgICBzdGF0ZTogcHJlc2VudAogIHdpdGhfaXRlbXM6CiAgICAtIGdpdAogICAgLSBjdXJsCiAgICAtIHZpbQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Install multiple packages
  apt:
    name: &quot;{{ item }}&quot;
    state: present
  with_items:
    - git
    - curl
    - vim</pre></div><div class='content'><p>This task will install <code>git</code>, <code>curl</code>, and <code>vim</code> on the target system.</p>
</div><h2>loop</h2>
<div class='content'><p>The <code>loop</code> directive provides more flexibility and can be used in place of <code>with_items</code>.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBBZGQgbXVsdGlwbGUgdXNlcnMKICB1c2VyOgogICAgbmFtZTogInt7IGl0ZW0ubmFtZSB9fSIKICAgIHN0YXRlOiBwcmVzZW50CiAgICBncm91cHM6ICJ7eyBpdGVtLmdyb3VwcyB9fSIKICBsb29wOgogICAgLSB7IG5hbWU6ICdhbGljZScsIGdyb3VwczogJ2FkbWluJyB9CiAgICAtIHsgbmFtZTogJ2JvYicsIGdyb3VwczogJ3VzZXJzJyB9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Add multiple users
  user:
    name: &quot;{{ item.name }}&quot;
    state: present
    groups: &quot;{{ item.groups }}&quot;
  loop:
    - { name: 'alice', groups: 'admin' }
    - { name: 'bob', groups: 'users' }</pre></div><div class='content'><p>This task will create two users, <code>alice</code> and <code>bob</code>, with their respective groups.</p>
</div><h1>Combining Conditionals and Loops</h1>
<div class='content'><p>You can combine conditionals and loops to create more complex logic in your playbooks.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBJbnN0YWxsIHBhY2thZ2VzIG9ubHkgaWYgdGhleSBhcmUgbm90IGFscmVhZHkgaW5zdGFsbGVkCiAgYXB0OgogICAgbmFtZTogInt7IGl0ZW0gfX0iCiAgICBzdGF0ZTogcHJlc2VudAogIGxvb3A6CiAgICAtIGdpdAogICAgLSBjdXJsCiAgICAtIHZpbQogIHdoZW46IGFuc2libGVfZmFjdHMucGFja2FnZXNbaXRlbV0gaXMgbm90IGRlZmluZWQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Install packages only if they are not already installed
  apt:
    name: &quot;{{ item }}&quot;
    state: present
  loop:
    - git
    - curl
    - vim
  when: ansible_facts.packages[item] is not defined</pre></div><div class='content'><p>This task will install <code>git</code>, <code>curl</code>, and <code>vim</code> only if they are not already installed on the system.</p>
</div><h1>Conclusion</h1>
<div class='content'><p>Understanding and using conditionals and loops in Ansible allows you to create more dynamic and efficient playbooks. By leveraging these features, you can automate complex tasks and handle various scenarios with ease. Practice using these concepts in your playbooks to become proficient in Ansible automation.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='variables-and-facts'>&#x25C4;Variables and Facts</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Conditionals and Loops in Ansible</a>
	</div>
	<div class='col-4 text-end'>
					<a href='handlers-and-notifications'>Handlers and Notifications &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
