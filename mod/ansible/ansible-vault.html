<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ansible Vault</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ansible/ansible-vault" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ansible/ansible-vault" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ansible/ansible-vault" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/ansible/ansible-vault" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/ansible/ansible-vault" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='ansible-galaxy'>&#x25C4;Ansible Galaxy</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Ansible Vault</a>
	</div>
	<div class='col-4 text-end'>
					<a href='dynamic-inventory'>Dynamic Inventory &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Ansible Vault</h1>
<div class='content'><p>Ansible Vault is a feature of Ansible that allows you to keep sensitive data such as passwords or keys in encrypted files, rather than as plaintext in playbooks or roles. This is crucial for maintaining security and confidentiality in your automation scripts.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Encryption and Decryption</strong>: Ansible Vault uses AES (Advanced Encryption Standard) to encrypt and decrypt files.</li>
<li><strong>Vault IDs</strong>: Allows you to manage multiple vault passwords.</li>
<li><strong>Vault Files</strong>: Files that are encrypted using Ansible Vault.</li>
<li><strong>Vault Password</strong>: The password used to encrypt and decrypt vault files.</li>
</ul>
</div><h1>Basic Commands</h1>
<div class='content'><ul>
<li><strong>Creating a Vault File</strong>: Use the <code>ansible-vault create</code> command to create a new encrypted file.</li>
<li><strong>Editing a Vault File</strong>: Use the <code>ansible-vault edit</code> command to edit an existing encrypted file.</li>
<li><strong>Encrypting an Existing File</strong>: Use the <code>ansible-vault encrypt</code> command to encrypt an existing file.</li>
<li><strong>Decrypting a Vault File</strong>: Use the <code>ansible-vault decrypt</code> command to decrypt a file.</li>
<li><strong>Viewing a Vault File</strong>: Use the <code>ansible-vault view</code> command to view the contents of an encrypted file without editing it.</li>
</ul>
</div><h1>Creating and Using Vault Files</h1>
<div class='content'></div><h2>Creating a Vault File</h2>
<div class='content'><p>To create a new encrypted file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS12YXVsdCBjcmVhdGUgc2VjcmV0LnltbA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-vault create secret.yml</pre></div><div class='content'><p>You will be prompted to enter a password. After entering the password, a new file named <code>secret.yml</code> will be created, and you can add your sensitive data to it.</p>
</div><h2>Editing a Vault File</h2>
<div class='content'><p>To edit an existing encrypted file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS12YXVsdCBlZGl0IHNlY3JldC55bWw="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-vault edit secret.yml</pre></div><div class='content'><p>You will be prompted to enter the vault password to decrypt the file for editing.</p>
</div><h2>Encrypting an Existing File</h2>
<div class='content'><p>To encrypt an existing plaintext file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS12YXVsdCBlbmNyeXB0IGV4aXN0aW5nX2ZpbGUueW1s"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-vault encrypt existing_file.yml</pre></div><div class='content'><p>This command will encrypt <code>existing_file.yml</code> and prompt you for a password.</p>
</div><h2>Decrypting a Vault File</h2>
<div class='content'><p>To decrypt an encrypted file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS12YXVsdCBkZWNyeXB0IHNlY3JldC55bWw="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-vault decrypt secret.yml</pre></div><div class='content'><p>You will be prompted to enter the vault password to decrypt the file.</p>
</div><h2>Viewing a Vault File</h2>
<div class='content'><p>To view the contents of an encrypted file without editing:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS12YXVsdCB2aWV3IHNlY3JldC55bWw="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-vault view secret.yml</pre></div><div class='content'><p>You will be prompted to enter the vault password to view the file.</p>
</div><h1>Using Vault in Playbooks</h1>
<div class='content'><p>You can use vault-encrypted files in your playbooks. Here's an example:</p>
</div><h2>Example Playbook</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogRXhhbXBsZSBwbGF5Ym9vayB1c2luZyBBbnNpYmxlIFZhdWx0CiAgaG9zdHM6IGxvY2FsaG9zdAogIHZhcnNfZmlsZXM6CiAgICAtIHNlY3JldC55bWwKICB0YXNrczoKICAgIC0gbmFtZTogUHJpbnQgc2VjcmV0IG1lc3NhZ2UKICAgICAgZGVidWc6CiAgICAgICAgbXNnOiAie3sgc2VjcmV0X21lc3NhZ2UgfX0i"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Example playbook using Ansible Vault
  hosts: localhost
  vars_files:
    - secret.yml
  tasks:
    - name: Print secret message
      debug:
        msg: &quot;{{ secret_message }}&quot;</pre></div><div class='content'><p>In this example, <code>secret.yml</code> is an encrypted file containing a variable <code>secret_message</code>.</p>
</div><h2>Running the Playbook</h2>
<div class='content'><p>To run the playbook with the vault file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS1wbGF5Ym9vayBwbGF5Ym9vay55bWwgLS1hc2stdmF1bHQtcGFzcw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-playbook playbook.yml --ask-vault-pass</pre></div><div class='content'><p>You will be prompted to enter the vault password.</p>
</div><h1>Advanced Usage</h1>
<div class='content'></div><h2>Using Multiple Vault Passwords</h2>
<div class='content'><p>You can manage multiple vault passwords using Vault IDs. This is useful when you have different teams or environments with different encryption needs.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogRXhhbXBsZSBwbGF5Ym9vayB3aXRoIG11bHRpcGxlIHZhdWx0IHBhc3N3b3JkcwogIGhvc3RzOiBsb2NhbGhvc3QKICB2YXJzX2ZpbGVzOgogICAgLSB2YXVsdF9pZF8xQHNlY3JldDEueW1sCiAgICAtIHZhdWx0X2lkXzJAc2VjcmV0Mi55bWwKICB0YXNrczoKICAgIC0gbmFtZTogUHJpbnQgc2VjcmV0IG1lc3NhZ2VzCiAgICAgIGRlYnVnOgogICAgICAgIG1zZzogInt7IHNlY3JldF9tZXNzYWdlMSB9fSBhbmQge3sgc2VjcmV0X21lc3NhZ2UyIH19Ig=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Example playbook with multiple vault passwords
  hosts: localhost
  vars_files:
    - vault_id_1@secret1.yml
    - vault_id_2@secret2.yml
  tasks:
    - name: Print secret messages
      debug:
        msg: &quot;{{ secret_message1 }} and {{ secret_message2 }}&quot;</pre></div><div class='content'><p>To run the playbook with multiple vault passwords:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS1wbGF5Ym9vayBwbGF5Ym9vay55bWwgLS1hc2stdmF1bHQtcGFzcyAtLXZhdWx0LWlkIHZhdWx0X2lkXzFAcHJvbXB0IC0tdmF1bHQtaWQgdmF1bHRfaWRfMkBwcm9tcHQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-playbook playbook.yml --ask-vault-pass --vault-id vault_id_1@prompt --vault-id vault_id_2@prompt</pre></div><div class='content'><p>You will be prompted to enter the passwords for <code>vault_id_1</code> and <code>vault_id_2</code>.</p>
</div><h1>Conclusion</h1>
<div class='content'><p>Ansible Vault is a powerful tool for managing sensitive data in your automation scripts. By understanding how to create, edit, encrypt, and decrypt vault files, as well as how to use them in playbooks, you can ensure that your sensitive information remains secure. Advanced features like Vault IDs allow for even more flexible and secure management of encrypted data.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='ansible-galaxy'>&#x25C4;Ansible Galaxy</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Ansible Vault</a>
	</div>
	<div class='col-4 text-end'>
					<a href='dynamic-inventory'>Dynamic Inventory &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
