<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing Ansible Code</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ansible/testing-ansible-code" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ansible/testing-ansible-code" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ansible/testing-ansible-code" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/ansible/testing-ansible-code" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/ansible/testing-ansible-code" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='version-control-with-ansible'>&#x25C4;Version Control with Ansible</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Testing Ansible Code</a>
	</div>
	<div class='col-4 text-end'>
					<a href='security-best-practices'>Security Best Practices &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Testing your Ansible code is crucial to ensure that your automation scripts work as expected and do not introduce errors into your infrastructure. This section will cover various methods and tools for testing Ansible code, from basic syntax checks to more advanced integration tests.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Syntax Checking</strong>: Ensuring your playbooks and roles are free from syntax errors.</li>
<li><strong>Linting</strong>: Using tools to enforce coding standards and best practices.</li>
<li><strong>Unit Testing</strong>: Testing individual tasks or roles in isolation.</li>
<li><strong>Integration Testing</strong>: Testing the complete playbook in a controlled environment.</li>
<li><strong>Continuous Integration (CI)</strong>: Automating the testing process using CI tools.</li>
</ul>
</div><h1>Syntax Checking</h1>
<div class='content'><p>Before running your Ansible playbooks, it's essential to check for syntax errors. Ansible provides a built-in command for this purpose.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS1wbGF5Ym9vayAtLXN5bnRheC1jaGVjayB5b3VyX3BsYXlib29rLnltbA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-playbook --syntax-check your_playbook.yml</pre></div><div class='content'><p>This command will parse the playbook and report any syntax errors without executing it.</p>
</div><h1>Linting</h1>
<div class='content'><p>Linting tools help you adhere to coding standards and best practices. <code>ansible-lint</code> is a popular tool for this purpose.</p>
</div><h2>Example</h2>
<div class='content'><p>First, install <code>ansible-lint</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwIGluc3RhbGwgYW5zaWJsZS1saW50"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pip install ansible-lint</pre></div><div class='content'><p>Then, run it against your playbook:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YW5zaWJsZS1saW50IHlvdXJfcGxheWJvb2sueW1s"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ansible-lint your_playbook.yml</pre></div><div class='content'><p>This will output any issues found in your playbook, such as deprecated modules or improper formatting.</p>
</div><h1>Unit Testing</h1>
<div class='content'><p>Unit testing in Ansible involves testing individual roles or tasks. <code>molecule</code> is a widely-used tool for this purpose.</p>
</div><h2>Example</h2>
<div class='content'><p>First, install <code>molecule</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwIGluc3RhbGwgbW9sZWN1bGU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pip install molecule</pre></div><div class='content'><p>Initialize a new role with <code>molecule</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9sZWN1bGUgaW5pdCByb2xlIG15X3JvbGU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>molecule init role my_role</pre></div><div class='content'><p>This will create a directory structure for your role, including a <code>molecule</code> directory for tests. You can then write tests in the <code>molecule/default/tests</code> directory.</p>
<p>Run the tests with:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9sZWN1bGUgdGVzdA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>molecule test</pre></div><div class='content'></div><h1>Integration Testing</h1>
<div class='content'><p>Integration testing involves running your entire playbook in a controlled environment to ensure all components work together as expected. You can use <code>molecule</code> for integration testing as well.</p>
</div><h2>Example</h2>
<div class='content'><p>Create a <code>molecule</code> scenario for your playbook:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9sZWN1bGUgaW5pdCBzY2VuYXJpbyAtLWRyaXZlci1uYW1lIGRvY2tlcg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>molecule init scenario --driver-name docker</pre></div><div class='content'><p>This will set up a Docker-based environment for testing your playbook. You can then write your playbook tests in the <code>molecule/default/tests</code> directory and run them with:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9sZWN1bGUgdGVzdA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>molecule test</pre></div><div class='content'></div><h1>Continuous Integration (CI)</h1>
<div class='content'><p>Automating your testing process using CI tools like Jenkins, Travis CI, or GitHub Actions ensures that your Ansible code is tested every time you make changes.</p>
</div><h2>Example: GitHub Actions</h2>
<div class='content'><p>Create a <code>.github/workflows/ci.yml</code> file in your repository:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmFtZTogQ0kKCm9uOiBbcHVzaCwgcHVsbF9yZXF1ZXN0XQoKam9iczoKICB0ZXN0OgogICAgcnVucy1vbjogdWJ1bnR1LWxhdGVzdAogICAgc3RlcHM6CiAgICAgIC0gdXNlczogYWN0aW9ucy9jaGVja291dEB2MgogICAgICAtIG5hbWU6IFNldCB1cCBQeXRob24KICAgICAgICB1c2VzOiBhY3Rpb25zL3NldHVwLXB5dGhvbkB2MgogICAgICAgIHdpdGg6CiAgICAgICAgICBweXRob24tdmVyc2lvbjogJzMueCcKICAgICAgLSBuYW1lOiBJbnN0YWxsIGRlcGVuZGVuY2llcwogICAgICAgIHJ1bjogfAogICAgICAgICAgcHl0aG9uIC1tIHBpcCBpbnN0YWxsIC0tdXBncmFkZSBwaXAKICAgICAgICAgIHBpcCBpbnN0YWxsIGFuc2libGUgYW5zaWJsZS1saW50IG1vbGVjdWxlIGRvY2tlcgogICAgICAtIG5hbWU6IFJ1biBBbnNpYmxlIExpbnQKICAgICAgICBydW46IGFuc2libGUtbGludCB5b3VyX3BsYXlib29rLnltbAogICAgICAtIG5hbWU6IFJ1biBNb2xlY3VsZSBUZXN0cwogICAgICAgIHJ1bjogbW9sZWN1bGUgdGVzdA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>name: CI

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.x'
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install ansible ansible-lint molecule docker
      - name: Run Ansible Lint
        run: ansible-lint your_playbook.yml
      - name: Run Molecule Tests
        run: molecule test</pre></div><div class='content'><p>This configuration will run <code>ansible-lint</code> and <code>molecule</code> tests every time you push changes to your repository or create a pull request.</p>
</div><h1>Conclusion</h1>
<div class='content'><p>Testing your Ansible code is a multi-step process that includes syntax checking, linting, unit testing, integration testing, and continuous integration. By incorporating these practices into your workflow, you can ensure that your automation scripts are reliable, maintainable, and free from errors.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='version-control-with-ansible'>&#x25C4;Version Control with Ansible</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Testing Ansible Code</a>
	</div>
	<div class='col-4 text-end'>
					<a href='security-best-practices'>Security Best Practices &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
