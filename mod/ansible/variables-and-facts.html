<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Variables and Facts in Ansible</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ansible/variables-and-facts" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ansible/variables-and-facts" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ansible/variables-and-facts" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/ansible/variables-and-facts" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/ansible/variables-and-facts" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='running-ad-hoc-commands'>&#x25C4;Running Ad-Hoc Commands</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Variables and Facts in Ansible</a>
	</div>
	<div class='col-4 text-end'>
					<a href='conditionals-and-loops'>Conditionals and Loops &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In Ansible, variables and facts are essential components that allow you to manage and manipulate data dynamically. Understanding how to use them effectively can significantly enhance your automation scripts.</p>
</div><h1>Variables in Ansible</h1>
<div class='content'><p>Variables in Ansible are used to store values that can be reused throughout your playbooks. They help make your playbooks more flexible and easier to maintain.</p>
</div><h2>Defining Variables</h2>
<div class='content'><p>Variables can be defined in several places:</p>
<ul>
<li><strong>Playbooks</strong></li>
<li><strong>Inventory files</strong></li>
<li><strong>Roles</strong></li>
<li><strong>Group and host variables</strong></li>
</ul>
<h4>Example: Defining Variables in a Playbook</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0tCi0gbmFtZTogRXhhbXBsZSBQbGF5Ym9vawogIGhvc3RzOiBhbGwKICB2YXJzOgogICAgaHR0cF9wb3J0OiA4MAogICAgbWF4X2NsaWVudHM6IDIwMAogIHRhc2tzOgogICAgLSBuYW1lOiBQcmludCB0aGUgSFRUUCBwb3J0CiAgICAgIGRlYnVnOgogICAgICAgIG1zZzogIlRoZSBIVFRQIHBvcnQgaXMge3sgaHR0cF9wb3J0IH19IgogICAgLSBuYW1lOiBQcmludCB0aGUgbWF4IGNsaWVudHMKICAgICAgZGVidWc6CiAgICAgICAgbXNnOiAiVGhlIG1heCBjbGllbnRzIGFyZSB7eyBtYXhfY2xpZW50cyB9fSI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>---
- name: Example Playbook
  hosts: all
  vars:
    http_port: 80
    max_clients: 200
  tasks:
    - name: Print the HTTP port
      debug:
        msg: &quot;The HTTP port is {{ http_port }}&quot;
    - name: Print the max clients
      debug:
        msg: &quot;The max clients are {{ max_clients }}&quot;</pre></div><div class='content'></div><h2>Using Variables</h2>
<div class='content'><p>Variables are referenced using double curly braces <code>{{ }}</code>.</p>
<h4>Example: Using Variables in a Task</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBJbnN0YWxsIEFwYWNoZQogIGFwdDoKICAgIG5hbWU6IGFwYWNoZTIKICAgIHN0YXRlOiBwcmVzZW50CgotIG5hbWU6IENvbmZpZ3VyZSBBcGFjaGUKICB0ZW1wbGF0ZToKICAgIHNyYzogdGVtcGxhdGVzL2FwYWNoZTIuY29uZi5qMgogICAgZGVzdDogL2V0Yy9hcGFjaGUyL2FwYWNoZTIuY29uZgogIHZhcnM6CiAgICBzZXJ2ZXJfcG9ydDogODA4MA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Install Apache
  apt:
    name: apache2
    state: present

- name: Configure Apache
  template:
    src: templates/apache2.conf.j2
    dest: /etc/apache2/apache2.conf
  vars:
    server_port: 8080</pre></div><div class='content'></div><h2>Variable Precedence</h2>
<div class='content'><p>Ansible variables have a specific order of precedence, which determines which variable value is used when there are multiple definitions.</p>
<p>| Precedence Level | Source |
|------------------|--------|
| 1 (Highest)      | Extra vars (<code>-e</code> in the command line) |
| 2                | Task vars (only for the task) |
| 3                | Block vars (only for tasks in the block) |
| 4                | Role and include vars (with <code>include_vars</code>) |
| 5                | Play vars_files |
| 6                | Play vars_prompt |
| 7                | Play vars |
| 8                | Host facts / cached facts |
| 9                | Host vars |
| 10               | Group vars |
| 11               | Inventory vars |
| 12 (Lowest)      | Default vars (defined in roles) |</p>
</div><h1>Facts in Ansible</h1>
<div class='content'><p>Facts are pieces of information about the managed nodes, such as IP addresses, operating system details, and hardware information. Ansible automatically gathers facts at the beginning of a playbook run.</p>
</div><h2>Gathering Facts</h2>
<div class='content'><p>By default, Ansible gathers facts using the <code>setup</code> module.</p>
<h4>Example: Gathering Facts</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBHYXRoZXIgZmFjdHMKICBob3N0czogYWxsCiAgdGFza3M6CiAgICAtIG5hbWU6IERpc3BsYXkgYWxsIGZhY3RzCiAgICAgIGRlYnVnOgogICAgICAgIHZhcjogYW5zaWJsZV9mYWN0cw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Gather facts
  hosts: all
  tasks:
    - name: Display all facts
      debug:
        var: ansible_facts</pre></div><div class='content'></div><h2>Using Facts</h2>
<div class='content'><p>Facts can be used just like variables in your playbooks.</p>
<h4>Example: Using Facts in a Task</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBQcmludCB0aGUgb3BlcmF0aW5nIHN5c3RlbQogIGRlYnVnOgogICAgbXNnOiAiVGhlIG9wZXJhdGluZyBzeXN0ZW0gaXMge3sgYW5zaWJsZV9mYWN0c1snb3NfZmFtaWx5J10gfX0i"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Print the operating system
  debug:
    msg: &quot;The operating system is {{ ansible_facts['os_family'] }}&quot;</pre></div><div class='content'></div><h2>Custom Facts</h2>
<div class='content'><p>You can also define custom facts by placing scripts in the <code>/etc/ansible/facts.d</code> directory on the managed nodes.</p>
<h4>Example: Custom Fact Script</h4>
<p>Create a script named <code>custom_fact.sh</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyEvYmluL2Jhc2gKZWNobyAneyJjdXN0b21fZmFjdCI6ICJjdXN0b21fdmFsdWUifSc="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#!/bin/bash
echo '{&quot;custom_fact&quot;: &quot;custom_value&quot;}'</pre></div><div class='content'><p>Place the script in <code>/etc/ansible/facts.d/custom_fact.sh</code> and make it executable.</p>
<h4>Example: Using Custom Facts</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSBuYW1lOiBQcmludCBjdXN0b20gZmFjdAogIGRlYnVnOgogICAgbXNnOiAiVGhlIGN1c3RvbSBmYWN0IGlzIHt7IGFuc2libGVfZmFjdHNbJ2N1c3RvbV9mYWN0J10gfX0i"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- name: Print custom fact
  debug:
    msg: &quot;The custom fact is {{ ansible_facts['custom_fact'] }}&quot;</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Understanding and effectively using variables and facts in Ansible is crucial for creating dynamic and flexible playbooks. Variables allow you to store and reuse values, while facts provide detailed information about your managed nodes. By mastering these concepts, you can write more efficient and maintainable automation scripts.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='running-ad-hoc-commands'>&#x25C4;Running Ad-Hoc Commands</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Variables and Facts in Ansible</a>
	</div>
	<div class='col-4 text-end'>
					<a href='conditionals-and-loops'>Conditionals and Loops &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
