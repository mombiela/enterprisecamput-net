<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Testing in Angular 2+</title>

    <link rel="alternate" href="https://campusempresa.com/mod/angular2/service-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/angular2/service-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/angular2/service-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/angular2/service-testing" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/angular2/service-testing" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='component-testing'>&#x25C4;Component Testing</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Service Testing in Angular 2+</a>
	</div>
	<div class='col-4 text-end'>
					<a href='end-to-end-testing'>End-to-End Testing &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Service testing is a crucial aspect of Angular development. It ensures that the services, which are responsible for handling business logic and data retrieval, work correctly. This topic will guide you through the basics to advanced concepts of service testing in Angular 2+.</p>
</div><h1>Introduction to Service Testing</h1>
<div class='content'><ul>
<li>
<p><strong>What is Service Testing?</strong></p>
<ul>
<li>Service testing involves testing the services in your Angular application to ensure they function as expected.</li>
<li>It focuses on the business logic and data handling aspects of your application.</li>
</ul>
</li>
<li>
<p><strong>Why is Service Testing Important?</strong></p>
<ul>
<li>Ensures reliability and correctness of business logic.</li>
<li>Helps in identifying bugs early in the development cycle.</li>
<li>Facilitates easier maintenance and refactoring.</li>
</ul>
</li>
</ul>
</div><h1>Setting Up the Testing Environment</h1>
<div class='content'><p>Before we dive into writing tests, let's set up the testing environment.</p>
<ul>
<li><strong>Installing Necessary Packages</strong>
<ul>
<li>Angular CLI comes with Jasmine and Karma pre-configured for testing.</li>
<li>Ensure you have the Angular CLI installed:
<pre><code class="language-bash">npm install -g @angular/cli
</code></pre>
</li>
<li>Create a new Angular project if you don't have one:
<pre><code class="language-bash">ng new my-angular-app
cd my-angular-app
</code></pre>
</li>
</ul>
</li>
</ul>
</div><h1>Writing Basic Service Tests</h1>
<div class='content'><ul>
<li>
<p><strong>Creating a Service</strong></p>
<ul>
<li>Generate a new service using Angular CLI:
<pre><code class="language-bash">ng generate service my-service
</code></pre>
</li>
<li>Example service (<code>my-service.service.ts</code>):
<pre><code class="language-typescript">import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class MyService {
  constructor() { }

  getValue(): string {
    return 'Hello, World!';
  }
}
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Writing a Test for the Service</strong></p>
<ul>
<li>Example test (<code>my-service.service.spec.ts</code>):
<pre><code class="language-typescript">import { TestBed } from '@angular/core/testing';
import { MyService } from './my-service.service';

describe('MyService', () =&gt; {
  let service: MyService;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({});
    service = TestBed.inject(MyService);
  });

  it('should be created', () =&gt; {
    expect(service).toBeTruthy();
  });

  it('should return &quot;Hello, World!&quot;', () =&gt; {
    expect(service.getValue()).toBe('Hello, World!');
  });
});
</code></pre>
</li>
</ul>
</li>
</ul>
</div><h1>Testing Services with Dependencies</h1>
<div class='content'><ul>
<li>
<p><strong>Service with Dependency</strong></p>
<ul>
<li>Example service with dependency (<code>data.service.ts</code>):
<pre><code class="language-typescript">import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';

@Injectable({
  providedIn: 'root'
})
export class DataService {
  constructor(private http: HttpClient) { }

  fetchData(): Observable&lt;any&gt; {
    return this.http.get('https://api.example.com/data');
  }
}
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Mocking Dependencies</strong></p>
<ul>
<li>Use <code>HttpClientTestingModule</code> to mock HTTP requests:
<pre><code class="language-typescript">import { TestBed } from '@angular/core/testing';
import { HttpClientTestingModule, HttpTestingController } from '@angular/common/http/testing';
import { DataService } from './data.service';

describe('DataService', () =&gt; {
  let service: DataService;
  let httpMock: HttpTestingController;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({
      imports: [HttpClientTestingModule],
      providers: [DataService]
    });
    service = TestBed.inject(DataService);
    httpMock = TestBed.inject(HttpTestingController);
  });

  it('should fetch data', () =&gt; {
    const dummyData = [{ id: 1, name: 'John' }];

    service.fetchData().subscribe(data =&gt; {
      expect(data.length).toBe(1);
      expect(data).toEqual(dummyData);
    });

    const req = httpMock.expectOne('https://api.example.com/data');
    expect(req.request.method).toBe('GET');
    req.flush(dummyData);
  });

  afterEach(() =&gt; {
    httpMock.verify();
  });
});
</code></pre>
</li>
</ul>
</li>
</ul>
</div><h1>Advanced Service Testing Techniques</h1>
<div class='content'><ul>
<li>
<p><strong>Testing Error Scenarios</strong></p>
<ul>
<li>Example of testing error handling:
<pre><code class="language-typescript">it('should handle error', () =&gt; {
  service.fetchData().subscribe(
    () =&gt; fail('should have failed with the 500 error'),
    (error: any) =&gt; {
      expect(error.status).toBe(500);
    }
  );

  const req = httpMock.expectOne('https://api.example.com/data');
  req.flush('Something went wrong', { status: 500, statusText: 'Server Error' });
});
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Using Spies to Mock Methods</strong></p>
<ul>
<li>Example of using spies:
<pre><code class="language-typescript">it('should call getValue method', () =&gt; {
  const spy = spyOn(service, 'getValue').and.returnValue('Mock Value');
  expect(service.getValue()).toBe('Mock Value');
  expect(spy).toHaveBeenCalled();
});
</code></pre>
</li>
</ul>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Service testing in Angular 2+ is essential for ensuring the reliability and correctness of your application's business logic. By setting up a proper testing environment, writing basic and advanced tests, and using techniques like mocking dependencies and handling errors, you can create robust and maintainable Angular applications. Remember to test thoroughly and regularly to catch issues early and maintain high code quality.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='component-testing'>&#x25C4;Component Testing</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Service Testing in Angular 2+</a>
	</div>
	<div class='col-4 text-end'>
					<a href='end-to-end-testing'>End-to-End Testing &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
