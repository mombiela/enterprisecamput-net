<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Directives</title>

    <link rel="alternate" href="https://campusempresa.com/mod/angular2/04-02-custom-directives" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/angular2/04-02-custom-directives" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/angular2/04-02-custom-directives" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/angular2/04-02-custom-directives" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/angular2/04-02-custom-directives" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-01-built-in-directives' title="Built-in Directives">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Custom Directives</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='04-03-built-in-pipes' title="Built-in Pipes">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to create custom directives in Angular. Directives are a powerful feature in Angular that allow you to extend the HTML by creating custom behavior. Custom directives can be used to manipulate the DOM, apply styles, or add new functionality to your components.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li>
<p><strong>What are Directives?</strong></p>
<ul>
<li>Directives are classes that add additional behavior to elements in your Angular applications.</li>
<li>There are three types of directives in Angular:
<ul>
<li><strong>Component Directives</strong>: Directives with a template.</li>
<li><strong>Structural Directives</strong>: Directives that change the DOM layout by adding and removing DOM elements.</li>
<li><strong>Attribute Directives</strong>: Directives that change the appearance or behavior of an element, component, or another directive.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Creating a Custom Directive</strong></p>
<ul>
<li>Custom directives are created using the <code>@Directive</code> decorator.</li>
<li>The <code>@Directive</code> decorator requires a selector, which is used to apply the directive to an element.</li>
</ul>
</li>
<li>
<p><strong>Using the Directive</strong></p>
<ul>
<li>Once created, the directive can be used in templates by adding the directive's selector to an element.</li>
</ul>
</li>
</ol>
</div><h1>Step-by-Step Guide to Creating a Custom Directive</h1>
<div class='content'></div><h2>Step 1: Generate a New Directive</h2>
<div class='content'><p>You can generate a new directive using the Angular CLI:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmcgZ2VuZXJhdGUgZGlyZWN0aXZlIGhpZ2hsaWdodA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ng generate directive highlight</pre></div><div class='content'><p>This command will create two files: <code>highlight.directive.ts</code> and <code>highlight.directive.spec.ts</code>.</p>
</div><h2>Step 2: Define the Directive</h2>
<div class='content'><p>Open the <code>highlight.directive.ts</code> file and define the directive:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgRGlyZWN0aXZlLCBFbGVtZW50UmVmLCBSZW5kZXJlcjIsIEhvc3RMaXN0ZW5lciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwoKQERpcmVjdGl2ZSh7CiAgc2VsZWN0b3I6ICdbYXBwSGlnaGxpZ2h0XScKfSkKZXhwb3J0IGNsYXNzIEhpZ2hsaWdodERpcmVjdGl2ZSB7CiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbDogRWxlbWVudFJlZiwgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyKSB7fQoKICBASG9zdExpc3RlbmVyKCdtb3VzZWVudGVyJykgb25Nb3VzZUVudGVyKCkgewogICAgdGhpcy5oaWdobGlnaHQoJ3llbGxvdycpOwogIH0KCiAgQEhvc3RMaXN0ZW5lcignbW91c2VsZWF2ZScpIG9uTW91c2VMZWF2ZSgpIHsKICAgIHRoaXMuaGlnaGxpZ2h0KG51bGwpOwogIH0KCiAgcHJpdmF0ZSBoaWdobGlnaHQoY29sb3I6IHN0cmluZyB8IG51bGwpIHsKICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5lbC5uYXRpdmVFbGVtZW50LCAnYmFja2dyb3VuZENvbG9yJywgY29sb3IpOwogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Directive, ElementRef, Renderer2, HostListener } from '@angular/core';

@Directive({
  selector: '[appHighlight]'
})
export class HighlightDirective {
  constructor(private el: ElementRef, private renderer: Renderer2) {}

  @HostListener('mouseenter') onMouseEnter() {
    this.highlight('yellow');
  }

  @HostListener('mouseleave') onMouseLeave() {
    this.highlight(null);
  }

  private highlight(color: string | null) {
    this.renderer.setStyle(this.el.nativeElement, 'backgroundColor', color);
  }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>ElementRef</strong>: A service that grants direct access to the DOM element.</li>
<li><strong>Renderer2</strong>: A service that allows you to manipulate the DOM in a safe way.</li>
<li><strong>@HostListener</strong>: A decorator that listens to DOM events and triggers the associated method.</li>
</ul>
</div><h2>Step 3: Use the Directive in a Component</h2>
<div class='content'><p>To use the directive, add it to the <code>declarations</code> array in your module:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKaW1wb3J0IHsgQnJvd3Nlck1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInOwppbXBvcnQgeyBBcHBDb21wb25lbnQgfSBmcm9tICcuL2FwcC5jb21wb25lbnQnOwppbXBvcnQgeyBIaWdobGlnaHREaXJlY3RpdmUgfSBmcm9tICcuL2hpZ2hsaWdodC5kaXJlY3RpdmUnOwoKQE5nTW9kdWxlKHsKICBkZWNsYXJhdGlvbnM6IFsKICAgIEFwcENvbXBvbmVudCwKICAgIEhpZ2hsaWdodERpcmVjdGl2ZQogIF0sCiAgaW1wb3J0czogWwogICAgQnJvd3Nlck1vZHVsZQogIF0sCiAgcHJvdmlkZXJzOiBbXSwKICBib290c3RyYXA6IFtBcHBDb21wb25lbnRdCn0pCmV4cG9ydCBjbGFzcyBBcHBNb2R1bGUgeyB9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { NgModule } from '@angular/core';
import { BrowserModule } from '@angular/platform-browser';
import { AppComponent } from './app.component';
import { HighlightDirective } from './highlight.directive';

@NgModule({
  declarations: [
    AppComponent,
    HighlightDirective
  ],
  imports: [
    BrowserModule
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }</pre></div><div class='content'><p>Then, apply the directive in a component template:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PHAgYXBwSGlnaGxpZ2h0PkhvdmVyIG92ZXIgdGhpcyB0ZXh0IHRvIHNlZSB0aGUgaGlnaGxpZ2h0IGVmZmVjdC48L3A+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;p appHighlight&gt;Hover over this text to see the highlight effect.&lt;/p&gt;</pre></div><div class='content'></div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise 1: Create a Custom Directive</h2>
<div class='content'><p><strong>Objective</strong>: Create a custom directive that changes the text color of an element when clicked.</p>
<ol>
<li>Generate a new directive named <code>textColor</code>.</li>
<li>Define the directive to change the text color to blue when the element is clicked.</li>
<li>Use the directive in a component template.</li>
</ol>
</div><h2>Solution</h2>
<div class='content'><ol>
<li>Generate the directive:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmcgZ2VuZXJhdGUgZGlyZWN0aXZlIHRleHRDb2xvcg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ng generate directive textColor</pre></div><div class='content'><ol start="2">
<li>Define the directive:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgRGlyZWN0aXZlLCBFbGVtZW50UmVmLCBSZW5kZXJlcjIsIEhvc3RMaXN0ZW5lciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwoKQERpcmVjdGl2ZSh7CiAgc2VsZWN0b3I6ICdbYXBwVGV4dENvbG9yXScKfSkKZXhwb3J0IGNsYXNzIFRleHRDb2xvckRpcmVjdGl2ZSB7CiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbDogRWxlbWVudFJlZiwgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyKSB7fQoKICBASG9zdExpc3RlbmVyKCdjbGljaycpIG9uQ2xpY2soKSB7CiAgICB0aGlzLmNoYW5nZUNvbG9yKCdibHVlJyk7CiAgfQoKICBwcml2YXRlIGNoYW5nZUNvbG9yKGNvbG9yOiBzdHJpbmcpIHsKICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUodGhpcy5lbC5uYXRpdmVFbGVtZW50LCAnY29sb3InLCBjb2xvcik7CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Directive, ElementRef, Renderer2, HostListener } from '@angular/core';

@Directive({
  selector: '[appTextColor]'
})
export class TextColorDirective {
  constructor(private el: ElementRef, private renderer: Renderer2) {}

  @HostListener('click') onClick() {
    this.changeColor('blue');
  }

  private changeColor(color: string) {
    this.renderer.setStyle(this.el.nativeElement, 'color', color);
  }
}</pre></div><div class='content'><ol start="3">
<li>Use the directive in a component template:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PHAgYXBwVGV4dENvbG9yPkNsaWNrIHRoaXMgdGV4dCB0byBjaGFuZ2UgaXRzIGNvbG9yIHRvIGJsdWUuPC9wPg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;p appTextColor&gt;Click this text to change its color to blue.&lt;/p&gt;</pre></div><div class='content'></div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Forgetting to Declare the Directive</strong>: Ensure that the directive is declared in the <code>declarations</code> array of your module.</li>
<li><strong>Incorrect Selector Usage</strong>: Make sure the selector is used correctly in the template.</li>
<li><strong>Direct DOM Manipulation</strong>: Avoid direct DOM manipulation using <code>ElementRef.nativeElement</code>. Use <code>Renderer2</code> for safe DOM manipulation.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, we learned how to create custom directives in Angular. We explored the key concepts, created a custom directive step-by-step, and practiced with an exercise. Custom directives are a powerful way to extend the functionality of your Angular applications by adding custom behavior to your elements. In the next section, we will dive into built-in pipes and how to create custom pipes.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-01-built-in-directives' title="Built-in Directives">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='04-03-built-in-pipes' title="Built-in Pipes">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
