<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profiling and Optimization Techniques</title>

    <link rel="alternate" href="https://campusempresa.com/mod/unity/09-01-profiling-optimization-techniques" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/unity/09-01-profiling-optimization-techniques" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/unity/09-01-profiling-optimization-techniques" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/unity/09-01-profiling-optimization-techniques" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/unity/09-01-profiling-optimization-techniques" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='08-04-state-machines-behavior-trees' title="State Machines and Behavior Trees">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Profiling and Optimization Techniques</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='09-02-memory-management' title="Memory Management">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this module, we will explore various techniques to profile and optimize your Unity projects. Profiling helps you identify performance bottlenecks, while optimization techniques allow you to improve the performance and efficiency of your game. This is crucial for ensuring a smooth and enjoyable experience for players.</p>
</div><h1>1. Introduction to Profiling</h1>
<div class='content'></div><h2>What is Profiling?</h2>
<div class='content'><p>Profiling is the process of measuring the performance of your game to identify areas that need improvement. It involves collecting data on various aspects such as CPU usage, memory consumption, and rendering times.</p>
</div><h2>Why is Profiling Important?</h2>
<div class='content'><ul>
<li><strong>Identify Bottlenecks</strong>: Helps pinpoint areas that are slowing down your game.</li>
<li><strong>Optimize Performance</strong>: Allows you to make informed decisions to improve game performance.</li>
<li><strong>Enhance User Experience</strong>: Ensures a smoother and more responsive game.</li>
</ul>
</div><h1>2. Using the Unity Profiler</h1>
<div class='content'></div><h2>Accessing the Unity Profiler</h2>
<div class='content'><ol>
<li>Open Unity.</li>
<li>Go to <code>Window</code> &gt; <code>Analysis</code> &gt; <code>Profiler</code>.</li>
</ol>
</div><h2>Key Sections of the Unity Profiler</h2>
<div class='content'><ul>
<li><strong>CPU Usage</strong>: Shows how much CPU time is being used by different parts of your game.</li>
<li><strong>GPU Usage</strong>: Displays GPU performance metrics.</li>
<li><strong>Memory</strong>: Provides information on memory allocation and usage.</li>
<li><strong>Rendering</strong>: Details the rendering process and frame times.</li>
<li><strong>Audio</strong>: Monitors audio performance.</li>
<li><strong>Physics</strong>: Tracks physics calculations and performance.</li>
</ul>
</div><h2>Example: Profiling CPU Usage</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgVW5pdHlFbmdpbmU7CgpwdWJsaWMgY2xhc3MgRXhhbXBsZVNjcmlwdCA6IE1vbm9CZWhhdmlvdXIKewogICAgdm9pZCBVcGRhdGUoKQogICAgewogICAgICAgIC8vIFNpbXVsYXRlIGEgcGVyZm9ybWFuY2UtaW50ZW5zaXZlIHRhc2sKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDEwMDAwMDA7IGkrKykKICAgICAgICB7CiAgICAgICAgICAgIGZsb2F0IHggPSBNYXRoZi5TcXJ0KGkpOwogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using UnityEngine;

public class ExampleScript : MonoBehaviour
{
    void Update()
    {
        // Simulate a performance-intensive task
        for (int i = 0; i &lt; 1000000; i++)
        {
            float x = Mathf.Sqrt(i);
        }
    }
}</pre></div><div class='content'><ul>
<li>Attach this script to a GameObject.</li>
<li>Run the game and open the Profiler.</li>
<li>Observe the CPU Usage section to see the impact of the script.</li>
</ul>
</div><h1>3. Common Optimization Techniques</h1>
<div class='content'></div><h2>Reducing Draw Calls</h2>
<div class='content'><ul>
<li><strong>Combine Meshes</strong>: Use tools like <code>StaticBatchingUtility</code> to combine static meshes.</li>
<li><strong>Use Texture Atlases</strong>: Combine multiple textures into a single texture atlas to reduce material switches.</li>
</ul>
</div><h2>Example: Combining Meshes</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgVW5pdHlFbmdpbmU7CgpwdWJsaWMgY2xhc3MgQ29tYmluZU1lc2hlcyA6IE1vbm9CZWhhdmlvdXIKewogICAgdm9pZCBTdGFydCgpCiAgICB7CiAgICAgICAgTWVzaEZpbHRlcltdIG1lc2hGaWx0ZXJzID0gR2V0Q29tcG9uZW50c0luQ2hpbGRyZW48TWVzaEZpbHRlcj4oKTsKICAgICAgICBDb21iaW5lSW5zdGFuY2VbXSBjb21iaW5lID0gbmV3IENvbWJpbmVJbnN0YW5jZVttZXNoRmlsdGVycy5MZW5ndGhdOwoKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IG1lc2hGaWx0ZXJzLkxlbmd0aDsgaSsrKQogICAgICAgIHsKICAgICAgICAgICAgY29tYmluZVtpXS5tZXNoID0gbWVzaEZpbHRlcnNbaV0uc2hhcmVkTWVzaDsKICAgICAgICAgICAgY29tYmluZVtpXS50cmFuc2Zvcm0gPSBtZXNoRmlsdGVyc1tpXS50cmFuc2Zvcm0ubG9jYWxUb1dvcmxkTWF0cml4OwogICAgICAgICAgICBtZXNoRmlsdGVyc1tpXS5nYW1lT2JqZWN0LlNldEFjdGl2ZShmYWxzZSk7CiAgICAgICAgfQoKICAgICAgICBNZXNoRmlsdGVyIG1mID0gZ2FtZU9iamVjdC5BZGRDb21wb25lbnQ8TWVzaEZpbHRlcj4oKTsKICAgICAgICBtZi5tZXNoID0gbmV3IE1lc2goKTsKICAgICAgICBtZi5tZXNoLkNvbWJpbmVNZXNoZXMoY29tYmluZSk7CiAgICAgICAgZ2FtZU9iamVjdC5TZXRBY3RpdmUodHJ1ZSk7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using UnityEngine;

public class CombineMeshes : MonoBehaviour
{
    void Start()
    {
        MeshFilter[] meshFilters = GetComponentsInChildren&lt;MeshFilter&gt;();
        CombineInstance[] combine = new CombineInstance[meshFilters.Length];

        for (int i = 0; i &lt; meshFilters.Length; i++)
        {
            combine[i].mesh = meshFilters[i].sharedMesh;
            combine[i].transform = meshFilters[i].transform.localToWorldMatrix;
            meshFilters[i].gameObject.SetActive(false);
        }

        MeshFilter mf = gameObject.AddComponent&lt;MeshFilter&gt;();
        mf.mesh = new Mesh();
        mf.mesh.CombineMeshes(combine);
        gameObject.SetActive(true);
    }
}</pre></div><div class='content'><ul>
<li>Attach this script to a parent GameObject containing multiple child meshes.</li>
<li>Run the game and observe the reduction in draw calls.</li>
</ul>
</div><h2>Memory Management</h2>
<div class='content'><ul>
<li><strong>Object Pooling</strong>: Reuse objects instead of creating and destroying them frequently.</li>
<li><strong>Garbage Collection</strong>: Minimize allocations to reduce garbage collection overhead.</li>
</ul>
</div><h2>Example: Object Pooling</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7CnVzaW5nIFVuaXR5RW5naW5lOwoKcHVibGljIGNsYXNzIE9iamVjdFBvb2wgOiBNb25vQmVoYXZpb3VyCnsKICAgIHB1YmxpYyBHYW1lT2JqZWN0IHByZWZhYjsKICAgIHByaXZhdGUgUXVldWU8R2FtZU9iamVjdD4gcG9vbCA9IG5ldyBRdWV1ZTxHYW1lT2JqZWN0PigpOwoKICAgIHB1YmxpYyBHYW1lT2JqZWN0IEdldE9iamVjdCgpCiAgICB7CiAgICAgICAgaWYgKHBvb2wuQ291bnQgPiAwKQogICAgICAgIHsKICAgICAgICAgICAgR2FtZU9iamVjdCBvYmogPSBwb29sLkRlcXVldWUoKTsKICAgICAgICAgICAgb2JqLlNldEFjdGl2ZSh0cnVlKTsKICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgcmV0dXJuIEluc3RhbnRpYXRlKHByZWZhYik7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIFJldHVybk9iamVjdChHYW1lT2JqZWN0IG9iaikKICAgIHsKICAgICAgICBvYmouU2V0QWN0aXZlKGZhbHNlKTsKICAgICAgICBwb29sLkVucXVldWUob2JqKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using System.Collections.Generic;
using UnityEngine;

public class ObjectPool : MonoBehaviour
{
    public GameObject prefab;
    private Queue&lt;GameObject&gt; pool = new Queue&lt;GameObject&gt;();

    public GameObject GetObject()
    {
        if (pool.Count &gt; 0)
        {
            GameObject obj = pool.Dequeue();
            obj.SetActive(true);
            return obj;
        }
        else
        {
            return Instantiate(prefab);
        }
    }

    public void ReturnObject(GameObject obj)
    {
        obj.SetActive(false);
        pool.Enqueue(obj);
    }
}</pre></div><div class='content'><ul>
<li>Create a prefab and assign it to the <code>prefab</code> field in the inspector.</li>
<li>Use <code>GetObject</code> to retrieve an object from the pool and <code>ReturnObject</code> to return it.</li>
</ul>
</div><h1>4. Practical Exercises</h1>
<div class='content'></div><h2>Exercise 1: Profiling and Reducing CPU Usage</h2>
<div class='content'><ol>
<li>Create a script that performs a CPU-intensive task.</li>
<li>Profile the game using the Unity Profiler.</li>
<li>Optimize the script to reduce CPU usage.</li>
</ol>
</div><h2>Solution</h2>
<div class='content'><ol>
<li>Create a script similar to the <code>ExampleScript</code> provided earlier.</li>
<li>Profile the game and observe the CPU Usage.</li>
<li>Optimize by reducing the complexity of the task or using more efficient algorithms.</li>
</ol>
</div><h2>Exercise 2: Implementing Object Pooling</h2>
<div class='content'><ol>
<li>Create a simple game where objects are frequently created and destroyed.</li>
<li>Implement object pooling to manage these objects.</li>
<li>Profile the game before and after implementing object pooling to observe the improvements.</li>
</ol>
</div><h2>Solution</h2>
<div class='content'><ol>
<li>Create a script that spawns and destroys objects frequently.</li>
<li>Implement the <code>ObjectPool</code> script provided earlier.</li>
<li>Profile the game and compare the memory usage and performance before and after optimization.</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>In this module, we covered the basics of profiling and various optimization techniques in Unity. Profiling helps you identify performance bottlenecks, while optimization techniques allow you to improve the efficiency and performance of your game. By applying these techniques, you can ensure a smoother and more enjoyable experience for your players. In the next module, we will delve into memory management and further optimization strategies.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='08-04-state-machines-behavior-trees' title="State Machines and Behavior Trees">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='09-02-memory-management' title="Memory Management">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
