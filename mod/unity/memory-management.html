<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Management in Unity</title>

    <link rel="alternate" href="https://campusempresa.com/mod/unity/memory-management" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/unity/memory-management" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/unity/memory-management" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/unity/memory-management" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/unity/memory-management" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='profiling-and-optimization'>&#x25C4;Profiling and Optimization</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Memory Management in Unity</a>
	</div>
	<div class='col-4 text-end'>
					<a href='reducing-draw-calls'>Reducing Draw Calls &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Memory management is a crucial aspect of game development in Unity. Proper memory management ensures that your game runs smoothly and efficiently, avoiding common pitfalls like memory leaks and excessive garbage collection. This topic will cover the basics to advanced techniques for managing memory in Unity.</p>
</div><h1>Introduction to Memory Management</h1>
<div class='content'><p>Memory management involves the allocation, use, and release of memory resources in your game. Understanding how Unity handles memory can help you optimize your gameâ€™s performance.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Heap and Stack Memory</strong>: Understanding the difference between heap and stack memory is fundamental. Stack memory is used for static memory allocation, while heap memory is used for dynamic memory allocation.</li>
<li><strong>Garbage Collection</strong>: Unity uses a garbage collector to automatically manage memory. However, improper memory management can lead to frequent garbage collection, causing performance issues.</li>
<li><strong>Memory Leaks</strong>: Memory leaks occur when memory that is no longer needed is not released. This can lead to increased memory usage and eventually cause the game to crash.</li>
</ul>
</div><h1>Basic Memory Management Techniques</h1>
<div class='content'></div><h2>Object Pooling</h2>
<div class='content'><p>Object pooling is a technique used to reuse objects instead of creating and destroying them frequently. This can significantly reduce the overhead of memory allocation and garbage collection.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIE9iamVjdFBvb2wgOiBNb25vQmVoYXZpb3VyCnsKICAgIHB1YmxpYyBHYW1lT2JqZWN0IG9iamVjdFByZWZhYjsKICAgIHByaXZhdGUgUXVldWU8R2FtZU9iamVjdD4gb2JqZWN0UG9vbCA9IG5ldyBRdWV1ZTxHYW1lT2JqZWN0PigpOwoKICAgIHB1YmxpYyBHYW1lT2JqZWN0IEdldE9iamVjdCgpCiAgICB7CiAgICAgICAgaWYgKG9iamVjdFBvb2wuQ291bnQgPiAwKQogICAgICAgIHsKICAgICAgICAgICAgR2FtZU9iamVjdCBvYmogPSBvYmplY3RQb29sLkRlcXVldWUoKTsKICAgICAgICAgICAgb2JqLlNldEFjdGl2ZSh0cnVlKTsKICAgICAgICAgICAgcmV0dXJuIG9iajsKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgcmV0dXJuIEluc3RhbnRpYXRlKG9iamVjdFByZWZhYik7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyB2b2lkIFJldHVybk9iamVjdChHYW1lT2JqZWN0IG9iaikKICAgIHsKICAgICAgICBvYmouU2V0QWN0aXZlKGZhbHNlKTsKICAgICAgICBvYmplY3RQb29sLkVucXVldWUob2JqKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class ObjectPool : MonoBehaviour
{
    public GameObject objectPrefab;
    private Queue&lt;GameObject&gt; objectPool = new Queue&lt;GameObject&gt;();

    public GameObject GetObject()
    {
        if (objectPool.Count &gt; 0)
        {
            GameObject obj = objectPool.Dequeue();
            obj.SetActive(true);
            return obj;
        }
        else
        {
            return Instantiate(objectPrefab);
        }
    }

    public void ReturnObject(GameObject obj)
    {
        obj.SetActive(false);
        objectPool.Enqueue(obj);
    }
}</pre></div><div class='content'><p>In this example, <code>ObjectPool</code> manages a pool of objects. Instead of creating new objects, it reuses inactive ones, reducing memory allocation.</p>
</div><h2>Avoiding Frequent Instantiation and Destruction</h2>
<div class='content'><p>Frequent instantiation and destruction of objects can lead to performance issues due to the overhead of memory allocation and garbage collection.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dm9pZCBVcGRhdGUoKQp7CiAgICBpZiAoSW5wdXQuR2V0S2V5RG93bihLZXlDb2RlLlNwYWNlKSkKICAgIHsKICAgICAgICBHYW1lT2JqZWN0IGJ1bGxldCA9IEluc3RhbnRpYXRlKGJ1bGxldFByZWZhYiwgdHJhbnNmb3JtLnBvc2l0aW9uLCB0cmFuc2Zvcm0ucm90YXRpb24pOwogICAgICAgIERlc3Ryb3koYnVsbGV0LCAyZik7IC8vIERlc3Ryb3kgYnVsbGV0IGFmdGVyIDIgc2Vjb25kcwogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>void Update()
{
    if (Input.GetKeyDown(KeyCode.Space))
    {
        GameObject bullet = Instantiate(bulletPrefab, transform.position, transform.rotation);
        Destroy(bullet, 2f); // Destroy bullet after 2 seconds
    }
}</pre></div><div class='content'><p>Instead of instantiating and destroying bullets frequently, consider using object pooling to manage bullets.</p>
</div><h1>Intermediate Memory Management Techniques</h1>
<div class='content'></div><h2>Managing Large Textures and Assets</h2>
<div class='content'><p>Large textures and assets can consume significant memory. Proper management of these resources is essential.</p>
<ul>
<li><strong>Texture Compression</strong>: Use compressed textures to reduce memory usage.</li>
<li><strong>Asset Bundles</strong>: Load assets dynamically using Asset Bundles to manage memory more efficiently.</li>
</ul>
</div><h2>Example: Loading Assets Dynamically</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SUVudW1lcmF0b3IgTG9hZEFzc2V0QnVuZGxlKHN0cmluZyBidW5kbGVVcmwpCnsKICAgIHVzaW5nIChXV1cgd3d3ID0gbmV3IFdXVyhidW5kbGVVcmwpKQogICAgewogICAgICAgIHlpZWxkIHJldHVybiB3d3c7CiAgICAgICAgQXNzZXRCdW5kbGUgYnVuZGxlID0gd3d3LmFzc2V0QnVuZGxlOwogICAgICAgIGlmIChidW5kbGUgIT0gbnVsbCkKICAgICAgICB7CiAgICAgICAgICAgIEdhbWVPYmplY3QgYXNzZXQgPSBidW5kbGUuTG9hZEFzc2V0PEdhbWVPYmplY3Q+KCJBc3NldE5hbWUiKTsKICAgICAgICAgICAgSW5zdGFudGlhdGUoYXNzZXQpOwogICAgICAgICAgICBidW5kbGUuVW5sb2FkKGZhbHNlKTsKICAgICAgICB9CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>IEnumerator LoadAssetBundle(string bundleUrl)
{
    using (WWW www = new WWW(bundleUrl))
    {
        yield return www;
        AssetBundle bundle = www.assetBundle;
        if (bundle != null)
        {
            GameObject asset = bundle.LoadAsset&lt;GameObject&gt;(&quot;AssetName&quot;);
            Instantiate(asset);
            bundle.Unload(false);
        }
    }
}</pre></div><div class='content'><p>In this example, assets are loaded dynamically from an Asset Bundle, reducing the memory footprint during runtime.</p>
</div><h1>Advanced Memory Management Techniques</h1>
<div class='content'></div><h2>Profiling and Optimization</h2>
<div class='content'><p>Profiling your game helps identify memory usage patterns and potential issues. Unity provides tools like the Profiler and Memory Profiler to assist in this process.</p>
<h4>Using the Profiler</h4>
<ul>
<li><strong>Memory Module</strong>: Use the Memory module in the Unity Profiler to monitor memory usage.</li>
<li><strong>Heap and GC Allocations</strong>: Track heap and garbage collection allocations to identify areas for optimization.</li>
</ul>
</div><h2>Custom Memory Management</h2>
<div class='content'><p>For advanced users, implementing custom memory management techniques can provide greater control over memory usage.</p>
<h4>Example: Custom Allocator</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIEN1c3RvbUFsbG9jYXRvcgp7CiAgICBwcml2YXRlIGJ5dGVbXSBtZW1vcnlQb29sOwogICAgcHJpdmF0ZSBpbnQgY3VycmVudEluZGV4OwoKICAgIHB1YmxpYyBDdXN0b21BbGxvY2F0b3IoaW50IHNpemUpCiAgICB7CiAgICAgICAgbWVtb3J5UG9vbCA9IG5ldyBieXRlW3NpemVdOwogICAgICAgIGN1cnJlbnRJbmRleCA9IDA7CiAgICB9CgogICAgcHVibGljIEludFB0ciBBbGxvY2F0ZShpbnQgc2l6ZSkKICAgIHsKICAgICAgICBpZiAoY3VycmVudEluZGV4ICsgc2l6ZSA+IG1lbW9yeVBvb2wuTGVuZ3RoKQogICAgICAgIHsKICAgICAgICAgICAgdGhyb3cgbmV3IE91dE9mTWVtb3J5RXhjZXB0aW9uKCk7CiAgICAgICAgfQogICAgICAgIEludFB0ciBwdHIgPSBuZXcgSW50UHRyKG1lbW9yeVBvb2xbY3VycmVudEluZGV4XSk7CiAgICAgICAgY3VycmVudEluZGV4ICs9IHNpemU7CiAgICAgICAgcmV0dXJuIHB0cjsKICAgIH0KCiAgICBwdWJsaWMgdm9pZCBSZXNldCgpCiAgICB7CiAgICAgICAgY3VycmVudEluZGV4ID0gMDsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class CustomAllocator
{
    private byte[] memoryPool;
    private int currentIndex;

    public CustomAllocator(int size)
    {
        memoryPool = new byte[size];
        currentIndex = 0;
    }

    public IntPtr Allocate(int size)
    {
        if (currentIndex + size &gt; memoryPool.Length)
        {
            throw new OutOfMemoryException();
        }
        IntPtr ptr = new IntPtr(memoryPool[currentIndex]);
        currentIndex += size;
        return ptr;
    }

    public void Reset()
    {
        currentIndex = 0;
    }
}</pre></div><div class='content'><p>This example demonstrates a simple custom allocator that manages a fixed-size memory pool.</p>
</div><h1>Conclusion</h1>
<div class='content'><p>Effective memory management is essential for creating high-performance games in Unity. By understanding and applying basic to advanced memory management techniques, you can optimize your gameâ€™s performance and ensure a smooth gaming experience. Remember to profile your game regularly and address any memory-related issues promptly.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='profiling-and-optimization'>&#x25C4;Profiling and Optimization</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Memory Management in Unity</a>
	</div>
	<div class='col-4 text-end'>
					<a href='reducing-draw-calls'>Reducing Draw Calls &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiÃ¨ncia d'Ãºs i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
