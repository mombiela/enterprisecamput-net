<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transactions</title>

    <link rel="alternate" href="https://campusempresa.com/mod/sql/transactions" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/sql/transactions" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/sql/transactions" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/sql/transactions" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/sql/transactions" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='views'>&#x25C4;Views</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Transactions</a>
	</div>
	<div class='col-4 text-end'>
					<a href='error-handling'>Error Handling &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Transactions</h1>
<div class='content'><p>Transactions in SQL are a fundamental concept that ensures the integrity and consistency of data within a database. A transaction is a sequence of one or more SQL operations treated as a single unit of work. These operations must either all succeed or all fail, maintaining the database in a consistent state.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Atomicity</strong>: Ensures that all operations within a transaction are completed; if not, the transaction is aborted.</li>
<li><strong>Consistency</strong>: Ensures that a transaction brings the database from one valid state to another.</li>
<li><strong>Isolation</strong>: Ensures that transactions are securely and independently processed at the same time without interference.</li>
<li><strong>Durability</strong>: Ensures that once a transaction has been committed, it will remain so, even in the event of a system failure.</li>
</ul>
</div><h1>Basic Transaction Commands</h1>
<h2>Starting a Transaction</h2>
<div class='content'><p>To begin a transaction, you use the <code>BEGIN TRANSACTION</code> statement.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4gVFJBTlNBQ1RJT047"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN TRANSACTION;</pre></div><div class='content'></div><h2>Committing a Transaction</h2>
<div class='content'><p>To save the changes made during the transaction, you use the <code>COMMIT</code> statement.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q09NTUlUOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>COMMIT;</pre></div><div class='content'></div><h2>Rolling Back a Transaction</h2>
<div class='content'><p>To undo the changes made during the transaction, you use the <code>ROLLBACK</code> statement.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Uk9MTEJBQ0s7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ROLLBACK;</pre></div><div class='content'></div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4gVFJBTlNBQ1RJT047CgpVUERBVEUgYWNjb3VudHMKU0VUIGJhbGFuY2UgPSBiYWxhbmNlIC0gMTAwCldIRVJFIGFjY291bnRfaWQgPSAxOwoKVVBEQVRFIGFjY291bnRzClNFVCBiYWxhbmNlID0gYmFsYW5jZSArIDEwMApXSEVSRSBhY2NvdW50X2lkID0gMjsKCkNPTU1JVDs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN TRANSACTION;

UPDATE accounts
SET balance = balance - 100
WHERE account_id = 1;

UPDATE accounts
SET balance = balance + 100
WHERE account_id = 2;

COMMIT;</pre></div><div class='content'><p>In this example, money is transferred from one account to another. If any part of this transaction fails, the <code>ROLLBACK</code> command can be used to undo all changes.</p>
</div><h1>Advanced Transaction Management</h1>
<h2>Savepoints</h2>
<div class='content'><p>Savepoints allow you to set intermediate points within a transaction to which you can later roll back without affecting the entire transaction.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0FWRVBPSU5UIHNhdmVwb2ludF9uYW1lOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SAVEPOINT savepoint_name;</pre></div><div class='content'></div><h2>Rolling Back to a Savepoint</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Uk9MTEJBQ0sgVE8gc2F2ZXBvaW50X25hbWU7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ROLLBACK TO savepoint_name;</pre></div><div class='content'></div><h2>Releasing a Savepoint</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UkVMRUFTRSBTQVZFUE9JTlQgc2F2ZXBvaW50X25hbWU7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>RELEASE SAVEPOINT savepoint_name;</pre></div><div class='content'></div><h2>Example with Savepoints</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4gVFJBTlNBQ1RJT047CgpVUERBVEUgYWNjb3VudHMKU0VUIGJhbGFuY2UgPSBiYWxhbmNlIC0gMTAwCldIRVJFIGFjY291bnRfaWQgPSAxOwoKU0FWRVBPSU5UIHNwMTsKClVQREFURSBhY2NvdW50cwpTRVQgYmFsYW5jZSA9IGJhbGFuY2UgKyAxMDAKV0hFUkUgYWNjb3VudF9pZCA9IDI7CgotLSBTb21ldGhpbmcgZ29lcyB3cm9uZywgcm9sbGJhY2sgdG8gc2F2ZXBvaW50ClJPTExCQUNLIFRPIHNwMTsKCi0tIENvbnRpbnVlIHdpdGggb3RoZXIgb3BlcmF0aW9ucwpVUERBVEUgYWNjb3VudHMKU0VUIGJhbGFuY2UgPSBiYWxhbmNlICsgNTAKV0hFUkUgYWNjb3VudF9pZCA9IDM7CgpDT01NSVQ7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN TRANSACTION;

UPDATE accounts
SET balance = balance - 100
WHERE account_id = 1;

SAVEPOINT sp1;

UPDATE accounts
SET balance = balance + 100
WHERE account_id = 2;

-- Something goes wrong, rollback to savepoint
ROLLBACK TO sp1;

-- Continue with other operations
UPDATE accounts
SET balance = balance + 50
WHERE account_id = 3;

COMMIT;</pre></div><div class='content'><p>In this example, if the second update fails, the transaction rolls back to the savepoint <code>sp1</code>, and the subsequent operations can still proceed.</p>
</div><h1>Isolation Levels</h1>
<div class='content'><p>Isolation levels define the degree to which the operations in one transaction are isolated from those in other transactions. SQL standard defines four isolation levels:</p>
<p>| Isolation Level | Description |
|-----------------|-------------|
| Read Uncommitted | Allows dirty reads, where a transaction can read data modified by another uncommitted transaction. |
| Read Committed   | Prevents dirty reads, ensuring a transaction can only read committed data. |
| Repeatable Read  | Prevents dirty and non-repeatable reads, ensuring that if a transaction reads a row, it will read the same value if it reads it again. |
| Serializable     | The highest isolation level, ensuring complete isolation from other transactions, preventing dirty, non-repeatable reads, and phantom reads. |</p>
</div><h2>Setting Isolation Levels</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VUIFRSQU5TQUNUSU9OIElTT0xBVElPTiBMRVZFTCBSRUFEIENPTU1JVFRFRDs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SET TRANSACTION ISOLATION LEVEL READ COMMITTED;</pre></div><div class='content'></div><h2>Example with Isolation Levels</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VUIFRSQU5TQUNUSU9OIElTT0xBVElPTiBMRVZFTCBTRVJJQUxJWkFCTEU7CgpCRUdJTiBUUkFOU0FDVElPTjsKCi0tIE9wZXJhdGlvbnMgaGVyZQoKQ09NTUlUOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;

BEGIN TRANSACTION;

-- Operations here

COMMIT;</pre></div><div class='content'><p>In this example, the transaction is set to the highest isolation level, ensuring complete isolation from other transactions.</p>
</div><h1>Conclusion</h1>
<div class='content'><p>Transactions are essential for maintaining the integrity and consistency of data in SQL databases. By understanding and using transactions effectively, you can ensure that your database operations are reliable and secure. Key concepts such as atomicity, consistency, isolation, and durability (ACID) form the foundation of transaction management. Advanced features like savepoints and isolation levels provide additional control and flexibility, allowing for more sophisticated transaction handling.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='views'>&#x25C4;Views</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Transactions</a>
	</div>
	<div class='col-4 text-end'>
					<a href='error-handling'>Error Handling &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
