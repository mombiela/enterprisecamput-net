<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Introduction to Transactions</title>

    <link rel="alternate" href="https://campusempresa.com/mod/sql/09-01-introduction-transactions" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/sql/09-01-introduction-transactions" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/sql/09-01-introduction-transactions" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=3" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/sql/09-01-introduction-transactions" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/sql/09-01-introduction-transactions" class="px-2">CA</a>
</span>
			<span class="d-none d-md-inline"><br><cite>Building today's and tomorrow's society</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Languages</a>
				 					<a href="/categ/frameworks">Frameworks</a>
				 					<a href="/categ/tech-tools">Tools</a>
				 					<a href="/categ/foundations">Foundations</a>
				 					<a href="/categ/soft-skills">Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-04-analyzing-query-performance' title="Analyzing Query Performance">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Introduction to Transactions</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-02-acid-properties' title="ACID Properties">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore the concept of transactions in SQL, which is crucial for ensuring data integrity and consistency in database operations. Transactions allow you to group multiple SQL statements into a single unit of work, which can be committed or rolled back as a whole.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Transaction</strong>: A sequence of one or more SQL operations treated as a single unit.</li>
<li><strong>Commit</strong>: Finalizes the transaction, making all changes permanent.</li>
<li><strong>Rollback</strong>: Reverts all changes made during the transaction, restoring the database to its previous state.</li>
<li><strong>Atomicity</strong>: Ensures that all operations within a transaction are completed successfully. If any operation fails, the entire transaction is rolled back.</li>
<li><strong>Consistency</strong>: Ensures that a transaction brings the database from one valid state to another.</li>
<li><strong>Isolation</strong>: Ensures that transactions are executed in isolation from one another.</li>
<li><strong>Durability</strong>: Ensures that once a transaction is committed, the changes are permanent, even in the event of a system failure.</li>
</ol>
</div><h1><p>Basic Transaction Commands</p>
</h1>
<div class='content'></div><h2><p>Starting a Transaction</p>
</h2>
<div class='content'><p>To start a transaction, you use the <code>BEGIN TRANSACTION</code> or <code>START TRANSACTION</code> command.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4gVFJBTlNBQ1RJT047Ci0tIG9yClNUQVJUIFRSQU5TQUNUSU9OOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN TRANSACTION;
-- or
START TRANSACTION;</pre></div><div class='content'></div><h2><p>Committing a Transaction</p>
</h2>
<div class='content'><p>To commit a transaction, making all changes permanent, you use the <code>COMMIT</code> command.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q09NTUlUOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>COMMIT;</pre></div><div class='content'></div><h2><p>Rolling Back a Transaction</p>
</h2>
<div class='content'><p>To roll back a transaction, undoing all changes made during the transaction, you use the <code>ROLLBACK</code> command.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Uk9MTEJBQ0s7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ROLLBACK;</pre></div><div class='content'></div><h1><p>Practical Example</p>
</h1>
<div class='content'><p>Let's consider a scenario where you need to transfer money from one bank account to another. This operation involves two steps: debiting one account and crediting another. Both steps must succeed or fail together to maintain data integrity.</p>
</div><h2><p>Step-by-Step Example</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Start the Transaction</strong>:</p>
<pre><code class="language-sql">BEGIN TRANSACTION;
</code></pre>
</li>
<li>
<p><strong>Debit the Source Account</strong>:</p>
<pre><code class="language-sql">UPDATE accounts
SET balance = balance - 100
WHERE account_id = 1;
</code></pre>
</li>
<li>
<p><strong>Credit the Destination Account</strong>:</p>
<pre><code class="language-sql">UPDATE accounts
SET balance = balance + 100
WHERE account_id = 2;
</code></pre>
</li>
<li>
<p><strong>Commit the Transaction</strong>:</p>
<pre><code class="language-sql">COMMIT;
</code></pre>
</li>
</ol>
<p>If any of the steps fail, you can roll back the transaction to ensure that no partial updates are made.</p>
</div><h2><p>Handling Errors</p>
</h2>
<div class='content'><p>To handle errors, you can use a conditional structure to roll back the transaction if any operation fails.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4gVFJBTlNBQ1RJT047CgpVUERBVEUgYWNjb3VudHMKU0VUIGJhbGFuY2UgPSBiYWxhbmNlIC0gMTAwCldIRVJFIGFjY291bnRfaWQgPSAxOwoKSUYgQEBFUlJPUiA8PiAwCkJFR0lOCiAgICBST0xMQkFDSzsKICAgIFJFVFVSTjsKRU5ECgpVUERBVEUgYWNjb3VudHMKU0VUIGJhbGFuY2UgPSBiYWxhbmNlICsgMTAwCldIRVJFIGFjY291bnRfaWQgPSAyOwoKSUYgQEBFUlJPUiA8PiAwCkJFR0lOCiAgICBST0xMQkFDSzsKICAgIFJFVFVSTjsKRU5ECgpDT01NSVQ7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN TRANSACTION;

UPDATE accounts
SET balance = balance - 100
WHERE account_id = 1;

IF @@ERROR &lt;&gt; 0
BEGIN
    ROLLBACK;
    RETURN;
END

UPDATE accounts
SET balance = balance + 100
WHERE account_id = 2;

IF @@ERROR &lt;&gt; 0
BEGIN
    ROLLBACK;
    RETURN;
END

COMMIT;</pre></div><div class='content'></div><h1><p>Exercise</p>
</h1>
<div class='content'></div><h2><p>Task</p>
</h2>
<div class='content'><p>Write a transaction that performs the following operations:</p>
<ol>
<li>Insert a new record into the <code>employees</code> table.</li>
<li>Update the <code>departments</code> table to increase the employee count for the relevant department.</li>
<li>If any operation fails, roll back the transaction.</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4gVFJBTlNBQ1RJT047CgotLSBJbnNlcnQgYSBuZXcgZW1wbG95ZWUKSU5TRVJUIElOVE8gZW1wbG95ZWVzIChlbXBsb3llZV9pZCwgbmFtZSwgZGVwYXJ0bWVudF9pZCwgc2FsYXJ5KQpWQUxVRVMgKDEwMSwgJ0pvaG4gRG9lJywgMywgNjAwMDApOwoKLS0gQ2hlY2sgZm9yIGVycm9ycwpJRiBAQEVSUk9SIDw+IDAKQkVHSU4KICAgIFJPTExCQUNLOwogICAgUkVUVVJOOwpFTkQKCi0tIFVwZGF0ZSB0aGUgZGVwYXJ0bWVudCdzIGVtcGxveWVlIGNvdW50ClVQREFURSBkZXBhcnRtZW50cwpTRVQgZW1wbG95ZWVfY291bnQgPSBlbXBsb3llZV9jb3VudCArIDEKV0hFUkUgZGVwYXJ0bWVudF9pZCA9IDM7CgotLSBDaGVjayBmb3IgZXJyb3JzCklGIEBARVJST1IgPD4gMApCRUdJTgogICAgUk9MTEJBQ0s7CiAgICBSRVRVUk47CkVORAoKLS0gQ29tbWl0IHRoZSB0cmFuc2FjdGlvbgpDT01NSVQ7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN TRANSACTION;

-- Insert a new employee
INSERT INTO employees (employee_id, name, department_id, salary)
VALUES (101, 'John Doe', 3, 60000);

-- Check for errors
IF @@ERROR &lt;&gt; 0
BEGIN
    ROLLBACK;
    RETURN;
END

-- Update the department's employee count
UPDATE departments
SET employee_count = employee_count + 1
WHERE department_id = 3;

-- Check for errors
IF @@ERROR &lt;&gt; 0
BEGIN
    ROLLBACK;
    RETURN;
END

-- Commit the transaction
COMMIT;</pre></div><div class='content'></div><h1><p>Summary</p>
</h1>
<div class='content'><p>In this section, we covered the basics of transactions in SQL, including how to start, commit, and roll back transactions. We also discussed the importance of transactions in maintaining data integrity and consistency. By using transactions, you can ensure that a series of operations are executed as a single unit, providing a robust mechanism for error handling and data management.</p>
<p>Next, we will delve into the ACID properties that underpin the reliability of transactions in SQL.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-04-analyzing-query-performance' title="Analyzing Query Performance">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-02-acid-properties' title="ACID Properties">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Advertising</h1>
<p>This space is reserved for advertising.</p>
<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Thank you for collaborating!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
