<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File I/O</title>

    <link rel="alternate" href="https://campusempresa.com/mod/prolog/05-01-file-io" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/prolog/05-01-file-io" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/prolog/05-01-file-io" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=2" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/prolog/05-01-file-io" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/prolog/05-01-file-io" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Programming Languages</a>
				 					<a href="/categ/frameworks">Frameworks and Libraries</a>
				 					<a href="/categ/tech-tools">Technical Tools</a>
				 					<a href="/categ/foundations">Theoretical Foundations</a>
				 					<a href="/categ/soft-skills">Social Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-05-constraint-logic-programming' title="Constraint Logic Programming">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">File I/O</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-02-debugging-prolog-programs' title="Debugging Prolog Programs">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to handle file input and output (I/O) in Prolog. File I/O is essential for reading data from files and writing data to files, which is a common requirement in many applications.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Opening and Closing Files</strong>: Learn how to open and close files in Prolog.</li>
<li><strong>Reading from Files</strong>: Understand how to read data from files.</li>
<li><strong>Writing to Files</strong>: Learn how to write data to files.</li>
<li><strong>File Modes</strong>: Different modes for opening files (read, write, append).</li>
<li><strong>Error Handling</strong>: Handling errors that may occur during file operations.</li>
</ol>
</div><h1><p>Opening and Closing Files</p>
</h1>
<div class='content'><p>To perform file operations, you need to open the file first. Prolog provides the <code>open/3</code> predicate for this purpose.</p>
</div><h2><p>Syntax</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3BlbihGaWxlTmFtZSwgTW9kZSwgU3RyZWFtKS4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>open(FileName, Mode, Stream).</pre></div><div class='content'><ul>
<li><code>FileName</code>: The name of the file you want to open.</li>
<li><code>Mode</code>: The mode in which you want to open the file (<code>read</code>, <code>write</code>, or <code>append</code>).</li>
<li><code>Stream</code>: A variable that will be bound to the file stream.</li>
</ul>
</div><h2><p>Example</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JSBPcGVuIGEgZmlsZSBmb3IgcmVhZGluZwpvcGVuKCdleGFtcGxlLnR4dCcsIHJlYWQsIFN0cmVhbSksCiUgUGVyZm9ybSBmaWxlIG9wZXJhdGlvbnMgaGVyZQpjbG9zZShTdHJlYW0pLg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>% Open a file for reading
open('example.txt', read, Stream),
% Perform file operations here
close(Stream).</pre></div><div class='content'></div><h2><p>Closing Files</p>
</h2>
<div class='content'><p>Always close the file after performing the necessary operations using the <code>close/1</code> predicate.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xvc2UoU3RyZWFtKS4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>close(Stream).</pre></div><div class='content'></div><h1><p>Reading from Files</p>
</h1>
<div class='content'><p>Prolog provides several predicates to read data from files. The most commonly used are <code>read/2</code> and <code>read_line_to_string/2</code>.</p>
</div><h2><p>Reading Terms</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JSBPcGVuIHRoZSBmaWxlCm9wZW4oJ2V4YW1wbGUudHh0JywgcmVhZCwgU3RyZWFtKSwKJSBSZWFkIGEgdGVybSBmcm9tIHRoZSBmaWxlCnJlYWQoU3RyZWFtLCBUZXJtKSwKJSBDbG9zZSB0aGUgZmlsZQpjbG9zZShTdHJlYW0pLg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>% Open the file
open('example.txt', read, Stream),
% Read a term from the file
read(Stream, Term),
% Close the file
close(Stream).</pre></div><div class='content'></div><h2><p>Reading Lines</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JSBPcGVuIHRoZSBmaWxlCm9wZW4oJ2V4YW1wbGUudHh0JywgcmVhZCwgU3RyZWFtKSwKJSBSZWFkIGEgbGluZSBmcm9tIHRoZSBmaWxlCnJlYWRfbGluZV90b19zdHJpbmcoU3RyZWFtLCBMaW5lKSwKJSBDbG9zZSB0aGUgZmlsZQpjbG9zZShTdHJlYW0pLg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>% Open the file
open('example.txt', read, Stream),
% Read a line from the file
read_line_to_string(Stream, Line),
% Close the file
close(Stream).</pre></div><div class='content'></div><h2><p>Example</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JSBPcGVuIHRoZSBmaWxlIGZvciByZWFkaW5nCm9wZW4oJ2V4YW1wbGUudHh0JywgcmVhZCwgU3RyZWFtKSwKJSBSZWFkIGFuZCBwcmludCBlYWNoIGxpbmUKcmVwZWF0LAogICAgcmVhZF9saW5lX3RvX3N0cmluZyhTdHJlYW0sIExpbmUpLAogICAgKCBMaW5lID09IGVuZF9vZl9maWxlIC0+ICEsIGNsb3NlKFN0cmVhbSkgOyB3cml0ZWxuKExpbmUpLCBmYWlsICku"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>% Open the file for reading
open('example.txt', read, Stream),
% Read and print each line
repeat,
    read_line_to_string(Stream, Line),
    ( Line == end_of_file -&gt; !, close(Stream) ; writeln(Line), fail ).</pre></div><div class='content'></div><h1><p>Writing to Files</p>
</h1>
<div class='content'><p>To write data to a file, you can use the <code>write/2</code> and <code>writeln/2</code> predicates.</p>
</div><h2><p>Example</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JSBPcGVuIHRoZSBmaWxlIGZvciB3cml0aW5nCm9wZW4oJ291dHB1dC50eHQnLCB3cml0ZSwgU3RyZWFtKSwKJSBXcml0ZSBkYXRhIHRvIHRoZSBmaWxlCndyaXRlKFN0cmVhbSwgJ0hlbGxvLCBQcm9sb2chJyksCm5sKFN0cmVhbSksICUgTmV3IGxpbmUKd3JpdGVsbihTdHJlYW0sICdUaGlzIGlzIGEgbmV3IGxpbmUuJyksCiUgQ2xvc2UgdGhlIGZpbGUKY2xvc2UoU3RyZWFtKS4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>% Open the file for writing
open('output.txt', write, Stream),
% Write data to the file
write(Stream, 'Hello, Prolog!'),
nl(Stream), % New line
writeln(Stream, 'This is a new line.'),
% Close the file
close(Stream).</pre></div><div class='content'></div><h1><p>File Modes</p>
</h1>
<div class='content'><ul>
<li><strong>read</strong>: Open the file for reading.</li>
<li><strong>write</strong>: Open the file for writing. If the file exists, it will be overwritten.</li>
<li><strong>append</strong>: Open the file for appending. Data will be added to the end of the file.</li>
</ul>
</div><h2><p>Example</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JSBPcGVuIHRoZSBmaWxlIGZvciBhcHBlbmRpbmcKb3Blbignb3V0cHV0LnR4dCcsIGFwcGVuZCwgU3RyZWFtKSwKJSBBcHBlbmQgZGF0YSB0byB0aGUgZmlsZQp3cml0ZWxuKFN0cmVhbSwgJ0FwcGVuZGluZyB0aGlzIGxpbmUuJyksCiUgQ2xvc2UgdGhlIGZpbGUKY2xvc2UoU3RyZWFtKS4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>% Open the file for appending
open('output.txt', append, Stream),
% Append data to the file
writeln(Stream, 'Appending this line.'),
% Close the file
close(Stream).</pre></div><div class='content'></div><h1><p>Error Handling</p>
</h1>
<div class='content'><p>It's important to handle errors that may occur during file operations. Prolog provides the <code>catch/3</code> predicate for this purpose.</p>
</div><h2><p>Example</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JSBBdHRlbXB0IHRvIG9wZW4gYSBub24tZXhpc3RlbnQgZmlsZQpjYXRjaCgKICAgICggb3Blbignbm9uX2V4aXN0ZW50LnR4dCcsIHJlYWQsIFN0cmVhbSksIGNsb3NlKFN0cmVhbSkgKSwKICAgIGVycm9yKGV4aXN0ZW5jZV9lcnJvcihzb3VyY2Vfc2luaywgJ25vbl9leGlzdGVudC50eHQnKSwgXyksCiAgICB3cml0ZWxuKCdGaWxlIGRvZXMgbm90IGV4aXN0LicpCiku"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>% Attempt to open a non-existent file
catch(
    ( open('non_existent.txt', read, Stream), close(Stream) ),
    error(existence_error(source_sink, 'non_existent.txt'), _),
    writeln('File does not exist.')
).</pre></div><div class='content'></div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Task</p>
</h2>
<div class='content'><p>Write a Prolog program that reads a list of numbers from a file, calculates their sum, and writes the result to another file.</p>
</div><h2><p>Solution</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JSBzdW1fZmlsZV9udW1iZXJzLnBsCgolIFJlYWQgbnVtYmVycyBmcm9tIGEgZmlsZSBhbmQgY2FsY3VsYXRlIHRoZWlyIHN1bQpzdW1fZmlsZV9udW1iZXJzKElucHV0RmlsZSwgT3V0cHV0RmlsZSkgOi0KICAgIG9wZW4oSW5wdXRGaWxlLCByZWFkLCBJblN0cmVhbSksCiAgICByZWFkX251bWJlcnMoSW5TdHJlYW0sIE51bWJlcnMpLAogICAgY2xvc2UoSW5TdHJlYW0pLAogICAgc3VtX2xpc3QoTnVtYmVycywgU3VtKSwKICAgIG9wZW4oT3V0cHV0RmlsZSwgd3JpdGUsIE91dFN0cmVhbSksCiAgICB3cml0ZWxuKE91dFN0cmVhbSwgU3VtKSwKICAgIGNsb3NlKE91dFN0cmVhbSkuCgolIFJlYWQgYWxsIG51bWJlcnMgZnJvbSB0aGUgaW5wdXQgc3RyZWFtCnJlYWRfbnVtYmVycyhTdHJlYW0sIE51bWJlcnMpIDotCiAgICByZWFkX2xpbmVfdG9fc3RyaW5nKFN0cmVhbSwgTGluZSksCiAgICAoIExpbmUgPT0gZW5kX29mX2ZpbGUgLT4gTnVtYmVycyA9IFtdIDsKICAgICAgbnVtYmVyX3N0cmluZyhOdW1iZXIsIExpbmUpLAogICAgICByZWFkX251bWJlcnMoU3RyZWFtLCBSZXN0TnVtYmVycyksCiAgICAgIE51bWJlcnMgPSBbTnVtYmVyIHwgUmVzdE51bWJlcnNdCiAgICApLgoKJSBDYWxjdWxhdGUgdGhlIHN1bSBvZiBhIGxpc3Qgb2YgbnVtYmVycwpzdW1fbGlzdChbXSwgMCkuCnN1bV9saXN0KFtIfFRdLCBTdW0pIDotCiAgICBzdW1fbGlzdChULCBSZXN0U3VtKSwKICAgIFN1bSBpcyBIICsgUmVzdFN1bS4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>% sum_file_numbers.pl

% Read numbers from a file and calculate their sum
sum_file_numbers(InputFile, OutputFile) :-
    open(InputFile, read, InStream),
    read_numbers(InStream, Numbers),
    close(InStream),
    sum_list(Numbers, Sum),
    open(OutputFile, write, OutStream),
    writeln(OutStream, Sum),
    close(OutStream).

% Read all numbers from the input stream
read_numbers(Stream, Numbers) :-
    read_line_to_string(Stream, Line),
    ( Line == end_of_file -&gt; Numbers = [] ;
      number_string(Number, Line),
      read_numbers(Stream, RestNumbers),
      Numbers = [Number | RestNumbers]
    ).

% Calculate the sum of a list of numbers
sum_list([], 0).
sum_list([H|T], Sum) :-
    sum_list(T, RestSum),
    Sum is H + RestSum.</pre></div><div class='content'></div><h2><p>Usage</p>
</h2>
<div class='content'><ol>
<li>
<p>Create a file named <code>numbers.txt</code> with the following content:</p>
<pre><code>1
2
3
4
5
</code></pre>
</li>
<li>
<p>Run the Prolog program:</p>
<pre><code class="language-prolog">?- sum_file_numbers('numbers.txt', 'sum.txt').
</code></pre>
</li>
<li>
<p>Check the <code>sum.txt</code> file for the result.</p>
</li>
</ol>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the basics of file I/O in Prolog, including opening and closing files, reading from files, writing to files, and handling errors. These skills are essential for working with external data in Prolog applications. In the next section, we will explore debugging techniques for Prolog programs.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-05-constraint-logic-programming' title="Constraint Logic Programming">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-02-debugging-prolog-programs' title="Debugging Prolog Programs">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Advertising</h1>
<p>This space is reserved for advertising.</p>
<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Thank you for collaborating!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
