<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amazon SQS</title>

    <link rel="alternate" href="https://campusempresa.com/mod/aws/07-01-sqs" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/aws/07-01-sqs" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/aws/07-01-sqs" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/aws/07-01-sqs" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/aws/07-01-sqs" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-04-elasticache' title="Amazon ElastiCache">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Amazon SQS</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-02-sns' title="Amazon SNS">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introduction to Amazon SQS</p>
</h1>
<div class='content'><p>Amazon Simple Queue Service (SQS) is a fully managed message queuing service that enables you to decouple and scale microservices, distributed systems, and serverless applications. SQS eliminates the complexity and overhead associated with managing and operating message-oriented middleware, and empowers developers to focus on differentiating work.</p>
</div><h2><p>Key Concepts</p>
</h2>
<div class='content'><ol>
<li><strong>Queue</strong>: A temporary repository for messages that are awaiting processing.</li>
<li><strong>Message</strong>: Data that is sent between applications or microservices.</li>
<li><strong>Producer</strong>: The component that sends messages to the queue.</li>
<li><strong>Consumer</strong>: The component that retrieves and processes messages from the queue.</li>
<li><strong>Visibility Timeout</strong>: The period of time during which a message is invisible to other consumers after a consumer retrieves it.</li>
<li><strong>Dead-Letter Queue (DLQ)</strong>: A queue that stores messages that could not be processed successfully.</li>
</ol>
</div><h2><p>Types of Queues</p>
</h2>
<div class='content'><ul>
<li><strong>Standard Queue</strong>: Offers maximum throughput, best-effort ordering, and at-least-once delivery.</li>
<li><strong>FIFO Queue</strong>: Ensures that messages are processed exactly once, in the exact order that they are sent.</li>
</ul>
</div><h1><p>Setting Up Amazon SQS</p>
</h1>
<div class='content'></div><h2><p>Step-by-Step Guide</p>
</h2>
<div class='content'><ol>
<li><strong>Sign in to the AWS Management Console</strong>.</li>
<li><strong>Navigate to the SQS Dashboard</strong>:
<ul>
<li>Go to the Services menu and select SQS under the Messaging section.</li>
</ul>
</li>
<li><strong>Create a New Queue</strong>:
<ul>
<li>Click on &quot;Create queue&quot;.</li>
<li>Choose the type of queue (Standard or FIFO).</li>
<li>Enter a name for your queue.</li>
<li>Configure additional settings such as visibility timeout, message retention period, and dead-letter queue.</li>
<li>Click &quot;Create Queue&quot;.</li>
</ul>
</li>
</ol>
</div><h2><p>Example: Creating a Standard Queue</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGJvdG8zCgojIENyZWF0ZSBTUVMgY2xpZW50CnNxcyA9IGJvdG8zLmNsaWVudCgnc3FzJykKCiMgQ3JlYXRlIGEgc3RhbmRhcmQgcXVldWUKcmVzcG9uc2UgPSBzcXMuY3JlYXRlX3F1ZXVlKAogICAgUXVldWVOYW1lPSdNeVN0YW5kYXJkUXVldWUnLAogICAgQXR0cmlidXRlcz17CiAgICAgICAgJ0RlbGF5U2Vjb25kcyc6ICc1JywKICAgICAgICAnTWVzc2FnZVJldGVudGlvblBlcmlvZCc6ICc4NjQwMCcKICAgIH0KKQoKcHJpbnQocmVzcG9uc2VbJ1F1ZXVlVXJsJ10p"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import boto3

# Create SQS client
sqs = boto3.client('sqs')

# Create a standard queue
response = sqs.create_queue(
    QueueName='MyStandardQueue',
    Attributes={
        'DelaySeconds': '5',
        'MessageRetentionPeriod': '86400'
    }
)

print(response['QueueUrl'])</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>boto3.client('sqs')</strong>: Initializes the SQS client.</li>
<li><strong>create_queue</strong>: Creates a new queue with specified attributes.</li>
<li><strong>QueueName</strong>: The name of the queue.</li>
<li><strong>Attributes</strong>: Additional settings for the queue, such as delay seconds and message retention period.</li>
</ul>
</div><h1><p>Sending and Receiving Messages</p>
</h1>
<div class='content'></div><h2><p>Sending a Message</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGJvdG8zCgojIENyZWF0ZSBTUVMgY2xpZW50CnNxcyA9IGJvdG8zLmNsaWVudCgnc3FzJykKCnF1ZXVlX3VybCA9ICdodHRwczovL3Nxcy51cy1lYXN0LTEuYW1hem9uYXdzLmNvbS8xMjM0NTY3ODkwMTIvTXlTdGFuZGFyZFF1ZXVlJwoKIyBTZW5kIG1lc3NhZ2UgdG8gU1FTIHF1ZXVlCnJlc3BvbnNlID0gc3FzLnNlbmRfbWVzc2FnZSgKICAgIFF1ZXVlVXJsPXF1ZXVlX3VybCwKICAgIERlbGF5U2Vjb25kcz0xMCwKICAgIE1lc3NhZ2VBdHRyaWJ1dGVzPXsKICAgICAgICAnVGl0bGUnOiB7CiAgICAgICAgICAgICdEYXRhVHlwZSc6ICdTdHJpbmcnLAogICAgICAgICAgICAnU3RyaW5nVmFsdWUnOiAnVGhlIFdoaXN0bGVyJwogICAgICAgIH0sCiAgICAgICAgJ0F1dGhvcic6IHsKICAgICAgICAgICAgJ0RhdGFUeXBlJzogJ1N0cmluZycsCiAgICAgICAgICAgICdTdHJpbmdWYWx1ZSc6ICdKb2huIEdyaXNoYW0nCiAgICAgICAgfSwKICAgICAgICAnV2Vla3NPbic6IHsKICAgICAgICAgICAgJ0RhdGFUeXBlJzogJ051bWJlcicsCiAgICAgICAgICAgICdTdHJpbmdWYWx1ZSc6ICc2JwogICAgICAgIH0KICAgIH0sCiAgICBNZXNzYWdlQm9keT0oCiAgICAgICAgJ0luZm9ybWF0aW9uIGFib3V0IGN1cnJlbnQgTlkgVGltZXMgZmljdGlvbiBiZXN0c2VsbGVyIGZvciAnCiAgICAgICAgJ3dlZWsgb2YgMTIvMTEvMjAxNi4nCiAgICApCikKCnByaW50KCdNZXNzYWdlSWQ6JywgcmVzcG9uc2VbJ01lc3NhZ2VJZCddKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import boto3

# Create SQS client
sqs = boto3.client('sqs')

queue_url = 'https://sqs.us-east-1.amazonaws.com/123456789012/MyStandardQueue'

# Send message to SQS queue
response = sqs.send_message(
    QueueUrl=queue_url,
    DelaySeconds=10,
    MessageAttributes={
        'Title': {
            'DataType': 'String',
            'StringValue': 'The Whistler'
        },
        'Author': {
            'DataType': 'String',
            'StringValue': 'John Grisham'
        },
        'WeeksOn': {
            'DataType': 'Number',
            'StringValue': '6'
        }
    },
    MessageBody=(
        'Information about current NY Times fiction bestseller for '
        'week of 12/11/2016.'
    )
)

print('MessageId:', response['MessageId'])</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>send_message</strong>: Sends a message to the specified queue.</li>
<li><strong>QueueUrl</strong>: The URL of the queue.</li>
<li><strong>DelaySeconds</strong>: The delay in seconds before the message is available for processing.</li>
<li><strong>MessageAttributes</strong>: Custom attributes for the message.</li>
<li><strong>MessageBody</strong>: The content of the message.</li>
</ul>
</div><h2><p>Receiving a Message</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGJvdG8zCgojIENyZWF0ZSBTUVMgY2xpZW50CnNxcyA9IGJvdG8zLmNsaWVudCgnc3FzJykKCnF1ZXVlX3VybCA9ICdodHRwczovL3Nxcy51cy1lYXN0LTEuYW1hem9uYXdzLmNvbS8xMjM0NTY3ODkwMTIvTXlTdGFuZGFyZFF1ZXVlJwoKIyBSZWNlaXZlIG1lc3NhZ2UgZnJvbSBTUVMgcXVldWUKcmVzcG9uc2UgPSBzcXMucmVjZWl2ZV9tZXNzYWdlKAogICAgUXVldWVVcmw9cXVldWVfdXJsLAogICAgQXR0cmlidXRlTmFtZXM9WwogICAgICAgICdBbGwnCiAgICBdLAogICAgTWF4TnVtYmVyT2ZNZXNzYWdlcz0xLAogICAgTWVzc2FnZUF0dHJpYnV0ZU5hbWVzPVsKICAgICAgICAnQWxsJwogICAgXSwKICAgIFZpc2liaWxpdHlUaW1lb3V0PTAsCiAgICBXYWl0VGltZVNlY29uZHM9MAopCgptZXNzYWdlID0gcmVzcG9uc2VbJ01lc3NhZ2VzJ11bMF0KcmVjZWlwdF9oYW5kbGUgPSBtZXNzYWdlWydSZWNlaXB0SGFuZGxlJ10KCnByaW50KCdSZWNlaXZlZCBtZXNzYWdlOiAlcycgJSBtZXNzYWdlKQoKIyBEZWxldGUgcmVjZWl2ZWQgbWVzc2FnZSBmcm9tIHF1ZXVlCnNxcy5kZWxldGVfbWVzc2FnZSgKICAgIFF1ZXVlVXJsPXF1ZXVlX3VybCwKICAgIFJlY2VpcHRIYW5kbGU9cmVjZWlwdF9oYW5kbGUKKQoKcHJpbnQoJ01lc3NhZ2UgZGVsZXRlZCcp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import boto3

# Create SQS client
sqs = boto3.client('sqs')

queue_url = 'https://sqs.us-east-1.amazonaws.com/123456789012/MyStandardQueue'

# Receive message from SQS queue
response = sqs.receive_message(
    QueueUrl=queue_url,
    AttributeNames=[
        'All'
    ],
    MaxNumberOfMessages=1,
    MessageAttributeNames=[
        'All'
    ],
    VisibilityTimeout=0,
    WaitTimeSeconds=0
)

message = response['Messages'][0]
receipt_handle = message['ReceiptHandle']

print('Received message: %s' % message)

# Delete received message from queue
sqs.delete_message(
    QueueUrl=queue_url,
    ReceiptHandle=receipt_handle
)

print('Message deleted')</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>receive_message</strong>: Retrieves one or more messages from the specified queue.</li>
<li><strong>AttributeNames</strong>: A list of attributes to retrieve.</li>
<li><strong>MaxNumberOfMessages</strong>: The maximum number of messages to retrieve.</li>
<li><strong>VisibilityTimeout</strong>: The duration (in seconds) that the received messages are hidden from subsequent retrieve requests.</li>
<li><strong>WaitTimeSeconds</strong>: The duration (in seconds) for which the call waits for a message to arrive in the queue before returning.</li>
<li><strong>delete_message</strong>: Deletes the specified message from the queue.</li>
</ul>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Task</p>
</h2>
<div class='content'><ol>
<li>Create a new SQS queue named <code>MyTestQueue</code>.</li>
<li>Send a message to <code>MyTestQueue</code> with the body &quot;Hello, SQS!&quot;.</li>
<li>Receive the message from <code>MyTestQueue</code> and print its content.</li>
<li>Delete the message from <code>MyTestQueue</code>.</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGJvdG8zCgojIENyZWF0ZSBTUVMgY2xpZW50CnNxcyA9IGJvdG8zLmNsaWVudCgnc3FzJykKCiMgU3RlcCAxOiBDcmVhdGUgYSBuZXcgU1FTIHF1ZXVlCnJlc3BvbnNlID0gc3FzLmNyZWF0ZV9xdWV1ZSgKICAgIFF1ZXVlTmFtZT0nTXlUZXN0UXVldWUnLAogICAgQXR0cmlidXRlcz17CiAgICAgICAgJ0RlbGF5U2Vjb25kcyc6ICcwJywKICAgICAgICAnTWVzc2FnZVJldGVudGlvblBlcmlvZCc6ICc4NjQwMCcKICAgIH0KKQpxdWV1ZV91cmwgPSByZXNwb25zZVsnUXVldWVVcmwnXQpwcmludCgnUXVldWUgY3JlYXRlZDonLCBxdWV1ZV91cmwpCgojIFN0ZXAgMjogU2VuZCBhIG1lc3NhZ2UgdG8gdGhlIHF1ZXVlCnJlc3BvbnNlID0gc3FzLnNlbmRfbWVzc2FnZSgKICAgIFF1ZXVlVXJsPXF1ZXVlX3VybCwKICAgIE1lc3NhZ2VCb2R5PSdIZWxsbywgU1FTIScKKQpwcmludCgnTWVzc2FnZSBzZW50IHdpdGggSUQ6JywgcmVzcG9uc2VbJ01lc3NhZ2VJZCddKQoKIyBTdGVwIDM6IFJlY2VpdmUgdGhlIG1lc3NhZ2UgZnJvbSB0aGUgcXVldWUKcmVzcG9uc2UgPSBzcXMucmVjZWl2ZV9tZXNzYWdlKAogICAgUXVldWVVcmw9cXVldWVfdXJsLAogICAgTWF4TnVtYmVyT2ZNZXNzYWdlcz0xLAogICAgVmlzaWJpbGl0eVRpbWVvdXQ9MCwKICAgIFdhaXRUaW1lU2Vjb25kcz0wCikKbWVzc2FnZSA9IHJlc3BvbnNlWydNZXNzYWdlcyddWzBdCnByaW50KCdSZWNlaXZlZCBtZXNzYWdlOicsIG1lc3NhZ2VbJ0JvZHknXSkKCiMgU3RlcCA0OiBEZWxldGUgdGhlIG1lc3NhZ2UgZnJvbSB0aGUgcXVldWUKcmVjZWlwdF9oYW5kbGUgPSBtZXNzYWdlWydSZWNlaXB0SGFuZGxlJ10Kc3FzLmRlbGV0ZV9tZXNzYWdlKAogICAgUXVldWVVcmw9cXVldWVfdXJsLAogICAgUmVjZWlwdEhhbmRsZT1yZWNlaXB0X2hhbmRsZQopCnByaW50KCdNZXNzYWdlIGRlbGV0ZWQnKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import boto3

# Create SQS client
sqs = boto3.client('sqs')

# Step 1: Create a new SQS queue
response = sqs.create_queue(
    QueueName='MyTestQueue',
    Attributes={
        'DelaySeconds': '0',
        'MessageRetentionPeriod': '86400'
    }
)
queue_url = response['QueueUrl']
print('Queue created:', queue_url)

# Step 2: Send a message to the queue
response = sqs.send_message(
    QueueUrl=queue_url,
    MessageBody='Hello, SQS!'
)
print('Message sent with ID:', response['MessageId'])

# Step 3: Receive the message from the queue
response = sqs.receive_message(
    QueueUrl=queue_url,
    MaxNumberOfMessages=1,
    VisibilityTimeout=0,
    WaitTimeSeconds=0
)
message = response['Messages'][0]
print('Received message:', message['Body'])

# Step 4: Delete the message from the queue
receipt_handle = message['ReceiptHandle']
sqs.delete_message(
    QueueUrl=queue_url,
    ReceiptHandle=receipt_handle
)
print('Message deleted')</pre></div><div class='content'></div><h2><p>Common Mistakes and Tips</p>
</h2>
<div class='content'><ul>
<li><strong>Visibility Timeout</strong>: Ensure that the visibility timeout is set appropriately to avoid other consumers processing the same message.</li>
<li><strong>Message Retention</strong>: Configure the message retention period based on your application's requirements.</li>
<li><strong>Error Handling</strong>: Implement error handling to manage scenarios where messages cannot be processed successfully.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, you learned about Amazon SQS, its key concepts, and how to set up and use SQS for message queuing. You also practiced creating a queue, sending and receiving messages, and deleting messages. Understanding SQS is crucial for building scalable and decoupled applications on AWS. In the next section, we will explore Amazon SNS, another powerful messaging service provided by AWS.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-04-elasticache' title="Amazon ElastiCache">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-02-sns' title="Amazon SNS">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
