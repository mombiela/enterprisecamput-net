<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS CodeDeploy</title>

    <link rel="alternate" href="https://campusempresa.com/mod/aws/08-03-codedeploy" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/aws/08-03-codedeploy" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/aws/08-03-codedeploy" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/aws/08-03-codedeploy" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/aws/08-03-codedeploy" class="px-2">CA</a>
					</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-02-codebuild' title="AWS CodeBuild">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">AWS CodeDeploy</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-04-codepipeline' title="AWS CodePipeline">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introduction</p>
</h1>
<div class='content'><p>AWS CodeDeploy is a fully managed deployment service that automates software deployments to a variety of compute services such as Amazon EC2, AWS Fargate, AWS Lambda, and on-premises servers. CodeDeploy makes it easier to rapidly release new features, helps avoid downtime during application deployment, and handles the complexity of updating your applications.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Deployment Types</strong>:</p>
<ul>
<li><strong>In-place Deployment</strong>: Updates the application on the same set of instances.</li>
<li><strong>Blue/Green Deployment</strong>: Deploys the new version on a separate set of instances and then switches traffic to the new instances.</li>
</ul>
</li>
<li>
<p><strong>Deployment Configurations</strong>:</p>
<ul>
<li><strong>OneAtATime</strong>: Deploys the application to one instance at a time.</li>
<li><strong>HalfAtATime</strong>: Deploys the application to half of the instances at a time.</li>
<li><strong>AllAtOnce</strong>: Deploys the application to all instances simultaneously.</li>
</ul>
</li>
<li>
<p><strong>Application Specification File (AppSpec File)</strong>:</p>
<ul>
<li>Defines the deployment actions.</li>
<li>Contains hooks for lifecycle events.</li>
</ul>
</li>
<li>
<p><strong>Lifecycle Events</strong>:</p>
<ul>
<li><strong>BeforeInstall</strong>: Tasks to be performed before the application revision is installed.</li>
<li><strong>AfterInstall</strong>: Tasks to be performed after the application revision is installed.</li>
<li><strong>ApplicationStart</strong>: Tasks to be performed after the application revision is started.</li>
<li><strong>ValidateService</strong>: Tasks to be performed to validate the service is running correctly.</li>
</ul>
</li>
</ol>
</div><h1><p>Setting Up AWS CodeDeploy</p>
</h1>
<div class='content'></div><h2><p>Step 1: Create an Application</p>
</h2>
<div class='content'><ol>
<li>Open the AWS Management Console.</li>
<li>Navigate to the CodeDeploy service.</li>
<li>Click on &quot;Create application&quot;.</li>
<li>Enter a name for your application.</li>
<li>Choose the compute platform (EC2/On-premises, AWS Lambda, or Amazon ECS).</li>
<li>Click &quot;Create application&quot;.</li>
</ol>
</div><h2><p>Step 2: Create a Deployment Group</p>
</h2>
<div class='content'><ol>
<li>In the CodeDeploy console, select your application.</li>
<li>Click on &quot;Create deployment group&quot;.</li>
<li>Enter a name for the deployment group.</li>
<li>Choose a service role that grants CodeDeploy permissions to access your resources.</li>
<li>Select the deployment type (In-place or Blue/Green).</li>
<li>Configure the deployment settings (e.g., load balancer, deployment configuration).</li>
<li>Click &quot;Create deployment group&quot;.</li>
</ol>
</div><h2><p>Step 3: Create an AppSpec File</p>
</h2>
<div class='content'><p>The AppSpec file is a YAML or JSON file that defines the deployment actions. Below is an example of a YAML AppSpec file for an EC2/On-premises deployment:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmVyc2lvbjogMC4wCm9zOiBsaW51eApmaWxlczoKICAtIHNvdXJjZTogL3NyYwogICAgZGVzdGluYXRpb246IC92YXIvd3d3L2h0bWwKaG9va3M6CiAgQmVmb3JlSW5zdGFsbDoKICAgIC0gbG9jYXRpb246IHNjcmlwdHMvaW5zdGFsbF9kZXBlbmRlbmNpZXMuc2gKICAgICAgdGltZW91dDogMzAwCiAgICAgIHJ1bmFzOiByb290CiAgQWZ0ZXJJbnN0YWxsOgogICAgLSBsb2NhdGlvbjogc2NyaXB0cy9zdGFydF9zZXJ2ZXIuc2gKICAgICAgdGltZW91dDogMzAwCiAgICAgIHJ1bmFzOiByb290CiAgQXBwbGljYXRpb25TdGFydDoKICAgIC0gbG9jYXRpb246IHNjcmlwdHMvdmVyaWZ5X3NlcnZpY2Uuc2gKICAgICAgdGltZW91dDogMzAwCiAgICAgIHJ1bmFzOiByb290"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>version: 0.0
os: linux
files:
  - source: /src
    destination: /var/www/html
hooks:
  BeforeInstall:
    - location: scripts/install_dependencies.sh
      timeout: 300
      runas: root
  AfterInstall:
    - location: scripts/start_server.sh
      timeout: 300
      runas: root
  ApplicationStart:
    - location: scripts/verify_service.sh
      timeout: 300
      runas: root</pre></div><div class='content'></div><h2><p>Step 4: Create a Deployment</p>
</h2>
<div class='content'><ol>
<li>In the CodeDeploy console, select your application.</li>
<li>Click on &quot;Create deployment&quot;.</li>
<li>Choose the deployment group.</li>
<li>Specify the revision location (e.g., S3 bucket, GitHub repository).</li>
<li>Click &quot;Create deployment&quot;.</li>
</ol>
</div><h1><p>Practical Example</p>
</h1>
<div class='content'></div><h2><p>Example: Deploying a Simple Web Application</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Create an Application</strong>:</p>
<ul>
<li>Name: <code>MyWebApp</code></li>
<li>Compute Platform: <code>EC2/On-premises</code></li>
</ul>
</li>
<li>
<p><strong>Create a Deployment Group</strong>:</p>
<ul>
<li>Name: <code>MyWebAppDeploymentGroup</code></li>
<li>Service Role: <code>CodeDeployServiceRole</code></li>
<li>Deployment Type: <code>In-place</code></li>
<li>Deployment Configuration: <code>CodeDeployDefault.OneAtATime</code></li>
</ul>
</li>
<li>
<p><strong>AppSpec File</strong>:</p>
<pre><code class="language-yaml">version: 0.0
os: linux
files:
  - source: /src
    destination: /var/www/html
hooks:
  BeforeInstall:
    - location: scripts/install_dependencies.sh
      timeout: 300
      runas: root
  AfterInstall:
    - location: scripts/start_server.sh
      timeout: 300
      runas: root
  ApplicationStart:
    - location: scripts/verify_service.sh
      timeout: 300
      runas: root
</code></pre>
</li>
<li>
<p><strong>Create a Deployment</strong>:</p>
<ul>
<li>Application Name: <code>MyWebApp</code></li>
<li>Deployment Group: <code>MyWebAppDeploymentGroup</code></li>
<li>Revision Location: <code>S3://mybucket/mywebapp.zip</code></li>
</ul>
</li>
</ol>
</div><h2><p>Scripts</p>
</h2>
<div class='content'><ul>
<li>
<p><strong>install_dependencies.sh</strong>:</p>
<pre><code class="language-bash">#!/bin/bash
yum install -y httpd
</code></pre>
</li>
<li>
<p><strong>start_server.sh</strong>:</p>
<pre><code class="language-bash">#!/bin/bash
service httpd start
</code></pre>
</li>
<li>
<p><strong>verify_service.sh</strong>:</p>
<pre><code class="language-bash">#!/bin/bash
curl -I http://localhost
</code></pre>
</li>
</ul>
</div><h1><p>Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Create a CodeDeploy Application</p>
</h2>
<div class='content'><ol>
<li>Create a new CodeDeploy application named <code>MyFirstApp</code>.</li>
<li>Choose the compute platform as <code>EC2/On-premises</code>.</li>
</ol>
</div><h2><p>Exercise 2: Create a Deployment Group</p>
</h2>
<div class='content'><ol>
<li>Create a deployment group named <code>MyFirstAppDeploymentGroup</code> for the <code>MyFirstApp</code> application.</li>
<li>Use the <code>CodeDeployDefault.OneAtATime</code> deployment configuration.</li>
</ol>
</div><h2><p>Exercise 3: Write an AppSpec File</p>
</h2>
<div class='content'><ol>
<li>Write an AppSpec file that copies files from <code>/src</code> to <code>/var/www/html</code>.</li>
<li>Include hooks for <code>BeforeInstall</code>, <code>AfterInstall</code>, and <code>ApplicationStart</code>.</li>
</ol>
</div><h2><p>Exercise 4: Create a Deployment</p>
</h2>
<div class='content'><ol>
<li>Create a deployment for the <code>MyFirstApp</code> application using the <code>MyFirstAppDeploymentGroup</code>.</li>
<li>Use an S3 bucket to store the application revision.</li>
</ol>
</div><h1><p>Solutions</p>
</h1>
<div class='content'></div><h2><p>Solution to Exercise 1</p>
</h2>
<div class='content'><ol>
<li>Open the AWS Management Console.</li>
<li>Navigate to the CodeDeploy service.</li>
<li>Click on &quot;Create application&quot;.</li>
<li>Enter <code>MyFirstApp</code> as the application name.</li>
<li>Choose <code>EC2/On-premises</code> as the compute platform.</li>
<li>Click &quot;Create application&quot;.</li>
</ol>
</div><h2><p>Solution to Exercise 2</p>
</h2>
<div class='content'><ol>
<li>In the CodeDeploy console, select <code>MyFirstApp</code>.</li>
<li>Click on &quot;Create deployment group&quot;.</li>
<li>Enter <code>MyFirstAppDeploymentGroup</code> as the deployment group name.</li>
<li>Choose a service role.</li>
<li>Select <code>In-place</code> as the deployment type.</li>
<li>Choose <code>CodeDeployDefault.OneAtATime</code> as the deployment configuration.</li>
<li>Click &quot;Create deployment group&quot;.</li>
</ol>
</div><h2><p>Solution to Exercise 3</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmVyc2lvbjogMC4wCm9zOiBsaW51eApmaWxlczoKICAtIHNvdXJjZTogL3NyYwogICAgZGVzdGluYXRpb246IC92YXIvd3d3L2h0bWwKaG9va3M6CiAgQmVmb3JlSW5zdGFsbDoKICAgIC0gbG9jYXRpb246IHNjcmlwdHMvaW5zdGFsbF9kZXBlbmRlbmNpZXMuc2gKICAgICAgdGltZW91dDogMzAwCiAgICAgIHJ1bmFzOiByb290CiAgQWZ0ZXJJbnN0YWxsOgogICAgLSBsb2NhdGlvbjogc2NyaXB0cy9zdGFydF9zZXJ2ZXIuc2gKICAgICAgdGltZW91dDogMzAwCiAgICAgIHJ1bmFzOiByb290CiAgQXBwbGljYXRpb25TdGFydDoKICAgIC0gbG9jYXRpb246IHNjcmlwdHMvdmVyaWZ5X3NlcnZpY2Uuc2gKICAgICAgdGltZW91dDogMzAwCiAgICAgIHJ1bmFzOiByb290"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>version: 0.0
os: linux
files:
  - source: /src
    destination: /var/www/html
hooks:
  BeforeInstall:
    - location: scripts/install_dependencies.sh
      timeout: 300
      runas: root
  AfterInstall:
    - location: scripts/start_server.sh
      timeout: 300
      runas: root
  ApplicationStart:
    - location: scripts/verify_service.sh
      timeout: 300
      runas: root</pre></div><div class='content'></div><h2><p>Solution to Exercise 4</p>
</h2>
<div class='content'><ol>
<li>In the CodeDeploy console, select <code>MyFirstApp</code>.</li>
<li>Click on &quot;Create deployment&quot;.</li>
<li>Choose <code>MyFirstAppDeploymentGroup</code> as the deployment group.</li>
<li>Specify the revision location (e.g., <code>S3://mybucket/myfirstapp.zip</code>).</li>
<li>Click &quot;Create deployment&quot;.</li>
</ol>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, you learned about AWS CodeDeploy, its key concepts, and how to set up and use it for deploying applications. You also practiced creating a CodeDeploy application, deployment group, and deployment, and writing an AppSpec file. This knowledge will help you automate and manage your application deployments efficiently. In the next module, we will explore AWS CodePipeline, which integrates with CodeDeploy to provide a complete CI/CD solution.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-02-codebuild' title="AWS CodeBuild">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-04-codepipeline' title="AWS CodePipeline">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
