<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    <title>AWS CloudTrail</title>

    <link rel="alternate" href="https://campusempresa.com/mod/aws/05-02-cloudtrail" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/aws/05-02-cloudtrail" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/aws/05-02-cloudtrail" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>var DEVELOP = window.location.href.indexOf("localhost")!=-1 && true;</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/aws/05-02-cloudtrail" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/aws/05-02-cloudtrail" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col" id="left_menu">
					<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Course Content
	</a>

			</div>
		</div>
	</div>
</div>

<!--  
<div class="top-bar container-fluid">
	<div class="container-xxl">
		<nav class="navbar navbar-expand-md p-0">
			<div class="container-fluid">
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				
				<div class="collapse navbar-collapse" id="navbarNav">
					<div class="navbar-nav me-auto">
							<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Course Content
	</a>

					</div>
				</div>			
							</div>
		</nav>
	</div>
</div>
 -->				<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-01-cloudwatch' title="Amazon CloudWatch">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<h2 style="text-decoration:underline">AWS CloudTrail</h2>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-03-aws-config' title="AWS Config">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to AWS CloudTrail</h1>
<div class='content'><p>AWS CloudTrail is a service that enables governance, compliance, and operational and risk auditing of your AWS account. With CloudTrail, you can log, continuously monitor, and retain account activity related to actions across your AWS infrastructure. CloudTrail provides event history of your AWS account activity, including actions taken through the AWS Management Console, AWS SDKs, command-line tools, and other AWS services.</p>
</div><h1>Key Concepts</h1>
<div class='content'></div><h2><ol>
<li><strong>Event</strong></li>
</ol></h2>
<div class='content'><p>An event in CloudTrail is a record of an activity in your AWS account. Each event includes details such as the AWS service used, the action performed, and the parameters for the action.</p>
</div><h2><ol start="2">
<li><strong>Trail</strong></li>
</ol></h2>
<div class='content'><p>A trail enables CloudTrail to deliver log files to an Amazon S3 bucket. You can configure a trail to capture all or specific events.</p>
</div><h2><ol start="3">
<li><strong>Management Events</strong></li>
</ol></h2>
<div class='content'><p>These events provide information about management operations performed on resources in your AWS account. Examples include creating an EC2 instance or deleting an S3 bucket.</p>
</div><h2><ol start="4">
<li><strong>Data Events</strong></li>
</ol></h2>
<div class='content'><p>These events provide information about resource operations performed on or within a resource. Examples include S3 object-level API activity and Lambda function execution activity.</p>
</div><h2><ol start="5">
<li><strong>Insights Events</strong></li>
</ol></h2>
<div class='content'><p>These events help you identify unusual operational activity in your AWS account. CloudTrail Insights automatically analyzes management events to detect unusual patterns.</p>
</div><h1>Setting Up AWS CloudTrail</h1>
<div class='content'></div><h2>Step-by-Step Guide</h2>
<div class='content'><ol>
<li>
<p><strong>Sign in to the AWS Management Console</strong></p>
<ul>
<li>Navigate to the CloudTrail console at <a href="https://console.aws.amazon.com/cloudtrail">https://console.aws.amazon.com/cloudtrail</a>.</li>
</ul>
</li>
<li>
<p><strong>Create a Trail</strong></p>
<ul>
<li>Click on &quot;Create trail&quot;.</li>
<li>Enter a name for your trail.</li>
<li>Choose whether to apply the trail to all regions or a single region.</li>
</ul>
</li>
<li>
<p><strong>Configure S3 Bucket</strong></p>
<ul>
<li>Specify an existing S3 bucket or create a new one to store your log files.</li>
<li>Optionally, configure S3 bucket policies to control access to your log files.</li>
</ul>
</li>
<li>
<p><strong>Enable Log File Validation</strong></p>
<ul>
<li>This ensures the integrity of your log files by creating a digest file that contains a hash of each log file.</li>
</ul>
</li>
<li>
<p><strong>Configure CloudWatch Logs (Optional)</strong></p>
<ul>
<li>You can send CloudTrail events to CloudWatch Logs for real-time monitoring and alerting.</li>
</ul>
</li>
<li>
<p><strong>Review and Create</strong></p>
<ul>
<li>Review your settings and click &quot;Create trail&quot;.</li>
</ul>
</li>
</ol>
</div><h1>Practical Example</h1>
<div class='content'></div><h2>Creating a Trail Using AWS CLI</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIGNsb3VkdHJhaWwgY3JlYXRlLXRyYWlsIC0tbmFtZSBNeVRyYWlsIC0tczMtYnVja2V0LW5hbWUgbXktY2xvdWR0cmFpbC1idWNrZXQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws cloudtrail create-trail --name MyTrail --s3-bucket-name my-cloudtrail-bucket</pre></div><div class='content'></div><h2>Enabling Logging</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIGNsb3VkdHJhaWwgc3RhcnQtbG9nZ2luZyAtLW5hbWUgTXlUcmFpbA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws cloudtrail start-logging --name MyTrail</pre></div><div class='content'></div><h2>Verifying the Trail</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIGNsb3VkdHJhaWwgZGVzY3JpYmUtdHJhaWxzIC0tdHJhaWwtbmFtZS1saXN0IE15VHJhaWw="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws cloudtrail describe-trails --trail-name-list MyTrail</pre></div><div class='content'></div><h2>Example Output</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICAgInRyYWlsTGlzdCI6IFsKICAgICAgICB7CiAgICAgICAgICAgICJOYW1lIjogIk15VHJhaWwiLAogICAgICAgICAgICAiUzNCdWNrZXROYW1lIjogIm15LWNsb3VkdHJhaWwtYnVja2V0IiwKICAgICAgICAgICAgIkluY2x1ZGVHbG9iYWxTZXJ2aWNlRXZlbnRzIjogdHJ1ZSwKICAgICAgICAgICAgIklzTXVsdGlSZWdpb25UcmFpbCI6IGZhbHNlLAogICAgICAgICAgICAiSG9tZVJlZ2lvbiI6ICJ1cy1lYXN0LTEiLAogICAgICAgICAgICAiVHJhaWxBUk4iOiAiYXJuOmF3czpjbG91ZHRyYWlsOnVzLWVhc3QtMToxMjM0NTY3ODkwMTI6dHJhaWwvTXlUcmFpbCIsCiAgICAgICAgICAgICJMb2dGaWxlVmFsaWRhdGlvbkVuYWJsZWQiOiBmYWxzZSwKICAgICAgICAgICAgIklzT3JnYW5pemF0aW9uVHJhaWwiOiBmYWxzZQogICAgICAgIH0KICAgIF0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
    &quot;trailList&quot;: [
        {
            &quot;Name&quot;: &quot;MyTrail&quot;,
            &quot;S3BucketName&quot;: &quot;my-cloudtrail-bucket&quot;,
            &quot;IncludeGlobalServiceEvents&quot;: true,
            &quot;IsMultiRegionTrail&quot;: false,
            &quot;HomeRegion&quot;: &quot;us-east-1&quot;,
            &quot;TrailARN&quot;: &quot;arn:aws:cloudtrail:us-east-1:123456789012:trail/MyTrail&quot;,
            &quot;LogFileValidationEnabled&quot;: false,
            &quot;IsOrganizationTrail&quot;: false
        }
    ]
}</pre></div><div class='content'></div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Task: Create and Configure a CloudTrail</h2>
<div class='content'><ol>
<li><strong>Create a new trail named <code>StudentTrail</code></strong>.</li>
<li><strong>Configure it to log to an S3 bucket named <code>student-cloudtrail-bucket</code></strong>.</li>
<li><strong>Enable log file validation</strong>.</li>
<li><strong>Send logs to CloudWatch Logs</strong>.</li>
</ol>
</div><h2>Solution</h2>
<div class='content'><ol>
<li><strong>Create the Trail</strong></li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIGNsb3VkdHJhaWwgY3JlYXRlLXRyYWlsIC0tbmFtZSBTdHVkZW50VHJhaWwgLS1zMy1idWNrZXQtbmFtZSBzdHVkZW50LWNsb3VkdHJhaWwtYnVja2V0"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws cloudtrail create-trail --name StudentTrail --s3-bucket-name student-cloudtrail-bucket</pre></div><div class='content'><ol start="2">
<li><strong>Enable Log File Validation</strong></li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIGNsb3VkdHJhaWwgdXBkYXRlLXRyYWlsIC0tbmFtZSBTdHVkZW50VHJhaWwgLS1lbmFibGUtbG9nLWZpbGUtdmFsaWRhdGlvbg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws cloudtrail update-trail --name StudentTrail --enable-log-file-validation</pre></div><div class='content'><ol start="3">
<li><strong>Configure CloudWatch Logs</strong></li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIGNsb3VkdHJhaWwgdXBkYXRlLXRyYWlsIC0tbmFtZSBTdHVkZW50VHJhaWwgLS1jbG91ZC13YXRjaC1sb2dzLWxvZy1ncm91cC1hcm4gYXJuOmF3czpsb2dzOnVzLWVhc3QtMToxMjM0NTY3ODkwMTI6bG9nLWdyb3VwOlN0dWRlbnRUcmFpbExvZ0dyb3VwIC0tY2xvdWQtd2F0Y2gtbG9ncy1yb2xlLWFybiBhcm46YXdzOmlhbTo6MTIzNDU2Nzg5MDEyOnJvbGUvQ2xvdWRUcmFpbF9DbG91ZFdhdGNoTG9nc19Sb2xl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws cloudtrail update-trail --name StudentTrail --cloud-watch-logs-log-group-arn arn:aws:logs:us-east-1:123456789012:log-group:StudentTrailLogGroup --cloud-watch-logs-role-arn arn:aws:iam::123456789012:role/CloudTrail_CloudWatchLogs_Role</pre></div><div class='content'><ol start="4">
<li><strong>Start Logging</strong></li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIGNsb3VkdHJhaWwgc3RhcnQtbG9nZ2luZyAtLW5hbWUgU3R1ZGVudFRyYWls"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws cloudtrail start-logging --name StudentTrail</pre></div><div class='content'></div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Incorrect S3 Bucket Permissions</strong>: Ensure that the S3 bucket policy allows CloudTrail to write logs to the bucket.</li>
<li><strong>Not Enabling Log File Validation</strong>: This is crucial for ensuring the integrity of your logs.</li>
<li><strong>Misconfigured CloudWatch Logs</strong>: Ensure that the IAM role used for CloudWatch Logs has the necessary permissions.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, you learned about AWS CloudTrail, its key concepts, and how to set it up. You also practiced creating and configuring a trail using the AWS CLI. Understanding CloudTrail is essential for monitoring and auditing your AWS account activity, which is crucial for maintaining security and compliance. In the next module, we will explore Amazon CloudWatch, another powerful monitoring tool in AWS.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-01-cloudwatch' title="Amazon CloudWatch">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-03-aws-config' title="AWS Config">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
				<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
	     crossorigin="anonymous"></script>
	<!-- enterprise_campus -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-0611338592562725"
	     data-ad-slot="6914733106"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
	     (adsbygoogle = window.adsbygoogle || []).push({});
	</script>
			
	<div class="container mt-2 d-none d-md-block index">
		<h1>AWS Course</h1>
<h2>Module 1: Introduction to AWS</h2>
<ul>
<li><a href="01-01-what-is-aws">What is AWS?</a></li>
<li><a href="01-02-setting-up-account">Setting Up Your AWS Account</a></li>
<li><a href="01-03-global-infrastructure">AWS Global Infrastructure</a></li>
<li><a href="01-04-management-console">AWS Management Console</a></li>
</ul>
<h2>Module 2: Core AWS Services</h2>
<ul>
<li><a href="02-01-amazon-ec2">Amazon EC2</a></li>
<li><a href="02-02-amazon-s3">Amazon S3</a></li>
<li><a href="02-03-amazon-rds">Amazon RDS</a></li>
<li><a href="02-04-aws-lambda">AWS Lambda</a></li>
</ul>
<h2>Module 3: Networking and Content Delivery</h2>
<ul>
<li><a href="03-01-amazon-vpc">Amazon VPC</a></li>
<li><a href="03-02-elastic-load-balancing">Elastic Load Balancing</a></li>
<li><a href="03-03-amazon-cloudfront">Amazon CloudFront</a></li>
<li><a href="03-04-route-53">Route 53</a></li>
</ul>
<h2>Module 4: Security and Identity</h2>
<ul>
<li><a href="04-01-iam">AWS Identity and Access Management (IAM)</a></li>
<li><a href="04-02-kms">AWS Key Management Service (KMS)</a></li>
<li><a href="04-03-aws-shield">AWS Shield</a></li>
<li><a href="04-04-aws-waf">AWS WAF</a></li>
</ul>
<h2>Module 5: Monitoring and Management</h2>
<ul>
<li><a href="05-01-cloudwatch">Amazon CloudWatch</a></li>
<li><a href="05-02-cloudtrail">AWS CloudTrail</a></li>
<li><a href="05-03-aws-config">AWS Config</a></li>
<li><a href="05-04-trusted-advisor">AWS Trusted Advisor</a></li>
</ul>
<h2>Module 6: Databases</h2>
<ul>
<li><a href="06-01-dynamodb">Amazon DynamoDB</a></li>
<li><a href="06-02-aurora">Amazon Aurora</a></li>
<li><a href="06-03-redshift">Amazon Redshift</a></li>
<li><a href="06-04-elasticache">Amazon ElastiCache</a></li>
</ul>
<h2>Module 7: Application Integration</h2>
<ul>
<li><a href="07-01-sqs">Amazon SQS</a></li>
<li><a href="07-02-sns">Amazon SNS</a></li>
<li><a href="07-03-step-functions">AWS Step Functions</a></li>
<li><a href="07-04-eventbridge">Amazon EventBridge</a></li>
</ul>
<h2>Module 8: Developer Tools</h2>
<ul>
<li><a href="08-01-codecommit">AWS CodeCommit</a></li>
<li><a href="08-02-codebuild">AWS CodeBuild</a></li>
<li><a href="08-03-codedeploy">AWS CodeDeploy</a></li>
<li><a href="08-04-codepipeline">AWS CodePipeline</a></li>
</ul>
<h2>Module 9: Advanced Topics</h2>
<ul>
<li><a href="09-01-cloudformation">AWS CloudFormation</a></li>
<li><a href="09-02-elastic-beanstalk">AWS Elastic Beanstalk</a></li>
<li><a href="09-03-fargate">AWS Fargate</a></li>
<li><a href="09-04-organizations">AWS Organizations</a></li>
</ul>
<h2>Module 10: Best Practices and Cost Management</h2>
<ul>
<li><a href="10-01-well-architected">AWS Well-Architected Framework</a></li>
<li><a href="10-02-cost-explorer">AWS Cost Explorer</a></li>
<li><a href="10-03-budgets">AWS Budgets</a></li>
<li><a href="10-04-savings-plans">AWS Savings Plans</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
