<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setting up a CI Pipeline</title>

    <link rel="alternate" href="https://campusempresa.com/mod/devops_basico/02-03-configuracion-pipeline-ci" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/devops_basico/02-03-configuracio-pipeline-ci" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/devops_basico/02-03-setting-up-ci-pipeline" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/devops_basico/02-03-configuracion-pipeline-ci" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/devops_basico/02-03-configuracio-pipeline-ci" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='02-02-popular-ci-tools' title="Popular CI tools">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Setting up a CI Pipeline</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='02-04-automated-testing-ci' title="Automated testing in CI">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Continuous Integration (CI) is a fundamental practice in DevOps that involves automatically integrating code changes from multiple contributors into a shared repository several times a day. Setting up a CI pipeline ensures that code changes are automatically tested and validated, reducing integration issues and improving software quality.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li>
<p><strong>Version Control System (VCS):</strong></p>
<ul>
<li>A VCS like Git is essential for tracking changes and collaborating on code.</li>
<li>Example: GitHub, GitLab, Bitbucket.</li>
</ul>
</li>
<li>
<p><strong>CI Server:</strong></p>
<ul>
<li>A CI server automates the process of building and testing code.</li>
<li>Example: Jenkins, Travis CI, CircleCI.</li>
</ul>
</li>
<li>
<p><strong>Build Automation:</strong></p>
<ul>
<li>Tools that compile code, run tests, and package applications.</li>
<li>Example: Maven, Gradle, npm.</li>
</ul>
</li>
<li>
<p><strong>Automated Testing:</strong></p>
<ul>
<li>Running tests automatically to ensure code quality.</li>
<li>Example: JUnit, Selenium, pytest.</li>
</ul>
</li>
</ol>
</div><h1>Steps to Set Up a CI Pipeline</h1>
<div class='content'></div><h2>1. Choose a CI Tool</h2>
<div class='content'><p>Select a CI tool that fits your project needs. For this example, we will use Jenkins, a popular open-source CI tool.</p>
</div><h2>2. Install and Configure Jenkins</h2>
<div class='content'><ol>
<li>
<p><strong>Install Jenkins:</strong></p>
<ul>
<li>Download Jenkins from the official website and follow the installation instructions for your operating system.</li>
</ul>
</li>
<li>
<p><strong>Start Jenkins:</strong></p>
<ul>
<li>Run Jenkins and access the web interface at <code>http://localhost:8080</code>.</li>
</ul>
</li>
<li>
<p><strong>Initial Setup:</strong></p>
<ul>
<li>Unlock Jenkins using the initial admin password provided during installation.</li>
<li>Install suggested plugins to get started quickly.</li>
</ul>
</li>
</ol>
</div><h2>3. Create a New Jenkins Job</h2>
<div class='content'><ol>
<li>
<p><strong>Create a New Job:</strong></p>
<ul>
<li>Go to the Jenkins dashboard and click on &quot;New Item.&quot;</li>
<li>Enter a name for your job and select &quot;Freestyle project.&quot;</li>
</ul>
</li>
<li>
<p><strong>Configure Source Code Management:</strong></p>
<ul>
<li>Under &quot;Source Code Management,&quot; select &quot;Git.&quot;</li>
<li>Enter the repository URL and credentials if required.</li>
</ul>
</li>
<li>
<p><strong>Define Build Triggers:</strong></p>
<ul>
<li>Under &quot;Build Triggers,&quot; select &quot;Poll SCM&quot; and set the schedule (e.g., <code>H/5 * * * *</code> to poll every 5 minutes).</li>
</ul>
</li>
<li>
<p><strong>Add Build Steps:</strong></p>
<ul>
<li>Under &quot;Build,&quot; click &quot;Add build step&quot; and select &quot;Execute shell&quot; or &quot;Invoke top-level Maven targets&quot; based on your project.</li>
<li>Example shell script for a Node.js project:
<pre><code class="language-sh">npm install
npm test
</code></pre>
</li>
</ul>
</li>
</ol>
</div><h2>4. Add Automated Tests</h2>
<div class='content'><ol>
<li>
<p><strong>Unit Tests:</strong></p>
<ul>
<li>Ensure your project includes unit tests. For example, in a Java project, you might use JUnit.</li>
<li>Example Maven configuration:
<pre><code class="language-xml">&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.22.2&lt;/version&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Integration Tests:</strong></p>
<ul>
<li>Include integration tests to validate the interaction between components.</li>
<li>Example shell script:
<pre><code class="language-sh">mvn verify
</code></pre>
</li>
</ul>
</li>
</ol>
</div><h2>5. Configure Post-Build Actions</h2>
<div class='content'><ol>
<li>
<p><strong>Publish Test Results:</strong></p>
<ul>
<li>Under &quot;Post-build Actions,&quot; select &quot;Publish JUnit test result report.&quot;</li>
<li>Enter the path to the test result files (e.g., <code>**/target/surefire-reports/*.xml</code>).</li>
</ul>
</li>
<li>
<p><strong>Notifications:</strong></p>
<ul>
<li>Configure email notifications or integrate with chat tools like Slack to notify the team of build results.</li>
</ul>
</li>
</ol>
</div><h2>Example Jenkins Pipeline Script</h2>
<div class='content'><p>For more advanced configurations, you can use Jenkins Pipeline (Jenkinsfile):</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwZWxpbmUgewogICAgYWdlbnQgYW55CgogICAgc3RhZ2VzIHsKICAgICAgICBzdGFnZSgnQ2hlY2tvdXQnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGdpdCAnaHR0cHM6Ly9naXRodWIuY29tL3lvdXItcmVwby5naXQnCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc3RhZ2UoJ0J1aWxkJykgewogICAgICAgICAgICBzdGVwcyB7CiAgICAgICAgICAgICAgICBzaCAnbXZuIGNsZWFuIGluc3RhbGwnCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc3RhZ2UoJ1Rlc3QnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIHNoICdtdm4gdGVzdCcKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBwb3N0IHsKICAgICAgICBhbHdheXMgewogICAgICAgICAgICBqdW5pdCAnKiovdGFyZ2V0L3N1cmVmaXJlLXJlcG9ydHMvKi54bWwnCiAgICAgICAgICAgIG1haWwgdG86ICd0ZWFtQGV4YW1wbGUuY29tJywKICAgICAgICAgICAgICAgICBzdWJqZWN0OiAiQnVpbGQgJHtjdXJyZW50QnVpbGQuZnVsbERpc3BsYXlOYW1lfSIsCiAgICAgICAgICAgICAgICAgYm9keTogIkJ1aWxkICR7Y3VycmVudEJ1aWxkLmZ1bGxEaXNwbGF5TmFtZX0gY29tcGxldGVkIHdpdGggc3RhdHVzOiAke2N1cnJlbnRCdWlsZC5jdXJyZW50UmVzdWx0fSIKICAgICAgICB9CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pipeline {
    agent any

    stages {
        stage('Checkout') {
            steps {
                git 'https://github.com/your-repo.git'
            }
        }
        stage('Build') {
            steps {
                sh 'mvn clean install'
            }
        }
        stage('Test') {
            steps {
                sh 'mvn test'
            }
        }
    }

    post {
        always {
            junit '**/target/surefire-reports/*.xml'
            mail to: 'team@example.com',
                 subject: &quot;Build ${currentBuild.fullDisplayName}&quot;,
                 body: &quot;Build ${currentBuild.fullDisplayName} completed with status: ${currentBuild.currentResult}&quot;
        }
    }
}</pre></div><div class='content'></div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise: Set Up a CI Pipeline with Jenkins</h2>
<div class='content'><ol>
<li><strong>Install Jenkins on your local machine or use a cloud service.</strong></li>
<li><strong>Create a new Jenkins job for a sample project (e.g., a simple Java or Node.js application).</strong></li>
<li><strong>Configure the job to pull code from a Git repository.</strong></li>
<li><strong>Add build steps to compile the code and run tests.</strong></li>
<li><strong>Configure post-build actions to publish test results and send notifications.</strong></li>
</ol>
</div><h2>Solution</h2>
<div class='content'><ol>
<li>
<p><strong>Install Jenkins:</strong></p>
<ul>
<li>Follow the official Jenkins installation guide for your operating system.</li>
</ul>
</li>
<li>
<p><strong>Create a New Job:</strong></p>
<ul>
<li>Go to the Jenkins dashboard, click &quot;New Item,&quot; enter a job name, and select &quot;Freestyle project.&quot;</li>
</ul>
</li>
<li>
<p><strong>Configure Source Code Management:</strong></p>
<ul>
<li>Select &quot;Git&quot; and enter the repository URL.</li>
</ul>
</li>
<li>
<p><strong>Add Build Steps:</strong></p>
<ul>
<li>For a Node.js project:
<pre><code class="language-sh">npm install
npm test
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Configure Post-Build Actions:</strong></p>
<ul>
<li>Select &quot;Publish JUnit test result report&quot; and enter the path to test results.</li>
</ul>
</li>
</ol>
</div><h1>Summary</h1>
<div class='content'><p>In this section, we covered the essential steps to set up a CI pipeline using Jenkins. We discussed the importance of version control, CI servers, build automation, and automated testing. By following the provided steps and example scripts, you can create a robust CI pipeline that ensures code quality and facilitates continuous integration. In the next module, we will delve into the fundamentals of Continuous Delivery (CD) and how it extends the CI process.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='02-02-popular-ci-tools' title="Popular CI tools">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='02-04-automated-testing-ci' title="Automated testing in CI">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
