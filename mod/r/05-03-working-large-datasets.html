<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Working with Large Datasets</title>

    <link rel="alternate" href="https://campusempresa.com/mod/r/05-03-working-large-datasets" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/r/05-03-working-large-datasets" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/r/05-03-working-large-datasets" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/r/05-03-working-large-datasets" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/r/05-03-working-large-datasets" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-02-data-reshaping' title="Data Reshaping">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Working with Large Datasets</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-04-web-scraping' title="Web Scraping">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore techniques and tools for efficiently working with large datasets in R. Handling large datasets can be challenging due to memory constraints and processing time. This module will cover strategies to optimize performance and manage memory effectively.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Memory Management</strong>: Understanding how R handles memory and ways to optimize memory usage.</li>
<li><strong>Efficient Data Structures</strong>: Using data structures that are optimized for large datasets.</li>
<li><strong>Data Import Techniques</strong>: Efficiently importing large datasets.</li>
<li><strong>Data Processing</strong>: Techniques for processing large datasets without running into memory issues.</li>
<li><strong>Parallel Processing</strong>: Utilizing multiple cores to speed up data processing.</li>
</ol>
</div><h1><p>Memory Management</p>
</h1>
<div class='content'></div><h2><p>Understanding Memory Usage in R</p>
</h2>
<div class='content'><p>R stores objects in memory, which can be a limitation when working with large datasets. Here are some tips to manage memory effectively:</p>
<ul>
<li><strong>Remove Unused Objects</strong>: Use <code>rm()</code> to remove objects that are no longer needed.</li>
<li><strong>Garbage Collection</strong>: Use <code>gc()</code> to free up memory by triggering garbage collection.</li>
<li><strong>Monitor Memory Usage</strong>: Use <code>memory.size()</code> and <code>memory.limit()</code> on Windows, or <code>pryr::mem_used()</code> on other systems.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeGFtcGxlOiBSZW1vdmluZyB1bnVzZWQgb2JqZWN0cyBhbmQgZ2FyYmFnZSBjb2xsZWN0aW9uCnJtKGxpc3QgPSBscygpKSAgIyBSZW1vdmUgYWxsIG9iamVjdHMKZ2MoKSAgICAgICAgICAgICAjIFRyaWdnZXIgZ2FyYmFnZSBjb2xsZWN0aW9u"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Example: Removing unused objects and garbage collection
rm(list = ls())  # Remove all objects
gc()             # Trigger garbage collection</pre></div><div class='content'></div><h2><p>Efficient Data Structures</p>
</h2>
<div class='content'><p>Using efficient data structures can significantly reduce memory usage. Here are some alternatives:</p>
<ul>
<li><strong>data.table</strong>: An enhanced version of data.frame that is optimized for large datasets.</li>
<li><strong>ff</strong>: A package that allows you to store large datasets on disk rather than in memory.</li>
<li><strong>bigmemory</strong>: A package for managing large matrices.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeGFtcGxlOiBVc2luZyBkYXRhLnRhYmxlCmxpYnJhcnkoZGF0YS50YWJsZSkKZHQgPC0gZGF0YS50YWJsZSh4ID0gcm5vcm0oMWU2KSwgeSA9IHJub3JtKDFlNikpCnByaW50KG9iamVjdC5zaXplKGR0KSwgdW5pdHMgPSAiTUIiKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Example: Using data.table
library(data.table)
dt &lt;- data.table(x = rnorm(1e6), y = rnorm(1e6))
print(object.size(dt), units = &quot;MB&quot;)</pre></div><div class='content'></div><h1><p>Efficient Data Import Techniques</p>
</h1>
<div class='content'></div><h2><p>Reading Large Files</p>
</h2>
<div class='content'><p>Reading large files can be time-consuming and memory-intensive. Here are some techniques to optimize this process:</p>
<ul>
<li><strong>fread() from data.table</strong>: Faster and more memory-efficient than read.csv().</li>
<li><strong>chunked reading</strong>: Read the file in chunks rather than all at once.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeGFtcGxlOiBVc2luZyBmcmVhZCgpIGZyb20gZGF0YS50YWJsZQpsaWJyYXJ5KGRhdGEudGFibGUpCmxhcmdlX2RhdGEgPC0gZnJlYWQoImxhcmdlX2RhdGFzZXQuY3N2Iik="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Example: Using fread() from data.table
library(data.table)
large_data &lt;- fread(&quot;large_dataset.csv&quot;)</pre></div><div class='content'></div><h2><p>Chunked Reading</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeGFtcGxlOiBSZWFkaW5nIGEgZmlsZSBpbiBjaHVua3MKbGlicmFyeShyZWFkcikKY2h1bmtlZF9kYXRhIDwtIHJlYWRfY3N2X2NodW5rZWQoImxhcmdlX2RhdGFzZXQuY3N2IiwgY2FsbGJhY2sgPSBEYXRhRnJhbWVDYWxsYmFjayRuZXcoZnVuY3Rpb24oeCwgcG9zKSB7CiAgIyBQcm9jZXNzIGVhY2ggY2h1bmsKICBwcmludChkaW0oeCkpCn0pKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Example: Reading a file in chunks
library(readr)
chunked_data &lt;- read_csv_chunked(&quot;large_dataset.csv&quot;, callback = DataFrameCallback$new(function(x, pos) {
  # Process each chunk
  print(dim(x))
}))</pre></div><div class='content'></div><h1><p>Data Processing</p>
</h1>
<div class='content'></div><h2><p>Using data.table for Efficient Processing</p>
</h2>
<div class='content'><p>data.table provides efficient data manipulation capabilities, which are particularly useful for large datasets.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeGFtcGxlOiBEYXRhIG1hbmlwdWxhdGlvbiB3aXRoIGRhdGEudGFibGUKbGlicmFyeShkYXRhLnRhYmxlKQpkdCA8LSBkYXRhLnRhYmxlKHggPSBybm9ybSgxZTYpLCB5ID0gcm5vcm0oMWU2KSkKZHRbLCBtZWFuX3ggOj0gbWVhbih4KSwgYnkgPSB5ID4gMF0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Example: Data manipulation with data.table
library(data.table)
dt &lt;- data.table(x = rnorm(1e6), y = rnorm(1e6))
dt[, mean_x := mean(x), by = y &gt; 0]</pre></div><div class='content'></div><h2><p>Parallel Processing</p>
</h2>
<div class='content'><p>Parallel processing can significantly speed up data processing tasks by utilizing multiple CPU cores.</p>
<ul>
<li><strong>parallel package</strong>: Base R package for parallel processing.</li>
<li><strong>foreach and doParallel</strong>: Packages for parallel loops.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeGFtcGxlOiBQYXJhbGxlbCBwcm9jZXNzaW5nIHdpdGggcGFyYWxsZWwgcGFja2FnZQpsaWJyYXJ5KHBhcmFsbGVsKQpjbCA8LSBtYWtlQ2x1c3RlcihkZXRlY3RDb3JlcygpIC0gMSkKY2x1c3RlckV4cG9ydChjbCwgImR0IikKcGFyTGFwcGx5KGNsLCAxOjEwLCBmdW5jdGlvbihpKSBtZWFuKGR0JHgpKQpzdG9wQ2x1c3RlcihjbCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Example: Parallel processing with parallel package
library(parallel)
cl &lt;- makeCluster(detectCores() - 1)
clusterExport(cl, &quot;dt&quot;)
parLapply(cl, 1:10, function(i) mean(dt$x))
stopCluster(cl)</pre></div><div class='content'></div><h1><p>Practical Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Memory Management</p>
</h2>
<div class='content'><ol>
<li>Create a large data frame with 1 million rows and 10 columns of random numbers.</li>
<li>Remove the data frame from memory and trigger garbage collection.</li>
<li>Monitor the memory usage before and after removing the data frame.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBTb2x1dGlvbgpkZiA8LSBkYXRhLmZyYW1lKG1hdHJpeChybm9ybSgxZTcpLCBucm93ID0gMWU2LCBuY29sID0gMTApKQpwcmludChvYmplY3Quc2l6ZShkZiksIHVuaXRzID0gIk1CIikKcm0oZGYpCmdjKCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Solution
df &lt;- data.frame(matrix(rnorm(1e7), nrow = 1e6, ncol = 10))
print(object.size(df), units = &quot;MB&quot;)
rm(df)
gc()</pre></div><div class='content'></div><h2><p>Exercise 2: Efficient Data Import</p>
</h2>
<div class='content'><ol>
<li>Use <code>fread()</code> to read a large CSV file.</li>
<li>Measure the time taken to read the file using <code>system.time()</code>.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBTb2x1dGlvbgpsaWJyYXJ5KGRhdGEudGFibGUpCnN5c3RlbS50aW1lKHsKICBsYXJnZV9kYXRhIDwtIGZyZWFkKCJsYXJnZV9kYXRhc2V0LmNzdiIpCn0p"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Solution
library(data.table)
system.time({
  large_data &lt;- fread(&quot;large_dataset.csv&quot;)
})</pre></div><div class='content'></div><h2><p>Exercise 3: Parallel Processing</p>
</h2>
<div class='content'><ol>
<li>Create a large data table with 1 million rows and 2 columns.</li>
<li>Use parallel processing to calculate the mean of the first column in parallel.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBTb2x1dGlvbgpsaWJyYXJ5KHBhcmFsbGVsKQpsaWJyYXJ5KGRhdGEudGFibGUpCmR0IDwtIGRhdGEudGFibGUoeCA9IHJub3JtKDFlNiksIHkgPSBybm9ybSgxZTYpKQpjbCA8LSBtYWtlQ2x1c3RlcihkZXRlY3RDb3JlcygpIC0gMSkKY2x1c3RlckV4cG9ydChjbCwgImR0IikKcmVzdWx0IDwtIHBhckxhcHBseShjbCwgMToxMCwgZnVuY3Rpb24oaSkgbWVhbihkdCR4KSkKc3RvcENsdXN0ZXIoY2wpCnByaW50KHJlc3VsdCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Solution
library(parallel)
library(data.table)
dt &lt;- data.table(x = rnorm(1e6), y = rnorm(1e6))
cl &lt;- makeCluster(detectCores() - 1)
clusterExport(cl, &quot;dt&quot;)
result &lt;- parLapply(cl, 1:10, function(i) mean(dt$x))
stopCluster(cl)
print(result)</pre></div><div class='content'></div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered various techniques for working with large datasets in R. We discussed memory management, efficient data structures, data import techniques, data processing, and parallel processing. By applying these techniques, you can handle large datasets more efficiently and effectively in R. In the next module, we will delve into advanced programming concepts in R.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-02-data-reshaping' title="Data Reshaping">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-04-web-scraping' title="Web Scraping">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
