<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced ggplot2</title>

    <link rel="alternate" href="https://campusempresa.com/mod/r/03-04-advanced-ggplot2" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/r/03-04-advanced-ggplot2" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/r/03-04-advanced-ggplot2" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/r/03-04-advanced-ggplot2" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/r/03-04-advanced-ggplot2" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='03-03-ggplot2-basics' title="ggplot2 Basics">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Advanced ggplot2</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='03-05-interactive-visualizations-plotly' title="Interactive Visualizations with plotly">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will delve deeper into the capabilities of <code>ggplot2</code>, a powerful and flexible package for creating complex and aesthetically pleasing visualizations in R. By the end of this module, you will be able to create advanced plots, customize them extensively, and understand how to use various <code>ggplot2</code> functions to enhance your data visualizations.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Faceting</strong></li>
<li><strong>Themes and Customization</strong></li>
<li><strong>Annotations</strong></li>
<li><strong>Combining Multiple Plots</strong></li>
<li><strong>Advanced Geometries</strong></li>
<li><strong>Extensions and Plugins</strong></li>
</ol>
</div><h1><ol>
<li>Faceting</li>
</ol>
</h1>
<div class='content'><p>Faceting allows you to split your data into subsets and display them in separate panels within the same plot. This is particularly useful for comparing different groups or categories.</p>
</div><h2><p>Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGlicmFyeShnZ3Bsb3QyKQoKIyBTYW1wbGUgZGF0YQpkYXRhKG1wZykKCiMgRmFjZXQgYnkgJ2RydicgKGRyaXZlIHR5cGUpCnAgPC0gZ2dwbG90KG1wZywgYWVzKHggPSBkaXNwbCwgeSA9IGh3eSkpICsKICBnZW9tX3BvaW50KCkgKwogIGZhY2V0X3dyYXAofiBkcnYpCgpwcmludChwKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>library(ggplot2)

# Sample data
data(mpg)

# Facet by 'drv' (drive type)
p &lt;- ggplot(mpg, aes(x = displ, y = hwy)) +
  geom_point() +
  facet_wrap(~ drv)

print(p)</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><code>facet_wrap(~ drv)</code>: This function splits the data by the <code>drv</code> variable and creates a separate panel for each level of <code>drv</code>.</li>
</ul>
</div><h1><ol start="2">
<li>Themes and Customization</li>
</ol>
</h1>
<div class='content'><p>Themes in <code>ggplot2</code> allow you to control the non-data elements of your plots, such as titles, labels, and background.</p>
</div><h2><p>Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cCA8LSBnZ3Bsb3QobXBnLCBhZXMoeCA9IGRpc3BsLCB5ID0gaHd5KSkgKwogIGdlb21fcG9pbnQoKSArCiAgdGhlbWVfbWluaW1hbCgpICsKICBsYWJzKHRpdGxlID0gIkRpc3BsYWNlbWVudCB2cyBIaWdod2F5IE1QRyIsCiAgICAgICB4ID0gIkRpc3BsYWNlbWVudCAoTCkiLAogICAgICAgeSA9ICJIaWdod2F5IE1QRyIpCgpwcmludChwKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>p &lt;- ggplot(mpg, aes(x = displ, y = hwy)) +
  geom_point() +
  theme_minimal() +
  labs(title = &quot;Displacement vs Highway MPG&quot;,
       x = &quot;Displacement (L)&quot;,
       y = &quot;Highway MPG&quot;)

print(p)</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><code>theme_minimal()</code>: Applies a minimalistic theme to the plot.</li>
<li><code>labs()</code>: Adds custom labels and a title to the plot.</li>
</ul>
</div><h1><ol start="3">
<li>Annotations</li>
</ol>
</h1>
<div class='content'><p>Annotations are used to add text or shapes to specific areas of your plot to highlight important information.</p>
</div><h2><p>Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cCA8LSBnZ3Bsb3QobXBnLCBhZXMoeCA9IGRpc3BsLCB5ID0gaHd5KSkgKwogIGdlb21fcG9pbnQoKSArCiAgYW5ub3RhdGUoInRleHQiLCB4ID0gNiwgeSA9IDQwLCBsYWJlbCA9ICJIaWdoIEVmZmljaWVuY3kiLCBjb2xvciA9ICJyZWQiKSArCiAgYW5ub3RhdGUoInJlY3QiLCB4bWluID0gNSwgeG1heCA9IDcsIHltaW4gPSAzMCwgeW1heCA9IDQwLCBhbHBoYSA9IDAuMiwgZmlsbCA9ICJibHVlIikKCnByaW50KHAp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>p &lt;- ggplot(mpg, aes(x = displ, y = hwy)) +
  geom_point() +
  annotate(&quot;text&quot;, x = 6, y = 40, label = &quot;High Efficiency&quot;, color = &quot;red&quot;) +
  annotate(&quot;rect&quot;, xmin = 5, xmax = 7, ymin = 30, ymax = 40, alpha = 0.2, fill = &quot;blue&quot;)

print(p)</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><code>annotate(&quot;text&quot;, ...)</code>: Adds text annotation at specified coordinates.</li>
<li><code>annotate(&quot;rect&quot;, ...)</code>: Adds a rectangle annotation with specified boundaries.</li>
</ul>
</div><h1><ol start="4">
<li>Combining Multiple Plots</li>
</ol>
</h1>
<div class='content'><p>You can combine multiple <code>ggplot2</code> plots into a single figure using the <code>gridExtra</code> package.</p>
</div><h2><p>Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGlicmFyeShncmlkRXh0cmEpCgpwMSA8LSBnZ3Bsb3QobXBnLCBhZXMoeCA9IGRpc3BsLCB5ID0gaHd5KSkgKyBnZW9tX3BvaW50KCkKcDIgPC0gZ2dwbG90KG1wZywgYWVzKHggPSBjdHksIHkgPSBod3kpKSArIGdlb21fcG9pbnQoKQoKZ3JpZC5hcnJhbmdlKHAxLCBwMiwgbmNvbCA9IDIp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>library(gridExtra)

p1 &lt;- ggplot(mpg, aes(x = displ, y = hwy)) + geom_point()
p2 &lt;- ggplot(mpg, aes(x = cty, y = hwy)) + geom_point()

grid.arrange(p1, p2, ncol = 2)</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><code>grid.arrange(p1, p2, ncol = 2)</code>: Arranges <code>p1</code> and <code>p2</code> side by side in a single figure.</li>
</ul>
</div><h1><ol start="5">
<li>Advanced Geometries</li>
</ol>
</h1>
<div class='content'><p><code>ggplot2</code> offers a variety of geometries for more complex visualizations, such as <code>geom_smooth</code>, <code>geom_violin</code>, and <code>geom_density</code>.</p>
</div><h2><p>Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cCA8LSBnZ3Bsb3QobXBnLCBhZXMoeCA9IGRpc3BsLCB5ID0gaHd5KSkgKwogIGdlb21fcG9pbnQoKSArCiAgZ2VvbV9zbW9vdGgobWV0aG9kID0gImxtIiwgc2UgPSBGQUxTRSwgY29sb3IgPSAiYmx1ZSIpCgpwcmludChwKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>p &lt;- ggplot(mpg, aes(x = displ, y = hwy)) +
  geom_point() +
  geom_smooth(method = &quot;lm&quot;, se = FALSE, color = &quot;blue&quot;)

print(p)</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><code>geom_smooth(method = &quot;lm&quot;, ...)</code>: Adds a linear model fit line to the plot.</li>
</ul>
</div><h1><ol start="6">
<li>Extensions and Plugins</li>
</ol>
</h1>
<div class='content'><p><code>ggplot2</code> can be extended with various packages that add new functionalities, such as <code>ggthemes</code>, <code>ggrepel</code>, and <code>gganimate</code>.</p>
</div><h2><p>Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGlicmFyeShnZ3JlcGVsKQoKcCA8LSBnZ3Bsb3QobXBnLCBhZXMoeCA9IGRpc3BsLCB5ID0gaHd5LCBsYWJlbCA9IG1vZGVsKSkgKwogIGdlb21fcG9pbnQoKSArCiAgZ2VvbV90ZXh0X3JlcGVsKCkKCnByaW50KHAp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>library(ggrepel)

p &lt;- ggplot(mpg, aes(x = displ, y = hwy, label = model)) +
  geom_point() +
  geom_text_repel()

print(p)</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><code>geom_text_repel()</code>: Adds text labels to points, with automatic repelling to avoid overlap.</li>
</ul>
</div><h1><p>Practical Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Faceting and Customization</p>
</h2>
<div class='content'><p>Create a faceted plot of the <code>mpg</code> dataset, faceting by the <code>class</code> variable. Customize the plot with a theme of your choice and add appropriate labels.</p>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cCA8LSBnZ3Bsb3QobXBnLCBhZXMoeCA9IGRpc3BsLCB5ID0gaHd5KSkgKwogIGdlb21fcG9pbnQoKSArCiAgZmFjZXRfd3JhcCh+IGNsYXNzKSArCiAgdGhlbWVfYncoKSArCiAgbGFicyh0aXRsZSA9ICJEaXNwbGFjZW1lbnQgdnMgSGlnaHdheSBNUEcgYnkgQ2xhc3MiLAogICAgICAgeCA9ICJEaXNwbGFjZW1lbnQgKEwpIiwKICAgICAgIHkgPSAiSGlnaHdheSBNUEciKQoKcHJpbnQocCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>p &lt;- ggplot(mpg, aes(x = displ, y = hwy)) +
  geom_point() +
  facet_wrap(~ class) +
  theme_bw() +
  labs(title = &quot;Displacement vs Highway MPG by Class&quot;,
       x = &quot;Displacement (L)&quot;,
       y = &quot;Highway MPG&quot;)

print(p)</pre></div><div class='content'></div><h2><p>Exercise 2: Annotations and Advanced Geometries</p>
</h2>
<div class='content'><p>Create a scatter plot of <code>mpg</code> dataset with <code>displ</code> on the x-axis and <code>hwy</code> on the y-axis. Add a smooth line and annotate the plot with a text label at coordinates (6, 40).</p>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cCA8LSBnZ3Bsb3QobXBnLCBhZXMoeCA9IGRpc3BsLCB5ID0gaHd5KSkgKwogIGdlb21fcG9pbnQoKSArCiAgZ2VvbV9zbW9vdGgobWV0aG9kID0gImxtIiwgc2UgPSBGQUxTRSwgY29sb3IgPSAiYmx1ZSIpICsKICBhbm5vdGF0ZSgidGV4dCIsIHggPSA2LCB5ID0gNDAsIGxhYmVsID0gIkhpZ2ggRWZmaWNpZW5jeSIsIGNvbG9yID0gInJlZCIpCgpwcmludChwKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>p &lt;- ggplot(mpg, aes(x = displ, y = hwy)) +
  geom_point() +
  geom_smooth(method = &quot;lm&quot;, se = FALSE, color = &quot;blue&quot;) +
  annotate(&quot;text&quot;, x = 6, y = 40, label = &quot;High Efficiency&quot;, color = &quot;red&quot;)

print(p)</pre></div><div class='content'></div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we explored advanced features of <code>ggplot2</code>, including faceting, themes, annotations, combining multiple plots, advanced geometries, and extensions. These tools will help you create more sophisticated and customized visualizations, enhancing your ability to communicate data insights effectively. In the next module, we will dive into interactive visualizations with <code>plotly</code>.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='03-03-ggplot2-basics' title="ggplot2 Basics">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='03-05-interactive-visualizations-plotly' title="Interactive Visualizations with plotly">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
