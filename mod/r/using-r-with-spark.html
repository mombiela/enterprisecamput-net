<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using R with Spark</title>

    <link rel="alternate" href="https://campusempresa.com/mod/r/using-r-with-spark" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/r/using-r-with-spark" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/r/using-r-with-spark" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/r/using-r-with-spark" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/r/using-r-with-spark" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='using-r-with-hadoop'>&#x25C4;Using R with Hadoop</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using R with Spark</a>
	</div>
	<div class='col-4 text-end'>
					<a href='project-data-analysis'>Project: Data Analysis &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Spark and R Integration</h1>
<div class='content'><p>Apache Spark is an open-source, distributed computing system that provides an interface for programming entire clusters with implicit data parallelism and fault tolerance. Integrating Spark with R allows data scientists to leverage the power of Spark for big data processing while using the familiar R programming language.</p>
<ul>
<li><strong>Apache Spark</strong>: A powerful open-source processing engine built around speed, ease of use, and sophisticated analytics.</li>
<li><strong>R</strong>: A language and environment for statistical computing and graphics.</li>
</ul>
</div><h1>Setting Up Spark with R</h1>
<div class='content'><p>To use Spark with R, you need to install the <code>sparklyr</code> package, which provides an interface to Spark.</p>
</div><h2>Installing `sparklyr`</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW5zdGFsbC5wYWNrYWdlcygic3BhcmtseXIiKQpsaWJyYXJ5KHNwYXJrbHlyKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>install.packages(&quot;sparklyr&quot;)
library(sparklyr)</pre></div><div class='content'></div><h2>Connecting to Spark</h2>
<div class='content'><p>You can connect to a local Spark instance or a remote Spark cluster.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDb25uZWN0IHRvIGEgbG9jYWwgU3BhcmsgaW5zdGFuY2UKc2MgPC0gc3BhcmtfY29ubmVjdChtYXN0ZXIgPSAibG9jYWwiKQoKIyBDb25uZWN0IHRvIGEgcmVtb3RlIFNwYXJrIGNsdXN0ZXIKc2MgPC0gc3BhcmtfY29ubmVjdChtYXN0ZXIgPSAic3Bhcms6Ly9IT1NUOlBPUlQiKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Connect to a local Spark instance
sc &lt;- spark_connect(master = &quot;local&quot;)

# Connect to a remote Spark cluster
sc &lt;- spark_connect(master = &quot;spark://HOST:PORT&quot;)</pre></div><div class='content'></div><h1>Data Manipulation with Spark and R</h1>
<div class='content'><p>Once connected to Spark, you can use <code>dplyr</code> syntax to manipulate data.</p>
</div><h2>Loading Data into Spark</h2>
<div class='content'><p>You can load data from various sources into Spark.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBMb2FkIGEgQ1NWIGZpbGUgaW50byBTcGFyawpzcGFya19yZWFkX2NzdihzYywgbmFtZSA9ICJpcmlzX3NwYXJrIiwgcGF0aCA9ICJwYXRoL3RvL2lyaXMuY3N2IikKCiMgTG9hZCBhIERhdGFGcmFtZSBmcm9tIFIgaW50byBTcGFyawppcmlzX3RibCA8LSBjb3B5X3RvKHNjLCBpcmlzLCAiaXJpc19zcGFyayIsIG92ZXJ3cml0ZSA9IFRSVUUp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Load a CSV file into Spark
spark_read_csv(sc, name = &quot;iris_spark&quot;, path = &quot;path/to/iris.csv&quot;)

# Load a DataFrame from R into Spark
iris_tbl &lt;- copy_to(sc, iris, &quot;iris_spark&quot;, overwrite = TRUE)</pre></div><div class='content'></div><h2>Data Manipulation with `dplyr`</h2>
<div class='content'><p>You can use familiar <code>dplyr</code> functions to manipulate Spark DataFrames.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBTZWxlY3QgY29sdW1ucwppcmlzX3RibCAlPiUKICBzZWxlY3QoU2VwYWxfTGVuZ3RoLCBTcGVjaWVzKQoKIyBGaWx0ZXIgcm93cwppcmlzX3RibCAlPiUKICBmaWx0ZXIoU2VwYWxfTGVuZ3RoID4gNS4wKQoKIyBHcm91cCBieSBhbmQgc3VtbWFyaXplCmlyaXNfdGJsICU+JQogIGdyb3VwX2J5KFNwZWNpZXMpICU+JQogIHN1bW1hcml6ZShtZWFuX3NlcGFsX2xlbmd0aCA9IG1lYW4oU2VwYWxfTGVuZ3RoKSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Select columns
iris_tbl %&gt;%
  select(Sepal_Length, Species)

# Filter rows
iris_tbl %&gt;%
  filter(Sepal_Length &gt; 5.0)

# Group by and summarize
iris_tbl %&gt;%
  group_by(Species) %&gt;%
  summarize(mean_sepal_length = mean(Sepal_Length))</pre></div><div class='content'></div><h1>Machine Learning with Spark and R</h1>
<div class='content'><p>The <code>sparklyr</code> package provides a high-level interface for machine learning with Spark.</p>
</div><h2>Building a Machine Learning Model</h2>
<div class='content'><p>You can use Spark MLlib to build machine learning models.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBQYXJ0aXRpb24gdGhlIGRhdGEgaW50byB0cmFpbmluZyBhbmQgdGVzdCBzZXRzCnBhcnRpdGlvbnMgPC0gaXJpc190YmwgJT4lCiAgc2RmX3BhcnRpdGlvbih0cmFpbmluZyA9IDAuNywgdGVzdCA9IDAuMywgc2VlZCA9IDEyMykKCiMgRml0IGEgbG9naXN0aWMgcmVncmVzc2lvbiBtb2RlbAptbF9tb2RlbCA8LSBwYXJ0aXRpb25zJHRyYWluaW5nICU+JQogIG1sX2xvZ2lzdGljX3JlZ3Jlc3Npb24oU3BlY2llcyB+IFNlcGFsX0xlbmd0aCArIFNlcGFsX1dpZHRoICsgUGV0YWxfTGVuZ3RoICsgUGV0YWxfV2lkdGgpCgojIFByaW50IHRoZSBtb2RlbCBzdW1tYXJ5CnN1bW1hcnkobWxfbW9kZWwp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Partition the data into training and test sets
partitions &lt;- iris_tbl %&gt;%
  sdf_partition(training = 0.7, test = 0.3, seed = 123)

# Fit a logistic regression model
ml_model &lt;- partitions$training %&gt;%
  ml_logistic_regression(Species ~ Sepal_Length + Sepal_Width + Petal_Length + Petal_Width)

# Print the model summary
summary(ml_model)</pre></div><div class='content'></div><h2>Making Predictions</h2>
<div class='content'><p>You can use the trained model to make predictions on new data.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBNYWtlIHByZWRpY3Rpb25zIG9uIHRoZSB0ZXN0IHNldApwcmVkaWN0aW9ucyA8LSBtbF9tb2RlbCAlPiUKICBtbF9wcmVkaWN0KHBhcnRpdGlvbnMkdGVzdCkKCiMgU2hvdyB0aGUgcHJlZGljdGlvbnMKcHJlZGljdGlvbnMgJT4lCiAgc2VsZWN0KFNwZWNpZXMsIHByZWRpY3Rpb24p"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Make predictions on the test set
predictions &lt;- ml_model %&gt;%
  ml_predict(partitions$test)

# Show the predictions
predictions %&gt;%
  select(Species, prediction)</pre></div><div class='content'></div><h1>Advanced Topics</h1>
<div class='content'><p>For advanced users, <code>sparklyr</code> provides additional functionalities such as custom transformations and integration with other Spark libraries.</p>
</div><h2>Custom Transformations</h2>
<div class='content'><p>You can define custom R functions and apply them to Spark DataFrames.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBEZWZpbmUgYSBjdXN0b20gUiBmdW5jdGlvbgpjdXN0b21fZnVuY3Rpb24gPC0gZnVuY3Rpb24oZGYpIHsKICBkZiAlPiUKICAgIG11dGF0ZShTZXBhbF9SYXRpbyA9IFNlcGFsX0xlbmd0aCAvIFNlcGFsX1dpZHRoKQp9CgojIEFwcGx5IHRoZSBjdXN0b20gZnVuY3Rpb24gdG8gYSBTcGFyayBEYXRhRnJhbWUKaXJpc19jdXN0b20gPC0gaXJpc190YmwgJT4lCiAgc2RmX3dpdGhfc2VwYXJhdGUoY3VzdG9tX2Z1bmN0aW9uKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Define a custom R function
custom_function &lt;- function(df) {
  df %&gt;%
    mutate(Sepal_Ratio = Sepal_Length / Sepal_Width)
}

# Apply the custom function to a Spark DataFrame
iris_custom &lt;- iris_tbl %&gt;%
  sdf_with_separate(custom_function)</pre></div><div class='content'></div><h2>Integration with Other Spark Libraries</h2>
<div class='content'><p>You can integrate <code>sparklyr</code> with other Spark libraries like GraphFrames and SparkR.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeGFtcGxlIG9mIHVzaW5nIEdyYXBoRnJhbWVzCmxpYnJhcnkoZ3JhcGhmcmFtZXMpCmcgPC0gZ2ZfZ3JhcGhmcmFtZSh2ZXJ0aWNlcywgZWRnZXMp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Example of using GraphFrames
library(graphframes)
g &lt;- gf_graphframe(vertices, edges)</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Integrating R with Spark using the <code>sparklyr</code> package allows data scientists to leverage the power of Spark for big data processing while using the familiar R programming language. This integration provides a seamless experience for data manipulation, machine learning, and advanced data processing tasks. By following the steps outlined in this topic, you can set up Spark with R, perform data manipulation, build machine learning models, and explore advanced functionalities.</p>
<p>Remember to practice the examples provided and explore the <code>sparklyr</code> documentation for more advanced use cases and functionalities.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='using-r-with-hadoop'>&#x25C4;Using R with Hadoop</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using R with Spark</a>
	</div>
	<div class='col-4 text-end'>
					<a href='project-data-analysis'>Project: Data Analysis &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
