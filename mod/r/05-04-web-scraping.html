<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Scraping</title>

    <link rel="alternate" href="https://campusempresa.com/mod/r/05-04-web-scraping" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/r/05-04-web-scraping" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/r/05-04-web-scraping" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/r/05-04-web-scraping" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/r/05-04-web-scraping" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-03-working-large-datasets' title="Working with Large Datasets">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Web Scraping</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-05-apis-json' title="APIs and JSON">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Web scraping is the process of extracting data from websites. In R, this can be achieved using various packages such as <code>rvest</code>, <code>httr</code>, and <code>xml2</code>. This section will guide you through the basics of web scraping, including how to retrieve and parse HTML content, extract specific data, and handle common challenges.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>HTTP Requests</strong>: Understanding how to make requests to web servers to retrieve HTML content.</li>
<li><strong>HTML Parsing</strong>: Using tools to parse and navigate the HTML structure of a webpage.</li>
<li><strong>Data Extraction</strong>: Techniques to extract specific data from the parsed HTML.</li>
<li><strong>Handling Dynamic Content</strong>: Approaches to deal with websites that use JavaScript to load content dynamically.</li>
</ol>
</div><h1>Packages Used</h1>
<div class='content'><ul>
<li><code>rvest</code>: Simplifies the process of scraping web data.</li>
<li><code>httr</code>: Provides tools for working with HTTP.</li>
<li><code>xml2</code>: Used for parsing XML and HTML.</li>
</ul>
</div><h1>Step-by-Step Guide</h1>
<div class='content'></div><h2>1. Installing Required Packages</h2>
<div class='content'><p>First, ensure you have the necessary packages installed:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW5zdGFsbC5wYWNrYWdlcygicnZlc3QiKQppbnN0YWxsLnBhY2thZ2VzKCJodHRyIikKaW5zdGFsbC5wYWNrYWdlcygieG1sMiIp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>install.packages(&quot;rvest&quot;)
install.packages(&quot;httr&quot;)
install.packages(&quot;xml2&quot;)</pre></div><div class='content'></div><h2>2. Making HTTP Requests</h2>
<div class='content'><p>Use the <code>httr</code> package to make HTTP requests and retrieve the HTML content of a webpage.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGlicmFyeShodHRyKQoKIyBNYWtlIGEgR0VUIHJlcXVlc3QgdG8gYSB3ZWJwYWdlCnVybCA8LSAiaHR0cHM6Ly9leGFtcGxlLmNvbSIKcmVzcG9uc2UgPC0gR0VUKHVybCkKCiMgQ2hlY2sgdGhlIHN0YXR1cyBvZiB0aGUgcmVzcG9uc2UKc3RhdHVzX2NvZGUocmVzcG9uc2Up"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>library(httr)

# Make a GET request to a webpage
url &lt;- &quot;https://example.com&quot;
response &lt;- GET(url)

# Check the status of the response
status_code(response)</pre></div><div class='content'></div><h2>3. Parsing HTML Content</h2>
<div class='content'><p>Use the <code>rvest</code> and <code>xml2</code> packages to parse the HTML content.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGlicmFyeShydmVzdCkKbGlicmFyeSh4bWwyKQoKIyBQYXJzZSB0aGUgSFRNTCBjb250ZW50Cmh0bWxfY29udGVudCA8LSBjb250ZW50KHJlc3BvbnNlLCBhcyA9ICJ0ZXh0IikKcGFyc2VkX2h0bWwgPC0gcmVhZF9odG1sKGh0bWxfY29udGVudCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>library(rvest)
library(xml2)

# Parse the HTML content
html_content &lt;- content(response, as = &quot;text&quot;)
parsed_html &lt;- read_html(html_content)</pre></div><div class='content'></div><h2>4. Extracting Data</h2>
<div class='content'><p>Extract specific data from the parsed HTML using CSS selectors or XPath.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeHRyYWN0IHRoZSB0aXRsZSBvZiB0aGUgd2VicGFnZQpwYWdlX3RpdGxlIDwtIHBhcnNlZF9odG1sICU+JSBodG1sX25vZGUoInRpdGxlIikgJT4lIGh0bWxfdGV4dCgpCnByaW50KHBhZ2VfdGl0bGUpCgojIEV4dHJhY3QgYWxsIGxpbmtzIGZyb20gdGhlIHdlYnBhZ2UKbGlua3MgPC0gcGFyc2VkX2h0bWwgJT4lIGh0bWxfbm9kZXMoImEiKSAlPiUgaHRtbF9hdHRyKCJocmVmIikKcHJpbnQobGlua3Mp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Extract the title of the webpage
page_title &lt;- parsed_html %&gt;% html_node(&quot;title&quot;) %&gt;% html_text()
print(page_title)

# Extract all links from the webpage
links &lt;- parsed_html %&gt;% html_nodes(&quot;a&quot;) %&gt;% html_attr(&quot;href&quot;)
print(links)</pre></div><div class='content'></div><h2>5. Handling Dynamic Content</h2>
<div class='content'><p>For websites that load content dynamically using JavaScript, you may need to use additional tools like <code>RSelenium</code> or APIs provided by the website.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeGFtcGxlIHVzaW5nIFJTZWxlbml1bSAocmVxdWlyZXMgYWRkaXRpb25hbCBzZXR1cCkKIyBpbnN0YWxsLnBhY2thZ2VzKCJSU2VsZW5pdW0iKQpsaWJyYXJ5KFJTZWxlbml1bSkKCiMgU3RhcnQgYSBTZWxlbml1bSBzZXJ2ZXIgYW5kIGJyb3dzZXIKckQgPC0gcnNEcml2ZXIoYnJvd3NlciA9ICJmaXJlZm94IiwgcG9ydCA9IDQ1NDVMKQpyZW1EciA8LSByRFtbImNsaWVudCJdXQoKIyBOYXZpZ2F0ZSB0byB0aGUgd2VicGFnZQpyZW1EciRuYXZpZ2F0ZSgiaHR0cHM6Ly9leGFtcGxlLmNvbSIpCgojIEV4dHJhY3QgZHluYW1pYyBjb250ZW50CmR5bmFtaWNfY29udGVudCA8LSByZW1EciRnZXRQYWdlU291cmNlKClbWzFdXQpwYXJzZWRfZHluYW1pY19odG1sIDwtIHJlYWRfaHRtbChkeW5hbWljX2NvbnRlbnQpCgojIEV4dHJhY3QgZGF0YSBmcm9tIHRoZSBkeW5hbWljIGNvbnRlbnQKZHluYW1pY19kYXRhIDwtIHBhcnNlZF9keW5hbWljX2h0bWwgJT4lIGh0bWxfbm9kZXMoIi5keW5hbWljLWNsYXNzIikgJT4lIGh0bWxfdGV4dCgpCnByaW50KGR5bmFtaWNfZGF0YSkKCiMgQ2xvc2UgdGhlIGJyb3dzZXIKcmVtRHIkY2xvc2UoKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Example using RSelenium (requires additional setup)
# install.packages(&quot;RSelenium&quot;)
library(RSelenium)

# Start a Selenium server and browser
rD &lt;- rsDriver(browser = &quot;firefox&quot;, port = 4545L)
remDr &lt;- rD[[&quot;client&quot;]]

# Navigate to the webpage
remDr$navigate(&quot;https://example.com&quot;)

# Extract dynamic content
dynamic_content &lt;- remDr$getPageSource()[[1]]
parsed_dynamic_html &lt;- read_html(dynamic_content)

# Extract data from the dynamic content
dynamic_data &lt;- parsed_dynamic_html %&gt;% html_nodes(&quot;.dynamic-class&quot;) %&gt;% html_text()
print(dynamic_data)

# Close the browser
remDr$close()</pre></div><div class='content'></div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise 1: Scrape Data from a Simple Webpage</h2>
<div class='content'><ol>
<li>Choose a simple webpage (e.g., a blog or news site).</li>
<li>Write an R script to:
<ul>
<li>Make an HTTP request to the webpage.</li>
<li>Parse the HTML content.</li>
<li>Extract the main heading and all paragraph texts.</li>
</ul>
</li>
</ol>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGlicmFyeShodHRyKQpsaWJyYXJ5KHJ2ZXN0KQoKIyBTdGVwIDE6IE1ha2UgYW4gSFRUUCByZXF1ZXN0CnVybCA8LSAiaHR0cHM6Ly9leGFtcGxlLWJsb2cuY29tIgpyZXNwb25zZSA8LSBHRVQodXJsKQoKIyBTdGVwIDI6IFBhcnNlIHRoZSBIVE1MIGNvbnRlbnQKaHRtbF9jb250ZW50IDwtIGNvbnRlbnQocmVzcG9uc2UsIGFzID0gInRleHQiKQpwYXJzZWRfaHRtbCA8LSByZWFkX2h0bWwoaHRtbF9jb250ZW50KQoKIyBTdGVwIDM6IEV4dHJhY3QgdGhlIG1haW4gaGVhZGluZwptYWluX2hlYWRpbmcgPC0gcGFyc2VkX2h0bWwgJT4lIGh0bWxfbm9kZSgiaDEiKSAlPiUgaHRtbF90ZXh0KCkKcHJpbnQobWFpbl9oZWFkaW5nKQoKIyBTdGVwIDQ6IEV4dHJhY3QgYWxsIHBhcmFncmFwaCB0ZXh0cwpwYXJhZ3JhcGhzIDwtIHBhcnNlZF9odG1sICU+JSBodG1sX25vZGVzKCJwIikgJT4lIGh0bWxfdGV4dCgpCnByaW50KHBhcmFncmFwaHMp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>library(httr)
library(rvest)

# Step 1: Make an HTTP request
url &lt;- &quot;https://example-blog.com&quot;
response &lt;- GET(url)

# Step 2: Parse the HTML content
html_content &lt;- content(response, as = &quot;text&quot;)
parsed_html &lt;- read_html(html_content)

# Step 3: Extract the main heading
main_heading &lt;- parsed_html %&gt;% html_node(&quot;h1&quot;) %&gt;% html_text()
print(main_heading)

# Step 4: Extract all paragraph texts
paragraphs &lt;- parsed_html %&gt;% html_nodes(&quot;p&quot;) %&gt;% html_text()
print(paragraphs)</pre></div><div class='content'></div><h2>Exercise 2: Scrape Data from a Table</h2>
<div class='content'><ol>
<li>Find a webpage with a table (e.g., a Wikipedia page).</li>
<li>Write an R script to:
<ul>
<li>Make an HTTP request to the webpage.</li>
<li>Parse the HTML content.</li>
<li>Extract the table data into a data frame.</li>
</ul>
</li>
</ol>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGlicmFyeShodHRyKQpsaWJyYXJ5KHJ2ZXN0KQoKIyBTdGVwIDE6IE1ha2UgYW4gSFRUUCByZXF1ZXN0CnVybCA8LSAiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGlzdF9vZl9jb3VudHJpZXNfYnlfcG9wdWxhdGlvbl8oVW5pdGVkX05hdGlvbnMpIgpyZXNwb25zZSA8LSBHRVQodXJsKQoKIyBTdGVwIDI6IFBhcnNlIHRoZSBIVE1MIGNvbnRlbnQKaHRtbF9jb250ZW50IDwtIGNvbnRlbnQocmVzcG9uc2UsIGFzID0gInRleHQiKQpwYXJzZWRfaHRtbCA8LSByZWFkX2h0bWwoaHRtbF9jb250ZW50KQoKIyBTdGVwIDM6IEV4dHJhY3QgdGhlIHRhYmxlIGRhdGEKdGFibGVfZGF0YSA8LSBwYXJzZWRfaHRtbCAlPiUgaHRtbF9ub2RlKCJ0YWJsZS53aWtpdGFibGUiKSAlPiUgaHRtbF90YWJsZSgpCnByaW50KHRhYmxlX2RhdGEp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>library(httr)
library(rvest)

# Step 1: Make an HTTP request
url &lt;- &quot;https://en.wikipedia.org/wiki/List_of_countries_by_population_(United_Nations)&quot;
response &lt;- GET(url)

# Step 2: Parse the HTML content
html_content &lt;- content(response, as = &quot;text&quot;)
parsed_html &lt;- read_html(html_content)

# Step 3: Extract the table data
table_data &lt;- parsed_html %&gt;% html_node(&quot;table.wikitable&quot;) %&gt;% html_table()
print(table_data)</pre></div><div class='content'></div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Incorrect CSS Selectors</strong>: Ensure you are using the correct CSS selectors or XPath expressions to target the desired elements.</li>
<li><strong>Handling Errors</strong>: Always check the status code of your HTTP requests and handle errors appropriately.</li>
<li><strong>Dynamic Content</strong>: For dynamic content, consider using tools like <code>RSelenium</code> or checking if the website provides an API.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Web scraping in R is a powerful technique for extracting data from websites. By understanding how to make HTTP requests, parse HTML content, and extract specific data, you can automate the process of gathering information from the web. Practice with different websites and data structures to become proficient in web scraping.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-03-working-large-datasets' title="Working with Large Datasets">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-05-apis-json' title="APIs and JSON">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
