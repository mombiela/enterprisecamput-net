<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RESTful Services</title>

    <link rel="alternate" href="https://campusempresa.com/mod/delphi/07-02-restful-services" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/delphi/07-02-restful-services" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/delphi/07-02-restful-services" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/delphi/07-02-restful-services" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/delphi/07-02-restful-services" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='07-01-web-development-delphi' title="Web Development with Delphi">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">RESTful Services</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-03-mobile-development-delphi' title="Mobile Development with Delphi">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this module, we will explore how to create and consume RESTful services using Delphi. RESTful services are a popular way to build web services that are lightweight, scalable, and easy to maintain. They use standard HTTP methods and can be consumed by a wide variety of clients, including web browsers, mobile apps, and other servers.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>REST (Representational State Transfer)</strong>: An architectural style for designing networked applications.</li>
<li><strong>HTTP Methods</strong>: Common methods include GET, POST, PUT, DELETE.</li>
<li><strong>Endpoints</strong>: URLs that represent resources in the RESTful service.</li>
<li><strong>JSON (JavaScript Object Notation)</strong>: A lightweight data-interchange format often used in RESTful services.</li>
<li><strong>HTTP Status Codes</strong>: Codes that indicate the result of the HTTP request (e.g., 200 OK, 404 Not Found).</li>
</ol>
</div><h1><p>Setting Up a RESTful Service in Delphi</p>
</h1>
<div class='content'></div><h2><p>Step 1: Create a New Delphi Project</p>
</h2>
<div class='content'><ol>
<li>Open Delphi and create a new project.</li>
<li>Select &quot;File&quot; &gt; &quot;New&quot; &gt; &quot;Other&quot; &gt; &quot;Delphi Projects&quot; &gt; &quot;WebBroker Application&quot;.</li>
<li>Choose &quot;Stand-alone VCL Application&quot; and click &quot;Next&quot;.</li>
<li>Click &quot;Finish&quot; to create the project.</li>
</ol>
</div><h2><p>Step 2: Define the RESTful Endpoints</p>
</h2>
<div class='content'><ol>
<li>Add a new unit to your project for the RESTful service logic.</li>
<li>Define the endpoints using TWebModule and TWebActionItem.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dW5pdCBVbml0MTsKCmludGVyZmFjZQoKdXNlcwogIFN5c3RlbS5TeXNVdGlscywgU3lzdGVtLkNsYXNzZXMsIFdlYi5IVFRQQXBwOwoKdHlwZQogIFRXZWJNb2R1bGUxID0gY2xhc3MoVFdlYk1vZHVsZSkKICAgIHByb2NlZHVyZSBXZWJNb2R1bGUxRGVmYXVsdEhhbmRsZXJBY3Rpb24oU2VuZGVyOiBUT2JqZWN0OyBSZXF1ZXN0OiBUV2ViUmVxdWVzdDsgUmVzcG9uc2U6IFRXZWJSZXNwb25zZTsgdmFyIEhhbmRsZWQ6IEJvb2xlYW4pOwogICAgcHJvY2VkdXJlIFdlYk1vZHVsZTFHZXRJdGVtQWN0aW9uKFNlbmRlcjogVE9iamVjdDsgUmVxdWVzdDogVFdlYlJlcXVlc3Q7IFJlc3BvbnNlOiBUV2ViUmVzcG9uc2U7IHZhciBIYW5kbGVkOiBCb29sZWFuKTsKICBwcml2YXRlCiAgICB7IFByaXZhdGUgZGVjbGFyYXRpb25zIH0KICBwdWJsaWMKICAgIHsgUHVibGljIGRlY2xhcmF0aW9ucyB9CiAgZW5kOwoKdmFyCiAgV2ViTW9kdWxlMTogVFdlYk1vZHVsZTE7CgppbXBsZW1lbnRhdGlvbgoKeyVDTEFTU0dST1VQICdWY2wuQ29udHJvbHMuVENvbnRyb2wnfQoKeyRSICouZGZtfQoKcHJvY2VkdXJlIFRXZWJNb2R1bGUxLldlYk1vZHVsZTFEZWZhdWx0SGFuZGxlckFjdGlvbihTZW5kZXI6IFRPYmplY3Q7IFJlcXVlc3Q6IFRXZWJSZXF1ZXN0OyBSZXNwb25zZTogVFdlYlJlc3BvbnNlOyB2YXIgSGFuZGxlZDogQm9vbGVhbik7CmJlZ2luCiAgUmVzcG9uc2UuQ29udGVudCA6PSAnV2VsY29tZSB0byB0aGUgUkVTVGZ1bCBTZXJ2aWNlISc7CmVuZDsKCnByb2NlZHVyZSBUV2ViTW9kdWxlMS5XZWJNb2R1bGUxR2V0SXRlbUFjdGlvbihTZW5kZXI6IFRPYmplY3Q7IFJlcXVlc3Q6IFRXZWJSZXF1ZXN0OyBSZXNwb25zZTogVFdlYlJlc3BvbnNlOyB2YXIgSGFuZGxlZDogQm9vbGVhbik7CnZhcgogIEl0ZW1JRDogc3RyaW5nOwpiZWdpbgogIEl0ZW1JRCA6PSBSZXF1ZXN0LlF1ZXJ5RmllbGRzLlZhbHVlc1snaWQnXTsKICBpZiBJdGVtSUQgPD4gJycgdGhlbgogICAgUmVzcG9uc2UuQ29udGVudCA6PSBGb3JtYXQoJ0l0ZW0gSUQ6ICVzJywgW0l0ZW1JRF0pCiAgZWxzZQogICAgUmVzcG9uc2UuQ29udGVudCA6PSAnSXRlbSBJRCBub3QgcHJvdmlkZWQnOwplbmQ7CgplbmQu"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>unit Unit1;

interface

uses
  System.SysUtils, System.Classes, Web.HTTPApp;

type
  TWebModule1 = class(TWebModule)
    procedure WebModule1DefaultHandlerAction(Sender: TObject; Request: TWebRequest; Response: TWebResponse; var Handled: Boolean);
    procedure WebModule1GetItemAction(Sender: TObject; Request: TWebRequest; Response: TWebResponse; var Handled: Boolean);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  WebModule1: TWebModule1;

implementation

{%CLASSGROUP 'Vcl.Controls.TControl'}

{$R *.dfm}

procedure TWebModule1.WebModule1DefaultHandlerAction(Sender: TObject; Request: TWebRequest; Response: TWebResponse; var Handled: Boolean);
begin
  Response.Content := 'Welcome to the RESTful Service!';
end;

procedure TWebModule1.WebModule1GetItemAction(Sender: TObject; Request: TWebRequest; Response: TWebResponse; var Handled: Boolean);
var
  ItemID: string;
begin
  ItemID := Request.QueryFields.Values['id'];
  if ItemID &lt;&gt; '' then
    Response.Content := Format('Item ID: %s', [ItemID])
  else
    Response.Content := 'Item ID not provided';
end;

end.</pre></div><div class='content'></div><h2><p>Step 3: Configure the WebModule</p>
</h2>
<div class='content'><ol>
<li>Open the WebModule1 unit in the designer.</li>
<li>Add two TWebActionItem components to the WebModule.</li>
<li>Set the PathInfo property of the first TWebActionItem to '/' and link it to <code>WebModule1DefaultHandlerAction</code>.</li>
<li>Set the PathInfo property of the second TWebActionItem to '/item' and link it to <code>WebModule1GetItemAction</code>.</li>
</ol>
</div><h2><p>Step 4: Run the RESTful Service</p>
</h2>
<div class='content'><ol>
<li>Run the project.</li>
<li>Open a web browser and navigate to <code>http://localhost:8080/</code> to see the default handler response.</li>
<li>Navigate to <code>http://localhost:8080/item?id=123</code> to see the item handler response.</li>
</ol>
</div><h1><p>Consuming RESTful Services</p>
</h1>
<div class='content'></div><h2><p>Step 1: Create a New Delphi Project</p>
</h2>
<div class='content'><ol>
<li>Open Delphi and create a new VCL Forms Application.</li>
</ol>
</div><h2><p>Step 2: Add Components to the Form</p>
</h2>
<div class='content'><ol>
<li>Add a TButton, TEdit, and TMemo to the form.</li>
<li>Set the TButton's Caption to &quot;Get Item&quot;.</li>
<li>Set the TEdit's Text to &quot;123&quot;.</li>
<li>Set the TMemo's Lines property to an empty string.</li>
</ol>
</div><h2><p>Step 3: Write the Code to Consume the RESTful Service</p>
</h2>
<div class='content'><ol>
<li>Add the <code>System.Net.HttpClient</code> unit to the uses clause.</li>
<li>Write the code to make an HTTP GET request to the RESTful service.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dW5pdCBVbml0MTsKCmludGVyZmFjZQoKdXNlcwogIFN5c3RlbS5TeXNVdGlscywgU3lzdGVtLkNsYXNzZXMsIFZjbC5Db250cm9scywgVmNsLkZvcm1zLCBWY2wuU3RkQ3RybHMsIFN5c3RlbS5OZXQuSHR0cENsaWVudDsKCnR5cGUKICBURm9ybTEgPSBjbGFzcyhURm9ybSkKICAgIEJ1dHRvbjE6IFRCdXR0b247CiAgICBFZGl0MTogVEVkaXQ7CiAgICBNZW1vMTogVE1lbW87CiAgICBwcm9jZWR1cmUgQnV0dG9uMUNsaWNrKFNlbmRlcjogVE9iamVjdCk7CiAgcHJpdmF0ZQogICAgeyBQcml2YXRlIGRlY2xhcmF0aW9ucyB9CiAgcHVibGljCiAgICB7IFB1YmxpYyBkZWNsYXJhdGlvbnMgfQogIGVuZDsKCnZhcgogIEZvcm0xOiBURm9ybTE7CgppbXBsZW1lbnRhdGlvbgoKeyRSICouZGZtfQoKcHJvY2VkdXJlIFRGb3JtMS5CdXR0b24xQ2xpY2soU2VuZGVyOiBUT2JqZWN0KTsKdmFyCiAgSHR0cENsaWVudDogVEh0dHBDbGllbnQ7CiAgUmVzcG9uc2U6IElIVFRQUmVzcG9uc2U7CiAgVVJMOiBzdHJpbmc7CmJlZ2luCiAgSHR0cENsaWVudCA6PSBUSHR0cENsaWVudC5DcmVhdGU7CiAgdHJ5CiAgICBVUkwgOj0gRm9ybWF0KCdodHRwOi8vbG9jYWxob3N0OjgwODAvaXRlbT9pZD0lcycsIFtFZGl0MS5UZXh0XSk7CiAgICBSZXNwb25zZSA6PSBIdHRwQ2xpZW50LkdldChVUkwpOwogICAgTWVtbzEuTGluZXMuVGV4dCA6PSBSZXNwb25zZS5Db250ZW50QXNTdHJpbmcoKTsKICBmaW5hbGx5CiAgICBIdHRwQ2xpZW50LkZyZWU7CiAgZW5kOwplbmQ7CgplbmQu"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>unit Unit1;

interface

uses
  System.SysUtils, System.Classes, Vcl.Controls, Vcl.Forms, Vcl.StdCtrls, System.Net.HttpClient;

type
  TForm1 = class(TForm)
    Button1: TButton;
    Edit1: TEdit;
    Memo1: TMemo;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.Button1Click(Sender: TObject);
var
  HttpClient: THttpClient;
  Response: IHTTPResponse;
  URL: string;
begin
  HttpClient := THttpClient.Create;
  try
    URL := Format('http://localhost:8080/item?id=%s', [Edit1.Text]);
    Response := HttpClient.Get(URL);
    Memo1.Lines.Text := Response.ContentAsString();
  finally
    HttpClient.Free;
  end;
end;

end.</pre></div><div class='content'></div><h2><p>Step 4: Run the Client Application</p>
</h2>
<div class='content'><ol>
<li>Run the project.</li>
<li>Click the &quot;Get Item&quot; button to make a request to the RESTful service and display the response in the TMemo.</li>
</ol>
</div><h1><p>Practical Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Add a New Endpoint</p>
</h2>
<div class='content'><ol>
<li>Add a new endpoint to the RESTful service that returns a list of items in JSON format.</li>
<li>Update the client application to consume this new endpoint and display the list of items.</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'><ol>
<li>Add the new endpoint to the WebModule.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvY2VkdXJlIFRXZWJNb2R1bGUxLldlYk1vZHVsZTFHZXRJdGVtc0FjdGlvbihTZW5kZXI6IFRPYmplY3Q7IFJlcXVlc3Q6IFRXZWJSZXF1ZXN0OyBSZXNwb25zZTogVFdlYlJlc3BvbnNlOyB2YXIgSGFuZGxlZDogQm9vbGVhbik7CmJlZ2luCiAgUmVzcG9uc2UuQ29udGVudFR5cGUgOj0gJ2FwcGxpY2F0aW9uL2pzb24nOwogIFJlc3BvbnNlLkNvbnRlbnQgOj0gJ1t7ImlkIjoxLCJuYW1lIjoiSXRlbSAxIn0seyJpZCI6MiwibmFtZSI6Ikl0ZW0gMiJ9XSc7CmVuZDs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>procedure TWebModule1.WebModule1GetItemsAction(Sender: TObject; Request: TWebRequest; Response: TWebResponse; var Handled: Boolean);
begin
  Response.ContentType := 'application/json';
  Response.Content := '[{&quot;id&quot;:1,&quot;name&quot;:&quot;Item 1&quot;},{&quot;id&quot;:2,&quot;name&quot;:&quot;Item 2&quot;}]';
end;</pre></div><div class='content'><ol start="2">
<li>Update the client application to consume the new endpoint.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvY2VkdXJlIFRGb3JtMS5CdXR0b24xQ2xpY2soU2VuZGVyOiBUT2JqZWN0KTsKdmFyCiAgSHR0cENsaWVudDogVEh0dHBDbGllbnQ7CiAgUmVzcG9uc2U6IElIVFRQUmVzcG9uc2U7CiAgVVJMOiBzdHJpbmc7CmJlZ2luCiAgSHR0cENsaWVudCA6PSBUSHR0cENsaWVudC5DcmVhdGU7CiAgdHJ5CiAgICBVUkwgOj0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9pdGVtcyc7CiAgICBSZXNwb25zZSA6PSBIdHRwQ2xpZW50LkdldChVUkwpOwogICAgTWVtbzEuTGluZXMuVGV4dCA6PSBSZXNwb25zZS5Db250ZW50QXNTdHJpbmcoKTsKICBmaW5hbGx5CiAgICBIdHRwQ2xpZW50LkZyZWU7CiAgZW5kOwplbmQ7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>procedure TForm1.Button1Click(Sender: TObject);
var
  HttpClient: THttpClient;
  Response: IHTTPResponse;
  URL: string;
begin
  HttpClient := THttpClient.Create;
  try
    URL := 'http://localhost:8080/items';
    Response := HttpClient.Get(URL);
    Memo1.Lines.Text := Response.ContentAsString();
  finally
    HttpClient.Free;
  end;
end;</pre></div><div class='content'></div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ul>
<li>
<p><strong>Common Mistake</strong>: Forgetting to set the ContentType of the response to 'application/json' when returning JSON data.</p>
<ul>
<li><strong>Tip</strong>: Always set the appropriate ContentType for the response to ensure the client interprets the data correctly.</li>
</ul>
</li>
<li>
<p><strong>Common Mistake</strong>: Not handling exceptions in the client application.</p>
<ul>
<li><strong>Tip</strong>: Use try-except blocks to handle exceptions and provide meaningful error messages to the user.</li>
</ul>
</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this module, we have learned how to create and consume RESTful services using Delphi. We covered the basics of setting up a RESTful service, defining endpoints, and making HTTP requests from a client application. By completing the practical exercises, you should now have a solid understanding of how to work with RESTful services in Delphi. In the next module, we will explore mobile development with Delphi, building on the skills we have learned so far.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='07-01-web-development-delphi' title="Web Development with Delphi">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-03-mobile-development-delphi' title="Mobile Development with Delphi">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
