<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consumer Groups</title>

    <link rel="alternate" href="https://campusempresa.com/mod/kafka/consumer-groups" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/kafka/consumer-groups" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/kafka/consumer-groups" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/kafka/consumer-groups" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/kafka/consumer-groups" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='consuming-messages'>&#x25C4;Consuming Messages</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Consumer Groups</a>
	</div>
	<div class='col-4 text-end'>
					<a href='offset-management'>Offset Management &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore the concept of Consumer Groups in Apache Kafka. Understanding Consumer Groups is crucial for efficiently consuming messages from Kafka topics, especially in a distributed environment.</p>
</div><h1>What are Consumer Groups?</h1>
<div class='content'><ul>
<li><strong>Definition</strong>: A Consumer Group is a group of consumers that work together to consume messages from Kafka topics.</li>
<li><strong>Purpose</strong>: They allow for parallel processing of messages and provide fault tolerance.</li>
<li><strong>Key Concept</strong>: Each message in a topic partition is consumed by only one consumer in the group.</li>
</ul>
</div><h1>How Consumer Groups Work</h1>
<div class='content'><ul>
<li><strong>Partition Assignment</strong>: Kafka divides the partitions of a topic among the consumers in a group. Each partition is consumed by only one consumer in the group.</li>
<li><strong>Rebalancing</strong>: When a consumer joins or leaves the group, Kafka reassigns the partitions among the remaining consumers.</li>
<li><strong>Offset Management</strong>: Kafka keeps track of the offset of each partition for each consumer group, ensuring that messages are not reprocessed.</li>
</ul>
</div><h2>Example: Consumer Group with Two Consumers</h2>
<div class='content'><p>Consider a topic with four partitions (P0, P1, P2, P3) and a consumer group with two consumers (C1, C2).</p>
<ul>
<li>
<p><strong>Initial Assignment</strong>:</p>
<ul>
<li>C1: P0, P1</li>
<li>C2: P2, P3</li>
</ul>
</li>
<li>
<p><strong>After C1 Leaves</strong>:</p>
<ul>
<li>C2: P0, P1, P2, P3</li>
</ul>
</li>
</ul>
</div><h1>Creating and Managing Consumer Groups</h1>
<div class='content'></div><h2>Creating a Consumer Group</h2>
<div class='content'><p>To create a consumer group, you simply start multiple consumer instances with the same group ID.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UHJvcGVydGllcyBwcm9wcyA9IG5ldyBQcm9wZXJ0aWVzKCk7CnByb3BzLnB1dCgiYm9vdHN0cmFwLnNlcnZlcnMiLCAibG9jYWxob3N0OjkwOTIiKTsKcHJvcHMucHV0KCJncm91cC5pZCIsICJteS1ncm91cCIpOwpwcm9wcy5wdXQoImtleS5kZXNlcmlhbGl6ZXIiLCAib3JnLmFwYWNoZS5rYWZrYS5jb21tb24uc2VyaWFsaXphdGlvbi5TdHJpbmdEZXNlcmlhbGl6ZXIiKTsKcHJvcHMucHV0KCJ2YWx1ZS5kZXNlcmlhbGl6ZXIiLCAib3JnLmFwYWNoZS5rYWZrYS5jb21tb24uc2VyaWFsaXphdGlvbi5TdHJpbmdEZXNlcmlhbGl6ZXIiKTsKCkthZmthQ29uc3VtZXI8U3RyaW5nLCBTdHJpbmc+IGNvbnN1bWVyID0gbmV3IEthZmthQ29uc3VtZXI8Pihwcm9wcyk7CmNvbnN1bWVyLnN1YnNjcmliZShBcnJheXMuYXNMaXN0KCJteS10b3BpYyIpKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Properties props = new Properties();
props.put(&quot;bootstrap.servers&quot;, &quot;localhost:9092&quot;);
props.put(&quot;group.id&quot;, &quot;my-group&quot;);
props.put(&quot;key.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);
props.put(&quot;value.deserializer&quot;, &quot;org.apache.kafka.common.serialization.StringDeserializer&quot;);

KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;&gt;(props);
consumer.subscribe(Arrays.asList(&quot;my-topic&quot;));</pre></div><div class='content'></div><h2>Managing Offsets</h2>
<div class='content'><p>Kafka automatically manages offsets for consumer groups, but you can also manually commit offsets.</p>
<ul>
<li>
<p><strong>Automatic Offset Commit</strong>:</p>
<pre><code class="language-java">props.put(&quot;enable.auto.commit&quot;, &quot;true&quot;);
props.put(&quot;auto.commit.interval.ms&quot;, &quot;1000&quot;);
</code></pre>
</li>
<li>
<p><strong>Manual Offset Commit</strong>:</p>
<pre><code class="language-java">props.put(&quot;enable.auto.commit&quot;, &quot;false&quot;);

// After processing records
consumer.commitSync();
</code></pre>
</li>
</ul>
</div><h2>Rebalancing</h2>
<div class='content'><p>Rebalancing occurs when:</p>
<ul>
<li>A new consumer joins the group.</li>
<li>An existing consumer leaves the group.</li>
<li>A topic's partitions are modified.</li>
</ul>
<p>Rebalancing ensures that all partitions are assigned to consumers, but it can temporarily disrupt message processing.</p>
</div><h1>Monitoring Consumer Groups</h1>
<div class='content'><p>Kafka provides tools to monitor consumer groups:</p>
<ul>
<li>
<p><strong>Kafka Consumer Group Command</strong>:</p>
<pre><code class="language-sh">kafka-consumer-groups.sh --bootstrap-server localhost:9092 --describe --group my-group
</code></pre>
</li>
<li>
<p><strong>Metrics</strong>: Kafka exposes various metrics related to consumer groups, such as lag, which can be monitored using JMX or other monitoring tools.</p>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Consumer Groups are a fundamental concept in Kafka that enable scalable and fault-tolerant message consumption. By distributing partitions among multiple consumers, they allow for parallel processing and ensure that each message is processed by only one consumer in the group. Understanding how to create, manage, and monitor consumer groups is essential for building robust Kafka-based applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='consuming-messages'>&#x25C4;Consuming Messages</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Consumer Groups</a>
	</div>
	<div class='col-4 text-end'>
					<a href='offset-management'>Offset Management &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
