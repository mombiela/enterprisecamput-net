<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integrating BigQuery with Other Google Cloud Services</title>

    <link rel="alternate" href="https://campusempresa.com/mod/bigquery/integrating-bigquery-with-google-cloud" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/bigquery/integrating-bigquery-with-google-cloud" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/bigquery/integrating-bigquery-with-google-cloud" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/bigquery/integrating-bigquery-with-google-cloud" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/bigquery/integrating-bigquery-with-google-cloud" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='bigquery-best-practices'>&#x25C4;BigQuery Best Practices</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Integrating BigQuery with Other Google Cloud Services</a>
	</div>
	<div class='col-4 text-end'>
					<a href='using-bigquery-with-data-studio'>Using BigQuery with Data Studio &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Integrating BigQuery with other Google Cloud services can significantly enhance your data processing, analysis, and visualization capabilities. This section will cover how to connect BigQuery with various Google Cloud services, including Google Cloud Storage, Google Cloud Pub/Sub, Google Data Studio, and Google Cloud Functions.</p>
</div><h1>Google Cloud Storage</h1>
<div class='content'><p>Google Cloud Storage (GCS) is a scalable object storage service that allows you to store and retrieve any amount of data at any time.</p>
</div><h2>Loading Data from Google Cloud Storage to BigQuery</h2>
<div class='content'><p>To load data from GCS into BigQuery, you can use the BigQuery web UI, the <code>bq</code> command-line tool, or the BigQuery API.</p>
<h4>Using the BigQuery Web UI</h4>
<ol>
<li>Go to the BigQuery page in the Google Cloud Console.</li>
<li>In the Explorer panel, select the dataset where you want to load the data.</li>
<li>Click on the &quot;Create Table&quot; button.</li>
<li>In the &quot;Source&quot; section, select &quot;Google Cloud Storage&quot; and provide the URI of the GCS file.</li>
<li>Configure the remaining settings and click &quot;Create Table&quot;.</li>
</ol>
<h4>Using the <code>bq</code> Command-Line Tool</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YnEgbG9hZCAtLXNvdXJjZV9mb3JtYXQ9Q1NWIG15ZGF0YXNldC5teXRhYmxlIGdzOi8vbXlidWNrZXQvbXlmaWxlLmNzdg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>bq load --source_format=CSV mydataset.mytable gs://mybucket/myfile.csv</pre></div><div class='content'><ul>
<li><code>mydataset.mytable</code>: The target dataset and table in BigQuery.</li>
<li><code>gs://mybucket/myfile.csv</code>: The URI of the file in GCS.</li>
</ul>
</div><h2>Exporting Data from BigQuery to Google Cloud Storage</h2>
<div class='content'><p>You can also export data from BigQuery to GCS for backup or further processing.</p>
<h4>Using the BigQuery Web UI</h4>
<ol>
<li>Go to the BigQuery page in the Google Cloud Console.</li>
<li>In the Explorer panel, select the table you want to export.</li>
<li>Click on the &quot;Export&quot; button.</li>
<li>Provide the destination URI in GCS and configure the export settings.</li>
<li>Click &quot;Export&quot;.</li>
</ol>
<h4>Using the <code>bq</code> Command-Line Tool</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YnEgZXh0cmFjdCAtLWRlc3RpbmF0aW9uX2Zvcm1hdD1DU1YgbXlkYXRhc2V0Lm15dGFibGUgZ3M6Ly9teWJ1Y2tldC9teWZpbGUuY3N2"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>bq extract --destination_format=CSV mydataset.mytable gs://mybucket/myfile.csv</pre></div><div class='content'><ul>
<li><code>mydataset.mytable</code>: The source dataset and table in BigQuery.</li>
<li><code>gs://mybucket/myfile.csv</code>: The destination URI in GCS.</li>
</ul>
</div><h1>Google Cloud Pub/Sub</h1>
<div class='content'><p>Google Cloud Pub/Sub is a messaging service for exchanging event data among applications and services.</p>
</div><h2>Streaming Data from Pub/Sub to BigQuery</h2>
<div class='content'><p>You can create a data pipeline to stream data from Pub/Sub to BigQuery using Dataflow.</p>
<h4>Setting Up the Dataflow Pipeline</h4>
<ol>
<li>Create a Pub/Sub topic and subscription.</li>
<li>Create a Dataflow job to read messages from the Pub/Sub subscription and write them to BigQuery.</li>
</ol>
<p>Example Dataflow pipeline code in Python:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFwYWNoZV9iZWFtIGFzIGJlYW0KZnJvbSBhcGFjaGVfYmVhbS5vcHRpb25zLnBpcGVsaW5lX29wdGlvbnMgaW1wb3J0IFBpcGVsaW5lT3B0aW9ucwpmcm9tIGFwYWNoZV9iZWFtLmlvLmdjcC5iaWdxdWVyeSBpbXBvcnQgV3JpdGVUb0JpZ1F1ZXJ5CgpkZWYgcnVuKCk6CiAgICBvcHRpb25zID0gUGlwZWxpbmVPcHRpb25zKCkKICAgIHAgPSBiZWFtLlBpcGVsaW5lKG9wdGlvbnM9b3B0aW9ucykKCiAgICAocAogICAgIHwgJ1JlYWQgZnJvbSBQdWIvU3ViJyA+PiBiZWFtLmlvLlJlYWRGcm9tUHViU3ViKHN1YnNjcmlwdGlvbj0ncHJvamVjdHMvbXlwcm9qZWN0L3N1YnNjcmlwdGlvbnMvbXlzdWJzY3JpcHRpb24nKQogICAgIHwgJ1RyYW5zZm9ybSBEYXRhJyA+PiBiZWFtLk1hcChsYW1iZGEgeDogeydmaWVsZDEnOiB4WydmaWVsZDEnXSwgJ2ZpZWxkMic6IHhbJ2ZpZWxkMiddfSkKICAgICB8ICdXcml0ZSB0byBCaWdRdWVyeScgPj4gV3JpdGVUb0JpZ1F1ZXJ5KCdteXByb2plY3Q6bXlkYXRhc2V0Lm15dGFibGUnKSkKCiAgICBwLnJ1bigpLndhaXRfdW50aWxfZmluaXNoKCkKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICBydW4oKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import apache_beam as beam
from apache_beam.options.pipeline_options import PipelineOptions
from apache_beam.io.gcp.bigquery import WriteToBigQuery

def run():
    options = PipelineOptions()
    p = beam.Pipeline(options=options)

    (p
     | 'Read from Pub/Sub' &gt;&gt; beam.io.ReadFromPubSub(subscription='projects/myproject/subscriptions/mysubscription')
     | 'Transform Data' &gt;&gt; beam.Map(lambda x: {'field1': x['field1'], 'field2': x['field2']})
     | 'Write to BigQuery' &gt;&gt; WriteToBigQuery('myproject:mydataset.mytable'))

    p.run().wait_until_finish()

if __name__ == '__main__':
    run()</pre></div><div class='content'><ul>
<li><code>myproject:mydataset.mytable</code>: The target dataset and table in BigQuery.</li>
<li><code>projects/myproject/subscriptions/mysubscription</code>: The Pub/Sub subscription.</li>
</ul>
</div><h1>Google Data Studio</h1>
<div class='content'><p>Google Data Studio is a data visualization tool that allows you to create interactive dashboards and reports.</p>
</div><h2>Connecting BigQuery to Google Data Studio</h2>
<div class='content'><ol>
<li>Open Google Data Studio.</li>
<li>Click on &quot;Create&quot; and select &quot;Data Source&quot;.</li>
<li>Choose &quot;BigQuery&quot; as the connector.</li>
<li>Select your project, dataset, and table.</li>
<li>Click &quot;Connect&quot; and configure the data source.</li>
</ol>
</div><h1>Google Cloud Functions</h1>
<div class='content'><p>Google Cloud Functions is a serverless execution environment for building and connecting cloud services.</p>
</div><h2>Triggering BigQuery Jobs with Cloud Functions</h2>
<div class='content'><p>You can use Cloud Functions to trigger BigQuery jobs based on events, such as file uploads to GCS.</p>
<p>Example Cloud Function in Python:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBnb29nbGUuY2xvdWQgaW1wb3J0IGJpZ3F1ZXJ5CgpkZWYgdHJpZ2dlcl9iaWdxdWVyeV9qb2IoZXZlbnQsIGNvbnRleHQpOgogICAgY2xpZW50ID0gYmlncXVlcnkuQ2xpZW50KCkKICAgIHF1ZXJ5ID0gIiIiCiAgICBTRUxFQ1QgKgogICAgRlJPTSBgbXlwcm9qZWN0Lm15ZGF0YXNldC5teXRhYmxlYAogICAgV0hFUkUgdGltZXN0YW1wID49IFRJTUVTVEFNUF9TVUIoQ1VSUkVOVF9USU1FU1RBTVAoKSwgSU5URVJWQUwgMSBEQVkpCiAgICAiIiIKICAgIGpvYiA9IGNsaWVudC5xdWVyeShxdWVyeSkKICAgIHJlc3VsdHMgPSBqb2IucmVzdWx0KCkKICAgIGZvciByb3cgaW4gcmVzdWx0czoKICAgICAgICBwcmludChyb3cp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from google.cloud import bigquery

def trigger_bigquery_job(event, context):
    client = bigquery.Client()
    query = &quot;&quot;&quot;
    SELECT *
    FROM `myproject.mydataset.mytable`
    WHERE timestamp &gt;= TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 1 DAY)
    &quot;&quot;&quot;
    job = client.query(query)
    results = job.result()
    for row in results:
        print(row)</pre></div><div class='content'><ul>
<li><code>myproject.mydataset.mytable</code>: The target dataset and table in BigQuery.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Integrating BigQuery with other Google Cloud services can streamline your data workflows and enhance your analytical capabilities. Whether you are loading data from Google Cloud Storage, streaming data with Pub/Sub, visualizing data in Google Data Studio, or automating tasks with Cloud Functions, these integrations can help you leverage the full power of Google Cloud.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='bigquery-best-practices'>&#x25C4;BigQuery Best Practices</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Integrating BigQuery with Other Google Cloud Services</a>
	</div>
	<div class='col-4 text-end'>
					<a href='using-bigquery-with-data-studio'>Using BigQuery with Data Studio &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
