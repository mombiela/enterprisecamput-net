<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Integrating with Google Cloud Services</title>

    <link rel="alternate" href="https://campusempresa.com/mod/bigquery/08-01-integrating-google-cloud" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/bigquery/08-01-integrating-google-cloud" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/bigquery/08-01-integrating-google-cloud" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>var DEVELOP = window.location.href.indexOf("localhost")!=-1 && true;</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/bigquery/08-01-integrating-google-cloud" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/bigquery/08-01-integrating-google-cloud" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>
		<!-- <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
					<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Course Content
	</a>

			</div>
		</div>
	</div>
</div>
 -->
 
<div class="top-bar container-fluid">
	<div class="container-xxl">
		<nav class="navbar navbar-expand-md p-0">
			<div class="container-fluid">
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				
				<div class="collapse navbar-collapse" id="navbarNav">
					<div class="navbar-nav me-auto">
							<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Course Content
	</a>

					</div>
				</div>			
							</div>
		</nav>
	</div>
</div>				<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-04-compliance-best-practices' title="Compliance and Best Practices">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<h2 style="text-decoration:underline">Integrating with Google Cloud Services</h2>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-02-using-dataflow' title="Using BigQuery with Dataflow">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this module, we will explore how to integrate BigQuery with various Google Cloud services. This integration allows you to leverage the full power of the Google Cloud ecosystem, enabling seamless data flow, enhanced analytics, and automated workflows.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Google Cloud Storage (GCS) Integration</strong></li>
<li><strong>Google Cloud Pub/Sub Integration</strong></li>
<li><strong>Google Cloud Dataflow Integration</strong></li>
<li><strong>Google Cloud Functions Integration</strong></li>
</ol>
</div><h1><ol>
<li>Google Cloud Storage (GCS) Integration</li>
</ol></h1>
<div class='content'><p>Google Cloud Storage is a scalable and secure object storage service. Integrating BigQuery with GCS allows you to load data from GCS into BigQuery and export data from BigQuery to GCS.</p>
</div><h2>Loading Data from GCS to BigQuery</h2>
<div class='content'><p>To load data from GCS into BigQuery, you can use the BigQuery Console, the <code>bq</code> command-line tool, or the BigQuery API.</p>
<h4>Example: Loading a CSV File from GCS</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gU1FMIFF1ZXJ5IHRvIGxvYWQgZGF0YSBmcm9tIEdDUyBpbnRvIEJpZ1F1ZXJ5CkxPQUQgREFUQSBJTlRPIG15X2RhdGFzZXQubXlfdGFibGUKRlJPTSAnZ3M6Ly9teV9idWNrZXQvbXlfZmlsZS5jc3YnCldJVEgKICBGT1JNQVQgPSAnQ1NWJywKICBGSUVMRF9ERUxJTUlURVIgPSAnLCcsCiAgU0tJUF9MRUFESU5HX1JPV1MgPSAxOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- SQL Query to load data from GCS into BigQuery
LOAD DATA INTO my_dataset.my_table
FROM 'gs://my_bucket/my_file.csv'
WITH
  FORMAT = 'CSV',
  FIELD_DELIMITER = ',',
  SKIP_LEADING_ROWS = 1;</pre></div><div class='content'></div><h2>Exporting Data from BigQuery to GCS</h2>
<div class='content'><p>You can export query results or entire tables from BigQuery to GCS in various formats such as CSV, JSON, or Avro.</p>
<h4>Example: Exporting a Table to GCS</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gU1FMIFF1ZXJ5IHRvIGV4cG9ydCBkYXRhIGZyb20gQmlnUXVlcnkgdG8gR0NTCkVYUE9SVCBEQVRBIE9QVElPTlMoCiAgdXJpPSdnczovL215X2J1Y2tldC9teV9leHBvcnRlZF9maWxlLmNzdicsCiAgZm9ybWF0PSdDU1YnLAogIG92ZXJ3cml0ZT10cnVlCikgQVMKU0VMRUNUICogRlJPTSBteV9kYXRhc2V0Lm15X3RhYmxlOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- SQL Query to export data from BigQuery to GCS
EXPORT DATA OPTIONS(
  uri='gs://my_bucket/my_exported_file.csv',
  format='CSV',
  overwrite=true
) AS
SELECT * FROM my_dataset.my_table;</pre></div><div class='content'></div><h1><ol start="2">
<li>Google Cloud Pub/Sub Integration</li>
</ol></h1>
<div class='content'><p>Google Cloud Pub/Sub is a messaging service that allows you to send and receive messages between independent applications. Integrating BigQuery with Pub/Sub enables real-time data ingestion and processing.</p>
</div><h2>Streaming Data into BigQuery via Pub/Sub</h2>
<div class='content'><p>You can create a Pub/Sub topic and a BigQuery subscription to stream data directly into BigQuery.</p>
<h4>Example: Creating a Pub/Sub Subscription for BigQuery</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDcmVhdGUgYSBQdWIvU3ViIHRvcGljCmdjbG91ZCBwdWJzdWIgdG9waWNzIGNyZWF0ZSBteV90b3BpYwoKIyBDcmVhdGUgYSBCaWdRdWVyeSBzdWJzY3JpcHRpb24KZ2Nsb3VkIHB1YnN1YiBzdWJzY3JpcHRpb25zIGNyZWF0ZSBteV9zdWJzY3JpcHRpb24gLS10b3BpYz1teV90b3BpYyAtLXB1c2gtZW5kcG9pbnQ9aHR0cHM6Ly9iaWdxdWVyeS5nb29nbGVhcGlzLmNvbS9iaWdxdWVyeS92Mi9wcm9qZWN0cy9teV9wcm9qZWN0L2RhdGFzZXRzL215X2RhdGFzZXQvdGFibGVzL215X3RhYmxlL2luc2VydEFsbA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Create a Pub/Sub topic
gcloud pubsub topics create my_topic

# Create a BigQuery subscription
gcloud pubsub subscriptions create my_subscription --topic=my_topic --push-endpoint=https://bigquery.googleapis.com/bigquery/v2/projects/my_project/datasets/my_dataset/tables/my_table/insertAll</pre></div><div class='content'></div><h1><ol start="3">
<li>Google Cloud Dataflow Integration</li>
</ol></h1>
<div class='content'><p>Google Cloud Dataflow is a fully managed service for stream and batch data processing. Integrating BigQuery with Dataflow allows you to perform complex data transformations and load the results into BigQuery.</p>
</div><h2>Using Dataflow to Load Data into BigQuery</h2>
<div class='content'><p>You can create a Dataflow pipeline to read data from various sources, transform it, and write the results to BigQuery.</p>
<h4>Example: Dataflow Pipeline to Load Data into BigQuery</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFwYWNoZV9iZWFtIGFzIGJlYW0KZnJvbSBhcGFjaGVfYmVhbS5vcHRpb25zLnBpcGVsaW5lX29wdGlvbnMgaW1wb3J0IFBpcGVsaW5lT3B0aW9ucwoKIyBEZWZpbmUgdGhlIHBpcGVsaW5lIG9wdGlvbnMKb3B0aW9ucyA9IFBpcGVsaW5lT3B0aW9ucygKICAgIHByb2plY3Q9J215X3Byb2plY3QnLAogICAgcnVubmVyPSdEYXRhZmxvd1J1bm5lcicsCiAgICB0ZW1wX2xvY2F0aW9uPSdnczovL215X2J1Y2tldC90ZW1wJwopCgojIERlZmluZSB0aGUgcGlwZWxpbmUKd2l0aCBiZWFtLlBpcGVsaW5lKG9wdGlvbnM9b3B0aW9ucykgYXMgcDoKICAgIChwCiAgICAgfCAnUmVhZCBmcm9tIEdDUycgPj4gYmVhbS5pby5SZWFkRnJvbVRleHQoJ2dzOi8vbXlfYnVja2V0L215X2ZpbGUuY3N2JykKICAgICB8ICdUcmFuc2Zvcm0gRGF0YScgPj4gYmVhbS5NYXAobGFtYmRhIHg6IHguc3BsaXQoJywnKSkKICAgICB8ICdXcml0ZSB0byBCaWdRdWVyeScgPj4gYmVhbS5pby5Xcml0ZVRvQmlnUXVlcnkoCiAgICAgICAgICdteV9wcm9qZWN0Om15X2RhdGFzZXQubXlfdGFibGUnLAogICAgICAgICBzY2hlbWE9J25hbWU6U1RSSU5HLCBhZ2U6SU5URUdFUiwgY2l0eTpTVFJJTkcnCiAgICAgKSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import apache_beam as beam
from apache_beam.options.pipeline_options import PipelineOptions

# Define the pipeline options
options = PipelineOptions(
    project='my_project',
    runner='DataflowRunner',
    temp_location='gs://my_bucket/temp'
)

# Define the pipeline
with beam.Pipeline(options=options) as p:
    (p
     | 'Read from GCS' &gt;&gt; beam.io.ReadFromText('gs://my_bucket/my_file.csv')
     | 'Transform Data' &gt;&gt; beam.Map(lambda x: x.split(','))
     | 'Write to BigQuery' &gt;&gt; beam.io.WriteToBigQuery(
         'my_project:my_dataset.my_table',
         schema='name:STRING, age:INTEGER, city:STRING'
     ))</pre></div><div class='content'></div><h1><ol start="4">
<li>Google Cloud Functions Integration</li>
</ol></h1>
<div class='content'><p>Google Cloud Functions is a serverless execution environment for building and connecting cloud services. Integrating BigQuery with Cloud Functions allows you to automate tasks and trigger actions based on events.</p>
</div><h2>Using Cloud Functions to Trigger BigQuery Queries</h2>
<div class='content'><p>You can create a Cloud Function that triggers a BigQuery query based on an event, such as a file upload to GCS.</p>
<h4>Example: Cloud Function to Trigger a BigQuery Query</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBnb29nbGUuY2xvdWQgaW1wb3J0IGJpZ3F1ZXJ5CgpkZWYgdHJpZ2dlcl9xdWVyeShldmVudCwgY29udGV4dCk6CiAgICBjbGllbnQgPSBiaWdxdWVyeS5DbGllbnQoKQogICAgcXVlcnkgPSAiIiIKICAgIFNFTEVDVCAqIEZST00gbXlfZGF0YXNldC5teV90YWJsZQogICAgV0hFUkUgdGltZXN0YW1wID49IFRJTUVTVEFNUF9TVUIoQ1VSUkVOVF9USU1FU1RBTVAoKSwgSU5URVJWQUwgMSBEQVkpCiAgICAiIiIKICAgIHF1ZXJ5X2pvYiA9IGNsaWVudC5xdWVyeShxdWVyeSkKICAgIHJlc3VsdHMgPSBxdWVyeV9qb2IucmVzdWx0KCkKICAgIGZvciByb3cgaW4gcmVzdWx0czoKICAgICAgICBwcmludChyb3cp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from google.cloud import bigquery

def trigger_query(event, context):
    client = bigquery.Client()
    query = &quot;&quot;&quot;
    SELECT * FROM my_dataset.my_table
    WHERE timestamp &gt;= TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 1 DAY)
    &quot;&quot;&quot;
    query_job = client.query(query)
    results = query_job.result()
    for row in results:
        print(row)</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>In this section, we covered how to integrate BigQuery with various Google Cloud services, including Google Cloud Storage, Google Cloud Pub/Sub, Google Cloud Dataflow, and Google Cloud Functions. These integrations enable seamless data flow, real-time processing, and automated workflows, enhancing the capabilities of your data analytics infrastructure.</p>
<p>Next, we will explore how to use BigQuery with Dataflow in more detail.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-04-compliance-best-practices' title="Compliance and Best Practices">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-02-using-dataflow' title="Using BigQuery with Dataflow">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
				<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
	     crossorigin="anonymous"></script>
	<!-- enterprise_campus -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-0611338592562725"
	     data-ad-slot="6914733106"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
	     (adsbygoogle = window.adsbygoogle || []).push({});
	</script>
			
	<div class="container mt-2 d-none d-md-block index">
		<h1>BigQuery Course</h1>
<h2>Module 1: Introduction to BigQuery</h2>
<ul>
<li><a href="01-01-what-is-bigquery">What is BigQuery?</a></li>
<li><a href="01-02-setting-up-environment">Setting Up Your BigQuery Environment</a></li>
<li><a href="01-03-understanding-architecture">Understanding BigQuery Architecture</a></li>
<li><a href="01-04-console-overview">BigQuery Console Overview</a></li>
</ul>
<h2>Module 2: Basic SQL in BigQuery</h2>
<ul>
<li><a href="02-01-introduction-to-sql">Introduction to SQL</a></li>
<li><a href="02-02-basic-sql-queries">Basic SQL Queries</a></li>
<li><a href="02-03-filtering-sorting-data">Filtering and Sorting Data</a></li>
<li><a href="02-04-aggregating-data">Aggregating Data</a></li>
</ul>
<h2>Module 3: Intermediate SQL in BigQuery</h2>
<ul>
<li><a href="03-01-joins-unions">Joins and Unions</a></li>
<li><a href="03-02-subqueries">Subqueries</a></li>
<li><a href="03-03-common-table-expressions">Common Table Expressions (CTEs)</a></li>
<li><a href="03-04-window-functions">Window Functions</a></li>
</ul>
<h2>Module 4: Advanced SQL in BigQuery</h2>
<ul>
<li><a href="04-01-advanced-joins">Advanced Joins</a></li>
<li><a href="04-02-nested-repeated-fields">Nested and Repeated Fields</a></li>
<li><a href="04-03-user-defined-functions">User-Defined Functions (UDFs)</a></li>
<li><a href="04-04-partitioning-clustering">Partitioning and Clustering</a></li>
</ul>
<h2>Module 5: BigQuery Data Management</h2>
<ul>
<li><a href="05-01-loading-data">Loading Data into BigQuery</a></li>
<li><a href="05-02-exporting-data">Exporting Data from BigQuery</a></li>
<li><a href="05-03-data-transformation-cleaning">Data Transformation and Cleaning</a></li>
<li><a href="05-04-managing-datasets-tables">Managing Datasets and Tables</a></li>
</ul>
<h2>Module 6: BigQuery Performance Optimization</h2>
<ul>
<li><a href="06-01-query-optimization-techniques">Query Optimization Techniques</a></li>
<li><a href="06-02-query-execution-plans">Understanding Query Execution Plans</a></li>
<li><a href="06-03-using-materialized-views">Using Materialized Views</a></li>
<li><a href="06-04-optimizing-storage">Optimizing Storage</a></li>
</ul>
<h2>Module 7: BigQuery Security and Compliance</h2>
<ul>
<li><a href="07-01-access-control-permissions">Access Control and Permissions</a></li>
<li><a href="07-02-data-encryption">Data Encryption</a></li>
<li><a href="07-03-auditing-monitoring">Auditing and Monitoring</a></li>
<li><a href="07-04-compliance-best-practices">Compliance and Best Practices</a></li>
</ul>
<h2>Module 8: BigQuery Integration and Automation</h2>
<ul>
<li><a href="08-01-integrating-google-cloud">Integrating with Google Cloud Services</a></li>
<li><a href="08-02-using-dataflow">Using BigQuery with Dataflow</a></li>
<li><a href="08-03-automating-workflows">Automating Workflows with Cloud Functions</a></li>
<li><a href="08-04-scheduling-queries">Scheduling Queries with Cloud Scheduler</a></li>
</ul>
<h2>Module 9: BigQuery Machine Learning (BQML)</h2>
<ul>
<li><a href="09-01-introduction-bqml">Introduction to BigQuery ML</a></li>
<li><a href="09-02-creating-training-models">Creating and Training Models</a></li>
<li><a href="09-03-evaluating-predicting-models">Evaluating and Predicting with Models</a></li>
<li><a href="09-04-advanced-bqml-features">Advanced BQML Features</a></li>
</ul>
<h2>Module 10: Real-World BigQuery Use Cases</h2>
<ul>
<li><a href="10-01-analyzing-web-app-analytics">Analyzing Web and App Analytics</a></li>
<li><a href="10-02-financial-data-analysis">Financial Data Analysis</a></li>
<li><a href="10-03-iot-data-processing">IoT Data Processing</a></li>
<li><a href="10-04-building-dashboards-data-studio">Building Dashboards with Data Studio</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</body>
</html>
