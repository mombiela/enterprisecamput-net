<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Exporting Data from BigQuery</title>

    <link rel="alternate" href="https://campusempresa.com/mod/bigquery/05-02-exporting-data" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/bigquery/05-02-exporting-data" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/bigquery/05-02-exporting-data" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/bigquery/05-02-exporting-data" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/bigquery/05-02-exporting-data" class="px-2">CA</a>
</span>
			<span class="d-none d-md-inline"><br><cite>All the knowledge within your reach</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
					 				<a href="/"><i class="bi bi-house-fill"></i> HOME</a>
											</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-01-loading-data' title="Loading Data into BigQuery">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Exporting Data from BigQuery</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-03-data-transformation-cleaning' title="Data Transformation and Cleaning">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Exporting data from BigQuery is a crucial skill for data analysts and engineers who need to move data from BigQuery to other systems for further analysis, reporting, or storage. This section will cover the various methods and best practices for exporting data from BigQuery.</p>
</div><h1>Objectives</h1>
<div class='content'><p>By the end of this section, you will be able to:</p>
<ul>
<li>Understand the different formats available for exporting data.</li>
<li>Export data to Google Cloud Storage (GCS).</li>
<li>Export data to local storage.</li>
<li>Use the BigQuery command-line tool and API for exporting data.</li>
</ul>
</div><h1>Key Concepts</h1>
<div class='content'></div><h2>Export Formats</h2>
<div class='content'><p>BigQuery supports exporting data in several formats:</p>
<ul>
<li><strong>CSV (Comma-Separated Values)</strong></li>
<li><strong>JSON (JavaScript Object Notation)</strong></li>
<li><strong>Avro</strong></li>
<li><strong>Parquet</strong></li>
<li><strong>ORC (Optimized Row Columnar)</strong></li>
</ul>
</div><h2>Export Destinations</h2>
<div class='content'><ul>
<li><strong>Google Cloud Storage (GCS)</strong>: The most common destination for exporting data from BigQuery.</li>
<li><strong>Local Storage</strong>: Exporting data to your local machine.</li>
</ul>
</div><h1>Exporting Data to Google Cloud Storage (GCS)</h1>
<div class='content'></div><h2>Step-by-Step Guide</h2>
<div class='content'><ol>
<li>
<p><strong>Open the BigQuery Console</strong>:</p>
<ul>
<li>Navigate to the BigQuery console in the Google Cloud Platform (GCP) Console.</li>
</ul>
</li>
<li>
<p><strong>Select the Dataset and Table</strong>:</p>
<ul>
<li>In the Explorer panel, expand your project and dataset, then select the table you want to export.</li>
</ul>
</li>
<li>
<p><strong>Export Table</strong>:</p>
<ul>
<li>Click on the <code>Export</code> button at the top of the table details page.</li>
<li>Choose <code>Export to GCS</code>.</li>
</ul>
</li>
<li>
<p><strong>Configure Export Settings</strong>:</p>
<ul>
<li><strong>Destination</strong>: Enter the GCS bucket and path where you want to export the data (e.g., <code>gs://my-bucket/my-folder/</code>).</li>
<li><strong>File Format</strong>: Select the desired file format (CSV, JSON, Avro, Parquet, ORC).</li>
<li><strong>Compression</strong>: Optionally, choose a compression type (GZIP, Snappy, etc.).</li>
</ul>
</li>
<li>
<p><strong>Start Export</strong>:</p>
<ul>
<li>Click <code>Export</code> to start the export process.</li>
</ul>
</li>
</ol>
</div><h2>Example: Exporting Data to GCS using SQL</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RVhQT1JUIERBVEEKICBPUFRJT05TKAogICAgdXJpPSdnczovL215LWJ1Y2tldC9teS1mb2xkZXIvKi5jc3YnLAogICAgZm9ybWF0PSdDU1YnLAogICAgb3ZlcndyaXRlPXRydWUsCiAgICBoZWFkZXI9dHJ1ZQogICkKQVMKU0VMRUNUICoKRlJPTSBgbXktcHJvamVjdC5teS1kYXRhc2V0Lm15LXRhYmxlYDs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>EXPORT DATA
  OPTIONS(
    uri='gs://my-bucket/my-folder/*.csv',
    format='CSV',
    overwrite=true,
    header=true
  )
AS
SELECT *
FROM `my-project.my-dataset.my-table`;</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>uri</code>: Specifies the GCS bucket and path.</li>
<li><code>format</code>: Specifies the file format.</li>
<li><code>overwrite</code>: If true, overwrites existing files.</li>
<li><code>header</code>: If true, includes a header row in the CSV file.</li>
</ul>
</div><h1>Exporting Data to Local Storage</h1>
<div class='content'></div><h2>Using the BigQuery Command-Line Tool (bq)</h2>
<div class='content'><ol>
<li>
<p><strong>Install the bq Command-Line Tool</strong>:</p>
<ul>
<li>Ensure you have the <code>bq</code> tool installed and configured.</li>
</ul>
</li>
<li>
<p><strong>Run the Export Command</strong>:</p>
<pre><code class="language-sh">bq extract --destination_format CSV --compression GZIP <br>   'my-project:my-dataset.my-table' <br>   'gs://my-bucket/my-folder/my-table-*.csv.gz'
</code></pre>
</li>
</ol>
</div><h2>Using the BigQuery API</h2>
<div class='content'><ol>
<li>
<p><strong>Set Up API Access</strong>:</p>
<ul>
<li>Ensure you have the necessary API access and credentials.</li>
</ul>
</li>
<li>
<p><strong>Create an Export Job</strong>:</p>
<ul>
<li>Use the BigQuery API to create an export job.</li>
</ul>
</li>
</ol>
</div><h2>Example: Exporting Data using Python</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBnb29nbGUuY2xvdWQgaW1wb3J0IGJpZ3F1ZXJ5CgojIEluaXRpYWxpemUgYSBCaWdRdWVyeSBjbGllbnQKY2xpZW50ID0gYmlncXVlcnkuQ2xpZW50KCkKCiMgRGVmaW5lIHRoZSB0YWJsZSBhbmQgZGVzdGluYXRpb24gVVJJCnRhYmxlX3JlZiA9IGNsaWVudC5kYXRhc2V0KCdteS1kYXRhc2V0JykudGFibGUoJ215LXRhYmxlJykKZGVzdGluYXRpb25fdXJpID0gJ2dzOi8vbXktYnVja2V0L215LWZvbGRlci9teS10YWJsZS0qLmNzdicKCiMgQ29uZmlndXJlIHRoZSBleHRyYWN0IGpvYgpqb2JfY29uZmlnID0gYmlncXVlcnkuRXh0cmFjdEpvYkNvbmZpZygpCmpvYl9jb25maWcuZGVzdGluYXRpb25fZm9ybWF0ID0gYmlncXVlcnkuRGVzdGluYXRpb25Gb3JtYXQuQ1NWCmpvYl9jb25maWcuY29tcHJlc3Npb24gPSBiaWdxdWVyeS5Db21wcmVzc2lvbi5HWklQCgojIFN0YXJ0IHRoZSBleHRyYWN0IGpvYgpleHRyYWN0X2pvYiA9IGNsaWVudC5leHRyYWN0X3RhYmxlKAogICAgdGFibGVfcmVmLAogICAgZGVzdGluYXRpb25fdXJpLAogICAgam9iX2NvbmZpZz1qb2JfY29uZmlnCikKCiMgV2FpdCBmb3IgdGhlIGpvYiB0byBjb21wbGV0ZQpleHRyYWN0X2pvYi5yZXN1bHQoKQpwcmludCgiRXhwb3J0ZWQge30gdG8ge30iLmZvcm1hdCh0YWJsZV9yZWYsIGRlc3RpbmF0aW9uX3VyaSkp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from google.cloud import bigquery

# Initialize a BigQuery client
client = bigquery.Client()

# Define the table and destination URI
table_ref = client.dataset('my-dataset').table('my-table')
destination_uri = 'gs://my-bucket/my-folder/my-table-*.csv'

# Configure the extract job
job_config = bigquery.ExtractJobConfig()
job_config.destination_format = bigquery.DestinationFormat.CSV
job_config.compression = bigquery.Compression.GZIP

# Start the extract job
extract_job = client.extract_table(
    table_ref,
    destination_uri,
    job_config=job_config
)

# Wait for the job to complete
extract_job.result()
print(&quot;Exported {} to {}&quot;.format(table_ref, destination_uri))</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>bigquery.Client()</strong>: Initializes the BigQuery client.</li>
<li><strong>table_ref</strong>: References the table to be exported.</li>
<li><strong>destination_uri</strong>: Specifies the GCS bucket and path.</li>
<li><strong>job_config</strong>: Configures the export job settings.</li>
<li><strong>extract_table()</strong>: Starts the export job.</li>
<li><strong>result()</strong>: Waits for the job to complete.</li>
</ul>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise: Export Data to GCS</h2>
<div class='content'><ol>
<li><strong>Task</strong>: Export the <code>sales_data</code> table from the <code>ecommerce</code> dataset to a GCS bucket in CSV format with GZIP compression.</li>
<li><strong>Steps</strong>:
<ul>
<li>Open the BigQuery console.</li>
<li>Select the <code>sales_data</code> table in the <code>ecommerce</code> dataset.</li>
<li>Click <code>Export</code> and choose <code>Export to GCS</code>.</li>
<li>Enter the destination URI: <code>gs://my-bucket/sales_data/*.csv</code>.</li>
<li>Select <code>CSV</code> as the file format and <code>GZIP</code> as the compression type.</li>
<li>Click <code>Export</code>.</li>
</ul>
</li>
</ol>
</div><h2>Solution</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RVhQT1JUIERBVEEKICBPUFRJT05TKAogICAgdXJpPSdnczovL215LWJ1Y2tldC9zYWxlc19kYXRhLyouY3N2JywKICAgIGZvcm1hdD0nQ1NWJywKICAgIGNvbXByZXNzaW9uPSdHWklQJywKICAgIG92ZXJ3cml0ZT10cnVlLAogICAgaGVhZGVyPXRydWUKICApCkFTClNFTEVDVCAqCkZST00gYG15LXByb2plY3QuZWNvbW1lcmNlLnNhbGVzX2RhdGFgOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>EXPORT DATA
  OPTIONS(
    uri='gs://my-bucket/sales_data/*.csv',
    format='CSV',
    compression='GZIP',
    overwrite=true,
    header=true
  )
AS
SELECT *
FROM `my-project.ecommerce.sales_data`;</pre></div><div class='content'></div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Incorrect URI</strong>: Ensure the GCS bucket and path are correct and accessible.</li>
<li><strong>Permissions</strong>: Verify that you have the necessary permissions to export data to the specified GCS bucket.</li>
<li><strong>File Format</strong>: Choose the appropriate file format based on your use case and downstream processing requirements.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, you learned how to export data from BigQuery to various destinations, including Google Cloud Storage and local storage. You also explored different export formats and methods, including using the BigQuery console, command-line tool, and API. By mastering these techniques, you can efficiently move data from BigQuery to other systems for further analysis and reporting.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-01-loading-data' title="Loading Data into BigQuery">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-03-data-transformation-cleaning' title="Data Transformation and Cleaning">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Advertising</h1>
<p>This space is reserved for advertising.</p>
<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Thank you for collaborating!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			









		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
