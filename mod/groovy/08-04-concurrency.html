<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Concurrency in Groovy</title>

    <link rel="alternate" href="https://campusempresa.com/mod/groovy/08-04-concurrency" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/groovy/08-04-concurrency" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/groovy/08-04-concurrency" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/groovy/08-04-concurrency" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/groovy/08-04-concurrency" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-03-security-considerations' title="Security Considerations">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Concurrency in Groovy</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-01-project-overview' title="Project Overview">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Concurrency is a critical aspect of modern programming, allowing multiple tasks to run simultaneously, thus improving the efficiency and performance of applications. In this section, we will explore how Groovy handles concurrency, including the use of threads, the GPars library, and other concurrency utilities.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Threads</strong>: Basic units of execution within a process.</li>
<li><strong>Synchronization</strong>: Mechanism to control access to shared resources.</li>
<li><strong>Executors</strong>: Framework to manage a pool of threads.</li>
<li><strong>GPars</strong>: Groovy Parallel Systems, a library for parallel programming.</li>
</ol>
</div><h1><p>Threads in Groovy</p>
</h1>
<div class='content'><p>Groovy simplifies the creation and management of threads. Hereâ€™s a basic example of creating and starting a thread:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gQ3JlYXRpbmcgYSBuZXcgdGhyZWFkIHVzaW5nIHRoZSBUaHJlYWQgY2xhc3MKVGhyZWFkIHRocmVhZCA9IG5ldyBUaHJlYWQoewogICAgcHJpbnRsbiAiVGhyZWFkIGlzIHJ1bm5pbmciCn0pCnRocmVhZC5zdGFydCgp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Creating a new thread using the Thread class
Thread thread = new Thread({
    println &quot;Thread is running&quot;
})
thread.start()</pre></div><div class='content'></div><h2><p>Explanation:</p>
</h2>
<div class='content'><ul>
<li><code>new Thread({ ... })</code>: Creates a new thread with a closure that contains the code to be executed.</li>
<li><code>thread.start()</code>: Starts the thread, causing it to execute the closure.</li>
</ul>
</div><h1><p>Synchronization</p>
</h1>
<div class='content'><p>When multiple threads access shared resources, synchronization is necessary to prevent data corruption. Groovy uses Java's synchronization mechanisms.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgQ291bnRlciB7CiAgICBwcml2YXRlIGludCBjb3VudCA9IDAKCiAgICBzeW5jaHJvbml6ZWQgdm9pZCBpbmNyZW1lbnQoKSB7CiAgICAgICAgY291bnQrKwogICAgfQoKICAgIGludCBnZXRDb3VudCgpIHsKICAgICAgICByZXR1cm4gY291bnQKICAgIH0KfQoKQ291bnRlciBjb3VudGVyID0gbmV3IENvdW50ZXIoKQoKLy8gQ3JlYXRpbmcgbXVsdGlwbGUgdGhyZWFkcyB0byBpbmNyZW1lbnQgdGhlIGNvdW50ZXIKMTAudGltZXMgewogICAgVGhyZWFkLnN0YXJ0IHsKICAgICAgICBjb3VudGVyLmluY3JlbWVudCgpCiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Counter {
    private int count = 0

    synchronized void increment() {
        count++
    }

    int getCount() {
        return count
    }
}

Counter counter = new Counter()

// Creating multiple threads to increment the counter
10.times {
    Thread.start {
        counter.increment()
    }
}</pre></div><div class='content'></div><h2><p>Explanation:</p>
</h2>
<div class='content'><ul>
<li><code>synchronized void increment()</code>: Ensures that only one thread can execute the <code>increment</code> method at a time.</li>
<li><code>10.times { ... }</code>: Creates and starts 10 threads that increment the counter.</li>
</ul>
</div><h1><p>Executors</p>
</h1>
<div class='content'><p>Executors provide a higher-level replacement for working with threads directly. They manage a pool of threads and allow you to submit tasks for execution.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkV4ZWN1dG9ycwoKZGVmIGV4ZWN1dG9yID0gRXhlY3V0b3JzLm5ld0ZpeGVkVGhyZWFkUG9vbCgzKQoKMTAudGltZXMgewogICAgZXhlY3V0b3Iuc3VibWl0IHsKICAgICAgICBwcmludGxuICJUYXNrICRpdCBpcyBydW5uaW5nIgogICAgfQp9CgpleGVjdXRvci5zaHV0ZG93bigp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import java.util.concurrent.Executors

def executor = Executors.newFixedThreadPool(3)

10.times {
    executor.submit {
        println &quot;Task $it is running&quot;
    }
}

executor.shutdown()</pre></div><div class='content'></div><h2><p>Explanation:</p>
</h2>
<div class='content'><ul>
<li><code>Executors.newFixedThreadPool(3)</code>: Creates a thread pool with 3 threads.</li>
<li><code>executor.submit { ... }</code>: Submits a task for execution by the thread pool.</li>
<li><code>executor.shutdown()</code>: Initiates an orderly shutdown of the executor.</li>
</ul>
</div><h1><p>GPars Library</p>
</h1>
<div class='content'><p>GPars (Groovy Parallel Systems) is a powerful library for parallel programming in Groovy. It provides various concurrency constructs like actors, dataflow, and parallel collections.</p>
</div><h2><p>Using Actors</p>
</h2>
<div class='content'><p>Actors are objects that encapsulate state and behavior, processing messages asynchronously.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QEdyYWIoZ3JvdXA9J29yZy5jb2RlaGF1cy5ncGFycycsIG1vZHVsZT0nZ3BhcnMnLCB2ZXJzaW9uPScxLjIuMScpCmltcG9ydCBncm9vdnl4LmdwYXJzLmFjdG9yLkRlZmF1bHRBY3RvcgoKY2xhc3MgTXlBY3RvciBleHRlbmRzIERlZmF1bHRBY3RvciB7CiAgICB2b2lkIGFjdCgpIHsKICAgICAgICBsb29wIHsKICAgICAgICAgICAgcmVhY3QgeyBtZXNzYWdlIC0+CiAgICAgICAgICAgICAgICBwcmludGxuICJSZWNlaXZlZDogJG1lc3NhZ2UiCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KCmRlZiBhY3RvciA9IG5ldyBNeUFjdG9yKCkKYWN0b3Iuc3RhcnQoKQphY3Rvci5zZW5kKCJIZWxsbywgQWN0b3IhIik="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@Grab(group='org.codehaus.gpars', module='gpars', version='1.2.1')
import groovyx.gpars.actor.DefaultActor

class MyActor extends DefaultActor {
    void act() {
        loop {
            react { message -&gt;
                println &quot;Received: $message&quot;
            }
        }
    }
}

def actor = new MyActor()
actor.start()
actor.send(&quot;Hello, Actor!&quot;)</pre></div><div class='content'></div><h2><p>Explanation:</p>
</h2>
<div class='content'><ul>
<li><code>DefaultActor</code>: Base class for creating actors.</li>
<li><code>loop { react { ... } }</code>: Continuously processes incoming messages.</li>
<li><code>actor.send(&quot;Hello, Actor!&quot;)</code>: Sends a message to the actor.</li>
</ul>
</div><h2><p>Using Dataflow</p>
</h2>
<div class='content'><p>Dataflow variables and operators allow for deterministic parallel computations.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QEdyYWIoZ3JvdXA9J29yZy5jb2RlaGF1cy5ncGFycycsIG1vZHVsZT0nZ3BhcnMnLCB2ZXJzaW9uPScxLjIuMScpCmltcG9ydCBncm9vdnl4LmdwYXJzLmRhdGFmbG93LkRhdGFmbG93CgpkZWYgYSA9IG5ldyBEYXRhZmxvd1ZhcmlhYmxlKCkKZGVmIGIgPSBuZXcgRGF0YWZsb3dWYXJpYWJsZSgpCmRlZiBjID0gbmV3IERhdGFmbG93VmFyaWFibGUoKQoKRGF0YWZsb3cudGFzayB7CiAgICBhIDw8IDEwCn0KCkRhdGFmbG93LnRhc2sgewogICAgYiA8PCAyMAp9CgpEYXRhZmxvdy50YXNrIHsKICAgIGMgPDwgYS52YWwgKyBiLnZhbAp9CgpwcmludGxuICJSZXN1bHQ6ICR7Yy52YWx9Ig=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@Grab(group='org.codehaus.gpars', module='gpars', version='1.2.1')
import groovyx.gpars.dataflow.Dataflow

def a = new DataflowVariable()
def b = new DataflowVariable()
def c = new DataflowVariable()

Dataflow.task {
    a &lt;&lt; 10
}

Dataflow.task {
    b &lt;&lt; 20
}

Dataflow.task {
    c &lt;&lt; a.val + b.val
}

println &quot;Result: ${c.val}&quot;</pre></div><div class='content'></div><h2><p>Explanation:</p>
</h2>
<div class='content'><ul>
<li><code>DataflowVariable</code>: A variable that can be set once and read multiple times.</li>
<li><code>Dataflow.task { ... }</code>: Creates a new task that runs in parallel.</li>
<li><code>a &lt;&lt; 10</code>: Sets the value of <code>a</code>.</li>
<li><code>c.val</code>: Retrieves the value of <code>c</code>.</li>
</ul>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise: Implement a Concurrent Counter</p>
</h2>
<div class='content'><p>Create a concurrent counter using the GPars library. The counter should be incremented by multiple threads, and the final count should be printed.</p>
<h4>Solution:</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QEdyYWIoZ3JvdXA9J29yZy5jb2RlaGF1cy5ncGFycycsIG1vZHVsZT0nZ3BhcnMnLCB2ZXJzaW9uPScxLjIuMScpCmltcG9ydCBncm9vdnl4LmdwYXJzLmFjdG9yLkRlZmF1bHRBY3RvcgoKY2xhc3MgQ291bnRlckFjdG9yIGV4dGVuZHMgRGVmYXVsdEFjdG9yIHsKICAgIHByaXZhdGUgaW50IGNvdW50ID0gMAoKICAgIHZvaWQgYWN0KCkgewogICAgICAgIGxvb3AgewogICAgICAgICAgICByZWFjdCB7IG1lc3NhZ2UgLT4KICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlID09ICJpbmNyZW1lbnQiKSB7CiAgICAgICAgICAgICAgICAgICAgY291bnQrKwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlID09ICJnZXRDb3VudCIpIHsKICAgICAgICAgICAgICAgICAgICByZXBseSBjb3VudAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9CgpkZWYgY291bnRlciA9IG5ldyBDb3VudGVyQWN0b3IoKQpjb3VudGVyLnN0YXJ0KCkKCjEwLnRpbWVzIHsKICAgIFRocmVhZC5zdGFydCB7CiAgICAgICAgY291bnRlci5zZW5kKCJpbmNyZW1lbnQiKQogICAgfQp9CgpUaHJlYWQuc2xlZXAoMTAwMCkgLy8gV2FpdCBmb3IgYWxsIGluY3JlbWVudHMgdG8gY29tcGxldGUKCmNvdW50ZXIuc2VuZEFuZFdhaXQoImdldENvdW50IikgeyByZXN1bHQgLT4KICAgIHByaW50bG4gIkZpbmFsIGNvdW50OiAkcmVzdWx0Igp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@Grab(group='org.codehaus.gpars', module='gpars', version='1.2.1')
import groovyx.gpars.actor.DefaultActor

class CounterActor extends DefaultActor {
    private int count = 0

    void act() {
        loop {
            react { message -&gt;
                if (message == &quot;increment&quot;) {
                    count++
                } else if (message == &quot;getCount&quot;) {
                    reply count
                }
            }
        }
    }
}

def counter = new CounterActor()
counter.start()

10.times {
    Thread.start {
        counter.send(&quot;increment&quot;)
    }
}

Thread.sleep(1000) // Wait for all increments to complete

counter.sendAndWait(&quot;getCount&quot;) { result -&gt;
    println &quot;Final count: $result&quot;
}</pre></div><div class='content'></div><h2><p>Explanation:</p>
</h2>
<div class='content'><ul>
<li><code>CounterActor</code>: An actor that maintains a count and processes &quot;increment&quot; and &quot;getCount&quot; messages.</li>
<li><code>counter.send(&quot;increment&quot;)</code>: Sends an &quot;increment&quot; message to the counter actor.</li>
<li><code>counter.sendAndWait(&quot;getCount&quot;) { ... }</code>: Sends a &quot;getCount&quot; message and waits for the reply.</li>
</ul>
</div><h1><p>Summary</p>
</h1>
<div class='content'><p>In this section, we covered the basics of concurrency in Groovy, including:</p>
<ul>
<li>Creating and managing threads.</li>
<li>Synchronizing access to shared resources.</li>
<li>Using executors for thread management.</li>
<li>Leveraging the GPars library for advanced concurrency constructs.</li>
</ul>
<p>Understanding and effectively using concurrency can significantly improve the performance and responsiveness of your applications. In the next module, we will explore best practices and advanced topics to further enhance your Groovy programming skills.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-03-security-considerations' title="Security Considerations">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-01-project-overview' title="Project Overview">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
