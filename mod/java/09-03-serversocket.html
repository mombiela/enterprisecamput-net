<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ServerSocket</title>

    <link rel="alternate" href="https://campusempresa.com/mod/java/09-03-serversocket" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/java/09-03-serversocket" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/java/09-03-serversocket" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/java/09-03-serversocket" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/java/09-03-serversocket" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='09-02-sockets' title="Sockets">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">ServerSocket</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='09-04-datagramsocket-and-datagrampacket' title="DatagramSocket and DatagramPacket">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will delve into the <code>ServerSocket</code> class in Java, which is used to create server applications that can accept client connections. This is a crucial concept for building networked applications where a server needs to handle multiple client requests.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>ServerSocket Class</strong>: A class in Java that provides a mechanism for the server to listen for client requests on a specific port.</li>
<li><strong>Port</strong>: A numerical identifier in the range 0-65535 that is used to distinguish different services on a server.</li>
<li><strong>Socket</strong>: An endpoint for communication between two machines.</li>
</ol>
</div><h1>Creating a ServerSocket</h1>
<div class='content'><p>To create a <code>ServerSocket</code>, you need to specify a port number on which the server will listen for incoming connections. Here is a basic example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CmltcG9ydCBqYXZhLm5ldC5TZXJ2ZXJTb2NrZXQ7CmltcG9ydCBqYXZhLm5ldC5Tb2NrZXQ7CgpwdWJsaWMgY2xhc3MgU2ltcGxlU2VydmVyIHsKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsKICAgICAgICBpbnQgcG9ydCA9IDEyMzQ7IC8vIFBvcnQgbnVtYmVyIG9uIHdoaWNoIHRoZSBzZXJ2ZXIgd2lsbCBsaXN0ZW4KICAgICAgICB0cnkgKFNlcnZlclNvY2tldCBzZXJ2ZXJTb2NrZXQgPSBuZXcgU2VydmVyU29ja2V0KHBvcnQpKSB7CiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiU2VydmVyIGlzIGxpc3RlbmluZyBvbiBwb3J0ICIgKyBwb3J0KTsKICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgICAgIFNvY2tldCBzb2NrZXQgPSBzZXJ2ZXJTb2NrZXQuYWNjZXB0KCk7IC8vIFdhaXQgZm9yIGEgY2xpZW50IHRvIGNvbm5lY3QKICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiTmV3IGNsaWVudCBjb25uZWN0ZWQiKTsKICAgICAgICAgICAgICAgIC8vIEhhbmRsZSB0aGUgY2xpZW50IGNvbm5lY3Rpb24gaW4gYSBzZXBhcmF0ZSB0aHJlYWQgb3IgbWV0aG9kCiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChJT0V4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiU2VydmVyIGV4Y2VwdGlvbjogIiArIGUuZ2V0TWVzc2FnZSgpKTsKICAgICAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICB9CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

public class SimpleServer {
    public static void main(String[] args) {
        int port = 1234; // Port number on which the server will listen
        try (ServerSocket serverSocket = new ServerSocket(port)) {
            System.out.println(&quot;Server is listening on port &quot; + port);
            while (true) {
                Socket socket = serverSocket.accept(); // Wait for a client to connect
                System.out.println(&quot;New client connected&quot;);
                // Handle the client connection in a separate thread or method
            }
        } catch (IOException e) {
            System.out.println(&quot;Server exception: &quot; + e.getMessage());
            e.printStackTrace();
        }
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>ServerSocket serverSocket = new ServerSocket(port)</strong>: Creates a <code>ServerSocket</code> that listens on the specified port.</li>
<li><strong>serverSocket.accept()</strong>: Waits for a client to connect and returns a <code>Socket</code> object representing the client connection.</li>
<li><strong>try-with-resources</strong>: Ensures that the <code>ServerSocket</code> is closed automatically when the try block exits.</li>
</ul>
</div><h1>Handling Client Connections</h1>
<div class='content'><p>Once a client connects, you can handle the connection using the <code>Socket</code> object returned by the <code>accept()</code> method. Here is an example of how to read from and write to the client:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmEuaW8uQnVmZmVyZWRSZWFkZXI7CmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbVJlYWRlcjsKaW1wb3J0IGphdmEuaW8uUHJpbnRXcml0ZXI7CmltcG9ydCBqYXZhLm5ldC5TZXJ2ZXJTb2NrZXQ7CmltcG9ydCBqYXZhLm5ldC5Tb2NrZXQ7CgpwdWJsaWMgY2xhc3MgRWNob1NlcnZlciB7CiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CiAgICAgICAgaW50IHBvcnQgPSAxMjM0OwogICAgICAgIHRyeSAoU2VydmVyU29ja2V0IHNlcnZlclNvY2tldCA9IG5ldyBTZXJ2ZXJTb2NrZXQocG9ydCkpIHsKICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJTZXJ2ZXIgaXMgbGlzdGVuaW5nIG9uIHBvcnQgIiArIHBvcnQpOwogICAgICAgICAgICB3aGlsZSAodHJ1ZSkgewogICAgICAgICAgICAgICAgU29ja2V0IHNvY2tldCA9IHNlcnZlclNvY2tldC5hY2NlcHQoKTsKICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiTmV3IGNsaWVudCBjb25uZWN0ZWQiKTsKCiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgaW5wdXQgYW5kIG91dHB1dCBzdHJlYW1zIGZvciB0aGUgc29ja2V0CiAgICAgICAgICAgICAgICBCdWZmZXJlZFJlYWRlciBpbnB1dCA9IG5ldyBCdWZmZXJlZFJlYWRlcihuZXcgSW5wdXRTdHJlYW1SZWFkZXIoc29ja2V0LmdldElucHV0U3RyZWFtKCkpKTsKICAgICAgICAgICAgICAgIFByaW50V3JpdGVyIG91dHB1dCA9IG5ldyBQcmludFdyaXRlcihzb2NrZXQuZ2V0T3V0cHV0U3RyZWFtKCksIHRydWUpOwoKICAgICAgICAgICAgICAgIFN0cmluZyBjbGllbnRNZXNzYWdlOwogICAgICAgICAgICAgICAgd2hpbGUgKChjbGllbnRNZXNzYWdlID0gaW5wdXQucmVhZExpbmUoKSkgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiUmVjZWl2ZWQ6ICIgKyBjbGllbnRNZXNzYWdlKTsKICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHJpbnRsbigiRWNobzogIiArIGNsaWVudE1lc3NhZ2UpOyAvLyBFY2hvIHRoZSBtZXNzYWdlIGJhY2sgdG8gdGhlIGNsaWVudAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkgewogICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIlNlcnZlciBleGNlcHRpb246ICIgKyBlLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgfQogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;

public class EchoServer {
    public static void main(String[] args) {
        int port = 1234;
        try (ServerSocket serverSocket = new ServerSocket(port)) {
            System.out.println(&quot;Server is listening on port &quot; + port);
            while (true) {
                Socket socket = serverSocket.accept();
                System.out.println(&quot;New client connected&quot;);

                // Create input and output streams for the socket
                BufferedReader input = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                PrintWriter output = new PrintWriter(socket.getOutputStream(), true);

                String clientMessage;
                while ((clientMessage = input.readLine()) != null) {
                    System.out.println(&quot;Received: &quot; + clientMessage);
                    output.println(&quot;Echo: &quot; + clientMessage); // Echo the message back to the client
                }
            }
        } catch (IOException e) {
            System.out.println(&quot;Server exception: &quot; + e.getMessage());
            e.printStackTrace();
        }
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>BufferedReader input</strong>: Reads text from the client's input stream.</li>
<li><strong>PrintWriter output</strong>: Sends text to the client's output stream.</li>
<li><strong>input.readLine()</strong>: Reads a line of text from the client.</li>
<li><strong>output.println()</strong>: Sends a line of text to the client.</li>
</ul>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Task</h2>
<div class='content'><p>Create a simple server application that listens on port 5678 and responds with the current date and time whenever a client connects and sends a message.</p>
</div><h2>Solution</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmEuaW8uQnVmZmVyZWRSZWFkZXI7CmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS5pby5JbnB1dFN0cmVhbVJlYWRlcjsKaW1wb3J0IGphdmEuaW8uUHJpbnRXcml0ZXI7CmltcG9ydCBqYXZhLm5ldC5TZXJ2ZXJTb2NrZXQ7CmltcG9ydCBqYXZhLm5ldC5Tb2NrZXQ7CmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTsKaW1wb3J0IGphdmEudGltZS5mb3JtYXQuRGF0ZVRpbWVGb3JtYXR0ZXI7CgpwdWJsaWMgY2xhc3MgRGF0ZVRpbWVTZXJ2ZXIgewogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgICAgIGludCBwb3J0ID0gNTY3ODsKICAgICAgICB0cnkgKFNlcnZlclNvY2tldCBzZXJ2ZXJTb2NrZXQgPSBuZXcgU2VydmVyU29ja2V0KHBvcnQpKSB7CiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiU2VydmVyIGlzIGxpc3RlbmluZyBvbiBwb3J0ICIgKyBwb3J0KTsKICAgICAgICAgICAgd2hpbGUgKHRydWUpIHsKICAgICAgICAgICAgICAgIFNvY2tldCBzb2NrZXQgPSBzZXJ2ZXJTb2NrZXQuYWNjZXB0KCk7CiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIk5ldyBjbGllbnQgY29ubmVjdGVkIik7CgogICAgICAgICAgICAgICAgQnVmZmVyZWRSZWFkZXIgaW5wdXQgPSBuZXcgQnVmZmVyZWRSZWFkZXIobmV3IElucHV0U3RyZWFtUmVhZGVyKHNvY2tldC5nZXRJbnB1dFN0cmVhbSgpKSk7CiAgICAgICAgICAgICAgICBQcmludFdyaXRlciBvdXRwdXQgPSBuZXcgUHJpbnRXcml0ZXIoc29ja2V0LmdldE91dHB1dFN0cmVhbSgpLCB0cnVlKTsKCiAgICAgICAgICAgICAgICBTdHJpbmcgY2xpZW50TWVzc2FnZTsKICAgICAgICAgICAgICAgIHdoaWxlICgoY2xpZW50TWVzc2FnZSA9IGlucHV0LnJlYWRMaW5lKCkpICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIlJlY2VpdmVkOiAiICsgY2xpZW50TWVzc2FnZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGNsaWVudE1lc3NhZ2UuZXF1YWxzSWdub3JlQ2FzZSgidGltZSIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBjdXJyZW50VGltZSA9IExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigieXl5eS1NTS1kZCBISDptbTpzcyIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnByaW50bG4oIkN1cnJlbnQgRGF0ZSBhbmQgVGltZTogIiArIGN1cnJlbnRUaW1lKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHJpbnRsbigiVW5rbm93biBjb21tYW5kIik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkgewogICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIlNlcnZlciBleGNlcHRpb246ICIgKyBlLmdldE1lc3NhZ2UoKSk7CiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgfQogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;

public class DateTimeServer {
    public static void main(String[] args) {
        int port = 5678;
        try (ServerSocket serverSocket = new ServerSocket(port)) {
            System.out.println(&quot;Server is listening on port &quot; + port);
            while (true) {
                Socket socket = serverSocket.accept();
                System.out.println(&quot;New client connected&quot;);

                BufferedReader input = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                PrintWriter output = new PrintWriter(socket.getOutputStream(), true);

                String clientMessage;
                while ((clientMessage = input.readLine()) != null) {
                    System.out.println(&quot;Received: &quot; + clientMessage);
                    if (clientMessage.equalsIgnoreCase(&quot;time&quot;)) {
                        String currentTime = LocalDateTime.now().format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;));
                        output.println(&quot;Current Date and Time: &quot; + currentTime);
                    } else {
                        output.println(&quot;Unknown command&quot;);
                    }
                }
            }
        } catch (IOException e) {
            System.out.println(&quot;Server exception: &quot; + e.getMessage());
            e.printStackTrace();
        }
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>LocalDateTime.now()</strong>: Gets the current date and time.</li>
<li><strong>DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;)</strong>: Formats the date and time in a readable format.</li>
<li><strong>clientMessage.equalsIgnoreCase(&quot;time&quot;)</strong>: Checks if the client sent the &quot;time&quot; command.</li>
</ul>
</div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Port Already in Use</strong>: Ensure the port you are trying to use is not already in use by another application.</li>
<li><strong>Firewall Issues</strong>: Make sure your firewall settings allow traffic on the port you are using.</li>
<li><strong>Resource Management</strong>: Always close the <code>ServerSocket</code> and <code>Socket</code> objects to free up resources.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered the basics of using the <code>ServerSocket</code> class to create a simple server application in Java. We learned how to accept client connections, read from and write to clients, and handle multiple client requests. This knowledge is fundamental for building more complex networked applications. In the next section, we will explore <code>DatagramSocket</code> and <code>DatagramPacket</code> for UDP communication.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='09-02-sockets' title="Sockets">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='09-04-datagramsocket-and-datagrampacket' title="DatagramSocket and DatagramPacket">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
