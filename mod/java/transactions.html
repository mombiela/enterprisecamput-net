<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transactions in Java</title>

    <link rel="alternate" href="https://campusempresa.com/mod/java/transactions" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/java/transactions" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/java/transactions" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/java/transactions" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/java/transactions" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='resultset-and-data-manipulation'>&#x25C4;ResultSet and Data Manipulation</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Transactions in Java</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-java-web-development'>Introduction to Java Web Development &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Transactions</h1>
<div class='content'><p>Transactions are a fundamental concept in database management and are crucial for ensuring data integrity and consistency. In Java, transactions are often managed through JDBC (Java Database Connectivity) or JPA (Java Persistence API). This section will cover the basics of transactions, their properties, and how to implement them in Java.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>ACID Properties</strong>: Transactions must adhere to the ACID properties to ensure reliability.
<ul>
<li><strong>Atomicity</strong>: Ensures that all operations within a transaction are completed successfully. If any operation fails, the transaction is rolled back.</li>
<li><strong>Consistency</strong>: Ensures that a transaction brings the database from one valid state to another.</li>
<li><strong>Isolation</strong>: Ensures that transactions are executed in isolation from one another.</li>
<li><strong>Durability</strong>: Ensures that once a transaction is committed, it remains so, even in the event of a system failure.</li>
</ul>
</li>
</ul>
</div><h1>Managing Transactions with JDBC</h1>
<div class='content'><p>JDBC provides a straightforward way to manage transactions in Java. By default, JDBC operates in auto-commit mode, meaning each SQL statement is committed to the database as soon as it is executed. To manage transactions manually, auto-commit must be disabled.</p>
</div><h2>Example: JDBC Transaction Management</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmEuc3FsLkNvbm5lY3Rpb247CmltcG9ydCBqYXZhLnNxbC5Ecml2ZXJNYW5hZ2VyOwppbXBvcnQgamF2YS5zcWwuU1FMRXhjZXB0aW9uOwppbXBvcnQgamF2YS5zcWwuU3RhdGVtZW50OwoKcHVibGljIGNsYXNzIEpkYmNUcmFuc2FjdGlvbkV4YW1wbGUgewogICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykgewogICAgICAgIFN0cmluZyB1cmwgPSAiamRiYzpteXNxbDovL2xvY2FsaG9zdDozMzA2L215ZGF0YWJhc2UiOwogICAgICAgIFN0cmluZyB1c2VyID0gInJvb3QiOwogICAgICAgIFN0cmluZyBwYXNzd29yZCA9ICJwYXNzd29yZCI7CgogICAgICAgIENvbm5lY3Rpb24gY29ubiA9IG51bGw7CiAgICAgICAgU3RhdGVtZW50IHN0bXQgPSBudWxsOwoKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25uID0gRHJpdmVyTWFuYWdlci5nZXRDb25uZWN0aW9uKHVybCwgdXNlciwgcGFzc3dvcmQpOwogICAgICAgICAgICBjb25uLnNldEF1dG9Db21taXQoZmFsc2UpOyAvLyBEaXNhYmxlIGF1dG8tY29tbWl0CgogICAgICAgICAgICBzdG10ID0gY29ubi5jcmVhdGVTdGF0ZW1lbnQoKTsKICAgICAgICAgICAgc3RtdC5leGVjdXRlVXBkYXRlKCJJTlNFUlQgSU5UTyBhY2NvdW50cyAobmFtZSwgYmFsYW5jZSkgVkFMVUVTICgnQWxpY2UnLCAxMDAwKSIpOwogICAgICAgICAgICBzdG10LmV4ZWN1dGVVcGRhdGUoIklOU0VSVCBJTlRPIGFjY291bnRzIChuYW1lLCBiYWxhbmNlKSBWQUxVRVMgKCdCb2InLCAxNTAwKSIpOwoKICAgICAgICAgICAgY29ubi5jb21taXQoKTsgLy8gQ29tbWl0IHRoZSB0cmFuc2FjdGlvbgogICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIlRyYW5zYWN0aW9uIGNvbW1pdHRlZCBzdWNjZXNzZnVsbHkuIik7CiAgICAgICAgfSBjYXRjaCAoU1FMRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgaWYgKGNvbm4gIT0gbnVsbCkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25uLnJvbGxiYWNrKCk7IC8vIFJvbGxiYWNrIHRoZSB0cmFuc2FjdGlvbiBvbiBlcnJvcgogICAgICAgICAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbigiVHJhbnNhY3Rpb24gcm9sbGVkIGJhY2suIik7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZXgpIHsKICAgICAgICAgICAgICAgICAgICBleC5wcmludFN0YWNrVHJhY2UoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAoc3RtdCAhPSBudWxsKSBzdG10LmNsb3NlKCk7CiAgICAgICAgICAgICAgICBpZiAoY29ubiAhPSBudWxsKSBjb25uLmNsb3NlKCk7CiAgICAgICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.sql.Statement;

public class JdbcTransactionExample {
    public static void main(String[] args) {
        String url = &quot;jdbc:mysql://localhost:3306/mydatabase&quot;;
        String user = &quot;root&quot;;
        String password = &quot;password&quot;;

        Connection conn = null;
        Statement stmt = null;

        try {
            conn = DriverManager.getConnection(url, user, password);
            conn.setAutoCommit(false); // Disable auto-commit

            stmt = conn.createStatement();
            stmt.executeUpdate(&quot;INSERT INTO accounts (name, balance) VALUES ('Alice', 1000)&quot;);
            stmt.executeUpdate(&quot;INSERT INTO accounts (name, balance) VALUES ('Bob', 1500)&quot;);

            conn.commit(); // Commit the transaction
            System.out.println(&quot;Transaction committed successfully.&quot;);
        } catch (SQLException e) {
            if (conn != null) {
                try {
                    conn.rollback(); // Rollback the transaction on error
                    System.out.println(&quot;Transaction rolled back.&quot;);
                } catch (SQLException ex) {
                    ex.printStackTrace();
                }
            }
            e.printStackTrace();
        } finally {
            try {
                if (stmt != null) stmt.close();
                if (conn != null) conn.close();
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
}</pre></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Disable Auto-Commit</strong>: <code>conn.setAutoCommit(false);</code> disables auto-commit mode.</li>
<li><strong>Execute SQL Statements</strong>: Multiple SQL statements are executed within the transaction.</li>
<li><strong>Commit Transaction</strong>: <code>conn.commit();</code> commits the transaction.</li>
<li><strong>Rollback Transaction</strong>: <code>conn.rollback();</code> rolls back the transaction if an error occurs.</li>
</ul>
</div><h1>Managing Transactions with JPA</h1>
<div class='content'><p>JPA provides a higher-level abstraction for managing transactions compared to JDBC. Transactions in JPA are typically managed using the <code>EntityManager</code> and <code>EntityTransaction</code> interfaces.</p>
</div><h2>Example: JPA Transaction Management</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eU1hbmFnZXI7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5FbnRpdHlNYW5hZ2VyRmFjdG9yeTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLkVudGl0eVRyYW5zYWN0aW9uOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuUGVyc2lzdGVuY2U7CgpwdWJsaWMgY2xhc3MgSnBhVHJhbnNhY3Rpb25FeGFtcGxlIHsKICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHsKICAgICAgICBFbnRpdHlNYW5hZ2VyRmFjdG9yeSBlbWYgPSBQZXJzaXN0ZW5jZS5jcmVhdGVFbnRpdHlNYW5hZ2VyRmFjdG9yeSgibXktcGVyc2lzdGVuY2UtdW5pdCIpOwogICAgICAgIEVudGl0eU1hbmFnZXIgZW0gPSBlbWYuY3JlYXRlRW50aXR5TWFuYWdlcigpOwogICAgICAgIEVudGl0eVRyYW5zYWN0aW9uIHR4ID0gZW0uZ2V0VHJhbnNhY3Rpb24oKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdHguYmVnaW4oKTsgLy8gQmVnaW4gdHJhbnNhY3Rpb24KCiAgICAgICAgICAgIEFjY291bnQgYWxpY2UgPSBuZXcgQWNjb3VudCgiQWxpY2UiLCAxMDAwKTsKICAgICAgICAgICAgQWNjb3VudCBib2IgPSBuZXcgQWNjb3VudCgiQm9iIiwgMTUwMCk7CgogICAgICAgICAgICBlbS5wZXJzaXN0KGFsaWNlKTsKICAgICAgICAgICAgZW0ucGVyc2lzdChib2IpOwoKICAgICAgICAgICAgdHguY29tbWl0KCk7IC8vIENvbW1pdCB0cmFuc2FjdGlvbgogICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIlRyYW5zYWN0aW9uIGNvbW1pdHRlZCBzdWNjZXNzZnVsbHkuIik7CiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgaWYgKHR4LmlzQWN0aXZlKCkpIHsKICAgICAgICAgICAgICAgIHR4LnJvbGxiYWNrKCk7IC8vIFJvbGxiYWNrIHRyYW5zYWN0aW9uIG9uIGVycm9yCiAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oIlRyYW5zYWN0aW9uIHJvbGxlZCBiYWNrLiIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgZW0uY2xvc2UoKTsKICAgICAgICAgICAgZW1mLmNsb3NlKCk7CiAgICAgICAgfQogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;

public class JpaTransactionExample {
    public static void main(String[] args) {
        EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;my-persistence-unit&quot;);
        EntityManager em = emf.createEntityManager();
        EntityTransaction tx = em.getTransaction();

        try {
            tx.begin(); // Begin transaction

            Account alice = new Account(&quot;Alice&quot;, 1000);
            Account bob = new Account(&quot;Bob&quot;, 1500);

            em.persist(alice);
            em.persist(bob);

            tx.commit(); // Commit transaction
            System.out.println(&quot;Transaction committed successfully.&quot;);
        } catch (Exception e) {
            if (tx.isActive()) {
                tx.rollback(); // Rollback transaction on error
                System.out.println(&quot;Transaction rolled back.&quot;);
            }
            e.printStackTrace();
        } finally {
            em.close();
            emf.close();
        }
    }
}</pre></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Begin Transaction</strong>: <code>tx.begin();</code> starts the transaction.</li>
<li><strong>Persist Entities</strong>: <code>em.persist(entity);</code> persists the entities within the transaction.</li>
<li><strong>Commit Transaction</strong>: <code>tx.commit();</code> commits the transaction.</li>
<li><strong>Rollback Transaction</strong>: <code>tx.rollback();</code> rolls back the transaction if an error occurs.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Transactions are essential for maintaining data integrity and consistency in database operations. Java provides robust mechanisms for managing transactions through JDBC and JPA. Understanding how to implement and manage transactions effectively is crucial for developing reliable and efficient applications. By adhering to the ACID properties, you can ensure that your transactions are reliable and your data remains consistent.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='resultset-and-data-manipulation'>&#x25C4;ResultSet and Data Manipulation</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Transactions in Java</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-java-web-development'>Introduction to Java Web Development &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
