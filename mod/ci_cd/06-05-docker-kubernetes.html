<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docker and Kubernetes</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ci_cd/06-05-docker-kubernetes" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ci_cd/06-05-docker-kubernetes" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ci_cd/06-05-docker-kubernetes" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/ci_cd/06-05-docker-kubernetes" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/ci_cd/06-05-docker-kubernetes" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='06-04-travis-ci' title="Travis CI">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Docker and Kubernetes</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-01-exercise-basic-pipeline' title="Exercise 1: Setting Up a Basic Pipeline">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this module, we will explore Docker and Kubernetes, two essential tools for modern CI/CD pipelines. Docker is a platform for developing, shipping, and running applications in containers, while Kubernetes is an orchestration system for automating the deployment, scaling, and management of containerized applications.</p>
</div><h1><p>Introduction to Docker</p>
</h1>
<div class='content'></div><h2><p>What is Docker?</p>
</h2>
<div class='content'><p>Docker is an open-source platform that automates the deployment of applications inside lightweight, portable containers. Containers package an application and its dependencies, ensuring consistency across multiple environments.</p>
</div><h2><p>Key Concepts of Docker</p>
</h2>
<div class='content'><ul>
<li><strong>Images</strong>: Read-only templates used to create containers. Images are built from Dockerfiles.</li>
<li><strong>Containers</strong>: Instances of Docker images that run applications.</li>
<li><strong>Dockerfile</strong>: A script containing a series of instructions on how to build a Docker image.</li>
<li><strong>Docker Hub</strong>: A cloud-based registry service for sharing Docker images.</li>
</ul>
</div><h2><p>Example: Creating a Simple Docker Container</p>
</h2>
<div class='content'><h4>Dockerfile</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVc2UgYW4gb2ZmaWNpYWwgUHl0aG9uIHJ1bnRpbWUgYXMgYSBwYXJlbnQgaW1hZ2UKRlJPTSBweXRob246My44LXNsaW0KCiMgU2V0IHRoZSB3b3JraW5nIGRpcmVjdG9yeSBpbiB0aGUgY29udGFpbmVyCldPUktESVIgL2FwcAoKIyBDb3B5IHRoZSBjdXJyZW50IGRpcmVjdG9yeSBjb250ZW50cyBpbnRvIHRoZSBjb250YWluZXIgYXQgL2FwcApDT1BZIC4gL2FwcAoKIyBJbnN0YWxsIGFueSBuZWVkZWQgcGFja2FnZXMgc3BlY2lmaWVkIGluIHJlcXVpcmVtZW50cy50eHQKUlVOIHBpcCBpbnN0YWxsIC0tbm8tY2FjaGUtZGlyIC1yIHJlcXVpcmVtZW50cy50eHQKCiMgTWFrZSBwb3J0IDgwIGF2YWlsYWJsZSB0byB0aGUgd29ybGQgb3V0c2lkZSB0aGlzIGNvbnRhaW5lcgpFWFBPU0UgODAKCiMgRGVmaW5lIGVudmlyb25tZW50IHZhcmlhYmxlCkVOViBOQU1FIFdvcmxkCgojIFJ1biBhcHAucHkgd2hlbiB0aGUgY29udGFpbmVyIGxhdW5jaGVzCkNNRCBbInB5dGhvbiIsICJhcHAucHkiXQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Use an official Python runtime as a parent image
FROM python:3.8-slim

# Set the working directory in the container
WORKDIR /app

# Copy the current directory contents into the container at /app
COPY . /app

# Install any needed packages specified in requirements.txt
RUN pip install --no-cache-dir -r requirements.txt

# Make port 80 available to the world outside this container
EXPOSE 80

# Define environment variable
ENV NAME World

# Run app.py when the container launches
CMD [&quot;python&quot;, &quot;app.py&quot;]</pre></div><div class='content'><h4>Building and Running the Docker Container</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBCdWlsZCB0aGUgRG9ja2VyIGltYWdlCmRvY2tlciBidWlsZCAtdCBteS1weXRob24tYXBwIC4KCiMgUnVuIHRoZSBEb2NrZXIgY29udGFpbmVyCmRvY2tlciBydW4gLXAgNDAwMDo4MCBteS1weXRob24tYXBw"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Build the Docker image
docker build -t my-python-app .

# Run the Docker container
docker run -p 4000:80 my-python-app</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>FROM</strong>: Specifies the base image.</li>
<li><strong>WORKDIR</strong>: Sets the working directory inside the container.</li>
<li><strong>COPY</strong>: Copies files from the host to the container.</li>
<li><strong>RUN</strong>: Executes commands in the container.</li>
<li><strong>EXPOSE</strong>: Informs Docker that the container listens on the specified network ports at runtime.</li>
<li><strong>ENV</strong>: Sets environment variables.</li>
<li><strong>CMD</strong>: Provides the command to run within the container.</li>
</ul>
</div><h1><p>Introduction to Kubernetes</p>
</h1>
<div class='content'></div><h2><p>What is Kubernetes?</p>
</h2>
<div class='content'><p>Kubernetes, often abbreviated as K8s, is an open-source platform designed to automate deploying, scaling, and operating application containers. It groups containers into logical units for easy management and discovery.</p>
</div><h2><p>Key Concepts of Kubernetes</p>
</h2>
<div class='content'><ul>
<li><strong>Pods</strong>: The smallest deployable units in Kubernetes, which can contain one or more containers.</li>
<li><strong>Nodes</strong>: Worker machines in Kubernetes, which can be either virtual or physical.</li>
<li><strong>Clusters</strong>: A set of nodes managed by Kubernetes.</li>
<li><strong>Services</strong>: An abstraction that defines a logical set of Pods and a policy by which to access them.</li>
<li><strong>Deployments</strong>: Provide declarative updates to applications.</li>
</ul>
</div><h2><p>Example: Deploying a Docker Container with Kubernetes</p>
</h2>
<div class='content'><h4>Deployment YAML File</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogYXBwcy92MQpraW5kOiBEZXBsb3ltZW50Cm1ldGFkYXRhOgogIG5hbWU6IG15LXB5dGhvbi1hcHAKc3BlYzoKICByZXBsaWNhczogMwogIHNlbGVjdG9yOgogICAgbWF0Y2hMYWJlbHM6CiAgICAgIGFwcDogbXktcHl0aG9uLWFwcAogIHRlbXBsYXRlOgogICAgbWV0YWRhdGE6CiAgICAgIGxhYmVsczoKICAgICAgICBhcHA6IG15LXB5dGhvbi1hcHAKICAgIHNwZWM6CiAgICAgIGNvbnRhaW5lcnM6CiAgICAgIC0gbmFtZTogbXktcHl0aG9uLWFwcAogICAgICAgIGltYWdlOiBteS1weXRob24tYXBwOmxhdGVzdAogICAgICAgIHBvcnRzOgogICAgICAgIC0gY29udGFpbmVyUG9ydDogODA="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-python-app
spec:
  replicas: 3
  selector:
    matchLabels:
      app: my-python-app
  template:
    metadata:
      labels:
        app: my-python-app
    spec:
      containers:
      - name: my-python-app
        image: my-python-app:latest
        ports:
        - containerPort: 80</pre></div><div class='content'><h4>Service YAML File</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogdjEKa2luZDogU2VydmljZQptZXRhZGF0YToKICBuYW1lOiBteS1weXRob24tYXBwLXNlcnZpY2UKc3BlYzoKICBzZWxlY3RvcjoKICAgIGFwcDogbXktcHl0aG9uLWFwcAogIHBvcnRzOgogICAgLSBwcm90b2NvbDogVENQCiAgICAgIHBvcnQ6IDgwCiAgICAgIHRhcmdldFBvcnQ6IDgwCiAgdHlwZTogTG9hZEJhbGFuY2Vy"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: v1
kind: Service
metadata:
  name: my-python-app-service
spec:
  selector:
    app: my-python-app
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
  type: LoadBalancer</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>apiVersion</strong>: Specifies the API version.</li>
<li><strong>kind</strong>: Specifies the type of Kubernetes object (e.g., Deployment, Service).</li>
<li><strong>metadata</strong>: Provides metadata about the object, such as its name.</li>
<li><strong>spec</strong>: Defines the desired state of the object.</li>
<li><strong>replicas</strong>: Specifies the number of pod replicas.</li>
<li><strong>selector</strong>: Selects the pods that the service targets.</li>
<li><strong>template</strong>: Defines the pod template.</li>
</ul>
</div><h2><p>Deploying to Kubernetes</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBBcHBseSB0aGUgZGVwbG95bWVudCBjb25maWd1cmF0aW9uCmt1YmVjdGwgYXBwbHkgLWYgZGVwbG95bWVudC55YW1sCgojIEFwcGx5IHRoZSBzZXJ2aWNlIGNvbmZpZ3VyYXRpb24Ka3ViZWN0bCBhcHBseSAtZiBzZXJ2aWNlLnlhbWwKCiMgQ2hlY2sgdGhlIHN0YXR1cyBvZiB0aGUgZGVwbG95bWVudAprdWJlY3RsIGdldCBkZXBsb3ltZW50cwoKIyBDaGVjayB0aGUgc3RhdHVzIG9mIHRoZSBzZXJ2aWNlCmt1YmVjdGwgZ2V0IHNlcnZpY2Vz"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Apply the deployment configuration
kubectl apply -f deployment.yaml

# Apply the service configuration
kubectl apply -f service.yaml

# Check the status of the deployment
kubectl get deployments

# Check the status of the service
kubectl get services</pre></div><div class='content'></div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise: Deploying a Web Application with Docker and Kubernetes</p>
</h2>
<div class='content'><h4>Task</h4>
<ol>
<li>Create a Dockerfile for a simple web application.</li>
<li>Build and run the Docker container locally.</li>
<li>Write Kubernetes deployment and service YAML files.</li>
<li>Deploy the application to a Kubernetes cluster.</li>
</ol>
<h4>Solution</h4>
<ol>
<li>
<p><strong>Dockerfile</strong></p>
<pre><code class="language-dockerfile">FROM node:14
WORKDIR /app
COPY . /app
RUN npm install
EXPOSE 3000
CMD [&quot;npm&quot;, &quot;start&quot;]
</code></pre>
</li>
<li>
<p><strong>Build and Run Docker Container</strong></p>
<pre><code class="language-sh">docker build -t my-web-app .
docker run -p 3000:3000 my-web-app
</code></pre>
</li>
<li>
<p><strong>Deployment YAML File</strong></p>
<pre><code class="language-yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-web-app
spec:
  replicas: 2
  selector:
    matchLabels:
      app: my-web-app
  template:
    metadata:
      labels:
        app: my-web-app
    spec:
      containers:
      - name: my-web-app
        image: my-web-app:latest
        ports:
        - containerPort: 3000
</code></pre>
</li>
<li>
<p><strong>Service YAML File</strong></p>
<pre><code class="language-yaml">apiVersion: v1
kind: Service
metadata:
  name: my-web-app-service
spec:
  selector:
    app: my-web-app
  ports:
    - protocol: TCP
      port: 80
      targetPort: 3000
  type: LoadBalancer
</code></pre>
</li>
<li>
<p><strong>Deploy to Kubernetes</strong></p>
<pre><code class="language-sh">kubectl apply -f deployment.yaml
kubectl apply -f service.yaml
kubectl get deployments
kubectl get services
</code></pre>
</li>
</ol>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this module, we covered the basics of Docker and Kubernetes, including their key concepts and practical examples. Docker allows you to package applications in containers, ensuring consistency across environments. Kubernetes helps you manage and orchestrate these containers at scale. By understanding these tools, you can enhance your CI/CD pipelines, making your software delivery process more efficient and reliable.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='06-04-travis-ci' title="Travis CI">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-01-exercise-basic-pipeline' title="Exercise 1: Setting Up a Basic Pipeline">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
