<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercise 2: Integrating Automated Tests</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ci_cd/07-02-ejercicio-pruebas-automatizadas" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ci_cd/07-02-exercici-proves-automatitzades" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ci_cd/07-02-exercise-automated-tests" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/ci_cd/07-02-ejercicio-pruebas-automatizadas" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/ci_cd/07-02-exercici-proves-automatitzades" class="px-2">CA</a>
					</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-01-exercise-basic-pipeline' title="Exercise 1: Setting Up a Basic Pipeline">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Exercise 2: Integrating Automated Tests</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-03-exercise-deployment-production' title="Exercise 3: Deployment in a Production Environment">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this exercise, you will learn how to integrate automated tests into your CI pipeline. Automated testing is a crucial part of CI/CD as it ensures that your code changes do not break existing functionality and helps maintain code quality.</p>
</div><h1><p>Objectives</p>
</h1>
<div class='content'><ul>
<li>Understand the importance of automated testing in CI/CD.</li>
<li>Learn how to set up automated tests in a CI pipeline.</li>
<li>Execute and verify automated tests using a CI tool.</li>
</ul>
</div><h1><p>Prerequisites</p>
</h1>
<div class='content'><ul>
<li>Basic understanding of CI/CD concepts.</li>
<li>Familiarity with a CI tool (e.g., Jenkins, GitLab CI/CD, CircleCI).</li>
<li>A sample project with some existing tests (e.g., a simple Node.js application).</li>
</ul>
</div><h1><p>Steps to Integrate Automated Tests</p>
</h1>
<div class='content'></div><h2><p>Step 1: Set Up Your CI Environment</p>
</h2>
<div class='content'><p>Ensure you have a CI environment set up. If you haven't done this yet, refer to the &quot;Setting Up a CI Environment&quot; section in Module 2.</p>
</div><h2><p>Step 2: Add Test Scripts to Your Project</p>
</h2>
<div class='content'><p>Ensure your project has test scripts. For example, in a Node.js project, you might use a testing framework like Mocha or Jest.</p>
<p><strong>Example: Adding Jest to a Node.js Project</strong></p>
<ol>
<li>
<p>Install Jest:</p>
<pre><code class="language-bash">npm install --save-dev jest
</code></pre>
</li>
<li>
<p>Add a test script to your <code>package.json</code>:</p>
<pre><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;jest&quot;
  }
}
</code></pre>
</li>
<li>
<p>Create a simple test file, <code>sum.test.js</code>:</p>
<pre><code class="language-javascript">const sum = require('./sum');

test('adds 1 + 2 to equal 3', () =&gt; {
  expect(sum(1, 2)).toBe(3);
});
</code></pre>
</li>
<li>
<p>Create the <code>sum.js</code> file:</p>
<pre><code class="language-javascript">function sum(a, b) {
  return a + b;
}
module.exports = sum;
</code></pre>
</li>
</ol>
</div><h2><p>Step 3: Configure the CI Tool to Run Tests</p>
</h2>
<div class='content'><p>Configure your CI tool to run the tests as part of the pipeline.</p>
<p><strong>Example: Configuring Jenkins</strong></p>
<ol>
<li>Create a new Jenkins job or pipeline.</li>
<li>In the pipeline configuration, add a stage to run tests.</li>
</ol>
<p><strong>Jenkins Pipeline Script Example:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwZWxpbmUgewogICAgYWdlbnQgYW55CgogICAgc3RhZ2VzIHsKICAgICAgICBzdGFnZSgnQ2hlY2tvdXQnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGdpdCAnaHR0cHM6Ly9naXRodWIuY29tL3lvdXItcmVwby95b3VyLXByb2plY3QuZ2l0JwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHN0YWdlKCdJbnN0YWxsIERlcGVuZGVuY2llcycpIHsKICAgICAgICAgICAgc3RlcHMgewogICAgICAgICAgICAgICAgc2ggJ25wbSBpbnN0YWxsJwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHN0YWdlKCdSdW4gVGVzdHMnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIHNoICducG0gdGVzdCcKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pipeline {
    agent any

    stages {
        stage('Checkout') {
            steps {
                git 'https://github.com/your-repo/your-project.git'
            }
        }
        stage('Install Dependencies') {
            steps {
                sh 'npm install'
            }
        }
        stage('Run Tests') {
            steps {
                sh 'npm test'
            }
        }
    }
}</pre></div><div class='content'></div><h2><p>Step 4: Execute the Pipeline</p>
</h2>
<div class='content'><p>Run the pipeline and verify that the tests are executed.</p>
<ol>
<li>Trigger the pipeline manually or push a commit to the repository to trigger it automatically.</li>
<li>Monitor the pipeline execution in the CI tool's dashboard.</li>
<li>Check the test results in the pipeline logs.</li>
</ol>
</div><h2><p>Step 5: Verify Test Results</p>
</h2>
<div class='content'><p>Ensure that the tests pass successfully. If any tests fail, investigate the cause and fix the issues.</p>
<p><strong>Common Issues and Solutions:</strong></p>
<ul>
<li><strong>Missing Dependencies:</strong> Ensure all required dependencies are installed.</li>
<li><strong>Incorrect Test Configuration:</strong> Verify that the test framework is correctly configured.</li>
<li><strong>Code Errors:</strong> Debug and fix any errors in the code or tests.</li>
</ul>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise: Integrate Automated Tests in a CI Pipeline</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Set Up a Sample Project:</strong></p>
<ul>
<li>Create a simple Node.js project with a few test cases using Jest.</li>
</ul>
</li>
<li>
<p><strong>Configure Jenkins:</strong></p>
<ul>
<li>Set up a Jenkins pipeline to run the tests.</li>
</ul>
</li>
<li>
<p><strong>Run the Pipeline:</strong></p>
<ul>
<li>Execute the pipeline and verify that the tests run successfully.</li>
</ul>
</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'><p><strong>Sample Node.js Project Structure:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bXktbm9kZWpzLWFwcC8K4pSc4pSA4pSAIHN1bS5qcwrilJzilIDilIAgc3VtLnRlc3QuanMK4pSc4pSA4pSAIHBhY2thZ2UuanNvbgrilJTilIDilIAgcGFja2FnZS1sb2NrLmpzb24="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>my-nodejs-app/
├── sum.js
├── sum.test.js
├── package.json
└── package-lock.json</pre></div><div class='content'><p><strong>package.json:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJuYW1lIjogIm15LW5vZGVqcy1hcHAiLAogICJ2ZXJzaW9uIjogIjEuMC4wIiwKICAic2NyaXB0cyI6IHsKICAgICJ0ZXN0IjogImplc3QiCiAgfSwKICAiZGV2RGVwZW5kZW5jaWVzIjogewogICAgImplc3QiOiAiXjI3LjAuMCIKICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;name&quot;: &quot;my-nodejs-app&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;jest&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;jest&quot;: &quot;^27.0.0&quot;
  }
}</pre></div><div class='content'><p><strong>sum.js:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gc3VtKGEsIGIpIHsKICByZXR1cm4gYSArIGI7Cn0KbW9kdWxlLmV4cG9ydHMgPSBzdW07"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function sum(a, b) {
  return a + b;
}
module.exports = sum;</pre></div><div class='content'><p><strong>sum.test.js:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3Qgc3VtID0gcmVxdWlyZSgnLi9zdW0nKTsKCnRlc3QoJ2FkZHMgMSArIDIgdG8gZXF1YWwgMycsICgpID0+IHsKICBleHBlY3Qoc3VtKDEsIDIpKS50b0JlKDMpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const sum = require('./sum');

test('adds 1 + 2 to equal 3', () =&gt; {
  expect(sum(1, 2)).toBe(3);
});</pre></div><div class='content'><p><strong>Jenkins Pipeline Script:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwZWxpbmUgewogICAgYWdlbnQgYW55CgogICAgc3RhZ2VzIHsKICAgICAgICBzdGFnZSgnQ2hlY2tvdXQnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGdpdCAnaHR0cHM6Ly9naXRodWIuY29tL3lvdXItcmVwby95b3VyLXByb2plY3QuZ2l0JwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHN0YWdlKCdJbnN0YWxsIERlcGVuZGVuY2llcycpIHsKICAgICAgICAgICAgc3RlcHMgewogICAgICAgICAgICAgICAgc2ggJ25wbSBpbnN0YWxsJwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHN0YWdlKCdSdW4gVGVzdHMnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIHNoICducG0gdGVzdCcKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pipeline {
    agent any

    stages {
        stage('Checkout') {
            steps {
                git 'https://github.com/your-repo/your-project.git'
            }
        }
        stage('Install Dependencies') {
            steps {
                sh 'npm install'
            }
        }
        stage('Run Tests') {
            steps {
                sh 'npm test'
            }
        }
    }
}</pre></div><div class='content'></div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this exercise, you learned how to integrate automated tests into a CI pipeline. Automated testing is essential for maintaining code quality and ensuring that new changes do not introduce bugs. By following the steps outlined, you can set up and run automated tests in your CI environment, helping you to catch issues early in the development process.</p>
<p>Next, you will learn about deploying your application in a production environment in the next exercise.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-01-exercise-basic-pipeline' title="Exercise 1: Setting Up a Basic Pipeline">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-03-exercise-deployment-production' title="Exercise 3: Deployment in a Production Environment">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
