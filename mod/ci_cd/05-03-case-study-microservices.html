<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case Study: Microservices</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ci_cd/05-03-caso-estudio-microservicios" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ci_cd/05-03-cas-estudi-microserveis" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ci_cd/05-03-case-study-microservices" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/ci_cd/05-03-caso-estudio-microservicios" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/ci_cd/05-03-cas-estudi-microserveis" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Programming Languages</a>
				 					<a href="/categ/frameworks">Frameworks and Libraries</a>
				 					<a href="/categ/tech-tools">Technical Tools</a>
				 					<a href="/categ/foundations">Theoretical Foundations</a>
				 					<a href="/categ/soft-skills">Social Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-02-case-study-mobile' title="Case Study: Mobile Application">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Case Study: Microservices</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-01-jenkins' title="Jenkins">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introduction</p>
</h1>
<div class='content'><p>In this case study, we will explore the implementation of CI/CD practices in a microservices architecture. Microservices architecture involves breaking down an application into smaller, independent services that can be developed, deployed, and scaled independently. This approach offers several benefits, including improved scalability, flexibility, and faster deployment cycles. However, it also introduces challenges in terms of integration, testing, and deployment.</p>
</div><h1><p>Objectives</p>
</h1>
<div class='content'><p>By the end of this case study, you will:</p>
<ul>
<li>Understand the unique challenges and benefits of implementing CI/CD in a microservices architecture.</li>
<li>Learn how to set up a CI/CD pipeline for a microservices-based application.</li>
<li>Explore best practices for testing, deploying, and monitoring microservices.</li>
</ul>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'></div><h2><p>Microservices Architecture</p>
</h2>
<div class='content'><ul>
<li><strong>Definition</strong>: A design approach where an application is composed of small, loosely coupled, and independently deployable services.</li>
<li><strong>Benefits</strong>: Scalability, flexibility, faster deployment, and easier maintenance.</li>
<li><strong>Challenges</strong>: Complexity in integration, testing, and deployment.</li>
</ul>
</div><h2><p>CI/CD for Microservices</p>
</h2>
<div class='content'><ul>
<li><strong>Continuous Integration (CI)</strong>: Ensuring that each microservice can be built and tested independently.</li>
<li><strong>Continuous Deployment (CD)</strong>: Automating the deployment of each microservice to production environments.</li>
</ul>
</div><h1><p>Setting Up the CI/CD Pipeline</p>
</h1>
<div class='content'></div><h2><p>Step 1: Version Control Integration</p>
</h2>
<div class='content'><ul>
<li><strong>Tool</strong>: Git (GitHub, GitLab, Bitbucket)</li>
<li><strong>Action</strong>: Ensure each microservice has its own repository or a monorepo with clear separation.</li>
</ul>
</div><h2><p>Step 2: Build Automation</p>
</h2>
<div class='content'><ul>
<li><strong>Tool</strong>: Jenkins, GitLab CI, CircleCI</li>
<li><strong>Action</strong>: Create build scripts for each microservice.</li>
<li><strong>Example</strong>:
<pre><code class="language-yaml"># .gitlab-ci.yml for a Node.js microservice
stages:
  - build
  - test
  - deploy

build:
  stage: build
  script:
    - npm install
    - npm run build

test:
  stage: test
  script:
    - npm test

deploy:
  stage: deploy
  script:
    - npm run deploy
</code></pre>
</li>
</ul>
</div><h2><p>Step 3: Automated Testing</p>
</h2>
<div class='content'><ul>
<li><strong>Types of Tests</strong>: Unit tests, integration tests, end-to-end tests.</li>
<li><strong>Tool</strong>: Jest, Mocha, Selenium</li>
<li><strong>Action</strong>: Implement automated tests for each microservice.</li>
<li><strong>Example</strong>:
<pre><code class="language-javascript">// Jest unit test for a Node.js microservice
const request = require('supertest');
const app = require('../app');

describe('GET /api/v1/resource', () =&gt; {
  it('should return a list of resources', async () =&gt; {
    const res = await request(app).get('/api/v1/resource');
    expect(res.statusCode).toEqual(200);
    expect(res.body).toHaveProperty('data');
  });
});
</code></pre>
</li>
</ul>
</div><h2><p>Step 4: Deployment Automation</p>
</h2>
<div class='content'><ul>
<li><strong>Tool</strong>: Docker, Kubernetes, Helm</li>
<li><strong>Action</strong>: Containerize each microservice and deploy using Kubernetes.</li>
<li><strong>Example</strong>:
<pre><code class="language-yaml"># Kubernetes deployment for a microservice
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-microservice
spec:
  replicas: 3
  selector:
    matchLabels:
      app: my-microservice
  template:
    metadata:
      labels:
        app: my-microservice
    spec:
      containers:
      - name: my-microservice
        image: my-microservice:latest
        ports:
        - containerPort: 8080
</code></pre>
</li>
</ul>
</div><h2><p>Step 5: Monitoring and Feedback</p>
</h2>
<div class='content'><ul>
<li><strong>Tool</strong>: Prometheus, Grafana, ELK Stack</li>
<li><strong>Action</strong>: Set up monitoring and logging for each microservice.</li>
<li><strong>Example</strong>:
<pre><code class="language-yaml"># Prometheus configuration for monitoring
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'kubernetes'
    kubernetes_sd_configs:
      - role: pod
    relabel_configs:
      - source_labels: [__meta_kubernetes_pod_label_app]
        action: keep
        regex: my-microservice
</code></pre>
</li>
</ul>
</div><h1><p>Best Practices</p>
</h1>
<div class='content'></div><h2><p>Independent Deployability</p>
</h2>
<div class='content'><ul>
<li>Ensure each microservice can be deployed independently without affecting others.</li>
</ul>
</div><h2><p>Consistent Environments</p>
</h2>
<div class='content'><ul>
<li>Use containerization (Docker) to ensure consistency across development, testing, and production environments.</li>
</ul>
</div><h2><p>Automated Rollbacks</p>
</h2>
<div class='content'><ul>
<li>Implement automated rollback mechanisms to handle failed deployments.</li>
</ul>
</div><h2><p>Comprehensive Testing</p>
</h2>
<div class='content'><ul>
<li>Include unit, integration, and end-to-end tests to cover all aspects of the microservice.</li>
</ul>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise: Implementing CI/CD for a Microservice</p>
</h2>
<div class='content'><p><strong>Task</strong>: Set up a CI/CD pipeline for a sample microservice using GitLab CI and Kubernetes.</p>
<p><strong>Steps</strong>:</p>
<ol>
<li><strong>Fork the Sample Repository</strong>: Fork the provided sample microservice repository to your GitLab account.</li>
<li><strong>Configure GitLab CI</strong>: Create a <code>.gitlab-ci.yml</code> file to define the CI/CD pipeline.</li>
<li><strong>Write Tests</strong>: Implement unit tests for the microservice.</li>
<li><strong>Containerize the Microservice</strong>: Create a <code>Dockerfile</code> to containerize the microservice.</li>
<li><strong>Deploy to Kubernetes</strong>: Write Kubernetes deployment manifests and deploy the microservice.</li>
</ol>
<p><strong>Solution</strong>:</p>
<ol>
<li><strong>Fork the Repository</strong>: <a href="https://gitlab.com/sample-microservice">Sample Microservice Repository</a></li>
<li><strong>.gitlab-ci.yml</strong>:
<pre><code class="language-yaml">stages:
  - build
  - test
  - deploy

build:
  stage: build
  script:
    - docker build -t my-microservice:latest .

test:
  stage: test
  script:
    - npm install
    - npm test

deploy:
  stage: deploy
  script:
    - kubectl apply -f k8s/deployment.yaml
</code></pre>
</li>
<li><strong>Unit Test</strong>:
<pre><code class="language-javascript">// Jest unit test for a Node.js microservice
const request = require('supertest');
const app = require('../app');

describe('GET /api/v1/resource', () =&gt; {
  it('should return a list of resources', async () =&gt; {
    const res = await request(app).get('/api/v1/resource');
    expect(res.statusCode).toEqual(200);
    expect(res.body).toHaveProperty('data');
  });
});
</code></pre>
</li>
<li><strong>Dockerfile</strong>:
<pre><code class="language-dockerfile">FROM node:14
WORKDIR /app
COPY . .
RUN npm install
CMD [&quot;npm&quot;, &quot;start&quot;]
</code></pre>
</li>
<li><strong>Kubernetes Deployment</strong>:
<pre><code class="language-yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-microservice
spec:
  replicas: 3
  selector:
    matchLabels:
      app: my-microservice
  template:
    metadata:
      labels:
        app: my-microservice
    spec:
      containers:
      - name: my-microservice
        image: my-microservice:latest
        ports:
        - containerPort: 8080
</code></pre>
</li>
</ol>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this case study, we explored the implementation of CI/CD practices in a microservices architecture. We covered the unique challenges and benefits of microservices, and walked through the steps to set up a CI/CD pipeline, including version control integration, build automation, automated testing, deployment automation, and monitoring. By following best practices and completing the practical exercise, you should now have a solid understanding of how to implement CI/CD for microservices in real-world projects.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-02-case-study-mobile' title="Case Study: Mobile Application">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-01-jenkins' title="Jenkins">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
