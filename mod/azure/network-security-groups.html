<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Security Groups (NSG)</title>

    <link rel="alternate" href="https://campusempresa.com/mod/azure/network-security-groups" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/azure/network-security-groups" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/azure/network-security-groups" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/azure/network-security-groups" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/azure/network-security-groups" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='virtual-networks'>&#x25C4;Virtual Networks (VNet)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Network Security Groups (NSG)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='azure-load-balancer'>Azure Load Balancer &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Network Security Groups (NSG)</h1>
<div class='content'><p>Network Security Groups (NSGs) are a critical component in Azure for managing and controlling network traffic. They act as virtual firewalls, allowing you to filter inbound and outbound traffic to and from Azure resources.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>NSG Basics</strong>: NSGs contain security rules that allow or deny network traffic to resources connected to Azure Virtual Networks (VNets).</li>
<li><strong>Security Rules</strong>: Each NSG rule specifies the source and destination, port, and protocol.</li>
<li><strong>Default Rules</strong>: NSGs come with a set of default rules that cannot be deleted but can be overridden by higher priority rules.</li>
<li><strong>Associations</strong>: NSGs can be associated with subnets or individual network interfaces (NICs).</li>
</ul>
</div><h1>Creating and Managing NSGs</h1>
<div class='content'></div><h2>Creating an NSG</h2>
<div class='content'><p>To create an NSG, you can use the Azure Portal, Azure CLI, or Azure PowerShell.</p>
<h4>Using Azure Portal</h4>
<ol>
<li>Navigate to the Azure Portal.</li>
<li>Select &quot;Create a resource&quot; and search for &quot;Network Security Group&quot;.</li>
<li>Click &quot;Create&quot; and fill in the required details such as name, subscription, resource group, and region.</li>
<li>Click &quot;Review + create&quot; and then &quot;Create&quot;.</li>
</ol>
<h4>Using Azure CLI</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXogbmV0d29yayBuc2cgY3JlYXRlIFwKICAtLXJlc291cmNlLWdyb3VwIE15UmVzb3VyY2VHcm91cCBcCiAgLS1uYW1lIE15TlNHIFwKICAtLWxvY2F0aW9uIGVhc3R1cw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>az network nsg create \
  --resource-group MyResourceGroup \
  --name MyNSG \
  --location eastus</pre></div><div class='content'><h4>Using Azure PowerShell</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TmV3LUF6TmV0d29ya1NlY3VyaXR5R3JvdXAgLVJlc291cmNlR3JvdXBOYW1lICJNeVJlc291cmNlR3JvdXAiIC1Mb2NhdGlvbiAiRWFzdFVTIiAtTmFtZSAiTXlOU0ci"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>New-AzNetworkSecurityGroup -ResourceGroupName &quot;MyResourceGroup&quot; -Location &quot;EastUS&quot; -Name &quot;MyNSG&quot;</pre></div><div class='content'></div><h2>Managing NSG Rules</h2>
<div class='content'><p>NSG rules define the traffic that is allowed or denied. Each rule has properties such as name, priority, source, destination, port, and protocol.</p>
<h4>Adding a Rule via Azure Portal</h4>
<ol>
<li>Navigate to your NSG in the Azure Portal.</li>
<li>Select &quot;Inbound security rules&quot; or &quot;Outbound security rules&quot;.</li>
<li>Click &quot;Add&quot; and fill in the details such as source, destination, port ranges, and action (Allow/Deny).</li>
<li>Click &quot;Add&quot; to save the rule.</li>
</ol>
<h4>Adding a Rule via Azure CLI</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXogbmV0d29yayBuc2cgcnVsZSBjcmVhdGUgXAogIC0tcmVzb3VyY2UtZ3JvdXAgTXlSZXNvdXJjZUdyb3VwIFwKICAtLW5zZy1uYW1lIE15TlNHIFwKICAtLW5hbWUgQWxsb3dTU0ggXAogIC0tcHJvdG9jb2wgVGNwIFwKICAtLWRpcmVjdGlvbiBJbmJvdW5kIFwKICAtLXByaW9yaXR5IDEwMDAgXAogIC0tc291cmNlLWFkZHJlc3MtcHJlZml4ZXMgJyonIFwKICAtLXNvdXJjZS1wb3J0LXJhbmdlcyAnKicgXAogIC0tZGVzdGluYXRpb24tYWRkcmVzcy1wcmVmaXhlcyAnKicgXAogIC0tZGVzdGluYXRpb24tcG9ydC1yYW5nZXMgMjIgXAogIC0tYWNjZXNzIEFsbG93"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>az network nsg rule create \
  --resource-group MyResourceGroup \
  --nsg-name MyNSG \
  --name AllowSSH \
  --protocol Tcp \
  --direction Inbound \
  --priority 1000 \
  --source-address-prefixes '*' \
  --source-port-ranges '*' \
  --destination-address-prefixes '*' \
  --destination-port-ranges 22 \
  --access Allow</pre></div><div class='content'><h4>Adding a Rule via Azure PowerShell</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JHJ1bGUgPSBOZXctQXpOZXR3b3JrU2VjdXJpdHlSdWxlQ29uZmlnIC1OYW1lICJBbGxvd1NTSCIgLVByb3RvY29sICJUY3AiIC1EaXJlY3Rpb24gIkluYm91bmQiIC1Qcmlvcml0eSAxMDAwIC1Tb3VyY2VBZGRyZXNzUHJlZml4ICIqIiAtU291cmNlUG9ydFJhbmdlICIqIiAtRGVzdGluYXRpb25BZGRyZXNzUHJlZml4ICIqIiAtRGVzdGluYXRpb25Qb3J0UmFuZ2UgMjIgLUFjY2VzcyAiQWxsb3ciCiRuc2cgPSBHZXQtQXpOZXR3b3JrU2VjdXJpdHlHcm91cCAtUmVzb3VyY2VHcm91cE5hbWUgIk15UmVzb3VyY2VHcm91cCIgLU5hbWUgIk15TlNHIgokbnNnLlNlY3VyaXR5UnVsZXMuQWRkKCRydWxlKQpTZXQtQXpOZXR3b3JrU2VjdXJpdHlHcm91cCAtTmV0d29ya1NlY3VyaXR5R3JvdXAgJG5zZw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$rule = New-AzNetworkSecurityRuleConfig -Name &quot;AllowSSH&quot; -Protocol &quot;Tcp&quot; -Direction &quot;Inbound&quot; -Priority 1000 -SourceAddressPrefix &quot;*&quot; -SourcePortRange &quot;*&quot; -DestinationAddressPrefix &quot;*&quot; -DestinationPortRange 22 -Access &quot;Allow&quot;
$nsg = Get-AzNetworkSecurityGroup -ResourceGroupName &quot;MyResourceGroup&quot; -Name &quot;MyNSG&quot;
$nsg.SecurityRules.Add($rule)
Set-AzNetworkSecurityGroup -NetworkSecurityGroup $nsg</pre></div><div class='content'></div><h1>Advanced NSG Configurations</h1>
<div class='content'></div><h2>NSG Diagnostics and Monitoring</h2>
<div class='content'><p>Azure provides tools to monitor and diagnose NSG rules and their impact on network traffic.</p>
<ul>
<li><strong>NSG Flow Logs</strong>: Capture information about IP traffic flowing through an NSG.</li>
<li><strong>Network Watcher</strong>: Use Network Watcher to diagnose and visualize network issues.</li>
</ul>
<h4>Enabling NSG Flow Logs</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXogbmV0d29yayB3YXRjaGVyIGZsb3ctbG9nIGNvbmZpZ3VyZSBcCiAgLS1yZXNvdXJjZS1ncm91cCBNeVJlc291cmNlR3JvdXAgXAogIC0tbnNnIE15TlNHIFwKICAtLWVuYWJsZWQgdHJ1ZSBcCiAgLS1zdG9yYWdlLWFjY291bnQgTXlTdG9yYWdlQWNjb3VudCBcCiAgLS1yZXRlbnRpb24gNw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>az network watcher flow-log configure \
  --resource-group MyResourceGroup \
  --nsg MyNSG \
  --enabled true \
  --storage-account MyStorageAccount \
  --retention 7</pre></div><div class='content'></div><h2>NSG and Application Security Groups (ASG)</h2>
<div class='content'><p>Application Security Groups (ASGs) allow you to group VMs and define network security policies based on these groups.</p>
<ul>
<li><strong>ASG Basics</strong>: Simplify complex network security rules by grouping VMs.</li>
<li><strong>Integration with NSG</strong>: Use ASGs in NSG rules to allow or deny traffic to specific groups of VMs.</li>
</ul>
<h4>Creating and Using ASGs</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDcmVhdGUgYW4gQVNHCmF6IG5ldHdvcmsgYXNnIGNyZWF0ZSAtLXJlc291cmNlLWdyb3VwIE15UmVzb3VyY2VHcm91cCAtLW5hbWUgTXlBU0cKCiMgQWRkIGEgVk0gdG8gYW4gQVNHCmF6IG5ldHdvcmsgbmljIHVwZGF0ZSAtLXJlc291cmNlLWdyb3VwIE15UmVzb3VyY2VHcm91cCAtLW5hbWUgTXlOaWMgLS1hcHBsaWNhdGlvbi1zZWN1cml0eS1ncm91cHMgTXlBU0cKCiMgVXNlIEFTRyBpbiBOU0cgcnVsZQpheiBuZXR3b3JrIG5zZyBydWxlIGNyZWF0ZSBcCiAgLS1yZXNvdXJjZS1ncm91cCBNeVJlc291cmNlR3JvdXAgXAogIC0tbnNnLW5hbWUgTXlOU0cgXAogIC0tbmFtZSBBbGxvd0FTRyBcCiAgLS1wcm90b2NvbCBUY3AgXAogIC0tZGlyZWN0aW9uIEluYm91bmQgXAogIC0tcHJpb3JpdHkgMTAwMCBcCiAgLS1zb3VyY2UtYXNncyBNeUFTRyBcCiAgLS1kZXN0aW5hdGlvbi1wb3J0LXJhbmdlcyA4MCBcCiAgLS1hY2Nlc3MgQWxsb3c="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Create an ASG
az network asg create --resource-group MyResourceGroup --name MyASG

# Add a VM to an ASG
az network nic update --resource-group MyResourceGroup --name MyNic --application-security-groups MyASG

# Use ASG in NSG rule
az network nsg rule create \
  --resource-group MyResourceGroup \
  --nsg-name MyNSG \
  --name AllowASG \
  --protocol Tcp \
  --direction Inbound \
  --priority 1000 \
  --source-asgs MyASG \
  --destination-port-ranges 80 \
  --access Allow</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Network Security Groups (NSGs) are essential for managing and securing network traffic in Azure. By understanding how to create, manage, and monitor NSGs, you can effectively control access to your Azure resources. Advanced configurations, such as integrating with Application Security Groups (ASGs) and using diagnostics tools, further enhance your ability to maintain a secure and efficient network environment.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='virtual-networks'>&#x25C4;Virtual Networks (VNet)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Network Security Groups (NSG)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='azure-load-balancer'>Azure Load Balancer &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
