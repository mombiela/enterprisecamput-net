<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deploying a Multi-Tier Application on Azure</title>

    <link rel="alternate" href="https://campusempresa.com/mod/azure/deploying-a-multi-tier-application" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/azure/deploying-a-multi-tier-application" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/azure/deploying-a-multi-tier-application" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/azure/deploying-a-multi-tier-application" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/azure/deploying-a-multi-tier-application" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='azure-resource-manager'>&#x25C4;Azure Resource Manager (ARM)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Deploying a Multi-Tier Application on Azure</a>
	</div>
	<div class='col-4 text-end'>
					<a href='building-a-serverless-api'>Building a Serverless API &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Deploying a multi-tier application involves setting up different layers (tiers) of an application, such as the presentation layer, business logic layer, and data layer, on Azure. This guide will take you from the basics to advanced deployment strategies.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Multi-Tier Architecture</strong>: An application architecture that separates different functionalities into layers.
<ul>
<li><strong>Presentation Layer</strong>: User interface.</li>
<li><strong>Business Logic Layer</strong>: Application processing.</li>
<li><strong>Data Layer</strong>: Database management.</li>
</ul>
</li>
<li><strong>Azure Services</strong>: Various services provided by Azure to support multi-tier applications.
<ul>
<li><strong>Azure App Service</strong>: For hosting web applications.</li>
<li><strong>Azure SQL Database</strong>: Managed relational database service.</li>
<li><strong>Azure Virtual Machines</strong>: For hosting custom applications and services.</li>
<li><strong>Azure Load Balancer</strong>: Distributes incoming network traffic across multiple servers.</li>
</ul>
</li>
</ul>
</div><h1>Setting Up the Environment</h1>
<div class='content'></div><h2>Creating Resource Groups</h2>
<div class='content'><p>Resource groups in Azure are logical containers for resources deployed on Azure.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXogZ3JvdXAgY3JlYXRlIC0tbmFtZSBNeVJlc291cmNlR3JvdXAgLS1sb2NhdGlvbiBlYXN0dXM="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>az group create --name MyResourceGroup --location eastus</pre></div><div class='content'></div><h2>Deploying the Presentation Layer</h2>
<div class='content'><p>Use Azure App Service to host the web application.</p>
<ol>
<li>
<p><strong>Create an App Service Plan</strong>:</p>
<pre><code class="language-bash">az appservice plan create --name MyAppServicePlan --resource-group MyResourceGroup --sku B1 --is-linux
</code></pre>
</li>
<li>
<p><strong>Create a Web App</strong>:</p>
<pre><code class="language-bash">az webapp create --resource-group MyResourceGroup --plan MyAppServicePlan --name MyWebApp --runtime &quot;NODE|14-lts&quot;
</code></pre>
</li>
</ol>
</div><h2>Deploying the Business Logic Layer</h2>
<div class='content'><p>Use Azure Virtual Machines or Azure Functions for the business logic.</p>
<ol>
<li>
<p><strong>Create a Virtual Machine</strong>:</p>
<pre><code class="language-bash">az vm create --resource-group MyResourceGroup --name MyVM --image UbuntuLTS --admin-username azureuser --generate-ssh-keys
</code></pre>
</li>
<li>
<p><strong>Install Necessary Software</strong>:</p>
<pre><code class="language-bash">az vm run-command invoke --command-id RunShellScript --name MyVM --resource-group MyResourceGroup --scripts &quot;sudo apt-get update &amp;&amp; sudo apt-get install -y nodejs&quot;
</code></pre>
</li>
</ol>
</div><h2>Deploying the Data Layer</h2>
<div class='content'><p>Use Azure SQL Database for the data layer.</p>
<ol>
<li>
<p><strong>Create a SQL Server</strong>:</p>
<pre><code class="language-bash">az sql server create --name myserver --resource-group MyResourceGroup --location eastus --admin-user myadmin --admin-password MyPassword123
</code></pre>
</li>
<li>
<p><strong>Create a SQL Database</strong>:</p>
<pre><code class="language-bash">az sql db create --resource-group MyResourceGroup --server myserver --name mydatabase --service-objective S0
</code></pre>
</li>
</ol>
</div><h1>Connecting the Layers</h1>
<div class='content'></div><h2>Configuring the Web App to Connect to the Business Logic Layer</h2>
<div class='content'><p>Update the web app configuration to point to the business logic layer.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXogd2ViYXBwIGNvbmZpZyBhcHBzZXR0aW5ncyBzZXQgLS1yZXNvdXJjZS1ncm91cCBNeVJlc291cmNlR3JvdXAgLS1uYW1lIE15V2ViQXBwIC0tc2V0dGluZ3MgQlVTSU5FU1NfTE9HSUNfVVJMPWh0dHA6Ly88Vk1fSVBfQUREUkVTUz4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>az webapp config appsettings set --resource-group MyResourceGroup --name MyWebApp --settings BUSINESS_LOGIC_URL=http://&lt;VM_IP_ADDRESS&gt;</pre></div><div class='content'></div><h2>Configuring the Business Logic Layer to Connect to the Data Layer</h2>
<div class='content'><p>Update the business logic layer to connect to the SQL database.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3Qgc3FsID0gcmVxdWlyZSgnbXNzcWwnKTsKCmNvbnN0IGNvbmZpZyA9IHsKICAgIHVzZXI6ICdteWFkbWluJywKICAgIHBhc3N3b3JkOiAnTXlQYXNzd29yZDEyMycsCiAgICBzZXJ2ZXI6ICdteXNlcnZlci5kYXRhYmFzZS53aW5kb3dzLm5ldCcsCiAgICBkYXRhYmFzZTogJ215ZGF0YWJhc2UnLAogICAgb3B0aW9uczogewogICAgICAgIGVuY3J5cHQ6IHRydWUKICAgIH0KfTsKCnNxbC5jb25uZWN0KGNvbmZpZykudGhlbihwb29sID0+IHsKICAgIHJldHVybiBwb29sLnJlcXVlc3QoKS5xdWVyeSgnU0VMRUNUICogRlJPTSBteXRhYmxlJyk7Cn0pLnRoZW4ocmVzdWx0ID0+IHsKICAgIGNvbnNvbGUuZGlyKHJlc3VsdCk7Cn0pLmNhdGNoKGVyciA9PiB7CiAgICBjb25zb2xlLmVycm9yKGVycik7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const sql = require('mssql');

const config = {
    user: 'myadmin',
    password: 'MyPassword123',
    server: 'myserver.database.windows.net',
    database: 'mydatabase',
    options: {
        encrypt: true
    }
};

sql.connect(config).then(pool =&gt; {
    return pool.request().query('SELECT * FROM mytable');
}).then(result =&gt; {
    console.dir(result);
}).catch(err =&gt; {
    console.error(err);
});</pre></div><div class='content'></div><h1>Advanced Deployment Strategies</h1>
<div class='content'></div><h2>Using Azure DevOps for CI/CD</h2>
<div class='content'><p>Set up continuous integration and continuous deployment pipelines using Azure DevOps.</p>
<ol>
<li>
<p><strong>Create a New Pipeline</strong>:</p>
<ul>
<li>Navigate to Azure DevOps.</li>
<li>Create a new pipeline and connect it to your repository.</li>
<li>Define your build and release stages.</li>
</ul>
</li>
<li>
<p><strong>YAML Pipeline Example</strong>:</p>
<pre><code class="language-yaml">trigger:
- main

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: UseNode@2
  inputs:
    version: '14.x'
- script: |
    npm install
    npm run build
  displayName: 'Build project'
- task: AzureWebApp@1
  inputs:
    azureSubscription: '&lt;Azure Service Connection&gt;'
    appName: 'MyWebApp'
    package: '$(Build.ArtifactStagingDirectory)/**/*.zip'
</code></pre>
</li>
</ol>
</div><h2>Scaling the Application</h2>
<div class='content'><p>Use Azure Load Balancer to distribute traffic and scale the application.</p>
<ol>
<li>
<p><strong>Create a Load Balancer</strong>:</p>
<pre><code class="language-bash">az network lb create --resource-group MyResourceGroup --name MyLoadBalancer --sku Basic --frontend-ip-name MyFrontEnd --backend-pool-name MyBackEndPool
</code></pre>
</li>
<li>
<p><strong>Add VMs to the Load Balancer</strong>:</p>
<pre><code class="language-bash">az network lb address-pool address add --resource-group MyResourceGroup --lb-name MyLoadBalancer --pool-name MyBackEndPool --vnet-name MyVNet --nic-name MyVMNic
</code></pre>
</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>Deploying a multi-tier application on Azure involves setting up different layers of the application using various Azure services. By following the steps outlined in this guide, you can deploy a robust and scalable multi-tier application. Advanced strategies such as using Azure DevOps for CI/CD and Azure Load Balancer for scaling can further enhance your deployment process.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='azure-resource-manager'>&#x25C4;Azure Resource Manager (ARM)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Deploying a Multi-Tier Application on Azure</a>
	</div>
	<div class='col-4 text-end'>
					<a href='building-a-serverless-api'>Building a Serverless API &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
