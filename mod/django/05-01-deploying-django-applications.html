<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deploying Django Applications</title>

    <link rel="alternate" href="https://campusempresa.com/mod/django/05-01-deploying-django-applications" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/django/05-01-deploying-django-applications" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/django/05-01-deploying-django-applications" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/django/05-01-deploying-django-applications" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/django/05-01-deploying-django-applications" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-05-performance-optimization' title="Performance Optimization">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Deploying Django Applications</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-02-security-best-practices' title="Security Best Practices">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Deploying a Django application involves several steps to ensure that your web application is accessible to users over the internet. This section will guide you through the process of deploying a Django application, covering various deployment options, setting up a production environment, and configuring your application for optimal performance and security.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Production vs. Development</strong>: Understand the differences between development and production environments.</li>
<li><strong>Web Servers</strong>: Learn about web servers like Nginx and Apache.</li>
<li><strong>WSGI</strong>: Understand the role of WSGI (Web Server Gateway Interface) in serving Django applications.</li>
<li><strong>Database Configuration</strong>: Configure your database for production.</li>
<li><strong>Static and Media Files</strong>: Properly handle static and media files in production.</li>
<li><strong>Environment Variables</strong>: Use environment variables to manage sensitive information.</li>
<li><strong>Security</strong>: Implement security best practices for your deployed application.</li>
</ol>
</div><h1>Step-by-Step Guide</h1>
<div class='content'></div><h2>1. Preparing Your Django Application for Production</h2>
<div class='content'><h4>Update Settings for Production</h4>
<p>Edit your <code>settings.py</code> file to include production-specific settings:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzZXR0aW5ncy5weQoKaW1wb3J0IG9zCmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aAoKIyBTRUNVUklUWSBXQVJOSU5HOiBkb24ndCBydW4gd2l0aCBkZWJ1ZyB0dXJuZWQgb24gaW4gcHJvZHVjdGlvbiEKREVCVUcgPSBGYWxzZQoKIyBBZGQgeW91ciBwcm9kdWN0aW9uIGRvbWFpbihzKSBoZXJlCkFMTE9XRURfSE9TVFMgPSBbJ3lvdXJkb21haW4uY29tJywgJ3d3dy55b3VyZG9tYWluLmNvbSddCgojIFN0YXRpYyBmaWxlcyAoQ1NTLCBKYXZhU2NyaXB0LCBJbWFnZXMpClNUQVRJQ19VUkwgPSAnL3N0YXRpYy8nClNUQVRJQ19ST09UID0gb3MucGF0aC5qb2luKEJBU0VfRElSLCAnc3RhdGljZmlsZXMnKQoKIyBNZWRpYSBmaWxlcwpNRURJQV9VUkwgPSAnL21lZGlhLycKTUVESUFfUk9PVCA9IG9zLnBhdGguam9pbihCQVNFX0RJUiwgJ21lZGlhJykKCiMgU2VjdXJpdHkgc2V0dGluZ3MKU0VDVVJFX1NTTF9SRURJUkVDVCA9IFRydWUKU0VTU0lPTl9DT09LSUVfU0VDVVJFID0gVHJ1ZQpDU1JGX0NPT0tJRV9TRUNVUkUgPSBUcnVl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># settings.py

import os
from pathlib import Path

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = False

# Add your production domain(s) here
ALLOWED_HOSTS = ['yourdomain.com', 'www.yourdomain.com']

# Static files (CSS, JavaScript, Images)
STATIC_URL = '/static/'
STATIC_ROOT = os.path.join(BASE_DIR, 'staticfiles')

# Media files
MEDIA_URL = '/media/'
MEDIA_ROOT = os.path.join(BASE_DIR, 'media')

# Security settings
SECURE_SSL_REDIRECT = True
SESSION_COOKIE_SECURE = True
CSRF_COOKIE_SECURE = True</pre></div><div class='content'></div><h2>2. Setting Up the Server</h2>
<div class='content'><h4>Install Required Software</h4>
<p>Ensure you have the following software installed on your server:</p>
<ul>
<li>Python</li>
<li>pip</li>
<li>virtualenv</li>
<li>Nginx or Apache</li>
<li>Gunicorn or uWSGI</li>
</ul>
<h4>Create a Virtual Environment</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCBweXRob24zIC1tIHZlbnYgbXllbnYKJCBzb3VyY2UgbXllbnYvYmluL2FjdGl2YXRl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ python3 -m venv myenv
$ source myenv/bin/activate</pre></div><div class='content'><h4>Install Django and Other Dependencies</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("KG15ZW52KSAkIHBpcCBpbnN0YWxsIGRqYW5nbyBndW5pY29ybg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>(myenv) $ pip install django gunicorn</pre></div><div class='content'></div><h2>3. Configuring Gunicorn</h2>
<div class='content'><p>Create a Gunicorn systemd service file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCBzdWRvIG5hbm8gL2V0Yy9zeXN0ZW1kL3N5c3RlbS9ndW5pY29ybi5zZXJ2aWNl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ sudo nano /etc/systemd/system/gunicorn.service</pre></div><div class='content'><p>Add the following configuration:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("W1VuaXRdCkRlc2NyaXB0aW9uPWd1bmljb3JuIGRhZW1vbgpBZnRlcj1uZXR3b3JrLnRhcmdldAoKW1NlcnZpY2VdClVzZXI9eW91cnVzZXJuYW1lCkdyb3VwPXd3dy1kYXRhCldvcmtpbmdEaXJlY3Rvcnk9L3BhdGgvdG8veW91ci9wcm9qZWN0CkV4ZWNTdGFydD0vcGF0aC90by95b3VyL3ZlbnYvYmluL2d1bmljb3JuIC0td29ya2VycyAzIC0tYmluZCB1bml4Oi9wYXRoL3RvL3lvdXIvcHJvamVjdC5zb2NrIHlvdXJwcm9qZWN0LndzZ2k6YXBwbGljYXRpb24KCltJbnN0YWxsXQpXYW50ZWRCeT1tdWx0aS11c2VyLnRhcmdldA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>[Unit]
Description=gunicorn daemon
After=network.target

[Service]
User=yourusername
Group=www-data
WorkingDirectory=/path/to/your/project
ExecStart=/path/to/your/venv/bin/gunicorn --workers 3 --bind unix:/path/to/your/project.sock yourproject.wsgi:application

[Install]
WantedBy=multi-user.target</pre></div><div class='content'><p>Start and enable the Gunicorn service:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCBzdWRvIHN5c3RlbWN0bCBzdGFydCBndW5pY29ybgokIHN1ZG8gc3lzdGVtY3RsIGVuYWJsZSBndW5pY29ybg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ sudo systemctl start gunicorn
$ sudo systemctl enable gunicorn</pre></div><div class='content'></div><h2>4. Configuring Nginx</h2>
<div class='content'><p>Create an Nginx configuration file for your project:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCBzdWRvIG5hbm8gL2V0Yy9uZ2lueC9zaXRlcy1hdmFpbGFibGUveW91cnByb2plY3Q="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ sudo nano /etc/nginx/sites-available/yourproject</pre></div><div class='content'><p>Add the following configuration:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VydmVyIHsKICAgIGxpc3RlbiA4MDsKICAgIHNlcnZlcl9uYW1lIHlvdXJkb21haW4uY29tIHd3dy55b3VyZG9tYWluLmNvbTsKCiAgICBsb2NhdGlvbiA9IC9mYXZpY29uLmljbyB7IGFjY2Vzc19sb2cgb2ZmOyBsb2dfbm90X2ZvdW5kIG9mZjsgfQogICAgbG9jYXRpb24gL3N0YXRpYy8gewogICAgICAgIHJvb3QgL3BhdGgvdG8veW91ci9wcm9qZWN0OwogICAgfQoKICAgIGxvY2F0aW9uIC9tZWRpYS8gewogICAgICAgIHJvb3QgL3BhdGgvdG8veW91ci9wcm9qZWN0OwogICAgfQoKICAgIGxvY2F0aW9uIC8gewogICAgICAgIGluY2x1ZGUgcHJveHlfcGFyYW1zOwogICAgICAgIHByb3h5X3Bhc3MgaHR0cDovL3VuaXg6L3BhdGgvdG8veW91ci9wcm9qZWN0LnNvY2s7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>server {
    listen 80;
    server_name yourdomain.com www.yourdomain.com;

    location = /favicon.ico { access_log off; log_not_found off; }
    location /static/ {
        root /path/to/your/project;
    }

    location /media/ {
        root /path/to/your/project;
    }

    location / {
        include proxy_params;
        proxy_pass http://unix:/path/to/your/project.sock;
    }
}</pre></div><div class='content'><p>Enable the Nginx configuration:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCBzdWRvIGxuIC1zIC9ldGMvbmdpbngvc2l0ZXMtYXZhaWxhYmxlL3lvdXJwcm9qZWN0IC9ldGMvbmdpbngvc2l0ZXMtZW5hYmxlZAokIHN1ZG8gbmdpbnggLXQKJCBzdWRvIHN5c3RlbWN0bCByZXN0YXJ0IG5naW54"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ sudo ln -s /etc/nginx/sites-available/yourproject /etc/nginx/sites-enabled
$ sudo nginx -t
$ sudo systemctl restart nginx</pre></div><div class='content'></div><h2>5. Configuring the Database</h2>
<div class='content'><p>Ensure your database is configured for production. For PostgreSQL, you might need to install the necessary packages and configure your database settings in <code>settings.py</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzZXR0aW5ncy5weQoKREFUQUJBU0VTID0gewogICAgJ2RlZmF1bHQnOiB7CiAgICAgICAgJ0VOR0lORSc6ICdkamFuZ28uZGIuYmFja2VuZHMucG9zdGdyZXNxbCcsCiAgICAgICAgJ05BTUUnOiAneW91cmRibmFtZScsCiAgICAgICAgJ1VTRVInOiAneW91cmRidXNlcicsCiAgICAgICAgJ1BBU1NXT1JEJzogJ3lvdXJkYnBhc3N3b3JkJywKICAgICAgICAnSE9TVCc6ICdsb2NhbGhvc3QnLAogICAgICAgICdQT1JUJzogJzU0MzInLAogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># settings.py

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'yourdbname',
        'USER': 'yourdbuser',
        'PASSWORD': 'yourdbpassword',
        'HOST': 'localhost',
        'PORT': '5432',
    }
}</pre></div><div class='content'></div><h2>6. Collecting Static Files</h2>
<div class='content'><p>Run the <code>collectstatic</code> command to gather all static files into the <code>STATIC_ROOT</code> directory:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("KG15ZW52KSAkIHB5dGhvbiBtYW5hZ2UucHkgY29sbGVjdHN0YXRpYw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>(myenv) $ python manage.py collectstatic</pre></div><div class='content'></div><h2>7. Using Environment Variables</h2>
<div class='content'><p>Use environment variables to manage sensitive information. Create a <code>.env</code> file and load it in your <code>settings.py</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyAuZW52ClNFQ1JFVF9LRVk9eW91cl9zZWNyZXRfa2V5CkRFQlVHPUZhbHNlCkRBVEFCQVNFX1VSTD1wb3N0Z3JlczovL3lvdXJkYnVzZXI6eW91cmRicGFzc3dvcmRAbG9jYWxob3N0L3lvdXJkYm5hbWU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># .env
SECRET_KEY=your_secret_key
DEBUG=False
DATABASE_URL=postgres://yourdbuser:yourdbpassword@localhost/yourdbname</pre></div><div class='content'><p>Load the environment variables in <code>settings.py</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzZXR0aW5ncy5weQoKaW1wb3J0IG9zCmZyb20gZG90ZW52IGltcG9ydCBsb2FkX2RvdGVudgoKbG9hZF9kb3RlbnYoKQoKU0VDUkVUX0tFWSA9IG9zLmdldGVudignU0VDUkVUX0tFWScpCkRFQlVHID0gb3MuZ2V0ZW52KCdERUJVRycpID09ICdUcnVlJwpEQVRBQkFTRVMgPSB7CiAgICAnZGVmYXVsdCc6IGRqX2RhdGFiYXNlX3VybC5jb25maWcoZGVmYXVsdD1vcy5nZXRlbnYoJ0RBVEFCQVNFX1VSTCcpKQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># settings.py

import os
from dotenv import load_dotenv

load_dotenv()

SECRET_KEY = os.getenv('SECRET_KEY')
DEBUG = os.getenv('DEBUG') == 'True'
DATABASES = {
    'default': dj_database_url.config(default=os.getenv('DATABASE_URL'))
}</pre></div><div class='content'></div><h2>8. Security Best Practices</h2>
<div class='content'><ul>
<li><strong>Use HTTPS</strong>: Ensure your site is served over HTTPS.</li>
<li><strong>Set Security Headers</strong>: Configure security headers in Nginx.</li>
<li><strong>Regularly Update Dependencies</strong>: Keep your dependencies up to date to avoid security vulnerabilities.</li>
</ul>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise: Deploy a Simple Django Application</h2>
<div class='content'><ol>
<li><strong>Set Up a Virtual Server</strong>: Use a cloud provider like AWS, DigitalOcean, or Heroku to set up a virtual server.</li>
<li><strong>Install Required Software</strong>: Install Python, pip, virtualenv, Nginx, and Gunicorn on your server.</li>
<li><strong>Deploy Your Application</strong>: Follow the steps outlined above to deploy a simple Django application.</li>
<li><strong>Test Your Deployment</strong>: Ensure your application is accessible via your domain and that static and media files are served correctly.</li>
</ol>
</div><h2>Solution</h2>
<div class='content'><p>Follow the step-by-step guide provided in this section to deploy your Django application. Ensure you test each step to verify that your application is working as expected.</p>
</div><h1>Conclusion</h1>
<div class='content'><p>Deploying a Django application involves several steps, from configuring your application for production to setting up a web server and WSGI server. By following the steps outlined in this section, you can successfully deploy your Django application and make it accessible to users. Remember to implement security best practices to protect your application and its data.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-05-performance-optimization' title="Performance Optimization">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-02-security-best-practices' title="Security Best Practices">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
