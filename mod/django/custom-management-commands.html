<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Management Commands</title>

    <link rel="alternate" href="https://campusempresa.com/mod/django/custom-management-commands" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/django/custom-management-commands" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/django/custom-management-commands" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/django/custom-management-commands" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/django/custom-management-commands" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='advanced-querying-techniques'>&#x25C4;Advanced Querying Techniques</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Custom Management Commands</a>
	</div>
	<div class='col-4 text-end'>
					<a href='django-community-and-contributing'>Django Community and Contributing &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Django provides a powerful command-line utility called <code>manage.py</code> that allows developers to perform various administrative tasks. While Django comes with a set of built-in commands, you can also create your own custom management commands to automate tasks specific to your project.</p>
</div><h1>Why Use Custom Management Commands?</h1>
<div class='content'><ul>
<li><strong>Automation</strong>: Automate repetitive tasks such as data import/export, cleanup, or batch processing.</li>
<li><strong>Convenience</strong>: Simplify complex operations into single commands.</li>
<li><strong>Integration</strong>: Easily integrate with other tools and scripts.</li>
</ul>
</div><h1>Creating a Custom Management Command</h1>
<div class='content'></div><h2>Step-by-Step Guide</h2>
<div class='content'><ol>
<li>
<p><strong>Create the Command Directory</strong>:</p>
<ul>
<li>Navigate to your Django app directory.</li>
<li>Create a directory named <code>management/commands</code> inside your app directory.</li>
</ul>
<pre><code class="language-bash">mkdir -p myapp/management/commands
</code></pre>
</li>
<li>
<p><strong>Create the Command File</strong>:</p>
<ul>
<li>Inside the <code>commands</code> directory, create a Python file for your command. The file name will be the command name.</li>
</ul>
<pre><code class="language-bash">touch myapp/management/commands/mycommand.py
</code></pre>
</li>
<li>
<p><strong>Write the Command Code</strong>:</p>
<ul>
<li>Open the newly created file and define your command by extending <code>BaseCommand</code>.</li>
</ul>
<pre><code class="language-python">from django.core.management.base import BaseCommand

class Command(BaseCommand):
    help = 'Description of your command'

    def handle(self, *args, **kwargs):
        self.stdout.write('Hello, this is my custom command!')
</code></pre>
</li>
</ol>
</div><h2>Adding Arguments to Your Command</h2>
<div class='content'><p>You can add arguments to your command to make it more flexible.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBkamFuZ28uY29yZS5tYW5hZ2VtZW50LmJhc2UgaW1wb3J0IEJhc2VDb21tYW5kCgpjbGFzcyBDb21tYW5kKEJhc2VDb21tYW5kKToKICAgIGhlbHAgPSAnRGVzY3JpcHRpb24gb2YgeW91ciBjb21tYW5kJwoKICAgIGRlZiBhZGRfYXJndW1lbnRzKHNlbGYsIHBhcnNlcik6CiAgICAgICAgcGFyc2VyLmFkZF9hcmd1bWVudCgnbmFtZScsIHR5cGU9c3RyLCBoZWxwPSdOYW1lIG9mIHRoZSBwZXJzb24gdG8gZ3JlZXQnKQoKICAgIGRlZiBoYW5kbGUoc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToKICAgICAgICBuYW1lID0ga3dhcmdzWyduYW1lJ10KICAgICAgICBzZWxmLnN0ZG91dC53cml0ZShmJ0hlbGxvLCB7bmFtZX0hJyk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from django.core.management.base import BaseCommand

class Command(BaseCommand):
    help = 'Description of your command'

    def add_arguments(self, parser):
        parser.add_argument('name', type=str, help='Name of the person to greet')

    def handle(self, *args, **kwargs):
        name = kwargs['name']
        self.stdout.write(f'Hello, {name}!')</pre></div><div class='content'></div><h2>Example: A Command to Clean Up Old Data</h2>
<div class='content'><p>Let's create a command that deletes records older than a specified number of days.</p>
<ol>
<li>
<p><strong>Create the Command File</strong>:</p>
<pre><code class="language-bash">touch myapp/management/commands/cleanup_old_data.py
</code></pre>
</li>
<li>
<p><strong>Write the Command Code</strong>:</p>
<pre><code class="language-python">from django.core.management.base import BaseCommand
from myapp.models import MyModel
from datetime import datetime, timedelta

class Command(BaseCommand):
    help = 'Delete records older than a specified number of days'

    def add_arguments(self, parser):
        parser.add_argument('days', type=int, help='Number of days')

    def handle(self, *args, **kwargs):
        days = kwargs['days']
        cutoff_date = datetime.now() - timedelta(days=days)
        old_records = MyModel.objects.filter(created_at__lt=cutoff_date)
        count = old_records.count()
        old_records.delete()
        self.stdout.write(f'Deleted {count} records older than {days} days')
</code></pre>
</li>
</ol>
</div><h2>Running Your Custom Command</h2>
<div class='content'><p>To run your custom command, use the <code>manage.py</code> script followed by the command name and any arguments.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHl0aG9uIG1hbmFnZS5weSBteWNvbW1hbmQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>python manage.py mycommand</pre></div><div class='content'><p>For the cleanup example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHl0aG9uIG1hbmFnZS5weSBjbGVhbnVwX29sZF9kYXRhIDMw"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>python manage.py cleanup_old_data 30</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Custom management commands in Django provide a powerful way to automate and simplify administrative tasks. By following the steps outlined in this topic, you can create your own commands tailored to the specific needs of your project. Whether it's for data cleanup, batch processing, or integration with other tools, custom commands can significantly enhance your productivity and streamline your workflow.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='advanced-querying-techniques'>&#x25C4;Advanced Querying Techniques</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Custom Management Commands</a>
	</div>
	<div class='col-4 text-end'>
					<a href='django-community-and-contributing'>Django Community and Contributing &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
