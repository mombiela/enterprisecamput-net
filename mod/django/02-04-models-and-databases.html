<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Models and Databases</title>

    <link rel="alternate" href="https://campusempresa.com/mod/django/02-04-models-and-databases" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/django/02-04-models-and-databases" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/django/02-04-models-and-databases" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/django/02-04-models-and-databases" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/django/02-04-models-and-databases" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Programming Languages</a>
				 					<a href="/categ/frameworks">Frameworks and Libraries</a>
				 					<a href="/categ/tech-tools">Technical Tools</a>
				 					<a href="/categ/foundations">Theoretical Foundations</a>
				 					<a href="/categ/soft-skills">Social Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='02-03-templates-and-static-files' title="Templates and Static Files">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Models and Databases</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='02-05-django-admin-interface' title="Django Admin Interface">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how Django handles data through its powerful Object-Relational Mapping (ORM) system. We'll cover the basics of creating models, interacting with the database, and performing CRUD (Create, Read, Update, Delete) operations.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Django Models</strong>: Represent the structure of your database.</li>
<li><strong>ORM (Object-Relational Mapping)</strong>: Allows you to interact with the database using Python code instead of SQL.</li>
<li><strong>Migrations</strong>: Manage changes to your database schema over time.</li>
</ol>
</div><h1><p>Creating a Model</p>
</h1>
<div class='content'><p>A model in Django is a Python class that subclasses <code>django.db.models.Model</code>. Each attribute of the model represents a database field.</p>
</div><h2><p>Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBtb2RlbHMucHkKZnJvbSBkamFuZ28uZGIgaW1wb3J0IG1vZGVscwoKY2xhc3MgQXV0aG9yKG1vZGVscy5Nb2RlbCk6CiAgICBmaXJzdF9uYW1lID0gbW9kZWxzLkNoYXJGaWVsZChtYXhfbGVuZ3RoPTMwKQogICAgbGFzdF9uYW1lID0gbW9kZWxzLkNoYXJGaWVsZChtYXhfbGVuZ3RoPTMwKQogICAgYmlydGhfZGF0ZSA9IG1vZGVscy5EYXRlRmllbGQoKQoKICAgIGRlZiBfX3N0cl9fKHNlbGYpOgogICAgICAgIHJldHVybiBmIntzZWxmLmZpcnN0X25hbWV9IHtzZWxmLmxhc3RfbmFtZX0i"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># models.py
from django.db import models

class Author(models.Model):
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=30)
    birth_date = models.DateField()

    def __str__(self):
        return f&quot;{self.first_name} {self.last_name}&quot;</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><code>first_name</code>, <code>last_name</code>, and <code>birth_date</code> are fields in the <code>Author</code> model.</li>
<li><code>models.CharField</code> and <code>models.DateField</code> are field types provided by Django.</li>
<li>The <code>__str__</code> method is used to return a human-readable representation of the model.</li>
</ul>
</div><h1><p>Making Migrations</p>
</h1>
<div class='content'><p>After defining your models, you need to create and apply migrations to update the database schema.</p>
</div><h2><p>Commands</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Create Migrations</strong>: Detect changes in models and create migration files.</p>
<pre><code class="language-bash">python manage.py makemigrations
</code></pre>
</li>
<li>
<p><strong>Apply Migrations</strong>: Apply the migration files to the database.</p>
<pre><code class="language-bash">python manage.py migrate
</code></pre>
</li>
</ol>
</div><h1><p>Interacting with the Database</p>
</h1>
<div class='content'><p>Django provides a powerful API to interact with the database using the ORM.</p>
</div><h2><p>Creating Records</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDcmVhdGUgYSBuZXcgYXV0aG9yCmF1dGhvciA9IEF1dGhvcihmaXJzdF9uYW1lPSJKb2huIiwgbGFzdF9uYW1lPSJEb2UiLCBiaXJ0aF9kYXRlPSIxOTgwLTAxLTAxIikKYXV0aG9yLnNhdmUoKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Create a new author
author = Author(first_name=&quot;John&quot;, last_name=&quot;Doe&quot;, birth_date=&quot;1980-01-01&quot;)
author.save()</pre></div><div class='content'></div><h2><p>Reading Records</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBHZXQgYWxsIGF1dGhvcnMKYXV0aG9ycyA9IEF1dGhvci5vYmplY3RzLmFsbCgpCgojIEdldCBhIHNwZWNpZmljIGF1dGhvcgphdXRob3IgPSBBdXRob3Iub2JqZWN0cy5nZXQoaWQ9MSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Get all authors
authors = Author.objects.all()

# Get a specific author
author = Author.objects.get(id=1)</pre></div><div class='content'></div><h2><p>Updating Records</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVcGRhdGUgYW4gYXV0aG9yJ3MgbGFzdCBuYW1lCmF1dGhvciA9IEF1dGhvci5vYmplY3RzLmdldChpZD0xKQphdXRob3IubGFzdF9uYW1lID0gIlNtaXRoIgphdXRob3Iuc2F2ZSgp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Update an author's last name
author = Author.objects.get(id=1)
author.last_name = &quot;Smith&quot;
author.save()</pre></div><div class='content'></div><h2><p>Deleting Records</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBEZWxldGUgYW4gYXV0aG9yCmF1dGhvciA9IEF1dGhvci5vYmplY3RzLmdldChpZD0xKQphdXRob3IuZGVsZXRlKCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Delete an author
author = Author.objects.get(id=1)
author.delete()</pre></div><div class='content'></div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Task</p>
</h2>
<div class='content'><ol>
<li>
<p>Create a new model called <code>Book</code> with the following fields:</p>
<ul>
<li><code>title</code> (CharField, max_length=100)</li>
<li><code>author</code> (ForeignKey to <code>Author</code>)</li>
<li><code>published_date</code> (DateField)</li>
<li><code>isbn</code> (CharField, max_length=13)</li>
</ul>
</li>
<li>
<p>Make and apply migrations.</p>
</li>
<li>
<p>Create a few <code>Book</code> records and interact with them using the ORM.</p>
</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBtb2RlbHMucHkKZnJvbSBkamFuZ28uZGIgaW1wb3J0IG1vZGVscwoKY2xhc3MgQm9vayhtb2RlbHMuTW9kZWwpOgogICAgdGl0bGUgPSBtb2RlbHMuQ2hhckZpZWxkKG1heF9sZW5ndGg9MTAwKQogICAgYXV0aG9yID0gbW9kZWxzLkZvcmVpZ25LZXkoQXV0aG9yLCBvbl9kZWxldGU9bW9kZWxzLkNBU0NBREUpCiAgICBwdWJsaXNoZWRfZGF0ZSA9IG1vZGVscy5EYXRlRmllbGQoKQogICAgaXNibiA9IG1vZGVscy5DaGFyRmllbGQobWF4X2xlbmd0aD0xMykKCiAgICBkZWYgX19zdHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gc2VsZi50aXRsZQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># models.py
from django.db import models

class Book(models.Model):
    title = models.CharField(max_length=100)
    author = models.ForeignKey(Author, on_delete=models.CASCADE)
    published_date = models.DateField()
    isbn = models.CharField(max_length=13)

    def __str__(self):
        return self.title</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDcmVhdGUgYW5kIGFwcGx5IG1pZ3JhdGlvbnMKcHl0aG9uIG1hbmFnZS5weSBtYWtlbWlncmF0aW9ucwpweXRob24gbWFuYWdlLnB5IG1pZ3JhdGU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Create and apply migrations
python manage.py makemigrations
python manage.py migrate</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBJbnRlcmFjdCB3aXRoIHRoZSBCb29rIG1vZGVsCmZyb20gbXlhcHAubW9kZWxzIGltcG9ydCBBdXRob3IsIEJvb2sKCiMgQ3JlYXRlIGEgbmV3IGJvb2sKYXV0aG9yID0gQXV0aG9yLm9iamVjdHMuZ2V0KGlkPTEpCmJvb2sgPSBCb29rKHRpdGxlPSJEamFuZ28gZm9yIEJlZ2lubmVycyIsIGF1dGhvcj1hdXRob3IsIHB1Ymxpc2hlZF9kYXRlPSIyMDIzLTAxLTAxIiwgaXNibj0iMTIzNDU2Nzg5MDEyMyIpCmJvb2suc2F2ZSgpCgojIEdldCBhbGwgYm9va3MKYm9va3MgPSBCb29rLm9iamVjdHMuYWxsKCkKCiMgVXBkYXRlIGEgYm9vaydzIHRpdGxlCmJvb2sgPSBCb29rLm9iamVjdHMuZ2V0KGlkPTEpCmJvb2sudGl0bGUgPSAiQWR2YW5jZWQgRGphbmdvIgpib29rLnNhdmUoKQoKIyBEZWxldGUgYSBib29rCmJvb2sgPSBCb29rLm9iamVjdHMuZ2V0KGlkPTEpCmJvb2suZGVsZXRlKCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Interact with the Book model
from myapp.models import Author, Book

# Create a new book
author = Author.objects.get(id=1)
book = Book(title=&quot;Django for Beginners&quot;, author=author, published_date=&quot;2023-01-01&quot;, isbn=&quot;1234567890123&quot;)
book.save()

# Get all books
books = Book.objects.all()

# Update a book's title
book = Book.objects.get(id=1)
book.title = &quot;Advanced Django&quot;
book.save()

# Delete a book
book = Book.objects.get(id=1)
book.delete()</pre></div><div class='content'></div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ul>
<li><strong>Forgetting to Apply Migrations</strong>: Always run <code>makemigrations</code> and <code>migrate</code> after changing models.</li>
<li><strong>Incorrect Field Types</strong>: Ensure you use the correct field types for your data.</li>
<li><strong>Not Using <code>ForeignKey</code> Correctly</strong>: Remember to specify <code>on_delete</code> behavior for <code>ForeignKey</code> fields.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the basics of Django models and databases. You learned how to create models, make and apply migrations, and perform CRUD operations using Django's ORM. This knowledge is fundamental for building any Django application that interacts with a database. In the next section, we will dive into the Django Admin Interface, which provides a powerful way to manage your data.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='02-03-templates-and-static-files' title="Templates and Static Files">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='02-05-django-admin-interface' title="Django Admin Interface">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
