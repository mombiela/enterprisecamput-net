<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integration Tests</title>

    <link rel="alternate" href="https://campusempresa.com/mod/django/integration-tests" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/django/integration-tests" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/django/integration-tests" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/django/integration-tests" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/django/integration-tests" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-tests'>&#x25C4;Unit Tests</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Integration Tests</a>
	</div>
	<div class='col-4 text-end'>
					<a href='testing-views-and-templates'>Testing Views and Templates &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Integration tests are essential in ensuring that different parts of your Django application work together as expected. Unlike unit tests, which test individual components in isolation, integration tests focus on the interactions between components.</p>
</div><h1>What are Integration Tests?</h1>
<div class='content'><ul>
<li><strong>Definition</strong>: Integration tests verify that multiple components of your application work together correctly.</li>
<li><strong>Purpose</strong>: They help catch issues that arise from the interaction between different parts of the system.</li>
<li><strong>Scope</strong>: Typically broader than unit tests, covering multiple modules or even the entire application.</li>
</ul>
</div><h1>Why Use Integration Tests in Django?</h1>
<div class='content'><ul>
<li><strong>Comprehensive Coverage</strong>: Ensures that the entire application works as expected.</li>
<li><strong>Early Bug Detection</strong>: Identifies issues that unit tests might miss.</li>
<li><strong>Confidence in Code</strong>: Provides greater assurance that changes won't break the application.</li>
</ul>
</div><h1>Setting Up Integration Tests in Django</h1>
<div class='content'></div><h2>Prerequisites</h2>
<div class='content'><ul>
<li>Basic understanding of Django models, views, and templates.</li>
<li>Familiarity with Django's testing framework.</li>
</ul>
</div><h2>Creating a Test Case</h2>
<div class='content'><p>Django uses the <code>TestCase</code> class from <code>django.test</code> to create integration tests. Here's a simple example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBkamFuZ28udGVzdCBpbXBvcnQgVGVzdENhc2UKZnJvbSBkamFuZ28udXJscyBpbXBvcnQgcmV2ZXJzZQpmcm9tIG15YXBwLm1vZGVscyBpbXBvcnQgTXlNb2RlbAoKY2xhc3MgTXlNb2RlbEludGVncmF0aW9uVGVzdChUZXN0Q2FzZSk6CiAgICBkZWYgc2V0VXAoc2VsZik6CiAgICAgICAgIyBTZXQgdXAgaW5pdGlhbCBkYXRhIGZvciB0aGUgdGVzdAogICAgICAgIHNlbGYubXlfbW9kZWxfaW5zdGFuY2UgPSBNeU1vZGVsLm9iamVjdHMuY3JlYXRlKGZpZWxkMT0ndmFsdWUxJywgZmllbGQyPSd2YWx1ZTInKQoKICAgIGRlZiB0ZXN0X21vZGVsX3ZpZXdfaW50ZWdyYXRpb24oc2VsZik6CiAgICAgICAgIyBUZXN0IHRoZSBpbnRlcmFjdGlvbiBiZXR3ZWVuIHRoZSBtb2RlbCBhbmQgdGhlIHZpZXcKICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LmdldChyZXZlcnNlKCdteV9tb2RlbF9kZXRhaWwnLCBhcmdzPVtzZWxmLm15X21vZGVsX2luc3RhbmNlLmlkXSkpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXNwb25zZS5zdGF0dXNfY29kZSwgMjAwKQogICAgICAgIHNlbGYuYXNzZXJ0Q29udGFpbnMocmVzcG9uc2UsICd2YWx1ZTEnKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from django.test import TestCase
from django.urls import reverse
from myapp.models import MyModel

class MyModelIntegrationTest(TestCase):
    def setUp(self):
        # Set up initial data for the test
        self.my_model_instance = MyModel.objects.create(field1='value1', field2='value2')

    def test_model_view_integration(self):
        # Test the interaction between the model and the view
        response = self.client.get(reverse('my_model_detail', args=[self.my_model_instance.id]))
        self.assertEqual(response.status_code, 200)
        self.assertContains(response, 'value1')</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>setUp Method</strong>: Initializes data needed for the test.</li>
<li><strong>test_model_view_integration Method</strong>: Tests the interaction between the model and the view by making a GET request to the view and checking the response.</li>
</ul>
</div><h1>Best Practices for Integration Tests</h1>
<div class='content'><ul>
<li><strong>Isolate Tests</strong>: Ensure each test is independent and does not rely on the state left by other tests.</li>
<li><strong>Use Fixtures</strong>: Utilize Django's fixtures to set up initial data.</li>
<li><strong>Mock External Services</strong>: Use mocking to simulate interactions with external services.</li>
</ul>
</div><h2>Example of Using Fixtures</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBkamFuZ28udGVzdCBpbXBvcnQgVGVzdENhc2UKZnJvbSBkamFuZ28udXJscyBpbXBvcnQgcmV2ZXJzZQpmcm9tIG15YXBwLm1vZGVscyBpbXBvcnQgTXlNb2RlbAoKY2xhc3MgTXlNb2RlbEludGVncmF0aW9uVGVzdChUZXN0Q2FzZSk6CiAgICBmaXh0dXJlcyA9IFsnbXlfbW9kZWxfZml4dHVyZS5qc29uJ10KCiAgICBkZWYgdGVzdF9tb2RlbF92aWV3X2ludGVncmF0aW9uKHNlbGYpOgogICAgICAgIG15X21vZGVsX2luc3RhbmNlID0gTXlNb2RlbC5vYmplY3RzLmdldChwaz0xKQogICAgICAgIHJlc3BvbnNlID0gc2VsZi5jbGllbnQuZ2V0KHJldmVyc2UoJ215X21vZGVsX2RldGFpbCcsIGFyZ3M9W215X21vZGVsX2luc3RhbmNlLmlkXSkpCiAgICAgICAgc2VsZi5hc3NlcnRFcXVhbChyZXNwb25zZS5zdGF0dXNfY29kZSwgMjAwKQogICAgICAgIHNlbGYuYXNzZXJ0Q29udGFpbnMocmVzcG9uc2UsICd2YWx1ZTEnKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from django.test import TestCase
from django.urls import reverse
from myapp.models import MyModel

class MyModelIntegrationTest(TestCase):
    fixtures = ['my_model_fixture.json']

    def test_model_view_integration(self):
        my_model_instance = MyModel.objects.get(pk=1)
        response = self.client.get(reverse('my_model_detail', args=[my_model_instance.id]))
        self.assertEqual(response.status_code, 200)
        self.assertContains(response, 'value1')</pre></div><div class='content'></div><h2>Mocking External Services</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBkamFuZ28udGVzdCBpbXBvcnQgVGVzdENhc2UKZnJvbSB1bml0dGVzdC5tb2NrIGltcG9ydCBwYXRjaApmcm9tIG15YXBwLnNlcnZpY2VzIGltcG9ydCBleHRlcm5hbF9zZXJ2aWNlCgpjbGFzcyBFeHRlcm5hbFNlcnZpY2VJbnRlZ3JhdGlvblRlc3QoVGVzdENhc2UpOgogICAgQHBhdGNoKCdteWFwcC5zZXJ2aWNlcy5leHRlcm5hbF9zZXJ2aWNlLmNhbGwnKQogICAgZGVmIHRlc3RfZXh0ZXJuYWxfc2VydmljZV9pbnRlZ3JhdGlvbihzZWxmLCBtb2NrX2NhbGwpOgogICAgICAgIG1vY2tfY2FsbC5yZXR1cm5fdmFsdWUgPSB7J3N0YXR1cyc6ICdzdWNjZXNzJ30KICAgICAgICByZXNwb25zZSA9IHNlbGYuY2xpZW50LmdldCgnL2V4dGVybmFsLXNlcnZpY2UtZW5kcG9pbnQvJykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3BvbnNlLnN0YXR1c19jb2RlLCAyMDApCiAgICAgICAgc2VsZi5hc3NlcnRDb250YWlucyhyZXNwb25zZSwgJ3N1Y2Nlc3MnKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from django.test import TestCase
from unittest.mock import patch
from myapp.services import external_service

class ExternalServiceIntegrationTest(TestCase):
    @patch('myapp.services.external_service.call')
    def test_external_service_integration(self, mock_call):
        mock_call.return_value = {'status': 'success'}
        response = self.client.get('/external-service-endpoint/')
        self.assertEqual(response.status_code, 200)
        self.assertContains(response, 'success')</pre></div><div class='content'></div><h1>Running Integration Tests</h1>
<div class='content'><ul>
<li>Use Django's <code>manage.py test</code> command to run your integration tests.</li>
<li>Example: <code>python manage.py test myapp.tests.test_integration</code></li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Integration tests are a crucial part of your Django testing strategy. They help ensure that different parts of your application work together seamlessly. By following best practices and using Django's testing framework effectively, you can write robust integration tests that provide confidence in your application's functionality.</p>
<p>By the end of this section, you should be able to:</p>
<ul>
<li>Understand the purpose and scope of integration tests.</li>
<li>Set up and write integration tests in Django.</li>
<li>Apply best practices to ensure your tests are effective and maintainable.</li>
</ul>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-tests'>&#x25C4;Unit Tests</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Integration Tests</a>
	</div>
	<div class='col-4 text-end'>
					<a href='testing-views-and-templates'>Testing Views and Templates &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
