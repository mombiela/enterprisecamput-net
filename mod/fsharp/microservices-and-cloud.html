<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Microservices and Cloud with F#</title>

    <link rel="alternate" href="https://campusempresa.com/mod/fsharp/microservices-and-cloud" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/fsharp/microservices-and-cloud" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/fsharp/microservices-and-cloud" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/fsharp/microservices-and-cloud" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/fsharp/microservices-and-cloud" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='mobile-development'>&#x25C4;Mobile Development</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Microservices and Cloud with F#</a>
	</div>
	<div class='col-4 text-end'>
					<a href='code-organization'>Code Organization and Modules &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Microservices</h1>
<div class='content'><p>Microservices architecture is a design pattern where a software application is composed of small, independent services that communicate over well-defined APIs. Each service is focused on a specific business function and can be developed, deployed, and scaled independently.</p>
<ul>
<li><strong>Key Concepts:</strong>
<ul>
<li><strong>Service Independence:</strong> Each microservice operates independently.</li>
<li><strong>API Communication:</strong> Services communicate via APIs, often using HTTP/REST or messaging queues.</li>
<li><strong>Scalability:</strong> Each service can be scaled independently based on demand.</li>
<li><strong>Resilience:</strong> Failure in one service does not necessarily affect others.</li>
</ul>
</li>
</ul>
</div><h1>Introduction to Cloud Computing</h1>
<div class='content'><p>Cloud computing provides on-demand delivery of computing resources over the internet. It allows for scalable and flexible resource management, which is ideal for microservices.</p>
<ul>
<li><strong>Key Concepts:</strong>
<ul>
<li><strong>Infrastructure as a Service (IaaS):</strong> Provides virtualized computing resources over the internet.</li>
<li><strong>Platform as a Service (PaaS):</strong> Provides a platform allowing customers to develop, run, and manage applications.</li>
<li><strong>Software as a Service (SaaS):</strong> Delivers software applications over the internet, on a subscription basis.</li>
</ul>
</li>
</ul>
</div><h1>Setting Up Your Environment</h1>
<div class='content'><p>Before diving into microservices with F#, ensure you have the necessary tools installed.</p>
<ul>
<li><strong>Tools Required:</strong>
<ul>
<li><strong>.NET SDK:</strong> The software development kit for building applications.</li>
<li><strong>F# Compiler:</strong> Part of the .NET SDK.</li>
<li><strong>Docker:</strong> For containerizing microservices.</li>
<li><strong>Kubernetes:</strong> For orchestrating containers (optional but recommended for advanced users).</li>
</ul>
</li>
</ul>
</div><h2>Installation Steps</h2>
<div class='content'><ol>
<li>
<p><strong>Install .NET SDK:</strong></p>
<pre><code class="language-bash">wget https://dotnet.microsoft.com/download/dotnet-core/scripts/v1/dotnet-install.sh
chmod +x dotnet-install.sh
./dotnet-install.sh
</code></pre>
</li>
<li>
<p><strong>Install Docker:</strong>
Follow the instructions on the <a href="https://docs.docker.com/get-docker/">Docker website</a>.</p>
</li>
<li>
<p><strong>Install Kubernetes (Optional):</strong>
Follow the instructions on the <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">Kubernetes website</a>.</p>
</li>
</ol>
</div><h1>Building a Simple Microservice in F#</h1>
<div class='content'><p>Let's start by building a simple microservice in F# that performs basic CRUD operations.</p>
</div><h2>Step 1: Create a New F# Project</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG90bmV0IG5ldyBjb25zb2xlIC1sYW5nIEYjIC1vIFNpbXBsZU1pY3Jvc2VydmljZQpjZCBTaW1wbGVNaWNyb3NlcnZpY2U="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dotnet new console -lang F# -o SimpleMicroservice
cd SimpleMicroservice</pre></div><div class='content'></div><h2>Step 2: Define a Simple Data Model</h2>
<div class='content'><p>Create a file named <code>Models.fs</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9kdWxlIE1vZGVscwoKdHlwZSBJdGVtID0gewogICAgSWQ6IGludAogICAgTmFtZTogc3RyaW5nCiAgICBEZXNjcmlwdGlvbjogc3RyaW5nCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>module Models

type Item = {
    Id: int
    Name: string
    Description: string
}</pre></div><div class='content'></div><h2>Step 3: Implement CRUD Operations</h2>
<div class='content'><p>Create a file named <code>Service.fs</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9kdWxlIFNlcnZpY2UKCm9wZW4gTW9kZWxzCgpsZXQgbXV0YWJsZSBpdGVtcyA9IFtdCgpsZXQgYWRkSXRlbSBpdGVtID0KICAgIGl0ZW1zIDwtIGl0ZW0gOjogaXRlbXMKCmxldCBnZXRJdGVtIGlkID0KICAgIGl0ZW1zIHw+IExpc3QudHJ5RmluZCAoZnVuIGl0ZW0gLT4gaXRlbS5JZCA9IGlkKQoKbGV0IHVwZGF0ZUl0ZW0gdXBkYXRlZEl0ZW0gPQogICAgaXRlbXMgPC0gaXRlbXMgfD4gTGlzdC5tYXAgKGZ1biBpdGVtIC0+IGlmIGl0ZW0uSWQgPSB1cGRhdGVkSXRlbS5JZCB0aGVuIHVwZGF0ZWRJdGVtIGVsc2UgaXRlbSkKCmxldCBkZWxldGVJdGVtIGlkID0KICAgIGl0ZW1zIDwtIGl0ZW1zIHw+IExpc3QuZmlsdGVyIChmdW4gaXRlbSAtPiBpdGVtLklkIDw+IGlkKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>module Service

open Models

let mutable items = []

let addItem item =
    items &lt;- item :: items

let getItem id =
    items |&gt; List.tryFind (fun item -&gt; item.Id = id)

let updateItem updatedItem =
    items &lt;- items |&gt; List.map (fun item -&gt; if item.Id = updatedItem.Id then updatedItem else item)

let deleteItem id =
    items &lt;- items |&gt; List.filter (fun item -&gt; item.Id &lt;&gt; id)</pre></div><div class='content'></div><h2>Step 4: Create a REST API</h2>
<div class='content'><p>Create a file named <code>Program.fs</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3BlbiBTeXN0ZW0Kb3BlbiBHaXJhZmZlCm9wZW4gTWljcm9zb2Z0LkFzcE5ldENvcmUuQnVpbGRlcgpvcGVuIE1pY3Jvc29mdC5Bc3BOZXRDb3JlLkhvc3RpbmcKb3BlbiBNaWNyb3NvZnQuRXh0ZW5zaW9ucy5EZXBlbmRlbmN5SW5qZWN0aW9uCm9wZW4gTWljcm9zb2Z0LkV4dGVuc2lvbnMuSG9zdGluZwpvcGVuIFNlcnZpY2UKb3BlbiBNb2RlbHMKCmxldCB3ZWJBcHAgPQogICAgY2hvb3NlIFsKICAgICAgICBHRVQgPj0+IHJvdXRlICIvaXRlbXMiID49PiBqc29uIGl0ZW1zCiAgICAgICAgR0VUID49PiByb3V0ZWYgIi9pdGVtcy8laSIgKGZ1biBpZCAtPiBqc29uIChnZXRJdGVtIGlkKSkKICAgICAgICBQT1NUID49PiByb3V0ZSAiL2l0ZW1zIiA+PT4gYmluZEpzb248SXRlbT4gKGZ1biBpdGVtIC0+IGFkZEl0ZW0gaXRlbTsganNvbiBpdGVtKQogICAgICAgIFBVVCA+PT4gcm91dGVmICIvaXRlbXMvJWkiIChmdW4gaWQgLT4gYmluZEpzb248SXRlbT4gKGZ1biBpdGVtIC0+IHVwZGF0ZUl0ZW0geyBpdGVtIHdpdGggSWQgPSBpZCB9OyBqc29uIGl0ZW0pKQogICAgICAgIERFTEVURSA+PT4gcm91dGVmICIvaXRlbXMvJWkiIChmdW4gaWQgLT4gZGVsZXRlSXRlbSBpZDsganNvbiBpZCkKICAgIF0KCmxldCBjb25maWd1cmVBcHAgKGFwcDogSUFwcGxpY2F0aW9uQnVpbGRlcikgPQogICAgYXBwLlVzZUdpcmFmZmUgd2ViQXBwCgpsZXQgY29uZmlndXJlU2VydmljZXMgKHNlcnZpY2VzOiBJU2VydmljZUNvbGxlY3Rpb24pID0KICAgIHNlcnZpY2VzLkFkZEdpcmFmZmUoKSB8PiBpZ25vcmUKCls8RW50cnlQb2ludD5dCmxldCBtYWluIF8gPQogICAgSG9zdC5DcmVhdGVEZWZhdWx0QnVpbGRlcigpCiAgICAgICAgLkNvbmZpZ3VyZVdlYkhvc3REZWZhdWx0cyhmdW4gd2ViSG9zdEJ1aWxkZXIgLT4KICAgICAgICAgICAgd2ViSG9zdEJ1aWxkZXIKICAgICAgICAgICAgICAgIC5Db25maWd1cmUoY29uZmlndXJlQXBwKQogICAgICAgICAgICAgICAgLkNvbmZpZ3VyZVNlcnZpY2VzKGNvbmZpZ3VyZVNlcnZpY2VzKQogICAgICAgICAgICAgICAgLlVzZVVybHMoImh0dHA6Ly9sb2NhbGhvc3Q6NTAwMCIpCiAgICAgICAgICAgICAgICB8PiBpZ25vcmUpCiAgICAgICAgLkJ1aWxkKCkKICAgICAgICAuUnVuKCkKICAgIDA="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>open System
open Giraffe
open Microsoft.AspNetCore.Builder
open Microsoft.AspNetCore.Hosting
open Microsoft.Extensions.DependencyInjection
open Microsoft.Extensions.Hosting
open Service
open Models

let webApp =
    choose [
        GET &gt;=&gt; route &quot;/items&quot; &gt;=&gt; json items
        GET &gt;=&gt; routef &quot;/items/%i&quot; (fun id -&gt; json (getItem id))
        POST &gt;=&gt; route &quot;/items&quot; &gt;=&gt; bindJson&lt;Item&gt; (fun item -&gt; addItem item; json item)
        PUT &gt;=&gt; routef &quot;/items/%i&quot; (fun id -&gt; bindJson&lt;Item&gt; (fun item -&gt; updateItem { item with Id = id }; json item))
        DELETE &gt;=&gt; routef &quot;/items/%i&quot; (fun id -&gt; deleteItem id; json id)
    ]

let configureApp (app: IApplicationBuilder) =
    app.UseGiraffe webApp

let configureServices (services: IServiceCollection) =
    services.AddGiraffe() |&gt; ignore

[&lt;EntryPoint&gt;]
let main _ =
    Host.CreateDefaultBuilder()
        .ConfigureWebHostDefaults(fun webHostBuilder -&gt;
            webHostBuilder
                .Configure(configureApp)
                .ConfigureServices(configureServices)
                .UseUrls(&quot;http://localhost:5000&quot;)
                |&gt; ignore)
        .Build()
        .Run()
    0</pre></div><div class='content'></div><h2>Step 5: Run the Microservice</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG90bmV0IHJ1bg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dotnet run</pre></div><div class='content'></div><h1>Deploying to the Cloud</h1>
<div class='content'><p>Deploying microservices to the cloud involves containerizing the application and using cloud services to manage and scale it.</p>
</div><h2>Step 1: Create a Dockerfile</h2>
<div class='content'><p>Create a file named <code>Dockerfile</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RlJPTSBtY3IubWljcm9zb2Z0LmNvbS9kb3RuZXQvc2RrOjUuMCBBUyBidWlsZApXT1JLRElSIC9hcHAKQ09QWSAuIC4KUlVOIGRvdG5ldCBwdWJsaXNoIC1jIFJlbGVhc2UgLW8gb3V0CgpGUk9NIG1jci5taWNyb3NvZnQuY29tL2RvdG5ldC9hc3BuZXQ6NS4wCldPUktESVIgL2FwcApDT1BZIC0tZnJvbT1idWlsZCAvYXBwL291dCAuCkVOVFJZUE9JTlQgWyJkb3RuZXQiLCAiU2ltcGxlTWljcm9zZXJ2aWNlLmRsbCJd"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>FROM mcr.microsoft.com/dotnet/sdk:5.0 AS build
WORKDIR /app
COPY . .
RUN dotnet publish -c Release -o out

FROM mcr.microsoft.com/dotnet/aspnet:5.0
WORKDIR /app
COPY --from=build /app/out .
ENTRYPOINT [&quot;dotnet&quot;, &quot;SimpleMicroservice.dll&quot;]</pre></div><div class='content'></div><h2>Step 2: Build and Run the Docker Image</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIGJ1aWxkIC10IHNpbXBsZW1pY3Jvc2VydmljZSAuCmRvY2tlciBydW4gLWQgLXAgNTAwMDo4MCBzaW1wbGVtaWNyb3NlcnZpY2U="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker build -t simplemicroservice .
docker run -d -p 5000:80 simplemicroservice</pre></div><div class='content'></div><h2>Step 3: Deploy to a Cloud Provider</h2>
<div class='content'><ul>
<li><strong>Azure:</strong> Use Azure Container Instances or Azure Kubernetes Service.</li>
<li><strong>AWS:</strong> Use Amazon ECS or Amazon EKS.</li>
<li><strong>Google Cloud:</strong> Use Google Kubernetes Engine.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this topic, we covered the basics of microservices and cloud computing, set up an environment for F# development, built a simple microservice, and containerized it for deployment to the cloud. This foundation allows you to explore more advanced topics such as service discovery, load balancing, and monitoring in a microservices architecture.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='mobile-development'>&#x25C4;Mobile Development</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Microservices and Cloud with F#</a>
	</div>
	<div class='col-4 text-end'>
					<a href='code-organization'>Code Organization and Modules &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
