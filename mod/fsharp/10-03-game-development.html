<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Development with F#</title>

    <link rel="alternate" href="https://campusempresa.com/mod/fsharp/10-03-game-development" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/fsharp/10-03-game-development" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/fsharp/10-03-game-development" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/fsharp/10-03-game-development" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/fsharp/10-03-game-development" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='10-02-desktop-applications-avalonia' title="Creating Desktop Applications with Avalonia">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Game Development with F#</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='10-04-interoperability-csharp' title="Interoperability with C#">Next &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1><p>Introduction</p>
</h1>
<div class='content'><p>Game development is an exciting and challenging field that combines creativity with technical skills. In this module, we will explore how to use F# for game development. We will cover the basics of game loops, rendering, and handling user input. By the end of this module, you will have a foundational understanding of how to create simple games using F#.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Game Loop</strong>: The core of any game, responsible for updating the game state and rendering the game.</li>
<li><strong>Rendering</strong>: Drawing the game objects on the screen.</li>
<li><strong>User Input</strong>: Handling keyboard, mouse, or other input devices to interact with the game.</li>
<li><strong>Physics and Collision Detection</strong>: Managing the physical interactions between game objects.</li>
</ol>
</div><h1><p>Setting Up the Environment</p>
</h1>
<div class='content'><p>Before we start coding, we need to set up our development environment. We will use the following tools:</p>
<ul>
<li><strong>.NET SDK</strong>: To compile and run F# code.</li>
<li><strong>MonoGame</strong>: A framework for game development that works well with F#.</li>
</ul>
</div><h2><p>Step-by-Step Setup</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Install .NET SDK</strong>:</p>
<ul>
<li>Download and install the .NET SDK from the official <a href="https://dotnet.microsoft.com/download">Microsoft .NET website</a>.</li>
</ul>
</li>
<li>
<p><strong>Install MonoGame</strong>:</p>
<ul>
<li>Follow the instructions on the <a href="http://www.monogame.net/downloads/">MonoGame website</a> to install MonoGame.</li>
</ul>
</li>
<li>
<p><strong>Create a New MonoGame Project</strong>:</p>
<ul>
<li>Open a terminal or command prompt.</li>
<li>Run the following commands to create a new MonoGame project:
<pre><code class="language-sh">dotnet new -i MonoGame.Templates.CSharp
dotnet new mgdesktopgl -o MyFSharpGame
cd MyFSharpGame
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Add F# Support</strong>:</p>
<ul>
<li>Modify the project file (<code>.csproj</code>) to include F# support. Replace the contents with:
<pre><code class="language-xml">&lt;Project Sdk=&quot;Microsoft.NET.Sdk&quot;&gt;
  &lt;PropertyGroup&gt;
    &lt;OutputType&gt;Exe&lt;/OutputType&gt;
    &lt;TargetFramework&gt;net5.0&lt;/TargetFramework&gt;
  &lt;/PropertyGroup&gt;
  &lt;ItemGroup&gt;
    &lt;PackageReference Include=&quot;MonoGame.Framework.DesktopGL&quot; Version=&quot;3.8.0.1641&quot; /&gt;
  &lt;/ItemGroup&gt;
  &lt;ItemGroup&gt;
    &lt;Compile Include=&quot;Program.fs&quot; /&gt;
  &lt;/ItemGroup&gt;
&lt;/Project&gt;
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Create <code>Program.fs</code></strong>:</p>
<ul>
<li>Create a new file named <code>Program.fs</code> and add the following code:
<pre><code class="language-fsharp">open System
open Microsoft.Xna.Framework
open Microsoft.Xna.Framework.Graphics
open Microsoft.Xna.Framework.Input

type Game1() as this =
    inherit Game()
    let graphics = new GraphicsDeviceManager(this)
    let mutable spriteBatch = Unchecked.defaultof&lt;SpriteBatch&gt;

    override this.Initialize() =
        base.Initialize()

    override this.LoadContent() =
        spriteBatch &lt;- new SpriteBatch(this.GraphicsDevice)

    override this.Update(gameTime) =
        if GamePad.GetState(PlayerIndex.One).Buttons.Back = ButtonState.Pressed || Keyboard.GetState().IsKeyDown(Keys.Escape) then
            this.Exit()
        base.Update(gameTime)

    override this.Draw(gameTime) =
        this.GraphicsDevice.Clear(Color.CornflowerBlue)
        spriteBatch.Begin()
        // Draw game objects here
        spriteBatch.End()
        base.Draw(gameTime)

[&lt;EntryPoint&gt;]
let main argv =
    use game = new Game1()
    game.Run()
    0
</code></pre>
</li>
</ul>
</li>
</ol>
</div><h1><p>Basic Game Loop</p>
</h1>
<div class='content'><p>The game loop is the heart of any game. It consists of three main parts:</p>
<ol>
<li><strong>Initialization</strong>: Setting up the game environment.</li>
<li><strong>Update</strong>: Updating the game state based on user input and other factors.</li>
<li><strong>Draw</strong>: Rendering the game objects on the screen.</li>
</ol>
</div><h2><p>Example: Simple Game Loop</p>
</h2>
<div class='content'><p>The <code>Game1</code> class in the <code>Program.fs</code> file demonstrates a basic game loop. Let's break it down:</p>
<ul>
<li><strong>Initialize</strong>: This method is called once at the start to set up the game.</li>
<li><strong>LoadContent</strong>: This method is used to load game assets like textures and sounds.</li>
<li><strong>Update</strong>: This method is called every frame to update the game state.</li>
<li><strong>Draw</strong>: This method is called every frame to render the game.</li>
</ul>
</div><h1><p>Handling User Input</p>
</h1>
<div class='content'><p>Handling user input is crucial for interactive games. MonoGame provides several ways to handle input from the keyboard, mouse, and gamepad.</p>
</div><h2><p>Example: Keyboard Input</p>
</h2>
<div class='content'><p>Let's modify the <code>Update</code> method to handle keyboard input:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3ZlcnJpZGUgdGhpcy5VcGRhdGUoZ2FtZVRpbWUpID0KICAgIGxldCBrZXlib2FyZFN0YXRlID0gS2V5Ym9hcmQuR2V0U3RhdGUoKQogICAgaWYga2V5Ym9hcmRTdGF0ZS5Jc0tleURvd24oS2V5cy5XKSB0aGVuCiAgICAgICAgLy8gTW92ZSB1cAogICAgaWYga2V5Ym9hcmRTdGF0ZS5Jc0tleURvd24oS2V5cy5TKSB0aGVuCiAgICAgICAgLy8gTW92ZSBkb3duCiAgICBpZiBrZXlib2FyZFN0YXRlLklzS2V5RG93bihLZXlzLkEpIHRoZW4KICAgICAgICAvLyBNb3ZlIGxlZnQKICAgIGlmIGtleWJvYXJkU3RhdGUuSXNLZXlEb3duKEtleXMuRCkgdGhlbgogICAgICAgIC8vIE1vdmUgcmlnaHQKICAgIGJhc2UuVXBkYXRlKGdhbWVUaW1lKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>override this.Update(gameTime) =
    let keyboardState = Keyboard.GetState()
    if keyboardState.IsKeyDown(Keys.W) then
        // Move up
    if keyboardState.IsKeyDown(Keys.S) then
        // Move down
    if keyboardState.IsKeyDown(Keys.A) then
        // Move left
    if keyboardState.IsKeyDown(Keys.D) then
        // Move right
    base.Update(gameTime)</pre></div><div class='content'></div><h1><p>Rendering</p>
</h1>
<div class='content'><p>Rendering is the process of drawing game objects on the screen. MonoGame uses a <code>SpriteBatch</code> to draw 2D textures.</p>
</div><h2><p>Example: Drawing a Texture</p>
</h2>
<div class='content'><p>First, add a texture to your project. Place an image file (e.g., <code>player.png</code>) in the <code>Content</code> folder.</p>
<p>Modify the <code>LoadContent</code> and <code>Draw</code> methods to draw the texture:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IG11dGFibGUgcGxheWVyVGV4dHVyZSA9IFVuY2hlY2tlZC5kZWZhdWx0b2Y8VGV4dHVyZTJEPgoKb3ZlcnJpZGUgdGhpcy5Mb2FkQ29udGVudCgpID0KICAgIHNwcml0ZUJhdGNoIDwtIG5ldyBTcHJpdGVCYXRjaCh0aGlzLkdyYXBoaWNzRGV2aWNlKQogICAgcGxheWVyVGV4dHVyZSA8LSB0aGlzLkNvbnRlbnQuTG9hZDxUZXh0dXJlMkQ+KCJwbGF5ZXIiKQoKb3ZlcnJpZGUgdGhpcy5EcmF3KGdhbWVUaW1lKSA9CiAgICB0aGlzLkdyYXBoaWNzRGV2aWNlLkNsZWFyKENvbG9yLkNvcm5mbG93ZXJCbHVlKQogICAgc3ByaXRlQmF0Y2guQmVnaW4oKQogICAgc3ByaXRlQmF0Y2guRHJhdyhwbGF5ZXJUZXh0dXJlLCBWZWN0b3IyKDEwMC4wZiwgMTAwLjBmKSwgQ29sb3IuV2hpdGUpCiAgICBzcHJpdGVCYXRjaC5FbmQoKQogICAgYmFzZS5EcmF3KGdhbWVUaW1lKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let mutable playerTexture = Unchecked.defaultof&lt;Texture2D&gt;

override this.LoadContent() =
    spriteBatch &lt;- new SpriteBatch(this.GraphicsDevice)
    playerTexture &lt;- this.Content.Load&lt;Texture2D&gt;(&quot;player&quot;)

override this.Draw(gameTime) =
    this.GraphicsDevice.Clear(Color.CornflowerBlue)
    spriteBatch.Begin()
    spriteBatch.Draw(playerTexture, Vector2(100.0f, 100.0f), Color.White)
    spriteBatch.End()
    base.Draw(gameTime)</pre></div><div class='content'></div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise: Create a Simple Game</p>
</h2>
<div class='content'><ol>
<li><strong>Objective</strong>: Create a simple game where a player can move a sprite using the arrow keys.</li>
<li><strong>Steps</strong>:
<ul>
<li>Set up the environment as described above.</li>
<li>Load a player texture.</li>
<li>Handle keyboard input to move the player sprite.</li>
<li>Render the player sprite at the new position.</li>
</ul>
</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3BlbiBTeXN0ZW0Kb3BlbiBNaWNyb3NvZnQuWG5hLkZyYW1ld29yawpvcGVuIE1pY3Jvc29mdC5YbmEuRnJhbWV3b3JrLkdyYXBoaWNzCm9wZW4gTWljcm9zb2Z0LlhuYS5GcmFtZXdvcmsuSW5wdXQKCnR5cGUgR2FtZTEoKSBhcyB0aGlzID0KICAgIGluaGVyaXQgR2FtZSgpCiAgICBsZXQgZ3JhcGhpY3MgPSBuZXcgR3JhcGhpY3NEZXZpY2VNYW5hZ2VyKHRoaXMpCiAgICBsZXQgbXV0YWJsZSBzcHJpdGVCYXRjaCA9IFVuY2hlY2tlZC5kZWZhdWx0b2Y8U3ByaXRlQmF0Y2g+CiAgICBsZXQgbXV0YWJsZSBwbGF5ZXJUZXh0dXJlID0gVW5jaGVja2VkLmRlZmF1bHRvZjxUZXh0dXJlMkQ+CiAgICBsZXQgbXV0YWJsZSBwbGF5ZXJQb3NpdGlvbiA9IFZlY3RvcjIoMTAwLjBmLCAxMDAuMGYpCgogICAgb3ZlcnJpZGUgdGhpcy5Jbml0aWFsaXplKCkgPQogICAgICAgIGJhc2UuSW5pdGlhbGl6ZSgpCgogICAgb3ZlcnJpZGUgdGhpcy5Mb2FkQ29udGVudCgpID0KICAgICAgICBzcHJpdGVCYXRjaCA8LSBuZXcgU3ByaXRlQmF0Y2godGhpcy5HcmFwaGljc0RldmljZSkKICAgICAgICBwbGF5ZXJUZXh0dXJlIDwtIHRoaXMuQ29udGVudC5Mb2FkPFRleHR1cmUyRD4oInBsYXllciIpCgogICAgb3ZlcnJpZGUgdGhpcy5VcGRhdGUoZ2FtZVRpbWUpID0KICAgICAgICBsZXQga2V5Ym9hcmRTdGF0ZSA9IEtleWJvYXJkLkdldFN0YXRlKCkKICAgICAgICBpZiBrZXlib2FyZFN0YXRlLklzS2V5RG93bihLZXlzLlcpIHRoZW4KICAgICAgICAgICAgcGxheWVyUG9zaXRpb24gPC0gcGxheWVyUG9zaXRpb24gKyBWZWN0b3IyKDAuMGYsIC0xLjBmKQogICAgICAgIGlmIGtleWJvYXJkU3RhdGUuSXNLZXlEb3duKEtleXMuUykgdGhlbgogICAgICAgICAgICBwbGF5ZXJQb3NpdGlvbiA8LSBwbGF5ZXJQb3NpdGlvbiArIFZlY3RvcjIoMC4wZiwgMS4wZikKICAgICAgICBpZiBrZXlib2FyZFN0YXRlLklzS2V5RG93bihLZXlzLkEpIHRoZW4KICAgICAgICAgICAgcGxheWVyUG9zaXRpb24gPC0gcGxheWVyUG9zaXRpb24gKyBWZWN0b3IyKC0xLjBmLCAwLjBmKQogICAgICAgIGlmIGtleWJvYXJkU3RhdGUuSXNLZXlEb3duKEtleXMuRCkgdGhlbgogICAgICAgICAgICBwbGF5ZXJQb3NpdGlvbiA8LSBwbGF5ZXJQb3NpdGlvbiArIFZlY3RvcjIoMS4wZiwgMC4wZikKICAgICAgICBiYXNlLlVwZGF0ZShnYW1lVGltZSkKCiAgICBvdmVycmlkZSB0aGlzLkRyYXcoZ2FtZVRpbWUpID0KICAgICAgICB0aGlzLkdyYXBoaWNzRGV2aWNlLkNsZWFyKENvbG9yLkNvcm5mbG93ZXJCbHVlKQogICAgICAgIHNwcml0ZUJhdGNoLkJlZ2luKCkKICAgICAgICBzcHJpdGVCYXRjaC5EcmF3KHBsYXllclRleHR1cmUsIHBsYXllclBvc2l0aW9uLCBDb2xvci5XaGl0ZSkKICAgICAgICBzcHJpdGVCYXRjaC5FbmQoKQogICAgICAgIGJhc2UuRHJhdyhnYW1lVGltZSkKCls8RW50cnlQb2ludD5dCmxldCBtYWluIGFyZ3YgPQogICAgdXNlIGdhbWUgPSBuZXcgR2FtZTEoKQogICAgZ2FtZS5SdW4oKQogICAgMA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>open System
open Microsoft.Xna.Framework
open Microsoft.Xna.Framework.Graphics
open Microsoft.Xna.Framework.Input

type Game1() as this =
    inherit Game()
    let graphics = new GraphicsDeviceManager(this)
    let mutable spriteBatch = Unchecked.defaultof&lt;SpriteBatch&gt;
    let mutable playerTexture = Unchecked.defaultof&lt;Texture2D&gt;
    let mutable playerPosition = Vector2(100.0f, 100.0f)

    override this.Initialize() =
        base.Initialize()

    override this.LoadContent() =
        spriteBatch &lt;- new SpriteBatch(this.GraphicsDevice)
        playerTexture &lt;- this.Content.Load&lt;Texture2D&gt;(&quot;player&quot;)

    override this.Update(gameTime) =
        let keyboardState = Keyboard.GetState()
        if keyboardState.IsKeyDown(Keys.W) then
            playerPosition &lt;- playerPosition + Vector2(0.0f, -1.0f)
        if keyboardState.IsKeyDown(Keys.S) then
            playerPosition &lt;- playerPosition + Vector2(0.0f, 1.0f)
        if keyboardState.IsKeyDown(Keys.A) then
            playerPosition &lt;- playerPosition + Vector2(-1.0f, 0.0f)
        if keyboardState.IsKeyDown(Keys.D) then
            playerPosition &lt;- playerPosition + Vector2(1.0f, 0.0f)
        base.Update(gameTime)

    override this.Draw(gameTime) =
        this.GraphicsDevice.Clear(Color.CornflowerBlue)
        spriteBatch.Begin()
        spriteBatch.Draw(playerTexture, playerPosition, Color.White)
        spriteBatch.End()
        base.Draw(gameTime)

[&lt;EntryPoint&gt;]
let main argv =
    use game = new Game1()
    game.Run()
    0</pre></div><div class='content'></div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this module, we covered the basics of game development with F#. We learned how to set up the environment, create a game loop, handle user input, and render game objects. With these foundational skills, you can start building more complex games and explore advanced topics like physics, collision detection, and game AI.</p>
<p>Next, we will delve into more advanced topics and practical applications, such as building web applications with Giraffe and creating desktop applications with Avalonia. Happy coding!</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='10-02-desktop-applications-avalonia' title="Creating Desktop Applications with Avalonia">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='10-04-interoperability-csharp' title="Interoperability with C#">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
