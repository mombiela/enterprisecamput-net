<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building DSLs</title>

    <link rel="alternate" href="https://campusempresa.com/mod/fsharp/09-04-building-dsls" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/fsharp/09-04-building-dsls" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/fsharp/09-04-building-dsls" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/fsharp/09-04-building-dsls" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/fsharp/09-04-building-dsls" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='09-03-domain-driven-design' title="Domain-Driven Design">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Building DSLs</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='10-01-web-applications-giraffe' title="Building Web Applications with Giraffe">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this module, we will explore the concept of Domain-Specific Languages (DSLs) and how to build them using F#. DSLs are specialized mini-languages tailored to a specific problem domain, providing a more expressive and concise way to solve problems within that domain.</p>
</div><h1>What is a DSL?</h1>
<div class='content'><p>A Domain-Specific Language (DSL) is a programming language or specification language dedicated to a particular problem domain, a particular problem representation technique, and/or a particular solution technique. DSLs can be categorized into two types:</p>
<ul>
<li><strong>Internal DSLs</strong>: These are built within a host general-purpose programming language (GPL). They leverage the syntax and semantics of the host language.</li>
<li><strong>External DSLs</strong>: These are standalone languages with their own syntax and semantics, often requiring a custom parser and interpreter or compiler.</li>
</ul>
</div><h1>Why Use DSLs?</h1>
<div class='content'><ul>
<li><strong>Expressiveness</strong>: DSLs allow you to express solutions in terms that are closer to the problem domain.</li>
<li><strong>Conciseness</strong>: DSLs can reduce the amount of code needed to solve a problem.</li>
<li><strong>Maintainability</strong>: DSLs can make code easier to read and maintain by domain experts who may not be programmers.</li>
</ul>
</div><h1>Building Internal DSLs in F#</h1>
<div class='content'><p>F# is particularly well-suited for building internal DSLs due to its expressive syntax and powerful type system. Let's go through the steps to create a simple internal DSL in F#.</p>
</div><h2>Step 1: Define the Domain</h2>
<div class='content'><p>First, we need to define the domain we are targeting. For this example, let's create a DSL for describing simple arithmetic expressions.</p>
</div><h2>Step 2: Define the Data Types</h2>
<div class='content'><p>We will define a set of data types to represent our domain. In this case, we will use a discriminated union to represent arithmetic expressions.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dHlwZSBFeHByID0KICAgIHwgQ29uc3Qgb2YgaW50CiAgICB8IEFkZCBvZiBFeHByICogRXhwcgogICAgfCBTdWIgb2YgRXhwciAqIEV4cHIKICAgIHwgTXVsIG9mIEV4cHIgKiBFeHByCiAgICB8IERpdiBvZiBFeHByICogRXhwcg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>type Expr =
    | Const of int
    | Add of Expr * Expr
    | Sub of Expr * Expr
    | Mul of Expr * Expr
    | Div of Expr * Expr</pre></div><div class='content'></div><h2>Step 3: Create a DSL Syntax</h2>
<div class='content'><p>Next, we will create functions that provide a more readable syntax for constructing expressions.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGNvbnN0IHggPSBDb25zdCB4CmxldCBhZGQgeCB5ID0gQWRkICh4LCB5KQpsZXQgc3ViIHggeSA9IFN1YiAoeCwgeSkKbGV0IG11bCB4IHkgPSBNdWwgKHgsIHkpCmxldCBkaXYgeCB5ID0gRGl2ICh4LCB5KQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let const x = Const x
let add x y = Add (x, y)
let sub x y = Sub (x, y)
let mul x y = Mul (x, y)
let div x y = Div (x, y)</pre></div><div class='content'></div><h2>Step 4: Implement the Interpreter</h2>
<div class='content'><p>We need an interpreter to evaluate the expressions defined using our DSL.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IHJlYyBldmFsIGV4cHIgPQogICAgbWF0Y2ggZXhwciB3aXRoCiAgICB8IENvbnN0IHggLT4geAogICAgfCBBZGQgKHgsIHkpIC0+IGV2YWwgeCArIGV2YWwgeQogICAgfCBTdWIgKHgsIHkpIC0+IGV2YWwgeCAtIGV2YWwgeQogICAgfCBNdWwgKHgsIHkpIC0+IGV2YWwgeCAqIGV2YWwgeQogICAgfCBEaXYgKHgsIHkpIC0+IGV2YWwgeCAvIGV2YWwgeQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let rec eval expr =
    match expr with
    | Const x -&gt; x
    | Add (x, y) -&gt; eval x + eval y
    | Sub (x, y) -&gt; eval x - eval y
    | Mul (x, y) -&gt; eval x * eval y
    | Div (x, y) -&gt; eval x / eval y</pre></div><div class='content'></div><h2>Step 5: Using the DSL</h2>
<div class='content'><p>Now we can use our DSL to define and evaluate arithmetic expressions.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGV4cHIgPSBhZGQgKGNvbnN0IDUpIChtdWwgKGNvbnN0IDIpIChjb25zdCAzKSkKbGV0IHJlc3VsdCA9IGV2YWwgZXhwcgpwcmludGZuICJSZXN1bHQ6ICVkIiByZXN1bHQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let expr = add (const 5) (mul (const 2) (const 3))
let result = eval expr
printfn &quot;Result: %d&quot; result</pre></div><div class='content'><p>This will output:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UmVzdWx0OiAxMQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Result: 11</pre></div><div class='content'></div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise 1: Extend the DSL</h2>
<div class='content'><p>Extend the DSL to support the modulus operation.</p>
<ol>
<li>Add a new case to the <code>Expr</code> type.</li>
<li>Create a function for the new operation.</li>
<li>Update the <code>eval</code> function to handle the new operation.</li>
</ol>
</div><h2>Solution</h2>
<div class='content'><ol>
<li>Add a new case to the <code>Expr</code> type:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dHlwZSBFeHByID0KICAgIHwgQ29uc3Qgb2YgaW50CiAgICB8IEFkZCBvZiBFeHByICogRXhwcgogICAgfCBTdWIgb2YgRXhwciAqIEV4cHIKICAgIHwgTXVsIG9mIEV4cHIgKiBFeHByCiAgICB8IERpdiBvZiBFeHByICogRXhwcgogICAgfCBNb2Qgb2YgRXhwciAqIEV4cHI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>type Expr =
    | Const of int
    | Add of Expr * Expr
    | Sub of Expr * Expr
    | Mul of Expr * Expr
    | Div of Expr * Expr
    | Mod of Expr * Expr</pre></div><div class='content'><ol start="2">
<li>Create a function for the new operation:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IG1vZCcgeCB5ID0gTW9kICh4LCB5KQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let mod' x y = Mod (x, y)</pre></div><div class='content'><ol start="3">
<li>Update the <code>eval</code> function to handle the new operation:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IHJlYyBldmFsIGV4cHIgPQogICAgbWF0Y2ggZXhwciB3aXRoCiAgICB8IENvbnN0IHggLT4geAogICAgfCBBZGQgKHgsIHkpIC0+IGV2YWwgeCArIGV2YWwgeQogICAgfCBTdWIgKHgsIHkpIC0+IGV2YWwgeCAtIGV2YWwgeQogICAgfCBNdWwgKHgsIHkpIC0+IGV2YWwgeCAqIGV2YWwgeQogICAgfCBEaXYgKHgsIHkpIC0+IGV2YWwgeCAvIGV2YWwgeQogICAgfCBNb2QgKHgsIHkpIC0+IGV2YWwgeCAlIGV2YWwgeQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let rec eval expr =
    match expr with
    | Const x -&gt; x
    | Add (x, y) -&gt; eval x + eval y
    | Sub (x, y) -&gt; eval x - eval y
    | Mul (x, y) -&gt; eval x * eval y
    | Div (x, y) -&gt; eval x / eval y
    | Mod (x, y) -&gt; eval x % eval y</pre></div><div class='content'></div><h2>Exercise 2: Create a More Complex Expression</h2>
<div class='content'><p>Using the extended DSL, create and evaluate the following expression: <code>(5 + 3) * (10 - 2) % 4</code>.</p>
</div><h2>Solution</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGNvbXBsZXhFeHByID0gbW9kJyAobXVsIChhZGQgKGNvbnN0IDUpIChjb25zdCAzKSkgKHN1YiAoY29uc3QgMTApIChjb25zdCAyKSkpIChjb25zdCA0KQpsZXQgY29tcGxleFJlc3VsdCA9IGV2YWwgY29tcGxleEV4cHIKcHJpbnRmbiAiQ29tcGxleCBSZXN1bHQ6ICVkIiBjb21wbGV4UmVzdWx0"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let complexExpr = mod' (mul (add (const 5) (const 3)) (sub (const 10) (const 2))) (const 4)
let complexResult = eval complexExpr
printfn &quot;Complex Result: %d&quot; complexResult</pre></div><div class='content'><p>This will output:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q29tcGxleCBSZXN1bHQ6IDA="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Complex Result: 0</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>In this module, we have learned about Domain-Specific Languages (DSLs) and how to build an internal DSL in F#. We covered the steps to define the domain, create a syntax, and implement an interpreter. We also extended the DSL with additional operations and practiced using it to create and evaluate expressions. This knowledge prepares you to create more complex and expressive DSLs tailored to your specific problem domains.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='09-03-domain-driven-design' title="Domain-Driven Design">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='10-01-web-applications-giraffe' title="Building Web Applications with Giraffe">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
