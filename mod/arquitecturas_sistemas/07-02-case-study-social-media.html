<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    <title>Case Study: Architecture of a Social Media Application</title>

    <link rel="alternate" href="https://campusempresa.com/mod/arquitecturas_sistemas/07-02-caso-estudio-redes-sociales" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/arquitecturas_sistemas/07-02-cas-estudi-xarxes-socials" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/arquitecturas_sistemas/07-02-case-study-social-media" hreflang="en" />
    
	<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"> -->
	<link href="/css/bootstrap/bootstrap.css?v=1" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.2b8e6213f8.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "foundations";
  		var MOD_NAME = "arquitecturas_sistemas";
  		var TEMA_NAME = "07-02";
  		var TYPE = "mod";
  		var PATH = "mod/arquitecturas_sistemas/07-02-case-study-social-media";
  		var IS_INDEX = false;
  		var DEVELOP = sessionStorage.getItem("DEVELOP") == "true";
  		  		var ALL_PAGES_MOD = ["01-01-basic-concepts","01-02-importance-architecture","01-03-types-architectures","02-01-solid-principles","02-02-software-design-principles","02-03-design-patterns","03-01-layers-architecture","03-02-microservices-monoliths","03-03-databases-storage","04-01-horizontal-vertical-scalability","04-02-performance-optimization","04-03-load-balancing","05-01-security-principles","05-02-authentication-authorization","05-03-data-protection","06-01-design-modeling-tools","06-02-cloud-platforms","06-03-containers-orchestration","07-01-case-study-e-commerce","07-02-case-study-social-media","07-03-practical-exercises","08-01-current-trends","08-02-future-architectures","08-03-preparation-future"];
  		  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<!-- <script type="text/javascript" src="/js/main.js"></script> -->
  	<script type="module" src="/js/app.198aab099d.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/arquitecturas_sistemas/07-02-caso-estudio-redes-sociales" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/arquitecturas_sistemas/07-02-cas-estudi-xarxes-socials" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my_modules" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/end_modules" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" style="display:none;" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="arquitecturas_sistemas">
		<a  href="#" class="text-secondary d-none" data-read-mod="arquitecturas_sistemas" data-read-unit="07-02" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="arquitecturas_sistemas" data-unread-unit="07-02" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='07-01-case-study-e-commerce' title="Case Study: Architecture of an E-commerce System" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='07-01-case-study-e-commerce' title="Case Study: Architecture of an E-commerce System" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">Case Study: Architecture of a Social Media Application</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-03-practical-exercises' title="Practical Exercises" class="py-2 px-3 btn btn-primary"
				data-read-mod="arquitecturas_sistemas" data-read-unit="07-02">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-03-practical-exercises' title="Practical Exercises" class="py-2 px-3 btn btn-primary" 
				data-read-mod="arquitecturas_sistemas" data-read-unit="07-02">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>In this case study, we will explore the architecture of a social media application. Social media platforms are complex systems that require robust and scalable architectures to handle millions of users, real-time interactions, and large volumes of data. We will break down the architecture into various components and discuss the design principles, technologies, and best practices involved.</p>
</div><h1>Overview of a Social Media Application</h1>
<div class='content'><p>A typical social media application includes the following features:</p>
<ul>
<li>User registration and authentication</li>
<li>User profiles</li>
<li>Friend connections and social graphs</li>
<li>Content creation (posts, comments, likes)</li>
<li>Real-time notifications</li>
<li>Media storage (photos, videos)</li>
<li>Search functionality</li>
<li>Privacy and security controls</li>
</ul>
</div><h1>High-Level Architecture</h1>
<div class='content'><p>The high-level architecture of a social media application can be divided into several layers and components:</p>
<ol>
<li>
<p><strong>Client Layer</strong></p>
<ul>
<li>Web and Mobile Clients</li>
<li>API Gateway</li>
</ul>
</li>
<li>
<p><strong>Application Layer</strong></p>
<ul>
<li>Authentication Service</li>
<li>User Service</li>
<li>Social Graph Service</li>
<li>Content Service</li>
<li>Notification Service</li>
<li>Media Service</li>
<li>Search Service</li>
</ul>
</li>
<li>
<p><strong>Data Layer</strong></p>
<ul>
<li>Relational Databases</li>
<li>NoSQL Databases</li>
<li>Object Storage</li>
</ul>
</li>
<li>
<p><strong>Infrastructure Layer</strong></p>
<ul>
<li>Load Balancers</li>
<li>CDN (Content Delivery Network)</li>
<li>Caching Layer</li>
<li>Message Queues</li>
</ul>
</li>
</ol>
</div><h2>Diagram of High-Level Architecture</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ky0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tKwp8ICBXZWIvTW9iaWxlIENsaWVudHwgPC0tLS0+fCAgICBBUEkgR2F0ZXdheSAgICB8CistLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLSsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdgorLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tKwp8IEF1dGhlbnRpY2F0aW9uICAgIHwgICAgICAgfCBVc2VyIFNlcnZpY2UgICAgICB8ICAgICAgIHwgU29jaWFsIEdyYXBoICAgICAgfAp8IFNlcnZpY2UgICAgICAgICAgIHwgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgIHwgU2VydmljZSAgICAgICAgICAgfAorLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgIHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ICAgICAgICAgICAgICAgICAgICAgICB2CistLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0rCnwgQ29udGVudCBTZXJ2aWNlICAgfCAgICAgICB8IE5vdGlmaWNhdGlvbiAgICAgIHwgICAgICAgfCBNZWRpYSBTZXJ2aWNlICAgICB8CistLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICB8IFNlcnZpY2UgICAgICAgICAgIHwgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0rCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgfAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgICAgICAgICAgICAgICAgICAgICAgIHYKKy0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLSsKfCBTZWFyY2ggU2VydmljZSAgICB8ICAgICAgIHwgUmVsYXRpb25hbCBEQiAgICAgfCAgICAgICB8IE5vU1FMIERCICAgICAgICAgIHwKKy0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLSsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICB8CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiAgICAgICAgICAgICAgICAgICAgICAgdgorLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tKwp8IE9iamVjdCBTdG9yYWdlICAgIHwgICAgICAgfCBMb2FkIEJhbGFuY2VyICAgICB8ICAgICAgIHwgQ0ROICAgICAgICAgICAgICAgfAorLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgIHwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ICAgICAgICAgICAgICAgICAgICAgICB2CistLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0rCnwgQ2FjaGluZyBMYXllciAgICAgfCAgICAgICB8IE1lc3NhZ2UgUXVldWVzICAgIHwgICAgICAgfCBNb25pdG9yaW5nICAgICAgICB8CistLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0r"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>+-------------------+       +-------------------+
|  Web/Mobile Client| &lt;----&gt;|    API Gateway    |
+-------------------+       +-------------------+
                                |
                                v
+-------------------+       +-------------------+       +-------------------+
| Authentication    |       | User Service      |       | Social Graph      |
| Service           |       +-------------------+       | Service           |
+-------------------+       +-------------------+       +-------------------+
                                |                       |
                                v                       v
+-------------------+       +-------------------+       +-------------------+
| Content Service   |       | Notification      |       | Media Service     |
+-------------------+       | Service           |       +-------------------+
                                |                       |
                                v                       v
+-------------------+       +-------------------+       +-------------------+
| Search Service    |       | Relational DB     |       | NoSQL DB          |
+-------------------+       +-------------------+       +-------------------+
                                |                       |
                                v                       v
+-------------------+       +-------------------+       +-------------------+
| Object Storage    |       | Load Balancer     |       | CDN               |
+-------------------+       +-------------------+       +-------------------+
                                |                       |
                                v                       v
+-------------------+       +-------------------+       +-------------------+
| Caching Layer     |       | Message Queues    |       | Monitoring        |
+-------------------+       +-------------------+       +-------------------+</pre></div><div class='content'></div><h1>Detailed Components</h1>
<div class='content'></div><h2>Client Layer</h2>
<div class='content'><ul>
<li><strong>Web and Mobile Clients</strong>: These are the front-end interfaces through which users interact with the social media application. They communicate with the backend services via the API Gateway.</li>
<li><strong>API Gateway</strong>: Acts as a single entry point for all client requests. It routes requests to the appropriate backend services and handles tasks such as authentication, rate limiting, and logging.</li>
</ul>
</div><h2>Application Layer</h2>
<div class='content'><ul>
<li><strong>Authentication Service</strong>: Manages user registration, login, and authentication tokens. Ensures secure access to the application.</li>
<li><strong>User Service</strong>: Handles user profile management, including updating profile information and retrieving user details.</li>
<li><strong>Social Graph Service</strong>: Manages friend connections and social relationships between users. It maintains the social graph and provides APIs to add, remove, and query connections.</li>
<li><strong>Content Service</strong>: Manages the creation, retrieval, and interaction with user-generated content such as posts, comments, and likes.</li>
<li><strong>Notification Service</strong>: Handles real-time notifications for events such as new messages, friend requests, and likes.</li>
<li><strong>Media Service</strong>: Manages the storage and retrieval of media files such as photos and videos. It integrates with object storage solutions.</li>
<li><strong>Search Service</strong>: Provides search functionality to find users, posts, and other content within the application.</li>
</ul>
</div><h2>Data Layer</h2>
<div class='content'><ul>
<li><strong>Relational Databases</strong>: Used for structured data such as user profiles, posts, and comments. Examples include MySQL and PostgreSQL.</li>
<li><strong>NoSQL Databases</strong>: Used for unstructured or semi-structured data such as social graphs and notifications. Examples include MongoDB and Cassandra.</li>
<li><strong>Object Storage</strong>: Used for storing large media files. Examples include Amazon S3 and Google Cloud Storage.</li>
</ul>
</div><h2>Infrastructure Layer</h2>
<div class='content'><ul>
<li><strong>Load Balancers</strong>: Distribute incoming traffic across multiple servers to ensure high availability and reliability.</li>
<li><strong>CDN (Content Delivery Network)</strong>: Distributes static content such as images and videos to users from geographically distributed servers to reduce latency.</li>
<li><strong>Caching Layer</strong>: Improves performance by caching frequently accessed data. Examples include Redis and Memcached.</li>
<li><strong>Message Queues</strong>: Decouple services and enable asynchronous communication. Examples include RabbitMQ and Apache Kafka.</li>
</ul>
</div><h1>Practical Example: Implementing the Content Service</h1>
<div class='content'><p>Let's implement a simple version of the Content Service using Node.js and Express.</p>
</div><h2>Step 1: Setting Up the Project</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bWtkaXIgY29udGVudC1zZXJ2aWNlCmNkIGNvbnRlbnQtc2VydmljZQpucG0gaW5pdCAteQpucG0gaW5zdGFsbCBleHByZXNzIG1vbmdvb3Nl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>mkdir content-service
cd content-service
npm init -y
npm install express mongoose</pre></div><div class='content'></div><h2>Step 2: Creating the Server</h2>
<div class='content'><p>Create a file named <code>server.js</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3QgbW9uZ29vc2UgPSByZXF1aXJlKCdtb25nb29zZScpOwoKY29uc3QgYXBwID0gZXhwcmVzcygpOwphcHAudXNlKGV4cHJlc3MuanNvbigpKTsKCm1vbmdvb3NlLmNvbm5lY3QoJ21vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvc29jaWFsbWVkaWEnLCB7CiAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLAogIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSwKfSk7Cgpjb25zdCBwb3N0U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7CiAgdXNlcklkOiBTdHJpbmcsCiAgY29udGVudDogU3RyaW5nLAogIGNyZWF0ZWRBdDogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9LAp9KTsKCmNvbnN0IFBvc3QgPSBtb25nb29zZS5tb2RlbCgnUG9zdCcsIHBvc3RTY2hlbWEpOwoKYXBwLnBvc3QoJy9wb3N0cycsIGFzeW5jIChyZXEsIHJlcykgPT4gewogIGNvbnN0IHsgdXNlcklkLCBjb250ZW50IH0gPSByZXEuYm9keTsKICBjb25zdCBwb3N0ID0gbmV3IFBvc3QoeyB1c2VySWQsIGNvbnRlbnQgfSk7CiAgYXdhaXQgcG9zdC5zYXZlKCk7CiAgcmVzLnN0YXR1cygyMDEpLnNlbmQocG9zdCk7Cn0pOwoKYXBwLmdldCgnL3Bvc3RzJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgY29uc3QgcG9zdHMgPSBhd2FpdCBQb3N0LmZpbmQoKTsKICByZXMuc2VuZChwb3N0cyk7Cn0pOwoKYXBwLmxpc3RlbigzMDAwLCAoKSA9PiB7CiAgY29uc29sZS5sb2coJ0NvbnRlbnQgU2VydmljZSBpcyBydW5uaW5nIG9uIHBvcnQgMzAwMCcpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const express = require('express');
const mongoose = require('mongoose');

const app = express();
app.use(express.json());

mongoose.connect('mongodb://localhost:27017/socialmedia', {
  useNewUrlParser: true,
  useUnifiedTopology: true,
});

const postSchema = new mongoose.Schema({
  userId: String,
  content: String,
  createdAt: { type: Date, default: Date.now },
});

const Post = mongoose.model('Post', postSchema);

app.post('/posts', async (req, res) =&gt; {
  const { userId, content } = req.body;
  const post = new Post({ userId, content });
  await post.save();
  res.status(201).send(post);
});

app.get('/posts', async (req, res) =&gt; {
  const posts = await Post.find();
  res.send(posts);
});

app.listen(3000, () =&gt; {
  console.log('Content Service is running on port 3000');
});</pre></div><div class='content'></div><h2>Step 3: Running the Service</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bm9kZSBzZXJ2ZXIuanM="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>node server.js</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Express</strong>: A web framework for Node.js used to create the server and define routes.</li>
<li><strong>Mongoose</strong>: An ODM (Object Data Modeling) library for MongoDB and Node.js.</li>
<li><strong>Post Schema</strong>: Defines the structure of a post document in MongoDB.</li>
<li><strong>Routes</strong>:
<ul>
<li><code>POST /posts</code>: Creates a new post.</li>
<li><code>GET /posts</code>: Retrieves all posts.</li>
</ul>
</li>
</ul>
</div><h1>Exercises</h1>
<div class='content'></div><h2>Exercise 1: Extend the Content Service</h2>
<div class='content'><p>Extend the Content Service to include the ability to like a post. Add a new route <code>POST /posts/:id/like</code> that increments a like counter for a specific post.</p>
</div><h2>Solution</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgcG9zdFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoewogIHVzZXJJZDogU3RyaW5nLAogIGNvbnRlbnQ6IFN0cmluZywKICBjcmVhdGVkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSwKICBsaWtlczogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSwKfSk7CgphcHAucG9zdCgnL3Bvc3RzLzppZC9saWtlJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7CiAgY29uc3QgeyBpZCB9ID0gcmVxLnBhcmFtczsKICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdC5maW5kQnlJZChpZCk7CiAgaWYgKCFwb3N0KSB7CiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoJ1Bvc3Qgbm90IGZvdW5kJyk7CiAgfQogIHBvc3QubGlrZXMgKz0gMTsKICBhd2FpdCBwb3N0LnNhdmUoKTsKICByZXMuc2VuZChwb3N0KTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const postSchema = new mongoose.Schema({
  userId: String,
  content: String,
  createdAt: { type: Date, default: Date.now },
  likes: { type: Number, default: 0 },
});

app.post('/posts/:id/like', async (req, res) =&gt; {
  const { id } = req.params;
  const post = await Post.findById(id);
  if (!post) {
    return res.status(404).send('Post not found');
  }
  post.likes += 1;
  await post.save();
  res.send(post);
});</pre></div><div class='content'></div><h2>Exercise 2: Add Comments to Posts</h2>
<div class='content'><p>Add functionality to allow users to comment on posts. Create a new route <code>POST /posts/:id/comments</code> that adds a comment to a specific post.</p>
</div><h2>Solution</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgY29tbWVudFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoewogIHVzZXJJZDogU3RyaW5nLAogIGNvbnRlbnQ6IFN0cmluZywKICBjcmVhdGVkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSwKfSk7Cgpjb25zdCBwb3N0U2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7CiAgdXNlcklkOiBTdHJpbmcsCiAgY29udGVudDogU3RyaW5nLAogIGNyZWF0ZWRBdDogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9LAogIGxpa2VzOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LAogIGNvbW1lbnRzOiBbY29tbWVudFNjaGVtYV0sCn0pOwoKYXBwLnBvc3QoJy9wb3N0cy86aWQvY29tbWVudHMnLCBhc3luYyAocmVxLCByZXMpID0+IHsKICBjb25zdCB7IGlkIH0gPSByZXEucGFyYW1zOwogIGNvbnN0IHsgdXNlcklkLCBjb250ZW50IH0gPSByZXEuYm9keTsKICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdC5maW5kQnlJZChpZCk7CiAgaWYgKCFwb3N0KSB7CiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoJ1Bvc3Qgbm90IGZvdW5kJyk7CiAgfQogIHBvc3QuY29tbWVudHMucHVzaCh7IHVzZXJJZCwgY29udGVudCB9KTsKICBhd2FpdCBwb3N0LnNhdmUoKTsKICByZXMuc2VuZChwb3N0KTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const commentSchema = new mongoose.Schema({
  userId: String,
  content: String,
  createdAt: { type: Date, default: Date.now },
});

const postSchema = new mongoose.Schema({
  userId: String,
  content: String,
  createdAt: { type: Date, default: Date.now },
  likes: { type: Number, default: 0 },
  comments: [commentSchema],
});

app.post('/posts/:id/comments', async (req, res) =&gt; {
  const { id } = req.params;
  const { userId, content } = req.body;
  const post = await Post.findById(id);
  if (!post) {
    return res.status(404).send('Post not found');
  }
  post.comments.push({ userId, content });
  await post.save();
  res.send(post);
});</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>In this case study, we explored the architecture of a social media application, breaking it down into various components and layers. We implemented a simple Content Service using Node.js and MongoDB, and extended it with practical exercises. This example demonstrates the importance of modularity, scalability, and the use of appropriate technologies in designing robust system architectures.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='07-01-case-study-e-commerce' title="Case Study: Architecture of an E-commerce System" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='07-01-case-study-e-commerce' title="Case Study: Architecture of an E-commerce System" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='07-03-practical-exercises' title="Practical Exercises" class="py-2 px-3 btn btn-primary"
				data-read-mod="arquitecturas_sistemas" data-read-unit="07-02">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='07-03-practical-exercises' title="Practical Exercises" class="py-2 px-3 btn btn-primary" 
				data-read-mod="arquitecturas_sistemas" data-read-unit="07-02">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>System Architectures: Principles and Practices for Designing Robust and Scalable Technological Architectures</h1>
<h2>Module 1: Introduction to System Architectures</h2>
<ul>
<li><a href="01-01-basic-concepts">Basic Concepts of System Architecture</a></li>
<li><a href="01-02-importance-architecture">Importance of Good Architecture</a></li>
<li><a href="01-03-types-architectures">Types of System Architectures</a></li>
</ul>
<h2>Module 2: Design Principles of Architectures</h2>
<ul>
<li><a href="02-01-solid-principles">SOLID Principles</a></li>
<li><a href="02-02-software-design-principles">Software Design Principles</a></li>
<li><a href="02-03-design-patterns">Design Patterns</a></li>
</ul>
<h2>Module 3: Components of a System Architecture</h2>
<ul>
<li><a href="03-01-layers-architecture">Layers of an Architecture</a></li>
<li><a href="03-02-microservices-monoliths">Microservices vs. Monoliths</a></li>
<li><a href="03-03-databases-storage">Databases and Storage</a></li>
</ul>
<h2>Module 4: Scalability and Performance</h2>
<ul>
<li><a href="04-01-horizontal-vertical-scalability">Horizontal and Vertical Scalability</a></li>
<li><a href="04-02-performance-optimization">Performance Optimization</a></li>
<li><a href="04-03-load-balancing">Load Balancing</a></li>
</ul>
<h2>Module 5: Security in System Architectures</h2>
<ul>
<li><a href="05-01-security-principles">Security Principles</a></li>
<li><a href="05-02-authentication-authorization">Authentication and Authorization</a></li>
<li><a href="05-03-data-protection">Data Protection</a></li>
</ul>
<h2>Module 6: Tools and Technologies</h2>
<ul>
<li><a href="06-01-design-modeling-tools">Design and Modeling Tools</a></li>
<li><a href="06-02-cloud-platforms">Cloud Platforms</a></li>
<li><a href="06-03-containers-orchestration">Containers and Orchestration</a></li>
</ul>
<h2>Module 7: Case Studies and Practical Examples</h2>
<ul>
<li><a href="07-01-case-study-e-commerce">Case Study: Architecture of an E-commerce System</a></li>
<li><a href="07-02-case-study-social-media">Case Study: Architecture of a Social Media Application</a></li>
<li><a href="07-03-practical-exercises">Practical Exercises</a></li>
</ul>
<h2>Module 8: Trends and Future of System Architectures</h2>
<ul>
<li><a href="08-01-current-trends">Current Trends</a></li>
<li><a href="08-02-future-architectures">The Future of System Architectures</a></li>
<li><a href="08-03-preparation-future">Preparation for the Future</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<p id="loginModalEmail"></p>
            	<div id="mensaje" class="d-none alert alert-danger"></div>
            	<div id="mensaje_info" class="d-none alert alert-success"></div>
            	
            	<div id="modal-body-main">
					<div class="mt-4 d-none" id="forgotPasswordSection">
						<div class="mb-3">
    <label for="recovery-email" class="form-label">Email</label>
    <input type="email" required class="form-control" id="recovery-email" placeholder="Enter your email">
</div>
<button class="btn btn-primary" id="btnRecover">Send recovery link</button>

					</div>
									
					<div class="mt-4 d-none" id="deleteUserSection">	
						<div class="mb-3 alert alert-danger">
	Warning! You are about to delete all registration and progress data.<br><b>This action cannot be undone.</b>
</div>
<div class="mb-3">
    <input type="password" required class="form-control" id="delete-user-pwd" placeholder="Enter your password">
</div>
<button class="btn btn-primary" id="btnDeleteUser">Delete user</button>

					</div>
					
					<div class="mt-4 d-none" id="changePassordSection">
						<div class="mb-3 row">
	<div class="col col-12 my-2">
	    <input type="password" required class="form-control" id="change-pwd-actual" placeholder="Enter current password">
	</div>
	<div class="col col-12 my-2">
    	<input type="password" required class="form-control" id="change-pwd-new-1" placeholder="Enter new password">
	</div>
	<div class="col col-12 my-2">
    	<input type="password" required class="form-control" id="change-pwd-new-2" placeholder="Repeat new password">
	</div>
</div>
<button class="btn btn-primary" id="btnChangePassword">Change password</button>

					</div>
					
					<div class="mt-4 d-none alert alert-warning" id="verifyPasswordSection">
						<p><b>Falta verificar correu</b></p>
						<a id="btnVerifyEmail" href="#">Send verification link</a>

					</div>
					
					<div class="mt-4 d-none" id="disconnectUserSection">
						<div class="mb-3">
    <button id="btnDisconnect" class="btn btn-primary">Disconnect</button>
</div>

<hr>

<div class="mt-3">
    <button class="btn btn-outline-secondary" id="change-password-link">Change password</button>
</div>

<div class="mt-3">
    <a href="#" id="delete-user-link">Delete user</a>
</div>

					</div>
	            
	            	<div class="mt-4 d-none" id="modalTabsSection">
	            		<ul class="nav nav-tabs" id="authTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button" role="tab" aria-controls="login" aria-selected="true">
        	Log in
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register" type="button" role="tab" aria-controls="register" aria-selected="false">
        	Sign up
        </button>
    </li>
</ul>

<div class="tab-content mt-3" id="authTabsContent">
    <div class="tab-pane fade show active" id="login" role="tabpanel" aria-labelledby="login-tab">
    	<div class="mb-3">
    <label for="login-username" class="form-label">Email</label>
    <input type="email" required class="form-control" id="login-username" placeholder="Enter your email">
</div>
<div class="mb-3">
    <label for="login-password" class="form-label">Password</label>
    <input type="password"  required class="form-control" id="login-password" placeholder="Enter your password">
</div>
<button class="btn btn-primary" id="btnLogin">Log in</button>
<div class="mt-3">
    <a href="#" id="forgot-password-link">Have you forgotten your password?</a>
</div>
    </div>

    <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
    	<div class="mb-3">
    <label for="register-email" class="form-label">Email</label>
    <input type="email" class="form-control" id="register-email" required placeholder="Enter your email">
</div>

<div class="mb-3">
    <label for="register-password" class="form-label">Password</label>
    <input type="password" class="form-control"  required id="register-password" placeholder="Enter your password">
</div>

<div class="mb-3">
    <label for="register-name" class="form-label">Name</label>
    <input type="text" class="form-control"  required id="register-name" placeholder="Enter your name">
</div>

<div class="form-check mb-3">
    <input type="checkbox" class="form-check-input" id="accept-conditions-reg">
    <label for="accept-conditions-reg" class="form-check-label">
        I have read and accept the <a href="/privacity" target="blank">Privacy Policy</a> and the <a href="/licence" target="blank">Terms and Conditions of Use</a>.
    </label>
</div>

<div class="form-check mb-3">
    <input type="checkbox" class="form-check-input" id="accept-allow_comunications">
    <label for="accept-allow_comunications" class="form-check-label">
        I wish to receive news and updates about courses (optional).
    </label>
</div>

<button id="btnRegister" class="btn btn-primary">Sign up</button>
    </div>
</div>
	            	</div>
            	</div>
            </div>
        </div>
    </div>
</div>

	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
