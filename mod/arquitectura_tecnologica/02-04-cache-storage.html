<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cache and In-Memory Storage</title>

    <link rel="alternate" href="https://campusempresa.com/mod/arquitectura_tecnologica/02-04-cache-almacenamiento" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/arquitectura_tecnologica/02-04-cache-almacenamiento" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/arquitectura_tecnologica/02-04-cache-storage" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/arquitectura_tecnologica/02-04-cache-almacenamiento" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/arquitectura_tecnologica/02-04-cache-almacenamiento" class="px-2">CA</a>
					</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='02-03-load-balancing' title="Load Balancing">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Cache and In-Memory Storage</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='03-01-security-fundamentals' title="Security Fundamentals">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will delve into the concepts of caching and in-memory storage, which are crucial for designing scalable and high-performance systems. We will cover the basics, explore different caching strategies, and provide practical examples and exercises to solidify your understanding.</p>
</div><h1><ol>
<li>Introduction to Caching</li>
</ol>
</h1>
<div class='content'><p>Caching is a technique used to store copies of frequently accessed data in a temporary storage location (cache) to reduce the time it takes to access that data. This can significantly improve the performance and scalability of a system.</p>
</div><h2><p>Key Concepts:</p>
</h2>
<div class='content'><ul>
<li><strong>Cache Hit</strong>: When the requested data is found in the cache.</li>
<li><strong>Cache Miss</strong>: When the requested data is not found in the cache and must be fetched from the original data source.</li>
<li><strong>Eviction Policy</strong>: The strategy used to decide which data to remove from the cache when it is full.</li>
</ul>
</div><h2><p>Benefits of Caching:</p>
</h2>
<div class='content'><ul>
<li><strong>Reduced Latency</strong>: Faster data retrieval.</li>
<li><strong>Reduced Load</strong>: Decreased load on the primary data source.</li>
<li><strong>Improved Scalability</strong>: Better handling of high traffic.</li>
</ul>
</div><h1><ol start="2">
<li>Types of Caches</li>
</ol>
</h1>
<div class='content'></div><h2><p>2.1 Client-Side Cache</p>
</h2>
<div class='content'><ul>
<li><strong>Browser Cache</strong>: Stores web resources (HTML, CSS, JavaScript) locally in the user's browser.</li>
<li><strong>Application Cache</strong>: Used by client applications to store data locally.</li>
</ul>
</div><h2><p>2.2 Server-Side Cache</p>
</h2>
<div class='content'><ul>
<li><strong>Database Cache</strong>: Caches database query results.</li>
<li><strong>Web Server Cache</strong>: Caches web pages or parts of web pages.</li>
<li><strong>Distributed Cache</strong>: A cache that is shared across multiple servers.</li>
</ul>
</div><h1><ol start="3">
<li>In-Memory Storage</li>
</ol>
</h1>
<div class='content'><p>In-memory storage refers to storing data directly in the RAM of a server, which allows for extremely fast data access compared to traditional disk-based storage.</p>
</div><h2><p>Key Concepts:</p>
</h2>
<div class='content'><ul>
<li><strong>Volatility</strong>: Data is lost when the system is powered off.</li>
<li><strong>Speed</strong>: Access times are in nanoseconds compared to milliseconds for disk storage.</li>
</ul>
</div><h2><p>Common In-Memory Storage Systems:</p>
</h2>
<div class='content'><ul>
<li><strong>Redis</strong>: An open-source, in-memory data structure store.</li>
<li><strong>Memcached</strong>: A distributed memory caching system.</li>
</ul>
</div><h1><ol start="4">
<li>Caching Strategies</li>
</ol>
</h1>
<div class='content'></div><h2><p>4.1 Cache-Aside (Lazy Loading)</p>
</h2>
<div class='content'><ul>
<li>The application checks the cache before querying the database.</li>
<li>If the data is not in the cache (cache miss), it fetches from the database and stores it in the cache.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIGdldF9kYXRhKGtleSk6CiAgICBkYXRhID0gY2FjaGUuZ2V0KGtleSkKICAgIGlmIG5vdCBkYXRhOgogICAgICAgIGRhdGEgPSBkYXRhYmFzZS5xdWVyeShrZXkpCiAgICAgICAgY2FjaGUuc2V0KGtleSwgZGF0YSkKICAgIHJldHVybiBkYXRh"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def get_data(key):
    data = cache.get(key)
    if not data:
        data = database.query(key)
        cache.set(key, data)
    return data</pre></div><div class='content'></div><h2><p>4.2 Write-Through</p>
</h2>
<div class='content'><ul>
<li>Data is written to the cache and the database simultaneously.</li>
<li>Ensures cache consistency but can be slower due to double writes.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIHNldF9kYXRhKGtleSwgdmFsdWUpOgogICAgZGF0YWJhc2Uud3JpdGUoa2V5LCB2YWx1ZSkKICAgIGNhY2hlLnNldChrZXksIHZhbHVlKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def set_data(key, value):
    database.write(key, value)
    cache.set(key, value)</pre></div><div class='content'></div><h2><p>4.3 Write-Behind (Write-Back)</p>
</h2>
<div class='content'><ul>
<li>Data is written to the cache first and then asynchronously to the database.</li>
<li>Improves write performance but can lead to data loss if the cache fails before the write to the database.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIHNldF9kYXRhKGtleSwgdmFsdWUpOgogICAgY2FjaGUuc2V0KGtleSwgdmFsdWUpCiAgICAjIEFzeW5jaHJvbm91c2x5IHdyaXRlIHRvIHRoZSBkYXRhYmFzZQogICAgYXN5bmNfd3JpdGVfdG9fZGIoa2V5LCB2YWx1ZSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def set_data(key, value):
    cache.set(key, value)
    # Asynchronously write to the database
    async_write_to_db(key, value)</pre></div><div class='content'></div><h2><p>4.4 Read-Through</p>
</h2>
<div class='content'><ul>
<li>The cache is responsible for fetching data from the database on a cache miss.</li>
<li>Simplifies the application code but can be complex to implement.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgQ2FjaGU6CiAgICBkZWYgZ2V0KHNlbGYsIGtleSk6CiAgICAgICAgZGF0YSA9IHNlbGYuY2FjaGVfc3RvcmUuZ2V0KGtleSkKICAgICAgICBpZiBub3QgZGF0YToKICAgICAgICAgICAgZGF0YSA9IGRhdGFiYXNlLnF1ZXJ5KGtleSkKICAgICAgICAgICAgc2VsZi5jYWNoZV9zdG9yZS5zZXQoa2V5LCBkYXRhKQogICAgICAgIHJldHVybiBkYXRh"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Cache:
    def get(self, key):
        data = self.cache_store.get(key)
        if not data:
            data = database.query(key)
            self.cache_store.set(key, data)
        return data</pre></div><div class='content'></div><h1><ol start="5">
<li>Practical Example: Implementing a Redis Cache</li>
</ol>
</h1>
<div class='content'></div><h2><p>Setting Up Redis</p>
</h2>
<div class='content'><ol>
<li><strong>Install Redis</strong>: Follow the installation instructions for your operating system from the <a href="https://redis.io/download">Redis website</a>.</li>
<li><strong>Start Redis Server</strong>: Run the Redis server using the command <code>redis-server</code>.</li>
</ol>
</div><h2><p>Python Example with Redis</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHJlZGlzCgojIENvbm5lY3QgdG8gUmVkaXMKciA9IHJlZGlzLlJlZGlzKGhvc3Q9J2xvY2FsaG9zdCcsIHBvcnQ9NjM3OSwgZGI9MCkKCiMgQ2FjaGUtQXNpZGUgRXhhbXBsZQpkZWYgZ2V0X2RhdGEoa2V5KToKICAgIGRhdGEgPSByLmdldChrZXkpCiAgICBpZiBub3QgZGF0YToKICAgICAgICBkYXRhID0gZGF0YWJhc2UucXVlcnkoa2V5KSAgIyBTaW11bGF0ZSBhIGRhdGFiYXNlIHF1ZXJ5CiAgICAgICAgci5zZXQoa2V5LCBkYXRhKQogICAgcmV0dXJuIGRhdGEKCiMgV3JpdGUtVGhyb3VnaCBFeGFtcGxlCmRlZiBzZXRfZGF0YShrZXksIHZhbHVlKToKICAgIGRhdGFiYXNlLndyaXRlKGtleSwgdmFsdWUpICAjIFNpbXVsYXRlIGEgZGF0YWJhc2Ugd3JpdGUKICAgIHIuc2V0KGtleSwgdmFsdWUp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import redis

# Connect to Redis
r = redis.Redis(host='localhost', port=6379, db=0)

# Cache-Aside Example
def get_data(key):
    data = r.get(key)
    if not data:
        data = database.query(key)  # Simulate a database query
        r.set(key, data)
    return data

# Write-Through Example
def set_data(key, value):
    database.write(key, value)  # Simulate a database write
    r.set(key, value)</pre></div><div class='content'></div><h2><p>Explanation:</p>
</h2>
<div class='content'><ul>
<li><strong>Connecting to Redis</strong>: We connect to the Redis server running on <code>localhost</code> at port <code>6379</code>.</li>
<li><strong>Cache-Aside</strong>: The <code>get_data</code> function first checks Redis for the data. If it's not found, it queries the database and stores the result in Redis.</li>
<li><strong>Write-Through</strong>: The <code>set_data</code> function writes data to both the database and Redis.</li>
</ul>
</div><h1><ol start="6">
<li>Exercises</li>
</ol>
</h1>
<div class='content'></div><h2><p>Exercise 1: Implement a Cache-Aside Strategy</p>
</h2>
<div class='content'><p>Implement a cache-aside strategy using Redis for a simple key-value store. Assume the database is a dictionary.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHJlZGlzCgojIFNpbXVsYXRlZCBkYXRhYmFzZQpkYXRhYmFzZSA9IHsKICAgICJ1c2VyOjEiOiAiQWxpY2UiLAogICAgInVzZXI6MiI6ICJCb2IiLAp9CgojIENvbm5lY3QgdG8gUmVkaXMKciA9IHJlZGlzLlJlZGlzKGhvc3Q9J2xvY2FsaG9zdCcsIHBvcnQ9NjM3OSwgZGI9MCkKCmRlZiBnZXRfdXNlcih1c2VyX2lkKToKICAgIHVzZXIgPSByLmdldCh1c2VyX2lkKQogICAgaWYgbm90IHVzZXI6CiAgICAgICAgdXNlciA9IGRhdGFiYXNlLmdldCh1c2VyX2lkKQogICAgICAgIGlmIHVzZXI6CiAgICAgICAgICAgIHIuc2V0KHVzZXJfaWQsIHVzZXIpCiAgICByZXR1cm4gdXNlcgoKIyBUZXN0IHRoZSBmdW5jdGlvbgpwcmludChnZXRfdXNlcigidXNlcjoxIikpICAjIFNob3VsZCBwcmludCAiQWxpY2UiCnByaW50KGdldF91c2VyKCJ1c2VyOjMiKSkgICMgU2hvdWxkIHByaW50IE5vbmU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import redis

# Simulated database
database = {
    &quot;user:1&quot;: &quot;Alice&quot;,
    &quot;user:2&quot;: &quot;Bob&quot;,
}

# Connect to Redis
r = redis.Redis(host='localhost', port=6379, db=0)

def get_user(user_id):
    user = r.get(user_id)
    if not user:
        user = database.get(user_id)
        if user:
            r.set(user_id, user)
    return user

# Test the function
print(get_user(&quot;user:1&quot;))  # Should print &quot;Alice&quot;
print(get_user(&quot;user:3&quot;))  # Should print None</pre></div><div class='content'></div><h2><p>Solution:</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHJlZGlzCgojIFNpbXVsYXRlZCBkYXRhYmFzZQpkYXRhYmFzZSA9IHsKICAgICJ1c2VyOjEiOiAiQWxpY2UiLAogICAgInVzZXI6MiI6ICJCb2IiLAp9CgojIENvbm5lY3QgdG8gUmVkaXMKciA9IHJlZGlzLlJlZGlzKGhvc3Q9J2xvY2FsaG9zdCcsIHBvcnQ9NjM3OSwgZGI9MCkKCmRlZiBnZXRfdXNlcih1c2VyX2lkKToKICAgIHVzZXIgPSByLmdldCh1c2VyX2lkKQogICAgaWYgbm90IHVzZXI6CiAgICAgICAgdXNlciA9IGRhdGFiYXNlLmdldCh1c2VyX2lkKQogICAgICAgIGlmIHVzZXI6CiAgICAgICAgICAgIHIuc2V0KHVzZXJfaWQsIHVzZXIpCiAgICByZXR1cm4gdXNlcgoKIyBUZXN0IHRoZSBmdW5jdGlvbgpwcmludChnZXRfdXNlcigidXNlcjoxIikpICAjIFNob3VsZCBwcmludCAiQWxpY2UiCnByaW50KGdldF91c2VyKCJ1c2VyOjMiKSkgICMgU2hvdWxkIHByaW50IE5vbmU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import redis

# Simulated database
database = {
    &quot;user:1&quot;: &quot;Alice&quot;,
    &quot;user:2&quot;: &quot;Bob&quot;,
}

# Connect to Redis
r = redis.Redis(host='localhost', port=6379, db=0)

def get_user(user_id):
    user = r.get(user_id)
    if not user:
        user = database.get(user_id)
        if user:
            r.set(user_id, user)
    return user

# Test the function
print(get_user(&quot;user:1&quot;))  # Should print &quot;Alice&quot;
print(get_user(&quot;user:3&quot;))  # Should print None</pre></div><div class='content'></div><h2><p>Exercise 2: Implement a Write-Through Strategy</p>
</h2>
<div class='content'><p>Extend the previous example to implement a write-through strategy.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIHNldF91c2VyKHVzZXJfaWQsIHVzZXJfbmFtZSk6CiAgICBkYXRhYmFzZVt1c2VyX2lkXSA9IHVzZXJfbmFtZQogICAgci5zZXQodXNlcl9pZCwgdXNlcl9uYW1lKQoKIyBUZXN0IHRoZSBmdW5jdGlvbgpzZXRfdXNlcigidXNlcjozIiwgIkNoYXJsaWUiKQpwcmludChnZXRfdXNlcigidXNlcjozIikpICAjIFNob3VsZCBwcmludCAiQ2hhcmxpZSI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def set_user(user_id, user_name):
    database[user_id] = user_name
    r.set(user_id, user_name)

# Test the function
set_user(&quot;user:3&quot;, &quot;Charlie&quot;)
print(get_user(&quot;user:3&quot;))  # Should print &quot;Charlie&quot;</pre></div><div class='content'></div><h2><p>Solution:</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIHNldF91c2VyKHVzZXJfaWQsIHVzZXJfbmFtZSk6CiAgICBkYXRhYmFzZVt1c2VyX2lkXSA9IHVzZXJfbmFtZQogICAgci5zZXQodXNlcl9pZCwgdXNlcl9uYW1lKQoKIyBUZXN0IHRoZSBmdW5jdGlvbgpzZXRfdXNlcigidXNlcjozIiwgIkNoYXJsaWUiKQpwcmludChnZXRfdXNlcigidXNlcjozIikpICAjIFNob3VsZCBwcmludCAiQ2hhcmxpZSI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def set_user(user_id, user_name):
    database[user_id] = user_name
    r.set(user_id, user_name)

# Test the function
set_user(&quot;user:3&quot;, &quot;Charlie&quot;)
print(get_user(&quot;user:3&quot;))  # Should print &quot;Charlie&quot;</pre></div><div class='content'></div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the fundamentals of caching and in-memory storage, explored different caching strategies, and implemented practical examples using Redis. Caching is a powerful technique to enhance the performance and scalability of your systems. By understanding and applying these concepts, you can design more efficient and responsive applications.</p>
<p>Next, we will move on to the topic of <strong>Security in Technological Architecture</strong>, where we will explore how to secure your systems and protect your data.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='02-03-load-balancing' title="Load Balancing">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='03-01-security-fundamentals' title="Security Fundamentals">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
