<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aggregations in Elasticsearch</title>

    <link rel="alternate" href="https://campusempresa.com/mod/elasticsearch/aggregations" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/elasticsearch/aggregations" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/elasticsearch/aggregations" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/elasticsearch/aggregations" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/elasticsearch/aggregations" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='filtering-and-sorting'>&#x25C4;Filtering and Sorting</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Aggregations in Elasticsearch</a>
	</div>
	<div class='col-4 text-end'>
					<a href='scripting'>Scripting &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Aggregations in Elasticsearch allow you to perform complex data analysis and summarization operations on your indexed data. This topic will guide you from the basics of aggregations to more advanced concepts, providing clear explanations, examples, and exercises.</p>
</div><h1>Introduction to Aggregations</h1>
<div class='content'><p>Aggregations are a powerful feature in Elasticsearch that enable you to extract insights from your data. They allow you to group, filter, and perform calculations on your data.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Buckets</strong>: Containers that hold documents matching a specific criterion.</li>
<li><strong>Metrics</strong>: Calculations performed on the documents in a bucket.</li>
<li><strong>Pipeline Aggregations</strong>: Aggregations that take the output of other aggregations as their input.</li>
</ul>
</div><h1>Types of Aggregations</h1>
<div class='content'><p>Elasticsearch offers several types of aggregations, each serving different purposes. We'll cover the most commonly used ones.</p>
</div><h2>Bucket Aggregations</h2>
<div class='content'><p>Bucket aggregations create buckets of documents based on certain criteria.</p>
<h4>Terms Aggregation</h4>
<p>Groups documents by a specific field.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJhZ2dzIjogewogICAgImdlbnJlcyI6IHsKICAgICAgInRlcm1zIjogewogICAgICAgICJmaWVsZCI6ICJnZW5yZS5rZXl3b3JkIgogICAgICB9CiAgICB9CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;aggs&quot;: {
    &quot;genres&quot;: {
      &quot;terms&quot;: {
        &quot;field&quot;: &quot;genre.keyword&quot;
      }
    }
  }
}</pre></div><div class='content'><h4>Range Aggregation</h4>
<p>Groups documents into ranges.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJhZ2dzIjogewogICAgInByaWNlX3JhbmdlcyI6IHsKICAgICAgInJhbmdlIjogewogICAgICAgICJmaWVsZCI6ICJwcmljZSIsCiAgICAgICAgInJhbmdlcyI6IFsKICAgICAgICAgIHsgInRvIjogNTAgfSwKICAgICAgICAgIHsgImZyb20iOiA1MCwgInRvIjogMTAwIH0sCiAgICAgICAgICB7ICJmcm9tIjogMTAwIH0KICAgICAgICBdCiAgICAgIH0KICAgIH0KICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;aggs&quot;: {
    &quot;price_ranges&quot;: {
      &quot;range&quot;: {
        &quot;field&quot;: &quot;price&quot;,
        &quot;ranges&quot;: [
          { &quot;to&quot;: 50 },
          { &quot;from&quot;: 50, &quot;to&quot;: 100 },
          { &quot;from&quot;: 100 }
        ]
      }
    }
  }
}</pre></div><div class='content'></div><h2>Metric Aggregations</h2>
<div class='content'><p>Metric aggregations calculate metrics, such as averages and sums, from the documents in a bucket.</p>
<h4>Avg Aggregation</h4>
<p>Calculates the average value of a numeric field.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJhZ2dzIjogewogICAgImF2ZXJhZ2VfcHJpY2UiOiB7CiAgICAgICJhdmciOiB7CiAgICAgICAgImZpZWxkIjogInByaWNlIgogICAgICB9CiAgICB9CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;aggs&quot;: {
    &quot;average_price&quot;: {
      &quot;avg&quot;: {
        &quot;field&quot;: &quot;price&quot;
      }
    }
  }
}</pre></div><div class='content'><h4>Sum Aggregation</h4>
<p>Calculates the sum of a numeric field.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJhZ2dzIjogewogICAgInRvdGFsX3NhbGVzIjogewogICAgICAic3VtIjogewogICAgICAgICJmaWVsZCI6ICJzYWxlcyIKICAgICAgfQogICAgfQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;aggs&quot;: {
    &quot;total_sales&quot;: {
      &quot;sum&quot;: {
        &quot;field&quot;: &quot;sales&quot;
      }
    }
  }
}</pre></div><div class='content'></div><h2>Pipeline Aggregations</h2>
<div class='content'><p>Pipeline aggregations take the output of other aggregations as their input.</p>
<h4>Derivative Aggregation</h4>
<p>Calculates the derivative of a specified metric.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJhZ2dzIjogewogICAgInNhbGVzX292ZXJfdGltZSI6IHsKICAgICAgImRhdGVfaGlzdG9ncmFtIjogewogICAgICAgICJmaWVsZCI6ICJkYXRlIiwKICAgICAgICAiaW50ZXJ2YWwiOiAibW9udGgiCiAgICAgIH0sCiAgICAgICJhZ2dzIjogewogICAgICAgICJzYWxlcyI6IHsKICAgICAgICAgICJzdW0iOiB7CiAgICAgICAgICAgICJmaWVsZCI6ICJzYWxlcyIKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgICJzYWxlc19kZXJpdmF0aXZlIjogewogICAgICAgICAgImRlcml2YXRpdmUiOiB7CiAgICAgICAgICAgICJidWNrZXRzX3BhdGgiOiAic2FsZXMiCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;aggs&quot;: {
    &quot;sales_over_time&quot;: {
      &quot;date_histogram&quot;: {
        &quot;field&quot;: &quot;date&quot;,
        &quot;interval&quot;: &quot;month&quot;
      },
      &quot;aggs&quot;: {
        &quot;sales&quot;: {
          &quot;sum&quot;: {
            &quot;field&quot;: &quot;sales&quot;
          }
        },
        &quot;sales_derivative&quot;: {
          &quot;derivative&quot;: {
            &quot;buckets_path&quot;: &quot;sales&quot;
          }
        }
      }
    }
  }
}</pre></div><div class='content'></div><h1>Advanced Aggregations</h1>
<div class='content'></div><h2>Nested Aggregations</h2>
<div class='content'><p>Nested aggregations allow you to perform aggregations within nested documents.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJhZ2dzIjogewogICAgIm5lc3RlZF9jb21tZW50cyI6IHsKICAgICAgIm5lc3RlZCI6IHsKICAgICAgICAicGF0aCI6ICJjb21tZW50cyIKICAgICAgfSwKICAgICAgImFnZ3MiOiB7CiAgICAgICAgImF2Z19yYXRpbmciOiB7CiAgICAgICAgICAiYXZnIjogewogICAgICAgICAgICAiZmllbGQiOiAiY29tbWVudHMucmF0aW5nIgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;aggs&quot;: {
    &quot;nested_comments&quot;: {
      &quot;nested&quot;: {
        &quot;path&quot;: &quot;comments&quot;
      },
      &quot;aggs&quot;: {
        &quot;avg_rating&quot;: {
          &quot;avg&quot;: {
            &quot;field&quot;: &quot;comments.rating&quot;
          }
        }
      }
    }
  }
}</pre></div><div class='content'></div><h2>Aggregation Combinations</h2>
<div class='content'><p>Combining multiple aggregations can provide deeper insights.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJhZ2dzIjogewogICAgImdlbnJlcyI6IHsKICAgICAgInRlcm1zIjogewogICAgICAgICJmaWVsZCI6ICJnZW5yZS5rZXl3b3JkIgogICAgICB9LAogICAgICAiYWdncyI6IHsKICAgICAgICAiYXZlcmFnZV9wcmljZSI6IHsKICAgICAgICAgICJhdmciOiB7CiAgICAgICAgICAgICJmaWVsZCI6ICJwcmljZSIKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;aggs&quot;: {
    &quot;genres&quot;: {
      &quot;terms&quot;: {
        &quot;field&quot;: &quot;genre.keyword&quot;
      },
      &quot;aggs&quot;: {
        &quot;average_price&quot;: {
          &quot;avg&quot;: {
            &quot;field&quot;: &quot;price&quot;
          }
        }
      }
    }
  }
}</pre></div><div class='content'></div><h1>Exercises</h1>
<div class='content'><ol>
<li><strong>Basic Terms Aggregation</strong>: Create a terms aggregation to group documents by the <code>category</code> field.</li>
<li><strong>Range Aggregation</strong>: Create a range aggregation to group documents by price ranges: 0-50, 50-100, and 100+.</li>
<li><strong>Combining Aggregations</strong>: Combine a terms aggregation on <code>category</code> with an average aggregation on <code>price</code>.</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>Aggregations in Elasticsearch are a versatile tool for data analysis, allowing you to group, filter, and calculate metrics on your data. By understanding and utilizing different types of aggregations, from basic bucket and metric aggregations to more advanced nested and pipeline aggregations, you can extract valuable insights from your data. Practice with the provided exercises to solidify your understanding and become proficient in using aggregations in Elasticsearch.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='filtering-and-sorting'>&#x25C4;Filtering and Sorting</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Aggregations in Elasticsearch</a>
	</div>
	<div class='col-4 text-end'>
					<a href='scripting'>Scripting &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
