<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graph Exploration</title>

    <link rel="alternate" href="https://campusempresa.com/mod/elasticsearch/08-03-graph-exploration" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/elasticsearch/08-03-graph-exploration" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/elasticsearch/08-03-graph-exploration" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/elasticsearch/08-03-graph-exploration" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/elasticsearch/08-03-graph-exploration" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='08-02-machine-learning-elasticsearch' title="Machine Learning in Elasticsearch">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Graph Exploration</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='08-04-geo-search' title="Geo-Search">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Graph exploration in Elasticsearch allows you to discover and visualize relationships between indexed data. This can be particularly useful for identifying patterns, connections, and anomalies within your data. In this section, we will cover the basics of graph exploration, how to use the Graph API, and practical examples to help you get started.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Vertices</strong>: Nodes in the graph representing entities such as documents, terms, or other data points.</li>
<li><strong>Edges</strong>: Connections between vertices that represent relationships or interactions.</li>
<li><strong>Graph API</strong>: Elasticsearch's API for performing graph exploration queries.</li>
</ol>
</div><h1>Using the Graph API</h1>
<div class='content'><p>The Graph API in Elasticsearch allows you to perform graph exploration queries to identify relationships between indexed data. Here’s a step-by-step guide on how to use the Graph API:</p>
</div><h2>Step 1: Enable the Graph Plugin</h2>
<div class='content'><p>Before you can use the Graph API, ensure that the Graph plugin is installed and enabled in your Elasticsearch cluster.</p>
</div><h2>Step 2: Basic Graph Query</h2>
<div class='content'><p>A basic graph query involves specifying an index and the fields you want to explore. Here’s an example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UE9TVCAvbXlfaW5kZXgvX2dyYXBoL2V4cGxvcmUKewogICJxdWVyeSI6IHsKICAgICJtYXRjaF9hbGwiOiB7fQogIH0sCiAgInZlcnRpY2VzIjogWwogICAgewogICAgICAiZmllbGQiOiAiZmllbGRfbmFtZSIKICAgIH0KICBdLAogICJjb25uZWN0aW9ucyI6IHsKICAgICJ2ZXJ0aWNlcyI6IFsKICAgICAgewogICAgICAgICJmaWVsZCI6ICJyZWxhdGVkX2ZpZWxkIgogICAgICB9CiAgICBdCiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>POST /my_index/_graph/explore
{
  &quot;query&quot;: {
    &quot;match_all&quot;: {}
  },
  &quot;vertices&quot;: [
    {
      &quot;field&quot;: &quot;field_name&quot;
    }
  ],
  &quot;connections&quot;: {
    &quot;vertices&quot;: [
      {
        &quot;field&quot;: &quot;related_field&quot;
      }
    ]
  }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>query</strong>: Defines the initial set of documents to consider. In this example, it matches all documents.</li>
<li><strong>vertices</strong>: Specifies the fields to be used as vertices in the graph.</li>
<li><strong>connections</strong>: Defines the relationships (edges) between the vertices.</li>
</ul>
</div><h2>Step 3: Advanced Graph Query</h2>
<div class='content'><p>You can refine your graph queries by adding filters, specifying the size of the result set, and more. Here’s an advanced example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UE9TVCAvbXlfaW5kZXgvX2dyYXBoL2V4cGxvcmUKewogICJxdWVyeSI6IHsKICAgICJib29sIjogewogICAgICAibXVzdCI6IFsKICAgICAgICB7CiAgICAgICAgICAidGVybSI6IHsKICAgICAgICAgICAgInN0YXR1cyI6ICJhY3RpdmUiCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICBdCiAgICB9CiAgfSwKICAidmVydGljZXMiOiBbCiAgICB7CiAgICAgICJmaWVsZCI6ICJ1c2VyX2lkIiwKICAgICAgInNpemUiOiA1CiAgICB9CiAgXSwKICAiY29ubmVjdGlvbnMiOiB7CiAgICAidmVydGljZXMiOiBbCiAgICAgIHsKICAgICAgICAiZmllbGQiOiAidHJhbnNhY3Rpb25faWQiLAogICAgICAgICJzaXplIjogNQogICAgICB9CiAgICBdLAogICAgInF1ZXJ5IjogewogICAgICAidGVybSI6IHsKICAgICAgICAidHJhbnNhY3Rpb25fdHlwZSI6ICJwdXJjaGFzZSIKICAgICAgfQogICAgfQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>POST /my_index/_graph/explore
{
  &quot;query&quot;: {
    &quot;bool&quot;: {
      &quot;must&quot;: [
        {
          &quot;term&quot;: {
            &quot;status&quot;: &quot;active&quot;
          }
        }
      ]
    }
  },
  &quot;vertices&quot;: [
    {
      &quot;field&quot;: &quot;user_id&quot;,
      &quot;size&quot;: 5
    }
  ],
  &quot;connections&quot;: {
    &quot;vertices&quot;: [
      {
        &quot;field&quot;: &quot;transaction_id&quot;,
        &quot;size&quot;: 5
      }
    ],
    &quot;query&quot;: {
      &quot;term&quot;: {
        &quot;transaction_type&quot;: &quot;purchase&quot;
      }
    }
  }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>query</strong>: Filters the documents to only include those with an &quot;active&quot; status.</li>
<li><strong>vertices</strong>: Limits the number of vertices to 5 for the &quot;user_id&quot; field.</li>
<li><strong>connections</strong>: Limits the number of connections to 5 for the &quot;transaction_id&quot; field and filters connections to only include &quot;purchase&quot; transactions.</li>
</ul>
</div><h1>Practical Example</h1>
<div class='content'><p>Let’s explore a practical example where we want to find relationships between users and the products they have purchased.</p>
</div><h2>Sample Data</h2>
<div class='content'><p>Assume we have an index <code>ecommerce</code> with the following documents:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UE9TVCAvZWNvbW1lcmNlL19kb2MvMQp7CiAgInVzZXJfaWQiOiAidXNlcjEiLAogICJwcm9kdWN0X2lkIjogInByb2R1Y3RBIiwKICAidHJhbnNhY3Rpb25fdHlwZSI6ICJwdXJjaGFzZSIKfQoKUE9TVCAvZWNvbW1lcmNlL19kb2MvMgp7CiAgInVzZXJfaWQiOiAidXNlcjIiLAogICJwcm9kdWN0X2lkIjogInByb2R1Y3RCIiwKICAidHJhbnNhY3Rpb25fdHlwZSI6ICJwdXJjaGFzZSIKfQoKUE9TVCAvZWNvbW1lcmNlL19kb2MvMwp7CiAgInVzZXJfaWQiOiAidXNlcjEiLAogICJwcm9kdWN0X2lkIjogInByb2R1Y3RDIiwKICAidHJhbnNhY3Rpb25fdHlwZSI6ICJwdXJjaGFzZSIKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>POST /ecommerce/_doc/1
{
  &quot;user_id&quot;: &quot;user1&quot;,
  &quot;product_id&quot;: &quot;productA&quot;,
  &quot;transaction_type&quot;: &quot;purchase&quot;
}

POST /ecommerce/_doc/2
{
  &quot;user_id&quot;: &quot;user2&quot;,
  &quot;product_id&quot;: &quot;productB&quot;,
  &quot;transaction_type&quot;: &quot;purchase&quot;
}

POST /ecommerce/_doc/3
{
  &quot;user_id&quot;: &quot;user1&quot;,
  &quot;product_id&quot;: &quot;productC&quot;,
  &quot;transaction_type&quot;: &quot;purchase&quot;
}</pre></div><div class='content'></div><h2>Graph Query</h2>
<div class='content'><p>To find relationships between users and products, we can use the following graph query:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UE9TVCAvZWNvbW1lcmNlL19ncmFwaC9leHBsb3JlCnsKICAicXVlcnkiOiB7CiAgICAibWF0Y2hfYWxsIjoge30KICB9LAogICJ2ZXJ0aWNlcyI6IFsKICAgIHsKICAgICAgImZpZWxkIjogInVzZXJfaWQiCiAgICB9CiAgXSwKICAiY29ubmVjdGlvbnMiOiB7CiAgICAidmVydGljZXMiOiBbCiAgICAgIHsKICAgICAgICAiZmllbGQiOiAicHJvZHVjdF9pZCIKICAgICAgfQogICAgXQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>POST /ecommerce/_graph/explore
{
  &quot;query&quot;: {
    &quot;match_all&quot;: {}
  },
  &quot;vertices&quot;: [
    {
      &quot;field&quot;: &quot;user_id&quot;
    }
  ],
  &quot;connections&quot;: {
    &quot;vertices&quot;: [
      {
        &quot;field&quot;: &quot;product_id&quot;
      }
    ]
  }
}</pre></div><div class='content'></div><h2>Expected Output</h2>
<div class='content'><p>The output will show vertices for <code>user_id</code> and <code>product_id</code> and edges representing the purchase relationships between them.</p>
</div><h1>Exercises</h1>
<div class='content'></div><h2>Exercise 1: Basic Graph Query</h2>
<div class='content'><p><strong>Task</strong>: Write a graph query to explore relationships between authors and books in an index <code>library</code>.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UE9TVCAvbGlicmFyeS9fZ3JhcGgvZXhwbG9yZQp7CiAgInF1ZXJ5IjogewogICAgIm1hdGNoX2FsbCI6IHt9CiAgfSwKICAidmVydGljZXMiOiBbCiAgICB7CiAgICAgICJmaWVsZCI6ICJhdXRob3IiCiAgICB9CiAgXSwKICAiY29ubmVjdGlvbnMiOiB7CiAgICAidmVydGljZXMiOiBbCiAgICAgIHsKICAgICAgICAiZmllbGQiOiAiYm9va190aXRsZSIKICAgICAgfQogICAgXQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>POST /library/_graph/explore
{
  &quot;query&quot;: {
    &quot;match_all&quot;: {}
  },
  &quot;vertices&quot;: [
    {
      &quot;field&quot;: &quot;author&quot;
    }
  ],
  &quot;connections&quot;: {
    &quot;vertices&quot;: [
      {
        &quot;field&quot;: &quot;book_title&quot;
      }
    ]
  }
}</pre></div><div class='content'></div><h2>Exercise 2: Filtered Graph Query</h2>
<div class='content'><p><strong>Task</strong>: Write a graph query to explore relationships between users and products, but only include users who have made a purchase in the last 30 days.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UE9TVCAvZWNvbW1lcmNlL19ncmFwaC9leHBsb3JlCnsKICAicXVlcnkiOiB7CiAgICAicmFuZ2UiOiB7CiAgICAgICJwdXJjaGFzZV9kYXRlIjogewogICAgICAgICJndGUiOiAibm93LTMwZC9kIgogICAgICB9CiAgICB9CiAgfSwKICAidmVydGljZXMiOiBbCiAgICB7CiAgICAgICJmaWVsZCI6ICJ1c2VyX2lkIgogICAgfQogIF0sCiAgImNvbm5lY3Rpb25zIjogewogICAgInZlcnRpY2VzIjogWwogICAgICB7CiAgICAgICAgImZpZWxkIjogInByb2R1Y3RfaWQiCiAgICAgIH0KICAgIF0KICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>POST /ecommerce/_graph/explore
{
  &quot;query&quot;: {
    &quot;range&quot;: {
      &quot;purchase_date&quot;: {
        &quot;gte&quot;: &quot;now-30d/d&quot;
      }
    }
  },
  &quot;vertices&quot;: [
    {
      &quot;field&quot;: &quot;user_id&quot;
    }
  ],
  &quot;connections&quot;: {
    &quot;vertices&quot;: [
      {
        &quot;field&quot;: &quot;product_id&quot;
      }
    ]
  }
}</pre></div><div class='content'></div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Mistake</strong>: Not filtering the initial query, leading to large and unmanageable result sets.
<ul>
<li><strong>Tip</strong>: Always use filters to narrow down the initial set of documents.</li>
</ul>
</li>
<li><strong>Mistake</strong>: Overloading the graph query with too many vertices and connections.
<ul>
<li><strong>Tip</strong>: Start with a simple query and gradually add complexity.</li>
</ul>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Graph exploration in Elasticsearch is a powerful tool for uncovering relationships within your data. By using the Graph API, you can visualize and analyze connections between different entities, helping you to identify patterns and insights. Practice with different datasets and queries to become proficient in graph exploration.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='08-02-machine-learning-elasticsearch' title="Machine Learning in Elasticsearch">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='08-04-geo-search' title="Geo-Search">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
