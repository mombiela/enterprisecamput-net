<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Securing Elasticsearch</title>

    <link rel="alternate" href="https://campusempresa.com/mod/elasticsearch/securing-elasticsearch" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/elasticsearch/securing-elasticsearch" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/elasticsearch/securing-elasticsearch" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/elasticsearch/securing-elasticsearch" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/elasticsearch/securing-elasticsearch" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='backup-and-restore'>&#x25C4;Backup and Restore</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Securing Elasticsearch</a>
	</div>
	<div class='col-4 text-end'>
					<a href='user-role-management'>User and Role Management &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Securing Elasticsearch is crucial to protect your data and ensure that only authorized users have access to your cluster. This topic will cover various aspects of securing Elasticsearch, from basic authentication to advanced security configurations.</p>
</div><h1>Basic Authentication</h1>
<div class='content'><p>Basic authentication is the simplest form of securing your Elasticsearch cluster. It involves setting up a username and password to control access.</p>
</div><h2>Setting Up Basic Authentication</h2>
<div class='content'><ol>
<li>
<p><strong>Install the X-Pack Plugin</strong>: X-Pack is a plugin that provides security features for Elasticsearch.</p>
<pre><code class="language-sh">bin/elasticsearch-plugin install x-pack
</code></pre>
</li>
<li>
<p><strong>Configure the Elasticsearch.yml File</strong>: Add the following lines to your <code>elasticsearch.yml</code> configuration file.</p>
<pre><code class="language-yaml">xpack.security.enabled: true
</code></pre>
</li>
<li>
<p><strong>Start Elasticsearch</strong>: Restart your Elasticsearch instance to apply the changes.</p>
<pre><code class="language-sh">bin/elasticsearch
</code></pre>
</li>
<li>
<p><strong>Set Up Built-In Users</strong>: Use the <code>elasticsearch-setup-passwords</code> tool to set passwords for built-in users.</p>
<pre><code class="language-sh">bin/elasticsearch-setup-passwords interactive
</code></pre>
</li>
<li>
<p><strong>Test Authentication</strong>: Use <code>curl</code> to test the authentication.</p>
<pre><code class="language-sh">curl -u elastic:your_password http://localhost:9200
</code></pre>
</li>
</ol>
</div><h1>Role-Based Access Control (RBAC)</h1>
<div class='content'><p>RBAC allows you to define roles and assign them to users, controlling what actions they can perform and what data they can access.</p>
</div><h2>Creating Roles</h2>
<div class='content'><ol>
<li>
<p><strong>Define Roles in a JSON File</strong>: Create a JSON file to define roles.</p>
<pre><code class="language-json">{
  &quot;cluster&quot;: [&quot;all&quot;],
  &quot;indices&quot;: [
    {
      &quot;names&quot;: [&quot;*&quot;],
      &quot;privileges&quot;: [&quot;read&quot;, &quot;write&quot;]
    }
  ]
}
</code></pre>
</li>
<li>
<p><strong>Add Roles Using the Role API</strong>: Use the Role API to add roles.</p>
<pre><code class="language-sh">curl -X POST &quot;localhost:9200/_security/role/my_role&quot; -H 'Content-Type: application/json' -d @role.json
</code></pre>
</li>
</ol>
</div><h2>Assigning Roles to Users</h2>
<div class='content'><ol>
<li><strong>Create a User</strong>: Use the User API to create a user and assign a role.
<pre><code class="language-sh">curl -X POST &quot;localhost:9200/_security/user/my_user&quot; -H 'Content-Type: application/json' -d '{
  &quot;password&quot; : &quot;password&quot;,
  &quot;roles&quot; : [ &quot;my_role&quot; ],
  &quot;full_name&quot; : &quot;User Name&quot;,
  &quot;email&quot; : &quot;user@example.com&quot;
}'
</code></pre>
</li>
</ol>
</div><h1>Transport Layer Security (TLS)</h1>
<div class='content'><p>TLS encrypts the communication between Elasticsearch nodes and between clients and nodes, ensuring data integrity and confidentiality.</p>
</div><h2>Enabling TLS</h2>
<div class='content'><ol>
<li>
<p><strong>Generate Certificates</strong>: Use the <code>elasticsearch-certutil</code> tool to generate certificates.</p>
<pre><code class="language-sh">bin/elasticsearch-certutil cert --ca
</code></pre>
</li>
<li>
<p><strong>Configure Elasticsearch for TLS</strong>: Add the following lines to your <code>elasticsearch.yml</code> file.</p>
<pre><code class="language-yaml">xpack.security.transport.ssl.enabled: true
xpack.security.transport.ssl.verification_mode: certificate
xpack.security.transport.ssl.key: /path/to/your/node.key
xpack.security.transport.ssl.certificate: /path/to/your/node.crt
xpack.security.transport.ssl.certificate_authorities: [ &quot;/path/to/your/ca.crt&quot; ]
</code></pre>
</li>
<li>
<p><strong>Restart Elasticsearch</strong>: Restart your Elasticsearch instance to apply the changes.</p>
<pre><code class="language-sh">bin/elasticsearch
</code></pre>
</li>
</ol>
</div><h1>Auditing</h1>
<div class='content'><p>Auditing helps you track access and changes to your Elasticsearch cluster, providing a trail of actions for security and compliance purposes.</p>
</div><h2>Enabling Auditing</h2>
<div class='content'><ol>
<li>
<p><strong>Configure Auditing in Elasticsearch.yml</strong>: Add the following lines to your <code>elasticsearch.yml</code> file.</p>
<pre><code class="language-yaml">xpack.security.audit.enabled: true
xpack.security.audit.outputs: [ index, logfile ]
</code></pre>
</li>
<li>
<p><strong>Review Audit Logs</strong>: Audit logs will be stored in the specified output locations, such as an index or a log file.</p>
</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>Securing Elasticsearch involves multiple layers of protection, including basic authentication, role-based access control, transport layer security, and auditing. By implementing these security measures, you can ensure that your Elasticsearch cluster is protected against unauthorized access and data breaches. Always keep your security configurations up to date and regularly review your security policies to adapt to new threats.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='backup-and-restore'>&#x25C4;Backup and Restore</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Securing Elasticsearch</a>
	</div>
	<div class='col-4 text-end'>
					<a href='user-role-management'>User and Role Management &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
