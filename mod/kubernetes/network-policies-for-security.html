<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Network Policies for Security</title>

    <link rel="alternate" href="https://campusempresa.com/mod/kubernetes/network-policies-for-security" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/kubernetes/network-policies-for-security" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/kubernetes/network-policies-for-security" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/kubernetes/network-policies-for-security" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/kubernetes/network-policies-for-security" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='role-based-access-control'>&#x25C4;Role-Based Access Control (RBAC)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Network Policies for Security</a>
	</div>
	<div class='col-4 text-end'>
					<a href='pod-security-policies'>Pod Security Policies &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Kubernetes Network Policies are crucial for securing your cluster by controlling the communication between pods and services. This topic will guide you from the basics to advanced concepts, ensuring you understand how to implement and manage network policies effectively.</p>
</div><h1>What are Network Policies?</h1>
<div class='content'><p>Network Policies in Kubernetes are rules that define how pods communicate with each other and with other network endpoints. They are implemented using the Kubernetes NetworkPolicy resource.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Pod Selector</strong>: Specifies the group of pods to which the policy applies.</li>
<li><strong>Ingress Rules</strong>: Define the allowed incoming traffic to the selected pods.</li>
<li><strong>Egress Rules</strong>: Define the allowed outgoing traffic from the selected pods.</li>
<li><strong>Namespaces</strong>: Network policies can be applied within a specific namespace or across multiple namespaces.</li>
</ul>
</div><h1>Basic Network Policy Example</h1>
<div class='content'><p>Let's start with a simple example to allow traffic only from specific pods.</p>
</div><h2>Example: Allow Traffic from Specific Pods</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogbmV0d29ya2luZy5rOHMuaW8vdjEKa2luZDogTmV0d29ya1BvbGljeQptZXRhZGF0YToKICBuYW1lOiBhbGxvdy1zcGVjaWZpYy1wb2RzCiAgbmFtZXNwYWNlOiBkZWZhdWx0CnNwZWM6CiAgcG9kU2VsZWN0b3I6CiAgICBtYXRjaExhYmVsczoKICAgICAgcm9sZTogZGIKICBpbmdyZXNzOgogIC0gZnJvbToKICAgIC0gcG9kU2VsZWN0b3I6CiAgICAgICAgbWF0Y2hMYWJlbHM6CiAgICAgICAgICByb2xlOiBmcm9udGVuZA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-specific-pods
  namespace: default
spec:
  podSelector:
    matchLabels:
      role: db
  ingress:
  - from:
    - podSelector:
        matchLabels:
          role: frontend</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>apiVersion</strong>: Specifies the API version.</li>
<li><strong>kind</strong>: Defines the resource type, which is NetworkPolicy.</li>
<li><strong>metadata</strong>: Contains the name and namespace of the policy.</li>
<li><strong>spec</strong>: The specification of the policy.
<ul>
<li><strong>podSelector</strong>: Selects pods with the label <code>role: db</code>.</li>
<li><strong>ingress</strong>: Allows incoming traffic from pods with the label <code>role: frontend</code>.</li>
</ul>
</li>
</ul>
</div><h1>Advanced Network Policy Concepts</h1>
<div class='content'><p>As you become more comfortable with basic policies, you can explore more advanced features.</p>
</div><h2>Combining Ingress and Egress Rules</h2>
<div class='content'><p>You can define both ingress and egress rules in a single policy.</p>
</div><h2>Example: Combined Ingress and Egress Rules</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogbmV0d29ya2luZy5rOHMuaW8vdjEKa2luZDogTmV0d29ya1BvbGljeQptZXRhZGF0YToKICBuYW1lOiBjb21iaW5lZC1wb2xpY3kKICBuYW1lc3BhY2U6IGRlZmF1bHQKc3BlYzoKICBwb2RTZWxlY3RvcjoKICAgIG1hdGNoTGFiZWxzOgogICAgICByb2xlOiBiYWNrZW5kCiAgaW5ncmVzczoKICAtIGZyb206CiAgICAtIHBvZFNlbGVjdG9yOgogICAgICAgIG1hdGNoTGFiZWxzOgogICAgICAgICAgcm9sZTogZnJvbnRlbmQKICBlZ3Jlc3M6CiAgLSB0bzoKICAgIC0gcG9kU2VsZWN0b3I6CiAgICAgICAgbWF0Y2hMYWJlbHM6CiAgICAgICAgICByb2xlOiBkYg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: combined-policy
  namespace: default
spec:
  podSelector:
    matchLabels:
      role: backend
  ingress:
  - from:
    - podSelector:
        matchLabels:
          role: frontend
  egress:
  - to:
    - podSelector:
        matchLabels:
          role: db</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>podSelector</strong>: Selects pods with the label <code>role: backend</code>.</li>
<li><strong>ingress</strong>: Allows incoming traffic from pods with the label <code>role: frontend</code>.</li>
<li><strong>egress</strong>: Allows outgoing traffic to pods with the label <code>role: db</code>.</li>
</ul>
</div><h2>Using Namespace Selectors</h2>
<div class='content'><p>Network policies can also use namespace selectors to control traffic across different namespaces.</p>
</div><h2>Example: Namespace Selector</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogbmV0d29ya2luZy5rOHMuaW8vdjEKa2luZDogTmV0d29ya1BvbGljeQptZXRhZGF0YToKICBuYW1lOiBuYW1lc3BhY2Utc2VsZWN0b3IKICBuYW1lc3BhY2U6IGRlZmF1bHQKc3BlYzoKICBwb2RTZWxlY3RvcjoKICAgIG1hdGNoTGFiZWxzOgogICAgICByb2xlOiBhcGkKICBpbmdyZXNzOgogIC0gZnJvbToKICAgIC0gbmFtZXNwYWNlU2VsZWN0b3I6CiAgICAgICAgbWF0Y2hMYWJlbHM6CiAgICAgICAgICBlbnZpcm9ubWVudDogcHJvZHVjdGlvbg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: namespace-selector
  namespace: default
spec:
  podSelector:
    matchLabels:
      role: api
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          environment: production</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>namespaceSelector</strong>: Selects namespaces with the label <code>environment: production</code>.</li>
<li><strong>ingress</strong>: Allows incoming traffic from any pod in namespaces labeled <code>environment: production</code>.</li>
</ul>
</div><h1>Best Practices for Network Policies</h1>
<div class='content'><ul>
<li><strong>Least Privilege</strong>: Start with a default deny-all policy and then add specific allow rules.</li>
<li><strong>Label Consistency</strong>: Use consistent labeling across your pods and namespaces to simplify policy management.</li>
<li><strong>Testing</strong>: Test your network policies in a staging environment before applying them to production.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Network Policies are a powerful tool for securing your Kubernetes cluster by controlling pod communication. By understanding and implementing these policies, you can ensure that your applications are both secure and compliant with organizational policies. Start with basic policies and gradually move to more complex configurations as your needs evolve.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='role-based-access-control'>&#x25C4;Role-Based Access Control (RBAC)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Network Policies for Security</a>
	</div>
	<div class='col-4 text-end'>
					<a href='pod-security-policies'>Pod Security Policies &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
