<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StatefulSets in Kubernetes</title>

    <link rel="alternate" href="https://campusempresa.com/mod/kubernetes/statefulsets" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/kubernetes/statefulsets" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/kubernetes/statefulsets" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/kubernetes/statefulsets" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/kubernetes/statefulsets" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='dynamic-provisioning'>&#x25C4;Dynamic Provisioning</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">StatefulSets in Kubernetes</a>
	</div>
	<div class='col-4 text-end'>
					<a href='authentication-and-authorization'>Authentication and Authorization &#x25BA;</a>
			</div>
</div>
<div class='content'><p>StatefulSets are a Kubernetes resource designed to manage stateful applications. Unlike Deployments, which are used for stateless applications, StatefulSets are used for applications that require persistent storage and stable network identities.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Stateful Applications</strong>: Applications that require persistent storage and stable network identities.</li>
<li><strong>Pods</strong>: StatefulSets manage the deployment and scaling of a set of Pods, and provide guarantees about the ordering and uniqueness of these Pods.</li>
<li><strong>Persistent Volume Claims (PVCs)</strong>: StatefulSets work with PVCs to provide persistent storage for each Pod.</li>
<li><strong>Stable Network Identities</strong>: Each Pod in a StatefulSet has a unique, stable network identity.</li>
<li><strong>Ordered Deployment and Scaling</strong>: Pods are created, deleted, and scaled in a specific order.</li>
</ul>
</div><h1>StatefulSet Basics</h1>
<div class='content'></div><h2>Creating a StatefulSet</h2>
<div class='content'><p>To create a StatefulSet, you need to define it in a YAML file. Below is an example of a simple StatefulSet definition:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXBpVmVyc2lvbjogYXBwcy92MQpraW5kOiBTdGF0ZWZ1bFNldAptZXRhZGF0YToKICBuYW1lOiB3ZWIKc3BlYzoKICBzZXJ2aWNlTmFtZTogIm5naW54IgogIHJlcGxpY2FzOiAzCiAgc2VsZWN0b3I6CiAgICBtYXRjaExhYmVsczoKICAgICAgYXBwOiBuZ2lueAogIHRlbXBsYXRlOgogICAgbWV0YWRhdGE6CiAgICAgIGxhYmVsczoKICAgICAgICBhcHA6IG5naW54CiAgICBzcGVjOgogICAgICBjb250YWluZXJzOgogICAgICAtIG5hbWU6IG5naW54CiAgICAgICAgaW1hZ2U6IGs4cy5nY3IuaW8vbmdpbngtc2xpbTowLjgKICAgICAgICBwb3J0czoKICAgICAgICAtIGNvbnRhaW5lclBvcnQ6IDgwCiAgICAgICAgICBuYW1lOiB3ZWIKICB2b2x1bWVDbGFpbVRlbXBsYXRlczoKICAtIG1ldGFkYXRhOgogICAgICBuYW1lOiB3d3cKICAgIHNwZWM6CiAgICAgIGFjY2Vzc01vZGVzOiBbICJSZWFkV3JpdGVPbmNlIiBdCiAgICAgIHJlc291cmNlczoKICAgICAgICByZXF1ZXN0czoKICAgICAgICAgIHN0b3JhZ2U6IDFHaQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: web
spec:
  serviceName: &quot;nginx&quot;
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: k8s.gcr.io/nginx-slim:0.8
        ports:
        - containerPort: 80
          name: web
  volumeClaimTemplates:
  - metadata:
      name: www
    spec:
      accessModes: [ &quot;ReadWriteOnce&quot; ]
      resources:
        requests:
          storage: 1Gi</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>apiVersion</strong>: Specifies the API version.</li>
<li><strong>kind</strong>: Specifies that this is a StatefulSet.</li>
<li><strong>metadata</strong>: Contains the name of the StatefulSet.</li>
<li><strong>spec</strong>: Defines the desired state of the StatefulSet.
<ul>
<li><strong>serviceName</strong>: The name of the service that governs this StatefulSet.</li>
<li><strong>replicas</strong>: The number of desired Pods.</li>
<li><strong>selector</strong>: A label query over Pods that should match the replica count.</li>
<li><strong>template</strong>: The Pod template.
<ul>
<li><strong>metadata</strong>: Labels for the Pods.</li>
<li><strong>spec</strong>: The specification for the Pods.
<ul>
<li><strong>containers</strong>: The container specifications.
<ul>
<li><strong>name</strong>: The name of the container.</li>
<li><strong>image</strong>: The container image.</li>
<li><strong>ports</strong>: The ports exposed by the container.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><strong>volumeClaimTemplates</strong>: Defines the PVCs for the Pods.</li>
</ul>
</li>
</ul>
</div><h2>Deploying the StatefulSet</h2>
<div class='content'><p>To deploy the StatefulSet, use the following command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBhcHBseSAtZiBzdGF0ZWZ1bHNldC55YW1s"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl apply -f statefulset.yaml</pre></div><div class='content'></div><h2>Verifying the StatefulSet</h2>
<div class='content'><p>To verify that the StatefulSet is running, use the following command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBnZXQgc3RhdGVmdWxzZXRz"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl get statefulsets</pre></div><div class='content'><p>You should see output similar to:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TkFNRSAgIFJFQURZICAgQUdFCndlYiAgICAzLzMgICAgIDFt"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>NAME   READY   AGE
web    3/3     1m</pre></div><div class='content'></div><h1>Advanced Concepts</h1>
<div class='content'></div><h2>Rolling Updates</h2>
<div class='content'><p>StatefulSets support rolling updates, allowing you to update the Pods in a controlled manner. To perform a rolling update, simply update the container image in the StatefulSet definition and apply the changes.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3BlYzoKICB0ZW1wbGF0ZToKICAgIHNwZWM6CiAgICAgIGNvbnRhaW5lcnM6CiAgICAgIC0gbmFtZTogbmdpbngKICAgICAgICBpbWFnZTogazhzLmdjci5pby9uZ2lueC1zbGltOjAuOQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>spec:
  template:
    spec:
      containers:
      - name: nginx
        image: k8s.gcr.io/nginx-slim:0.9</pre></div><div class='content'><p>Apply the changes:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBhcHBseSAtZiBzdGF0ZWZ1bHNldC55YW1s"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl apply -f statefulset.yaml</pre></div><div class='content'></div><h2>Scaling a StatefulSet</h2>
<div class='content'><p>To scale a StatefulSet, use the following command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBzY2FsZSBzdGF0ZWZ1bHNldCB3ZWIgLS1yZXBsaWNhcz01"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl scale statefulset web --replicas=5</pre></div><div class='content'></div><h2>Deleting a StatefulSet</h2>
<div class='content'><p>To delete a StatefulSet without deleting the associated PVCs, use the following command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("a3ViZWN0bCBkZWxldGUgc3RhdGVmdWxzZXQgd2ViIC0tY2FzY2FkZT1vcnBoYW4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>kubectl delete statefulset web --cascade=orphan</pre></div><div class='content'><p>This command deletes the StatefulSet but leaves the PVCs intact.</p>
</div><h1>Summary</h1>
<div class='content'><p>StatefulSets are a powerful Kubernetes resource for managing stateful applications. They provide stable network identities, persistent storage, and ordered deployment and scaling. By understanding and utilizing StatefulSets, you can effectively manage complex stateful applications in your Kubernetes cluster.</p>
<ul>
<li><strong>StatefulSets</strong> manage stateful applications.</li>
<li><strong>Persistent Volume Claims (PVCs)</strong> provide persistent storage.</li>
<li><strong>Stable Network Identities</strong> ensure each Pod has a unique identity.</li>
<li><strong>Ordered Deployment and Scaling</strong> ensure Pods are created and deleted in a specific order.</li>
</ul>
<p>By mastering these concepts, you can leverage StatefulSets to manage stateful applications efficiently in Kubernetes.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='dynamic-provisioning'>&#x25C4;Dynamic Provisioning</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">StatefulSets in Kubernetes</a>
	</div>
	<div class='col-4 text-end'>
					<a href='authentication-and-authorization'>Authentication and Authorization &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
