<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implementing Push Notifications</title>

    <link rel="alternate" href="https://campusempresa.com/mod/apache_cordova/implementing-push-notifications" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/apache_cordova/implementing-push-notifications" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/apache_cordova/implementing-push-notifications" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/apache_cordova/implementing-push-notifications" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/apache_cordova/implementing-push-notifications" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='working-with-the-file-system'>&#x25C4;Working with the File System</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Implementing Push Notifications</a>
	</div>
	<div class='col-4 text-end'>
					<a href='optimizing-app-performance'>Optimizing App Performance &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Push notifications are a powerful way to keep users engaged with your app by delivering timely and relevant information directly to their devices. This topic will guide you through the process of implementing push notifications in an Apache Cordova application, from beginner to advanced levels.</p>
</div><h1>Introduction to Push Notifications</h1>
<div class='content'><p>Push notifications allow apps to notify users of new messages or events even when the user is not actively using the app. They are an essential feature for many types of applications, including social media, news, and e-commerce apps.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Push Notification Service</strong>: A service that sends notifications to devices. Examples include Firebase Cloud Messaging (FCM) for Android and Apple Push Notification Service (APNs) for iOS.</li>
<li><strong>Device Token</strong>: A unique identifier assigned to each device by the push notification service, used to send notifications to that specific device.</li>
<li><strong>Payload</strong>: The data sent in the notification, which can include a message, title, and additional data.</li>
</ul>
</div><h1>Setting Up Your Environment</h1>
<div class='content'><p>Before you can implement push notifications, you need to set up your development environment.</p>
</div><h2>Prerequisites</h2>
<div class='content'><ul>
<li><strong>Node.js and npm</strong>: Ensure you have Node.js and npm installed.</li>
<li><strong>Apache Cordova</strong>: Install Cordova globally using npm.
<pre><code class="language-bash">npm install -g cordova
</code></pre>
</li>
<li><strong>Cordova Project</strong>: Create a new Cordova project or navigate to your existing project.
<pre><code class="language-bash">cordova create MyApp
cd MyApp
</code></pre>
</li>
</ul>
</div><h1>Adding the Push Plugin</h1>
<div class='content'><p>To handle push notifications in Cordova, you need to add a plugin that provides the necessary functionality.</p>
</div><h2>Installing the Plugin</h2>
<div class='content'><ul>
<li>Use the Cordova Push Plugin, which supports both FCM and APNs.
<pre><code class="language-bash">cordova plugin add phonegap-plugin-push
</code></pre>
</li>
</ul>
</div><h1>Configuring Push Notifications</h1>
<div class='content'></div><h2>Android Configuration</h2>
<div class='content'><ol>
<li><strong>Firebase Setup</strong>: Create a Firebase project and add your Android app to it.</li>
<li><strong>Download google-services.json</strong>: Place this file in the <code>platforms/android/app</code> directory.</li>
<li><strong>Modify config.xml</strong>: Add the following lines to your <code>config.xml</code> file.
<pre><code class="language-xml">&lt;platform name=&quot;android&quot;&gt;
    &lt;resource-file src=&quot;google-services.json&quot; target=&quot;app/google-services.json&quot; /&gt;
&lt;/platform&gt;
</code></pre>
</li>
</ol>
</div><h2>iOS Configuration</h2>
<div class='content'><ol>
<li><strong>Apple Developer Account</strong>: Ensure you have an Apple Developer account.</li>
<li><strong>APNs Setup</strong>: Create an APNs key and download the <code>.p8</code> file.</li>
<li><strong>Modify config.xml</strong>: Add the following lines to your <code>config.xml</code> file.
<pre><code class="language-xml">&lt;platform name=&quot;ios&quot;&gt;
    &lt;config-file platform=&quot;ios&quot; target=&quot;*-Info.plist&quot; parent=&quot;UIApplicationExitsOnSuspend&quot;&gt;
        &lt;false/&gt;
    &lt;/config-file&gt;
&lt;/platform&gt;
</code></pre>
</li>
</ol>
</div><h1>Implementing Push Notifications</h1>
<div class='content'></div><h2>Initializing the Plugin</h2>
<div class='content'><ul>
<li>Add the following code to your <code>index.js</code> or main JavaScript file to initialize the push plugin.
<pre><code class="language-javascript">document.addEventListener('deviceready', function () {
    var push = PushNotification.init({
        android: {
            senderID: &quot;YOUR_SENDER_ID&quot;
        },
        ios: {
            alert: &quot;true&quot;,
            badge: &quot;true&quot;,
            sound: &quot;true&quot;
        }
    });

    push.on('registration', function (data) {
        console.log(&quot;Device registered with token:&quot;, data.registrationId);
        // Send the registration ID to your server
    });

    push.on('notification', function (data) {
        console.log(&quot;Notification received:&quot;, data.message);
        // Handle the notification
    });

    push.on('error', function (e) {
        console.error(&quot;Push notification error:&quot;, e.message);
    });
}, false);
</code></pre>
</li>
</ul>
</div><h2>Sending Notifications</h2>
<div class='content'><ul>
<li>Use your backend server to send notifications. Here is an example using Node.js and FCM.
<pre><code class="language-javascript">const admin = require('firebase-admin');
const serviceAccount = require('./path/to/serviceAccountKey.json');

admin.initializeApp({
    credential: admin.credential.cert(serviceAccount)
});

const registrationToken = 'DEVICE_REGISTRATION_TOKEN';
const message = {
    notification: {
        title: 'Hello',
        body: 'World'
    },
    token: registrationToken
};

admin.messaging().send(message)
    .then((response) =&gt; {
        console.log('Successfully sent message:', response);
    })
    .catch((error) =&gt; {
        console.error('Error sending message:', error);
    });
</code></pre>
</li>
</ul>
</div><h1>Advanced Topics</h1>
<div class='content'></div><h2>Handling Background Notifications</h2>
<div class='content'><ul>
<li>Modify your Cordova app to handle notifications when the app is in the background.
<pre><code class="language-javascript">push.on('notification', function (data) {
    if (data.additionalData.foreground) {
        // App is in the foreground
        console.log(&quot;Foreground notification:&quot;, data.message);
    } else {
        // App is in the background
        console.log(&quot;Background notification:&quot;, data.message);
    }
});
</code></pre>
</li>
</ul>
</div><h2>Custom Notification Actions</h2>
<div class='content'><ul>
<li>Add custom actions to your notifications, such as buttons for quick replies.
<pre><code class="language-javascript">const message = {
    notification: {
        title: 'New Message',
        body: 'You have a new message'
    },
    android: {
        notification: {
            clickAction: 'OPEN_ACTIVITY_1'
        }
    },
    token: registrationToken
};
</code></pre>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Implementing push notifications in an Apache Cordova application involves setting up your environment, configuring the necessary services, and using the Cordova Push Plugin to handle notifications. By following this guide, you can ensure that your app can send and receive push notifications effectively, keeping your users engaged and informed.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='working-with-the-file-system'>&#x25C4;Working with the File System</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Implementing Push Notifications</a>
	</div>
	<div class='col-4 text-end'>
					<a href='optimizing-app-performance'>Optimizing App Performance &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
