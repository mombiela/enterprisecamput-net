<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Plugins Development</title>

    <link rel="alternate" href="https://campusempresa.com/mod/apache_cordova/04-01-custom-plugins-development" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/apache_cordova/04-01-custom-plugins-development" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/apache_cordova/04-01-custom-plugins-development" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/apache_cordova/04-01-custom-plugins-development" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/apache_cordova/04-01-custom-plugins-development" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='03-04-implementing-navigation' title="Implementing Navigation">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Custom Plugins Development</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='04-02-using-native-code' title="Using Native Code">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this module, we will delve into the development of custom plugins for Apache Cordova. Custom plugins allow you to extend the functionality of your Cordova application by integrating native code. This is particularly useful when you need to access device features that are not available through existing Cordova plugins.</p>
</div><h1><p>Objectives</p>
</h1>
<div class='content'><ul>
<li>Understand the structure of a Cordova plugin.</li>
<li>Learn how to create a custom plugin.</li>
<li>Integrate native code into your Cordova application.</li>
<li>Test and debug your custom plugin.</li>
</ul>
</div><h1><ol>
<li>Understanding the Structure of a Cordova Plugin</li>
</ol>
</h1>
<div class='content'><p>A Cordova plugin typically consists of the following components:</p>
<ul>
<li><strong>Plugin.xml</strong>: The configuration file that defines the plugin's metadata, dependencies, and platform-specific code.</li>
<li><strong>JavaScript Interface</strong>: The JavaScript file that provides the interface for the Cordova application to interact with the native code.</li>
<li><strong>Native Code</strong>: The platform-specific code (e.g., Java for Android, Objective-C/Swift for iOS) that implements the plugin's functionality.</li>
</ul>
</div><h2><p>Example Plugin Structure</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bXktcGx1Z2luLwrilJzilIDilIAgc3JjLwrilIIgICDilJzilIDilIAgYW5kcm9pZC8K4pSCICAg4pSCICAg4pSU4pSA4pSAIE15UGx1Z2luLmphdmEK4pSCICAg4pSc4pSA4pSAIGlvcy8K4pSCICAg4pSCICAg4pSU4pSA4pSAIE15UGx1Z2luLm0K4pSc4pSA4pSAIHd3dy8K4pSCICAg4pSU4pSA4pSAIG15cGx1Z2luLmpzCuKUnOKUgOKUgCBwbHVnaW4ueG1sCuKUlOKUgOKUgCBSRUFETUUubWQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>my-plugin/
├── src/
│   ├── android/
│   │   └── MyPlugin.java
│   ├── ios/
│   │   └── MyPlugin.m
├── www/
│   └── myplugin.js
├── plugin.xml
└── README.md</pre></div><div class='content'></div><h1><ol start="2">
<li>Creating a Custom Plugin</li>
</ol>
</h1>
<div class='content'></div><h2><p>Step 1: Set Up the Plugin Directory</p>
</h2>
<div class='content'><p>Create a new directory for your plugin and navigate into it:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bWtkaXIgbXktcGx1Z2luCmNkIG15LXBsdWdpbg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>mkdir my-plugin
cd my-plugin</pre></div><div class='content'></div><h2><p>Step 2: Create the Plugin.xml File</p>
</h2>
<div class='content'><p>The <code>plugin.xml</code> file defines the plugin's metadata and configuration. Here is a basic example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PHBsdWdpbiBpZD0iY29yZG92YS1wbHVnaW4tbXlwbHVnaW4iIHZlcnNpb249IjEuMC4wIiB4bWxucz0iaHR0cDovL2FwYWNoZS5vcmcvY29yZG92YS9ucy9wbHVnaW5zLzEuMCIgeG1sbnM6YW5kcm9pZD0iaHR0cDovL3NjaGVtYXMuYW5kcm9pZC5jb20vYXBrL3Jlcy9hbmRyb2lkIj4KICAgIDxuYW1lPk15UGx1Z2luPC9uYW1lPgogICAgPGRlc2NyaXB0aW9uPkEgY3VzdG9tIENvcmRvdmEgcGx1Z2luPC9kZXNjcmlwdGlvbj4KICAgIDxsaWNlbnNlPkFwYWNoZSAyLjA8L2xpY2Vuc2U+CiAgICA8a2V5d29yZHM+Y29yZG92YSxwbHVnaW4sbXlwbHVnaW48L2tleXdvcmRzPgogICAgPGVuZ2luZXM+CiAgICAgICAgPGVuZ2luZSBuYW1lPSJjb3Jkb3ZhIiB2ZXJzaW9uPSI+PTkuMC4wIiAvPgogICAgPC9lbmdpbmVzPgogICAgPGpzLW1vZHVsZSBzcmM9Ind3dy9teXBsdWdpbi5qcyIgbmFtZT0iTXlQbHVnaW4iPgogICAgICAgIDxjbG9iYmVycyB0YXJnZXQ9ImNvcmRvdmEucGx1Z2lucy5NeVBsdWdpbiIgLz4KICAgIDwvanMtbW9kdWxlPgogICAgPHBsYXRmb3JtIG5hbWU9ImFuZHJvaWQiPgogICAgICAgIDxzb3VyY2UtZmlsZSBzcmM9InNyYy9hbmRyb2lkL015UGx1Z2luLmphdmEiIHRhcmdldC1kaXI9InNyYy9jb20vZXhhbXBsZS9teXBsdWdpbiIgLz4KICAgIDwvcGxhdGZvcm0+CiAgICA8cGxhdGZvcm0gbmFtZT0iaW9zIj4KICAgICAgICA8c291cmNlLWZpbGUgc3JjPSJzcmMvaW9zL015UGx1Z2luLm0iIC8+CiAgICA8L3BsYXRmb3JtPgo8L3BsdWdpbj4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;plugin id=&quot;cordova-plugin-myplugin&quot; version=&quot;1.0.0&quot; xmlns=&quot;http://apache.org/cordova/ns/plugins/1.0&quot; xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
    &lt;name&gt;MyPlugin&lt;/name&gt;
    &lt;description&gt;A custom Cordova plugin&lt;/description&gt;
    &lt;license&gt;Apache 2.0&lt;/license&gt;
    &lt;keywords&gt;cordova,plugin,myplugin&lt;/keywords&gt;
    &lt;engines&gt;
        &lt;engine name=&quot;cordova&quot; version=&quot;&gt;=9.0.0&quot; /&gt;
    &lt;/engines&gt;
    &lt;js-module src=&quot;www/myplugin.js&quot; name=&quot;MyPlugin&quot;&gt;
        &lt;clobbers target=&quot;cordova.plugins.MyPlugin&quot; /&gt;
    &lt;/js-module&gt;
    &lt;platform name=&quot;android&quot;&gt;
        &lt;source-file src=&quot;src/android/MyPlugin.java&quot; target-dir=&quot;src/com/example/myplugin&quot; /&gt;
    &lt;/platform&gt;
    &lt;platform name=&quot;ios&quot;&gt;
        &lt;source-file src=&quot;src/ios/MyPlugin.m&quot; /&gt;
    &lt;/platform&gt;
&lt;/plugin&gt;</pre></div><div class='content'></div><h2><p>Step 3: Create the JavaScript Interface</p>
</h2>
<div class='content'><p>Create the <code>www/myplugin.js</code> file to define the JavaScript interface:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyIGV4ZWMgPSByZXF1aXJlKCdjb3Jkb3ZhL2V4ZWMnKTsKCnZhciBNeVBsdWdpbiA9IHsKICAgIGNvb2xNZXRob2Q6IGZ1bmN0aW9uKGFyZzAsIHN1Y2Nlc3MsIGVycm9yKSB7CiAgICAgICAgZXhlYyhzdWNjZXNzLCBlcnJvciwgJ015UGx1Z2luJywgJ2Nvb2xNZXRob2QnLCBbYXJnMF0pOwogICAgfQp9OwoKbW9kdWxlLmV4cG9ydHMgPSBNeVBsdWdpbjs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>var exec = require('cordova/exec');

var MyPlugin = {
    coolMethod: function(arg0, success, error) {
        exec(success, error, 'MyPlugin', 'coolMethod', [arg0]);
    }
};

module.exports = MyPlugin;</pre></div><div class='content'></div><h2><p>Step 4: Implement the Native Code</p>
</h2>
<div class='content'><h4>Android (Java)</h4>
<p>Create the <code>src/android/MyPlugin.java</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBjb20uZXhhbXBsZS5teXBsdWdpbjsKCmltcG9ydCBvcmcuYXBhY2hlLmNvcmRvdmEuQ29yZG92YVBsdWdpbjsKaW1wb3J0IG9yZy5hcGFjaGUuY29yZG92YS5DYWxsYmFja0NvbnRleHQ7CmltcG9ydCBvcmcuanNvbi5KU09OQXJyYXk7CmltcG9ydCBvcmcuanNvbi5KU09ORXhjZXB0aW9uOwppbXBvcnQgb3JnLmpzb24uSlNPTk9iamVjdDsKCnB1YmxpYyBjbGFzcyBNeVBsdWdpbiBleHRlbmRzIENvcmRvdmFQbHVnaW4gewogICAgQE92ZXJyaWRlCiAgICBwdWJsaWMgYm9vbGVhbiBleGVjdXRlKFN0cmluZyBhY3Rpb24sIEpTT05BcnJheSBhcmdzLCBDYWxsYmFja0NvbnRleHQgY2FsbGJhY2tDb250ZXh0KSB0aHJvd3MgSlNPTkV4Y2VwdGlvbiB7CiAgICAgICAgaWYgKGFjdGlvbi5lcXVhbHMoImNvb2xNZXRob2QiKSkgewogICAgICAgICAgICBTdHJpbmcgbWVzc2FnZSA9IGFyZ3MuZ2V0U3RyaW5nKDApOwogICAgICAgICAgICB0aGlzLmNvb2xNZXRob2QobWVzc2FnZSwgY2FsbGJhY2tDb250ZXh0KTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICBwcml2YXRlIHZvaWQgY29vbE1ldGhvZChTdHJpbmcgbWVzc2FnZSwgQ2FsbGJhY2tDb250ZXh0IGNhbGxiYWNrQ29udGV4dCkgewogICAgICAgIGlmIChtZXNzYWdlICE9IG51bGwgJiYgbWVzc2FnZS5sZW5ndGgoKSA+IDApIHsKICAgICAgICAgICAgY2FsbGJhY2tDb250ZXh0LnN1Y2Nlc3MoIkhlbGxvLCAiICsgbWVzc2FnZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2FsbGJhY2tDb250ZXh0LmVycm9yKCJFeHBlY3RlZCBvbmUgbm9uLWVtcHR5IHN0cmluZyBhcmd1bWVudC4iKTsKICAgICAgICB9CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package com.example.myplugin;

import org.apache.cordova.CordovaPlugin;
import org.apache.cordova.CallbackContext;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

public class MyPlugin extends CordovaPlugin {
    @Override
    public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {
        if (action.equals(&quot;coolMethod&quot;)) {
            String message = args.getString(0);
            this.coolMethod(message, callbackContext);
            return true;
        }
        return false;
    }

    private void coolMethod(String message, CallbackContext callbackContext) {
        if (message != null &amp;&amp; message.length() &gt; 0) {
            callbackContext.success(&quot;Hello, &quot; + message);
        } else {
            callbackContext.error(&quot;Expected one non-empty string argument.&quot;);
        }
    }
}</pre></div><div class='content'><h4>iOS (Objective-C)</h4>
<p>Create the <code>src/ios/MyPlugin.m</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2ltcG9ydCA8Q29yZG92YS9DRFYuaD4KCkBpbnRlcmZhY2UgTXlQbHVnaW4gOiBDRFZQbHVnaW4KLSAodm9pZCljb29sTWV0aG9kOihDRFZJbnZva2VkVXJsQ29tbWFuZCopY29tbWFuZDsKQGVuZAoKQGltcGxlbWVudGF0aW9uIE15UGx1Z2luCgotICh2b2lkKWNvb2xNZXRob2Q6KENEVkludm9rZWRVcmxDb21tYW5kKiljb21tYW5kIHsKICAgIENEVlBsdWdpblJlc3VsdCogcGx1Z2luUmVzdWx0ID0gbmlsOwogICAgTlNTdHJpbmcqIGVjaG8gPSBbY29tbWFuZC5hcmd1bWVudHMgb2JqZWN0QXRJbmRleDowXTsKCiAgICBpZiAoZWNobyAhPSBuaWwgJiYgW2VjaG8gbGVuZ3RoXSA+IDApIHsKICAgICAgICBwbHVnaW5SZXN1bHQgPSBbQ0RWUGx1Z2luUmVzdWx0IHJlc3VsdFdpdGhTdGF0dXM6Q0RWQ29tbWFuZFN0YXR1c19PSyBtZXNzYWdlQXNTdHJpbmc6W05TU3RyaW5nIHN0cmluZ1dpdGhGb3JtYXQ6QCJIZWxsbywgJUAiLCBlY2hvXV07CiAgICB9IGVsc2UgewogICAgICAgIHBsdWdpblJlc3VsdCA9IFtDRFZQbHVnaW5SZXN1bHQgcmVzdWx0V2l0aFN0YXR1czpDRFZDb21tYW5kU3RhdHVzX0VSUk9SIG1lc3NhZ2VBc1N0cmluZzpAIkV4cGVjdGVkIG9uZSBub24tZW1wdHkgc3RyaW5nIGFyZ3VtZW50LiJdOwogICAgfQoKICAgIFtzZWxmLmNvbW1hbmREZWxlZ2F0ZSBzZW5kUGx1Z2luUmVzdWx0OnBsdWdpblJlc3VsdCBjYWxsYmFja0lkOmNvbW1hbmQuY2FsbGJhY2tJZF07Cn0KCkBlbmQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#import &lt;Cordova/CDV.h&gt;

@interface MyPlugin : CDVPlugin
- (void)coolMethod:(CDVInvokedUrlCommand*)command;
@end

@implementation MyPlugin

- (void)coolMethod:(CDVInvokedUrlCommand*)command {
    CDVPluginResult* pluginResult = nil;
    NSString* echo = [command.arguments objectAtIndex:0];

    if (echo != nil &amp;&amp; [echo length] &gt; 0) {
        pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsString:[NSString stringWithFormat:@&quot;Hello, %@&quot;, echo]];
    } else {
        pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_ERROR messageAsString:@&quot;Expected one non-empty string argument.&quot;];
    }

    [self.commandDelegate sendPluginResult:pluginResult callbackId:command.callbackId];
}

@end</pre></div><div class='content'></div><h1><ol start="3">
<li>Integrating and Testing Your Custom Plugin</li>
</ol>
</h1>
<div class='content'></div><h2><p>Step 1: Add the Plugin to Your Cordova Project</p>
</h2>
<div class='content'><p>Navigate to your Cordova project directory and add the plugin:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29yZG92YSBwbHVnaW4gYWRkIHBhdGgvdG8vbXktcGx1Z2lu"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>cordova plugin add path/to/my-plugin</pre></div><div class='content'></div><h2><p>Step 2: Use the Plugin in Your Application</p>
</h2>
<div class='content'><p>In your Cordova application's JavaScript code, use the plugin:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlcmVhZHknLCBmdW5jdGlvbigpIHsKICAgIGNvcmRvdmEucGx1Z2lucy5NeVBsdWdpbi5jb29sTWV0aG9kKCdXb3JsZCcsIGZ1bmN0aW9uKHN1Y2Nlc3MpIHsKICAgICAgICBjb25zb2xlLmxvZyhzdWNjZXNzKTsgLy8gIkhlbGxvLCBXb3JsZCIKICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICB9KTsKfSwgZmFsc2UpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>document.addEventListener('deviceready', function() {
    cordova.plugins.MyPlugin.coolMethod('World', function(success) {
        console.log(success); // &quot;Hello, World&quot;
    }, function(error) {
        console.error(error);
    });
}, false);</pre></div><div class='content'></div><h2><p>Step 3: Test the Plugin</p>
</h2>
<div class='content'><p>Run your Cordova application on a device or emulator to test the plugin:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29yZG92YSBydW4gYW5kcm9pZApjb3Jkb3ZhIHJ1biBpb3M="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>cordova run android
cordova run ios</pre></div><div class='content'></div><h1><ol start="4">
<li>Debugging and Troubleshooting</li>
</ol>
</h1>
<div class='content'></div><h2><p>Common Issues</p>
</h2>
<div class='content'><ul>
<li><strong>Plugin Not Found</strong>: Ensure the plugin is correctly added to your project and the <code>plugin.xml</code> file is properly configured.</li>
<li><strong>JavaScript Errors</strong>: Check the console for any JavaScript errors and ensure the JavaScript interface is correctly implemented.</li>
<li><strong>Native Code Errors</strong>: Use platform-specific debugging tools (e.g., Android Studio, Xcode) to debug native code issues.</li>
</ul>
</div><h2><p>Tips</p>
</h2>
<div class='content'><ul>
<li>Use <code>console.log</code> statements in your JavaScript code to debug issues.</li>
<li>Use platform-specific logging (e.g., <code>Log.d</code> for Android, <code>NSLog</code> for iOS) to debug native code.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this module, you learned how to create a custom Cordova plugin, integrate native code, and test your plugin in a Cordova application. Custom plugins are a powerful way to extend the functionality of your Cordova applications and access device features that are not available through existing plugins. By following the steps outlined in this module, you can create and debug your own custom plugins to meet your application's specific needs.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='03-04-implementing-navigation' title="Implementing Navigation">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='04-02-using-native-code' title="Using Native Code">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
