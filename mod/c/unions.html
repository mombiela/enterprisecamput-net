<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unions in C</title>

    <link rel="alternate" href="https://campusempresa.com/mod/c/unions" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/c/unions" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/c/unions" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/c/unions" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/c/unions" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='nested-structures'>&#x25C4;Nested Structures</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Unions in C</a>
	</div>
	<div class='col-4 text-end'>
					<a href='bit-fields'>Bit Fields &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Unions</h1>
<div class='content'><p>Unions in C are a special data type that allows storing different data types in the same memory location. They are similar to structures but with a key difference: while structures allocate separate memory for each member, unions use a single shared memory space for all their members.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Memory Sharing</strong>: All members of a union share the same memory location.</li>
<li><strong>Size</strong>: The size of a union is determined by the size of its largest member.</li>
<li><strong>Access</strong>: Only one member can be accessed at a time, and modifying one member will affect the others.</li>
</ul>
</div><h1>Defining and Using Unions</h1>
<div class='content'><p>To define a union, you use the <code>union</code> keyword followed by the union name and its members.</p>
</div><h2>Syntax</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dW5pb24gVW5pb25OYW1lIHsKICAgIGRhdGFUeXBlMSBtZW1iZXIxOwogICAgZGF0YVR5cGUyIG1lbWJlcjI7CiAgICAvLyBtb3JlIG1lbWJlcnMKfTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>union UnionName {
    dataType1 member1;
    dataType2 member2;
    // more members
};</pre></div><div class='content'></div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+Cgp1bmlvbiBEYXRhIHsKICAgIGludCBpOwogICAgZmxvYXQgZjsKICAgIGNoYXIgc3RyWzIwXTsKfTsKCmludCBtYWluKCkgewogICAgdW5pb24gRGF0YSBkYXRhOwoKICAgIGRhdGEuaSA9IDEwOwogICAgcHJpbnRmKCJkYXRhLmk6ICVkXG4iLCBkYXRhLmkpOwoKICAgIGRhdGEuZiA9IDIyMC41OwogICAgcHJpbnRmKCJkYXRhLmY6ICVmXG4iLCBkYXRhLmYpOwoKICAgIHN0cmNweShkYXRhLnN0ciwgIkMgUHJvZ3JhbW1pbmciKTsKICAgIHByaW50ZigiZGF0YS5zdHI6ICVzXG4iLCBkYXRhLnN0cik7CgogICAgcmV0dXJuIDA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

union Data {
    int i;
    float f;
    char str[20];
};

int main() {
    union Data data;

    data.i = 10;
    printf(&quot;data.i: %d\n&quot;, data.i);

    data.f = 220.5;
    printf(&quot;data.f: %f\n&quot;, data.f);

    strcpy(data.str, &quot;C Programming&quot;);
    printf(&quot;data.str: %s\n&quot;, data.str);

    return 0;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Memory Overlap</strong>: When <code>data.i</code> is set to 10, it occupies the shared memory. When <code>data.f</code> is set to 220.5, it overwrites the memory used by <code>data.i</code>. Finally, when <code>data.str</code> is set to &quot;C Programming&quot;, it overwrites the memory used by both <code>data.i</code> and <code>data.f</code>.</li>
<li><strong>Output</strong>: Only the last assigned value is valid. Accessing other members after setting a new value may lead to unexpected results.</li>
</ul>
</div><h1>Practical Use Cases</h1>
<div class='content'><p>Unions are particularly useful in scenarios where you need to work with different data types but only one type is used at any given time.</p>
</div><h2>Example: Handling Different Data Types</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CgplbnVtIERhdGFUeXBlIHsgSU5ULCBGTE9BVCwgU1RSSU5HIH07CgpzdHJ1Y3QgRGF0YSB7CiAgICBlbnVtIERhdGFUeXBlIHR5cGU7CiAgICB1bmlvbiB7CiAgICAgICAgaW50IGk7CiAgICAgICAgZmxvYXQgZjsKICAgICAgICBjaGFyIHN0clsyMF07CiAgICB9IHZhbHVlOwp9OwoKdm9pZCBwcmludERhdGEoc3RydWN0IERhdGEgZGF0YSkgewogICAgc3dpdGNoIChkYXRhLnR5cGUpIHsKICAgICAgICBjYXNlIElOVDoKICAgICAgICAgICAgcHJpbnRmKCJJbnRlZ2VyOiAlZFxuIiwgZGF0YS52YWx1ZS5pKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBGTE9BVDoKICAgICAgICAgICAgcHJpbnRmKCJGbG9hdDogJWZcbiIsIGRhdGEudmFsdWUuZik7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgU1RSSU5HOgogICAgICAgICAgICBwcmludGYoIlN0cmluZzogJXNcbiIsIGRhdGEudmFsdWUuc3RyKTsKICAgICAgICAgICAgYnJlYWs7CiAgICB9Cn0KCmludCBtYWluKCkgewogICAgc3RydWN0IERhdGEgZGF0YTE7CiAgICBkYXRhMS50eXBlID0gSU5UOwogICAgZGF0YTEudmFsdWUuaSA9IDEwOwogICAgcHJpbnREYXRhKGRhdGExKTsKCiAgICBzdHJ1Y3QgRGF0YSBkYXRhMjsKICAgIGRhdGEyLnR5cGUgPSBGTE9BVDsKICAgIGRhdGEyLnZhbHVlLmYgPSAyMjAuNTsKICAgIHByaW50RGF0YShkYXRhMik7CgogICAgc3RydWN0IERhdGEgZGF0YTM7CiAgICBkYXRhMy50eXBlID0gU1RSSU5HOwogICAgc3RyY3B5KGRhdGEzLnZhbHVlLnN0ciwgIkMgUHJvZ3JhbW1pbmciKTsKICAgIHByaW50RGF0YShkYXRhMyk7CgogICAgcmV0dXJuIDA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

enum DataType { INT, FLOAT, STRING };

struct Data {
    enum DataType type;
    union {
        int i;
        float f;
        char str[20];
    } value;
};

void printData(struct Data data) {
    switch (data.type) {
        case INT:
            printf(&quot;Integer: %d\n&quot;, data.value.i);
            break;
        case FLOAT:
            printf(&quot;Float: %f\n&quot;, data.value.f);
            break;
        case STRING:
            printf(&quot;String: %s\n&quot;, data.value.str);
            break;
    }
}

int main() {
    struct Data data1;
    data1.type = INT;
    data1.value.i = 10;
    printData(data1);

    struct Data data2;
    data2.type = FLOAT;
    data2.value.f = 220.5;
    printData(data2);

    struct Data data3;
    data3.type = STRING;
    strcpy(data3.value.str, &quot;C Programming&quot;);
    printData(data3);

    return 0;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Enum for Type</strong>: An <code>enum</code> is used to keep track of the type of data currently stored in the union.</li>
<li><strong>Switch Statement</strong>: The <code>printData</code> function uses a switch statement to print the correct data type based on the <code>type</code> field.</li>
</ul>
</div><h1>Advantages and Disadvantages</h1>
<h2>Advantages</h2>
<div class='content'><ul>
<li><strong>Memory Efficiency</strong>: Unions save memory by sharing the same space for different members.</li>
<li><strong>Flexibility</strong>: They provide a way to handle different data types in a single variable.</li>
</ul>
</div><h2>Disadvantages</h2>
<div class='content'><ul>
<li><strong>Complexity</strong>: Managing unions can be complex, especially when keeping track of the currently active member.</li>
<li><strong>Data Corruption</strong>: Incorrectly accessing a member can lead to data corruption and undefined behavior.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Unions in C are a powerful feature that allows efficient memory usage by sharing the same memory space among different data types. They are particularly useful in scenarios where only one of several data types is needed at a time. However, they require careful management to avoid data corruption and ensure correct program behavior. Understanding unions and their proper use is essential for advanced C programming and can lead to more efficient and flexible code.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='nested-structures'>&#x25C4;Nested Structures</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Unions in C</a>
	</div>
	<div class='col-4 text-end'>
					<a href='bit-fields'>Bit Fields &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
