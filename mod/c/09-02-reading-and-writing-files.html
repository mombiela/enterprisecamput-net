<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading and Writing Files</title>

    <link rel="alternate" href="https://campusempresa.com/mod/c/09-02-reading-and-writing-files" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/c/09-02-reading-and-writing-files" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/c/09-02-reading-and-writing-files" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/c/09-02-reading-and-writing-files" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/c/09-02-reading-and-writing-files" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='09-01-introduction-to-file-handling' title="Introduction to File Handling">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Reading and Writing Files</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='09-03-file-positioning' title="File Positioning">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to handle file input and output (I/O) in C. File handling is a crucial part of many applications, allowing programs to read from and write to files, which is essential for data persistence.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>File Pointers</strong>: Used to keep track of the current position in the file.</li>
<li><strong>File Modes</strong>: Different modes for opening files (e.g., read, write, append).</li>
<li><strong>Standard Library Functions</strong>: Functions provided by the C standard library for file operations.</li>
</ol>
</div><h1><p>File Pointers</p>
</h1>
<div class='content'><p>A file pointer is a pointer of type <code>FILE</code> that is used to keep track of the current position in the file. It is declared as follows:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RklMRSAqZmlsZVBvaW50ZXI7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>FILE *filePointer;</pre></div><div class='content'></div><h1><p>File Modes</p>
</h1>
<div class='content'><p>When opening a file, you need to specify the mode in which the file should be opened. The common modes are:</p>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>&quot;r&quot;</td>
<td>Open for reading. The file must exist.</td>
</tr>
<tr>
<td>&quot;w&quot;</td>
<td>Open for writing. Creates a new file if it doesn't exist or truncates the file if it does.</td>
</tr>
<tr>
<td>&quot;a&quot;</td>
<td>Open for appending. Data is added to the end of the file.</td>
</tr>
<tr>
<td>&quot;r+&quot;</td>
<td>Open for reading and writing. The file must exist.</td>
</tr>
<tr>
<td>&quot;w+&quot;</td>
<td>Open for reading and writing. Creates a new file if it doesn't exist or truncates the file if it does.</td>
</tr>
<tr>
<td>&quot;a+&quot;</td>
<td>Open for reading and appending. Data is added to the end of the file.</td>
</tr>
</tbody>
</table>
</div><h1><p>Opening a File</p>
</h1>
<div class='content'><p>To open a file, use the <code>fopen</code> function, which returns a file pointer:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RklMRSAqZmlsZVBvaW50ZXIgPSBmb3BlbigiZXhhbXBsZS50eHQiLCAiciIpOwppZiAoZmlsZVBvaW50ZXIgPT0gTlVMTCkgewogICAgcHJpbnRmKCJFcnJvciBvcGVuaW5nIGZpbGUuXG4iKTsKICAgIHJldHVybiAxOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>FILE *filePointer = fopen(&quot;example.txt&quot;, &quot;r&quot;);
if (filePointer == NULL) {
    printf(&quot;Error opening file.\n&quot;);
    return 1;
}</pre></div><div class='content'></div><h1><p>Reading from a File</p>
</h1>
<div class='content'><p>To read from a file, you can use functions like <code>fgetc</code>, <code>fgets</code>, or <code>fread</code>.</p>
</div><h2><p>Example: Reading a File Character by Character</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RklMRSAqZmlsZVBvaW50ZXIgPSBmb3BlbigiZXhhbXBsZS50eHQiLCAiciIpOwppZiAoZmlsZVBvaW50ZXIgPT0gTlVMTCkgewogICAgcHJpbnRmKCJFcnJvciBvcGVuaW5nIGZpbGUuXG4iKTsKICAgIHJldHVybiAxOwp9CgpjaGFyIGNoOwp3aGlsZSAoKGNoID0gZmdldGMoZmlsZVBvaW50ZXIpKSAhPSBFT0YpIHsKICAgIHB1dGNoYXIoY2gpOwp9CgpmY2xvc2UoZmlsZVBvaW50ZXIpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>FILE *filePointer = fopen(&quot;example.txt&quot;, &quot;r&quot;);
if (filePointer == NULL) {
    printf(&quot;Error opening file.\n&quot;);
    return 1;
}

char ch;
while ((ch = fgetc(filePointer)) != EOF) {
    putchar(ch);
}

fclose(filePointer);</pre></div><div class='content'></div><h2><p>Example: Reading a File Line by Line</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RklMRSAqZmlsZVBvaW50ZXIgPSBmb3BlbigiZXhhbXBsZS50eHQiLCAiciIpOwppZiAoZmlsZVBvaW50ZXIgPT0gTlVMTCkgewogICAgcHJpbnRmKCJFcnJvciBvcGVuaW5nIGZpbGUuXG4iKTsKICAgIHJldHVybiAxOwp9CgpjaGFyIGJ1ZmZlclsyNTZdOwp3aGlsZSAoZmdldHMoYnVmZmVyLCBzaXplb2YoYnVmZmVyKSwgZmlsZVBvaW50ZXIpICE9IE5VTEwpIHsKICAgIHByaW50ZigiJXMiLCBidWZmZXIpOwp9CgpmY2xvc2UoZmlsZVBvaW50ZXIpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>FILE *filePointer = fopen(&quot;example.txt&quot;, &quot;r&quot;);
if (filePointer == NULL) {
    printf(&quot;Error opening file.\n&quot;);
    return 1;
}

char buffer[256];
while (fgets(buffer, sizeof(buffer), filePointer) != NULL) {
    printf(&quot;%s&quot;, buffer);
}

fclose(filePointer);</pre></div><div class='content'></div><h1><p>Writing to a File</p>
</h1>
<div class='content'><p>To write to a file, you can use functions like <code>fputc</code>, <code>fputs</code>, or <code>fwrite</code>.</p>
</div><h2><p>Example: Writing to a File Character by Character</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RklMRSAqZmlsZVBvaW50ZXIgPSBmb3BlbigiZXhhbXBsZS50eHQiLCAidyIpOwppZiAoZmlsZVBvaW50ZXIgPT0gTlVMTCkgewogICAgcHJpbnRmKCJFcnJvciBvcGVuaW5nIGZpbGUuXG4iKTsKICAgIHJldHVybiAxOwp9Cgpjb25zdCBjaGFyICp0ZXh0ID0gIkhlbGxvLCBXb3JsZCEiOwpmb3IgKGludCBpID0gMDsgdGV4dFtpXSAhPSAnXDAnOyBpKyspIHsKICAgIGZwdXRjKHRleHRbaV0sIGZpbGVQb2ludGVyKTsKfQoKZmNsb3NlKGZpbGVQb2ludGVyKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>FILE *filePointer = fopen(&quot;example.txt&quot;, &quot;w&quot;);
if (filePointer == NULL) {
    printf(&quot;Error opening file.\n&quot;);
    return 1;
}

const char *text = &quot;Hello, World!&quot;;
for (int i = 0; text[i] != '\0'; i++) {
    fputc(text[i], filePointer);
}

fclose(filePointer);</pre></div><div class='content'></div><h2><p>Example: Writing a String to a File</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RklMRSAqZmlsZVBvaW50ZXIgPSBmb3BlbigiZXhhbXBsZS50eHQiLCAidyIpOwppZiAoZmlsZVBvaW50ZXIgPT0gTlVMTCkgewogICAgcHJpbnRmKCJFcnJvciBvcGVuaW5nIGZpbGUuXG4iKTsKICAgIHJldHVybiAxOwp9Cgpjb25zdCBjaGFyICp0ZXh0ID0gIkhlbGxvLCBXb3JsZCEiOwpmcHV0cyh0ZXh0LCBmaWxlUG9pbnRlcik7CgpmY2xvc2UoZmlsZVBvaW50ZXIpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>FILE *filePointer = fopen(&quot;example.txt&quot;, &quot;w&quot;);
if (filePointer == NULL) {
    printf(&quot;Error opening file.\n&quot;);
    return 1;
}

const char *text = &quot;Hello, World!&quot;;
fputs(text, filePointer);

fclose(filePointer);</pre></div><div class='content'></div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise: Copying a File</p>
</h2>
<div class='content'><p>Write a program that copies the contents of one file to another.</p>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CgppbnQgbWFpbigpIHsKICAgIEZJTEUgKnNvdXJjZUZpbGUgPSBmb3Blbigic291cmNlLnR4dCIsICJyIik7CiAgICBpZiAoc291cmNlRmlsZSA9PSBOVUxMKSB7CiAgICAgICAgcHJpbnRmKCJFcnJvciBvcGVuaW5nIHNvdXJjZSBmaWxlLlxuIik7CiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgRklMRSAqZGVzdGluYXRpb25GaWxlID0gZm9wZW4oImRlc3RpbmF0aW9uLnR4dCIsICJ3Iik7CiAgICBpZiAoZGVzdGluYXRpb25GaWxlID09IE5VTEwpIHsKICAgICAgICBwcmludGYoIkVycm9yIG9wZW5pbmcgZGVzdGluYXRpb24gZmlsZS5cbiIpOwogICAgICAgIGZjbG9zZShzb3VyY2VGaWxlKTsKICAgICAgICByZXR1cm4gMTsKICAgIH0KCiAgICBjaGFyIGNoOwogICAgd2hpbGUgKChjaCA9IGZnZXRjKHNvdXJjZUZpbGUpKSAhPSBFT0YpIHsKICAgICAgICBmcHV0YyhjaCwgZGVzdGluYXRpb25GaWxlKTsKICAgIH0KCiAgICBmY2xvc2Uoc291cmNlRmlsZSk7CiAgICBmY2xvc2UoZGVzdGluYXRpb25GaWxlKTsKCiAgICBwcmludGYoIkZpbGUgY29waWVkIHN1Y2Nlc3NmdWxseS5cbiIpOwogICAgcmV0dXJuIDA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

int main() {
    FILE *sourceFile = fopen(&quot;source.txt&quot;, &quot;r&quot;);
    if (sourceFile == NULL) {
        printf(&quot;Error opening source file.\n&quot;);
        return 1;
    }

    FILE *destinationFile = fopen(&quot;destination.txt&quot;, &quot;w&quot;);
    if (destinationFile == NULL) {
        printf(&quot;Error opening destination file.\n&quot;);
        fclose(sourceFile);
        return 1;
    }

    char ch;
    while ((ch = fgetc(sourceFile)) != EOF) {
        fputc(ch, destinationFile);
    }

    fclose(sourceFile);
    fclose(destinationFile);

    printf(&quot;File copied successfully.\n&quot;);
    return 0;
}</pre></div><div class='content'></div><h2><p>Common Mistakes and Tips</p>
</h2>
<div class='content'><ul>
<li><strong>Forgetting to Close Files</strong>: Always close files using <code>fclose</code> to free up resources.</li>
<li><strong>Checking for NULL</strong>: Always check if the file pointer is <code>NULL</code> after attempting to open a file.</li>
<li><strong>Buffer Sizes</strong>: Ensure buffer sizes are adequate to prevent overflow when reading lines.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the basics of reading from and writing to files in C. We learned about file pointers, file modes, and the standard library functions used for file I/O. We also provided practical examples and an exercise to reinforce the concepts. In the next section, we will delve into file positioning and how to handle errors in file operations.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='09-01-introduction-to-file-handling' title="Introduction to File Handling">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='09-03-file-positioning' title="File Positioning">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
