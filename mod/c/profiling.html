<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profiling in C</title>

    <link rel="alternate" href="https://campusempresa.com/mod/c/profiling" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/c/profiling" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/c/profiling" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/c/profiling" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/c/profiling" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='code-optimization'>&#x25C4;Code Optimization</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Profiling in C</a>
	</div>
	<div class='col-4 text-end'>
					<a href='standard-input-and-output'>Standard Input and Output &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Profiling is an essential technique in software development that helps identify performance bottlenecks in your code. By understanding where your program spends most of its time, you can make informed decisions on where to optimize for better performance.</p>
</div><h1>What is Profiling?</h1>
<div class='content'><p>Profiling is the process of measuring the space (memory) and time complexity of a program. It helps in identifying the parts of the program that are consuming the most resources.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Performance Bottlenecks</strong>: Sections of code that significantly slow down the program.</li>
<li><strong>Hot Spots</strong>: Frequently executed parts of the code that consume a lot of CPU time.</li>
<li><strong>Call Graph</strong>: A visual representation of function calls in the program.</li>
<li><strong>Instrumentation</strong>: Adding code to measure performance metrics.</li>
</ul>
</div><h1>Why Profiling is Important</h1>
<div class='content'><ul>
<li><strong>Optimization</strong>: Helps in optimizing the code by focusing on the most resource-intensive parts.</li>
<li><strong>Efficiency</strong>: Improves the overall efficiency of the program.</li>
<li><strong>Resource Management</strong>: Better management of CPU and memory resources.</li>
</ul>
</div><h1>Tools for Profiling in C</h1>
<div class='content'><p>Several tools can be used for profiling C programs:</p>
<ul>
<li><strong>gprof</strong>: A GNU profiler that helps in analyzing program performance.</li>
<li><strong>Valgrind</strong>: A tool for memory debugging, memory leak detection, and profiling.</li>
<li><strong>perf</strong>: A performance analyzing tool in Linux.</li>
</ul>
</div><h1>Using gprof for Profiling</h1>
<div class='content'></div><h2>Installation</h2>
<div class='content'><p>To use <code>gprof</code>, you need to have it installed on your system. On most Linux distributions, you can install it using:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBhcHQtZ2V0IGluc3RhbGwgZ3Byb2Y="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo apt-get install gprof</pre></div><div class='content'></div><h2>Compiling with Profiling Information</h2>
<div class='content'><p>To profile a C program using <code>gprof</code>, you need to compile it with the <code>-pg</code> flag:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2NjIC1wZyAtbyBteV9wcm9ncmFtIG15X3Byb2dyYW0uYw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcc -pg -o my_program my_program.c</pre></div><div class='content'></div><h2>Running the Program</h2>
<div class='content'><p>Run your compiled program as usual:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Li9teV9wcm9ncmFt"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>./my_program</pre></div><div class='content'><p>This will generate a file named <code>gmon.out</code> in the current directory, which contains the profiling data.</p>
</div><h2>Generating the Profiling Report</h2>
<div class='content'><p>Use <code>gprof</code> to analyze the <code>gmon.out</code> file and generate a human-readable report:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z3Byb2YgbXlfcHJvZ3JhbSBnbW9uLm91dCA+IGFuYWx5c2lzLnR4dA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gprof my_program gmon.out &gt; analysis.txt</pre></div><div class='content'></div><h2>Understanding the Report</h2>
<div class='content'><p>The report generated by <code>gprof</code> includes:</p>
<ul>
<li><strong>Flat Profile</strong>: Shows the total time spent in each function.</li>
<li><strong>Call Graph</strong>: Displays the call hierarchy and the time spent in each function.</li>
</ul>
</div><h2>Example</h2>
<div class='content'><p>Consider the following simple C program:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+Cgp2b2lkIGZ1bmN0aW9uMSgpIHsKICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMTAwMDAwMDsgaSsrKTsKfQoKdm9pZCBmdW5jdGlvbjIoKSB7CiAgICBmb3IgKGludCBpID0gMDsgaSA8IDIwMDAwMDA7IGkrKyk7Cn0KCmludCBtYWluKCkgewogICAgZnVuY3Rpb24xKCk7CiAgICBmdW5jdGlvbjIoKTsKICAgIHJldHVybiAwOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

void function1() {
    for (int i = 0; i &lt; 1000000; i++);
}

void function2() {
    for (int i = 0; i &lt; 2000000; i++);
}

int main() {
    function1();
    function2();
    return 0;
}</pre></div><div class='content'><p>Compile and profile this program:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2NjIC1wZyAtbyBteV9wcm9ncmFtIG15X3Byb2dyYW0uYwouL215X3Byb2dyYW0KZ3Byb2YgbXlfcHJvZ3JhbSBnbW9uLm91dCA+IGFuYWx5c2lzLnR4dA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcc -pg -o my_program my_program.c
./my_program
gprof my_program gmon.out &gt; analysis.txt</pre></div><div class='content'><p>The <code>analysis.txt</code> file will show you how much time was spent in <code>function1</code> and <code>function2</code>.</p>
</div><h1>Using Valgrind for Profiling</h1>
<div class='content'><p>Valgrind is another powerful tool that can be used for profiling, especially for memory-related issues.</p>
</div><h2>Installation</h2>
<div class='content'><p>Install Valgrind using:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBhcHQtZ2V0IGluc3RhbGwgdmFsZ3JpbmQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo apt-get install valgrind</pre></div><div class='content'></div><h2>Running Valgrind</h2>
<div class='content'><p>Run your program with Valgrind to check for memory leaks and profiling:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFsZ3JpbmQgLS10b29sPWNhbGxncmluZCAuL215X3Byb2dyYW0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>valgrind --tool=callgrind ./my_program</pre></div><div class='content'><p>This will generate a file named <code>callgrind.out.&lt;pid&gt;</code>.</p>
</div><h2>Analyzing the Output</h2>
<div class='content'><p>You can use <code>kcachegrind</code> to visualize the output:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBhcHQtZ2V0IGluc3RhbGwga2NhY2hlZ3JpbmQKa2NhY2hlZ3JpbmQgY2FsbGdyaW5kLm91dC48cGlkPg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo apt-get install kcachegrind
kcachegrind callgrind.out.&lt;pid&gt;</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>Profiling is a crucial step in optimizing C programs. By using tools like <code>gprof</code> and <code>Valgrind</code>, you can identify performance bottlenecks and memory issues. Profiling helps in making your programs more efficient and resource-friendly. Always profile your code before and after making optimizations to ensure that your changes have the desired effect.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='code-optimization'>&#x25C4;Code Optimization</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Profiling in C</a>
	</div>
	<div class='col-4 text-end'>
					<a href='standard-input-and-output'>Standard Input and Output &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
