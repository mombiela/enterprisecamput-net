<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatic Reference Counting (ARC)</title>

    <link rel="alternate" href="https://campusempresa.com/mod/objective_c/automatic-reference-counting-arc" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/objective_c/automatic-reference-counting-arc" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/objective_c/automatic-reference-counting-arc" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/objective_c/automatic-reference-counting-arc" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/objective_c/automatic-reference-counting-arc" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='introduction-to-memory-management'>&#x25C4;Introduction to Memory Management</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Automatic Reference Counting (ARC)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='manual-retain-release'>Manual Retain-Release &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Automatic Reference Counting (ARC) is a memory management feature in Objective-C that helps developers manage the lifetimes of objects. ARC automatically handles the reference counting of objects, which helps prevent memory leaks and ensures that objects are deallocated when they are no longer needed.</p>
</div><h1>Introduction to ARC</h1>
<div class='content'><ul>
<li>
<p><strong>What is ARC?</strong></p>
<ul>
<li>ARC is a compile-time feature that automatically inserts retain and release calls to manage the memory of Objective-C objects.</li>
<li>It simplifies memory management by reducing the need for manual reference counting.</li>
</ul>
</li>
<li>
<p><strong>Why use ARC?</strong></p>
<ul>
<li>Reduces the risk of memory leaks and dangling pointers.</li>
<li>Simplifies code by removing the need for explicit retain, release, and autorelease calls.</li>
<li>Improves code readability and maintainability.</li>
</ul>
</li>
</ul>
</div><h1>How ARC Works</h1>
<div class='content'><ul>
<li>
<p><strong>Reference Counting Basics</strong></p>
<ul>
<li>Each object has a reference count that tracks how many references point to it.</li>
<li>When an object's reference count drops to zero, the object is deallocated.</li>
</ul>
</li>
<li>
<p><strong>ARC in Action</strong></p>
<ul>
<li>ARC automatically inserts retain and release calls at appropriate places in the code.</li>
<li>Developers no longer need to manually manage the reference count.</li>
</ul>
</li>
</ul>
</div><h2>Example: Basic ARC Usage</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2ltcG9ydCA8Rm91bmRhdGlvbi9Gb3VuZGF0aW9uLmg+CgpAaW50ZXJmYWNlIFBlcnNvbiA6IE5TT2JqZWN0CkBwcm9wZXJ0eSAobm9uYXRvbWljLCBzdHJvbmcpIE5TU3RyaW5nICpuYW1lOwpAZW5kCgpAaW1wbGVtZW50YXRpb24gUGVyc29uCkBlbmQKCmludCBtYWluKGludCBhcmdjLCBjb25zdCBjaGFyICogYXJndltdKSB7CiAgICBAYXV0b3JlbGVhc2Vwb29sIHsKICAgICAgICBQZXJzb24gKnBlcnNvbiA9IFtbUGVyc29uIGFsbG9jXSBpbml0XTsKICAgICAgICBwZXJzb24ubmFtZSA9IEAiSm9obiBEb2UiOwogICAgICAgIE5TTG9nKEAiUGVyc29uJ3MgbmFtZTogJUAiLCBwZXJzb24ubmFtZSk7CiAgICB9CiAgICByZXR1cm4gMDsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#import &lt;Foundation/Foundation.h&gt;

@interface Person : NSObject
@property (nonatomic, strong) NSString *name;
@end

@implementation Person
@end

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        Person *person = [[Person alloc] init];
        person.name = @&quot;John Doe&quot;;
        NSLog(@&quot;Person's name: %@&quot;, person.name);
    }
    return 0;
}</pre></div><div class='content'><ul>
<li><strong>Explanation:</strong>
<ul>
<li>The <code>@autoreleasepool</code> block ensures that temporary objects are released properly.</li>
<li>The <code>strong</code> property attribute indicates that the property retains the assigned object.</li>
<li>ARC automatically manages the memory of the <code>person</code> object.</li>
</ul>
</li>
</ul>
</div><h1>Property Attributes and ARC</h1>
<div class='content'><ul>
<li>
<p><strong>Strong</strong></p>
<ul>
<li>Retains the object and increases its reference count.</li>
<li>Commonly used for properties that need to maintain a strong reference to an object.</li>
</ul>
</li>
<li>
<p><strong>Weak</strong></p>
<ul>
<li>Does not retain the object and does not increase its reference count.</li>
<li>Automatically sets the property to <code>nil</code> when the referenced object is deallocated.</li>
<li>Useful for avoiding retain cycles, especially in delegate relationships.</li>
</ul>
</li>
<li>
<p><strong>Copy</strong></p>
<ul>
<li>Creates a copy of the assigned object.</li>
<li>Ensures that the property has its own copy, independent of the original object.</li>
</ul>
</li>
<li>
<p><strong>Assign</strong></p>
<ul>
<li>Directly assigns the value without retaining it.</li>
<li>Typically used for primitive data types (e.g., <code>int</code>, <code>float</code>).</li>
</ul>
</li>
</ul>
</div><h2>Example: Property Attributes</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBDYXIgOiBOU09iamVjdApAcHJvcGVydHkgKG5vbmF0b21pYywgc3Ryb25nKSBOU1N0cmluZyAqbW9kZWw7CkBwcm9wZXJ0eSAobm9uYXRvbWljLCB3ZWFrKSBpZCBkZWxlZ2F0ZTsKQHByb3BlcnR5IChub25hdG9taWMsIGNvcHkpIE5TU3RyaW5nICpsaWNlbnNlUGxhdGU7CkBwcm9wZXJ0eSAobm9uYXRvbWljLCBhc3NpZ24pIGludCB5ZWFyOwpAZW5kCgpAaW1wbGVtZW50YXRpb24gQ2FyCkBlbmQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface Car : NSObject
@property (nonatomic, strong) NSString *model;
@property (nonatomic, weak) id delegate;
@property (nonatomic, copy) NSString *licensePlate;
@property (nonatomic, assign) int year;
@end

@implementation Car
@end</pre></div><div class='content'><ul>
<li><strong>Explanation:</strong>
<ul>
<li><code>strong</code> for <code>model</code> ensures the car object retains the model string.</li>
<li><code>weak</code> for <code>delegate</code> avoids retain cycles.</li>
<li><code>copy</code> for <code>licensePlate</code> ensures the car object has its own copy of the license plate string.</li>
<li><code>assign</code> for <code>year</code> is used for the primitive data type <code>int</code>.</li>
</ul>
</li>
</ul>
</div><h1>Retain Cycles and Weak References</h1>
<div class='content'><ul>
<li>
<p><strong>Retain Cycles</strong></p>
<ul>
<li>Occur when two or more objects hold strong references to each other, preventing them from being deallocated.</li>
<li>Can lead to memory leaks.</li>
</ul>
</li>
<li>
<p><strong>Avoiding Retain Cycles</strong></p>
<ul>
<li>Use <code>weak</code> references to break retain cycles.</li>
<li>Commonly used in delegate patterns and parent-child relationships.</li>
</ul>
</li>
</ul>
</div><h2>Example: Avoiding Retain Cycles</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBQYXJlbnQgOiBOU09iamVjdApAcHJvcGVydHkgKG5vbmF0b21pYywgc3Ryb25nKSBDaGlsZCAqY2hpbGQ7CkBlbmQKCkBpbnRlcmZhY2UgQ2hpbGQgOiBOU09iamVjdApAcHJvcGVydHkgKG5vbmF0b21pYywgd2VhaykgUGFyZW50ICpwYXJlbnQ7CkBlbmQKCkBpbXBsZW1lbnRhdGlvbiBQYXJlbnQKQGVuZAoKQGltcGxlbWVudGF0aW9uIENoaWxkCkBlbmQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface Parent : NSObject
@property (nonatomic, strong) Child *child;
@end

@interface Child : NSObject
@property (nonatomic, weak) Parent *parent;
@end

@implementation Parent
@end

@implementation Child
@end</pre></div><div class='content'><ul>
<li><strong>Explanation:</strong>
<ul>
<li>The <code>Parent</code> object holds a strong reference to the <code>Child</code> object.</li>
<li>The <code>Child</code> object holds a weak reference to the <code>Parent</code> object, preventing a retain cycle.</li>
</ul>
</li>
</ul>
</div><h1>Advanced ARC Features</h1>
<div class='content'><ul>
<li>
<p><strong>Zeroing Weak References</strong></p>
<ul>
<li>Automatically sets weak references to <code>nil</code> when the referenced object is deallocated.</li>
<li>Prevents dangling pointers.</li>
</ul>
</li>
<li>
<p><strong>Autorelease Pools</strong></p>
<ul>
<li>Used to manage the lifetimes of temporary objects.</li>
<li>ARC automatically inserts autorelease pools in appropriate places, but developers can also create their own.</li>
</ul>
</li>
</ul>
</div><h2>Example: Custom Autorelease Pool</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW50IG1haW4oaW50IGFyZ2MsIGNvbnN0IGNoYXIgKiBhcmd2W10pIHsKICAgIEBhdXRvcmVsZWFzZXBvb2wgewogICAgICAgIC8vIENvZGUgdGhhdCBjcmVhdGVzIHRlbXBvcmFyeSBvYmplY3RzCiAgICAgICAgTlNTdHJpbmcgKnRlbXBTdHJpbmcgPSBbTlNTdHJpbmcgc3RyaW5nV2l0aEZvcm1hdDpAIlRlbXBvcmFyeSBTdHJpbmciXTsKICAgICAgICBOU0xvZyhAIiVAIiwgdGVtcFN0cmluZyk7CiAgICB9CiAgICAvLyB0ZW1wU3RyaW5nIGlzIHJlbGVhc2VkIGhlcmUKICAgIHJldHVybiAwOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>int main(int argc, const char * argv[]) {
    @autoreleasepool {
        // Code that creates temporary objects
        NSString *tempString = [NSString stringWithFormat:@&quot;Temporary String&quot;];
        NSLog(@&quot;%@&quot;, tempString);
    }
    // tempString is released here
    return 0;
}</pre></div><div class='content'><ul>
<li><strong>Explanation:</strong>
<ul>
<li>The <code>@autoreleasepool</code> block ensures that temporary objects like <code>tempString</code> are released when the block exits.</li>
</ul>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Automatic Reference Counting (ARC) is a powerful feature in Objective-C that simplifies memory management by automatically handling reference counting. By understanding how ARC works and using property attributes effectively, developers can write safer and more maintainable code. Avoiding retain cycles and using weak references appropriately are crucial for preventing memory leaks. With ARC, developers can focus more on building features and less on managing memory manually.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='introduction-to-memory-management'>&#x25C4;Introduction to Memory Management</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Automatic Reference Counting (ARC)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='manual-retain-release'>Manual Retain-Release &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
