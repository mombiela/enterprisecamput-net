<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocols and Delegates</title>

    <link rel="alternate" href="https://campusempresa.com/mod/objective_c/06-01-protocols-and-delegates" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/objective_c/06-01-protocols-and-delegates" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/objective_c/06-01-protocols-and-delegates" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/objective_c/06-01-protocols-and-delegates" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/objective_c/06-01-protocols-and-delegates" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Programming Languages</a>
				 					<a href="/categ/frameworks">Frameworks and Libraries</a>
				 					<a href="/categ/tech-tools">Technical Tools</a>
				 					<a href="/categ/foundations">Theoretical Foundations</a>
				 					<a href="/categ/soft-skills">Social Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-04-memory-management-best-practices' title="Memory Management Best Practices">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Protocols and Delegates</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-02-categories-and-extensions' title="Categories and Extensions">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introduction</p>
</h1>
<div class='content'><p>In Objective-C, protocols and delegates are fundamental concepts that enable communication between objects. They are essential for creating flexible and reusable code, especially in the context of event-driven programming and user interface development.</p>
</div><h2><p>Key Concepts</p>
</h2>
<div class='content'><ol>
<li><strong>Protocols</strong>: Define a list of methods that a class can implement. They are similar to interfaces in other programming languages.</li>
<li><strong>Delegates</strong>: A design pattern where one object acts on behalf of, or in coordination with, another object.</li>
</ol>
</div><h1><p>Protocols</p>
</h1>
<div class='content'></div><h2><p>Defining a Protocol</p>
</h2>
<div class='content'><p>A protocol is defined using the <code>@protocol</code> keyword. It can include both required and optional methods.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QHByb3RvY29sIE15UHJvdG9jb2wgPE5TT2JqZWN0PgpAcmVxdWlyZWQKLSAodm9pZClyZXF1aXJlZE1ldGhvZDsKCkBvcHRpb25hbAotICh2b2lkKW9wdGlvbmFsTWV0aG9kOwpAZW5k"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@protocol MyProtocol &lt;NSObject&gt;
@required
- (void)requiredMethod;

@optional
- (void)optionalMethod;
@end</pre></div><div class='content'></div><h2><p>Implementing a Protocol</p>
</h2>
<div class='content'><p>A class adopts a protocol by declaring it in the class interface and implementing the required methods.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBNeUNsYXNzIDogTlNPYmplY3QgPE15UHJvdG9jb2w+CkBlbmQKCkBpbXBsZW1lbnRhdGlvbiBNeUNsYXNzCi0gKHZvaWQpcmVxdWlyZWRNZXRob2QgewogICAgTlNMb2coQCJSZXF1aXJlZCBtZXRob2QgaW1wbGVtZW50ZWQiKTsKfQoKLSAodm9pZClvcHRpb25hbE1ldGhvZCB7CiAgICBOU0xvZyhAIk9wdGlvbmFsIG1ldGhvZCBpbXBsZW1lbnRlZCIpOwp9CkBlbmQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface MyClass : NSObject &lt;MyProtocol&gt;
@end

@implementation MyClass
- (void)requiredMethod {
    NSLog(@&quot;Required method implemented&quot;);
}

- (void)optionalMethod {
    NSLog(@&quot;Optional method implemented&quot;);
}
@end</pre></div><div class='content'></div><h2><p>Practical Example</p>
</h2>
<div class='content'><p>Let's create a simple protocol and a class that adopts it.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QHByb3RvY29sIFByaW50ZXJEZWxlZ2F0ZSA8TlNPYmplY3Q+CkByZXF1aXJlZAotICh2b2lkKXByaW50RG9jdW1lbnQ7CkBlbmQKCkBpbnRlcmZhY2UgUHJpbnRlciA6IE5TT2JqZWN0IDxQcmludGVyRGVsZWdhdGU+CkBlbmQKCkBpbXBsZW1lbnRhdGlvbiBQcmludGVyCi0gKHZvaWQpcHJpbnREb2N1bWVudCB7CiAgICBOU0xvZyhAIlByaW50aW5nIGRvY3VtZW50Li4uIik7Cn0KQGVuZAoKaW50IG1haW4oaW50IGFyZ2MsIGNvbnN0IGNoYXIgKiBhcmd2W10pIHsKICAgIEBhdXRvcmVsZWFzZXBvb2wgewogICAgICAgIFByaW50ZXIgKnByaW50ZXIgPSBbW1ByaW50ZXIgYWxsb2NdIGluaXRdOwogICAgICAgIFtwcmludGVyIHByaW50RG9jdW1lbnRdOwogICAgfQogICAgcmV0dXJuIDA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@protocol PrinterDelegate &lt;NSObject&gt;
@required
- (void)printDocument;
@end

@interface Printer : NSObject &lt;PrinterDelegate&gt;
@end

@implementation Printer
- (void)printDocument {
    NSLog(@&quot;Printing document...&quot;);
}
@end

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        Printer *printer = [[Printer alloc] init];
        [printer printDocument];
    }
    return 0;
}</pre></div><div class='content'></div><h1><p>Delegates</p>
</h1>
<div class='content'></div><h2><p>The Delegate Pattern</p>
</h2>
<div class='content'><p>The delegate pattern allows an object to communicate back to its owner in a decoupled way. This is commonly used in UIKit for handling user interactions.</p>
</div><h2><p>Setting Up a Delegate</p>
</h2>
<div class='content'><ol>
<li><strong>Define a Protocol</strong>: Define the methods that the delegate will implement.</li>
<li><strong>Declare a Delegate Property</strong>: In the class that will use the delegate, declare a property for the delegate.</li>
<li><strong>Implement the Delegate Methods</strong>: In the delegate class, implement the methods defined in the protocol.</li>
</ol>
</div><h2><p>Example: Using Delegates</p>
</h2>
<div class='content'><h4>Step 1: Define the Protocol</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QHByb3RvY29sIERvd25sb2FkRGVsZWdhdGUgPE5TT2JqZWN0PgotICh2b2lkKWRvd25sb2FkRGlkRmluaXNoOwpAZW5k"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@protocol DownloadDelegate &lt;NSObject&gt;
- (void)downloadDidFinish;
@end</pre></div><div class='content'><h4>Step 2: Declare a Delegate Property</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBEb3dubG9hZGVyIDogTlNPYmplY3QKQHByb3BlcnR5IChub25hdG9taWMsIHdlYWspIGlkPERvd25sb2FkRGVsZWdhdGU+IGRlbGVnYXRlOwotICh2b2lkKXN0YXJ0RG93bmxvYWQ7CkBlbmQKCkBpbXBsZW1lbnRhdGlvbiBEb3dubG9hZGVyCi0gKHZvaWQpc3RhcnREb3dubG9hZCB7CiAgICAvLyBTaW11bGF0ZSBhIGRvd25sb2FkIHByb2Nlc3MKICAgIE5TTG9nKEAiRG93bmxvYWRpbmcuLi4iKTsKICAgIFtOU1RocmVhZCBzbGVlcEZvclRpbWVJbnRlcnZhbDoyXTsKICAgIE5TTG9nKEAiRG93bmxvYWQgZmluaXNoZWQiKTsKICAgIAogICAgLy8gTm90aWZ5IHRoZSBkZWxlZ2F0ZQogICAgaWYgKFtzZWxmLmRlbGVnYXRlIHJlc3BvbmRzVG9TZWxlY3RvcjpAc2VsZWN0b3IoZG93bmxvYWREaWRGaW5pc2gpXSkgewogICAgICAgIFtzZWxmLmRlbGVnYXRlIGRvd25sb2FkRGlkRmluaXNoXTsKICAgIH0KfQpAZW5k"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface Downloader : NSObject
@property (nonatomic, weak) id&lt;DownloadDelegate&gt; delegate;
- (void)startDownload;
@end

@implementation Downloader
- (void)startDownload {
    // Simulate a download process
    NSLog(@&quot;Downloading...&quot;);
    [NSThread sleepForTimeInterval:2];
    NSLog(@&quot;Download finished&quot;);
    
    // Notify the delegate
    if ([self.delegate respondsToSelector:@selector(downloadDidFinish)]) {
        [self.delegate downloadDidFinish];
    }
}
@end</pre></div><div class='content'><h4>Step 3: Implement the Delegate Methods</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBWaWV3Q29udHJvbGxlciA6IFVJVmlld0NvbnRyb2xsZXIgPERvd25sb2FkRGVsZWdhdGU+CkBlbmQKCkBpbXBsZW1lbnRhdGlvbiBWaWV3Q29udHJvbGxlcgotICh2b2lkKXZpZXdEaWRMb2FkIHsKICAgIFtzdXBlciB2aWV3RGlkTG9hZF07CiAgICAKICAgIERvd25sb2FkZXIgKmRvd25sb2FkZXIgPSBbW0Rvd25sb2FkZXIgYWxsb2NdIGluaXRdOwogICAgZG93bmxvYWRlci5kZWxlZ2F0ZSA9IHNlbGY7CiAgICBbZG93bmxvYWRlciBzdGFydERvd25sb2FkXTsKfQoKLSAodm9pZClkb3dubG9hZERpZEZpbmlzaCB7CiAgICBOU0xvZyhAIkRlbGVnYXRlIHJlY2VpdmVkIGRvd25sb2FkRGlkRmluaXNoIG1lc3NhZ2UiKTsKfQpAZW5k"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface ViewController : UIViewController &lt;DownloadDelegate&gt;
@end

@implementation ViewController
- (void)viewDidLoad {
    [super viewDidLoad];
    
    Downloader *downloader = [[Downloader alloc] init];
    downloader.delegate = self;
    [downloader startDownload];
}

- (void)downloadDidFinish {
    NSLog(@&quot;Delegate received downloadDidFinish message&quot;);
}
@end</pre></div><div class='content'></div><h1><p>Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Create a Protocol and Implement It</p>
</h2>
<div class='content'><ol>
<li>Define a protocol named <code>CalculatorDelegate</code> with a required method <code>- (int)addNumber:(int)a toNumber:(int)b</code>.</li>
<li>Create a class <code>Calculator</code> that adopts this protocol and implements the method.</li>
<li>In the <code>main</code> function, create an instance of <code>Calculator</code> and call the <code>addNumber:toNumber:</code> method.</li>
</ol>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QHByb3RvY29sIENhbGN1bGF0b3JEZWxlZ2F0ZSA8TlNPYmplY3Q+CkByZXF1aXJlZAotIChpbnQpYWRkTnVtYmVyOihpbnQpYSB0b051bWJlcjooaW50KWI7CkBlbmQKCkBpbnRlcmZhY2UgQ2FsY3VsYXRvciA6IE5TT2JqZWN0IDxDYWxjdWxhdG9yRGVsZWdhdGU+CkBlbmQKCkBpbXBsZW1lbnRhdGlvbiBDYWxjdWxhdG9yCi0gKGludClhZGROdW1iZXI6KGludClhIHRvTnVtYmVyOihpbnQpYiB7CiAgICByZXR1cm4gYSArIGI7Cn0KQGVuZAoKaW50IG1haW4oaW50IGFyZ2MsIGNvbnN0IGNoYXIgKiBhcmd2W10pIHsKICAgIEBhdXRvcmVsZWFzZXBvb2wgewogICAgICAgIENhbGN1bGF0b3IgKmNhbGN1bGF0b3IgPSBbW0NhbGN1bGF0b3IgYWxsb2NdIGluaXRdOwogICAgICAgIGludCByZXN1bHQgPSBbY2FsY3VsYXRvciBhZGROdW1iZXI6NSB0b051bWJlcjozXTsKICAgICAgICBOU0xvZyhAIlJlc3VsdDogJWQiLCByZXN1bHQpOwogICAgfQogICAgcmV0dXJuIDA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@protocol CalculatorDelegate &lt;NSObject&gt;
@required
- (int)addNumber:(int)a toNumber:(int)b;
@end

@interface Calculator : NSObject &lt;CalculatorDelegate&gt;
@end

@implementation Calculator
- (int)addNumber:(int)a toNumber:(int)b {
    return a + b;
}
@end

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        Calculator *calculator = [[Calculator alloc] init];
        int result = [calculator addNumber:5 toNumber:3];
        NSLog(@&quot;Result: %d&quot;, result);
    }
    return 0;
}</pre></div><div class='content'></div><h2><p>Exercise 2: Implement a Delegate Pattern</p>
</h2>
<div class='content'><ol>
<li>Define a protocol named <code>TaskDelegate</code> with a method <code>- (void)taskDidComplete</code>.</li>
<li>Create a class <code>Task</code> with a delegate property and a method <code>- (void)performTask</code>.</li>
<li>Implement the delegate method in a class <code>TaskHandler</code> and set it as the delegate of <code>Task</code>.</li>
</ol>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QHByb3RvY29sIFRhc2tEZWxlZ2F0ZSA8TlNPYmplY3Q+Ci0gKHZvaWQpdGFza0RpZENvbXBsZXRlOwpAZW5kCgpAaW50ZXJmYWNlIFRhc2sgOiBOU09iamVjdApAcHJvcGVydHkgKG5vbmF0b21pYywgd2VhaykgaWQ8VGFza0RlbGVnYXRlPiBkZWxlZ2F0ZTsKLSAodm9pZClwZXJmb3JtVGFzazsKQGVuZAoKQGltcGxlbWVudGF0aW9uIFRhc2sKLSAodm9pZClwZXJmb3JtVGFzayB7CiAgICBOU0xvZyhAIlBlcmZvcm1pbmcgdGFzay4uLiIpOwogICAgW05TVGhyZWFkIHNsZWVwRm9yVGltZUludGVydmFsOjJdOwogICAgTlNMb2coQCJUYXNrIGNvbXBsZXRlZCIpOwogICAgCiAgICBpZiAoW3NlbGYuZGVsZWdhdGUgcmVzcG9uZHNUb1NlbGVjdG9yOkBzZWxlY3Rvcih0YXNrRGlkQ29tcGxldGUpXSkgewogICAgICAgIFtzZWxmLmRlbGVnYXRlIHRhc2tEaWRDb21wbGV0ZV07CiAgICB9Cn0KQGVuZAoKQGludGVyZmFjZSBUYXNrSGFuZGxlciA6IE5TT2JqZWN0IDxUYXNrRGVsZWdhdGU+CkBlbmQKCkBpbXBsZW1lbnRhdGlvbiBUYXNrSGFuZGxlcgotICh2b2lkKXRhc2tEaWRDb21wbGV0ZSB7CiAgICBOU0xvZyhAIkRlbGVnYXRlIHJlY2VpdmVkIHRhc2tEaWRDb21wbGV0ZSBtZXNzYWdlIik7Cn0KQGVuZAoKaW50IG1haW4oaW50IGFyZ2MsIGNvbnN0IGNoYXIgKiBhcmd2W10pIHsKICAgIEBhdXRvcmVsZWFzZXBvb2wgewogICAgICAgIFRhc2sgKnRhc2sgPSBbW1Rhc2sgYWxsb2NdIGluaXRdOwogICAgICAgIFRhc2tIYW5kbGVyICpoYW5kbGVyID0gW1tUYXNrSGFuZGxlciBhbGxvY10gaW5pdF07CiAgICAgICAgdGFzay5kZWxlZ2F0ZSA9IGhhbmRsZXI7CiAgICAgICAgW3Rhc2sgcGVyZm9ybVRhc2tdOwogICAgfQogICAgcmV0dXJuIDA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@protocol TaskDelegate &lt;NSObject&gt;
- (void)taskDidComplete;
@end

@interface Task : NSObject
@property (nonatomic, weak) id&lt;TaskDelegate&gt; delegate;
- (void)performTask;
@end

@implementation Task
- (void)performTask {
    NSLog(@&quot;Performing task...&quot;);
    [NSThread sleepForTimeInterval:2];
    NSLog(@&quot;Task completed&quot;);
    
    if ([self.delegate respondsToSelector:@selector(taskDidComplete)]) {
        [self.delegate taskDidComplete];
    }
}
@end

@interface TaskHandler : NSObject &lt;TaskDelegate&gt;
@end

@implementation TaskHandler
- (void)taskDidComplete {
    NSLog(@&quot;Delegate received taskDidComplete message&quot;);
}
@end

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        Task *task = [[Task alloc] init];
        TaskHandler *handler = [[TaskHandler alloc] init];
        task.delegate = handler;
        [task performTask];
    }
    return 0;
}</pre></div><div class='content'></div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the basics of protocols and delegates in Objective-C. We learned how to define and implement protocols, and how to use the delegate pattern to enable communication between objects. These concepts are crucial for building modular and maintainable code in Objective-C. In the next module, we will delve into more advanced topics, such as categories and extensions.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-04-memory-management-best-practices' title="Memory Management Best Practices">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-02-categories-and-extensions' title="Categories and Extensions">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
