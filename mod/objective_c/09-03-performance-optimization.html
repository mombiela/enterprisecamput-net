<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Optimization</title>

    <link rel="alternate" href="https://campusempresa.com/mod/objective_c/09-03-performance-optimization" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/objective_c/09-03-performance-optimization" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/objective_c/09-03-performance-optimization" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/objective_c/09-03-performance-optimization" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/objective_c/09-03-performance-optimization" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='09-02-unit-testing' title="Unit Testing">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Performance Optimization</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='09-04-common-errors-and-solutions' title="Common Errors and Solutions">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Performance optimization is a crucial aspect of software development, ensuring that your Objective-C applications run efficiently and smoothly. This section will cover various techniques and best practices to optimize the performance of your Objective-C code.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li>
<p><strong>Profiling and Benchmarking</strong></p>
<ul>
<li><strong>Instruments Tool</strong>: Use Xcode's Instruments tool to profile your application and identify performance bottlenecks.</li>
<li><strong>Time Profiler</strong>: Measure the time taken by different parts of your code to execute.</li>
<li><strong>Allocations Instrument</strong>: Track memory usage and identify memory leaks.</li>
</ul>
</li>
<li>
<p><strong>Efficient Memory Management</strong></p>
<ul>
<li><strong>ARC (Automatic Reference Counting)</strong>: Ensure proper use of ARC to manage memory efficiently.</li>
<li><strong>Avoid Retain Cycles</strong>: Use weak references to avoid retain cycles, especially in delegate patterns.</li>
</ul>
</li>
<li>
<p><strong>Optimizing Data Structures</strong></p>
<ul>
<li><strong>Use Appropriate Data Structures</strong>: Choose the right data structures (e.g., NSArray, NSDictionary) based on your use case.</li>
<li><strong>Immutable vs Mutable</strong>: Prefer immutable objects (e.g., NSArray vs NSMutableArray) when the data does not change.</li>
</ul>
</li>
<li>
<p><strong>Reducing Method Calls</strong></p>
<ul>
<li><strong>Inlining</strong>: Inline small methods to reduce the overhead of method calls.</li>
<li><strong>Avoiding Unnecessary Calls</strong>: Cache results of expensive operations if they are used multiple times.</li>
</ul>
</li>
<li>
<p><strong>Concurrency and Multithreading</strong></p>
<ul>
<li><strong>GCD (Grand Central Dispatch)</strong>: Use GCD to perform tasks concurrently and improve responsiveness.</li>
<li><strong>NSOperationQueue</strong>: Manage concurrent operations with NSOperationQueue for more control.</li>
</ul>
</li>
<li>
<p><strong>Optimizing Loops</strong></p>
<ul>
<li><strong>Minimize Loop Overhead</strong>: Reduce the number of iterations and avoid complex operations inside loops.</li>
<li><strong>Use Fast Enumeration</strong>: Prefer fast enumeration (for-in loops) over traditional for loops for collections.</li>
</ul>
</li>
<li>
<p><strong>Lazy Loading</strong></p>
<ul>
<li><strong>Load Data on Demand</strong>: Load resources and data only when they are needed to reduce initial load time.</li>
</ul>
</li>
<li>
<p><strong>Optimizing UI Performance</strong></p>
<ul>
<li><strong>Asynchronous Loading</strong>: Load images and data asynchronously to keep the UI responsive.</li>
<li><strong>Efficient Drawing</strong>: Minimize the number of draw calls and use efficient drawing techniques.</li>
</ul>
</li>
</ol>
</div><h1>Practical Examples</h1>
<div class='content'></div><h2>Example 1: Using Instruments to Profile Code</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSAodm9pZClwZXJmb3JtSGVhdnlUYXNrIHsKICAgIGZvciAoaW50IGkgPSAwOyBpIDwgMTAwMDAwMDsgaSsrKSB7CiAgICAgICAgLy8gU2ltdWxhdGUgYSBoZWF2eSB0YXNrCiAgICAgICAgTlNMb2coQCJJdGVyYXRpb24gJWQiLCBpKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- (void)performHeavyTask {
    for (int i = 0; i &lt; 1000000; i++) {
        // Simulate a heavy task
        NSLog(@&quot;Iteration %d&quot;, i);
    }
}</pre></div><div class='content'><p><strong>Explanation</strong>: Use the Time Profiler in Instruments to measure the time taken by <code>performHeavyTask</code> and identify any bottlenecks.</p>
</div><h2>Example 2: Avoiding Retain Cycles</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBNeUNsYXNzIDogTlNPYmplY3QKQHByb3BlcnR5IChub25hdG9taWMsIHdlYWspIGlkPE15RGVsZWdhdGU+IGRlbGVnYXRlOwpAZW5k"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface MyClass : NSObject
@property (nonatomic, weak) id&lt;MyDelegate&gt; delegate;
@end</pre></div><div class='content'><p><strong>Explanation</strong>: Use <code>weak</code> references for delegates to avoid retain cycles, which can lead to memory leaks.</p>
</div><h2>Example 3: Using GCD for Concurrency</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGlzcGF0Y2hfYXN5bmMoZGlzcGF0Y2hfZ2V0X2dsb2JhbF9xdWV1ZShESVNQQVRDSF9RVUVVRV9QUklPUklUWV9ERUZBVUxULCAwKSwgXnsKICAgIC8vIFBlcmZvcm0gYSB0aW1lLWNvbnN1bWluZyB0YXNrIGluIHRoZSBiYWNrZ3JvdW5kCiAgICBbc2VsZiBwZXJmb3JtSGVhdnlUYXNrXTsKICAgIAogICAgZGlzcGF0Y2hfYXN5bmMoZGlzcGF0Y2hfZ2V0X21haW5fcXVldWUoKSwgXnsKICAgICAgICAvLyBVcGRhdGUgdGhlIFVJIG9uIHRoZSBtYWluIHRocmVhZAogICAgICAgIFtzZWxmIHVwZGF0ZVVJXTsKICAgIH0pOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    // Perform a time-consuming task in the background
    [self performHeavyTask];
    
    dispatch_async(dispatch_get_main_queue(), ^{
        // Update the UI on the main thread
        [self updateUI];
    });
});</pre></div><div class='content'><p><strong>Explanation</strong>: Use <code>dispatch_async</code> to perform tasks in the background and update the UI on the main thread.</p>
</div><h1>Practical Exercises</h1>
<div class='content'></div><h2>Exercise 1: Optimize a Loop</h2>
<div class='content'><p><strong>Task</strong>: Optimize the following loop to improve performance.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TlNNdXRhYmxlQXJyYXkgKmFycmF5ID0gW05TTXV0YWJsZUFycmF5IGFycmF5XTsKZm9yIChpbnQgaSA9IDA7IGkgPCAxMDAwMDAwOyBpKyspIHsKICAgIFthcnJheSBhZGRPYmplY3Q6QChpKV07Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>NSMutableArray *array = [NSMutableArray array];
for (int i = 0; i &lt; 1000000; i++) {
    [array addObject:@(i)];
}</pre></div><div class='content'><p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TlNNdXRhYmxlQXJyYXkgKmFycmF5ID0gW05TTXV0YWJsZUFycmF5IGFycmF5V2l0aENhcGFjaXR5OjEwMDAwMDBdOwpmb3IgKGludCBpID0gMDsgaSA8IDEwMDAwMDA7IGkrKykgewogICAgW2FycmF5IGFkZE9iamVjdDpAKGkpXTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>NSMutableArray *array = [NSMutableArray arrayWithCapacity:1000000];
for (int i = 0; i &lt; 1000000; i++) {
    [array addObject:@(i)];
}</pre></div><div class='content'><p><strong>Explanation</strong>: Pre-allocate memory for the array to avoid resizing during the loop.</p>
</div><h2>Exercise 2: Implement Lazy Loading</h2>
<div class='content'><p><strong>Task</strong>: Implement lazy loading for an image in a view controller.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBNeVZpZXdDb250cm9sbGVyICgpCkBwcm9wZXJ0eSAobm9uYXRvbWljLCBzdHJvbmcpIFVJSW1hZ2VWaWV3ICppbWFnZVZpZXc7CkBlbmQKCkBpbXBsZW1lbnRhdGlvbiBNeVZpZXdDb250cm9sbGVyCgotICh2b2lkKXZpZXdEaWRMb2FkIHsKICAgIFtzdXBlciB2aWV3RGlkTG9hZF07CiAgICBzZWxmLmltYWdlVmlldyA9IFtbVUlJbWFnZVZpZXcgYWxsb2NdIGluaXRXaXRoRnJhbWU6c2VsZi52aWV3LmJvdW5kc107CiAgICBbc2VsZi52aWV3IGFkZFN1YnZpZXc6c2VsZi5pbWFnZVZpZXddOwp9CgotICh2b2lkKXZpZXdEaWRBcHBlYXI6KEJPT0wpYW5pbWF0ZWQgewogICAgW3N1cGVyIHZpZXdEaWRBcHBlYXI6YW5pbWF0ZWRdOwogICAgW3NlbGYgbG9hZEltYWdlXTsKfQoKLSAodm9pZClsb2FkSW1hZ2UgewogICAgZGlzcGF0Y2hfYXN5bmMoZGlzcGF0Y2hfZ2V0X2dsb2JhbF9xdWV1ZShESVNQQVRDSF9RVUVVRV9QUklPUklUWV9ERUZBVUxULCAwKSwgXnsKICAgICAgICBVSUltYWdlICppbWFnZSA9IFtVSUltYWdlIGltYWdlTmFtZWQ6QCJsYXJnZUltYWdlIl07CiAgICAgICAgZGlzcGF0Y2hfYXN5bmMoZGlzcGF0Y2hfZ2V0X21haW5fcXVldWUoKSwgXnsKICAgICAgICAgICAgc2VsZi5pbWFnZVZpZXcuaW1hZ2UgPSBpbWFnZTsKICAgICAgICB9KTsKICAgIH0pOwp9CgpAZW5k"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface MyViewController ()
@property (nonatomic, strong) UIImageView *imageView;
@end

@implementation MyViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    self.imageView = [[UIImageView alloc] initWithFrame:self.view.bounds];
    [self.view addSubview:self.imageView];
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self loadImage];
}

- (void)loadImage {
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        UIImage *image = [UIImage imageNamed:@&quot;largeImage&quot;];
        dispatch_async(dispatch_get_main_queue(), ^{
            self.imageView.image = image;
        });
    });
}

@end</pre></div><div class='content'><p><strong>Explanation</strong>: Load the image asynchronously to avoid blocking the main thread and keep the UI responsive.</p>
</div><h1>Summary</h1>
<div class='content'><p>In this section, we covered various techniques and best practices for optimizing the performance of Objective-C applications. Key concepts include profiling and benchmarking, efficient memory management, optimizing data structures, reducing method calls, using concurrency, optimizing loops, lazy loading, and improving UI performance. By applying these techniques, you can ensure that your applications run efficiently and provide a smooth user experience.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='09-02-unit-testing' title="Unit Testing">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='09-04-common-errors-and-solutions' title="Common Errors and Solutions">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
