<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strong and Weak References</title>

    <link rel="alternate" href="https://campusempresa.com/mod/objective_c/strong-and-weak-references" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/objective_c/strong-and-weak-references" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/objective_c/strong-and-weak-references" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/objective_c/strong-and-weak-references" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/objective_c/strong-and-weak-references" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='manual-retain-release'>&#x25C4;Manual Retain-Release</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Strong and Weak References</a>
	</div>
	<div class='col-4 text-end'>
					<a href='strings-and-text'>Strings and Text &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In Objective-C, memory management is crucial for creating efficient and bug-free applications. Understanding strong and weak references is essential for managing object lifecycles and avoiding memory leaks or retain cycles. This section will cover the concepts of strong and weak references, their differences, and how to use them effectively in your code.</p>
</div><h1>Strong References</h1>
<div class='content'><p>A strong reference is the default type of reference in Objective-C. When you create a strong reference to an object, it increases the object's retain count, ensuring that the object stays in memory as long as the reference exists.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Retain Count</strong>: The number of strong references to an object.</li>
<li><strong>Ownership</strong>: A strong reference implies ownership of the object, meaning the object will not be deallocated as long as there is at least one strong reference to it.</li>
</ul>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBNeUNsYXNzIDogTlNPYmplY3QKQHByb3BlcnR5IChzdHJvbmcsIG5vbmF0b21pYykgTlNTdHJpbmcgKm5hbWU7CkBlbmQKCkBpbXBsZW1lbnRhdGlvbiBNeUNsYXNzCkBlbmQKCmludCBtYWluKGludCBhcmdjLCBjb25zdCBjaGFyICogYXJndltdKSB7CiAgICBAYXV0b3JlbGVhc2Vwb29sIHsKICAgICAgICBNeUNsYXNzICpteU9iamVjdCA9IFtbTXlDbGFzcyBhbGxvY10gaW5pdF07CiAgICAgICAgbXlPYmplY3QubmFtZSA9IEAiT2JqZWN0aXZlLUMiOwogICAgICAgIC8vIG15T2JqZWN0IGhhcyBhIHN0cm9uZyByZWZlcmVuY2UgdG8gdGhlIE5TU3RyaW5nIG9iamVjdCAiT2JqZWN0aXZlLUMiCiAgICB9CiAgICAvLyBUaGUgTlNTdHJpbmcgb2JqZWN0ICJPYmplY3RpdmUtQyIgd2lsbCBiZSBkZWFsbG9jYXRlZCBoZXJlIGlmIG5vIG90aGVyIHN0cm9uZyByZWZlcmVuY2VzIGV4aXN0CiAgICByZXR1cm4gMDsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface MyClass : NSObject
@property (strong, nonatomic) NSString *name;
@end

@implementation MyClass
@end

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        MyClass *myObject = [[MyClass alloc] init];
        myObject.name = @&quot;Objective-C&quot;;
        // myObject has a strong reference to the NSString object &quot;Objective-C&quot;
    }
    // The NSString object &quot;Objective-C&quot; will be deallocated here if no other strong references exist
    return 0;
}</pre></div><div class='content'><p>In this example, <code>myObject</code> has a strong reference to the <code>NSString</code> object &quot;Objective-C&quot;. As long as <code>myObject</code> exists, the <code>NSString</code> object will not be deallocated.</p>
</div><h1>Weak References</h1>
<div class='content'><p>A weak reference does not increase the retain count of an object. It allows you to reference an object without taking ownership of it. Weak references are typically used to avoid retain cycles, especially in delegate patterns and parent-child relationships.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Non-ownership</strong>: A weak reference does not imply ownership, meaning the object can be deallocated even if weak references to it exist.</li>
<li><strong>Automatic Nil Assignment</strong>: When the object a weak reference points to is deallocated, the weak reference is automatically set to <code>nil</code>.</li>
</ul>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBNeUNsYXNzIDogTlNPYmplY3QKQHByb3BlcnR5ICh3ZWFrLCBub25hdG9taWMpIGlkIGRlbGVnYXRlOwpAZW5kCgpAaW1wbGVtZW50YXRpb24gTXlDbGFzcwpAZW5kCgpAaW50ZXJmYWNlIE15RGVsZWdhdGUgOiBOU09iamVjdApAZW5kCgpAaW1wbGVtZW50YXRpb24gTXlEZWxlZ2F0ZQpAZW5kCgppbnQgbWFpbihpbnQgYXJnYywgY29uc3QgY2hhciAqIGFyZ3ZbXSkgewogICAgQGF1dG9yZWxlYXNlcG9vbCB7CiAgICAgICAgTXlDbGFzcyAqbXlPYmplY3QgPSBbW015Q2xhc3MgYWxsb2NdIGluaXRdOwogICAgICAgIE15RGVsZWdhdGUgKm15RGVsZWdhdGUgPSBbW015RGVsZWdhdGUgYWxsb2NdIGluaXRdOwogICAgICAgIG15T2JqZWN0LmRlbGVnYXRlID0gbXlEZWxlZ2F0ZTsKICAgICAgICAvLyBteU9iamVjdCBoYXMgYSB3ZWFrIHJlZmVyZW5jZSB0byBteURlbGVnYXRlCiAgICB9CiAgICAvLyBteURlbGVnYXRlIHdpbGwgYmUgZGVhbGxvY2F0ZWQgaGVyZSwgYW5kIG15T2JqZWN0LmRlbGVnYXRlIHdpbGwgYmUgc2V0IHRvIG5pbAogICAgcmV0dXJuIDA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface MyClass : NSObject
@property (weak, nonatomic) id delegate;
@end

@implementation MyClass
@end

@interface MyDelegate : NSObject
@end

@implementation MyDelegate
@end

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        MyClass *myObject = [[MyClass alloc] init];
        MyDelegate *myDelegate = [[MyDelegate alloc] init];
        myObject.delegate = myDelegate;
        // myObject has a weak reference to myDelegate
    }
    // myDelegate will be deallocated here, and myObject.delegate will be set to nil
    return 0;
}</pre></div><div class='content'><p>In this example, <code>myObject</code> has a weak reference to <code>myDelegate</code>. When <code>myDelegate</code> is deallocated, <code>myObject.delegate</code> is automatically set to <code>nil</code>.</p>
</div><h1>Comparing Strong and Weak References</h1>
<div class='content'><p>| Feature                  | Strong Reference | Weak Reference |
|--------------------------|------------------|----------------|
| Increases Retain Count   | Yes              | No             |
| Implies Ownership        | Yes              | No             |
| Prevents Deallocation    | Yes              | No             |
| Automatic Nil Assignment | No               | Yes            |</p>
</div><h1>Practical Use Cases</h1>
<div class='content'><ul>
<li><strong>Strong References</strong>: Use strong references for properties and variables where you need to ensure the object remains in memory as long as the reference exists.</li>
<li><strong>Weak References</strong>: Use weak references to avoid retain cycles, particularly in delegate patterns, parent-child relationships, and when referencing objects that should not be retained.</li>
</ul>
</div><h2>Example of Retain Cycle</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBQYXJlbnQgOiBOU09iamVjdApAcHJvcGVydHkgKHN0cm9uZywgbm9uYXRvbWljKSBDaGlsZCAqY2hpbGQ7CkBlbmQKCkBpbnRlcmZhY2UgQ2hpbGQgOiBOU09iamVjdApAcHJvcGVydHkgKHN0cm9uZywgbm9uYXRvbWljKSBQYXJlbnQgKnBhcmVudDsKQGVuZAoKQGltcGxlbWVudGF0aW9uIFBhcmVudApAZW5kCgpAaW1wbGVtZW50YXRpb24gQ2hpbGQKQGVuZAoKaW50IG1haW4oaW50IGFyZ2MsIGNvbnN0IGNoYXIgKiBhcmd2W10pIHsKICAgIEBhdXRvcmVsZWFzZXBvb2wgewogICAgICAgIFBhcmVudCAqcGFyZW50ID0gW1tQYXJlbnQgYWxsb2NdIGluaXRdOwogICAgICAgIENoaWxkICpjaGlsZCA9IFtbQ2hpbGQgYWxsb2NdIGluaXRdOwogICAgICAgIHBhcmVudC5jaGlsZCA9IGNoaWxkOwogICAgICAgIGNoaWxkLnBhcmVudCA9IHBhcmVudDsKICAgICAgICAvLyBUaGlzIGNyZWF0ZXMgYSByZXRhaW4gY3ljbGUsIGFzIGJvdGggb2JqZWN0cyBzdHJvbmdseSByZWZlcmVuY2UgZWFjaCBvdGhlcgogICAgfQogICAgLy8gTmVpdGhlciBwYXJlbnQgbm9yIGNoaWxkIHdpbGwgYmUgZGVhbGxvY2F0ZWQgZHVlIHRvIHRoZSByZXRhaW4gY3ljbGUKICAgIHJldHVybiAwOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface Parent : NSObject
@property (strong, nonatomic) Child *child;
@end

@interface Child : NSObject
@property (strong, nonatomic) Parent *parent;
@end

@implementation Parent
@end

@implementation Child
@end

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        Parent *parent = [[Parent alloc] init];
        Child *child = [[Child alloc] init];
        parent.child = child;
        child.parent = parent;
        // This creates a retain cycle, as both objects strongly reference each other
    }
    // Neither parent nor child will be deallocated due to the retain cycle
    return 0;
}</pre></div><div class='content'></div><h2>Resolving Retain Cycle with Weak Reference</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBQYXJlbnQgOiBOU09iamVjdApAcHJvcGVydHkgKHN0cm9uZywgbm9uYXRvbWljKSBDaGlsZCAqY2hpbGQ7CkBlbmQKCkBpbnRlcmZhY2UgQ2hpbGQgOiBOU09iamVjdApAcHJvcGVydHkgKHdlYWssIG5vbmF0b21pYykgUGFyZW50ICpwYXJlbnQ7CkBlbmQKCkBpbXBsZW1lbnRhdGlvbiBQYXJlbnQKQGVuZAoKQGltcGxlbWVudGF0aW9uIENoaWxkCkBlbmQKCmludCBtYWluKGludCBhcmdjLCBjb25zdCBjaGFyICogYXJndltdKSB7CiAgICBAYXV0b3JlbGVhc2Vwb29sIHsKICAgICAgICBQYXJlbnQgKnBhcmVudCA9IFtbUGFyZW50IGFsbG9jXSBpbml0XTsKICAgICAgICBDaGlsZCAqY2hpbGQgPSBbW0NoaWxkIGFsbG9jXSBpbml0XTsKICAgICAgICBwYXJlbnQuY2hpbGQgPSBjaGlsZDsKICAgICAgICBjaGlsZC5wYXJlbnQgPSBwYXJlbnQ7CiAgICAgICAgLy8gTm8gcmV0YWluIGN5Y2xlLCBhcyBjaGlsZC5wYXJlbnQgaXMgYSB3ZWFrIHJlZmVyZW5jZQogICAgfQogICAgLy8gQm90aCBwYXJlbnQgYW5kIGNoaWxkIHdpbGwgYmUgZGVhbGxvY2F0ZWQgaGVyZQogICAgcmV0dXJuIDA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface Parent : NSObject
@property (strong, nonatomic) Child *child;
@end

@interface Child : NSObject
@property (weak, nonatomic) Parent *parent;
@end

@implementation Parent
@end

@implementation Child
@end

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        Parent *parent = [[Parent alloc] init];
        Child *child = [[Child alloc] init];
        parent.child = child;
        child.parent = parent;
        // No retain cycle, as child.parent is a weak reference
    }
    // Both parent and child will be deallocated here
    return 0;
}</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Understanding and correctly using strong and weak references is fundamental for effective memory management in Objective-C. Strong references ensure objects remain in memory, while weak references help avoid retain cycles and unnecessary memory usage. By applying these concepts, you can create more efficient and reliable applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='manual-retain-release'>&#x25C4;Manual Retain-Release</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Strong and Weak References</a>
	</div>
	<div class='col-4 text-end'>
					<a href='strings-and-text'>Strings and Text &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
