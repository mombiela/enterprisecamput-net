<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Working with Blocks</title>

    <link rel="alternate" href="https://campusempresa.com/mod/objective_c/working-with-blocks" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/objective_c/working-with-blocks" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/objective_c/working-with-blocks" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/objective_c/working-with-blocks" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/objective_c/working-with-blocks" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='switch-statements'>&#x25C4;Switch Statements</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Working with Blocks</a>
	</div>
	<div class='col-4 text-end'>
					<a href='defining-and-calling-functions'>Defining and Calling Functions &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Blocks</h1>
<div class='content'><p>Blocks are a powerful feature in Objective-C that allow you to create and pass around chunks of code. They are similar to closures or lambdas in other programming languages. Blocks can capture and store references to variables and constants from the surrounding context.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Definition</strong>: A block is a chunk of code that can be executed at a later time.</li>
<li><strong>Syntax</strong>: Blocks have a distinct syntax that includes the <code>^</code> character.</li>
<li><strong>Capturing Variables</strong>: Blocks can capture and modify variables from their surrounding scope.</li>
<li><strong>Block Types</strong>: Blocks can be used as local variables, properties, or parameters to methods.</li>
</ul>
</div><h1>Basic Syntax and Usage</h1>
<h2>Defining and Using Blocks</h2>
<div class='content'><p>To define a block, you use the <code>^</code> character followed by a pair of braces <code>{}</code> containing the code to be executed.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRGVmaW5lIGEgYmxvY2sgdGhhdCB0YWtlcyBubyBwYXJhbWV0ZXJzIGFuZCByZXR1cm5zIHZvaWQKdm9pZCAoXnNpbXBsZUJsb2NrKSh2b2lkKSA9IF57CiAgICBOU0xvZyhAIlRoaXMgaXMgYSBzaW1wbGUgYmxvY2shIik7Cn07CgovLyBFeGVjdXRlIHRoZSBibG9jawpzaW1wbGVCbG9jaygpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Define a block that takes no parameters and returns void
void (^simpleBlock)(void) = ^{
    NSLog(@&quot;This is a simple block!&quot;);
};

// Execute the block
simpleBlock();</pre></div><div class='content'></div><h2>Blocks with Parameters and Return Values</h2>
<div class='content'><p>Blocks can also take parameters and return values. The syntax for this is similar to defining a function.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRGVmaW5lIGEgYmxvY2sgdGhhdCB0YWtlcyB0d28gaW50ZWdlcnMgYW5kIHJldHVybnMgdGhlaXIgc3VtCmludCAoXnN1bUJsb2NrKShpbnQsIGludCkgPSBeKGludCBhLCBpbnQgYikgewogICAgcmV0dXJuIGEgKyBiOwp9OwoKLy8gRXhlY3V0ZSB0aGUgYmxvY2sKaW50IHJlc3VsdCA9IHN1bUJsb2NrKDMsIDQpOwpOU0xvZyhAIlRoZSBzdW0gaXMgJWQiLCByZXN1bHQpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Define a block that takes two integers and returns their sum
int (^sumBlock)(int, int) = ^(int a, int b) {
    return a + b;
};

// Execute the block
int result = sumBlock(3, 4);
NSLog(@&quot;The sum is %d&quot;, result);</pre></div><div class='content'></div><h1>Capturing Variables</h1>
<div class='content'><p>Blocks can capture variables from the surrounding scope. By default, these variables are captured as constants.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW50IG11bHRpcGxpZXIgPSAzOwppbnQgKF5tdWx0aXBseUJsb2NrKShpbnQpID0gXihpbnQgbnVtKSB7CiAgICByZXR1cm4gbnVtICogbXVsdGlwbGllcjsKfTsKCmludCByZXN1bHQgPSBtdWx0aXBseUJsb2NrKDUpOwpOU0xvZyhAIlRoZSByZXN1bHQgaXMgJWQiLCByZXN1bHQpOyAvLyBPdXRwdXQ6IFRoZSByZXN1bHQgaXMgMTU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>int multiplier = 3;
int (^multiplyBlock)(int) = ^(int num) {
    return num * multiplier;
};

int result = multiplyBlock(5);
NSLog(@&quot;The result is %d&quot;, result); // Output: The result is 15</pre></div><div class='content'></div><h2>Modifying Captured Variables</h2>
<div class='content'><p>To modify a captured variable, you need to use the <code>__block</code> storage type.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("X19ibG9jayBpbnQgY291bnRlciA9IDA7CnZvaWQgKF5pbmNyZW1lbnRCbG9jaykodm9pZCkgPSBeewogICAgY291bnRlcisrOwp9OwoKaW5jcmVtZW50QmxvY2soKTsKaW5jcmVtZW50QmxvY2soKTsKTlNMb2coQCJDb3VudGVyIGlzICVkIiwgY291bnRlcik7IC8vIE91dHB1dDogQ291bnRlciBpcyAy"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>__block int counter = 0;
void (^incrementBlock)(void) = ^{
    counter++;
};

incrementBlock();
incrementBlock();
NSLog(@&quot;Counter is %d&quot;, counter); // Output: Counter is 2</pre></div><div class='content'></div><h1>Blocks as Method Parameters</h1>
<div class='content'><p>Blocks can be passed as parameters to methods, which is particularly useful for callback functions.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSAodm9pZClwZXJmb3JtT3BlcmF0aW9uV2l0aENvbXBsZXRpb246KHZvaWQgKF4pKEJPT0wgc3VjY2VzcykpY29tcGxldGlvbiB7CiAgICAvLyBQZXJmb3JtIHNvbWUgb3BlcmF0aW9uCiAgICBCT09MIG9wZXJhdGlvblN1Y2Nlc3MgPSBZRVM7CiAgICAKICAgIC8vIENhbGwgdGhlIGNvbXBsZXRpb24gYmxvY2sKICAgIGlmIChjb21wbGV0aW9uKSB7CiAgICAgICAgY29tcGxldGlvbihvcGVyYXRpb25TdWNjZXNzKTsKICAgIH0KfQoKLy8gVXNhZ2UKW3NlbGYgcGVyZm9ybU9wZXJhdGlvbldpdGhDb21wbGV0aW9uOl4oQk9PTCBzdWNjZXNzKSB7CiAgICBpZiAoc3VjY2VzcykgewogICAgICAgIE5TTG9nKEAiT3BlcmF0aW9uIHdhcyBzdWNjZXNzZnVsISIpOwogICAgfSBlbHNlIHsKICAgICAgICBOU0xvZyhAIk9wZXJhdGlvbiBmYWlsZWQuIik7CiAgICB9Cn1dOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- (void)performOperationWithCompletion:(void (^)(BOOL success))completion {
    // Perform some operation
    BOOL operationSuccess = YES;
    
    // Call the completion block
    if (completion) {
        completion(operationSuccess);
    }
}

// Usage
[self performOperationWithCompletion:^(BOOL success) {
    if (success) {
        NSLog(@&quot;Operation was successful!&quot;);
    } else {
        NSLog(@&quot;Operation failed.&quot;);
    }
}];</pre></div><div class='content'></div><h1>Blocks as Properties</h1>
<div class='content'><p>Blocks can also be stored as properties in classes.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGludGVyZmFjZSBNeUNsYXNzIDogTlNPYmplY3QKQHByb3BlcnR5IChub25hdG9taWMsIGNvcHkpIHZvaWQgKF5jb21wbGV0aW9uSGFuZGxlcikoQk9PTCBzdWNjZXNzKTsKQGVuZAoKQGltcGxlbWVudGF0aW9uIE15Q2xhc3MKLSAodm9pZClzdGFydE9wZXJhdGlvbiB7CiAgICAvLyBQZXJmb3JtIHNvbWUgb3BlcmF0aW9uCiAgICBCT09MIG9wZXJhdGlvblN1Y2Nlc3MgPSBZRVM7CiAgICAKICAgIC8vIENhbGwgdGhlIGNvbXBsZXRpb24gaGFuZGxlciBpZiBpdCBleGlzdHMKICAgIGlmIChzZWxmLmNvbXBsZXRpb25IYW5kbGVyKSB7CiAgICAgICAgc2VsZi5jb21wbGV0aW9uSGFuZGxlcihvcGVyYXRpb25TdWNjZXNzKTsKICAgIH0KfQpAZW5kCgovLyBVc2FnZQpNeUNsYXNzICpteU9iamVjdCA9IFtbTXlDbGFzcyBhbGxvY10gaW5pdF07Cm15T2JqZWN0LmNvbXBsZXRpb25IYW5kbGVyID0gXihCT09MIHN1Y2Nlc3MpIHsKICAgIGlmIChzdWNjZXNzKSB7CiAgICAgICAgTlNMb2coQCJPcGVyYXRpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseSEiKTsKICAgIH0gZWxzZSB7CiAgICAgICAgTlNMb2coQCJPcGVyYXRpb24gZmFpbGVkLiIpOwogICAgfQp9OwpbbXlPYmplY3Qgc3RhcnRPcGVyYXRpb25dOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@interface MyClass : NSObject
@property (nonatomic, copy) void (^completionHandler)(BOOL success);
@end

@implementation MyClass
- (void)startOperation {
    // Perform some operation
    BOOL operationSuccess = YES;
    
    // Call the completion handler if it exists
    if (self.completionHandler) {
        self.completionHandler(operationSuccess);
    }
}
@end

// Usage
MyClass *myObject = [[MyClass alloc] init];
myObject.completionHandler = ^(BOOL success) {
    if (success) {
        NSLog(@&quot;Operation completed successfully!&quot;);
    } else {
        NSLog(@&quot;Operation failed.&quot;);
    }
};
[myObject startOperation];</pre></div><div class='content'></div><h1>Advanced Usage</h1>
<h2>Using Blocks with Collections</h2>
<div class='content'><p>Blocks are often used with collection classes like <code>NSArray</code> and <code>NSDictionary</code> for enumeration and filtering.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TlNBcnJheSAqbnVtYmVycyA9IEBbQDEsIEAyLCBAMywgQDQsIEA1XTsKTlNBcnJheSAqc3F1YXJlZE51bWJlcnMgPSBbbnVtYmVycyBtYXBVc2luZ0Jsb2NrOl5pZChOU051bWJlciAqbnVtYmVyKSB7CiAgICByZXR1cm4gQChudW1iZXIuaW50VmFsdWUgKiBudW1iZXIuaW50VmFsdWUpOwp9XTsKCk5TTG9nKEAiU3F1YXJlZCBudW1iZXJzOiAlQCIsIHNxdWFyZWROdW1iZXJzKTsgLy8gT3V0cHV0OiBTcXVhcmVkIG51bWJlcnM6ICgxLCA0LCA5LCAxNiwgMjUp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>NSArray *numbers = @[@1, @2, @3, @4, @5];
NSArray *squaredNumbers = [numbers mapUsingBlock:^id(NSNumber *number) {
    return @(number.intValue * number.intValue);
}];

NSLog(@&quot;Squared numbers: %@&quot;, squaredNumbers); // Output: Squared numbers: (1, 4, 9, 16, 25)</pre></div><div class='content'></div><h2>Comparing Blocks and Function Pointers</h2>
<div class='content'><p>Blocks provide a more modern and flexible way to handle callbacks compared to traditional function pointers.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Blocks</th>
<th>Function Pointers</th>
</tr>
</thead>
<tbody>
<tr>
<td>Syntax</td>
<td>Modern, concise</td>
<td>Traditional, verbose</td>
</tr>
<tr>
<td>Capturing State</td>
<td>Can capture local variables</td>
<td>Cannot capture local state</td>
</tr>
<tr>
<td>Flexibility</td>
<td>Can be used as properties, parameters, etc.</td>
<td>Limited to function callbacks</td>
</tr>
</tbody>
</table>
</div><h1>Conclusion</h1>
<div class='content'><p>Blocks in Objective-C are a versatile and powerful feature that allow you to encapsulate code and pass it around your application. They can capture and modify variables from their surrounding context, making them ideal for callbacks, asynchronous operations, and more. Understanding how to define, use, and pass blocks will greatly enhance your Objective-C programming skills.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='switch-statements'>&#x25C4;Switch Statements</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Working with Blocks</a>
	</div>
	<div class='col-4 text-end'>
					<a href='defining-and-calling-functions'>Defining and Calling Functions &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
