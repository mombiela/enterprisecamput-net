<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 3: CI/CD Pipeline with Docker</title>

    <link rel="alternate" href="https://campusempresa.com/mod/docker/project-3-ci-cd-pipeline-docker" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/docker/project-3-ci-cd-pipeline-docker" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/docker/project-3-ci-cd-pipeline-docker" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/docker/project-3-ci-cd-pipeline-docker" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/docker/project-3-ci-cd-pipeline-docker" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='project-2-multi-container-application'>&#x25C4;Project 2: Multi-Container Application</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Project 3: CI/CD Pipeline with Docker</a>
	</div>
	<div class='col-4 text-end'>
					<a href='project-4-scaling-docker-swarm'>Project 4: Scaling with Docker Swarm &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In this project, we will build a Continuous Integration and Continuous Deployment (CI/CD) pipeline using Docker. This project will help you understand how to automate the building, testing, and deployment of applications using Docker containers. By the end of this project, you will have a functional CI/CD pipeline that can be integrated with any application.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Continuous Integration (CI):</strong> The practice of automatically integrating code changes from multiple contributors into a shared repository several times a day.</li>
<li><strong>Continuous Deployment (CD):</strong> The practice of automatically deploying every change that passes the automated tests to production.</li>
<li><strong>Docker:</strong> A platform for developing, shipping, and running applications in containers.</li>
<li><strong>Dockerfile:</strong> A text document that contains all the commands to assemble an image.</li>
<li><strong>Docker Compose:</strong> A tool for defining and running multi-container Docker applications.</li>
</ul>
</div><h1>Prerequisites</h1>
<div class='content'><ul>
<li>Basic understanding of Docker and Docker Compose.</li>
<li>Familiarity with version control systems like Git.</li>
<li>Basic knowledge of shell scripting.</li>
</ul>
</div><h1>Setting Up the Environment</h1>
<div class='content'><ol>
<li>
<p><strong>Install Docker:</strong>
Follow the official Docker installation guide for your operating system.</p>
</li>
<li>
<p><strong>Install Docker Compose:</strong>
Follow the official Docker Compose installation guide for your operating system.</p>
</li>
<li>
<p><strong>Set Up a Git Repository:</strong>
Create a new repository on GitHub or any other Git hosting service.</p>
</li>
</ol>
</div><h1>Creating a Simple Application</h1>
<div class='content'><p>Let's create a simple Node.js application that we will use for our CI/CD pipeline.</p>
<ol>
<li>
<p><strong>Initialize a Node.js Project:</strong></p>
<pre><code class="language-bash">mkdir my-node-app
cd my-node-app
npm init -y
</code></pre>
</li>
<li>
<p><strong>Create an <code>index.js</code> File:</strong></p>
<pre><code class="language-javascript">const express = require('express');
const app = express();
const port = 3000;

app.get('/', (req, res) =&gt; {
  res.send('Hello World!');
});

app.listen(port, () =&gt; {
  console.log(`App listening at http://localhost:${port}`);
});
</code></pre>
</li>
<li>
<p><strong>Install Express:</strong></p>
<pre><code class="language-bash">npm install express
</code></pre>
</li>
</ol>
</div><h1>Writing a Dockerfile</h1>
<div class='content'><p>Create a <code>Dockerfile</code> in the root of your project directory.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVc2UgdGhlIG9mZmljaWFsIE5vZGUuanMgaW1hZ2UuCkZST00gbm9kZToxNAoKIyBDcmVhdGUgYW5kIGNoYW5nZSB0byB0aGUgYXBwIGRpcmVjdG9yeS4KV09SS0RJUiAvdXNyL3NyYy9hcHAKCiMgQ29weSBhcHBsaWNhdGlvbiBkZXBlbmRlbmN5IG1hbmlmZXN0cyB0byB0aGUgY29udGFpbmVyIGltYWdlLgpDT1BZIHBhY2thZ2UqLmpzb24gLi8KCiMgSW5zdGFsbCBkZXBlbmRlbmNpZXMuClJVTiBucG0gaW5zdGFsbAoKIyBDb3B5IHRoZSBsb2NhbCBjb2RlIHRvIHRoZSBjb250YWluZXIgaW1hZ2UuCkNPUFkgLiAuCgojIFJ1biB0aGUgd2ViIHNlcnZpY2Ugb24gY29udGFpbmVyIHN0YXJ0dXAuCkNNRCBbICJub2RlIiwgImluZGV4LmpzIiBdCgojIEV4cG9zZSB0aGUgcG9ydCB0aGUgYXBwIHJ1bnMgb24uCkVYUE9TRSAzMDAw"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Use the official Node.js image.
FROM node:14

# Create and change to the app directory.
WORKDIR /usr/src/app

# Copy application dependency manifests to the container image.
COPY package*.json ./

# Install dependencies.
RUN npm install

# Copy the local code to the container image.
COPY . .

# Run the web service on container startup.
CMD [ &quot;node&quot;, &quot;index.js&quot; ]

# Expose the port the app runs on.
EXPOSE 3000</pre></div><div class='content'></div><h1>Creating a Docker Compose File</h1>
<div class='content'><p>Create a <code>docker-compose.yml</code> file in the root of your project directory.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmVyc2lvbjogJzMuOCcKCnNlcnZpY2VzOgogIHdlYjoKICAgIGJ1aWxkOiAuCiAgICBwb3J0czoKICAgICAgLSAiMzAwMDozMDAwIg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>version: '3.8'

services:
  web:
    build: .
    ports:
      - &quot;3000:3000&quot;</pre></div><div class='content'></div><h1>Setting Up CI with GitHub Actions</h1>
<div class='content'><p>Create a <code>.github/workflows/ci.yml</code> file in your repository.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmFtZTogQ0kKCm9uOgogIHB1c2g6CiAgICBicmFuY2hlczoKICAgICAgLSBtYWluCgpqb2JzOgogIGJ1aWxkOgogICAgcnVucy1vbjogdWJ1bnR1LWxhdGVzdAoKICAgIHN0ZXBzOgogICAgICAtIG5hbWU6IENoZWNrb3V0IGNvZGUKICAgICAgICB1c2VzOiBhY3Rpb25zL2NoZWNrb3V0QHYyCgogICAgICAtIG5hbWU6IFNldCB1cCBEb2NrZXIgQnVpbGR4CiAgICAgICAgdXNlczogZG9ja2VyL3NldHVwLWJ1aWxkeC1hY3Rpb25AdjEKCiAgICAgIC0gbmFtZTogQnVpbGQgdGhlIERvY2tlciBpbWFnZQogICAgICAgIHJ1bjogZG9ja2VyIGJ1aWxkIC4gLS1maWxlIERvY2tlcmZpbGUgLS10YWcgbXktbm9kZS1hcHA6bGF0ZXN0CgogICAgICAtIG5hbWU6IFJ1biB0ZXN0cwogICAgICAgIHJ1bjogZG9ja2VyIHJ1biBteS1ub2RlLWFwcDpsYXRlc3QgbnBtIHRlc3Q="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>name: CI

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v1

      - name: Build the Docker image
        run: docker build . --file Dockerfile --tag my-node-app:latest

      - name: Run tests
        run: docker run my-node-app:latest npm test</pre></div><div class='content'></div><h1>Setting Up CD with GitHub Actions</h1>
<div class='content'><p>Extend the <code>.github/workflows/ci.yml</code> file to include deployment steps.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmFtZTogQ0kvQ0QKCm9uOgogIHB1c2g6CiAgICBicmFuY2hlczoKICAgICAgLSBtYWluCgpqb2JzOgogIGJ1aWxkOgogICAgcnVucy1vbjogdWJ1bnR1LWxhdGVzdAoKICAgIHN0ZXBzOgogICAgICAtIG5hbWU6IENoZWNrb3V0IGNvZGUKICAgICAgICB1c2VzOiBhY3Rpb25zL2NoZWNrb3V0QHYyCgogICAgICAtIG5hbWU6IFNldCB1cCBEb2NrZXIgQnVpbGR4CiAgICAgICAgdXNlczogZG9ja2VyL3NldHVwLWJ1aWxkeC1hY3Rpb25AdjEKCiAgICAgIC0gbmFtZTogQnVpbGQgdGhlIERvY2tlciBpbWFnZQogICAgICAgIHJ1bjogZG9ja2VyIGJ1aWxkIC4gLS1maWxlIERvY2tlcmZpbGUgLS10YWcgbXktbm9kZS1hcHA6bGF0ZXN0CgogICAgICAtIG5hbWU6IFJ1biB0ZXN0cwogICAgICAgIHJ1bjogZG9ja2VyIHJ1biBteS1ub2RlLWFwcDpsYXRlc3QgbnBtIHRlc3QKCiAgZGVwbG95OgogICAgcnVucy1vbjogdWJ1bnR1LWxhdGVzdAogICAgbmVlZHM6IGJ1aWxkCgogICAgc3RlcHM6CiAgICAgIC0gbmFtZTogQ2hlY2tvdXQgY29kZQogICAgICAgIHVzZXM6IGFjdGlvbnMvY2hlY2tvdXRAdjIKCiAgICAgIC0gbmFtZTogRGVwbG95IHRvIERvY2tlciBIdWIKICAgICAgICBydW46IHwKICAgICAgICAgIGVjaG8gIiR7eyBzZWNyZXRzLkRPQ0tFUl9QQVNTV09SRCB9fSIgfCBkb2NrZXIgbG9naW4gLXUgIiR7eyBzZWNyZXRzLkRPQ0tFUl9VU0VSTkFNRSB9fSIgLS1wYXNzd29yZC1zdGRpbgogICAgICAgICAgZG9ja2VyIHRhZyBteS1ub2RlLWFwcDpsYXRlc3QgbXktZG9ja2VyaHViLXVzZXJuYW1lL215LW5vZGUtYXBwOmxhdGVzdAogICAgICAgICAgZG9ja2VyIHB1c2ggbXktZG9ja2VyaHViLXVzZXJuYW1lL215LW5vZGUtYXBwOmxhdGVzdA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>name: CI/CD

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v1

      - name: Build the Docker image
        run: docker build . --file Dockerfile --tag my-node-app:latest

      - name: Run tests
        run: docker run my-node-app:latest npm test

  deploy:
    runs-on: ubuntu-latest
    needs: build

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Deploy to Docker Hub
        run: |
          echo &quot;${{ secrets.DOCKER_PASSWORD }}&quot; | docker login -u &quot;${{ secrets.DOCKER_USERNAME }}&quot; --password-stdin
          docker tag my-node-app:latest my-dockerhub-username/my-node-app:latest
          docker push my-dockerhub-username/my-node-app:latest</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>In this project, we have successfully set up a CI/CD pipeline using Docker and GitHub Actions. We created a simple Node.js application, wrote a Dockerfile to containerize the application, and used Docker Compose to manage the container. We then set up GitHub Actions to automate the building, testing, and deployment of our Docker container. This CI/CD pipeline can be adapted to fit any application, providing a robust and automated workflow for continuous integration and deployment.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='project-2-multi-container-application'>&#x25C4;Project 2: Multi-Container Application</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Project 3: CI/CD Pipeline with Docker</a>
	</div>
	<div class='col-4 text-end'>
					<a href='project-4-scaling-docker-swarm'>Project 4: Scaling with Docker Swarm &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
