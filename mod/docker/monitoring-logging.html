<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoring and Logging in Docker</title>

    <link rel="alternate" href="https://campusempresa.com/mod/docker/monitoring-logging" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/docker/monitoring-logging" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/docker/monitoring-logging" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/docker/monitoring-logging" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/docker/monitoring-logging" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='docker-secrets-configs'>&#x25C4;Docker Secrets and Configs</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Monitoring and Logging in Docker</a>
	</div>
	<div class='col-4 text-end'>
					<a href='security-best-practices'>Security Best Practices &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Monitoring and logging are crucial aspects of managing Docker containers effectively. This topic will guide you from the basics to advanced techniques for monitoring and logging in Docker.</p>
</div><h1>Introduction to Monitoring and Logging</h1>
<div class='content'><p>Monitoring and logging are essential for:</p>
<ul>
<li>Ensuring the health and performance of your applications.</li>
<li>Debugging and troubleshooting issues.</li>
<li>Maintaining security and compliance.</li>
</ul>
</div><h1>Basic Concepts</h1>
<div class='content'></div><h2>Monitoring</h2>
<div class='content'><ul>
<li><strong>Definition</strong>: The process of collecting, analyzing, and using information to track the performance and health of your applications and infrastructure.</li>
<li><strong>Key Metrics</strong>: CPU usage, memory usage, disk I/O, network I/O, etc.</li>
</ul>
</div><h2>Logging</h2>
<div class='content'><ul>
<li><strong>Definition</strong>: The process of recording application and system events to provide a history of activity.</li>
<li><strong>Types of Logs</strong>: Application logs, system logs, Docker daemon logs, etc.</li>
</ul>
</div><h1>Setting Up Basic Monitoring</h1>
<div class='content'></div><h2>Using Docker Stats</h2>
<div class='content'><p>Docker provides a simple command to monitor container resource usage.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHN0YXRz"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker stats</pre></div><div class='content'><p>This command displays a live stream of container(s) resource usage statistics.</p>
</div><h2>Example Output</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q09OVEFJTkVSIElEICAgTkFNRSAgICAgICAgICAgQ1BVICUgICAgIE1FTSBVU0FHRSAvIExJTUlUICAgICBNRU0gJSAgICAgTkVUIEkvTyAgICAgICAgICAgQkxPQ0sgSS9PICAgICAgICAgUElEUwpkMWYyYzNiNGU1ZjYgICBteV9jb250YWluZXIgICAwLjA3JSAgICAgMTIuMzRNaUIgLyAxLjk1MkdpQiAgIDAuNjIlICAgICAxLjIza0IgLyAyLjM0a0IgICAwQiAvIDBCICAgICAgICAgICAy"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CONTAINER ID   NAME           CPU %     MEM USAGE / LIMIT     MEM %     NET I/O           BLOCK I/O         PIDS
d1f2c3b4e5f6   my_container   0.07%     12.34MiB / 1.952GiB   0.62%     1.23kB / 2.34kB   0B / 0B           2</pre></div><div class='content'></div><h1>Setting Up Basic Logging</h1>
<div class='content'></div><h2>Using Docker Logs</h2>
<div class='content'><p>Docker provides a command to fetch logs from a container.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIGxvZ3MgPGNvbnRhaW5lcl9pZD4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker logs &lt;container_id&gt;</pre></div><div class='content'></div><h2>Example Usage</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIGxvZ3MgZDFmMmMzYjRlNWY2"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker logs d1f2c3b4e5f6</pre></div><div class='content'><p>This command will display the logs for the container with ID <code>d1f2c3b4e5f6</code>.</p>
</div><h1>Advanced Monitoring</h1>
<div class='content'></div><h2>Using Prometheus and Grafana</h2>
<div class='content'><p>Prometheus is an open-source monitoring system, and Grafana is an open-source analytics and monitoring solution.</p>
<h4>Setting Up Prometheus</h4>
<ol>
<li>
<p><strong>Create a Prometheus configuration file</strong> (<code>prometheus.yml</code>):</p>
<pre><code class="language-yaml">global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'docker'
    static_configs:
      - targets: ['&lt;docker_host&gt;:&lt;docker_port&gt;']
</code></pre>
</li>
<li>
<p><strong>Run Prometheus as a Docker container</strong>:</p>
<pre><code class="language-sh">docker run -d -p 9090:9090 -v /path/to/prometheus.yml:/etc/prometheus/prometheus.yml prom/prometheus
</code></pre>
</li>
</ol>
<h4>Setting Up Grafana</h4>
<ol>
<li>
<p><strong>Run Grafana as a Docker container</strong>:</p>
<pre><code class="language-sh">docker run -d -p 3000:3000 grafana/grafana
</code></pre>
</li>
<li>
<p><strong>Configure Grafana</strong>:</p>
<ul>
<li>Access Grafana at <code>http://localhost:3000</code>.</li>
<li>Add Prometheus as a data source.</li>
<li>Create dashboards to visualize metrics.</li>
</ul>
</li>
</ol>
</div><h2>Using cAdvisor</h2>
<div class='content'><p>cAdvisor (Container Advisor) provides container users an understanding of the resource usage and performance characteristics of their running containers.</p>
<h4>Running cAdvisor</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biBcCiAgLS12b2x1bWU9Lzovcm9vdGZzOnJvIFwKICAtLXZvbHVtZT0vdmFyL3J1bjovdmFyL3J1bjpybyBcCiAgLS12b2x1bWU9L3N5czovc3lzOnJvIFwKICAtLXZvbHVtZT0vdmFyL2xpYi9kb2NrZXIvOi92YXIvbGliL2RvY2tlcjpybyBcCiAgLS1wdWJsaXNoPTgwODA6ODA4MCBcCiAgLS1kZXRhY2g9dHJ1ZSBcCiAgLS1uYW1lPWNhZHZpc29yIFwKICBnb29nbGUvY2Fkdmlzb3I6bGF0ZXN0"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run \
  --volume=/:/rootfs:ro \
  --volume=/var/run:/var/run:ro \
  --volume=/sys:/sys:ro \
  --volume=/var/lib/docker/:/var/lib/docker:ro \
  --publish=8080:8080 \
  --detach=true \
  --name=cadvisor \
  google/cadvisor:latest</pre></div><div class='content'><p>Access cAdvisor at <code>http://localhost:8080</code>.</p>
</div><h1>Advanced Logging</h1>
<div class='content'></div><h2>Using ELK Stack (Elasticsearch, Logstash, Kibana)</h2>
<div class='content'><p>The ELK stack is a powerful set of tools for managing and analyzing logs.</p>
<h4>Setting Up Elasticsearch</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtZCAtcCA5MjAwOjkyMDAgLXAgOTMwMDo5MzAwIC1lICJkaXNjb3ZlcnkudHlwZT1zaW5nbGUtbm9kZSIgZWxhc3RpY3NlYXJjaDo3LjEwLjE="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run -d -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; elasticsearch:7.10.1</pre></div><div class='content'><h4>Setting Up Logstash</h4>
<ol>
<li>
<p><strong>Create a Logstash configuration file</strong> (<code>logstash.conf</code>):</p>
<pre><code class="language-plaintext">input {
  docker {
    host =&gt; &quot;unix:///var/run/docker.sock&quot;
  }
}
output {
  elasticsearch {
    hosts =&gt; [&quot;localhost:9200&quot;]
  }
}
</code></pre>
</li>
<li>
<p><strong>Run Logstash as a Docker container</strong>:</p>
<pre><code class="language-sh">docker run -d -v /path/to/logstash.conf:/usr/share/logstash/pipeline/logstash.conf logstash:7.10.1
</code></pre>
</li>
</ol>
<h4>Setting Up Kibana</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtZCAtcCA1NjAxOjU2MDEga2liYW5hOjcuMTAuMQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run -d -p 5601:5601 kibana:7.10.1</pre></div><div class='content'><p>Access Kibana at <code>http://localhost:5601</code>.</p>
</div><h1>Conclusion</h1>
<div class='content'><p>Monitoring and logging are critical for maintaining the health, performance, and security of your Dockerized applications. Starting with basic commands like <code>docker stats</code> and <code>docker logs</code>, you can progress to more advanced setups using tools like Prometheus, Grafana, cAdvisor, and the ELK stack. By implementing these practices, you can ensure that your applications run smoothly and efficiently, and you can quickly diagnose and resolve any issues that arise.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='docker-secrets-configs'>&#x25C4;Docker Secrets and Configs</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Monitoring and Logging in Docker</a>
	</div>
	<div class='col-4 text-end'>
					<a href='security-best-practices'>Security Best Practices &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
