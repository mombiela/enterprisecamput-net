<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimizing Docker Images</title>

    <link rel="alternate" href="https://campusempresa.com/mod/docker/optimizing-docker-images" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/docker/optimizing-docker-images" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/docker/optimizing-docker-images" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/docker/optimizing-docker-images" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/docker/optimizing-docker-images" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='deploying-docker-applications'>&#x25C4;Deploying Docker Applications</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Optimizing Docker Images</a>
	</div>
	<div class='col-4 text-end'>
					<a href='backup-recovery'>Backup and Recovery &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Optimizing Docker images is crucial for improving the performance, security, and efficiency of your containerized applications. This section will guide you through various techniques and best practices to create optimized Docker images.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Image Size</strong>: Smaller images are faster to build, transfer, and deploy.</li>
<li><strong>Layer Caching</strong>: Efficient use of Docker's layer caching can speed up the build process.</li>
<li><strong>Security</strong>: Minimizing vulnerabilities by using secure base images and reducing the attack surface.</li>
<li><strong>Build Context</strong>: Reducing the build context size to speed up the build process.</li>
<li><strong>Multi-Stage Builds</strong>: Using multi-stage builds to keep the final image lean.</li>
</ul>
</div><h1>Reducing Image Size</h1>
<div class='content'></div><h2>Use Official Base Images</h2>
<div class='content'><p>Start with a minimal base image to reduce the overall size of your Docker image.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVc2UgYSBtaW5pbWFsIGJhc2UgaW1hZ2UKRlJPTSBhbHBpbmU6bGF0ZXN0CgojIEluc3RhbGwgbmVjZXNzYXJ5IHBhY2thZ2VzClJVTiBhcGsgYWRkIC0tbm8tY2FjaGUgcHl0aG9uMyBweTMtcGlw"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Use a minimal base image
FROM alpine:latest

# Install necessary packages
RUN apk add --no-cache python3 py3-pip</pre></div><div class='content'></div><h2>Remove Unnecessary Files</h2>
<div class='content'><p>Clean up unnecessary files and dependencies to keep the image size small.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBSZW1vdmUgY2FjaGUgZmlsZXMgYWZ0ZXIgaW5zdGFsbGluZyBwYWNrYWdlcwpSVU4gYXBrIGFkZCAtLW5vLWNhY2hlIHB5dGhvbjMgcHkzLXBpcCAmJiBcCiAgICBybSAtcmYgL3Zhci9jYWNoZS9hcGsvKg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Remove cache files after installing packages
RUN apk add --no-cache python3 py3-pip &amp;&amp; \
    rm -rf /var/cache/apk/*</pre></div><div class='content'></div><h2>Use .dockerignore</h2>
<div class='content'><p>Use a <code>.dockerignore</code> file to exclude unnecessary files from the build context.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyAuZG9ja2VyaWdub3JlCm5vZGVfbW9kdWxlcwoqLmxvZwoqLm1k"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># .dockerignore
node_modules
*.log
*.md</pre></div><div class='content'></div><h1>Layer Caching</h1>
<div class='content'></div><h2>Order of Instructions</h2>
<div class='content'><p>Order your Dockerfile instructions to maximize the use of Docker's layer caching.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBJbnN0YWxsIGRlcGVuZGVuY2llcyBmaXJzdCB0byBsZXZlcmFnZSBjYWNoaW5nCkNPUFkgcmVxdWlyZW1lbnRzLnR4dCAvYXBwLwpSVU4gcGlwIGluc3RhbGwgLS1uby1jYWNoZS1kaXIgLXIgL2FwcC9yZXF1aXJlbWVudHMudHh0CgojIENvcHkgdGhlIHJlc3Qgb2YgdGhlIGFwcGxpY2F0aW9uIGNvZGUKQ09QWSAuIC9hcHAv"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Install dependencies first to leverage caching
COPY requirements.txt /app/
RUN pip install --no-cache-dir -r /app/requirements.txt

# Copy the rest of the application code
COPY . /app/</pre></div><div class='content'></div><h2>Minimize Layers</h2>
<div class='content'><p>Combine multiple commands into a single <code>RUN</code> instruction to reduce the number of layers.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDb21iaW5lIGNvbW1hbmRzIHRvIG1pbmltaXplIGxheWVycwpSVU4gYXB0LWdldCB1cGRhdGUgJiYgYXB0LWdldCBpbnN0YWxsIC15IFwKICAgIHB5dGhvbjMgXAogICAgcHl0aG9uMy1waXAgJiYgXAogICAgYXB0LWdldCBjbGVhbiAmJiBcCiAgICBybSAtcmYgL3Zhci9saWIvYXB0L2xpc3RzLyo="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Combine commands to minimize layers
RUN apt-get update &amp;&amp; apt-get install -y \
    python3 \
    python3-pip &amp;&amp; \
    apt-get clean &amp;&amp; \
    rm -rf /var/lib/apt/lists/*</pre></div><div class='content'></div><h1>Security</h1>
<div class='content'></div><h2>Use Trusted Base Images</h2>
<div class='content'><p>Always use official or trusted base images to minimize security risks.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVc2UgYW4gb2ZmaWNpYWwgUHl0aG9uIGltYWdlCkZST00gcHl0aG9uOjMuOS1zbGlt"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Use an official Python image
FROM python:3.9-slim</pre></div><div class='content'></div><h2>Regular Updates</h2>
<div class='content'><p>Regularly update your base images and dependencies to include the latest security patches.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVcGRhdGUgYmFzZSBpbWFnZSBhbmQgZGVwZW5kZW5jaWVzCkZST00gcHl0aG9uOjMuOS1zbGltClJVTiBhcHQtZ2V0IHVwZGF0ZSAmJiBhcHQtZ2V0IHVwZ3JhZGUgLXk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Update base image and dependencies
FROM python:3.9-slim
RUN apt-get update &amp;&amp; apt-get upgrade -y</pre></div><div class='content'></div><h1>Build Context</h1>
<div class='content'></div><h2>Reduce Build Context Size</h2>
<div class='content'><p>Keep your build context small by excluding unnecessary files and directories.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVc2UgLmRvY2tlcmlnbm9yZSB0byBleGNsdWRlIHVubmVjZXNzYXJ5IGZpbGVzCkNPUFkgLiAvYXBwLw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Use .dockerignore to exclude unnecessary files
COPY . /app/</pre></div><div class='content'></div><h1>Multi-Stage Builds</h1>
<div class='content'></div><h2>Example of Multi-Stage Build</h2>
<div class='content'><p>Use multi-stage builds to create lean final images by copying only the necessary artifacts from the build stage.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBGaXJzdCBzdGFnZTogYnVpbGQgdGhlIGFwcGxpY2F0aW9uCkZST00gZ29sYW5nOjEuMTYgQVMgYnVpbGRlcgpXT1JLRElSIC9hcHAKQ09QWSAuIC4KUlVOIGdvIGJ1aWxkIC1vIG15YXBwCgojIFNlY29uZCBzdGFnZTogY3JlYXRlIHRoZSBmaW5hbCBpbWFnZQpGUk9NIGFscGluZTpsYXRlc3QKV09SS0RJUiAvYXBwCkNPUFkgLS1mcm9tPWJ1aWxkZXIgL2FwcC9teWFwcCAuCkNNRCBbIi4vbXlhcHAiXQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># First stage: build the application
FROM golang:1.16 AS builder
WORKDIR /app
COPY . .
RUN go build -o myapp

# Second stage: create the final image
FROM alpine:latest
WORKDIR /app
COPY --from=builder /app/myapp .
CMD [&quot;./myapp&quot;]</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Optimizing Docker images involves several best practices, including reducing image size, leveraging layer caching, ensuring security, minimizing the build context, and using multi-stage builds. By following these guidelines, you can create efficient, secure, and performant Docker images that are easier to manage and deploy.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='deploying-docker-applications'>&#x25C4;Deploying Docker Applications</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Optimizing Docker Images</a>
	</div>
	<div class='col-4 text-end'>
					<a href='backup-recovery'>Backup and Recovery &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
