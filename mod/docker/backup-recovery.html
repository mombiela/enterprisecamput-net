<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backup and Recovery</title>

    <link rel="alternate" href="https://campusempresa.com/mod/docker/backup-recovery" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/docker/backup-recovery" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/docker/backup-recovery" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/docker/backup-recovery" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/docker/backup-recovery" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='optimizing-docker-images'>&#x25C4;Optimizing Docker Images</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Backup and Recovery</a>
	</div>
	<div class='col-4 text-end'>
					<a href='case-studies-real-world-examples'>Case Studies and Real-World Examples &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Backup and recovery are crucial aspects of managing Docker containers and their data. This section will guide you through the concepts, tools, and best practices for effectively backing up and recovering Docker containers and their associated data.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Backup</strong>: The process of creating copies of data to protect against data loss.</li>
<li><strong>Recovery</strong>: The process of restoring data from backups to its original or a functional state.</li>
<li><strong>Volumes</strong>: Docker's preferred mechanism for persisting data generated by and used by Docker containers.</li>
<li><strong>Bind Mounts</strong>: A way to mount a directory or file from the host machine into a container.</li>
</ul>
</div><h1>Backup Strategies</h1>
<div class='content'></div><h2>Volume Backups</h2>
<div class='content'><p>Volumes are the most common method for persisting data in Docker. Backing up volumes ensures that you can restore the state of your data even if the container is deleted.</p>
<h4>Example: Backing Up a Volume</h4>
<ol>
<li>
<p><strong>Identify the volume</strong>: Use the <code>docker volume ls</code> command to list all volumes.</p>
<pre><code class="language-sh">docker volume ls
</code></pre>
</li>
<li>
<p><strong>Create a backup</strong>: Use the <code>docker run</code> command to create a tarball of the volume's contents.</p>
<pre><code class="language-sh">docker run --rm -v my_volume:/volume -v $(pwd):/backup busybox tar cvf /backup/backup.tar /volume
</code></pre>
<ul>
<li><code>my_volume</code>: The name of the volume to back up.</li>
<li><code>$(pwd)</code>: The current directory on the host where the backup will be stored.</li>
<li><code>busybox</code>: A lightweight Docker image used to create the tarball.</li>
</ul>
</li>
</ol>
</div><h2>Container Backups</h2>
<div class='content'><p>Backing up the entire container includes both the container's filesystem and its configuration.</p>
<h4>Example: Backing Up a Container</h4>
<ol>
<li>
<p><strong>Commit the container</strong>: Create a new image from the container's current state.</p>
<pre><code class="language-sh">docker commit my_container my_backup_image
</code></pre>
<ul>
<li><code>my_container</code>: The name or ID of the container.</li>
<li><code>my_backup_image</code>: The name of the new image.</li>
</ul>
</li>
<li>
<p><strong>Save the image</strong>: Export the image to a tarball.</p>
<pre><code class="language-sh">docker save -o my_backup_image.tar my_backup_image
</code></pre>
<ul>
<li><code>my_backup_image.tar</code>: The name of the tarball file.</li>
<li><code>my_backup_image</code>: The name of the image to save.</li>
</ul>
</li>
</ol>
</div><h1>Recovery Strategies</h1>
<div class='content'></div><h2>Volume Recovery</h2>
<div class='content'><p>Restoring data from a volume backup involves extracting the tarball back into a Docker volume.</p>
<h4>Example: Restoring a Volume</h4>
<ol>
<li>
<p><strong>Create a new volume</strong>: If the original volume is lost, create a new one.</p>
<pre><code class="language-sh">docker volume create my_volume
</code></pre>
</li>
<li>
<p><strong>Restore the backup</strong>: Use the <code>docker run</code> command to extract the tarball into the volume.</p>
<pre><code class="language-sh">docker run --rm -v my_volume:/volume -v $(pwd):/backup busybox tar xvf /backup/backup.tar -C /
</code></pre>
<ul>
<li><code>my_volume</code>: The name of the volume to restore.</li>
<li><code>$(pwd)</code>: The directory on the host where the backup tarball is located.</li>
<li><code>busybox</code>: A lightweight Docker image used to extract the tarball.</li>
</ul>
</li>
</ol>
</div><h2>Container Recovery</h2>
<div class='content'><p>Restoring a container from a backup involves loading the saved image and creating a new container from it.</p>
<h4>Example: Restoring a Container</h4>
<ol>
<li>
<p><strong>Load the image</strong>: Import the saved image tarball.</p>
<pre><code class="language-sh">docker load -i my_backup_image.tar
</code></pre>
<ul>
<li><code>my_backup_image.tar</code>: The name of the tarball file.</li>
</ul>
</li>
<li>
<p><strong>Run a new container</strong>: Create a new container from the restored image.</p>
<pre><code class="language-sh">docker run -d --name my_restored_container my_backup_image
</code></pre>
<ul>
<li><code>my_restored_container</code>: The name of the new container.</li>
<li><code>my_backup_image</code>: The name of the restored image.</li>
</ul>
</li>
</ol>
</div><h1>Best Practices</h1>
<div class='content'><ul>
<li><strong>Regular Backups</strong>: Schedule regular backups to minimize data loss.</li>
<li><strong>Automate Backups</strong>: Use scripts or tools to automate the backup process.</li>
<li><strong>Test Restores</strong>: Regularly test your recovery process to ensure backups are valid.</li>
<li><strong>Store Backups Securely</strong>: Keep backups in a secure and redundant location.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Backup and recovery are essential practices for maintaining the integrity and availability of your Docker environments. By understanding and implementing the strategies discussed in this section, you can ensure that your data is protected and can be quickly restored in the event of a failure. Regularly test your backup and recovery processes to ensure they work as expected and keep your data safe.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='optimizing-docker-images'>&#x25C4;Optimizing Docker Images</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Backup and Recovery</a>
	</div>
	<div class='col-4 text-end'>
					<a href='case-studies-real-world-examples'>Case Studies and Real-World Examples &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
