<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docker Storage Options</title>

    <link rel="alternate" href="https://campusempresa.com/mod/docker/05-02-docker-storage-options" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/docker/05-02-docker-storage-options" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/docker/05-02-docker-storage-options" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/docker/05-02-docker-storage-options" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/docker/05-02-docker-storage-options" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-01-docker-networking-deep-dive' title="Docker Networking Deep Dive">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Docker Storage Options</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-03-docker-security-best-practices' title="Docker Security Best Practices">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this module, we will explore the various storage options available in Docker. Understanding these options is crucial for managing data persistence, performance, and scalability in your Dockerized applications.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Ephemeral Storage</strong>: Storage that is tied to the lifecycle of a container.</li>
<li><strong>Volumes</strong>: Managed by Docker and can persist data beyond the lifecycle of a container.</li>
<li><strong>Bind Mounts</strong>: Directly mount a host directory or file into a container.</li>
<li><strong>tmpfs Mounts</strong>: Store data in the host system's memory.</li>
</ol>
</div><h1><p>Ephemeral Storage</p>
</h1>
<div class='content'><p>Ephemeral storage is the default storage option in Docker. When you create a container, any data written to the container's filesystem is stored in ephemeral storage. This data is lost when the container is removed.</p>
</div><h2><p>Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtaXQgLS1uYW1lIGVwaGVtZXJhbC1jb250YWluZXIgdWJ1bnR1"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run -it --name ephemeral-container ubuntu</pre></div><div class='content'><p>In this example, any data written inside the <code>ephemeral-container</code> will be lost once the container is removed.</p>
</div><h1><p>Volumes</p>
</h1>
<div class='content'><p>Volumes are the preferred mechanism for persisting data in Docker. They are managed by Docker and can be used to share data between containers or persist data beyond the lifecycle of a container.</p>
</div><h2><p>Creating and Using Volumes</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDcmVhdGUgYSB2b2x1bWUKZG9ja2VyIHZvbHVtZSBjcmVhdGUgbXlfdm9sdW1lCgojIFJ1biBhIGNvbnRhaW5lciB3aXRoIHRoZSB2b2x1bWUKZG9ja2VyIHJ1biAtaXQgLS1uYW1lIHZvbHVtZS1jb250YWluZXIgLXYgbXlfdm9sdW1lOi9kYXRhIHVidW50dQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Create a volume
docker volume create my_volume

# Run a container with the volume
docker run -it --name volume-container -v my_volume:/data ubuntu</pre></div><div class='content'><p>In this example, the <code>my_volume</code> volume is mounted to the <code>/data</code> directory inside the <code>volume-container</code>. Data written to <code>/data</code> will persist even if the container is removed.</p>
</div><h2><p>Managing Volumes</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBMaXN0IGFsbCB2b2x1bWVzCmRvY2tlciB2b2x1bWUgbHMKCiMgSW5zcGVjdCBhIHZvbHVtZQpkb2NrZXIgdm9sdW1lIGluc3BlY3QgbXlfdm9sdW1lCgojIFJlbW92ZSBhIHZvbHVtZQpkb2NrZXIgdm9sdW1lIHJtIG15X3ZvbHVtZQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># List all volumes
docker volume ls

# Inspect a volume
docker volume inspect my_volume

# Remove a volume
docker volume rm my_volume</pre></div><div class='content'></div><h1><p>Bind Mounts</p>
</h1>
<div class='content'><p>Bind mounts allow you to mount a file or directory from the host filesystem into a container. This is useful for sharing configuration files or source code between the host and the container.</p>
</div><h2><p>Using Bind Mounts</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBSdW4gYSBjb250YWluZXIgd2l0aCBhIGJpbmQgbW91bnQKZG9ja2VyIHJ1biAtaXQgLS1uYW1lIGJpbmQtbW91bnQtY29udGFpbmVyIC12IC9ob3N0L3BhdGg6L2NvbnRhaW5lci9wYXRoIHVidW50dQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Run a container with a bind mount
docker run -it --name bind-mount-container -v /host/path:/container/path ubuntu</pre></div><div class='content'><p>In this example, the <code>/host/path</code> directory on the host is mounted to the <code>/container/path</code> directory inside the <code>bind-mount-container</code>.</p>
</div><h1><p>tmpfs Mounts</p>
</h1>
<div class='content'><p>tmpfs mounts are used to store data in the host system's memory. This is useful for storing temporary data that does not need to persist beyond the container's lifecycle.</p>
</div><h2><p>Using tmpfs Mounts</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBSdW4gYSBjb250YWluZXIgd2l0aCBhIHRtcGZzIG1vdW50CmRvY2tlciBydW4gLWl0IC0tbmFtZSB0bXBmcy1jb250YWluZXIgLS10bXBmcyAvdG1wOnJ3LHNpemU9NjRtLHVpZD0xMDAwIHVidW50dQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Run a container with a tmpfs mount
docker run -it --name tmpfs-container --tmpfs /tmp:rw,size=64m,uid=1000 ubuntu</pre></div><div class='content'><p>In this example, a tmpfs mount is created at <code>/tmp</code> inside the <code>tmpfs-container</code> with a size of 64MB and owned by the user with UID 1000.</p>
</div><h1><p>Comparison of Storage Options</p>
</h1>
<div class='content'><table>
<thead>
<tr>
<th>Storage Option</th>
<th>Persistence</th>
<th>Performance</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ephemeral</td>
<td>No</td>
<td>High</td>
<td>Temporary data, testing, stateless containers</td>
</tr>
<tr>
<td>Volumes</td>
<td>Yes</td>
<td>High</td>
<td>Data persistence, sharing data between containers</td>
</tr>
<tr>
<td>Bind Mounts</td>
<td>Yes</td>
<td>High</td>
<td>Sharing host files, development</td>
</tr>
<tr>
<td>tmpfs Mounts</td>
<td>No</td>
<td>Very High</td>
<td>Temporary data, sensitive data in memory</td>
</tr>
</tbody>
</table>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise: Using Volumes and Bind Mounts</p>
</h2>
<div class='content'><ol>
<li>Create a volume named <code>exercise_volume</code>.</li>
<li>Run a container named <code>volume_test</code> with the <code>exercise_volume</code> mounted to <code>/data</code>.</li>
<li>Write a file inside the <code>/data</code> directory in the <code>volume_test</code> container.</li>
<li>Remove the <code>volume_test</code> container.</li>
<li>Run a new container named <code>volume_check</code> with the <code>exercise_volume</code> mounted to <code>/data</code> and verify the file exists.</li>
<li>Run a container named <code>bind_test</code> with a bind mount from a host directory to <code>/host_data</code> inside the container.</li>
<li>Write a file inside the <code>/host_data</code> directory in the <code>bind_test</code> container and verify it exists on the host.</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBTdGVwIDE6IENyZWF0ZSBhIHZvbHVtZQpkb2NrZXIgdm9sdW1lIGNyZWF0ZSBleGVyY2lzZV92b2x1bWUKCiMgU3RlcCAyOiBSdW4gYSBjb250YWluZXIgd2l0aCB0aGUgdm9sdW1lCmRvY2tlciBydW4gLWl0IC0tbmFtZSB2b2x1bWVfdGVzdCAtdiBleGVyY2lzZV92b2x1bWU6L2RhdGEgdWJ1bnR1CgojIEluc2lkZSB0aGUgY29udGFpbmVyLCB3cml0ZSBhIGZpbGUKZWNobyAiSGVsbG8sIERvY2tlciEiID4gL2RhdGEvaGVsbG8udHh0CmV4aXQKCiMgU3RlcCAzOiBSZW1vdmUgdGhlIGNvbnRhaW5lcgpkb2NrZXIgcm0gdm9sdW1lX3Rlc3QKCiMgU3RlcCA0OiBSdW4gYSBuZXcgY29udGFpbmVyIHdpdGggdGhlIHNhbWUgdm9sdW1lCmRvY2tlciBydW4gLWl0IC0tbmFtZSB2b2x1bWVfY2hlY2sgLXYgZXhlcmNpc2Vfdm9sdW1lOi9kYXRhIHVidW50dQoKIyBJbnNpZGUgdGhlIGNvbnRhaW5lciwgdmVyaWZ5IHRoZSBmaWxlIGV4aXN0cwpjYXQgL2RhdGEvaGVsbG8udHh0CmV4aXQKCiMgU3RlcCA1OiBSdW4gYSBjb250YWluZXIgd2l0aCBhIGJpbmQgbW91bnQKZG9ja2VyIHJ1biAtaXQgLS1uYW1lIGJpbmRfdGVzdCAtdiAvcGF0aC9vbi9ob3N0Oi9ob3N0X2RhdGEgdWJ1bnR1CgojIEluc2lkZSB0aGUgY29udGFpbmVyLCB3cml0ZSBhIGZpbGUKZWNobyAiSGVsbG8sIEhvc3QhIiA+IC9ob3N0X2RhdGEvaGVsbG9faG9zdC50eHQKZXhpdAoKIyBWZXJpZnkgdGhlIGZpbGUgZXhpc3RzIG9uIHRoZSBob3N0CmNhdCAvcGF0aC9vbi9ob3N0L2hlbGxvX2hvc3QudHh0"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Step 1: Create a volume
docker volume create exercise_volume

# Step 2: Run a container with the volume
docker run -it --name volume_test -v exercise_volume:/data ubuntu

# Inside the container, write a file
echo &quot;Hello, Docker!&quot; &gt; /data/hello.txt
exit

# Step 3: Remove the container
docker rm volume_test

# Step 4: Run a new container with the same volume
docker run -it --name volume_check -v exercise_volume:/data ubuntu

# Inside the container, verify the file exists
cat /data/hello.txt
exit

# Step 5: Run a container with a bind mount
docker run -it --name bind_test -v /path/on/host:/host_data ubuntu

# Inside the container, write a file
echo &quot;Hello, Host!&quot; &gt; /host_data/hello_host.txt
exit

# Verify the file exists on the host
cat /path/on/host/hello_host.txt</pre></div><div class='content'></div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ul>
<li><strong>Mistake</strong>: Forgetting to remove volumes when they are no longer needed.
<ul>
<li><strong>Tip</strong>: Regularly clean up unused volumes using <code>docker volume prune</code>.</li>
</ul>
</li>
<li><strong>Mistake</strong>: Using bind mounts for production data storage.
<ul>
<li><strong>Tip</strong>: Use Docker volumes for production data to ensure better management and portability.</li>
</ul>
</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this module, we covered the different storage options available in Docker, including ephemeral storage, volumes, bind mounts, and tmpfs mounts. We also explored practical examples and exercises to reinforce these concepts. Understanding these storage options is essential for managing data persistence and performance in your Dockerized applications. In the next module, we will dive deeper into Docker networking.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-01-docker-networking-deep-dive' title="Docker Networking Deep Dive">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-03-docker-security-best-practices' title="Docker Security Best Practices">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
