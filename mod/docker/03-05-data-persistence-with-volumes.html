<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    <title>Data Persistence with Volumes</title>

    <link rel="alternate" href="https://campusempresa.com/mod/docker/03-05-data-persistence-with-volumes" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/docker/03-05-data-persistence-with-volumes" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/docker/03-05-data-persistence-with-volumes" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>var DEVELOP = window.location.href.indexOf("localhost")!=-1 && true;</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/docker/03-05-data-persistence-with-volumes" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/docker/03-05-data-persistence-with-volumes" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col" id="left_menu">
					<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Course Content
	</a>

			</div>
		</div>
	</div>
</div>

<!--  
<div class="top-bar container-fluid">
	<div class="container-xxl">
		<nav class="navbar navbar-expand-md p-0">
			<div class="container-fluid">
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				
				<div class="collapse navbar-collapse" id="navbarNav">
					<div class="navbar-nav me-auto">
							<a href="/"  class="nav-link px-3">
		<i class="bi bi-house-fill"></i>
		HOME
	</a>

	<a href="./"  class="nav-link px-3">
		<i class="bi bi-journal-bookmark"></i>
		Course Content
	</a>

					</div>
				</div>			
							</div>
		</nav>
	</div>
</div>
 -->				<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-04-networking-in-docker' title="Networking in Docker">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<h2 style="text-decoration:underline">Data Persistence with Volumes</h2>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-01-introduction-to-docker-compose' title="Introduction to Docker Compose">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to manage data persistence in Docker using volumes. Data persistence is crucial for maintaining data across container restarts and ensuring that your applications can store and retrieve data reliably.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Ephemeral Nature of Containers</strong>: By default, data stored inside a Docker container is ephemeral, meaning it is lost when the container stops or is removed.</li>
<li><strong>Volumes</strong>: Docker volumes are the preferred mechanism for persisting data generated by and used by Docker containers.</li>
<li><strong>Bind Mounts</strong>: Another way to persist data by mounting a host directory into a container.</li>
</ol>
</div><h1>Types of Volumes</h1>
<div class='content'><ol>
<li><strong>Anonymous Volumes</strong>: Created when you use the <code>-v</code> flag without specifying a name.</li>
<li><strong>Named Volumes</strong>: Created when you use the <code>-v</code> flag with a name.</li>
<li><strong>Bind Mounts</strong>: Use the <code>-v</code> flag with a host directory path.</li>
</ol>
</div><h1>Creating and Using Volumes</h1>
<div class='content'></div><h2>Creating a Named Volume</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHZvbHVtZSBjcmVhdGUgbXlfdm9sdW1l"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker volume create my_volume</pre></div><div class='content'></div><h2>Using a Volume in a Container</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtZCAtLW5hbWUgbXlfY29udGFpbmVyIC12IG15X3ZvbHVtZTovYXBwL2RhdGEgbXlfaW1hZ2U="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run -d --name my_container -v my_volume:/app/data my_image</pre></div><div class='content'></div><h2>Using a Bind Mount</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtZCAtLW5hbWUgbXlfY29udGFpbmVyIC12IC9ob3N0L2RhdGE6L2FwcC9kYXRhIG15X2ltYWdl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run -d --name my_container -v /host/data:/app/data my_image</pre></div><div class='content'></div><h2>Inspecting Volumes</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHZvbHVtZSBpbnNwZWN0IG15X3ZvbHVtZQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker volume inspect my_volume</pre></div><div class='content'></div><h1>Practical Example</h1>
<div class='content'><p>Let's create a simple example to demonstrate data persistence using volumes.</p>
</div><h2>Step 1: Create a Named Volume</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHZvbHVtZSBjcmVhdGUgbXlfZGF0YV92b2x1bWU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker volume create my_data_volume</pre></div><div class='content'></div><h2>Step 2: Run a Container with the Volume</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtZCAtLW5hbWUgbXlfbmdpbnggLXYgbXlfZGF0YV92b2x1bWU6L3Vzci9zaGFyZS9uZ2lueC9odG1sIG5naW54"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run -d --name my_nginx -v my_data_volume:/usr/share/nginx/html nginx</pre></div><div class='content'></div><h2>Step 3: Add Data to the Volume</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIGV4ZWMgLWl0IG15X25naW54IC9iaW4vYmFzaAplY2hvICJIZWxsbywgRG9ja2VyISIgPiAvdXNyL3NoYXJlL25naW54L2h0bWwvaW5kZXguaHRtbApleGl0"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker exec -it my_nginx /bin/bash
echo &quot;Hello, Docker!&quot; &gt; /usr/share/nginx/html/index.html
exit</pre></div><div class='content'></div><h2>Step 4: Verify Data Persistence</h2>
<div class='content'><ol>
<li>
<p>Stop and remove the container:</p>
<pre><code class="language-bash">docker stop my_nginx
docker rm my_nginx
</code></pre>
</li>
<li>
<p>Run a new container with the same volume:</p>
<pre><code class="language-bash">docker run -d --name my_new_nginx -v my_data_volume:/usr/share/nginx/html nginx
</code></pre>
</li>
<li>
<p>Verify the data is still there:</p>
<pre><code class="language-bash">docker exec -it my_new_nginx /bin/bash
cat /usr/share/nginx/html/index.html
</code></pre>
</li>
</ol>
</div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Mistake</strong>: Forgetting to specify the volume name, leading to the creation of anonymous volumes that are harder to manage.</li>
<li><strong>Tip</strong>: Always name your volumes for better management and clarity.</li>
<li><strong>Mistake</strong>: Using bind mounts without considering the security implications.</li>
<li><strong>Tip</strong>: Use named volumes for better isolation and security.</li>
</ul>
</div><h1>Exercises</h1>
<div class='content'></div><h2>Exercise 1: Create and Use a Named Volume</h2>
<div class='content'><ol>
<li>Create a named volume called <code>exercise_volume</code>.</li>
<li>Run a container using the <code>nginx</code> image and mount <code>exercise_volume</code> to <code>/usr/share/nginx/html</code>.</li>
<li>Add a file named <code>exercise.html</code> with the content &quot;Docker Exercise&quot; to the volume.</li>
<li>Stop and remove the container.</li>
<li>Run a new container with the same volume and verify the file <code>exercise.html</code> is still there.</li>
</ol>
</div><h2>Solution</h2>
<div class='content'><ol>
<li>
<p>Create the volume:</p>
<pre><code class="language-bash">docker volume create exercise_volume
</code></pre>
</li>
<li>
<p>Run the container:</p>
<pre><code class="language-bash">docker run -d --name exercise_nginx -v exercise_volume:/usr/share/nginx/html nginx
</code></pre>
</li>
<li>
<p>Add the file:</p>
<pre><code class="language-bash">docker exec -it exercise_nginx /bin/bash
echo &quot;Docker Exercise&quot; &gt; /usr/share/nginx/html/exercise.html
exit
</code></pre>
</li>
<li>
<p>Stop and remove the container:</p>
<pre><code class="language-bash">docker stop exercise_nginx
docker rm exercise_nginx
</code></pre>
</li>
<li>
<p>Run a new container and verify:</p>
<pre><code class="language-bash">docker run -d --name new_exercise_nginx -v exercise_volume:/usr/share/nginx/html nginx
docker exec -it new_exercise_nginx /bin/bash
cat /usr/share/nginx/html/exercise.html
</code></pre>
</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, we learned about the importance of data persistence in Docker and how to achieve it using volumes. We covered the different types of volumes, how to create and use them, and provided practical examples and exercises to reinforce the concepts. Understanding and effectively using volumes is crucial for managing data in Dockerized applications, especially in production environments.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-04-networking-in-docker' title="Networking in Docker">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-01-introduction-to-docker-compose' title="Introduction to Docker Compose">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
				<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
	     crossorigin="anonymous"></script>
	<!-- enterprise_campus -->
	<ins class="adsbygoogle"
	     style="display:block"
	     data-ad-client="ca-pub-0611338592562725"
	     data-ad-slot="6914733106"
	     data-ad-format="auto"
	     data-full-width-responsive="true"></ins>
	<script>
	     (adsbygoogle = window.adsbygoogle || []).push({});
	</script>
			
	<div class="container mt-2 d-none d-md-block index">
		<h1>Docker: From Beginner to Advanced</h1>
<h2>Module 1: Introduction to Docker</h2>
<ul>
<li><a href="01-01-what-is-docker">What is Docker?</a></li>
<li><a href="01-02-installing-docker">Installing Docker</a></li>
<li><a href="01-03-docker-architecture">Docker Architecture</a></li>
<li><a href="01-04-basic-docker-commands">Basic Docker Commands</a></li>
<li><a href="01-05-understanding-docker-images">Understanding Docker Images</a></li>
<li><a href="01-06-creating-your-first-docker-container">Creating Your First Docker Container</a></li>
</ul>
<h2>Module 2: Working with Docker Images</h2>
<ul>
<li><a href="02-01-docker-hub-and-repositories">Docker Hub and Repositories</a></li>
<li><a href="02-02-building-docker-images">Building Docker Images</a></li>
<li><a href="02-03-dockerfile-basics">Dockerfile Basics</a></li>
<li><a href="02-04-managing-docker-images">Managing Docker Images</a></li>
<li><a href="02-05-tagging-and-pushing-images">Tagging and Pushing Images</a></li>
</ul>
<h2>Module 3: Docker Containers</h2>
<ul>
<li><a href="03-01-running-containers">Running Containers</a></li>
<li><a href="03-02-container-lifecycle">Container Lifecycle</a></li>
<li><a href="03-03-managing-containers">Managing Containers</a></li>
<li><a href="03-04-networking-in-docker">Networking in Docker</a></li>
<li><a href="03-05-data-persistence-with-volumes">Data Persistence with Volumes</a></li>
</ul>
<h2>Module 4: Docker Compose</h2>
<ul>
<li><a href="04-01-introduction-to-docker-compose">Introduction to Docker Compose</a></li>
<li><a href="04-02-defining-services-in-docker-compose">Defining Services in Docker Compose</a></li>
<li><a href="04-03-docker-compose-commands">Docker Compose Commands</a></li>
<li><a href="04-04-multi-container-applications">Multi-Container Applications</a></li>
<li><a href="04-05-environment-variables-in-docker-compose">Environment Variables in Docker Compose</a></li>
</ul>
<h2>Module 5: Advanced Docker Concepts</h2>
<ul>
<li><a href="05-01-docker-networking-deep-dive">Docker Networking Deep Dive</a></li>
<li><a href="05-02-docker-storage-options">Docker Storage Options</a></li>
<li><a href="05-03-docker-security-best-practices">Docker Security Best Practices</a></li>
<li><a href="05-04-optimizing-docker-images">Optimizing Docker Images</a></li>
<li><a href="05-05-docker-logging-and-monitoring">Docker Logging and Monitoring</a></li>
</ul>
<h2>Module 6: Docker in Production</h2>
<ul>
<li><a href="06-01-ci-cd-with-docker">CI/CD with Docker</a></li>
<li><a href="06-02-orchestrating-containers-with-docker-swarm">Orchestrating Containers with Docker Swarm</a></li>
<li><a href="06-03-introduction-to-kubernetes">Introduction to Kubernetes</a></li>
<li><a href="06-04-deploying-docker-containers-in-kubernetes">Deploying Docker Containers in Kubernetes</a></li>
<li><a href="06-05-scaling-and-load-balancing">Scaling and Load Balancing</a></li>
</ul>
<h2>Module 7: Docker Ecosystem and Tools</h2>
<ul>
<li><a href="07-01-docker-machine">Docker Machine</a></li>
<li><a href="07-02-docker-compose-vs-kubernetes">Docker Compose vs. Kubernetes</a></li>
<li><a href="07-03-docker-desktop">Docker Desktop</a></li>
<li><a href="07-04-third-party-tools-and-plugins">Third-Party Tools and Plugins</a></li>
<li><a href="07-05-future-of-docker">Future of Docker</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
