<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Persistence with Volumes</title>

    <link rel="alternate" href="https://campusempresa.com/mod/docker/03-05-data-persistence-with-volumes" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/docker/03-05-data-persistence-with-volumes" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/docker/03-05-data-persistence-with-volumes" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/docker/03-05-data-persistence-with-volumes" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/docker/03-05-data-persistence-with-volumes" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Programming Languages</a>
				 					<a href="/categ/frameworks">Frameworks and Libraries</a>
				 					<a href="/categ/tech-tools">Technical Tools</a>
				 					<a href="/categ/foundations">Theoretical Foundations</a>
				 					<a href="/categ/soft-skills">Social Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-04-networking-in-docker' title="Networking in Docker">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Data Persistence with Volumes</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-01-introduction-to-docker-compose' title="Introduction to Docker Compose">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to manage data persistence in Docker using volumes. Data persistence is crucial for maintaining data across container restarts and ensuring that your applications can store and retrieve data reliably.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Ephemeral Nature of Containers</strong>: By default, data stored inside a Docker container is ephemeral, meaning it is lost when the container stops or is removed.</li>
<li><strong>Volumes</strong>: Docker volumes are the preferred mechanism for persisting data generated by and used by Docker containers.</li>
<li><strong>Bind Mounts</strong>: Another way to persist data by mounting a host directory into a container.</li>
</ol>
</div><h1><p>Types of Volumes</p>
</h1>
<div class='content'><ol>
<li><strong>Anonymous Volumes</strong>: Created when you use the <code>-v</code> flag without specifying a name.</li>
<li><strong>Named Volumes</strong>: Created when you use the <code>-v</code> flag with a name.</li>
<li><strong>Bind Mounts</strong>: Use the <code>-v</code> flag with a host directory path.</li>
</ol>
</div><h1><p>Creating and Using Volumes</p>
</h1>
<div class='content'></div><h2><p>Creating a Named Volume</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHZvbHVtZSBjcmVhdGUgbXlfdm9sdW1l"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker volume create my_volume</pre></div><div class='content'></div><h2><p>Using a Volume in a Container</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtZCAtLW5hbWUgbXlfY29udGFpbmVyIC12IG15X3ZvbHVtZTovYXBwL2RhdGEgbXlfaW1hZ2U="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run -d --name my_container -v my_volume:/app/data my_image</pre></div><div class='content'></div><h2><p>Using a Bind Mount</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtZCAtLW5hbWUgbXlfY29udGFpbmVyIC12IC9ob3N0L2RhdGE6L2FwcC9kYXRhIG15X2ltYWdl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run -d --name my_container -v /host/data:/app/data my_image</pre></div><div class='content'></div><h2><p>Inspecting Volumes</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHZvbHVtZSBpbnNwZWN0IG15X3ZvbHVtZQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker volume inspect my_volume</pre></div><div class='content'></div><h1><p>Practical Example</p>
</h1>
<div class='content'><p>Let's create a simple example to demonstrate data persistence using volumes.</p>
</div><h2><p>Step 1: Create a Named Volume</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHZvbHVtZSBjcmVhdGUgbXlfZGF0YV92b2x1bWU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker volume create my_data_volume</pre></div><div class='content'></div><h2><p>Step 2: Run a Container with the Volume</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJ1biAtZCAtLW5hbWUgbXlfbmdpbnggLXYgbXlfZGF0YV92b2x1bWU6L3Vzci9zaGFyZS9uZ2lueC9odG1sIG5naW54"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker run -d --name my_nginx -v my_data_volume:/usr/share/nginx/html nginx</pre></div><div class='content'></div><h2><p>Step 3: Add Data to the Volume</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIGV4ZWMgLWl0IG15X25naW54IC9iaW4vYmFzaAplY2hvICJIZWxsbywgRG9ja2VyISIgPiAvdXNyL3NoYXJlL25naW54L2h0bWwvaW5kZXguaHRtbApleGl0"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker exec -it my_nginx /bin/bash
echo &quot;Hello, Docker!&quot; &gt; /usr/share/nginx/html/index.html
exit</pre></div><div class='content'></div><h2><p>Step 4: Verify Data Persistence</p>
</h2>
<div class='content'><ol>
<li>
<p>Stop and remove the container:</p>
<pre><code class="language-bash">docker stop my_nginx
docker rm my_nginx
</code></pre>
</li>
<li>
<p>Run a new container with the same volume:</p>
<pre><code class="language-bash">docker run -d --name my_new_nginx -v my_data_volume:/usr/share/nginx/html nginx
</code></pre>
</li>
<li>
<p>Verify the data is still there:</p>
<pre><code class="language-bash">docker exec -it my_new_nginx /bin/bash
cat /usr/share/nginx/html/index.html
</code></pre>
</li>
</ol>
</div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ul>
<li><strong>Mistake</strong>: Forgetting to specify the volume name, leading to the creation of anonymous volumes that are harder to manage.</li>
<li><strong>Tip</strong>: Always name your volumes for better management and clarity.</li>
<li><strong>Mistake</strong>: Using bind mounts without considering the security implications.</li>
<li><strong>Tip</strong>: Use named volumes for better isolation and security.</li>
</ul>
</div><h1><p>Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Create and Use a Named Volume</p>
</h2>
<div class='content'><ol>
<li>Create a named volume called <code>exercise_volume</code>.</li>
<li>Run a container using the <code>nginx</code> image and mount <code>exercise_volume</code> to <code>/usr/share/nginx/html</code>.</li>
<li>Add a file named <code>exercise.html</code> with the content &quot;Docker Exercise&quot; to the volume.</li>
<li>Stop and remove the container.</li>
<li>Run a new container with the same volume and verify the file <code>exercise.html</code> is still there.</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'><ol>
<li>
<p>Create the volume:</p>
<pre><code class="language-bash">docker volume create exercise_volume
</code></pre>
</li>
<li>
<p>Run the container:</p>
<pre><code class="language-bash">docker run -d --name exercise_nginx -v exercise_volume:/usr/share/nginx/html nginx
</code></pre>
</li>
<li>
<p>Add the file:</p>
<pre><code class="language-bash">docker exec -it exercise_nginx /bin/bash
echo &quot;Docker Exercise&quot; &gt; /usr/share/nginx/html/exercise.html
exit
</code></pre>
</li>
<li>
<p>Stop and remove the container:</p>
<pre><code class="language-bash">docker stop exercise_nginx
docker rm exercise_nginx
</code></pre>
</li>
<li>
<p>Run a new container and verify:</p>
<pre><code class="language-bash">docker run -d --name new_exercise_nginx -v exercise_volume:/usr/share/nginx/html nginx
docker exec -it new_exercise_nginx /bin/bash
cat /usr/share/nginx/html/exercise.html
</code></pre>
</li>
</ol>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we learned about the importance of data persistence in Docker and how to achieve it using volumes. We covered the different types of volumes, how to create and use them, and provided practical examples and exercises to reinforce the concepts. Understanding and effectively using volumes is crucial for managing data in Dockerized applications, especially in production environments.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-04-networking-in-docker' title="Networking in Docker">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-01-introduction-to-docker-compose' title="Introduction to Docker Compose">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
