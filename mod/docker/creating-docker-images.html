<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creating Docker Images</title>

    <link rel="alternate" href="https://campusempresa.com/mod/docker/creating-docker-images" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/docker/creating-docker-images" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/docker/creating-docker-images" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/docker/creating-docker-images" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/docker/creating-docker-images" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='docker-hub-official-images'>&#x25C4;Docker Hub and Official Images</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Creating Docker Images</a>
	</div>
	<div class='col-4 text-end'>
					<a href='dockerfile-basics'>Dockerfile Basics &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Creating Docker images is a fundamental skill for anyone working with Docker. This topic will guide you through the process from a beginner to an advanced level, covering key concepts, practical examples, and exercises to solidify your understanding.</p>
</div><h1>Introduction to Docker Images</h1>
<div class='content'><p>Docker images are the blueprints for creating Docker containers. They contain everything needed to run an application, including the code, runtime, libraries, environment variables, and configuration files.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Dockerfile</strong>: A text file that contains a series of instructions on how to build a Docker image.</li>
<li><strong>Base Image</strong>: The starting point for building your Docker image, often an official image from Docker Hub.</li>
<li><strong>Layers</strong>: Each instruction in a Dockerfile creates a new layer in the image, which helps in caching and reusability.</li>
<li><strong>Image Tagging</strong>: Assigning a version or identifier to an image, typically in the format <code>repository:tag</code>.</li>
</ul>
</div><h1>Writing a Dockerfile</h1>
<div class='content'><p>A Dockerfile is the core of creating Docker images. It defines the steps needed to assemble the image.</p>
</div><h2>Basic Dockerfile Structure</h2>
<div class='content'><p>Here is a simple example of a Dockerfile for a Node.js application:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVc2UgYW4gb2ZmaWNpYWwgTm9kZS5qcyBydW50aW1lIGFzIGEgcGFyZW50IGltYWdlCkZST00gbm9kZToxNAoKIyBTZXQgdGhlIHdvcmtpbmcgZGlyZWN0b3J5IGluIHRoZSBjb250YWluZXIKV09SS0RJUiAvdXNyL3NyYy9hcHAKCiMgQ29weSB0aGUgcGFja2FnZS5qc29uIGFuZCBwYWNrYWdlLWxvY2suanNvbiBmaWxlcwpDT1BZIHBhY2thZ2UqLmpzb24gLi8KCiMgSW5zdGFsbCB0aGUgYXBwbGljYXRpb24gZGVwZW5kZW5jaWVzClJVTiBucG0gaW5zdGFsbAoKIyBDb3B5IHRoZSByZXN0IG9mIHRoZSBhcHBsaWNhdGlvbiBjb2RlCkNPUFkgLiAuCgojIEV4cG9zZSB0aGUgYXBwbGljYXRpb24gcG9ydApFWFBPU0UgODA4MAoKIyBEZWZpbmUgdGhlIGNvbW1hbmQgdG8gcnVuIHRoZSBhcHBsaWNhdGlvbgpDTUQgWyJub2RlIiwgImFwcC5qcyJd"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Use an official Node.js runtime as a parent image
FROM node:14

# Set the working directory in the container
WORKDIR /usr/src/app

# Copy the package.json and package-lock.json files
COPY package*.json ./

# Install the application dependencies
RUN npm install

# Copy the rest of the application code
COPY . .

# Expose the application port
EXPOSE 8080

# Define the command to run the application
CMD [&quot;node&quot;, &quot;app.js&quot;]</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>FROM node:14</code>: Specifies the base image.</li>
<li><code>WORKDIR /usr/src/app</code>: Sets the working directory inside the container.</li>
<li><code>COPY package*.json ./</code>: Copies the package files to the working directory.</li>
<li><code>RUN npm install</code>: Installs the dependencies.</li>
<li><code>COPY . .</code>: Copies the rest of the application code.</li>
<li><code>EXPOSE 8080</code>: Exposes port 8080 for the application.</li>
<li><code>CMD [&quot;node&quot;, &quot;app.js&quot;]</code>: Specifies the command to run the application.</li>
</ul>
</div><h1>Building Docker Images</h1>
<div class='content'><p>Once you have a Dockerfile, you can build an image using the <code>docker build</code> command.</p>
</div><h2>Building an Image</h2>
<div class='content'><p>To build an image from the Dockerfile in the current directory, use the following command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIGJ1aWxkIC10IG15LW5vZGUtYXBwOjEuMCAu"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker build -t my-node-app:1.0 .</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>docker build</code>: The command to build a Docker image.</li>
<li><code>-t my-node-app:1.0</code>: Tags the image with the name <code>my-node-app</code> and version <code>1.0</code>.</li>
<li><code>.</code>: Specifies the build context, which is the current directory.</li>
</ul>
</div><h1>Managing Docker Images</h1>
<div class='content'><p>After building images, you need to manage them effectively.</p>
</div><h2>Listing Images</h2>
<div class='content'><p>To list all Docker images on your system, use:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIGltYWdlcw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker images</pre></div><div class='content'></div><h2>Removing Images</h2>
<div class='content'><p>To remove an image, use:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHJtaSBteS1ub2RlLWFwcDoxLjA="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker rmi my-node-app:1.0</pre></div><div class='content'></div><h2>Tagging Images</h2>
<div class='content'><p>To tag an existing image with a new tag, use:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIHRhZyBteS1ub2RlLWFwcDoxLjAgbXktbm9kZS1hcHA6bGF0ZXN0"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker tag my-node-app:1.0 my-node-app:latest</pre></div><div class='content'></div><h1>Advanced Dockerfile Instructions</h1>
<div class='content'><p>As you become more comfortable with Docker, you can use more advanced instructions to optimize your images.</p>
</div><h2>Multi-Stage Builds</h2>
<div class='content'><p>Multi-stage builds help in creating smaller, more efficient images by separating the build environment from the runtime environment.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBTdGFnZSAxOiBCdWlsZApGUk9NIG5vZGU6MTQgQVMgYnVpbGQKV09SS0RJUiAvdXNyL3NyYy9hcHAKQ09QWSBwYWNrYWdlKi5qc29uIC4vClJVTiBucG0gaW5zdGFsbApDT1BZIC4gLgpSVU4gbnBtIHJ1biBidWlsZAoKIyBTdGFnZSAyOiBQcm9kdWN0aW9uCkZST00gbm9kZToxNC1hbHBpbmUKV09SS0RJUiAvdXNyL3NyYy9hcHAKQ09QWSAtLWZyb209YnVpbGQgL3Vzci9zcmMvYXBwL2Rpc3QgLi9kaXN0CkVYUE9TRSA4MDgwCkNNRCBbIm5vZGUiLCAiZGlzdC9hcHAuanMiXQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Stage 1: Build
FROM node:14 AS build
WORKDIR /usr/src/app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build

# Stage 2: Production
FROM node:14-alpine
WORKDIR /usr/src/app
COPY --from=build /usr/src/app/dist ./dist
EXPOSE 8080
CMD [&quot;node&quot;, &quot;dist/app.js&quot;]</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>AS build</code>: Names the first stage <code>build</code>.</li>
<li><code>COPY --from=build /usr/src/app/dist ./dist</code>: Copies the built application from the <code>build</code> stage to the production stage.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Creating Docker images is a crucial skill for containerizing applications. By understanding and practicing the use of Dockerfiles, building images, and managing them, you can efficiently deploy and scale your applications. As you advance, leveraging techniques like multi-stage builds can further optimize your Docker images for production use.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='docker-hub-official-images'>&#x25C4;Docker Hub and Official Images</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Creating Docker Images</a>
	</div>
	<div class='col-4 text-end'>
					<a href='dockerfile-basics'>Dockerfile Basics &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
