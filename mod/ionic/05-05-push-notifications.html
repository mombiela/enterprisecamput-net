<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Push Notifications</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ionic/05-05-push-notifications" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ionic/05-05-push-notifications" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ionic/05-05-push-notifications" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/ionic/05-05-push-notifications" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/ionic/05-05-push-notifications" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-04-accessing-device-features' title="Accessing Device Features">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Push Notifications</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='06-01-unit-testing' title="Unit Testing in Ionic">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Push notifications are a powerful way to engage users by sending timely and relevant messages directly to their devices. In this section, we will cover how to implement push notifications in an Ionic application using Firebase Cloud Messaging (FCM) and Ionic Native.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Push Notifications</strong>: Messages sent from a server to a user's device, even when the app is not running.</li>
<li><strong>Firebase Cloud Messaging (FCM)</strong>: A service provided by Firebase that enables you to send notifications to users.</li>
<li><strong>Ionic Native</strong>: A set of TypeScript wrappers for Cordova/Capacitor plugins that make it easy to use native device features.</li>
</ol>
</div><h1>Steps to Implement Push Notifications</h1>
<div class='content'></div><h2>1. Setting Up Firebase</h2>
<div class='content'><ol>
<li>
<p><strong>Create a Firebase Project</strong>:</p>
<ul>
<li>Go to the <a href="https://console.firebase.google.com/">Firebase Console</a>.</li>
<li>Click on &quot;Add project&quot; and follow the instructions to create a new project.</li>
</ul>
</li>
<li>
<p><strong>Add Your App to Firebase</strong>:</p>
<ul>
<li>In the Firebase project, click on the &quot;Add app&quot; button and select the platform (iOS/Android).</li>
<li>Follow the instructions to register your app and download the <code>google-services.json</code> (for Android) or <code>GoogleService-Info.plist</code> (for iOS) file.</li>
</ul>
</li>
<li>
<p><strong>Configure Firebase in Your Ionic App</strong>:</p>
<ul>
<li>Place the <code>google-services.json</code> file in the <code>android/app</code> directory.</li>
<li>For iOS, place the <code>GoogleService-Info.plist</code> file in the <code>ios/App</code> directory.</li>
</ul>
</li>
</ol>
</div><h2>2. Installing Required Plugins</h2>
<div class='content'><p>Install the necessary plugins for push notifications:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW9uaWMgY29yZG92YSBwbHVnaW4gYWRkIGNvcmRvdmEtcGx1Z2luLWZpcmViYXNlCm5wbSBpbnN0YWxsIEBpb25pYy1uYXRpdmUvZmlyZWJhc2U="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ionic cordova plugin add cordova-plugin-firebase
npm install @ionic-native/firebase</pre></div><div class='content'></div><h2>3. Configuring the App Module</h2>
<div class='content'><p>Add the Firebase plugin to your <code>app.module.ts</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgRmlyZWJhc2UgfSBmcm9tICdAaW9uaWMtbmF0aXZlL2ZpcmViYXNlL25neCc7CgpATmdNb2R1bGUoewogIC4uLgogIHByb3ZpZGVyczogWwogICAgRmlyZWJhc2UsCiAgICAuLi4KICBdCn0pCmV4cG9ydCBjbGFzcyBBcHBNb2R1bGUge30="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Firebase } from '@ionic-native/firebase/ngx';

@NgModule({
  ...
  providers: [
    Firebase,
    ...
  ]
})
export class AppModule {}</pre></div><div class='content'></div><h2>4. Requesting Permission</h2>
<div class='content'><p>Request permission to send notifications in your app's main component (<code>app.component.ts</code>):</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CmltcG9ydCB7IFBsYXRmb3JtIH0gZnJvbSAnQGlvbmljL2FuZ3VsYXInOwppbXBvcnQgeyBGaXJlYmFzZSB9IGZyb20gJ0Bpb25pYy1uYXRpdmUvZmlyZWJhc2Uvbmd4JzsKCkBDb21wb25lbnQoewogIHNlbGVjdG9yOiAnYXBwLXJvb3QnLAogIHRlbXBsYXRlVXJsOiAnYXBwLmNvbXBvbmVudC5odG1sJywKICBzdHlsZVVybHM6IFsnYXBwLmNvbXBvbmVudC5zY3NzJ10sCn0pCmV4cG9ydCBjbGFzcyBBcHBDb21wb25lbnQgewogIGNvbnN0cnVjdG9yKAogICAgcHJpdmF0ZSBwbGF0Zm9ybTogUGxhdGZvcm0sCiAgICBwcml2YXRlIGZpcmViYXNlOiBGaXJlYmFzZQogICkgewogICAgdGhpcy5pbml0aWFsaXplQXBwKCk7CiAgfQoKICBpbml0aWFsaXplQXBwKCkgewogICAgdGhpcy5wbGF0Zm9ybS5yZWFkeSgpLnRoZW4oKCkgPT4gewogICAgICB0aGlzLmZpcmViYXNlLmhhc1Blcm1pc3Npb24oKS50aGVuKChoYXNQZXJtaXNzaW9uKSA9PiB7CiAgICAgICAgaWYgKCFoYXNQZXJtaXNzaW9uKSB7CiAgICAgICAgICB0aGlzLmZpcmViYXNlLmdyYW50UGVybWlzc2lvbigpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Component } from '@angular/core';
import { Platform } from '@ionic/angular';
import { Firebase } from '@ionic-native/firebase/ngx';

@Component({
  selector: 'app-root',
  templateUrl: 'app.component.html',
  styleUrls: ['app.component.scss'],
})
export class AppComponent {
  constructor(
    private platform: Platform,
    private firebase: Firebase
  ) {
    this.initializeApp();
  }

  initializeApp() {
    this.platform.ready().then(() =&gt; {
      this.firebase.hasPermission().then((hasPermission) =&gt; {
        if (!hasPermission) {
          this.firebase.grantPermission();
        }
      });
    });
  }
}</pre></div><div class='content'></div><h2>5. Receiving Notifications</h2>
<div class='content'><p>Handle incoming notifications in your app:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CmltcG9ydCB7IFBsYXRmb3JtIH0gZnJvbSAnQGlvbmljL2FuZ3VsYXInOwppbXBvcnQgeyBGaXJlYmFzZSB9IGZyb20gJ0Bpb25pYy1uYXRpdmUvZmlyZWJhc2Uvbmd4JzsKCkBDb21wb25lbnQoewogIHNlbGVjdG9yOiAnYXBwLXJvb3QnLAogIHRlbXBsYXRlVXJsOiAnYXBwLmNvbXBvbmVudC5odG1sJywKICBzdHlsZVVybHM6IFsnYXBwLmNvbXBvbmVudC5zY3NzJ10sCn0pCmV4cG9ydCBjbGFzcyBBcHBDb21wb25lbnQgewogIGNvbnN0cnVjdG9yKAogICAgcHJpdmF0ZSBwbGF0Zm9ybTogUGxhdGZvcm0sCiAgICBwcml2YXRlIGZpcmViYXNlOiBGaXJlYmFzZQogICkgewogICAgdGhpcy5pbml0aWFsaXplQXBwKCk7CiAgfQoKICBpbml0aWFsaXplQXBwKCkgewogICAgdGhpcy5wbGF0Zm9ybS5yZWFkeSgpLnRoZW4oKCkgPT4gewogICAgICB0aGlzLmZpcmViYXNlLm9uTm90aWZpY2F0aW9uT3BlbigpLnN1YnNjcmliZSgobm90aWZpY2F0aW9uKSA9PiB7CiAgICAgICAgaWYgKG5vdGlmaWNhdGlvbi50YXApIHsKICAgICAgICAgIC8vIEFwcCB3YXMgaW4gYmFja2dyb3VuZAogICAgICAgICAgY29uc29sZS5sb2coJ1JlY2VpdmVkIGluIGJhY2tncm91bmQnLCBub3RpZmljYXRpb24pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBBcHAgd2FzIGluIGZvcmVncm91bmQKICAgICAgICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCBpbiBmb3JlZ3JvdW5kJywgbm90aWZpY2F0aW9uKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Component } from '@angular/core';
import { Platform } from '@ionic/angular';
import { Firebase } from '@ionic-native/firebase/ngx';

@Component({
  selector: 'app-root',
  templateUrl: 'app.component.html',
  styleUrls: ['app.component.scss'],
})
export class AppComponent {
  constructor(
    private platform: Platform,
    private firebase: Firebase
  ) {
    this.initializeApp();
  }

  initializeApp() {
    this.platform.ready().then(() =&gt; {
      this.firebase.onNotificationOpen().subscribe((notification) =&gt; {
        if (notification.tap) {
          // App was in background
          console.log('Received in background', notification);
        } else {
          // App was in foreground
          console.log('Received in foreground', notification);
        }
      });
    });
  }
}</pre></div><div class='content'></div><h2>6. Sending Notifications</h2>
<div class='content'><p>You can send notifications using the Firebase Console or programmatically via the FCM API. Here is an example of sending a notification using the Firebase Console:</p>
<ol>
<li>Go to the Firebase Console.</li>
<li>Select your project.</li>
<li>Navigate to &quot;Cloud Messaging&quot;.</li>
<li>Click on &quot;Send your first message&quot;.</li>
<li>Fill in the message details and target your app.</li>
</ol>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise: Implement Push Notifications</h2>
<div class='content'><ol>
<li><strong>Setup Firebase</strong>: Create a Firebase project and add your Ionic app.</li>
<li><strong>Install Plugins</strong>: Install the necessary plugins for push notifications.</li>
<li><strong>Request Permission</strong>: Modify your <code>app.component.ts</code> to request notification permissions.</li>
<li><strong>Handle Notifications</strong>: Implement code to handle incoming notifications.</li>
<li><strong>Send a Test Notification</strong>: Use the Firebase Console to send a test notification to your app.</li>
</ol>
</div><h2>Solution</h2>
<div class='content'><p>Follow the steps outlined in the guide above to complete the exercise. Ensure that you have correctly configured Firebase and installed the necessary plugins. Test the implementation by sending a notification from the Firebase Console.</p>
</div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Missing Permissions</strong>: Ensure that you have requested and granted notification permissions.</li>
<li><strong>Incorrect File Placement</strong>: Make sure the <code>google-services.json</code> or <code>GoogleService-Info.plist</code> files are placed in the correct directories.</li>
<li><strong>Plugin Installation</strong>: Verify that the plugins are correctly installed and added to your <code>app.module.ts</code>.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, you learned how to implement push notifications in an Ionic application using Firebase Cloud Messaging and Ionic Native. Push notifications are a crucial feature for engaging users and keeping them informed. By following the steps and completing the exercise, you should now be able to integrate push notifications into your Ionic apps effectively.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-04-accessing-device-features' title="Accessing Device Features">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='06-01-unit-testing' title="Unit Testing in Ionic">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
