<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessing Device Features</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ionic/05-04-accessing-device-features" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ionic/05-04-accessing-device-features" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ionic/05-04-accessing-device-features" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/ionic/05-04-accessing-device-features" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/ionic/05-04-accessing-device-features" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-03-ionic-native-cordova-plugins' title="Using Ionic Native and Cordova Plugins">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Accessing Device Features</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-05-push-notifications' title="Push Notifications">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to access various device features using Ionic Native and Cordova plugins. This is crucial for creating apps that can interact with the hardware and native capabilities of the device, such as the camera, GPS, and more.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Ionic Native</strong>: A curated set of wrappers for Cordova plugins that make it easy to integrate native functionality into your Ionic apps.</li>
<li><strong>Cordova Plugins</strong>: Plugins that provide access to device capabilities like the camera, GPS, and file system.</li>
<li><strong>Capacitor</strong>: A modern alternative to Cordova that provides a consistent API for accessing native functionality.</li>
</ol>
</div><h1>Steps to Access Device Features</h1>
<div class='content'></div><h2>1. Installing Ionic Native and Cordova Plugins</h2>
<div class='content'><p>To use a specific device feature, you need to install the corresponding Ionic Native and Cordova plugin. For example, to use the camera:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW9uaWMgY29yZG92YSBwbHVnaW4gYWRkIGNvcmRvdmEtcGx1Z2luLWNhbWVyYQpucG0gaW5zdGFsbCBAaW9uaWMtbmF0aXZlL2NhbWVyYQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ionic cordova plugin add cordova-plugin-camera
npm install @ionic-native/camera</pre></div><div class='content'></div><h2>2. Importing and Injecting the Plugin</h2>
<div class='content'><p>After installing the plugin, import it into your component or service and inject it into the constructor. Here’s an example of using the Camera plugin:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CmltcG9ydCB7IENhbWVyYSwgQ2FtZXJhT3B0aW9ucyB9IGZyb20gJ0Bpb25pYy1uYXRpdmUvY2FtZXJhL25neCc7CgpAQ29tcG9uZW50KHsKICBzZWxlY3RvcjogJ2FwcC1ob21lJywKICB0ZW1wbGF0ZVVybDogJ2hvbWUucGFnZS5odG1sJywKICBzdHlsZVVybHM6IFsnaG9tZS5wYWdlLnNjc3MnXSwKfSkKZXhwb3J0IGNsYXNzIEhvbWVQYWdlIHsKICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNhbWVyYTogQ2FtZXJhKSB7fQoKICB0YWtlUGljdHVyZSgpIHsKICAgIGNvbnN0IG9wdGlvbnM6IENhbWVyYU9wdGlvbnMgPSB7CiAgICAgIHF1YWxpdHk6IDEwMCwKICAgICAgZGVzdGluYXRpb25UeXBlOiB0aGlzLmNhbWVyYS5EZXN0aW5hdGlvblR5cGUuREFUQV9VUkwsCiAgICAgIGVuY29kaW5nVHlwZTogdGhpcy5jYW1lcmEuRW5jb2RpbmdUeXBlLkpQRUcsCiAgICAgIG1lZGlhVHlwZTogdGhpcy5jYW1lcmEuTWVkaWFUeXBlLlBJQ1RVUkUKICAgIH07CgogICAgdGhpcy5jYW1lcmEuZ2V0UGljdHVyZShvcHRpb25zKS50aGVuKChpbWFnZURhdGEpID0+IHsKICAgICAgbGV0IGJhc2U2NEltYWdlID0gJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsJyArIGltYWdlRGF0YTsKICAgICAgLy8gRG8gc29tZXRoaW5nIHdpdGggdGhlIGltYWdlCiAgICB9LCAoZXJyKSA9PiB7CiAgICAgIC8vIEhhbmRsZSBlcnJvcgogICAgfSk7CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Component } from '@angular/core';
import { Camera, CameraOptions } from '@ionic-native/camera/ngx';

@Component({
  selector: 'app-home',
  templateUrl: 'home.page.html',
  styleUrls: ['home.page.scss'],
})
export class HomePage {
  constructor(private camera: Camera) {}

  takePicture() {
    const options: CameraOptions = {
      quality: 100,
      destinationType: this.camera.DestinationType.DATA_URL,
      encodingType: this.camera.EncodingType.JPEG,
      mediaType: this.camera.MediaType.PICTURE
    };

    this.camera.getPicture(options).then((imageData) =&gt; {
      let base64Image = 'data:image/jpeg;base64,' + imageData;
      // Do something with the image
    }, (err) =&gt; {
      // Handle error
    });
  }
}</pre></div><div class='content'></div><h2>3. Using the Plugin</h2>
<div class='content'><p>In the example above, the <code>takePicture</code> method uses the Camera plugin to capture a photo. The <code>CameraOptions</code> object allows you to configure the camera settings.</p>
</div><h2>Practical Example: Accessing Geolocation</h2>
<div class='content'><p>Let's look at another example where we access the device's geolocation:</p>
<h4>Step 1: Install the Plugin</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW9uaWMgY29yZG92YSBwbHVnaW4gYWRkIGNvcmRvdmEtcGx1Z2luLWdlb2xvY2F0aW9uCm5wbSBpbnN0YWxsIEBpb25pYy1uYXRpdmUvZ2VvbG9jYXRpb24="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ionic cordova plugin add cordova-plugin-geolocation
npm install @ionic-native/geolocation</pre></div><div class='content'><h4>Step 2: Import and Inject the Plugin</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CmltcG9ydCB7IEdlb2xvY2F0aW9uIH0gZnJvbSAnQGlvbmljLW5hdGl2ZS9nZW9sb2NhdGlvbi9uZ3gnOwoKQENvbXBvbmVudCh7CiAgc2VsZWN0b3I6ICdhcHAtaG9tZScsCiAgdGVtcGxhdGVVcmw6ICdob21lLnBhZ2UuaHRtbCcsCiAgc3R5bGVVcmxzOiBbJ2hvbWUucGFnZS5zY3NzJ10sCn0pCmV4cG9ydCBjbGFzcyBIb21lUGFnZSB7CiAgY29uc3RydWN0b3IocHJpdmF0ZSBnZW9sb2NhdGlvbjogR2VvbG9jYXRpb24pIHt9CgogIGdldEN1cnJlbnRMb2NhdGlvbigpIHsKICAgIHRoaXMuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKCkudGhlbigocmVzcCkgPT4gewogICAgICBjb25zb2xlLmxvZygnTGF0aXR1ZGU6ICcgKyByZXNwLmNvb3Jkcy5sYXRpdHVkZSk7CiAgICAgIGNvbnNvbGUubG9nKCdMb25naXR1ZGU6ICcgKyByZXNwLmNvb3Jkcy5sb25naXR1ZGUpOwogICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBnZXR0aW5nIGxvY2F0aW9uJywgZXJyb3IpOwogICAgfSk7CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { Component } from '@angular/core';
import { Geolocation } from '@ionic-native/geolocation/ngx';

@Component({
  selector: 'app-home',
  templateUrl: 'home.page.html',
  styleUrls: ['home.page.scss'],
})
export class HomePage {
  constructor(private geolocation: Geolocation) {}

  getCurrentLocation() {
    this.geolocation.getCurrentPosition().then((resp) =&gt; {
      console.log('Latitude: ' + resp.coords.latitude);
      console.log('Longitude: ' + resp.coords.longitude);
    }).catch((error) =&gt; {
      console.log('Error getting location', error);
    });
  }
}</pre></div><div class='content'></div><h2>4. Handling Permissions</h2>
<div class='content'><p>Some plugins require permissions to be granted by the user. Ensure you handle these permissions appropriately. For example, the Geolocation plugin may require location permissions.</p>
</div><h2>Common Mistakes and Tips</h2>
<div class='content'><ul>
<li><strong>Plugin Not Installed Correctly</strong>: Ensure you have installed both the Cordova plugin and the Ionic Native wrapper.</li>
<li><strong>Permissions</strong>: Always check and request necessary permissions before accessing device features.</li>
<li><strong>Platform-Specific Code</strong>: Some plugins may behave differently on iOS and Android. Test your app on both platforms.</li>
</ul>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Task</h2>
<div class='content'><p>Create an Ionic app that uses the Camera and Geolocation plugins to take a picture and display the current location.</p>
</div><h2>Solution</h2>
<div class='content'><ol>
<li>
<p><strong>Install Plugins</strong>:</p>
<pre><code class="language-bash">ionic cordova plugin add cordova-plugin-camera cordova-plugin-geolocation
npm install @ionic-native/camera @ionic-native/geolocation
</code></pre>
</li>
<li>
<p><strong>Update <code>home.page.ts</code></strong>:</p>
<pre><code class="language-typescript">import { Component } from '@angular/core';
import { Camera, CameraOptions } from '@ionic-native/camera/ngx';
import { Geolocation } from '@ionic-native/geolocation/ngx';

@Component({
  selector: 'app-home',
  templateUrl: 'home.page.html',
  styleUrls: ['home.page.scss'],
})
export class HomePage {
  image: string;
  location: { latitude: number, longitude: number };

  constructor(private camera: Camera, private geolocation: Geolocation) {}

  takePicture() {
    const options: CameraOptions = {
      quality: 100,
      destinationType: this.camera.DestinationType.DATA_URL,
      encodingType: this.camera.EncodingType.JPEG,
      mediaType: this.camera.MediaType.PICTURE
    };

    this.camera.getPicture(options).then((imageData) =&gt; {
      this.image = 'data:image/jpeg;base64,' + imageData;
    }, (err) =&gt; {
      console.log('Error taking picture', err);
    });
  }

  getCurrentLocation() {
    this.geolocation.getCurrentPosition().then((resp) =&gt; {
      this.location = {
        latitude: resp.coords.latitude,
        longitude: resp.coords.longitude
      };
    }).catch((error) =&gt; {
      console.log('Error getting location', error);
    });
  }
}
</code></pre>
</li>
<li>
<p><strong>Update <code>home.page.html</code></strong>:</p>
<pre><code class="language-html">&lt;ion-header&gt;
  &lt;ion-toolbar&gt;
    &lt;ion-title&gt;
      Home
    &lt;/ion-title&gt;
  &lt;/ion-toolbar&gt;
&lt;/ion-header&gt;

&lt;ion-content&gt;
  &lt;ion-button (click)=&quot;takePicture()&quot;&gt;Take Picture&lt;/ion-button&gt;
  &lt;img *ngIf=&quot;image&quot; [src]=&quot;image&quot; /&gt;

  &lt;ion-button (click)=&quot;getCurrentLocation()&quot;&gt;Get Location&lt;/ion-button&gt;
  &lt;div *ngIf=&quot;location&quot;&gt;
    &lt;p&gt;Latitude: {{ location.latitude }}&lt;/p&gt;
    &lt;p&gt;Longitude: {{ location.longitude }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/ion-content&gt;
</code></pre>
</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, we learned how to access device features using Ionic Native and Cordova plugins. We covered the installation, usage, and handling of permissions for these plugins. By following the examples and exercises, you should now be able to integrate various device features into your Ionic applications. In the next section, we will explore push notifications and how to implement them in your app.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-03-ionic-native-cordova-plugins' title="Using Ionic Native and Cordova Plugins">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-05-push-notifications' title="Push Notifications">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
