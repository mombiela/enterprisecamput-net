<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building a Simple Application</title>

    <link rel="alternate" href="https://campusempresa.com/mod/plsql/building-simple-application" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/plsql/building-simple-application" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/plsql/building-simple-application" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/plsql/building-simple-application" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/plsql/building-simple-application" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='code-review-refactoring'>&#x25C4;Code Review and Refactoring</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Building a Simple Application</a>
	</div>
	<div class='col-4 text-end'>
					<a href='integrating-plsql-other-languages'>Integrating PL/SQL with Other Languages &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this topic, we will guide you through the process of building a simple application using PL/SQL. This will include creating tables, writing PL/SQL code to manipulate data, and understanding how to integrate PL/SQL with other database objects.</p>
</div><h1>Introduction to PL/SQL</h1>
<div class='content'><p>PL/SQL (Procedural Language/Structured Query Language) is Oracle Corporation's procedural extension for SQL and the Oracle relational database. It allows you to write code that combines the power of SQL with procedural constructs.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>PL/SQL Block Structure</strong>: The basic unit of a PL/SQL program is a block, which can be anonymous or named.</li>
<li><strong>Control Structures</strong>: PL/SQL supports control structures like loops, conditionals, and exception handling.</li>
<li><strong>Cursors</strong>: Used to retrieve multiple rows from a query.</li>
<li><strong>Procedures and Functions</strong>: Encapsulate reusable code.</li>
<li><strong>Packages</strong>: Group related procedures, functions, and other elements.</li>
</ul>
</div><h1>Setting Up the Environment</h1>
<div class='content'><p>Before we start building our application, ensure you have access to an Oracle Database and a tool like SQL*Plus or Oracle SQL Developer.</p>
</div><h2>Creating the Database Schema</h2>
<div class='content'><p>We will create a simple schema for a library management system. This includes tables for books, authors, and loans.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIGF1dGhvcnMgKAogICAgYXV0aG9yX2lkIE5VTUJFUiBQUklNQVJZIEtFWSwKICAgIG5hbWUgVkFSQ0hBUjIoMTAwKQopOwoKQ1JFQVRFIFRBQkxFIGJvb2tzICgKICAgIGJvb2tfaWQgTlVNQkVSIFBSSU1BUlkgS0VZLAogICAgdGl0bGUgVkFSQ0hBUjIoMTAwKSwKICAgIGF1dGhvcl9pZCBOVU1CRVIsCiAgICBGT1JFSUdOIEtFWSAoYXV0aG9yX2lkKSBSRUZFUkVOQ0VTIGF1dGhvcnMoYXV0aG9yX2lkKQopOwoKQ1JFQVRFIFRBQkxFIGxvYW5zICgKICAgIGxvYW5faWQgTlVNQkVSIFBSSU1BUlkgS0VZLAogICAgYm9va19pZCBOVU1CRVIsCiAgICBsb2FuX2RhdGUgREFURSwKICAgIHJldHVybl9kYXRlIERBVEUsCiAgICBGT1JFSUdOIEtFWSAoYm9va19pZCkgUkVGRVJFTkNFUyBib29rcyhib29rX2lkKQopOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE authors (
    author_id NUMBER PRIMARY KEY,
    name VARCHAR2(100)
);

CREATE TABLE books (
    book_id NUMBER PRIMARY KEY,
    title VARCHAR2(100),
    author_id NUMBER,
    FOREIGN KEY (author_id) REFERENCES authors(author_id)
);

CREATE TABLE loans (
    loan_id NUMBER PRIMARY KEY,
    book_id NUMBER,
    loan_date DATE,
    return_date DATE,
    FOREIGN KEY (book_id) REFERENCES books(book_id)
);</pre></div><div class='content'></div><h2>Inserting Initial Data</h2>
<div class='content'><p>Let's insert some initial data into our tables.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SU5TRVJUIElOVE8gYXV0aG9ycyAoYXV0aG9yX2lkLCBuYW1lKSBWQUxVRVMgKDEsICdKLksuIFJvd2xpbmcnKTsKSU5TRVJUIElOVE8gYXV0aG9ycyAoYXV0aG9yX2lkLCBuYW1lKSBWQUxVRVMgKDIsICdHZW9yZ2UgUi5SLiBNYXJ0aW4nKTsKCklOU0VSVCBJTlRPIGJvb2tzIChib29rX2lkLCB0aXRsZSwgYXV0aG9yX2lkKSBWQUxVRVMgKDEsICdIYXJyeSBQb3R0ZXIgYW5kIHRoZSBQaGlsb3NvcGhlcicncyBTdG9uZScsIDEpOwpJTlNFUlQgSU5UTyBib29rcyAoYm9va19pZCwgdGl0bGUsIGF1dGhvcl9pZCkgVkFMVUVTICgyLCAnQSBHYW1lIG9mIFRocm9uZXMnLCAyKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>INSERT INTO authors (author_id, name) VALUES (1, 'J.K. Rowling');
INSERT INTO authors (author_id, name) VALUES (2, 'George R.R. Martin');

INSERT INTO books (book_id, title, author_id) VALUES (1, 'Harry Potter and the Philosopher''s Stone', 1);
INSERT INTO books (book_id, title, author_id) VALUES (2, 'A Game of Thrones', 2);</pre></div><div class='content'></div><h1>Writing PL/SQL Code</h1>
<div class='content'></div><h2>Anonymous Blocks</h2>
<div class='content'><p>An anonymous block is a PL/SQL block that does not have a name. It is useful for quick, one-time operations.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4KICAgIERCTVNfT1VUUFVULlBVVF9MSU5FKCdIZWxsbywgUEwvU1FMIScpOwpFTkQ7Ci8="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN
    DBMS_OUTPUT.PUT_LINE('Hello, PL/SQL!');
END;
/</pre></div><div class='content'></div><h2>Stored Procedures</h2>
<div class='content'><p>Stored procedures are named PL/SQL blocks that can be reused. Let's create a procedure to loan a book.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIE9SIFJFUExBQ0UgUFJPQ0VEVVJFIGxvYW5fYm9vayhwX2Jvb2tfaWQgTlVNQkVSLCBwX2xvYW5fZGF0ZSBEQVRFKSBJUwpCRUdJTgogICAgSU5TRVJUIElOVE8gbG9hbnMgKGxvYW5faWQsIGJvb2tfaWQsIGxvYW5fZGF0ZSkgCiAgICBWQUxVRVMgKGxvYW5zX3NlcS5ORVhUVkFMLCBwX2Jvb2tfaWQsIHBfbG9hbl9kYXRlKTsKICAgIENPTU1JVDsKRU5EOwov"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE OR REPLACE PROCEDURE loan_book(p_book_id NUMBER, p_loan_date DATE) IS
BEGIN
    INSERT INTO loans (loan_id, book_id, loan_date) 
    VALUES (loans_seq.NEXTVAL, p_book_id, p_loan_date);
    COMMIT;
END;
/</pre></div><div class='content'></div><h2>Functions</h2>
<div class='content'><p>Functions are similar to procedures but return a value. Let's create a function to check if a book is available.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIE9SIFJFUExBQ0UgRlVOQ1RJT04gaXNfYm9va19hdmFpbGFibGUocF9ib29rX2lkIE5VTUJFUikgUkVUVVJOIEJPT0xFQU4gSVMKICAgIHZfY291bnQgTlVNQkVSOwpCRUdJTgogICAgU0VMRUNUIENPVU5UKCopIElOVE8gdl9jb3VudCAKICAgIEZST00gbG9hbnMgCiAgICBXSEVSRSBib29rX2lkID0gcF9ib29rX2lkIEFORCByZXR1cm5fZGF0ZSBJUyBOVUxMOwoKICAgIFJFVFVSTiB2X2NvdW50ID0gMDsKRU5EOwov"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE OR REPLACE FUNCTION is_book_available(p_book_id NUMBER) RETURN BOOLEAN IS
    v_count NUMBER;
BEGIN
    SELECT COUNT(*) INTO v_count 
    FROM loans 
    WHERE book_id = p_book_id AND return_date IS NULL;

    RETURN v_count = 0;
END;
/</pre></div><div class='content'></div><h2>Using Cursors</h2>
<div class='content'><p>Cursors allow you to fetch multiple rows from a query. Hereâ€™s an example of using an explicit cursor.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("REVDTEFSRQogICAgQ1VSU09SIGJvb2tfY3Vyc29yIElTCiAgICAgICAgU0VMRUNUIHRpdGxlIEZST00gYm9va3M7CiAgICB2X3RpdGxlIGJvb2tzLnRpdGxlJVRZUEU7CkJFR0lOCiAgICBPUEVOIGJvb2tfY3Vyc29yOwogICAgTE9PUAogICAgICAgIEZFVENIIGJvb2tfY3Vyc29yIElOVE8gdl90aXRsZTsKICAgICAgICBFWElUIFdIRU4gYm9va19jdXJzb3IlTk9URk9VTkQ7CiAgICAgICAgREJNU19PVVRQVVQuUFVUX0xJTkUodl90aXRsZSk7CiAgICBFTkQgTE9PUDsKICAgIENMT1NFIGJvb2tfY3Vyc29yOwpFTkQ7Ci8="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DECLARE
    CURSOR book_cursor IS
        SELECT title FROM books;
    v_title books.title%TYPE;
BEGIN
    OPEN book_cursor;
    LOOP
        FETCH book_cursor INTO v_title;
        EXIT WHEN book_cursor%NOTFOUND;
        DBMS_OUTPUT.PUT_LINE(v_title);
    END LOOP;
    CLOSE book_cursor;
END;
/</pre></div><div class='content'></div><h1>Advanced PL/SQL Concepts</h1>
<div class='content'></div><h2>Exception Handling</h2>
<div class='content'><p>Exception handling allows you to manage errors gracefully.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QkVHSU4KICAgIC0tIFNvbWUgb3BlcmF0aW9uIHRoYXQgbWlnaHQgY2F1c2UgYW4gZXJyb3IKICAgIElOU0VSVCBJTlRPIGxvYW5zIChsb2FuX2lkLCBib29rX2lkLCBsb2FuX2RhdGUpIFZBTFVFUyAoMSwgMSwgU1lTREFURSk7CkVYQ0VQVElPTgogICAgV0hFTiBEVVBfVkFMX09OX0lOREVYIFRIRU4KICAgICAgICBEQk1TX09VVFBVVC5QVVRfTElORSgnRHVwbGljYXRlIHZhbHVlIGVycm9yLicpOwogICAgV0hFTiBPVEhFUlMgVEhFTgogICAgICAgIERCTVNfT1VUUFVULlBVVF9MSU5FKCdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLicpOwpFTkQ7Ci8="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>BEGIN
    -- Some operation that might cause an error
    INSERT INTO loans (loan_id, book_id, loan_date) VALUES (1, 1, SYSDATE);
EXCEPTION
    WHEN DUP_VAL_ON_INDEX THEN
        DBMS_OUTPUT.PUT_LINE('Duplicate value error.');
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('An unexpected error occurred.');
END;
/</pre></div><div class='content'></div><h2>Packages</h2>
<div class='content'><p>Packages group related procedures, functions, and other elements. Hereâ€™s an example of a simple package.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIE9SIFJFUExBQ0UgUEFDS0FHRSBsaWJyYXJ5X3BrZyBJUwogICAgUFJPQ0VEVVJFIGxvYW5fYm9vayhwX2Jvb2tfaWQgTlVNQkVSLCBwX2xvYW5fZGF0ZSBEQVRFKTsKICAgIEZVTkNUSU9OIGlzX2Jvb2tfYXZhaWxhYmxlKHBfYm9va19pZCBOVU1CRVIpIFJFVFVSTiBCT09MRUFOOwpFTkQgbGlicmFyeV9wa2c7Ci8KCkNSRUFURSBPUiBSRVBMQUNFIFBBQ0tBR0UgQk9EWSBsaWJyYXJ5X3BrZyBJUwogICAgUFJPQ0VEVVJFIGxvYW5fYm9vayhwX2Jvb2tfaWQgTlVNQkVSLCBwX2xvYW5fZGF0ZSBEQVRFKSBJUwogICAgQkVHSU4KICAgICAgICBJTlNFUlQgSU5UTyBsb2FucyAobG9hbl9pZCwgYm9va19pZCwgbG9hbl9kYXRlKSAKICAgICAgICBWQUxVRVMgKGxvYW5zX3NlcS5ORVhUVkFMLCBwX2Jvb2tfaWQsIHBfbG9hbl9kYXRlKTsKICAgICAgICBDT01NSVQ7CiAgICBFTkQgbG9hbl9ib29rOwoKICAgIEZVTkNUSU9OIGlzX2Jvb2tfYXZhaWxhYmxlKHBfYm9va19pZCBOVU1CRVIpIFJFVFVSTiBCT09MRUFOIElTCiAgICAgICAgdl9jb3VudCBOVU1CRVI7CiAgICBCRUdJTgogICAgICAgIFNFTEVDVCBDT1VOVCgqKSBJTlRPIHZfY291bnQgCiAgICAgICAgRlJPTSBsb2FucyAKICAgICAgICBXSEVSRSBib29rX2lkID0gcF9ib29rX2lkIEFORCByZXR1cm5fZGF0ZSBJUyBOVUxMOwoKICAgICAgICBSRVRVUk4gdl9jb3VudCA9IDA7CiAgICBFTkQgaXNfYm9va19hdmFpbGFibGU7CkVORCBsaWJyYXJ5X3BrZzsKLw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE OR REPLACE PACKAGE library_pkg IS
    PROCEDURE loan_book(p_book_id NUMBER, p_loan_date DATE);
    FUNCTION is_book_available(p_book_id NUMBER) RETURN BOOLEAN;
END library_pkg;
/

CREATE OR REPLACE PACKAGE BODY library_pkg IS
    PROCEDURE loan_book(p_book_id NUMBER, p_loan_date DATE) IS
    BEGIN
        INSERT INTO loans (loan_id, book_id, loan_date) 
        VALUES (loans_seq.NEXTVAL, p_book_id, p_loan_date);
        COMMIT;
    END loan_book;

    FUNCTION is_book_available(p_book_id NUMBER) RETURN BOOLEAN IS
        v_count NUMBER;
    BEGIN
        SELECT COUNT(*) INTO v_count 
        FROM loans 
        WHERE book_id = p_book_id AND return_date IS NULL;

        RETURN v_count = 0;
    END is_book_available;
END library_pkg;
/</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>In this topic, we covered the basics of building a simple application using PL/SQL. We started by setting up the database schema, inserting initial data, and then moved on to writing PL/SQL code including anonymous blocks, stored procedures, functions, and using cursors. We also touched on advanced concepts like exception handling and packages. By understanding these concepts, you can build more complex and robust applications using PL/SQL.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='code-review-refactoring'>&#x25C4;Code Review and Refactoring</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Building a Simple Application</a>
	</div>
	<div class='col-4 text-end'>
					<a href='integrating-plsql-other-languages'>Integrating PL/SQL with Other Languages &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiÃ¨ncia d'Ãºs i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
