<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Best Practices</title>

    <link rel="alternate" href="https://campusempresa.com/mod/plsql/05-02-best-practices" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/plsql/05-02-best-practices" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/plsql/05-02-best-practices" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/plsql/05-02-best-practices" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/plsql/05-02-best-practices" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-01-code-optimization' title="Code Optimization Techniques">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Best Practices</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-03-debugging' title="Debugging PL/SQL Code">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will cover the best practices for writing efficient, maintainable, and robust PL/SQL code. Following these guidelines will help you avoid common pitfalls and ensure that your code is optimized for performance and readability.</p>
</div><h1>1. Code Readability and Maintainability</h1>
<div class='content'></div><h2>1.1 Use Meaningful Names</h2>
<div class='content'><ul>
<li><strong>Variables and Constants</strong>: Use descriptive names that convey the purpose of the variable or constant.
<pre><code class="language-plsql">DECLARE
    l_total_sales NUMBER := 0;
    c_max_limit CONSTANT NUMBER := 1000;
BEGIN
    -- Your code here
END;
</code></pre>
</li>
<li><strong>Procedures and Functions</strong>: Name procedures and functions based on their actions.
<pre><code class="language-plsql">PROCEDURE calculate_total_sales IS
BEGIN
    -- Your code here
END calculate_total_sales;
</code></pre>
</li>
</ul>
</div><h2>1.2 Comment Your Code</h2>
<div class='content'><ul>
<li><strong>Single-line Comments</strong>: Use <code>--</code> for single-line comments.
<pre><code class="language-plsql">-- Calculate the total sales for the month
l_total_sales := l_total_sales + monthly_sales;
</code></pre>
</li>
<li><strong>Multi-line Comments</strong>: Use <code>/* ... */</code> for multi-line comments.
<pre><code class="language-plsql">/*
This procedure calculates the total sales
for the given month and updates the sales table.
*/
PROCEDURE update_sales IS
BEGIN
    -- Your code here
END update_sales;
</code></pre>
</li>
</ul>
</div><h2>1.3 Consistent Formatting</h2>
<div class='content'><ul>
<li><strong>Indentation</strong>: Use consistent indentation to improve readability.
<pre><code class="language-plsql">DECLARE
    l_total_sales NUMBER := 0;
BEGIN
    IF l_total_sales &gt; 0 THEN
        DBMS_OUTPUT.PUT_LINE('Sales exist');
    ELSE
        DBMS_OUTPUT.PUT_LINE('No sales');
    END IF;
END;
</code></pre>
</li>
</ul>
</div><h1>2. Error Handling</h1>
<div class='content'></div><h2>2.1 Use Exception Handling</h2>
<div class='content'><ul>
<li><strong>Handle Known Exceptions</strong>: Use specific exception handlers for known exceptions.
<pre><code class="language-plsql">BEGIN
    -- Your code here
EXCEPTION
    WHEN NO_DATA_FOUND THEN
        DBMS_OUTPUT.PUT_LINE('No data found');
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('An unexpected error occurred');
END;
</code></pre>
</li>
</ul>
</div><h2>2.2 Log Errors</h2>
<div class='content'><ul>
<li><strong>Logging</strong>: Log errors to a table or file for later analysis.
<pre><code class="language-plsql">PROCEDURE log_error(p_error_message VARCHAR2) IS
BEGIN
    INSERT INTO error_log (error_message, log_date)
    VALUES (p_error_message, SYSDATE);
END log_error;
</code></pre>
</li>
</ul>
</div><h1>3. Performance Optimization</h1>
<div class='content'></div><h2>3.1 Use Bulk Operations</h2>
<div class='content'><ul>
<li>
<p><strong>Bulk Collect</strong>: Use <code>BULK COLLECT</code> to fetch multiple rows at once.</p>
<pre><code class="language-plsql">DECLARE
    TYPE t_sales IS TABLE OF sales%ROWTYPE;
    l_sales t_sales;
BEGIN
    SELECT * BULK COLLECT INTO l_sales FROM sales;
END;
</code></pre>
</li>
<li>
<p><strong>FORALL Statement</strong>: Use <code>FORALL</code> to perform bulk DML operations.</p>
<pre><code class="language-plsql">DECLARE
    TYPE t_sales_ids IS TABLE OF sales.id%TYPE;
    l_sales_ids t_sales_ids := t_sales_ids(1, 2, 3);
BEGIN
    FORALL i IN l_sales_ids.FIRST..l_sales_ids.LAST
        DELETE FROM sales WHERE id = l_sales_ids(i);
END;
</code></pre>
</li>
</ul>
</div><h2>3.2 Minimize Context Switches</h2>
<div class='content'><ul>
<li><strong>Avoid Excessive SQL Calls</strong>: Minimize the number of context switches between PL/SQL and SQL.
<pre><code class="language-plsql">DECLARE
    l_total_sales NUMBER;
BEGIN
    SELECT SUM(amount) INTO l_total_sales FROM sales;
    DBMS_OUTPUT.PUT_LINE('Total Sales: ' || l_total_sales);
END;
</code></pre>
</li>
</ul>
</div><h1>4. Security Best Practices</h1>
<div class='content'></div><h2>4.1 Use Bind Variables</h2>
<div class='content'><ul>
<li><strong>Prevent SQL Injection</strong>: Use bind variables to prevent SQL injection attacks.
<pre><code class="language-plsql">PROCEDURE get_sales(p_sales_id NUMBER) IS
    l_sales_amount NUMBER;
BEGIN
    SELECT amount INTO l_sales_amount FROM sales WHERE id = p_sales_id;
    DBMS_OUTPUT.PUT_LINE('Sales Amount: ' || l_sales_amount);
END get_sales;
</code></pre>
</li>
</ul>
</div><h2>4.2 Least Privilege Principle</h2>
<div class='content'><ul>
<li><strong>Grant Minimum Required Privileges</strong>: Ensure that users and roles have only the necessary privileges.
<pre><code class="language-sql">GRANT SELECT, INSERT ON sales TO sales_user;
</code></pre>
</li>
</ul>
</div><h1>5. Modularize Your Code</h1>
<div class='content'></div><h2>5.1 Use Procedures and Functions</h2>
<div class='content'><ul>
<li><strong>Encapsulation</strong>: Encapsulate repetitive logic in procedures and functions.
<pre><code class="language-plsql">FUNCTION calculate_discount(p_amount NUMBER) RETURN NUMBER IS
BEGIN
    RETURN p_amount * 0.1;
END calculate_discount;
</code></pre>
</li>
</ul>
</div><h2>5.2 Use Packages</h2>
<div class='content'><ul>
<li><strong>Group Related Procedures and Functions</strong>: Use packages to group related procedures and functions.
<pre><code class="language-plsql">CREATE PACKAGE sales_pkg IS
    PROCEDURE update_sales;
    FUNCTION calculate_discount(p_amount NUMBER) RETURN NUMBER;
END sales_pkg;
</code></pre>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>By following these best practices, you can write PL/SQL code that is not only efficient and secure but also easy to read and maintain. Remember to always prioritize readability, handle errors gracefully, optimize for performance, and ensure security. These principles will help you become a proficient PL/SQL developer and prepare you for more advanced topics in the course.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-01-code-optimization' title="Code Optimization Techniques">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-03-debugging' title="Debugging PL/SQL Code">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
