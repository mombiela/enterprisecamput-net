<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud Spanner</title>

    <link rel="alternate" href="https://campusempresa.com/mod/gcp/cloud-spanner" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/gcp/cloud-spanner" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/gcp/cloud-spanner" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/gcp/cloud-spanner" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/gcp/cloud-spanner" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='cloud-sql'>&#x25C4;Cloud SQL</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Cloud Spanner</a>
	</div>
	<div class='col-4 text-end'>
					<a href='firestore'>Firestore &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Cloud Spanner</h1>
<div class='content'><p>Cloud Spanner is a fully managed, scalable, globally distributed, and strongly consistent database service provided by Google Cloud Platform (GCP). It combines the benefits of relational database structure with non-relational horizontal scale.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Fully Managed</strong>: Google handles all maintenance, patching, and scaling.</li>
<li><strong>Scalability</strong>: Seamlessly scales horizontally to handle increased loads.</li>
<li><strong>Global Distribution</strong>: Data can be distributed across multiple regions.</li>
<li><strong>Strong Consistency</strong>: Ensures that all reads and writes are consistent globally.</li>
<li><strong>SQL Support</strong>: Supports ANSI SQL for querying data.</li>
</ul>
</div><h1>Setting Up Cloud Spanner</h1>
<div class='content'><p>To start using Cloud Spanner, you need to set up an instance and create a database.</p>
</div><h2>Steps to Set Up</h2>
<div class='content'><ol>
<li>
<p><strong>Create a Cloud Spanner Instance</strong>:</p>
<ul>
<li>Go to the GCP Console.</li>
<li>Navigate to Spanner.</li>
<li>Click on &quot;Create Instance&quot;.</li>
<li>Fill in the instance details (name, instance ID, configuration, nodes).</li>
<li>Click &quot;Create&quot;.</li>
</ul>
</li>
<li>
<p><strong>Create a Database</strong>:</p>
<ul>
<li>After creating an instance, click on the instance name.</li>
<li>Click &quot;Create Database&quot;.</li>
<li>Provide a database name.</li>
<li>Optionally, you can define the schema during creation.</li>
<li>Click &quot;Create&quot;.</li>
</ul>
</li>
</ol>
</div><h2>Example: Creating an Instance and Database</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2Nsb3VkIHNwYW5uZXIgaW5zdGFuY2VzIGNyZWF0ZSBteS1pbnN0YW5jZSBcCiAgICAtLWNvbmZpZz1yZWdpb25hbC11cy1jZW50cmFsMSBcCiAgICAtLWRlc2NyaXB0aW9uPSJNeSBTcGFubmVyIEluc3RhbmNlIiBcCiAgICAtLW5vZGVzPTEKCmdjbG91ZCBzcGFubmVyIGRhdGFiYXNlcyBjcmVhdGUgbXktZGF0YWJhc2UgXAogICAgLS1pbnN0YW5jZT1teS1pbnN0YW5jZQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcloud spanner instances create my-instance \
    --config=regional-us-central1 \
    --description=&quot;My Spanner Instance&quot; \
    --nodes=1

gcloud spanner databases create my-database \
    --instance=my-instance</pre></div><div class='content'></div><h1>Schema Design</h1>
<div class='content'><p>Designing the schema in Cloud Spanner involves defining tables, columns, and relationships.</p>
</div><h2>Example Schema</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIFVzZXJzICgKICAgIFVzZXJJZCBTVFJJTkcoMzYpIE5PVCBOVUxMLAogICAgVXNlck5hbWUgU1RSSU5HKDEyOCksCiAgICBVc2VyRW1haWwgU1RSSU5HKDEyOCksCikgUFJJTUFSWSBLRVkgKFVzZXJJZCk7CgpDUkVBVEUgVEFCTEUgT3JkZXJzICgKICAgIE9yZGVySWQgU1RSSU5HKDM2KSBOT1QgTlVMTCwKICAgIFVzZXJJZCBTVFJJTkcoMzYpLAogICAgT3JkZXJEYXRlIFRJTUVTVEFNUCwKICAgIE9yZGVyQW1vdW50IEZMT0FUNjQsCikgUFJJTUFSWSBLRVkgKE9yZGVySWQpLAogIElOVEVSTEVBVkUgSU4gUEFSRU5UIFVzZXJzIE9OIERFTEVURSBDQVNDQURFOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE Users (
    UserId STRING(36) NOT NULL,
    UserName STRING(128),
    UserEmail STRING(128),
) PRIMARY KEY (UserId);

CREATE TABLE Orders (
    OrderId STRING(36) NOT NULL,
    UserId STRING(36),
    OrderDate TIMESTAMP,
    OrderAmount FLOAT64,
) PRIMARY KEY (OrderId),
  INTERLEAVE IN PARENT Users ON DELETE CASCADE;</pre></div><div class='content'></div><h2>Key Points</h2>
<div class='content'><ul>
<li><strong>Primary Keys</strong>: Essential for uniquely identifying records.</li>
<li><strong>Interleaving</strong>: Helps in optimizing queries by physically grouping related rows.</li>
</ul>
</div><h1>Querying Data</h1>
<div class='content'><p>Cloud Spanner supports ANSI SQL, making it easy to query data.</p>
</div><h2>Basic Queries</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gU2VsZWN0IGFsbCB1c2VycwpTRUxFQ1QgKiBGUk9NIFVzZXJzOwoKLS0gU2VsZWN0IHNwZWNpZmljIGNvbHVtbnMKU0VMRUNUIFVzZXJOYW1lLCBVc2VyRW1haWwgRlJPTSBVc2VyczsKCi0tIEpvaW4gdGFibGVzClNFTEVDVCBVc2Vycy5Vc2VyTmFtZSwgT3JkZXJzLk9yZGVyQW1vdW50CkZST00gVXNlcnMKSk9JTiBPcmRlcnMgT04gVXNlcnMuVXNlcklkID0gT3JkZXJzLlVzZXJJZDs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Select all users
SELECT * FROM Users;

-- Select specific columns
SELECT UserName, UserEmail FROM Users;

-- Join tables
SELECT Users.UserName, Orders.OrderAmount
FROM Users
JOIN Orders ON Users.UserId = Orders.UserId;</pre></div><div class='content'></div><h2>Advanced Queries</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gQWdncmVnYXRpb24KU0VMRUNUIFVzZXJJZCwgQ09VTlQoKikgYXMgT3JkZXJDb3VudApGUk9NIE9yZGVycwpHUk9VUCBCWSBVc2VySWQ7CgotLSBGaWx0ZXJpbmcKU0VMRUNUICogRlJPTSBPcmRlcnMKV0hFUkUgT3JkZXJBbW91bnQgPiAxMDAuMDA7CgotLSBTdWJxdWVyaWVzClNFTEVDVCBVc2VyTmFtZQpGUk9NIFVzZXJzCldIRVJFIFVzZXJJZCBJTiAoU0VMRUNUIFVzZXJJZCBGUk9NIE9yZGVycyBXSEVSRSBPcmRlckFtb3VudCA+IDEwMC4wMCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Aggregation
SELECT UserId, COUNT(*) as OrderCount
FROM Orders
GROUP BY UserId;

-- Filtering
SELECT * FROM Orders
WHERE OrderAmount &gt; 100.00;

-- Subqueries
SELECT UserName
FROM Users
WHERE UserId IN (SELECT UserId FROM Orders WHERE OrderAmount &gt; 100.00);</pre></div><div class='content'></div><h1>Performance Optimization</h1>
<div class='content'><p>Optimizing performance in Cloud Spanner involves understanding and utilizing its unique features.</p>
</div><h2>Tips for Optimization</h2>
<div class='content'><ul>
<li><strong>Schema Design</strong>: Properly design schema with interleaving and primary keys.</li>
<li><strong>Query Optimization</strong>: Use indexes and avoid full table scans.</li>
<li><strong>Load Balancing</strong>: Distribute data evenly across nodes.</li>
</ul>
</div><h2>Example: Creating Indexes</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIElOREVYIFVzZXJFbWFpbEluZGV4IE9OIFVzZXJzKFVzZXJFbWFpbCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE INDEX UserEmailIndex ON Users(UserEmail);</pre></div><div class='content'></div><h1>Backup and Restore</h1>
<div class='content'><p>Cloud Spanner provides mechanisms for backing up and restoring data.</p>
</div><h2>Backup</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2Nsb3VkIHNwYW5uZXIgYmFja3VwcyBjcmVhdGUgbXktYmFja3VwIFwKICAgIC0taW5zdGFuY2U9bXktaW5zdGFuY2UgXAogICAgLS1kYXRhYmFzZT1teS1kYXRhYmFzZSBcCiAgICAtLWV4cGlyZS10aW1lPSIyMDIzLTEyLTMxVDIzOjU5OjU5WiI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcloud spanner backups create my-backup \
    --instance=my-instance \
    --database=my-database \
    --expire-time=&quot;2023-12-31T23:59:59Z&quot;</pre></div><div class='content'></div><h2>Restore</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2Nsb3VkIHNwYW5uZXIgZGF0YWJhc2VzIHJlc3RvcmUgbXktZGF0YWJhc2UtcmVzdG9yZWQgXAogICAgLS1pbnN0YW5jZT1teS1pbnN0YW5jZSBcCiAgICAtLWJhY2t1cD1teS1iYWNrdXA="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gcloud spanner databases restore my-database-restored \
    --instance=my-instance \
    --backup=my-backup</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Cloud Spanner is a powerful, fully managed database service that offers the scalability and consistency required for modern applications. By understanding its setup, schema design, querying capabilities, performance optimization, and backup/restore features, you can effectively leverage Cloud Spanner for your database needs.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='cloud-sql'>&#x25C4;Cloud SQL</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Cloud Spanner</a>
	</div>
	<div class='col-4 text-end'>
					<a href='firestore'>Firestore &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
