<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dataflow on Google Cloud Platform (GCP)</title>

    <link rel="alternate" href="https://campusempresa.com/mod/gcp/dataflow" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/gcp/dataflow" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/gcp/dataflow" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/gcp/dataflow" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/gcp/dataflow" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='bigquery'>&#x25C4;BigQuery</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Dataflow on Google Cloud Platform (GCP)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='dataproc'>Dataproc &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Dataflow</h1>
<div class='content'><p>Google Cloud Dataflow is a fully managed service for stream and batch processing of large datasets. It allows developers to create data processing pipelines that can handle both real-time and historical data.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Pipeline</strong>: A series of data processing steps.</li>
<li><strong>PCollection</strong>: A distributed data set that represents the data being processed.</li>
<li><strong>Transform</strong>: Operations that process data in PCollections.</li>
<li><strong>Runner</strong>: The execution engine for the pipeline.</li>
</ul>
</div><h1>Setting Up Dataflow</h1>
<div class='content'><p>Before you can start using Dataflow, you need to set up your GCP environment.</p>
</div><h2>Steps to Set Up</h2>
<div class='content'><ol>
<li><strong>Create a GCP Project</strong>: Go to the GCP Console and create a new project.</li>
<li><strong>Enable Dataflow API</strong>: In the API library, enable the Dataflow API.</li>
<li><strong>Install Google Cloud SDK</strong>: Download and install the SDK to interact with GCP services from your local machine.</li>
<li><strong>Set Up Authentication</strong>: Authenticate your SDK using <code>gcloud auth login</code>.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBTZXQgdXAgeW91ciBwcm9qZWN0CmdjbG91ZCBjb25maWcgc2V0IHByb2plY3QgW1BST0pFQ1RfSURdCgojIEVuYWJsZSBEYXRhZmxvdyBBUEkKZ2Nsb3VkIHNlcnZpY2VzIGVuYWJsZSBkYXRhZmxvdy5nb29nbGVhcGlzLmNvbQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Set up your project
gcloud config set project [PROJECT_ID]

# Enable Dataflow API
gcloud services enable dataflow.googleapis.com</pre></div><div class='content'></div><h1>Building a Dataflow Pipeline</h1>
<div class='content'><p>A Dataflow pipeline is composed of three main parts: reading data, transforming data, and writing data.</p>
</div><h2>Example: Word Count Pipeline</h2>
<div class='content'><p>Let's create a simple word count pipeline.</p>
<h4>Step 1: Read Data</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFwYWNoZV9iZWFtIGFzIGJlYW0KZnJvbSBhcGFjaGVfYmVhbS5vcHRpb25zLnBpcGVsaW5lX29wdGlvbnMgaW1wb3J0IFBpcGVsaW5lT3B0aW9ucwoKIyBEZWZpbmUgdGhlIHBpcGVsaW5lIG9wdGlvbnMKb3B0aW9ucyA9IFBpcGVsaW5lT3B0aW9ucygpCgojIENyZWF0ZSB0aGUgcGlwZWxpbmUKcCA9IGJlYW0uUGlwZWxpbmUob3B0aW9ucz1vcHRpb25zKQoKIyBSZWFkIGRhdGEgZnJvbSBhIHRleHQgZmlsZQpsaW5lcyA9IHAgfCAnUmVhZCcgPj4gYmVhbS5pby5SZWFkRnJvbVRleHQoJ2dzOi8veW91ci1idWNrZXQvaW5wdXQudHh0Jyk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import apache_beam as beam
from apache_beam.options.pipeline_options import PipelineOptions

# Define the pipeline options
options = PipelineOptions()

# Create the pipeline
p = beam.Pipeline(options=options)

# Read data from a text file
lines = p | 'Read' &gt;&gt; beam.io.ReadFromText('gs://your-bucket/input.txt')</pre></div><div class='content'><h4>Step 2: Transform Data</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBTcGxpdCB0aGUgbGluZXMgaW50byB3b3Jkcwp3b3JkcyA9IGxpbmVzIHwgJ1NwbGl0JyA+PiBiZWFtLkZsYXRNYXAobGFtYmRhIHg6IHguc3BsaXQoKSkKCiMgQ291bnQgdGhlIG9jY3VycmVuY2VzIG9mIGVhY2ggd29yZAp3b3JkX2NvdW50cyA9IHdvcmRzIHwgJ0NvdW50JyA+PiBiZWFtLmNvbWJpbmVycy5Db3VudC5QZXJFbGVtZW50KCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Split the lines into words
words = lines | 'Split' &gt;&gt; beam.FlatMap(lambda x: x.split())

# Count the occurrences of each word
word_counts = words | 'Count' &gt;&gt; beam.combiners.Count.PerElement()</pre></div><div class='content'><h4>Step 3: Write Data</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBXcml0ZSB0aGUgd29yZCBjb3VudHMgdG8gYSB0ZXh0IGZpbGUKd29yZF9jb3VudHMgfCAnV3JpdGUnID4+IGJlYW0uaW8uV3JpdGVUb1RleHQoJ2dzOi8veW91ci1idWNrZXQvb3V0cHV0LnR4dCcpCgojIFJ1biB0aGUgcGlwZWxpbmUKcC5ydW4oKS53YWl0X3VudGlsX2ZpbmlzaCgp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Write the word counts to a text file
word_counts | 'Write' &gt;&gt; beam.io.WriteToText('gs://your-bucket/output.txt')

# Run the pipeline
p.run().wait_until_finish()</pre></div><div class='content'></div><h1>Advanced Dataflow Features</h1>
<div class='content'><p>As you become more familiar with Dataflow, you can leverage advanced features to optimize and scale your pipelines.</p>
</div><h2>Windowing</h2>
<div class='content'><p>Windowing allows you to divide your data into time-based chunks for processing.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGFwYWNoZV9iZWFtLnRyYW5zZm9ybXMud2luZG93IGFzIHdpbmRvdwoKIyBBcHBseSB3aW5kb3dpbmcgdG8gdGhlIFBDb2xsZWN0aW9uCndpbmRvd2VkX3dvcmRzID0gd29yZHMgfCAnV2luZG93JyA+PiBiZWFtLldpbmRvd0ludG8od2luZG93LkZpeGVkV2luZG93cyg2MCkp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import apache_beam.transforms.window as window

# Apply windowing to the PCollection
windowed_words = words | 'Window' &gt;&gt; beam.WindowInto(window.FixedWindows(60))</pre></div><div class='content'></div><h2>Triggers</h2>
<div class='content'><p>Triggers determine when the results of a windowed computation are emitted.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dHJpZ2dlcmVkX2NvdW50cyA9IHdpbmRvd2VkX3dvcmRzIHwgJ1RyaWdnZXInID4+IGJlYW0uY29tYmluZXJzLkNvdW50LlBlckVsZW1lbnQoKS53aXRoX3RyaWdnZXIoCiAgICB0cmlnZ2VyLkFmdGVyUHJvY2Vzc2luZ1RpbWUoMTApLAogICAgYWNjdW11bGF0aW9uX21vZGU9dHJpZ2dlci5BY2N1bXVsYXRpb25Nb2RlLkRJU0NBUkRJTkcp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>triggered_counts = windowed_words | 'Trigger' &gt;&gt; beam.combiners.Count.PerElement().with_trigger(
    trigger.AfterProcessingTime(10),
    accumulation_mode=trigger.AccumulationMode.DISCARDING)</pre></div><div class='content'></div><h2>Side Inputs</h2>
<div class='content'><p>Side inputs allow you to pass additional data to a transform.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDcmVhdGUgYSBzaWRlIGlucHV0CnNpZGVfaW5wdXQgPSBwIHwgJ0NyZWF0ZSBTaWRlIElucHV0JyA+PiBiZWFtLkNyZWF0ZShbMSwgMiwgM10pCgojIFVzZSB0aGUgc2lkZSBpbnB1dCBpbiBhIHRyYW5zZm9ybQptYWluX2lucHV0IHwgJ1dpdGggU2lkZSBJbnB1dCcgPj4gYmVhbS5NYXAobGFtYmRhIHgsIHNpZGU6IHggKyBzdW0oc2lkZSksIGJlYW0ucHZhbHVlLkFzTGlzdChzaWRlX2lucHV0KSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Create a side input
side_input = p | 'Create Side Input' &gt;&gt; beam.Create([1, 2, 3])

# Use the side input in a transform
main_input | 'With Side Input' &gt;&gt; beam.Map(lambda x, side: x + sum(side), beam.pvalue.AsList(side_input))</pre></div><div class='content'></div><h1>Monitoring and Debugging</h1>
<div class='content'><p>Dataflow provides tools to monitor and debug your pipelines.</p>
</div><h2>Monitoring</h2>
<div class='content'><ul>
<li><strong>Dataflow Console</strong>: View job status, logs, and metrics.</li>
<li><strong>Stackdriver Logging</strong>: Collect and analyze logs from your Dataflow jobs.</li>
</ul>
</div><h2>Debugging</h2>
<div class='content'><ul>
<li><strong>Pipeline Graph</strong>: Visualize the pipeline structure.</li>
<li><strong>Error Reporting</strong>: Identify and fix errors in your pipeline.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Google Cloud Dataflow is a powerful tool for processing large datasets in both batch and stream modes. By understanding its core concepts, setting up your environment, and building pipelines, you can efficiently handle complex data processing tasks. As you advance, leveraging features like windowing, triggers, and side inputs will help you optimize and scale your pipelines. Monitoring and debugging tools ensure that your pipelines run smoothly and efficiently.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='bigquery'>&#x25C4;BigQuery</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Dataflow on Google Cloud Platform (GCP)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='dataproc'>Dataproc &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
