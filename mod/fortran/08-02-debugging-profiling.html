<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debugging and Profiling</title>

    <link rel="alternate" href="https://campusempresa.com/mod/fortran/08-02-debugging-profiling" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/fortran/08-02-debugging-profiling" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/fortran/08-02-debugging-profiling" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/fortran/08-02-debugging-profiling" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/fortran/08-02-debugging-profiling" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='08-01-code-optimization-techniques' title="Code Optimization Techniques">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Debugging and Profiling</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='08-03-writing-maintainable-code' title="Writing Maintainable Code">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Debugging and profiling are essential skills for any programmer. Debugging helps you identify and fix errors in your code, while profiling allows you to analyze the performance of your program and optimize it for better efficiency. In this section, we will cover the following topics:</p>
<ol>
<li><strong>Introduction to Debugging</strong></li>
<li><strong>Common Debugging Techniques</strong></li>
<li><strong>Using Debugging Tools</strong></li>
<li><strong>Introduction to Profiling</strong></li>
<li><strong>Profiling Tools and Techniques</strong></li>
<li><strong>Practical Exercises</strong></li>
</ol>
</div><h1>1. Introduction to Debugging</h1>
<div class='content'><p>Debugging is the process of identifying, analyzing, and removing errors (bugs) from your code. Bugs can be syntax errors, runtime errors, or logical errors.</p>
</div><h2>Types of Errors:</h2>
<div class='content'><ul>
<li><strong>Syntax Errors</strong>: Mistakes in the code that violate the rules of the programming language.</li>
<li><strong>Runtime Errors</strong>: Errors that occur during the execution of the program.</li>
<li><strong>Logical Errors</strong>: Errors in the logic of the program that produce incorrect results.</li>
</ul>
</div><h1>2. Common Debugging Techniques</h1>
<div class='content'></div><h2>Print Statements</h2>
<div class='content'><p>One of the simplest debugging techniques is to use print statements to display the values of variables at different points in your program.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvZ3JhbSBkZWJ1Z19leGFtcGxlCiAgICBpbXBsaWNpdCBub25lCiAgICBpbnRlZ2VyIDo6IGEsIGIsIGMKCiAgICBhID0gNQogICAgYiA9IDAKICAgIGMgPSBhIC8gYiAgISBUaGlzIHdpbGwgY2F1c2UgYSBydW50aW1lIGVycm9yCgogICAgcHJpbnQgKiwgJ1ZhbHVlIG9mIGE6JywgYQogICAgcHJpbnQgKiwgJ1ZhbHVlIG9mIGI6JywgYgogICAgcHJpbnQgKiwgJ1ZhbHVlIG9mIGM6JywgYwplbmQgcHJvZ3JhbSBkZWJ1Z19leGFtcGxl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>program debug_example
    implicit none
    integer :: a, b, c

    a = 5
    b = 0
    c = a / b  ! This will cause a runtime error

    print *, 'Value of a:', a
    print *, 'Value of b:', b
    print *, 'Value of c:', c
end program debug_example</pre></div><div class='content'></div><h2>Code Review</h2>
<div class='content'><p>Reviewing your code line by line can help you spot errors that you might have missed initially.</p>
</div><h2>Rubber Duck Debugging</h2>
<div class='content'><p>Explain your code and logic to an inanimate object (like a rubber duck). This can help you think through the problem and identify errors.</p>
</div><h1>3. Using Debugging Tools</h1>
<div class='content'></div><h2>GDB (GNU Debugger)</h2>
<div class='content'><p>GDB is a powerful debugging tool that allows you to run your program step by step, set breakpoints, and inspect variables.</p>
<h4>Basic GDB Commands:</h4>
<ul>
<li><strong>gdb program_name</strong>: Start GDB with your program.</li>
<li><strong>run</strong>: Run the program.</li>
<li><strong>break line_number</strong>: Set a breakpoint at a specific line.</li>
<li><strong>next</strong>: Execute the next line of code.</li>
<li><strong>print variable_name</strong>: Print the value of a variable.</li>
<li><strong>continue</strong>: Continue running the program until the next breakpoint.</li>
</ul>
</div><h2>Example:</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCBnZm9ydHJhbiAtZyBkZWJ1Z19leGFtcGxlLmY5MCAtbyBkZWJ1Z19leGFtcGxlCiQgZ2RiIGRlYnVnX2V4YW1wbGUKKGdkYikgYnJlYWsgNgooZ2RiKSBydW4KKGdkYikgcHJpbnQgYQooZ2RiKSBwcmludCBiCihnZGIpIG5leHQKKGdkYikgcHJpbnQgYw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ gfortran -g debug_example.f90 -o debug_example
$ gdb debug_example
(gdb) break 6
(gdb) run
(gdb) print a
(gdb) print b
(gdb) next
(gdb) print c</pre></div><div class='content'></div><h1>4. Introduction to Profiling</h1>
<div class='content'><p>Profiling is the process of measuring the performance of your program to identify bottlenecks and optimize the code.</p>
</div><h2>Key Metrics:</h2>
<div class='content'><ul>
<li><strong>Execution Time</strong>: The time taken to execute the program or specific parts of the program.</li>
<li><strong>Memory Usage</strong>: The amount of memory used by the program.</li>
<li><strong>CPU Usage</strong>: The percentage of CPU resources used by the program.</li>
</ul>
</div><h1>5. Profiling Tools and Techniques</h1>
<div class='content'></div><h2>gprof (GNU Profiler)</h2>
<div class='content'><p>gprof is a profiling tool that helps you analyze the performance of your program.</p>
<h4>Steps to Use gprof:</h4>
<ol>
<li>Compile your program with the <code>-pg</code> flag.</li>
<li>Run your program to generate a profiling data file (<code>gmon.out</code>).</li>
<li>Use gprof to analyze the profiling data.</li>
</ol>
</div><h2>Example:</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCBnZm9ydHJhbiAtcGcgcHJvZmlsZV9leGFtcGxlLmY5MCAtbyBwcm9maWxlX2V4YW1wbGUKJCAuL3Byb2ZpbGVfZXhhbXBsZQokIGdwcm9mIHByb2ZpbGVfZXhhbXBsZSBnbW9uLm91dCA+IGFuYWx5c2lzLnR4dA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ gfortran -pg profile_example.f90 -o profile_example
$ ./profile_example
$ gprof profile_example gmon.out &gt; analysis.txt</pre></div><div class='content'></div><h2>Analysis:</h2>
<div class='content'><p>The <code>analysis.txt</code> file will contain detailed information about the execution time of each function in your program.</p>
</div><h1>6. Practical Exercises</h1>
<div class='content'></div><h2>Exercise 1: Debugging with Print Statements</h2>
<div class='content'><ol>
<li>Write a Fortran program that calculates the factorial of a number.</li>
<li>Introduce a logical error in the calculation.</li>
<li>Use print statements to identify and fix the error.</li>
</ol>
</div><h2>Solution:</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvZ3JhbSBmYWN0b3JpYWwKICAgIGltcGxpY2l0IG5vbmUKICAgIGludGVnZXIgOjogbiwgaSwgZmFjdAoKICAgIHByaW50ICosICdFbnRlciBhIG51bWJlcjonCiAgICByZWFkICosIG4KCiAgICBmYWN0ID0gMQogICAgZG8gaSA9IDEsIG4KICAgICAgICBmYWN0ID0gZmFjdCAqIGkKICAgICAgICBwcmludCAqLCAnaSA9JywgaSwgJ2ZhY3QgPScsIGZhY3QgICEgRGVidWdnaW5nIHByaW50IHN0YXRlbWVudAogICAgZW5kIGRvCgogICAgcHJpbnQgKiwgJ0ZhY3RvcmlhbCBvZicsIG4sICdpcycsIGZhY3QKZW5kIHByb2dyYW0gZmFjdG9yaWFs"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>program factorial
    implicit none
    integer :: n, i, fact

    print *, 'Enter a number:'
    read *, n

    fact = 1
    do i = 1, n
        fact = fact * i
        print *, 'i =', i, 'fact =', fact  ! Debugging print statement
    end do

    print *, 'Factorial of', n, 'is', fact
end program factorial</pre></div><div class='content'></div><h2>Exercise 2: Profiling with gprof</h2>
<div class='content'><ol>
<li>Write a Fortran program that performs matrix multiplication.</li>
<li>Compile and run the program with gprof.</li>
<li>Analyze the profiling data to identify any performance bottlenecks.</li>
</ol>
</div><h2>Solution:</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvZ3JhbSBtYXRyaXhfbXVsdGlwbGljYXRpb24KICAgIGltcGxpY2l0IG5vbmUKICAgIGludGVnZXIsIHBhcmFtZXRlciA6OiBuID0gNTAwCiAgICByZWFsIDo6IEEobiwgbiksIEIobiwgbiksIEMobiwgbikKICAgIGludGVnZXIgOjogaSwgaiwgawoKICAgICEgSW5pdGlhbGl6ZSBtYXRyaWNlcyBBIGFuZCBCCiAgICBBID0gMS4wCiAgICBCID0gMi4wCgogICAgISBNYXRyaXggbXVsdGlwbGljYXRpb24KICAgIEMgPSAwLjAKICAgIGRvIGkgPSAxLCBuCiAgICAgICAgZG8gaiA9IDEsIG4KICAgICAgICAgICAgZG8gayA9IDEsIG4KICAgICAgICAgICAgICAgIEMoaSwgaikgPSBDKGksIGopICsgQShpLCBrKSAqIEIoaywgaikKICAgICAgICAgICAgZW5kIGRvCiAgICAgICAgZW5kIGRvCiAgICBlbmQgZG8KCiAgICBwcmludCAqLCAnTWF0cml4IG11bHRpcGxpY2F0aW9uIGNvbXBsZXRlZC4nCmVuZCBwcm9ncmFtIG1hdHJpeF9tdWx0aXBsaWNhdGlvbg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>program matrix_multiplication
    implicit none
    integer, parameter :: n = 500
    real :: A(n, n), B(n, n), C(n, n)
    integer :: i, j, k

    ! Initialize matrices A and B
    A = 1.0
    B = 2.0

    ! Matrix multiplication
    C = 0.0
    do i = 1, n
        do j = 1, n
            do k = 1, n
                C(i, j) = C(i, j) + A(i, k) * B(k, j)
            end do
        end do
    end do

    print *, 'Matrix multiplication completed.'
end program matrix_multiplication</pre></div><div class='content'></div><h2>Profiling Steps:</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCBnZm9ydHJhbiAtcGcgbWF0cml4X211bHRpcGxpY2F0aW9uLmY5MCAtbyBtYXRyaXhfbXVsdGlwbGljYXRpb24KJCAuL21hdHJpeF9tdWx0aXBsaWNhdGlvbgokIGdwcm9mIG1hdHJpeF9tdWx0aXBsaWNhdGlvbiBnbW9uLm91dCA+IGFuYWx5c2lzLnR4dA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ gfortran -pg matrix_multiplication.f90 -o matrix_multiplication
$ ./matrix_multiplication
$ gprof matrix_multiplication gmon.out &gt; analysis.txt</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered the basics of debugging and profiling in Fortran. We discussed common debugging techniques, how to use debugging tools like GDB, and how to profile your program using gprof. By mastering these skills, you can write more efficient and error-free code. In the next section, we will delve into writing maintainable code and best practices for Fortran programming.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='08-01-code-optimization-techniques' title="Code Optimization Techniques">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='08-03-writing-maintainable-code' title="Writing Maintainable Code">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
