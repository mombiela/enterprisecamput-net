<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Profiling in Fortran</title>

    <link rel="alternate" href="https://campusempresa.com/mod/fortran/performance-profiling" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/fortran/performance-profiling" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/fortran/performance-profiling" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/fortran/performance-profiling" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/fortran/performance-profiling" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='debugging-techniques'>&#x25C4;Debugging Techniques</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Performance Profiling in Fortran</a>
	</div>
	<div class='col-4 text-end'>
					<a href='version-control-git'>Version Control with Git &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Performance profiling is an essential skill for any Fortran programmer aiming to write efficient and optimized code. This topic will guide you through the basics of performance profiling, tools available, and advanced techniques to identify and resolve performance bottlenecks in your Fortran programs.</p>
</div><h1>Introduction to Performance Profiling</h1>
<div class='content'><p>Performance profiling involves measuring the runtime behavior of a program to identify sections of code that are consuming the most resources. This process helps in optimizing the code for better performance.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Profiling</strong>: The process of measuring the space (memory) and time complexity of a program.</li>
<li><strong>Bottlenecks</strong>: Sections of code that significantly reduce the overall performance.</li>
<li><strong>Optimization</strong>: Improving the efficiency of the code by addressing bottlenecks.</li>
</ul>
</div><h1>Tools for Performance Profiling in Fortran</h1>
<div class='content'><p>Several tools can be used to profile Fortran programs. Here are some commonly used ones:</p>
<ul>
<li><strong>gprof</strong>: A GNU profiler that works with programs compiled with the GNU Fortran compiler (gfortran).</li>
<li><strong>Intel VTune Profiler</strong>: A performance analysis tool for applications running on Intel processors.</li>
<li><strong>TAU (Tuning and Analysis Utilities)</strong>: A performance profiling and tracing toolkit for parallel programs.</li>
</ul>
</div><h2>Using gprof</h2>
<div class='content'><p><code>gprof</code> is a widely used profiling tool that can help you identify which parts of your Fortran program are consuming the most time.</p>
<h4>Steps to Use gprof:</h4>
<ol>
<li><strong>Compile your Fortran code with profiling enabled</strong>:
<pre><code class="language-sh">gfortran -pg -o my_program my_program.f90
</code></pre>
</li>
<li><strong>Run your program</strong>:
<pre><code class="language-sh">./my_program
</code></pre>
</li>
<li><strong>Generate the profiling report</strong>:
<pre><code class="language-sh">gprof my_program gmon.out &gt; analysis.txt
</code></pre>
</li>
</ol>
<h4>Example:</h4>
<p>Consider a simple Fortran program <code>example.f90</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvZ3JhbSBleGFtcGxlCiAgICBpbXBsaWNpdCBub25lCiAgICBpbnRlZ2VyIDo6IGksIGosIHN1bQoKICAgIHN1bSA9IDAKICAgIGRvIGkgPSAxLCAxMDAwCiAgICAgICAgZG8gaiA9IDEsIDEwMDAKICAgICAgICAgICAgc3VtID0gc3VtICsgaSAqIGoKICAgICAgICBlbmQgZG8KICAgIGVuZCBkbwoKICAgIHByaW50ICosICJTdW0gaXMgIiwgc3VtCmVuZCBwcm9ncmFtIGV4YW1wbGU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>program example
    implicit none
    integer :: i, j, sum

    sum = 0
    do i = 1, 1000
        do j = 1, 1000
            sum = sum + i * j
        end do
    end do

    print *, &quot;Sum is &quot;, sum
end program example</pre></div><div class='content'><p>Compile and profile the program:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2ZvcnRyYW4gLXBnIC1vIGV4YW1wbGUgZXhhbXBsZS5mOTAKLi9leGFtcGxlCmdwcm9mIGV4YW1wbGUgZ21vbi5vdXQgPiBhbmFseXNpcy50eHQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>gfortran -pg -o example example.f90
./example
gprof example gmon.out &gt; analysis.txt</pre></div><div class='content'><p>The <code>analysis.txt</code> file will contain a detailed report showing where the program spends most of its time.</p>
</div><h1>Advanced Profiling Techniques</h1>
<div class='content'></div><h2>Hotspot Analysis</h2>
<div class='content'><p>Hotspot analysis involves identifying the most time-consuming parts of the code. This can be done using tools like Intel VTune Profiler.</p>
</div><h2>Memory Profiling</h2>
<div class='content'><p>Memory profiling helps in identifying memory leaks and inefficient memory usage. Tools like Valgrind can be used for this purpose.</p>
</div><h2>Parallel Profiling</h2>
<div class='content'><p>For parallel Fortran programs, profiling tools like TAU can help in analyzing the performance of parallel sections.</p>
<h4>Example with TAU:</h4>
<ol>
<li><strong>Instrument the code</strong>:
<pre><code class="language-sh">tau_f90.sh -o my_program my_program.f90
</code></pre>
</li>
<li><strong>Run the program</strong>:
<pre><code class="language-sh">mpirun -np 4 ./my_program
</code></pre>
</li>
<li><strong>Analyze the results</strong> using TAU's analysis tools.</li>
</ol>
</div><h1>Summary</h1>
<div class='content'><p>Performance profiling is a critical step in optimizing Fortran programs. By using tools like <code>gprof</code>, Intel VTune Profiler, and TAU, you can identify and resolve performance bottlenecks. Understanding and applying these profiling techniques will help you write more efficient and high-performance Fortran code.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='debugging-techniques'>&#x25C4;Debugging Techniques</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Performance Profiling in Fortran</a>
	</div>
	<div class='col-4 text-end'>
					<a href='version-control-git'>Version Control with Git &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
