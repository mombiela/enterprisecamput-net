<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Houdini</title>

    <link rel="alternate" href="https://campusempresa.com/mod/css/css-houdini" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/css/css-houdini" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/css/css-houdini" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/css/css-houdini" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/css/css-houdini" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='css-for-print'>&#x25C4;CSS for Print</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">CSS Houdini</a>
	</div>
	<div class='col-4 text-end'>
					<a href='future-of-css'>Future of CSS &#x25BA;</a>
			</div>
</div>
<div class='content'><p>CSS Houdini is a set of low-level APIs that give developers the power to extend CSS by hooking into the styling and layout process of the browser's rendering engine. This allows for the creation of custom CSS properties, custom layout algorithms, and more. This topic will guide you from the basics to advanced usage of CSS Houdini.</p>
</div><h1>Introduction to CSS Houdini</h1>
<div class='content'><ul>
<li>
<p><strong>What is CSS Houdini?</strong></p>
<ul>
<li>A collection of APIs that allow developers to write code that can directly interact with the CSS Object Model (CSSOM).</li>
<li>Enables the creation of custom CSS features and properties.</li>
</ul>
</li>
<li>
<p><strong>Why use CSS Houdini?</strong></p>
<ul>
<li>Provides more control over the styling and layout process.</li>
<li>Allows for performance optimizations by reducing the need for JavaScript for certain tasks.</li>
<li>Enables the creation of reusable and shareable custom CSS features.</li>
</ul>
</li>
</ul>
</div><h1>Key Concepts of CSS Houdini</h1>
<div class='content'><ul>
<li>
<p><strong>Worklets</strong></p>
<ul>
<li>Small scripts that run in a separate thread from the main JavaScript execution.</li>
<li>Types of worklets include Paint Worklet, Layout Worklet, Animation Worklet, and more.</li>
</ul>
</li>
<li>
<p><strong>CSS Properties and Values API</strong></p>
<ul>
<li>Allows the definition of custom properties and their types.</li>
<li>Example:
<pre><code class="language-javascript">CSS.registerProperty({
  name: '--my-custom-property',
  syntax: '&lt;color&gt;',
  inherits: false,
  initialValue: 'black'
});
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Paint API</strong></p>
<ul>
<li>Enables the creation of custom paint effects using the Paint Worklet.</li>
<li>Example:
<pre><code class="language-javascript">if ('paintWorklet' in CSS) {
  CSS.paintWorklet.addModule('paint.js');
}
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Layout API</strong></p>
<ul>
<li>Allows the creation of custom layout algorithms.</li>
<li>Example:
<pre><code class="language-javascript">if ('layoutWorklet' in CSS) {
  CSS.layoutWorklet.addModule('layout.js');
}
</code></pre>
</li>
</ul>
</li>
</ul>
</div><h1>Getting Started with CSS Houdini</h1>
<div class='content'></div><h2>Setting Up Your Environment</h2>
<div class='content'><ul>
<li>Ensure your browser supports CSS Houdini APIs.</li>
<li>Use a modern browser like Chrome or Edge with experimental web platform features enabled.</li>
</ul>
</div><h2>Basic Example: Custom Paint Worklet</h2>
<div class='content'><ol>
<li>
<p><strong>Create a Paint Worklet Script (paint.js)</strong></p>
<pre><code class="language-javascript">class CheckerboardPainter {
  static get inputProperties() {
    return ['--checkerboard-size', '--checkerboard-color'];
  }

  paint(ctx, size, properties) {
    const checkerSize = parseInt(properties.get('--checkerboard-size').toString());
    const color = properties.get('--checkerboard-color').toString();

    ctx.fillStyle = color;
    for (let y = 0; y &lt; size.height; y += checkerSize) {
      for (let x = 0; x &lt; size.width; x += checkerSize) {
        if ((x / checkerSize + y / checkerSize) % 2 === 0) {
          ctx.fillRect(x, y, checkerSize, checkerSize);
        }
      }
    }
  }
}

registerPaint('checkerboard', CheckerboardPainter);
</code></pre>
</li>
<li>
<p><strong>Register the Paint Worklet in Your HTML</strong></p>
<pre><code class="language-html">&lt;style&gt;
  .checkerboard {
    --checkerboard-size: 20px;
    --checkerboard-color: red;
    background: paint(checkerboard);
  }
&lt;/style&gt;
&lt;script&gt;
  if ('paintWorklet' in CSS) {
    CSS.paintWorklet.addModule('paint.js');
  }
&lt;/script&gt;
</code></pre>
</li>
<li>
<p><strong>Apply the Custom Paint to an Element</strong></p>
<pre><code class="language-html">&lt;div class=&quot;checkerboard&quot; style=&quot;width: 200px; height: 200px;&quot;&gt;&lt;/div&gt;
</code></pre>
</li>
</ol>
</div><h1>Advanced Usage of CSS Houdini</h1>
<div class='content'></div><h2>Creating Custom Layouts with the Layout API</h2>
<div class='content'><ol>
<li>
<p><strong>Create a Layout Worklet Script (layout.js)</strong></p>
<pre><code class="language-javascript">class MasonryLayout {
  static get inputProperties() {
    return ['--column-count'];
  }

  *intrinsicSizes(children, edges, styleMap) {
    // Define intrinsic sizes if needed
  }

  *layout(children, edges, constraints, styleMap) {
    const columnCount = parseInt(styleMap.get('--column-count').toString());
    const columnWidth = constraints.fixedInlineSize / columnCount;
    let yOffsets = Array(columnCount).fill(0);

    for (const child of children) {
      const column = yOffsets.indexOf(Math.min(...yOffsets));
      const x = column * columnWidth;
      const y = yOffsets[column];
      const childFragment = yield child.layoutNextFragment({
        fixedInlineSize: columnWidth
      });

      childFragment.inlineOffset = x;
      childFragment.blockOffset = y;
      yOffsets[column] += childFragment.blockSize;
    }
  }
}

registerLayout('masonry', MasonryLayout);
</code></pre>
</li>
<li>
<p><strong>Register the Layout Worklet in Your HTML</strong></p>
<pre><code class="language-html">&lt;style&gt;
  .masonry {
    display: layout(masonry);
    --column-count: 3;
  }
&lt;/style&gt;
&lt;script&gt;
  if ('layoutWorklet' in CSS) {
    CSS.layoutWorklet.addModule('layout.js');
  }
&lt;/script&gt;
</code></pre>
</li>
<li>
<p><strong>Apply the Custom Layout to an Element</strong></p>
<pre><code class="language-html">&lt;div class=&quot;masonry&quot;&gt;
  &lt;div&gt;Item 1&lt;/div&gt;
  &lt;div&gt;Item 2&lt;/div&gt;
  &lt;div&gt;Item 3&lt;/div&gt;
  &lt;!-- More items --&gt;
&lt;/div&gt;
</code></pre>
</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>CSS Houdini opens up a new world of possibilities for web developers by providing low-level access to the browser's rendering engine. By understanding and utilizing Worklets, the CSS Properties and Values API, the Paint API, and the Layout API, developers can create highly customized and performant web experiences. As browser support continues to grow, the potential for CSS Houdini will only expand, making it an essential tool for modern web development.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='css-for-print'>&#x25C4;CSS for Print</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">CSS Houdini</a>
	</div>
	<div class='col-4 text-end'>
					<a href='future-of-css'>Future of CSS &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
