<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Optimization</title>

    <link rel="alternate" href="https://campusempresa.com/mod/rpg/04-03-performance-optimization" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/rpg/04-03-performance-optimization" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/rpg/04-03-performance-optimization" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/rpg/04-03-performance-optimization" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/rpg/04-03-performance-optimization" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-02-error-handling' title="Error Handling">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Performance Optimization</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='04-04-advanced-data-structures' title="Advanced Data Structures">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Performance optimization is a crucial aspect of RPG programming, especially when dealing with large datasets or complex business logic. This section will cover various techniques and best practices to enhance the performance of your RPG programs.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li>
<p><strong>Efficient Coding Practices</strong></p>
<ul>
<li>Write clean and concise code.</li>
<li>Avoid unnecessary computations and redundant code.</li>
<li>Use built-in functions and operations that are optimized for performance.</li>
</ul>
</li>
<li>
<p><strong>Optimizing Data Access</strong></p>
<ul>
<li>Minimize the number of database reads and writes.</li>
<li>Use appropriate data structures for efficient data handling.</li>
<li>Implement indexing and query optimization techniques.</li>
</ul>
</li>
<li>
<p><strong>Memory Management</strong></p>
<ul>
<li>Efficiently manage memory allocation and deallocation.</li>
<li>Use pointers and dynamic memory allocation judiciously.</li>
</ul>
</li>
<li>
<p><strong>Parallel Processing</strong></p>
<ul>
<li>Utilize multi-threading and parallel processing where applicable.</li>
<li>Distribute workloads to improve execution time.</li>
</ul>
</li>
<li>
<p><strong>Profiling and Benchmarking</strong></p>
<ul>
<li>Use profiling tools to identify performance bottlenecks.</li>
<li>Benchmark different parts of your code to measure performance improvements.</li>
</ul>
</li>
</ol>
</div><h1>Efficient Coding Practices</h1>
<div class='content'></div><h2>Example: Loop Optimization</h2>
<div class='content'><p>Consider the following example where a loop is used to process an array:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RGNsLVMgaSBJbnQoMTApOwpEY2wtUyBzdW0gSW50KDEwKTsKRGNsLVMgYXJyIEludCgxMCkgRGltKDEwMDApOwoKc3VtID0gMDsKRm9yIGkgPSAxIHRvICVFbGVtKGFycik7CiAgICBzdW0gKz0gYXJyKGkpOwpFbmRGb3I7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Dcl-S i Int(10);
Dcl-S sum Int(10);
Dcl-S arr Int(10) Dim(1000);

sum = 0;
For i = 1 to %Elem(arr);
    sum += arr(i);
EndFor;</pre></div><div class='content'><p><strong>Optimized Version:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RGNsLVMgaSBJbnQoMTApOwpEY2wtUyBzdW0gSW50KDEwKTsKRGNsLVMgYXJyIEludCgxMCkgRGltKDEwMDApOwoKc3VtID0gMDsKRm9yIGkgPSAxIHRvIDEwMDA7CiAgICBzdW0gKz0gYXJyKGkpOwpFbmRGb3I7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Dcl-S i Int(10);
Dcl-S sum Int(10);
Dcl-S arr Int(10) Dim(1000);

sum = 0;
For i = 1 to 1000;
    sum += arr(i);
EndFor;</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li>In the optimized version, the <code>%Elem(arr)</code> function call is replaced with a constant value <code>1000</code>. This avoids the overhead of calling the function in each iteration.</li>
</ul>
</div><h1>Optimizing Data Access</h1>
<div class='content'></div><h2>Example: Using SQL for Data Retrieval</h2>
<div class='content'><p>Instead of using multiple read operations in a loop, you can use SQL to fetch data more efficiently.</p>
<p><strong>Inefficient Version:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RGNsLUYgbXlmaWxlIFVzYWdlKCpJbnB1dCk7CkRjbC1TIHJlY29yZENvdW50IEludCgxMCk7CgpyZWNvcmRDb3VudCA9IDA7ClJlYWQgbXlmaWxlOwpEb3cgbm90ICVFb2YobXlmaWxlKTsKICAgIHJlY29yZENvdW50ICs9IDE7CiAgICBSZWFkIG15ZmlsZTsKRW5kRG87"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Dcl-F myfile Usage(*Input);
Dcl-S recordCount Int(10);

recordCount = 0;
Read myfile;
Dow not %Eof(myfile);
    recordCount += 1;
    Read myfile;
EndDo;</pre></div><div class='content'><p><strong>Optimized Version:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RGNsLVMgcmVjb3JkQ291bnQgSW50KDEwKTsKCkV4ZWMgU1FMCiAgICBTZWxlY3QgQ291bnQoKikgaW50byA6cmVjb3JkQ291bnQKICAgIEZyb20gbXlmaWxlOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Dcl-S recordCount Int(10);

Exec SQL
    Select Count(*) into :recordCount
    From myfile;</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li>The optimized version uses an SQL query to count the records in a single operation, which is more efficient than reading each record individually.</li>
</ul>
</div><h1>Memory Management</h1>
<div class='content'></div><h2>Example: Using Automatic Storage</h2>
<div class='content'><p><strong>Inefficient Version:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RGNsLVMgbGFyZ2VBcnJheSBJbnQoMTApIERpbSgxMDAwMDAwKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Dcl-S largeArray Int(10) Dim(1000000);</pre></div><div class='content'><p><strong>Optimized Version:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RGNsLVMgbGFyZ2VBcnJheSBJbnQoMTApIERpbSgxMDAwMDAwKSBCYXNlZChwTGFyZ2VBcnJheSk7CkRjbC1TIHBMYXJnZUFycmF5IFBvaW50ZXI7CgpwTGFyZ2VBcnJheSA9ICVBbGxvYyglU2l6ZShsYXJnZUFycmF5KSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Dcl-S largeArray Int(10) Dim(1000000) Based(pLargeArray);
Dcl-S pLargeArray Pointer;

pLargeArray = %Alloc(%Size(largeArray));</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li>The optimized version uses dynamic memory allocation (<code>%Alloc</code>) to allocate memory only when needed, reducing the program's initial memory footprint.</li>
</ul>
</div><h1>Parallel Processing</h1>
<div class='content'></div><h2>Example: Using Multi-Threading</h2>
<div class='content'><p><strong>Single-Threaded Version:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RGNsLVMgaSBJbnQoMTApOwpEY2wtUyByZXN1bHQgSW50KDEwKTsKCkZvciBpID0gMSB0byAxMDAwMDAwOwogICAgcmVzdWx0ICs9IGk7CkVuZEZvcjs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Dcl-S i Int(10);
Dcl-S result Int(10);

For i = 1 to 1000000;
    result += i;
EndFor;</pre></div><div class='content'><p><strong>Multi-Threaded Version:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RGNsLVMgaSBJbnQoMTApOwpEY2wtUyByZXN1bHQgSW50KDEwKTsKRGNsLVMgdGhyZWFkMSBQb2ludGVyOwpEY2wtUyB0aHJlYWQyIFBvaW50ZXI7CgpEY2wtUHJvYyBUaHJlYWRQcm9jOwogICAgRGNsLVBpIFRocmVhZFByb2MgSW50KDEwKTsKICAgIERjbC1TIHN0YXJ0IEludCgxMCk7CiAgICBEY2wtUyBlbmQgSW50KDEwKTsKICAgIERjbC1TIHN1bSBJbnQoMTApOwoKICAgIHN1bSA9IDA7CiAgICBGb3IgaSA9IHN0YXJ0IHRvIGVuZDsKICAgICAgICBzdW0gKz0gaTsKICAgIEVuZEZvcjsKCiAgICBSZXR1cm4gc3VtOwpFbmQtUHJvYzsKCnRocmVhZDEgPSAlVGhyZWFkKFRocmVhZFByb2M6IDE6IDUwMDAwMCk7CnRocmVhZDIgPSAlVGhyZWFkKFRocmVhZFByb2M6IDUwMDAwMTogMTAwMDAwMCk7CgpyZXN1bHQgPSAlVGhyZWFkV2FpdCh0aHJlYWQxKSArICVUaHJlYWRXYWl0KHRocmVhZDIpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Dcl-S i Int(10);
Dcl-S result Int(10);
Dcl-S thread1 Pointer;
Dcl-S thread2 Pointer;

Dcl-Proc ThreadProc;
    Dcl-Pi ThreadProc Int(10);
    Dcl-S start Int(10);
    Dcl-S end Int(10);
    Dcl-S sum Int(10);

    sum = 0;
    For i = start to end;
        sum += i;
    EndFor;

    Return sum;
End-Proc;

thread1 = %Thread(ThreadProc: 1: 500000);
thread2 = %Thread(ThreadProc: 500001: 1000000);

result = %ThreadWait(thread1) + %ThreadWait(thread2);</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li>The multi-threaded version splits the workload into two threads, each processing half of the range. This can significantly reduce execution time on multi-core processors.</li>
</ul>
</div><h1>Profiling and Benchmarking</h1>
<div class='content'></div><h2>Example: Using Profiling Tools</h2>
<div class='content'><p>Use built-in profiling tools to identify performance bottlenecks in your code. For example, IBM i provides tools like Performance Explorer (PEX) to analyze program performance.</p>
<p><strong>Steps:</strong></p>
<ol>
<li>Run your program with profiling enabled.</li>
<li>Analyze the profiling data to identify slow-performing sections.</li>
<li>Optimize the identified sections and re-profile to measure improvements.</li>
</ol>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise: Optimize a Loop</h2>
<div class='content'><p>Given the following code, optimize it for better performance:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RGNsLVMgaSBJbnQoMTApOwpEY2wtUyBqIEludCgxMCk7CkRjbC1TIHN1bSBJbnQoMTApOwoKc3VtID0gMDsKRm9yIGkgPSAxIHRvIDEwMDA7CiAgICBGb3IgaiA9IDEgdG8gMTAwMDsKICAgICAgICBzdW0gKz0gaSAqIGo7CiAgICBFbmRGb3I7CkVuZEZvcjs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Dcl-S i Int(10);
Dcl-S j Int(10);
Dcl-S sum Int(10);

sum = 0;
For i = 1 to 1000;
    For j = 1 to 1000;
        sum += i * j;
    EndFor;
EndFor;</pre></div><div class='content'><p><strong>Solution:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RGNsLVMgaSBJbnQoMTApOwpEY2wtUyBqIEludCgxMCk7CkRjbC1TIHN1bSBJbnQoMTApOwoKc3VtID0gMDsKRm9yIGkgPSAxIHRvIDEwMDA7CiAgICBzdW0gKz0gaSAqICgxMDAwICogKDEwMDAgKyAxKSkgLyAyOwpFbmRGb3I7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Dcl-S i Int(10);
Dcl-S j Int(10);
Dcl-S sum Int(10);

sum = 0;
For i = 1 to 1000;
    sum += i * (1000 * (1000 + 1)) / 2;
EndFor;</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li>The inner loop is replaced with a mathematical formula to calculate the sum of the first 1000 integers, reducing the number of iterations and improving performance.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered various techniques for optimizing the performance of RPG programs, including efficient coding practices, optimizing data access, memory management, parallel processing, and profiling. By applying these techniques, you can significantly improve the performance of your RPG applications. In the next module, we will delve into advanced data structures to further enhance your programming skills.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-02-error-handling' title="Error Handling">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='04-04-advanced-data-structures' title="Advanced Data Structures">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
