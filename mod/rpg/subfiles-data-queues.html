<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subfiles and Data Queues</title>

    <link rel="alternate" href="https://campusempresa.com/mod/rpg/subfiles-data-queues" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/rpg/subfiles-data-queues" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/rpg/subfiles-data-queues" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/rpg/subfiles-data-queues" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/rpg/subfiles-data-queues" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='advanced-conditional-logic'>&#x25C4;Advanced Conditional Logic</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Subfiles and Data Queues</a>
	</div>
	<div class='col-4 text-end'>
					<a href='modular-design'>Modular Design Principles &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In this section, we will explore two powerful features in RPG programming: Subfiles and Data Queues. These tools are essential for creating interactive and efficient applications on the IBM i platform.</p>
</div><h1>Subfiles</h1>
<div class='content'><p>Subfiles are a way to handle lists of data in RPG programs. They allow you to display multiple records on a screen and interact with them.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Subfile Control Record</strong>: Manages the subfile, including loading and displaying records.</li>
<li><strong>Subfile Record</strong>: Represents individual records within the subfile.</li>
<li><strong>Subfile Keywords</strong>: Special DDS keywords used to define subfile behavior, such as SFL, SFLCTL, SFLDSP, SFLDSPCTL, and SFLEND.</li>
</ul>
</div><h2>Example</h2>
<div class='content'><p>Let's create a simple subfile to display a list of customers.</p>
<h4>DDS for Subfile</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QSAgICAgICAgICBSIFNGTFJDRApBICAgICAgICAgICAgQ1VTVElEICAgICAgICAgNUEgIE8gIDIgIDIKQSAgICAgICAgICAgIENVU1ROQU1FICAgICAgMjBBICBPICAyICA4CgpBICAgICAgICAgIFIgU0ZMQ1RMCkEgIDkwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNGTERTUApBICA5MSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTRkxEU1BDVEwKQSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU0ZMRU5EKCpNT1JFKQpBICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTRkxQQUcoMTApCkEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNGTFNJWigxMDApCkEgICAgICAgICAgICBTRkxSQ0ROQlIgICAgICA0UyAwSCAgICAgIFNGTFJDRE5CUihDVVJTT1IpCkEgICAgICAgICAgICBTRkxSUk4gICAgICAgICA0UyAwSApBICAgICAgICAgICAgU0ZMRU5EICAgICAgICAgMUEgIEg="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>A          R SFLRCD
A            CUSTID         5A  O  2  2
A            CUSTNAME      20A  O  2  8

A          R SFLCTL
A  90                                  SFLDSP
A  91                                  SFLDSPCTL
A                                      SFLEND(*MORE)
A                                      SFLPAG(10)
A                                      SFLSIZ(100)
A            SFLRCDNBR      4S 0H      SFLRCDNBR(CURSOR)
A            SFLRRN         4S 0H
A            SFLEND         1A  H</pre></div><div class='content'><h4>RPG Code to Load Subfile</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RGNsLUYgQ1VTVE9NRVJTIFVzYWdlKCpJbnB1dCkgS2V5ZWQ7CkRjbC1GIERJU1BMQVkgICBXb3JrU3RuOwoKRGNsLVMgUlJOICAgICAgIEludCgxMCk7CkRjbC1TIEVuZE9mRmlsZSBJbmQ7CgpSZWFkIENVU1RPTUVSUzsKRG9XIE5vdCAlRU9GKENVU1RPTUVSUyk7CiAgUlJOICs9IDE7CiAgU0ZMUkNELkNVU1RJRCA9IENVU1RPTUVSUy5DVVNUSUQ7CiAgU0ZMUkNELkNVU1ROQU1FID0gQ1VTVE9NRVJTLkNVU1ROQU1FOwogIFdyaXRlIFNGTFJDRDsKICBSZWFkIENVU1RPTUVSUzsKRW5kRG87CgpTRkxDVEwuU0ZMRFNQID0gKk9uOwpTRkxDVEwuU0ZMRFNQQ1RMID0gKk9uOwpXcml0ZSBTRkxDVEw7CgpFeEZtdCBTRkxDVEw7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Dcl-F CUSTOMERS Usage(*Input) Keyed;
Dcl-F DISPLAY   WorkStn;

Dcl-S RRN       Int(10);
Dcl-S EndOfFile Ind;

Read CUSTOMERS;
DoW Not %EOF(CUSTOMERS);
  RRN += 1;
  SFLRCD.CUSTID = CUSTOMERS.CUSTID;
  SFLRCD.CUSTNAME = CUSTOMERS.CUSTNAME;
  Write SFLRCD;
  Read CUSTOMERS;
EndDo;

SFLCTL.SFLDSP = *On;
SFLCTL.SFLDSPCTL = *On;
Write SFLCTL;

ExFmt SFLCTL;</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>DDS</strong>: Defines the subfile and control record formats.</li>
<li><strong>RPG Code</strong>: Reads customer records and loads them into the subfile. The subfile is then displayed using <code>ExFmt</code>.</li>
</ul>
</div><h1>Data Queues</h1>
<div class='content'><p>Data Queues are used for asynchronous communication between programs. They allow one program to send data to another program without waiting for a response.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Data Queue</strong>: A storage structure that holds data entries.</li>
<li><strong>Send Data Queue</strong>: Adds an entry to the data queue.</li>
<li><strong>Receive Data Queue</strong>: Retrieves an entry from the data queue.</li>
</ul>
</div><h2>Example</h2>
<div class='content'><p>Let's create a simple example where one program sends a message to a data queue, and another program receives it.</p>
<h4>Sending Program</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RGNsLUYgREFUQVEgVXNhZ2UoKk91dHB1dCkgRXh0RGVzYygnTVlEQVRBUScpOwoKRGNsLVMgTWVzc2FnZSBDaGFyKDEwMCk7CgpNZXNzYWdlID0gJ0hlbGxvIGZyb20gUHJvZ3JhbSBBJzsKV3JpdGUgREFUQVEgTWVzc2FnZTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Dcl-F DATAQ Usage(*Output) ExtDesc('MYDATAQ');

Dcl-S Message Char(100);

Message = 'Hello from Program A';
Write DATAQ Message;</pre></div><div class='content'><h4>Receiving Program</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RGNsLUYgREFUQVEgVXNhZ2UoKklucHV0KSBFeHREZXNjKCdNWURBVEFRJyk7CgpEY2wtUyBNZXNzYWdlIENoYXIoMTAwKTsKClJlYWQgREFUQVEgTWVzc2FnZTsKRHNwbHkgTWVzc2FnZTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Dcl-F DATAQ Usage(*Input) ExtDesc('MYDATAQ');

Dcl-S Message Char(100);

Read DATAQ Message;
Dsply Message;</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Sending Program</strong>: Writes a message to the data queue.</li>
<li><strong>Receiving Program</strong>: Reads the message from the data queue and displays it.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Subfiles and Data Queues are essential tools in RPG programming for handling lists of data and enabling asynchronous communication between programs. Subfiles allow for interactive data display and manipulation, while Data Queues facilitate efficient inter-program communication. Understanding and utilizing these features will significantly enhance your ability to create robust and user-friendly applications on the IBM i platform.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='advanced-conditional-logic'>&#x25C4;Advanced Conditional Logic</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Subfiles and Data Queues</a>
	</div>
	<div class='col-4 text-end'>
					<a href='modular-design'>Modular Design Principles &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
