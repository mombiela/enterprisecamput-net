<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Management</title>

    <link rel="alternate" href="https://campusempresa.com/mod/sistemas_operativos/02-02-gestion-memoria" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/sistemas_operativos/02-02-gestio-memoria" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/sistemas_operativos/02-02-memory-management" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/sistemas_operativos/02-02-gestion-memoria" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/sistemas_operativos/02-02-gestio-memoria" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='02-01-process-management' title="Process Management">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Memory Management</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='02-03-storage-management' title="Storage Management">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Memory management is a critical function of an operating system (OS) that involves managing the computer's primary memory. The OS is responsible for allocating memory to processes when they need it and deallocating it when they are done. This ensures efficient utilization of memory resources and system stability.</p>
</div><h1>Key Concepts in Memory Management</h1>
<div class='content'><ol>
<li>
<p><strong>Memory Allocation</strong></p>
<ul>
<li><strong>Static Allocation:</strong> Memory is allocated at compile time.</li>
<li><strong>Dynamic Allocation:</strong> Memory is allocated at runtime.</li>
</ul>
</li>
<li>
<p><strong>Memory Deallocation</strong></p>
<ul>
<li><strong>Automatic Deallocation:</strong> Managed by the OS or runtime environment.</li>
<li><strong>Manual Deallocation:</strong> Managed by the programmer (e.g., using <code>free()</code> in C).</li>
</ul>
</li>
<li>
<p><strong>Memory Hierarchy</strong></p>
<ul>
<li><strong>Registers:</strong> Fastest, smallest, and most expensive.</li>
<li><strong>Cache:</strong> Faster than main memory, used to store frequently accessed data.</li>
<li><strong>Main Memory (RAM):</strong> Primary storage for currently running processes.</li>
<li><strong>Secondary Storage:</strong> Non-volatile storage like hard drives and SSDs.</li>
</ul>
</li>
<li>
<p><strong>Memory Management Techniques</strong></p>
<ul>
<li><strong>Contiguous Allocation:</strong> Each process is allocated a single contiguous block of memory.</li>
<li><strong>Non-Contiguous Allocation:</strong> Memory is divided into fixed or variable-sized blocks (pages or segments).</li>
</ul>
</li>
</ol>
</div><h1>Memory Allocation Strategies</h1>
<div class='content'><ol>
<li>
<p><strong>Fixed Partitioning</strong></p>
<ul>
<li>Memory is divided into fixed-sized partitions.</li>
<li>Each partition can hold exactly one process.</li>
<li><strong>Pros:</strong> Simple to implement.</li>
<li><strong>Cons:</strong> Inefficient use of memory, internal fragmentation.</li>
</ul>
</li>
<li>
<p><strong>Dynamic Partitioning</strong></p>
<ul>
<li>Memory is divided into partitions dynamically based on process needs.</li>
<li><strong>Pros:</strong> Better memory utilization.</li>
<li><strong>Cons:</strong> External fragmentation.</li>
</ul>
</li>
<li>
<p><strong>Paging</strong></p>
<ul>
<li>Memory is divided into fixed-size pages.</li>
<li>Processes are divided into pages of the same size.</li>
<li><strong>Pros:</strong> Eliminates external fragmentation.</li>
<li><strong>Cons:</strong> Can cause internal fragmentation.</li>
</ul>
</li>
<li>
<p><strong>Segmentation</strong></p>
<ul>
<li>Memory is divided into segments based on logical divisions (e.g., code, data, stack).</li>
<li><strong>Pros:</strong> Supports logical division of processes.</li>
<li><strong>Cons:</strong> Can cause external fragmentation.</li>
</ul>
</li>
</ol>
</div><h1>Paging and Segmentation</h1>
<div class='content'></div><h2>Paging</h2>
<div class='content'><p>Paging is a memory management scheme that eliminates the need for contiguous allocation of physical memory. This avoids the problem of fitting varying sized memory chunks onto the backing store.</p>
<ul>
<li><strong>Page Table:</strong> A data structure used by the OS to keep track of the mapping between virtual addresses and physical addresses.</li>
<li><strong>Page Frame:</strong> A fixed-size block of physical memory.</li>
</ul>
<p><strong>Example:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRXhhbXBsZSBvZiBhIHNpbXBsZSBwYWdlIHRhYmxlIGVudHJ5IHN0cnVjdHVyZSBpbiBDCnN0cnVjdCBwYWdlX3RhYmxlX2VudHJ5IHsKICAgIHVuc2lnbmVkIGludCBmcmFtZV9udW1iZXIgOiAyMDsgLy8gRnJhbWUgbnVtYmVyIGluIHBoeXNpY2FsIG1lbW9yeQogICAgdW5zaWduZWQgaW50IHByZXNlbnQgOiAxOyAgICAgICAvLyBQYWdlIHByZXNlbnQgaW4gbWVtb3J5CiAgICB1bnNpZ25lZCBpbnQgcncgOiAxOyAgICAgICAgICAgIC8vIFJlYWQvV3JpdGUgcGVybWlzc2lvbgogICAgdW5zaWduZWQgaW50IHVzZXIgOiAxOyAgICAgICAgICAvLyBVc2VyL1N1cGVydmlzb3IgbW9kZQogICAgdW5zaWduZWQgaW50IHJlc2VydmVkIDogOTsgICAgICAvLyBSZXNlcnZlZCBiaXRzCn07"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Example of a simple page table entry structure in C
struct page_table_entry {
    unsigned int frame_number : 20; // Frame number in physical memory
    unsigned int present : 1;       // Page present in memory
    unsigned int rw : 1;            // Read/Write permission
    unsigned int user : 1;          // User/Supervisor mode
    unsigned int reserved : 9;      // Reserved bits
};</pre></div><div class='content'></div><h2>Segmentation</h2>
<div class='content'><p>Segmentation divides the process into segments, which are logical units such as functions, arrays, and objects. Each segment has a base address and a length.</p>
<ul>
<li><strong>Segment Table:</strong> A table that contains the base address and length of each segment.</li>
<li><strong>Segment Descriptor:</strong> Contains information about a segment, such as its base address, size, and access permissions.</li>
</ul>
<p><strong>Example:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRXhhbXBsZSBvZiBhIHNpbXBsZSBzZWdtZW50IGRlc2NyaXB0b3Igc3RydWN0dXJlIGluIEMKc3RydWN0IHNlZ21lbnRfZGVzY3JpcHRvciB7CiAgICB1bnNpZ25lZCBpbnQgYmFzZV9hZGRyZXNzOyAvLyBCYXNlIGFkZHJlc3Mgb2YgdGhlIHNlZ21lbnQKICAgIHVuc2lnbmVkIGludCBsaW1pdDsgICAgICAgIC8vIExlbmd0aCBvZiB0aGUgc2VnbWVudAogICAgdW5zaWduZWQgaW50IHR5cGUgOiA0OyAgICAgLy8gU2VnbWVudCB0eXBlCiAgICB1bnNpZ25lZCBpbnQgcyA6IDE7ICAgICAgICAvLyBEZXNjcmlwdG9yIHR5cGUgKDAgPSBzeXN0ZW0sIDEgPSBjb2RlL2RhdGEpCiAgICB1bnNpZ25lZCBpbnQgZHBsIDogMjsgICAgICAvLyBEZXNjcmlwdG9yIHByaXZpbGVnZSBsZXZlbAogICAgdW5zaWduZWQgaW50IHAgOiAxOyAgICAgICAgLy8gU2VnbWVudCBwcmVzZW50Cn07"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Example of a simple segment descriptor structure in C
struct segment_descriptor {
    unsigned int base_address; // Base address of the segment
    unsigned int limit;        // Length of the segment
    unsigned int type : 4;     // Segment type
    unsigned int s : 1;        // Descriptor type (0 = system, 1 = code/data)
    unsigned int dpl : 2;      // Descriptor privilege level
    unsigned int p : 1;        // Segment present
};</pre></div><div class='content'></div><h1>Practical Exercises</h1>
<div class='content'></div><h2>Exercise 1: Understanding Paging</h2>
<div class='content'><p><strong>Task:</strong> Given a virtual address and a page table, determine the corresponding physical address.</p>
<p><strong>Virtual Address:</strong> 0x1234
<strong>Page Table:</strong>
| Page Number | Frame Number |
|-------------|--------------|
| 0           | 5            |
| 1           | 9            |
| 2           | 3            |
| 3           | 7            |</p>
<p><strong>Solution:</strong></p>
<ol>
<li>Convert the virtual address to binary: <code>0x1234</code> -&gt; <code>0001 0010 0011 0100</code></li>
<li>Split the address into page number and offset:
<ul>
<li>Page Number: <code>0001</code> (binary) -&gt; 1 (decimal)</li>
<li>Offset: <code>0010 0011 0100</code> (binary) -&gt; 564 (decimal)</li>
</ul>
</li>
<li>Look up the frame number in the page table: Page 1 -&gt; Frame 9</li>
<li>Combine the frame number with the offset to get the physical address:
<ul>
<li>Frame Number: <code>9</code> (decimal) -&gt; <code>1001</code> (binary)</li>
<li>Physical Address: <code>1001 0010 0011 0100</code> (binary) -&gt; <code>0x9234</code></li>
</ul>
</li>
</ol>
</div><h2>Exercise 2: Implementing a Simple Page Table in C</h2>
<div class='content'><p><strong>Task:</strong> Write a C program to simulate a simple page table lookup.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CgojZGVmaW5lIFBBR0VfU0laRSAxMDI0IC8vIEFzc3VtZSBwYWdlIHNpemUgaXMgMTAyNCBieXRlcwoKLy8gUGFnZSB0YWJsZSBlbnRyeSBzdHJ1Y3R1cmUKc3RydWN0IHBhZ2VfdGFibGVfZW50cnkgewogICAgdW5zaWduZWQgaW50IGZyYW1lX251bWJlcjsKICAgIHVuc2lnbmVkIGludCBwcmVzZW50Owp9OwoKLy8gRnVuY3Rpb24gdG8gdHJhbnNsYXRlIHZpcnR1YWwgYWRkcmVzcyB0byBwaHlzaWNhbCBhZGRyZXNzCnVuc2lnbmVkIGludCB0cmFuc2xhdGVfYWRkcmVzcyh1bnNpZ25lZCBpbnQgdmlydHVhbF9hZGRyZXNzLCBzdHJ1Y3QgcGFnZV90YWJsZV9lbnRyeSAqcGFnZV90YWJsZSwgaW50IG51bV9wYWdlcykgewogICAgdW5zaWduZWQgaW50IHBhZ2VfbnVtYmVyID0gdmlydHVhbF9hZGRyZXNzIC8gUEFHRV9TSVpFOwogICAgdW5zaWduZWQgaW50IG9mZnNldCA9IHZpcnR1YWxfYWRkcmVzcyAlIFBBR0VfU0laRTsKCiAgICBpZiAocGFnZV9udW1iZXIgPj0gbnVtX3BhZ2VzIHx8ICFwYWdlX3RhYmxlW3BhZ2VfbnVtYmVyXS5wcmVzZW50KSB7CiAgICAgICAgcHJpbnRmKCJJbnZhbGlkIHZpcnR1YWwgYWRkcmVzcyFcbiIpOwogICAgICAgIHJldHVybiAtMTsKICAgIH0KCiAgICB1bnNpZ25lZCBpbnQgZnJhbWVfbnVtYmVyID0gcGFnZV90YWJsZVtwYWdlX251bWJlcl0uZnJhbWVfbnVtYmVyOwogICAgdW5zaWduZWQgaW50IHBoeXNpY2FsX2FkZHJlc3MgPSBmcmFtZV9udW1iZXIgKiBQQUdFX1NJWkUgKyBvZmZzZXQ7CgogICAgcmV0dXJuIHBoeXNpY2FsX2FkZHJlc3M7Cn0KCmludCBtYWluKCkgewogICAgLy8gRXhhbXBsZSBwYWdlIHRhYmxlIHdpdGggNCBlbnRyaWVzCiAgICBzdHJ1Y3QgcGFnZV90YWJsZV9lbnRyeSBwYWdlX3RhYmxlWzRdID0gewogICAgICAgIHs1LCAxfSwgLy8gUGFnZSAwIC0+IEZyYW1lIDUKICAgICAgICB7OSwgMX0sIC8vIFBhZ2UgMSAtPiBGcmFtZSA5CiAgICAgICAgezMsIDF9LCAvLyBQYWdlIDIgLT4gRnJhbWUgMwogICAgICAgIHs3LCAxfSAgLy8gUGFnZSAzIC0+IEZyYW1lIDcKICAgIH07CgogICAgdW5zaWduZWQgaW50IHZpcnR1YWxfYWRkcmVzcyA9IDB4MTIzNDsKICAgIHVuc2lnbmVkIGludCBwaHlzaWNhbF9hZGRyZXNzID0gdHJhbnNsYXRlX2FkZHJlc3ModmlydHVhbF9hZGRyZXNzLCBwYWdlX3RhYmxlLCA0KTsKCiAgICBpZiAocGh5c2ljYWxfYWRkcmVzcyAhPSAtMSkgewogICAgICAgIHByaW50ZigiVmlydHVhbCBBZGRyZXNzOiAweCV4IC0+IFBoeXNpY2FsIEFkZHJlc3M6IDB4JXhcbiIsIHZpcnR1YWxfYWRkcmVzcywgcGh5c2ljYWxfYWRkcmVzcyk7CiAgICB9CgogICAgcmV0dXJuIDA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;

#define PAGE_SIZE 1024 // Assume page size is 1024 bytes

// Page table entry structure
struct page_table_entry {
    unsigned int frame_number;
    unsigned int present;
};

// Function to translate virtual address to physical address
unsigned int translate_address(unsigned int virtual_address, struct page_table_entry *page_table, int num_pages) {
    unsigned int page_number = virtual_address / PAGE_SIZE;
    unsigned int offset = virtual_address % PAGE_SIZE;

    if (page_number &gt;= num_pages || !page_table[page_number].present) {
        printf(&quot;Invalid virtual address!\n&quot;);
        return -1;
    }

    unsigned int frame_number = page_table[page_number].frame_number;
    unsigned int physical_address = frame_number * PAGE_SIZE + offset;

    return physical_address;
}

int main() {
    // Example page table with 4 entries
    struct page_table_entry page_table[4] = {
        {5, 1}, // Page 0 -&gt; Frame 5
        {9, 1}, // Page 1 -&gt; Frame 9
        {3, 1}, // Page 2 -&gt; Frame 3
        {7, 1}  // Page 3 -&gt; Frame 7
    };

    unsigned int virtual_address = 0x1234;
    unsigned int physical_address = translate_address(virtual_address, page_table, 4);

    if (physical_address != -1) {
        printf(&quot;Virtual Address: 0x%x -&gt; Physical Address: 0x%x\n&quot;, virtual_address, physical_address);
    }

    return 0;
}</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li>The <code>translate_address</code> function takes a virtual address, a page table, and the number of pages as input.</li>
<li>It calculates the page number and offset from the virtual address.</li>
<li>It checks if the page number is valid and if the page is present in memory.</li>
<li>It then calculates the physical address by combining the frame number and offset.</li>
</ul>
</div><h1>Summary</h1>
<div class='content'><p>In this section, we covered the fundamental concepts of memory management, including memory allocation and deallocation, memory hierarchy, and various memory management techniques such as paging and segmentation. We also provided practical exercises to reinforce the concepts learned. Understanding memory management is crucial for optimizing system performance and ensuring efficient utilization of memory resources.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='02-01-process-management' title="Process Management">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='02-03-storage-management' title="Storage Management">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
