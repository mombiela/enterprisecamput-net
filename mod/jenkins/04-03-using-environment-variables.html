<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using Environment Variables</title>

    <link rel="alternate" href="https://campusempresa.com/mod/jenkins/04-03-using-environment-variables" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/jenkins/04-03-using-environment-variables" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/jenkins/04-03-using-environment-variables" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/jenkins/04-03-using-environment-variables" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/jenkins/04-03-using-environment-variables" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-02-parallel-execution-in-pipelines' title="Parallel Execution in Pipelines">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Using Environment Variables</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='04-04-pipeline-best-practices' title="Pipeline Best Practices">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Environment variables are a powerful feature in Jenkins pipelines that allow you to manage and pass configuration data dynamically. They can be used to store sensitive information, such as API keys, or to configure different environments (e.g., development, staging, production).</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Environment Variables</strong>: Variables that are set in the environment in which Jenkins jobs run. They can be used to pass data between different stages of a pipeline.</li>
<li><strong>Global Environment Variables</strong>: Variables that are available to all jobs and pipelines within Jenkins.</li>
<li><strong>Job-Specific Environment Variables</strong>: Variables that are specific to a particular job or pipeline.</li>
<li><strong>Built-in Environment Variables</strong>: Predefined variables provided by Jenkins, such as <code>BUILD_NUMBER</code>, <code>JOB_NAME</code>, etc.</li>
</ol>
</div><h1>Setting Environment Variables</h1>
<div class='content'></div><h2>Global Environment Variables</h2>
<div class='content'><p>Global environment variables can be set in the Jenkins configuration:</p>
<ol>
<li>Navigate to <code>Manage Jenkins</code> &gt; <code>Configure System</code>.</li>
<li>Scroll down to the <code>Global properties</code> section.</li>
<li>Check the <code>Environment variables</code> checkbox.</li>
<li>Add the desired environment variables.</li>
</ol>
</div><h2>Job-Specific Environment Variables</h2>
<div class='content'><p>Job-specific environment variables can be set within a pipeline script using the <code>environment</code> directive.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwZWxpbmUgewogICAgYWdlbnQgYW55CiAgICBlbnZpcm9ubWVudCB7CiAgICAgICAgTVlfVkFSID0gJ0hlbGxvLCBXb3JsZCEnCiAgICAgICAgQVBJX0tFWSA9IGNyZWRlbnRpYWxzKCdteS1hcGkta2V5JykKICAgIH0KICAgIHN0YWdlcyB7CiAgICAgICAgc3RhZ2UoJ0V4YW1wbGUnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGVjaG8gIk1ZX1ZBUiBpcyAke2Vudi5NWV9WQVJ9IgogICAgICAgICAgICAgICAgZWNobyAiQVBJX0tFWSBpcyAke2Vudi5BUElfS0VZfSIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pipeline {
    agent any
    environment {
        MY_VAR = 'Hello, World!'
        API_KEY = credentials('my-api-key')
    }
    stages {
        stage('Example') {
            steps {
                echo &quot;MY_VAR is ${env.MY_VAR}&quot;
                echo &quot;API_KEY is ${env.API_KEY}&quot;
            }
        }
    }
}</pre></div><div class='content'></div><h2>Built-in Environment Variables</h2>
<div class='content'><p>Jenkins provides several built-in environment variables that can be used in your pipelines:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BUILD_NUMBER</code></td>
<td>The current build number</td>
</tr>
<tr>
<td><code>JOB_NAME</code></td>
<td>The name of the job</td>
</tr>
<tr>
<td><code>WORKSPACE</code></td>
<td>The workspace directory for the job</td>
</tr>
<tr>
<td><code>BUILD_URL</code></td>
<td>The URL of the current build</td>
</tr>
<tr>
<td><code>GIT_COMMIT</code></td>
<td>The commit hash of the current Git revision</td>
</tr>
</tbody>
</table>
</div><h1>Practical Example</h1>
<div class='content'><p>Let's create a simple pipeline that demonstrates the use of environment variables.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwZWxpbmUgewogICAgYWdlbnQgYW55CiAgICBlbnZpcm9ubWVudCB7CiAgICAgICAgR1JFRVRJTkcgPSAnSGVsbG8nCiAgICAgICAgTkFNRSA9ICdKZW5raW5zJwogICAgfQogICAgc3RhZ2VzIHsKICAgICAgICBzdGFnZSgnUHJpbnQgR3JlZXRpbmcnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIHNjcmlwdCB7CiAgICAgICAgICAgICAgICAgICAgZGVmIG1lc3NhZ2UgPSAiJHtlbnYuR1JFRVRJTkd9LCAke2Vudi5OQU1FfSEiCiAgICAgICAgICAgICAgICAgICAgZWNobyBtZXNzYWdlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc3RhZ2UoJ1VzZSBCdWlsdC1pbiBWYXJpYWJsZXMnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGVjaG8gIlRoaXMgaXMgYnVpbGQgbnVtYmVyICR7ZW52LkJVSUxEX05VTUJFUn0gb2Ygam9iICR7ZW52LkpPQl9OQU1FfSIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pipeline {
    agent any
    environment {
        GREETING = 'Hello'
        NAME = 'Jenkins'
    }
    stages {
        stage('Print Greeting') {
            steps {
                script {
                    def message = &quot;${env.GREETING}, ${env.NAME}!&quot;
                    echo message
                }
            }
        }
        stage('Use Built-in Variables') {
            steps {
                echo &quot;This is build number ${env.BUILD_NUMBER} of job ${env.JOB_NAME}&quot;
            }
        }
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Environment Directive</strong>: Sets the <code>GREETING</code> and <code>NAME</code> variables.</li>
<li><strong>Print Greeting Stage</strong>: Constructs a message using the environment variables and prints it.</li>
<li><strong>Use Built-in Variables Stage</strong>: Prints the build number and job name using built-in environment variables.</li>
</ul>
</div><h1>Practical Exercises</h1>
<div class='content'></div><h2>Exercise 1: Setting and Using Environment Variables</h2>
<div class='content'><ol>
<li>Create a new pipeline job in Jenkins.</li>
<li>Use the following pipeline script:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwZWxpbmUgewogICAgYWdlbnQgYW55CiAgICBlbnZpcm9ubWVudCB7CiAgICAgICAgRU5WSVJPTk1FTlQgPSAnZGV2ZWxvcG1lbnQnCiAgICAgICAgVkVSU0lPTiA9ICcxLjAuMCcKICAgIH0KICAgIHN0YWdlcyB7CiAgICAgICAgc3RhZ2UoJ1ByaW50IEVudmlyb25tZW50JykgewogICAgICAgICAgICBzdGVwcyB7CiAgICAgICAgICAgICAgICBlY2hvICJSdW5uaW5nIGluICR7ZW52LkVOVklST05NRU5UfSBlbnZpcm9ubWVudCwgdmVyc2lvbiAke2Vudi5WRVJTSU9OfSIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pipeline {
    agent any
    environment {
        ENVIRONMENT = 'development'
        VERSION = '1.0.0'
    }
    stages {
        stage('Print Environment') {
            steps {
                echo &quot;Running in ${env.ENVIRONMENT} environment, version ${env.VERSION}&quot;
            }
        }
    }
}</pre></div><div class='content'><ol start="3">
<li>Run the job and observe the output.</li>
</ol>
<p><strong>Solution:</strong></p>
<p>The output should display the environment and version as set in the <code>environment</code> directive.</p>
</div><h2>Exercise 2: Using Credentials as Environment Variables</h2>
<div class='content'><ol>
<li>Add a new secret text credential in Jenkins with the ID <code>my-secret</code>.</li>
<li>Create a new pipeline job with the following script:</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwZWxpbmUgewogICAgYWdlbnQgYW55CiAgICBlbnZpcm9ubWVudCB7CiAgICAgICAgU0VDUkVUID0gY3JlZGVudGlhbHMoJ215LXNlY3JldCcpCiAgICB9CiAgICBzdGFnZXMgewogICAgICAgIHN0YWdlKCdQcmludCBTZWNyZXQnKSB7CiAgICAgICAgICAgIHN0ZXBzIHsKICAgICAgICAgICAgICAgIGVjaG8gIlRoZSBzZWNyZXQgaXMgJHtlbnYuU0VDUkVUfSIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pipeline {
    agent any
    environment {
        SECRET = credentials('my-secret')
    }
    stages {
        stage('Print Secret') {
            steps {
                echo &quot;The secret is ${env.SECRET}&quot;
            }
        }
    }
}</pre></div><div class='content'><ol start="3">
<li>Run the job and observe the output.</li>
</ol>
<p><strong>Solution:</strong></p>
<p>The output should display the secret value stored in the Jenkins credentials.</p>
</div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li>
<p><strong>Mistake</strong>: Forgetting to use the <code>env</code> prefix when accessing environment variables.</p>
<ul>
<li><strong>Tip</strong>: Always use <code>env.VARIABLE_NAME</code> to access environment variables in pipeline scripts.</li>
</ul>
</li>
<li>
<p><strong>Mistake</strong>: Hardcoding sensitive information in the pipeline script.</p>
<ul>
<li><strong>Tip</strong>: Use Jenkins credentials to securely manage sensitive information.</li>
</ul>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered the basics of using environment variables in Jenkins pipelines. We learned how to set global and job-specific environment variables, use built-in environment variables, and securely manage sensitive information using Jenkins credentials. Understanding and effectively using environment variables is crucial for creating flexible and maintainable Jenkins pipelines. In the next section, we will explore pipeline best practices to further enhance your Jenkins skills.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-02-parallel-execution-in-pipelines' title="Parallel Execution in Pipelines">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='04-04-pipeline-best-practices' title="Pipeline Best Practices">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
