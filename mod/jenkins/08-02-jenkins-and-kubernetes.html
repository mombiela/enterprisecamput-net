<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jenkins and Kubernetes</title>

    <link rel="alternate" href="https://campusempresa.com/mod/jenkins/08-02-jenkins-and-kubernetes" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/jenkins/08-02-jenkins-and-kubernetes" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/jenkins/08-02-jenkins-and-kubernetes" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/jenkins/08-02-jenkins-and-kubernetes" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/jenkins/08-02-jenkins-and-kubernetes" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-01-using-jenkins-with-docker' title="Using Jenkins with Docker">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Jenkins and Kubernetes</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-03-jenkins-as-code-with-jenkinsfile' title="Jenkins as Code with Jenkinsfile">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how Jenkins can be integrated with Kubernetes to create a powerful CI/CD pipeline. Kubernetes is an open-source container orchestration platform that automates the deployment, scaling, and management of containerized applications. By combining Jenkins with Kubernetes, you can achieve scalable and efficient continuous integration and continuous delivery (CI/CD) pipelines.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Kubernetes Overview</strong>:</p>
<ul>
<li><strong>Cluster</strong>: A set of nodes (machines) that run containerized applications.</li>
<li><strong>Node</strong>: A single machine in the Kubernetes cluster.</li>
<li><strong>Pod</strong>: The smallest deployable unit in Kubernetes, which can contain one or more containers.</li>
<li><strong>Service</strong>: An abstraction that defines a logical set of Pods and a policy by which to access them.</li>
<li><strong>Deployment</strong>: A resource that provides declarative updates to applications.</li>
</ul>
</li>
<li>
<p><strong>Jenkins Kubernetes Plugin</strong>:</p>
<ul>
<li>Allows Jenkins to dynamically provision Kubernetes Pods to run Jenkins agents.</li>
<li>Provides scalability by leveraging Kubernetes' ability to manage containerized workloads.</li>
</ul>
</li>
</ol>
</div><h1><p>Setting Up Jenkins with Kubernetes</p>
</h1>
<div class='content'></div><h2><p>Prerequisites</p>
</h2>
<div class='content'><ul>
<li>A running Kubernetes cluster.</li>
<li>Jenkins installed and running.</li>
<li>kubectl command-line tool configured to interact with your Kubernetes cluster.</li>
</ul>
</div><h2><p>Step-by-Step Guide</p>
</h2>
<div class='content'><h4>1. Install the Kubernetes Plugin in Jenkins</h4>
<ol>
<li>Navigate to <strong>Manage Jenkins</strong> &gt; <strong>Manage Plugins</strong>.</li>
<li>Go to the <strong>Available</strong> tab and search for &quot;Kubernetes&quot;.</li>
<li>Install the <strong>Kubernetes</strong> plugin and restart Jenkins if required.</li>
</ol>
<h4>2. Configure Kubernetes Cloud in Jenkins</h4>
<ol>
<li>Go to <strong>Manage Jenkins</strong> &gt; <strong>Configure System</strong>.</li>
<li>Scroll down to the <strong>Cloud</strong> section and click <strong>Add a new cloud</strong> &gt; <strong>Kubernetes</strong>.</li>
<li>Configure the Kubernetes cloud with the following details:
<ul>
<li><strong>Kubernetes URL</strong>: The URL of your Kubernetes API server.</li>
<li><strong>Kubernetes Namespace</strong>: The namespace where Jenkins agents will be created.</li>
<li><strong>Credentials</strong>: Add Kubernetes credentials if required.</li>
<li><strong>Jenkins URL</strong>: The URL of your Jenkins instance.</li>
<li><strong>Jenkins Tunnel</strong>: The Jenkins agent tunnel address (optional).</li>
</ul>
</li>
</ol>
<h4>3. Define Pod Templates</h4>
<ol>
<li>In the Kubernetes cloud configuration, click <strong>Add Pod Template</strong>.</li>
<li>Configure the Pod template with the following details:
<ul>
<li><strong>Name</strong>: A unique name for the Pod template.</li>
<li><strong>Labels</strong>: Labels to match the Jenkins jobs that will use this template.</li>
<li><strong>Containers</strong>: Define the containers that will run in the Pod. For example:
<pre><code class="language-yaml">- name: jnlp
  image: jenkins/inbound-agent
  args: ${computer.jnlpmac} ${computer.name}
- name: maven
  image: maven:3.6.3-jdk-8
  command: cat
  tty: true
</code></pre>
</li>
</ul>
</li>
</ol>
<h4>4. Create a Jenkins Pipeline</h4>
<ol>
<li>Create a new Jenkins pipeline job.</li>
<li>Define the pipeline script to use the Kubernetes Pod template. For example:
<pre><code class="language-groovy">pipeline {
    agent {
        kubernetes {
            label 'k8s-agent'
            defaultContainer 'jnlp'
            yaml &quot;&quot;&quot;
            apiVersion: v1
            kind: Pod
            metadata:
              labels:
                some-label: some-value
            spec:
              containers:
              - name: maven
                image: maven:3.6.3-jdk-8
                command:
                - cat
                tty: true
            &quot;&quot;&quot;
        }
    }
    stages {
        stage('Build') {
            steps {
                container('maven') {
                    sh 'mvn clean install'
                }
            }
        }
    }
}
</code></pre>
</li>
</ol>
</div><h2><p>Practical Exercise</p>
</h2>
<div class='content'><p><strong>Exercise</strong>: Create a Jenkins pipeline that builds a simple Java application using a Kubernetes Pod.</p>
<ol>
<li>
<p><strong>Setup</strong>:</p>
<ul>
<li>Ensure you have a running Kubernetes cluster and Jenkins instance.</li>
<li>Install the Kubernetes plugin in Jenkins.</li>
</ul>
</li>
<li>
<p><strong>Steps</strong>:</p>
<ul>
<li>Configure the Kubernetes cloud in Jenkins.</li>
<li>Define a Pod template with a Maven container.</li>
<li>Create a Jenkins pipeline job with the following script:
<pre><code class="language-groovy">pipeline {
    agent {
        kubernetes {
            label 'k8s-agent'
            defaultContainer 'jnlp'
            yaml &quot;&quot;&quot;
            apiVersion: v1
            kind: Pod
            metadata:
              labels:
                some-label: some-value
            spec:
              containers:
              - name: maven
                image: maven:3.6.3-jdk-8
                command:
                - cat
                tty: true
            &quot;&quot;&quot;
        }
    }
    stages {
        stage('Build') {
            steps {
                container('maven') {
                    sh 'mvn clean install'
                }
            }
        }
    }
}
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Run the Pipeline</strong>:</p>
<ul>
<li>Trigger the pipeline job and observe the logs to ensure the build is executed within the Kubernetes Pod.</li>
</ul>
</li>
</ol>
</div><h2><p>Common Mistakes and Tips</p>
</h2>
<div class='content'><ul>
<li><strong>Kubernetes API Access</strong>: Ensure Jenkins has the necessary permissions to interact with the Kubernetes API.</li>
<li><strong>Pod Template Configuration</strong>: Verify the Pod template configuration, especially the container names and images.</li>
<li><strong>Resource Limits</strong>: Define resource limits for the containers to avoid overloading the Kubernetes cluster.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>Integrating Jenkins with Kubernetes allows you to leverage the scalability and flexibility of Kubernetes for your CI/CD pipelines. By dynamically provisioning Jenkins agents as Kubernetes Pods, you can efficiently manage build workloads and optimize resource utilization. In the next section, we will explore how to use Jenkins with Docker to further enhance your CI/CD workflows.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='08-01-using-jenkins-with-docker' title="Using Jenkins with Docker">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-03-jenkins-as-code-with-jenkinsfile' title="Jenkins as Code with Jenkinsfile">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
