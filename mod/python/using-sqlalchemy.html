<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using SQLAlchemy</title>

    <link rel="alternate" href="https://campusempresa.com/mod/python/using-sqlalchemy" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/python/using-sqlalchemy" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/python/using-sqlalchemy" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/python/using-sqlalchemy" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/python/using-sqlalchemy" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='sqlite-in-python'>&#x25C4;SQLite in Python</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using SQLAlchemy</a>
	</div>
	<div class='col-4 text-end'>
					<a href='interacting-with-nosql-databases'>Interacting with NoSQL Databases &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to SQLAlchemy</h1>
<div class='content'><p>SQLAlchemy is a powerful SQL toolkit and Object-Relational Mapping (ORM) library for Python. It provides a full suite of well-known enterprise-level persistence patterns, designed for efficient and high-performing database access.</p>
<ul>
<li><strong>SQLAlchemy Core</strong>: Provides a schema-centric SQL abstraction layer.</li>
<li><strong>SQLAlchemy ORM</strong>: Provides a higher-level, ORM-centric interface.</li>
</ul>
</div><h1>Installing SQLAlchemy</h1>
<div class='content'><p>To get started with SQLAlchemy, you need to install it using pip.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwIGluc3RhbGwgc3FsYWxjaGVteQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pip install sqlalchemy</pre></div><div class='content'></div><h1>SQLAlchemy Core</h1>
<div class='content'><p>SQLAlchemy Core provides a SQL Expression Language and an Object Relational Mapper (ORM). We'll start with the Core to understand the basics of SQLAlchemy.</p>
</div><h2>Connecting to a Database</h2>
<div class='content'><p>First, you need to create an engine, which is the starting point for any SQLAlchemy application.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBzcWxhbGNoZW15IGltcG9ydCBjcmVhdGVfZW5naW5lCgojIFJlcGxhY2UgJ3NxbGl0ZTovLy9leGFtcGxlLmRiJyB3aXRoIHlvdXIgZGF0YWJhc2UgVVJMCmVuZ2luZSA9IGNyZWF0ZV9lbmdpbmUoJ3NxbGl0ZTovLy9leGFtcGxlLmRiJyk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from sqlalchemy import create_engine

# Replace 'sqlite:///example.db' with your database URL
engine = create_engine('sqlite:///example.db')</pre></div><div class='content'></div><h2>Creating Tables</h2>
<div class='content'><p>You can define tables using the <code>Table</code> class and metadata.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBzcWxhbGNoZW15IGltcG9ydCBUYWJsZSwgQ29sdW1uLCBJbnRlZ2VyLCBTdHJpbmcsIE1ldGFEYXRhCgptZXRhZGF0YSA9IE1ldGFEYXRhKCkKCnVzZXJzID0gVGFibGUoJ3VzZXJzJywgbWV0YWRhdGEsCiAgICBDb2x1bW4oJ2lkJywgSW50ZWdlciwgcHJpbWFyeV9rZXk9VHJ1ZSksCiAgICBDb2x1bW4oJ25hbWUnLCBTdHJpbmcpLAogICAgQ29sdW1uKCdhZ2UnLCBJbnRlZ2VyKQopCgptZXRhZGF0YS5jcmVhdGVfYWxsKGVuZ2luZSkgICMgQ3JlYXRlcyB0aGUgdGFibGU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from sqlalchemy import Table, Column, Integer, String, MetaData

metadata = MetaData()

users = Table('users', metadata,
    Column('id', Integer, primary_key=True),
    Column('name', String),
    Column('age', Integer)
)

metadata.create_all(engine)  # Creates the table</pre></div><div class='content'></div><h2>Inserting Data</h2>
<div class='content'><p>You can insert data into the table using the <code>insert</code> function.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBzcWxhbGNoZW15IGltcG9ydCBpbnNlcnQKCmlucyA9IHVzZXJzLmluc2VydCgpLnZhbHVlcyhuYW1lPSdKb2huIERvZScsIGFnZT0zMCkKY29ubiA9IGVuZ2luZS5jb25uZWN0KCkKcmVzdWx0ID0gY29ubi5leGVjdXRlKGlucyk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from sqlalchemy import insert

ins = users.insert().values(name='John Doe', age=30)
conn = engine.connect()
result = conn.execute(ins)</pre></div><div class='content'></div><h2>Querying Data</h2>
<div class='content'><p>You can query data using the <code>select</code> function.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBzcWxhbGNoZW15IGltcG9ydCBzZWxlY3QKCnMgPSBzZWxlY3QoW3VzZXJzXSkKcmVzdWx0ID0gY29ubi5leGVjdXRlKHMpCgpmb3Igcm93IGluIHJlc3VsdDoKICAgIHByaW50KHJvdyk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from sqlalchemy import select

s = select([users])
result = conn.execute(s)

for row in result:
    print(row)</pre></div><div class='content'></div><h1>SQLAlchemy ORM</h1>
<div class='content'><p>The ORM allows you to map Python classes to database tables, providing a higher-level abstraction.</p>
</div><h2>Defining a Model</h2>
<div class='content'><p>You define a model by creating a class that inherits from <code>Base</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBzcWxhbGNoZW15LmV4dC5kZWNsYXJhdGl2ZSBpbXBvcnQgZGVjbGFyYXRpdmVfYmFzZQpmcm9tIHNxbGFsY2hlbXkgaW1wb3J0IENvbHVtbiwgSW50ZWdlciwgU3RyaW5nCgpCYXNlID0gZGVjbGFyYXRpdmVfYmFzZSgpCgpjbGFzcyBVc2VyKEJhc2UpOgogICAgX190YWJsZW5hbWVfXyA9ICd1c2VycycKICAgIGlkID0gQ29sdW1uKEludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpCiAgICBuYW1lID0gQ29sdW1uKFN0cmluZykKICAgIGFnZSA9IENvbHVtbihJbnRlZ2VyKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import Column, Integer, String

Base = declarative_base()

class User(Base):
    __tablename__ = 'users'
    id = Column(Integer, primary_key=True)
    name = Column(String)
    age = Column(Integer)</pre></div><div class='content'></div><h2>Creating a Session</h2>
<div class='content'><p>A session is required to interact with the database using the ORM.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBzcWxhbGNoZW15Lm9ybSBpbXBvcnQgc2Vzc2lvbm1ha2VyCgpTZXNzaW9uID0gc2Vzc2lvbm1ha2VyKGJpbmQ9ZW5naW5lKQpzZXNzaW9uID0gU2Vzc2lvbigp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from sqlalchemy.orm import sessionmaker

Session = sessionmaker(bind=engine)
session = Session()</pre></div><div class='content'></div><h2>Adding and Committing Data</h2>
<div class='content'><p>You can add and commit data using the session.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmV3X3VzZXIgPSBVc2VyKG5hbWU9J0phbmUgRG9lJywgYWdlPTI1KQpzZXNzaW9uLmFkZChuZXdfdXNlcikKc2Vzc2lvbi5jb21taXQoKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>new_user = User(name='Jane Doe', age=25)
session.add(new_user)
session.commit()</pre></div><div class='content'></div><h2>Querying Data</h2>
<div class='content'><p>You can query data using the session.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlcnMgPSBzZXNzaW9uLnF1ZXJ5KFVzZXIpLmFsbCgpCmZvciB1c2VyIGluIHVzZXJzOgogICAgcHJpbnQodXNlci5uYW1lLCB1c2VyLmFnZSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>users = session.query(User).all()
for user in users:
    print(user.name, user.age)</pre></div><div class='content'></div><h1>Advanced Topics</h1>
<h2>Relationships</h2>
<div class='content'><p>SQLAlchemy supports defining relationships between tables.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBzcWxhbGNoZW15IGltcG9ydCBGb3JlaWduS2V5CmZyb20gc3FsYWxjaGVteS5vcm0gaW1wb3J0IHJlbGF0aW9uc2hpcAoKY2xhc3MgQWRkcmVzcyhCYXNlKToKICAgIF9fdGFibGVuYW1lX18gPSAnYWRkcmVzc2VzJwogICAgaWQgPSBDb2x1bW4oSW50ZWdlciwgcHJpbWFyeV9rZXk9VHJ1ZSkKICAgIHVzZXJfaWQgPSBDb2x1bW4oSW50ZWdlciwgRm9yZWlnbktleSgndXNlcnMuaWQnKSkKICAgIGVtYWlsX2FkZHJlc3MgPSBDb2x1bW4oU3RyaW5nKQogICAgdXNlciA9IHJlbGF0aW9uc2hpcCgiVXNlciIsIGJhY2tfcG9wdWxhdGVzPSJhZGRyZXNzZXMiKQoKVXNlci5hZGRyZXNzZXMgPSByZWxhdGlvbnNoaXAoIkFkZHJlc3MiLCBvcmRlcl9ieT1BZGRyZXNzLmlkLCBiYWNrX3BvcHVsYXRlcz0idXNlciIp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from sqlalchemy import ForeignKey
from sqlalchemy.orm import relationship

class Address(Base):
    __tablename__ = 'addresses'
    id = Column(Integer, primary_key=True)
    user_id = Column(Integer, ForeignKey('users.id'))
    email_address = Column(String)
    user = relationship(&quot;User&quot;, back_populates=&quot;addresses&quot;)

User.addresses = relationship(&quot;Address&quot;, order_by=Address.id, back_populates=&quot;user&quot;)</pre></div><div class='content'></div><h2>Migrations with Alembic</h2>
<div class='content'><p>Alembic is a lightweight database migration tool for use with SQLAlchemy.</p>
<ul>
<li><strong>Install Alembic</strong>: <code>pip install alembic</code></li>
<li><strong>Initialize Alembic</strong>: <code>alembic init alembic</code></li>
<li><strong>Create a Migration</strong>: <code>alembic revision --autogenerate -m &quot;Initial migration&quot;</code></li>
<li><strong>Apply Migrations</strong>: <code>alembic upgrade head</code></li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>SQLAlchemy is a versatile and powerful library for database interactions in Python. Whether you are using the Core for direct SQL expression or the ORM for higher-level abstractions, SQLAlchemy provides the tools you need for efficient and effective database management. By mastering SQLAlchemy, you can handle complex database operations with ease, making it an essential skill for any Python developer.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='sqlite-in-python'>&#x25C4;SQLite in Python</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using SQLAlchemy</a>
	</div>
	<div class='col-4 text-end'>
					<a href='interacting-with-nosql-databases'>Interacting with NoSQL Databases &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
