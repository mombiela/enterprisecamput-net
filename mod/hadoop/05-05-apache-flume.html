<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Apache Flume</title>

    <link rel="alternate" href="https://campusempresa.com/mod/hadoop/05-05-apache-flume" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/hadoop/05-05-apache-flume" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/hadoop/05-05-apache-flume" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=3" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/hadoop/05-05-apache-flume" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/hadoop/05-05-apache-flume" class="px-2">CA</a>
</span>
			<span class="d-none d-md-inline"><br><cite>Building today's and tomorrow's society</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Languages</a>
				 					<a href="/categ/frameworks">Frameworks</a>
				 					<a href="/categ/tech-tools">Tools</a>
				 					<a href="/categ/foundations">Foundations</a>
				 					<a href="/categ/soft-skills">Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-04-apache-sqoop' title="Apache Sqoop">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Apache Flume</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-06-apache-oozie' title="Apache Oozie">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introduction to Apache Flume</p>
</h1>
<div class='content'><p>Apache Flume is a distributed, reliable, and available service for efficiently collecting, aggregating, and moving large amounts of log data. It is designed to handle large volumes of data and can be used to stream data from various sources to centralized data stores such as HDFS (Hadoop Distributed File System).</p>
</div><h2><p>Key Features of Apache Flume</p>
</h2>
<div class='content'><ul>
<li><strong>Reliability</strong>: Ensures data is reliably transferred from source to destination.</li>
<li><strong>Scalability</strong>: Can handle large volumes of data and scale horizontally.</li>
<li><strong>Flexibility</strong>: Supports various data sources and destinations.</li>
<li><strong>Extensibility</strong>: Allows custom implementations for sources, sinks, and channels.</li>
</ul>
</div><h1><p>Flume Architecture</p>
</h1>
<div class='content'><p>Apache Flume's architecture is based on a simple and flexible model of data flows. The main components of Flume are:</p>
<ol>
<li><strong>Source</strong>: The component that receives data from an external source.</li>
<li><strong>Channel</strong>: The conduit between the source and the sink, acting as a buffer.</li>
<li><strong>Sink</strong>: The component that delivers data to the final destination.</li>
</ol>
</div><h2><p>Data Flow in Flume</p>
</h2>
<div class='content'><ol>
<li><strong>Event</strong>: A unit of data with a byte payload and optional headers.</li>
<li><strong>Agent</strong>: A JVM process that hosts the source, channel, and sink.</li>
<li><strong>Flow</strong>: The path data takes from the source to the sink through the channel.</li>
</ol>
</div><h2><p>Diagram of Flume Architecture</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ky0tLS0tLS0tLSsgICAgICstLS0tLS0tLS0rICAgICArLS0tLS0tLS0tKwp8IFNvdXJjZSAgfCAtLT4gfCBDaGFubmVsIHwgLS0+IHwgIFNpbmsgICB8CistLS0tLS0tLS0rICAgICArLS0tLS0tLS0tKyAgICAgKy0tLS0tLS0tLSs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>+---------+     +---------+     +---------+
| Source  | --&gt; | Channel | --&gt; |  Sink   |
+---------+     +---------+     +---------+</pre></div><div class='content'></div><h1><p>Setting Up Apache Flume</p>
</h1>
<div class='content'></div><h2><p>Prerequisites</p>
</h2>
<div class='content'><ul>
<li>Java Development Kit (JDK) installed.</li>
<li>Apache Flume binary downloaded from the official website.</li>
</ul>
</div><h2><p>Installation Steps</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Download and Extract Flume</strong>:</p>
<pre><code class="language-sh">wget https://downloads.apache.org/flume/1.9.0/apache-flume-1.9.0-bin.tar.gz
tar -xzf apache-flume-1.9.0-bin.tar.gz
cd apache-flume-1.9.0-bin
</code></pre>
</li>
<li>
<p><strong>Set Environment Variables</strong>:</p>
<pre><code class="language-sh">export FLUME_HOME=/path/to/apache-flume-1.9.0-bin
export PATH=$FLUME_HOME/bin:$PATH
</code></pre>
</li>
<li>
<p><strong>Verify Installation</strong>:</p>
<pre><code class="language-sh">flume-ng version
</code></pre>
</li>
</ol>
</div><h1><p>Configuring Apache Flume</p>
</h1>
<div class='content'></div><h2><p>Basic Configuration File</p>
</h2>
<div class='content'><p>A Flume configuration file defines the sources, channels, and sinks. Below is an example configuration file (<code>flume.conf</code>):</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBEZWZpbmUgdGhlIGFnZW50CmFnZW50MS5zb3VyY2VzID0gc291cmNlMQphZ2VudDEuY2hhbm5lbHMgPSBjaGFubmVsMQphZ2VudDEuc2lua3MgPSBzaW5rMQoKIyBEZWZpbmUgdGhlIHNvdXJjZQphZ2VudDEuc291cmNlcy5zb3VyY2UxLnR5cGUgPSBuZXRjYXQKYWdlbnQxLnNvdXJjZXMuc291cmNlMS5iaW5kID0gbG9jYWxob3N0CmFnZW50MS5zb3VyY2VzLnNvdXJjZTEucG9ydCA9IDQ0NDQ0CgojIERlZmluZSB0aGUgY2hhbm5lbAphZ2VudDEuY2hhbm5lbHMuY2hhbm5lbDEudHlwZSA9IG1lbW9yeQphZ2VudDEuY2hhbm5lbHMuY2hhbm5lbDEuY2FwYWNpdHkgPSAxMDAwCmFnZW50MS5jaGFubmVscy5jaGFubmVsMS50cmFuc2FjdGlvbkNhcGFjaXR5ID0gMTAwCgojIERlZmluZSB0aGUgc2luawphZ2VudDEuc2lua3Muc2luazEudHlwZSA9IGxvZ2dlcg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Define the agent
agent1.sources = source1
agent1.channels = channel1
agent1.sinks = sink1

# Define the source
agent1.sources.source1.type = netcat
agent1.sources.source1.bind = localhost
agent1.sources.source1.port = 44444

# Define the channel
agent1.channels.channel1.type = memory
agent1.channels.channel1.capacity = 1000
agent1.channels.channel1.transactionCapacity = 100

# Define the sink
agent1.sinks.sink1.type = logger</pre></div><div class='content'></div><h2><p>Starting Flume Agent</p>
</h2>
<div class='content'><p>To start the Flume agent with the above configuration:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Zmx1bWUtbmcgYWdlbnQgLS1jb25mIC4vY29uZiAtLWNvbmYtZmlsZSBmbHVtZS5jb25mIC0tbmFtZSBhZ2VudDEgLURmbHVtZS5yb290LmxvZ2dlcj1JTkZPLGNvbnNvbGU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>flume-ng agent --conf ./conf --conf-file flume.conf --name agent1 -Dflume.root.logger=INFO,console</pre></div><div class='content'></div><h1><p>Practical Example</p>
</h1>
<div class='content'></div><h2><p>Example: Streaming Data to HDFS</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Configuration File (<code>flume-hdfs.conf</code>)</strong>:</p>
<pre><code class="language-properties">agent1.sources = source1
agent1.channels = channel1
agent1.sinks = sink1

agent1.sources.source1.type = exec
agent1.sources.source1.command = tail -F /var/log/syslog

agent1.channels.channel1.type = memory
agent1.channels.channel1.capacity = 1000
agent1.channels.channel1.transactionCapacity = 100

agent1.sinks.sink1.type = hdfs
agent1.sinks.sink1.hdfs.path = hdfs://localhost:9000/user/flume/logs/
agent1.sinks.sink1.hdfs.fileType = DataStream
agent1.sinks.sink1.hdfs.writeFormat = Text
agent1.sinks.sink1.hdfs.batchSize = 1000
agent1.sinks.sink1.hdfs.rollSize = 0
agent1.sinks.sink1.hdfs.rollCount = 10000
</code></pre>
</li>
<li>
<p><strong>Start the Flume Agent</strong>:</p>
<pre><code class="language-sh">flume-ng agent --conf ./conf --conf-file flume-hdfs.conf --name agent1 -Dflume.root.logger=INFO,console
</code></pre>
</li>
</ol>
</div><h1><p>Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Basic Flume Setup</p>
</h2>
<div class='content'><ol>
<li><strong>Task</strong>: Set up a Flume agent to read data from a local file and print it to the console.</li>
<li><strong>Steps</strong>:
<ul>
<li>Create a configuration file to define the source as a file source.</li>
<li>Define the sink as a logger.</li>
<li>Start the Flume agent and verify the data flow.</li>
</ul>
</li>
</ol>
</div><h2><p>Solution:</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBmbHVtZS1maWxlLXRvLWNvbnNvbGUuY29uZgphZ2VudDEuc291cmNlcyA9IHNvdXJjZTEKYWdlbnQxLmNoYW5uZWxzID0gY2hhbm5lbDEKYWdlbnQxLnNpbmtzID0gc2luazEKCmFnZW50MS5zb3VyY2VzLnNvdXJjZTEudHlwZSA9IGV4ZWMKYWdlbnQxLnNvdXJjZXMuc291cmNlMS5jb21tYW5kID0gdGFpbCAtRiAvcGF0aC90by95b3VyL2ZpbGUubG9nCgphZ2VudDEuY2hhbm5lbHMuY2hhbm5lbDEudHlwZSA9IG1lbW9yeQphZ2VudDEuY2hhbm5lbHMuY2hhbm5lbDEuY2FwYWNpdHkgPSAxMDAwCmFnZW50MS5jaGFubmVscy5jaGFubmVsMS50cmFuc2FjdGlvbkNhcGFjaXR5ID0gMTAwCgphZ2VudDEuc2lua3Muc2luazEudHlwZSA9IGxvZ2dlcg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># flume-file-to-console.conf
agent1.sources = source1
agent1.channels = channel1
agent1.sinks = sink1

agent1.sources.source1.type = exec
agent1.sources.source1.command = tail -F /path/to/your/file.log

agent1.channels.channel1.type = memory
agent1.channels.channel1.capacity = 1000
agent1.channels.channel1.transactionCapacity = 100

agent1.sinks.sink1.type = logger</pre></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Zmx1bWUtbmcgYWdlbnQgLS1jb25mIC4vY29uZiAtLWNvbmYtZmlsZSBmbHVtZS1maWxlLXRvLWNvbnNvbGUuY29uZiAtLW5hbWUgYWdlbnQxIC1EZmx1bWUucm9vdC5sb2dnZXI9SU5GTyxjb25zb2xl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>flume-ng agent --conf ./conf --conf-file flume-file-to-console.conf --name agent1 -Dflume.root.logger=INFO,console</pre></div><div class='content'></div><h2><p>Exercise 2: Streaming Data to HDFS</p>
</h2>
<div class='content'><ol>
<li><strong>Task</strong>: Configure a Flume agent to stream data from a network source to HDFS.</li>
<li><strong>Steps</strong>:
<ul>
<li>Create a configuration file to define the source as a netcat source.</li>
<li>Define the sink as HDFS.</li>
<li>Start the Flume agent and verify the data is written to HDFS.</li>
</ul>
</li>
</ol>
</div><h2><p>Solution:</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBmbHVtZS1uZXRjYXQtdG8taGRmcy5jb25mCmFnZW50MS5zb3VyY2VzID0gc291cmNlMQphZ2VudDEuY2hhbm5lbHMgPSBjaGFubmVsMQphZ2VudDEuc2lua3MgPSBzaW5rMQoKYWdlbnQxLnNvdXJjZXMuc291cmNlMS50eXBlID0gbmV0Y2F0CmFnZW50MS5zb3VyY2VzLnNvdXJjZTEuYmluZCA9IGxvY2FsaG9zdAphZ2VudDEuc291cmNlcy5zb3VyY2UxLnBvcnQgPSA0NDQ0NAoKYWdlbnQxLmNoYW5uZWxzLmNoYW5uZWwxLnR5cGUgPSBtZW1vcnkKYWdlbnQxLmNoYW5uZWxzLmNoYW5uZWwxLmNhcGFjaXR5ID0gMTAwMAphZ2VudDEuY2hhbm5lbHMuY2hhbm5lbDEudHJhbnNhY3Rpb25DYXBhY2l0eSA9IDEwMAoKYWdlbnQxLnNpbmtzLnNpbmsxLnR5cGUgPSBoZGZzCmFnZW50MS5zaW5rcy5zaW5rMS5oZGZzLnBhdGggPSBoZGZzOi8vbG9jYWxob3N0OjkwMDAvdXNlci9mbHVtZS9sb2dzLwphZ2VudDEuc2lua3Muc2luazEuaGRmcy5maWxlVHlwZSA9IERhdGFTdHJlYW0KYWdlbnQxLnNpbmtzLnNpbmsxLmhkZnMud3JpdGVGb3JtYXQgPSBUZXh0CmFnZW50MS5zaW5rcy5zaW5rMS5oZGZzLmJhdGNoU2l6ZSA9IDEwMDAKYWdlbnQxLnNpbmtzLnNpbmsxLmhkZnMucm9sbFNpemUgPSAwCmFnZW50MS5zaW5rcy5zaW5rMS5oZGZzLnJvbGxDb3VudCA9IDEwMDAw"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># flume-netcat-to-hdfs.conf
agent1.sources = source1
agent1.channels = channel1
agent1.sinks = sink1

agent1.sources.source1.type = netcat
agent1.sources.source1.bind = localhost
agent1.sources.source1.port = 44444

agent1.channels.channel1.type = memory
agent1.channels.channel1.capacity = 1000
agent1.channels.channel1.transactionCapacity = 100

agent1.sinks.sink1.type = hdfs
agent1.sinks.sink1.hdfs.path = hdfs://localhost:9000/user/flume/logs/
agent1.sinks.sink1.hdfs.fileType = DataStream
agent1.sinks.sink1.hdfs.writeFormat = Text
agent1.sinks.sink1.hdfs.batchSize = 1000
agent1.sinks.sink1.hdfs.rollSize = 0
agent1.sinks.sink1.hdfs.rollCount = 10000</pre></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Zmx1bWUtbmcgYWdlbnQgLS1jb25mIC4vY29uZiAtLWNvbmYtZmlsZSBmbHVtZS1uZXRjYXQtdG8taGRmcy5jb25mIC0tbmFtZSBhZ2VudDEgLURmbHVtZS5yb290LmxvZ2dlcj1JTkZPLGNvbnNvbGU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>flume-ng agent --conf ./conf --conf-file flume-netcat-to-hdfs.conf --name agent1 -Dflume.root.logger=INFO,console</pre></div><div class='content'></div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the basics of Apache Flume, including its architecture, setup, and configuration. We also provided practical examples and exercises to help you get hands-on experience with Flume. Understanding Flume is crucial for efficiently collecting and transporting large volumes of data in a Hadoop ecosystem. In the next module, we will explore another powerful tool in the Hadoop ecosystem: Apache Oozie.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-04-apache-sqoop' title="Apache Sqoop">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-06-apache-oozie' title="Apache Oozie">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Advertising</h1>
<p>This space is reserved for advertising.</p>
<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Thank you for collaborating!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
