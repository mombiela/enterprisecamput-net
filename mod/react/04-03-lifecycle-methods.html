<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Lifecycle Methods</title>

    <link rel="alternate" href="https://campusempresa.com/mod/react/04-03-lifecycle-methods" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/react/04-03-lifecycle-methods" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/react/04-03-lifecycle-methods" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/react/04-03-lifecycle-methods" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/react/04-03-lifecycle-methods" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-02-composition-vs-inheritance' title="Composition vs Inheritance">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">React Lifecycle Methods</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='04-04-hooks-introduction' title="Hooks: Introduction and Basic Usage">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>React lifecycle methods are special methods that get called at different stages of a component's life in a React application. These methods allow you to hook into specific moments in the component's lifecycle, such as when it is being created, updated, or destroyed. Understanding these methods is crucial for managing side effects, optimizing performance, and ensuring that your components behave as expected.</p>
</div><h1><p>Key Lifecycle Phases</p>
</h1>
<div class='content'><p>React components go through several phases during their lifecycle:</p>
<ol>
<li><strong>Mounting</strong>: When a component is being inserted into the DOM.</li>
<li><strong>Updating</strong>: When a component is being re-rendered due to changes in props or state.</li>
<li><strong>Unmounting</strong>: When a component is being removed from the DOM.</li>
</ol>
</div><h1><p>Lifecycle Methods Overview</p>
</h1>
<div class='content'></div><h2><p>Mounting Phase</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>constructor(props)</strong></p>
<ul>
<li>Called before the component is mounted.</li>
<li>Used for initializing state and binding event handlers.</li>
<li>Example:
<pre><code class="language-jsx">class MyComponent extends React.Component {
  constructor(props) {
    super(props);
    this.state = { count: 0 };
  }
}
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>static getDerivedStateFromProps(props, state)</strong></p>
<ul>
<li>Called right before rendering the element(s) in the DOM.</li>
<li>Used to update the state based on props.</li>
<li>Example:
<pre><code class="language-jsx">static getDerivedStateFromProps(nextProps, prevState) {
  if (nextProps.someValue !== prevState.someValue) {
    return { someValue: nextProps.someValue };
  }
  return null;
}
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>render()</strong></p>
<ul>
<li>The only required method in a class component.</li>
<li>Returns the JSX to be rendered.</li>
<li>Example:
<pre><code class="language-jsx">render() {
  return &lt;div&gt;{this.state.count}&lt;/div&gt;;
}
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>componentDidMount()</strong></p>
<ul>
<li>Called after the component is mounted.</li>
<li>Used for side effects like fetching data or setting up subscriptions.</li>
<li>Example:
<pre><code class="language-jsx">componentDidMount() {
  fetch('/api/data')
    .then(response =&gt; response.json())
    .then(data =&gt; this.setState({ data }));
}
</code></pre>
</li>
</ul>
</li>
</ol>
</div><h2><p>Updating Phase</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>static getDerivedStateFromProps(props, state)</strong></p>
<ul>
<li>Also called during the updating phase.</li>
<li>Same usage as in the mounting phase.</li>
</ul>
</li>
<li>
<p><strong>shouldComponentUpdate(nextProps, nextState)</strong></p>
<ul>
<li>Called before rendering when new props or state are received.</li>
<li>Used to optimize performance by preventing unnecessary renders.</li>
<li>Example:
<pre><code class="language-jsx">shouldComponentUpdate(nextProps, nextState) {
  return nextState.count !== this.state.count;
}
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>render()</strong></p>
<ul>
<li>Called to re-render the component.</li>
</ul>
</li>
<li>
<p><strong>getSnapshotBeforeUpdate(prevProps, prevState)</strong></p>
<ul>
<li>Called right before the most recently rendered output is committed to the DOM.</li>
<li>Used to capture some information from the DOM (e.g., scroll position) before it is potentially changed.</li>
<li>Example:
<pre><code class="language-jsx">getSnapshotBeforeUpdate(prevProps, prevState) {
  if (prevProps.list.length &lt; this.props.list.length) {
    return this.listRef.scrollHeight;
  }
  return null;
}
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>componentDidUpdate(prevProps, prevState, snapshot)</strong></p>
<ul>
<li>Called after the component is updated.</li>
<li>Used for side effects that need to occur after the DOM has been updated.</li>
<li>Example:
<pre><code class="language-jsx">componentDidUpdate(prevProps, prevState, snapshot) {
  if (snapshot !== null) {
    this.listRef.scrollTop = this.listRef.scrollHeight - snapshot;
  }
}
</code></pre>
</li>
</ul>
</li>
</ol>
</div><h2><p>Unmounting Phase</p>
</h2>
<div class='content'><ol>
<li><strong>componentWillUnmount()</strong>
<ul>
<li>Called right before the component is unmounted and destroyed.</li>
<li>Used for cleanup tasks like invalidating timers or canceling network requests.</li>
<li>Example:
<pre><code class="language-jsx">componentWillUnmount() {
  clearInterval(this.timerID);
}
</code></pre>
</li>
</ul>
</li>
</ol>
</div><h1><p>Practical Example</p>
</h1>
<div class='content'><p>Let's create a simple counter component that demonstrates the use of some lifecycle methods:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKCmNsYXNzIENvdW50ZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQgewogIGNvbnN0cnVjdG9yKHByb3BzKSB7CiAgICBzdXBlcihwcm9wcyk7CiAgICB0aGlzLnN0YXRlID0geyBjb3VudDogMCB9OwogICAgdGhpcy5pbmNyZW1lbnQgPSB0aGlzLmluY3JlbWVudC5iaW5kKHRoaXMpOwogIH0KCiAgY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICBjb25zb2xlLmxvZygnQ29tcG9uZW50IGRpZCBtb3VudCcpOwogIH0KCiAgc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7CiAgICByZXR1cm4gbmV4dFN0YXRlLmNvdW50ICE9PSB0aGlzLnN0YXRlLmNvdW50OwogIH0KCiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlKSB7CiAgICBjb25zb2xlLmxvZygnQ29tcG9uZW50IGRpZCB1cGRhdGUnKTsKICB9CgogIGNvbXBvbmVudFdpbGxVbm1vdW50KCkgewogICAgY29uc29sZS5sb2coJ0NvbXBvbmVudCB3aWxsIHVubW91bnQnKTsKICB9CgogIGluY3JlbWVudCgpIHsKICAgIHRoaXMuc2V0U3RhdGUoKHByZXZTdGF0ZSkgPT4gKHsgY291bnQ6IHByZXZTdGF0ZS5jb3VudCArIDEgfSkpOwogIH0KCiAgcmVuZGVyKCkgewogICAgcmV0dXJuICgKICAgICAgPGRpdj4KICAgICAgICA8cD5Db3VudDoge3RoaXMuc3RhdGUuY291bnR9PC9wPgogICAgICAgIDxidXR0b24gb25DbGljaz17dGhpcy5pbmNyZW1lbnR9PkluY3JlbWVudDwvYnV0dG9uPgogICAgICA8L2Rpdj4KICAgICk7CiAgfQp9CgpleHBvcnQgZGVmYXVsdCBDb3VudGVyOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React from 'react';

class Counter extends React.Component {
  constructor(props) {
    super(props);
    this.state = { count: 0 };
    this.increment = this.increment.bind(this);
  }

  componentDidMount() {
    console.log('Component did mount');
  }

  shouldComponentUpdate(nextProps, nextState) {
    return nextState.count !== this.state.count;
  }

  componentDidUpdate(prevProps, prevState) {
    console.log('Component did update');
  }

  componentWillUnmount() {
    console.log('Component will unmount');
  }

  increment() {
    this.setState((prevState) =&gt; ({ count: prevState.count + 1 }));
  }

  render() {
    return (
      &lt;div&gt;
        &lt;p&gt;Count: {this.state.count}&lt;/p&gt;
        &lt;button onClick={this.increment}&gt;Increment&lt;/button&gt;
      &lt;/div&gt;
    );
  }
}

export default Counter;</pre></div><div class='content'></div><h1><p>Exercise</p>
</h1>
<div class='content'><p>Create a <code>Timer</code> component that starts a timer when the component is mounted and stops the timer when the component is unmounted. The timer should update the state every second to display the elapsed time.</p>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKCmNsYXNzIFRpbWVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHsKICBjb25zdHJ1Y3Rvcihwcm9wcykgewogICAgc3VwZXIocHJvcHMpOwogICAgdGhpcy5zdGF0ZSA9IHsgc2Vjb25kczogMCB9OwogIH0KCiAgY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICB0aGlzLnRpbWVySUQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgIHRoaXMuc2V0U3RhdGUoKHByZXZTdGF0ZSkgPT4gKHsgc2Vjb25kczogcHJldlN0YXRlLnNlY29uZHMgKyAxIH0pKTsKICAgIH0sIDEwMDApOwogIH0KCiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7CiAgICBjbGVhckludGVydmFsKHRoaXMudGltZXJJRCk7CiAgfQoKICByZW5kZXIoKSB7CiAgICByZXR1cm4gKAogICAgICA8ZGl2PgogICAgICAgIDxwPkVsYXBzZWQgVGltZToge3RoaXMuc3RhdGUuc2Vjb25kc30gc2Vjb25kczwvcD4KICAgICAgPC9kaXY+CiAgICApOwogIH0KfQoKZXhwb3J0IGRlZmF1bHQgVGltZXI7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React from 'react';

class Timer extends React.Component {
  constructor(props) {
    super(props);
    this.state = { seconds: 0 };
  }

  componentDidMount() {
    this.timerID = setInterval(() =&gt; {
      this.setState((prevState) =&gt; ({ seconds: prevState.seconds + 1 }));
    }, 1000);
  }

  componentWillUnmount() {
    clearInterval(this.timerID);
  }

  render() {
    return (
      &lt;div&gt;
        &lt;p&gt;Elapsed Time: {this.state.seconds} seconds&lt;/p&gt;
      &lt;/div&gt;
    );
  }
}

export default Timer;</pre></div><div class='content'></div><h1><p>Summary</p>
</h1>
<div class='content'><p>In this section, we covered the key lifecycle methods in React, including their purposes and how to use them effectively. Understanding these methods is essential for managing side effects, optimizing performance, and ensuring that your components behave as expected. In the next module, we will dive into React Hooks, which provide a more modern and functional approach to managing component state and lifecycle events.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-02-composition-vs-inheritance' title="Composition vs Inheritance">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='04-04-hooks-introduction' title="Hooks: Introduction and Basic Usage">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
