<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mocking and Spying in React</title>

    <link rel="alternate" href="https://campusempresa.com/mod/react/mocking-and-spying" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/react/mocking-and-spying" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/react/mocking-and-spying" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/react/mocking-and-spying" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/react/mocking-and-spying" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='end-to-end-testing-with-cypress'>&#x25C4;End-to-End Testing with Cypress</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Mocking and Spying in React</a>
	</div>
	<div class='col-4 text-end'>
					<a href='building-for-production'>Building for Production &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Mocking and spying are essential techniques in testing React applications. They help isolate components and functions to ensure that tests are reliable and focused. This section will cover the basics of mocking and spying, their importance, and how to implement them using popular testing libraries like Jest and Enzyme.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Mocking</strong>: Creating a fake version of a function or module to control its behavior during tests.</li>
<li><strong>Spying</strong>: Monitoring calls to a function to verify how it was used during tests.</li>
</ul>
</div><h1>Why Mocking and Spying are Important</h1>
<div class='content'><ul>
<li><strong>Isolation</strong>: Ensures that tests are focused on the component or function being tested, not its dependencies.</li>
<li><strong>Control</strong>: Allows you to simulate different scenarios and edge cases.</li>
<li><strong>Performance</strong>: Reduces the complexity and runtime of tests by avoiding real implementations.</li>
</ul>
</div><h1>Mocking in React</h1>
<div class='content'><p>Mocking is often used to replace dependencies with controlled versions. Jest provides built-in functions to create mocks.</p>
</div><h2>Mocking Functions</h2>
<div class='content'><p>To mock a function, you can use <code>jest.fn()</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gT3JpZ2luYWwgZnVuY3Rpb24KY29uc3QgZmV0Y2hEYXRhID0gKCkgPT4gewogIHJldHVybiBmZXRjaCgnL2FwaS9kYXRhJykudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpOwp9OwoKLy8gTW9ja2VkIGZ1bmN0aW9uCmNvbnN0IGZldGNoRGF0YU1vY2sgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiAnbW9ja2VkIGRhdGEnIH0pOwoKLy8gVXNpbmcgdGhlIG1vY2sgaW4gYSB0ZXN0CnRlc3QoJ2ZldGNoRGF0YSByZXR1cm5zIG1vY2tlZCBkYXRhJywgYXN5bmMgKCkgPT4gewogIGNvbnN0IGRhdGEgPSBhd2FpdCBmZXRjaERhdGFNb2NrKCk7CiAgZXhwZWN0KGRhdGEpLnRvRXF1YWwoeyBkYXRhOiAnbW9ja2VkIGRhdGEnIH0pOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Original function
const fetchData = () =&gt; {
  return fetch('/api/data').then(response =&gt; response.json());
};

// Mocked function
const fetchDataMock = jest.fn().mockResolvedValue({ data: 'mocked data' });

// Using the mock in a test
test('fetchData returns mocked data', async () =&gt; {
  const data = await fetchDataMock();
  expect(data).toEqual({ data: 'mocked data' });
});</pre></div><div class='content'></div><h2>Mocking Modules</h2>
<div class='content'><p>You can mock entire modules using <code>jest.mock()</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gT3JpZ2luYWwgbW9kdWxlCi8vIGFwaS5qcwpleHBvcnQgY29uc3QgZmV0Y2hEYXRhID0gKCkgPT4gewogIHJldHVybiBmZXRjaCgnL2FwaS9kYXRhJykudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpOwp9OwoKLy8gVGVzdCBmaWxlCmltcG9ydCB7IGZldGNoRGF0YSB9IGZyb20gJy4vYXBpJzsKCmplc3QubW9jaygnLi9hcGknLCAoKSA9PiAoewogIGZldGNoRGF0YTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogJ21vY2tlZCBkYXRhJyB9KQp9KSk7Cgp0ZXN0KCdmZXRjaERhdGEgcmV0dXJucyBtb2NrZWQgZGF0YScsIGFzeW5jICgpID0+IHsKICBjb25zdCBkYXRhID0gYXdhaXQgZmV0Y2hEYXRhKCk7CiAgZXhwZWN0KGRhdGEpLnRvRXF1YWwoeyBkYXRhOiAnbW9ja2VkIGRhdGEnIH0pOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Original module
// api.js
export const fetchData = () =&gt; {
  return fetch('/api/data').then(response =&gt; response.json());
};

// Test file
import { fetchData } from './api';

jest.mock('./api', () =&gt; ({
  fetchData: jest.fn().mockResolvedValue({ data: 'mocked data' })
}));

test('fetchData returns mocked data', async () =&gt; {
  const data = await fetchData();
  expect(data).toEqual({ data: 'mocked data' });
});</pre></div><div class='content'></div><h1>Spying in React</h1>
<div class='content'><p>Spying allows you to track calls to a function and inspect how it was used. Jest provides <code>jest.spyOn()</code> for this purpose.</p>
</div><h2>Spying on Methods</h2>
<div class='content'><p>You can spy on methods of objects to verify their usage.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgVXNlciB7CiAgZ2V0TmFtZSgpIHsKICAgIHJldHVybiAnSm9obiBEb2UnOwogIH0KfQoKdGVzdCgnZ2V0TmFtZSBtZXRob2QgaXMgY2FsbGVkJywgKCkgPT4gewogIGNvbnN0IHVzZXIgPSBuZXcgVXNlcigpOwogIGNvbnN0IHNweSA9IGplc3Quc3B5T24odXNlciwgJ2dldE5hbWUnKTsKICAKICB1c2VyLmdldE5hbWUoKTsKICAKICBleHBlY3Qoc3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class User {
  getName() {
    return 'John Doe';
  }
}

test('getName method is called', () =&gt; {
  const user = new User();
  const spy = jest.spyOn(user, 'getName');
  
  user.getName();
  
  expect(spy).toHaveBeenCalled();
});</pre></div><div class='content'></div><h2>Spying on React Component Methods</h2>
<div class='content'><p>Spying can also be used to monitor React component methods.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgc2hhbGxvdyB9IGZyb20gJ2VuenltZSc7CgpjbGFzcyBNeUNvbXBvbmVudCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7CiAgY29tcG9uZW50RGlkTW91bnQoKSB7CiAgICB0aGlzLmZldGNoRGF0YSgpOwogIH0KCiAgZmV0Y2hEYXRhKCkgewogICAgLy8gZmV0Y2ggZGF0YSBsb2dpYwogIH0KCiAgcmVuZGVyKCkgewogICAgcmV0dXJuIDxkaXY+TXkgQ29tcG9uZW50PC9kaXY+OwogIH0KfQoKdGVzdCgnZmV0Y2hEYXRhIGlzIGNhbGxlZCBvbiBjb21wb25lbnREaWRNb3VudCcsICgpID0+IHsKICBjb25zdCBzcHkgPSBqZXN0LnNweU9uKE15Q29tcG9uZW50LnByb3RvdHlwZSwgJ2ZldGNoRGF0YScpOwogIHNoYWxsb3coPE15Q29tcG9uZW50IC8+KTsKICAKICBleHBlY3Qoc3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React from 'react';
import { shallow } from 'enzyme';

class MyComponent extends React.Component {
  componentDidMount() {
    this.fetchData();
  }

  fetchData() {
    // fetch data logic
  }

  render() {
    return &lt;div&gt;My Component&lt;/div&gt;;
  }
}

test('fetchData is called on componentDidMount', () =&gt; {
  const spy = jest.spyOn(MyComponent.prototype, 'fetchData');
  shallow(&lt;MyComponent /&gt;);
  
  expect(spy).toHaveBeenCalled();
});</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Mocking and spying are powerful techniques that enhance the reliability and efficiency of your tests. By isolating components and controlling their dependencies, you can create more focused and faster tests. Whether you are mocking functions, modules, or spying on methods, these tools are invaluable for maintaining high-quality React applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='end-to-end-testing-with-cypress'>&#x25C4;End-to-End Testing with Cypress</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Mocking and Spying in React</a>
	</div>
	<div class='col-4 text-end'>
					<a href='building-for-production'>Building for Production &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
