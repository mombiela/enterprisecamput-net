<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modules and Packages</title>

    <link rel="alternate" href="https://campusempresa.com/mod/lua/03-03-modules-packages" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/lua/03-03-modules-packages" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/lua/03-03-modules-packages" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/lua/03-03-modules-packages" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/lua/03-03-modules-packages" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='03-02-metatables-metamethods' title="Metatables and Metamethods">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Modules and Packages</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='03-04-error-handling' title="Error Handling">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to organize and reuse code in Lua using modules and packages. This is an essential concept for writing maintainable and scalable Lua programs.</p>
</div><h1><p>What are Modules?</p>
</h1>
<div class='content'><p>Modules in Lua are a way to group related functions and variables into a single unit. This helps in organizing code and avoiding name conflicts. Modules can be thought of as libraries that can be loaded and used in different parts of your program.</p>
</div><h2><p>Creating a Module</p>
</h2>
<div class='content'><p>To create a module, you typically define a table to hold the module's functions and variables, and then return that table at the end of the module file.</p>
<p><strong>Example:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gbXltb2R1bGUubHVhCmxvY2FsIG15bW9kdWxlID0ge30KCmZ1bmN0aW9uIG15bW9kdWxlLmdyZWV0KG5hbWUpCiAgICByZXR1cm4gIkhlbGxvLCAiIC4uIG5hbWUKZW5kCgpmdW5jdGlvbiBteW1vZHVsZS5hZGQoYSwgYikKICAgIHJldHVybiBhICsgYgplbmQKCnJldHVybiBteW1vZHVsZQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- mymodule.lua
local mymodule = {}

function mymodule.greet(name)
    return &quot;Hello, &quot; .. name
end

function mymodule.add(a, b)
    return a + b
end

return mymodule</pre></div><div class='content'></div><h2><p>Using a Module</p>
</h2>
<div class='content'><p>To use a module, you need to load it using the <code>require</code> function.</p>
<p><strong>Example:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gbWFpbi5sdWEKbG9jYWwgbXltb2R1bGUgPSByZXF1aXJlKCJteW1vZHVsZSIpCgpwcmludChteW1vZHVsZS5ncmVldCgiV29ybGQiKSkgIC0tIE91dHB1dDogSGVsbG8sIFdvcmxkCnByaW50KG15bW9kdWxlLmFkZCg1LCAzKSkgICAgICAgLS0gT3V0cHV0OiA4"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- main.lua
local mymodule = require(&quot;mymodule&quot;)

print(mymodule.greet(&quot;World&quot;))  -- Output: Hello, World
print(mymodule.add(5, 3))       -- Output: 8</pre></div><div class='content'></div><h1><p>Packages</p>
</h1>
<div class='content'><p>Packages in Lua are collections of modules. They are useful for distributing and managing multiple modules together. Lua uses a package system to locate and load modules.</p>
</div><h2><p>The <code>package</code> Table</p>
</h2>
<div class='content'><p>Lua provides a <code>package</code> table that contains functions and variables to manage packages.</p>
<p><strong>Key Fields and Functions:</strong></p>
<ul>
<li><code>package.path</code>: A string with the search path for Lua modules.</li>
<li><code>package.cpath</code>: A string with the search path for C libraries.</li>
<li><code>package.loaded</code>: A table that keeps track of all loaded modules.</li>
<li><code>require(name)</code>: Loads the module with the given name.</li>
</ul>
</div><h2><p>Setting the Module Path</p>
</h2>
<div class='content'><p>You can set the module search path using the <code>package.path</code> variable. The search path is a string with directory names separated by semicolons (<code>;</code>). Each directory name can contain a wildcard (<code>?</code>) that Lua replaces with the module name.</p>
<p><strong>Example:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZS5wYXRoID0gIi4vPy5sdWE7IiAuLiBwYWNrYWdlLnBhdGg="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package.path = &quot;./?.lua;&quot; .. package.path</pre></div><div class='content'><p>This adds the current directory to the module search path.</p>
</div><h1><p>Practical Example</p>
</h1>
<div class='content'><p>Let's create a simple package with two modules: <code>mathutils</code> and <code>stringutils</code>.</p>
<p><strong>mathutils.lua:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgbWF0aHV0aWxzID0ge30KCmZ1bmN0aW9uIG1hdGh1dGlscy5zcXVhcmUoeCkKICAgIHJldHVybiB4ICogeAplbmQKCmZ1bmN0aW9uIG1hdGh1dGlscy5jdWJlKHgpCiAgICByZXR1cm4geCAqIHggKiB4CmVuZAoKcmV0dXJuIG1hdGh1dGlscw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local mathutils = {}

function mathutils.square(x)
    return x * x
end

function mathutils.cube(x)
    return x * x * x
end

return mathutils</pre></div><div class='content'><p><strong>stringutils.lua:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgc3RyaW5ndXRpbHMgPSB7fQoKZnVuY3Rpb24gc3RyaW5ndXRpbHMudXBwZXJjYXNlKHN0cikKICAgIHJldHVybiBzdHJpbmcudXBwZXIoc3RyKQplbmQKCmZ1bmN0aW9uIHN0cmluZ3V0aWxzLmxvd2VyY2FzZShzdHIpCiAgICByZXR1cm4gc3RyaW5nLmxvd2VyKHN0cikKZW5kCgpyZXR1cm4gc3RyaW5ndXRpbHM="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local stringutils = {}

function stringutils.uppercase(str)
    return string.upper(str)
end

function stringutils.lowercase(str)
    return string.lower(str)
end

return stringutils</pre></div><div class='content'><p><strong>main.lua:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgbWF0aHV0aWxzID0gcmVxdWlyZSgibWF0aHV0aWxzIikKbG9jYWwgc3RyaW5ndXRpbHMgPSByZXF1aXJlKCJzdHJpbmd1dGlscyIpCgpwcmludChtYXRodXRpbHMuc3F1YXJlKDQpKSAgICAgICAtLSBPdXRwdXQ6IDE2CnByaW50KG1hdGh1dGlscy5jdWJlKDMpKSAgICAgICAgIC0tIE91dHB1dDogMjcKcHJpbnQoc3RyaW5ndXRpbHMudXBwZXJjYXNlKCJoZWxsbyIpKSAgLS0gT3V0cHV0OiBIRUxMTwpwcmludChzdHJpbmd1dGlscy5sb3dlcmNhc2UoIldPUkxEIikpICAtLSBPdXRwdXQ6IHdvcmxk"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local mathutils = require(&quot;mathutils&quot;)
local stringutils = require(&quot;stringutils&quot;)

print(mathutils.square(4))       -- Output: 16
print(mathutils.cube(3))         -- Output: 27
print(stringutils.uppercase(&quot;hello&quot;))  -- Output: HELLO
print(stringutils.lowercase(&quot;WORLD&quot;))  -- Output: world</pre></div><div class='content'></div><h1><p>Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Creating and Using a Module</p>
</h2>
<div class='content'><ol>
<li>
<p>Create a module named <code>calc.lua</code> with the following functions:</p>
<ul>
<li><code>add(a, b)</code>: Returns the sum of <code>a</code> and <code>b</code>.</li>
<li><code>subtract(a, b)</code>: Returns the difference between <code>a</code> and <code>b</code>.</li>
<li><code>multiply(a, b)</code>: Returns the product of <code>a</code> and <code>b</code>.</li>
<li><code>divide(a, b)</code>: Returns the quotient of <code>a</code> divided by <code>b</code>.</li>
</ul>
</li>
<li>
<p>Create a <code>main.lua</code> file that uses the <code>calc</code> module to perform and print the results of the following operations:</p>
<ul>
<li>Add 10 and 5</li>
<li>Subtract 10 from 5</li>
<li>Multiply 10 and 5</li>
<li>Divide 10 by 5</li>
</ul>
</li>
</ol>
<p><strong>Solution:</strong></p>
<p><strong>calc.lua:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgY2FsYyA9IHt9CgpmdW5jdGlvbiBjYWxjLmFkZChhLCBiKQogICAgcmV0dXJuIGEgKyBiCmVuZAoKZnVuY3Rpb24gY2FsYy5zdWJ0cmFjdChhLCBiKQogICAgcmV0dXJuIGEgLSBiCmVuZAoKZnVuY3Rpb24gY2FsYy5tdWx0aXBseShhLCBiKQogICAgcmV0dXJuIGEgKiBiCmVuZAoKZnVuY3Rpb24gY2FsYy5kaXZpZGUoYSwgYikKICAgIGlmIGIgfj0gMCB0aGVuCiAgICAgICAgcmV0dXJuIGEgLyBiCiAgICBlbHNlCiAgICAgICAgcmV0dXJuIG5pbCwgIkRpdmlzaW9uIGJ5IHplcm8iCiAgICBlbmQKZW5kCgpyZXR1cm4gY2FsYw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local calc = {}

function calc.add(a, b)
    return a + b
end

function calc.subtract(a, b)
    return a - b
end

function calc.multiply(a, b)
    return a * b
end

function calc.divide(a, b)
    if b ~= 0 then
        return a / b
    else
        return nil, &quot;Division by zero&quot;
    end
end

return calc</pre></div><div class='content'><p><strong>main.lua:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgY2FsYyA9IHJlcXVpcmUoImNhbGMiKQoKcHJpbnQoY2FsYy5hZGQoMTAsIDUpKSAgICAgICAgLS0gT3V0cHV0OiAxNQpwcmludChjYWxjLnN1YnRyYWN0KDEwLCA1KSkgICAtLSBPdXRwdXQ6IDUKcHJpbnQoY2FsYy5tdWx0aXBseSgxMCwgNSkpICAgLS0gT3V0cHV0OiA1MApsb2NhbCByZXN1bHQsIGVyciA9IGNhbGMuZGl2aWRlKDEwLCA1KQppZiBlcnIgdGhlbgogICAgcHJpbnQoZXJyKQplbHNlCiAgICBwcmludChyZXN1bHQpICAgICAgICAgICAgIC0tIE91dHB1dDogMgplbmQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local calc = require(&quot;calc&quot;)

print(calc.add(10, 5))        -- Output: 15
print(calc.subtract(10, 5))   -- Output: 5
print(calc.multiply(10, 5))   -- Output: 50
local result, err = calc.divide(10, 5)
if err then
    print(err)
else
    print(result)             -- Output: 2
end</pre></div><div class='content'></div><h2><p>Common Mistakes and Tips</p>
</h2>
<div class='content'><ul>
<li>
<p><strong>Mistake:</strong> Forgetting to return the module table at the end of the module file.</p>
<ul>
<li><strong>Tip:</strong> Always ensure you return the module table to make the module's functions and variables accessible.</li>
</ul>
</li>
<li>
<p><strong>Mistake:</strong> Not setting the correct module search path.</p>
<ul>
<li><strong>Tip:</strong> Use <code>package.path</code> to include the directories where your modules are located.</li>
</ul>
</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we learned how to create and use modules in Lua, as well as how to manage packages. Modules help in organizing code and making it reusable, while packages allow for better distribution and management of multiple modules. In the next section, we will delve into error handling in Lua, which is crucial for writing robust and reliable programs.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='03-02-metatables-metamethods' title="Metatables and Metamethods">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='03-04-error-handling' title="Error Handling">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
