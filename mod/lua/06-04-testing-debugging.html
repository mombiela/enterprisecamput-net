<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing and Debugging</title>

    <link rel="alternate" href="https://campusempresa.com/mod/lua/06-04-testing-debugging" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/lua/06-04-testing-debugging" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/lua/06-04-testing-debugging" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/lua/06-04-testing-debugging" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/lua/06-04-testing-debugging" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='06-03-implementation' title="Implementation">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Testing and Debugging</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='06-05-project-presentation' title="Project Presentation">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will cover the essential techniques and tools for testing and debugging Lua scripts. Testing and debugging are critical skills for any programmer, as they ensure that your code is reliable, efficient, and free of errors.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li>
<p><strong>Importance of Testing and Debugging</strong></p>
<ul>
<li>Ensures code correctness</li>
<li>Improves code quality</li>
<li>Facilitates maintenance and scalability</li>
</ul>
</li>
<li>
<p><strong>Types of Testing</strong></p>
<ul>
<li>Unit Testing</li>
<li>Integration Testing</li>
<li>Functional Testing</li>
</ul>
</li>
<li>
<p><strong>Debugging Techniques</strong></p>
<ul>
<li>Print Statements</li>
<li>Using Debug Libraries</li>
<li>Interactive Debugging</li>
</ul>
</li>
</ol>
</div><h1>Unit Testing in Lua</h1>
<div class='content'><p>Unit testing involves testing individual components or functions of your code to ensure they work as expected. Lua has several libraries that facilitate unit testing, such as <strong>LuaUnit</strong>.</p>
</div><h2>Example: Using LuaUnit</h2>
<div class='content'><ol>
<li>
<p><strong>Installation</strong>: First, install LuaUnit using LuaRocks:</p>
<pre><code class="language-sh">luarocks install luaunit
</code></pre>
</li>
<li>
<p><strong>Writing a Test</strong>: Create a test file, <code>test_example.lua</code>:</p>
<pre><code class="language-lua">-- test_example.lua
local luaunit = require('luaunit')

function testAddition()
    local result = 1 + 1
    luaunit.assertEquals(result, 2)
end

os.exit(luaunit.LuaUnit.run())
</code></pre>
</li>
<li>
<p><strong>Running the Test</strong>: Execute the test file:</p>
<pre><code class="language-sh">lua test_example.lua
</code></pre>
</li>
</ol>
</div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>luaunit.assertEquals(result, 2)</strong>: This function checks if <code>result</code> is equal to <code>2</code>. If not, the test fails.</li>
<li><strong>os.exit(luaunit.LuaUnit.run())</strong>: This line runs all the test functions and exits the script with the appropriate status code.</li>
</ul>
</div><h1>Debugging Techniques</h1>
<div class='content'></div><h2>Print Statements</h2>
<div class='content'><p>Using print statements is a simple yet effective way to debug your code. By printing variable values and program states, you can trace the flow of execution and identify issues.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgZnVuY3Rpb24gYWRkKGEsIGIpCiAgICBwcmludCgiQWRkaW5nOiIsIGEsIGIpICAtLSBEZWJ1ZyBwcmludAogICAgcmV0dXJuIGEgKyBiCmVuZAoKcHJpbnQoYWRkKDIsIDMpKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local function add(a, b)
    print(&quot;Adding:&quot;, a, b)  -- Debug print
    return a + b
end

print(add(2, 3))</pre></div><div class='content'></div><h2>Using Debug Libraries</h2>
<div class='content'><p>Lua provides a built-in <code>debug</code> library that offers more advanced debugging capabilities.</p>
<h4>Example: Using the <code>debug</code> Library</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgZnVuY3Rpb24gZmF1bHR5RnVuY3Rpb24oKQogICAgbG9jYWwgYSA9IDEKICAgIGxvY2FsIGIgPSBuaWwKICAgIHByaW50KGEgKyBiKSAgLS0gVGhpcyB3aWxsIGNhdXNlIGFuIGVycm9yCmVuZAoKbG9jYWwgc3RhdHVzLCBlcnIgPSBwY2FsbChmYXVsdHlGdW5jdGlvbikKaWYgbm90IHN0YXR1cyB0aGVuCiAgICBwcmludCgiRXJyb3I6ICIsIGVycikKICAgIHByaW50KGRlYnVnLnRyYWNlYmFjaygpKQplbmQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local function faultyFunction()
    local a = 1
    local b = nil
    print(a + b)  -- This will cause an error
end

local status, err = pcall(faultyFunction)
if not status then
    print(&quot;Error: &quot;, err)
    print(debug.traceback())
end</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>pcall(faultyFunction)</strong>: <code>pcall</code> (protected call) runs the function and catches any errors.</li>
<li><strong>debug.traceback()</strong>: This function provides a stack trace, helping you locate where the error occurred.</li>
</ul>
</div><h2>Interactive Debugging</h2>
<div class='content'><p>Interactive debugging allows you to pause execution and inspect the program state. Tools like <strong>ZeroBrane Studio</strong> offer interactive debugging for Lua.</p>
<h4>Example: Setting a Breakpoint in ZeroBrane Studio</h4>
<ol>
<li>Open your Lua script in ZeroBrane Studio.</li>
<li>Click on the line number where you want to set a breakpoint.</li>
<li>Run the script in debug mode (F5).</li>
<li>The execution will pause at the breakpoint, allowing you to inspect variables and step through the code.</li>
</ol>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise: Debugging a Lua Script</h2>
<div class='content'><p>Given the following Lua script, identify and fix the errors:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgZnVuY3Rpb24gZGl2aWRlKGEsIGIpCiAgICByZXR1cm4gYSAvIGIKZW5kCgpsb2NhbCBmdW5jdGlvbiBtYWluKCkKICAgIGxvY2FsIHggPSAxMAogICAgbG9jYWwgeSA9IDAKICAgIHByaW50KCJSZXN1bHQ6IiwgZGl2aWRlKHgsIHkpKQplbmQKCm1haW4oKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local function divide(a, b)
    return a / b
end

local function main()
    local x = 10
    local y = 0
    print(&quot;Result:&quot;, divide(x, y))
end

main()</pre></div><div class='content'></div><h2>Solution</h2>
<div class='content'><ol>
<li><strong>Identify the Error</strong>: Division by zero will cause an error.</li>
<li><strong>Fix the Error</strong>: Add error handling to the <code>divide</code> function.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgZnVuY3Rpb24gZGl2aWRlKGEsIGIpCiAgICBpZiBiID09IDAgdGhlbgogICAgICAgIHJldHVybiBuaWwsICJEaXZpc2lvbiBieSB6ZXJvIGVycm9yIgogICAgZW5kCiAgICByZXR1cm4gYSAvIGIKZW5kCgpsb2NhbCBmdW5jdGlvbiBtYWluKCkKICAgIGxvY2FsIHggPSAxMAogICAgbG9jYWwgeSA9IDAKICAgIGxvY2FsIHJlc3VsdCwgZXJyID0gZGl2aWRlKHgsIHkpCiAgICBpZiBlcnIgdGhlbgogICAgICAgIHByaW50KCJFcnJvcjoiLCBlcnIpCiAgICBlbHNlCiAgICAgICAgcHJpbnQoIlJlc3VsdDoiLCByZXN1bHQpCiAgICBlbmQKZW5kCgptYWluKCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local function divide(a, b)
    if b == 0 then
        return nil, &quot;Division by zero error&quot;
    end
    return a / b
end

local function main()
    local x = 10
    local y = 0
    local result, err = divide(x, y)
    if err then
        print(&quot;Error:&quot;, err)
    else
        print(&quot;Result:&quot;, result)
    end
end

main()</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>if b == 0 then return nil, &quot;Division by zero error&quot; end</strong>: This checks for division by zero and returns an error message if true.</li>
<li><strong>local result, err = divide(x, y)</strong>: This captures the result and error message from the <code>divide</code> function.</li>
<li><strong>if err then print(&quot;Error:&quot;, err) else print(&quot;Result:&quot;, result) end</strong>: This handles the error appropriately.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered the importance of testing and debugging, explored unit testing with LuaUnit, and discussed various debugging techniques, including print statements, the <code>debug</code> library, and interactive debugging. By mastering these skills, you can ensure your Lua scripts are robust, efficient, and error-free.</p>
<p>Next, we will move on to the final topic of the course: <strong>Project Presentation</strong>.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='06-03-implementation' title="Implementation">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='06-05-project-presentation' title="Project Presentation">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
