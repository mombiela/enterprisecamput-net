<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using Lua with Other Languages</title>

    <link rel="alternate" href="https://campusempresa.com/mod/lua/using-lua-with-other-languages" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/lua/using-lua-with-other-languages" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/lua/using-lua-with-other-languages" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/lua/using-lua-with-other-languages" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/lua/using-lua-with-other-languages" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='calling-c-from-lua'>&#x25C4;Calling C from Lua</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using Lua with Other Languages</a>
	</div>
	<div class='col-4 text-end'>
					<a href='building-a-simple-game'>Building a Simple Game &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Lua is a lightweight, high-level scripting language designed for embedded use in applications. One of its most powerful features is its ability to integrate seamlessly with other programming languages. This section will cover how to use Lua with other languages, focusing on C/C++, Python, and Java.</p>
</div><h1>Lua with C/C++</h1>
<div class='content'><p>Lua was designed to be embedded in C/C++ applications. This makes it a natural choice for extending the functionality of these languages.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Embedding Lua in C/C++</strong>: Integrating Lua into a C/C++ application to run Lua scripts.</li>
<li><strong>Calling C/C++ from Lua</strong>: Extending Lua by calling C/C++ functions from Lua scripts.</li>
<li><strong>Lua C API</strong>: The set of functions provided by Lua to interact with C/C++.</li>
</ul>
</div><h2>Example: Embedding Lua in C</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGx1YS5oPgojaW5jbHVkZSA8bGF1eGxpYi5oPgojaW5jbHVkZSA8bHVhbGliLmg+CgppbnQgbWFpbih2b2lkKSB7CiAgICBsdWFfU3RhdGUgKkwgPSBsdWFMX25ld3N0YXRlKCk7ICAvLyBDcmVhdGUgYSBuZXcgTHVhIHN0YXRlCiAgICBsdWFMX29wZW5saWJzKEwpOyAgICAgICAgICAgICAgICAvLyBPcGVuIHN0YW5kYXJkIGxpYnJhcmllcwoKICAgIGlmIChsdWFMX2xvYWRmaWxlKEwsICJzY3JpcHQubHVhIikgfHwgbHVhX3BjYWxsKEwsIDAsIDAsIDApKSB7CiAgICAgICAgZnByaW50ZihzdGRlcnIsICJFcnJvcjogJXNcbiIsIGx1YV90b3N0cmluZyhMLCAtMSkpOwogICAgICAgIHJldHVybiAxOwogICAgfQoKICAgIGx1YV9jbG9zZShMKTsgIC8vIENsb3NlIHRoZSBMdWEgc3RhdGUKICAgIHJldHVybiAwOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;lua.h&gt;
#include &lt;lauxlib.h&gt;
#include &lt;lualib.h&gt;

int main(void) {
    lua_State *L = luaL_newstate();  // Create a new Lua state
    luaL_openlibs(L);                // Open standard libraries

    if (luaL_loadfile(L, &quot;script.lua&quot;) || lua_pcall(L, 0, 0, 0)) {
        fprintf(stderr, &quot;Error: %s\n&quot;, lua_tostring(L, -1));
        return 1;
    }

    lua_close(L);  // Close the Lua state
    return 0;
}</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>We create a new Lua state with <code>luaL_newstate()</code>.</li>
<li>We load and execute a Lua script (<code>script.lua</code>) using <code>luaL_loadfile()</code> and <code>lua_pcall()</code>.</li>
<li>We handle errors by checking the return values of <code>luaL_loadfile()</code> and <code>lua_pcall()</code>.</li>
<li>Finally, we close the Lua state with <code>lua_close()</code>.</li>
</ul>
</div><h2>Example: Calling C from Lua</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGx1YS5oPgojaW5jbHVkZSA8bGF1eGxpYi5oPgojaW5jbHVkZSA8bHVhbGliLmg+CgpzdGF0aWMgaW50IGNfYWRkKGx1YV9TdGF0ZSAqTCkgewogICAgaW50IGEgPSBsdWFMX2NoZWNraW50ZWdlcihMLCAxKTsKICAgIGludCBiID0gbHVhTF9jaGVja2ludGVnZXIoTCwgMik7CiAgICBsdWFfcHVzaGludGVnZXIoTCwgYSArIGIpOwogICAgcmV0dXJuIDE7ICAvLyBOdW1iZXIgb2YgcmV0dXJuIHZhbHVlcwp9CgppbnQgbWFpbih2b2lkKSB7CiAgICBsdWFfU3RhdGUgKkwgPSBsdWFMX25ld3N0YXRlKCk7CiAgICBsdWFMX29wZW5saWJzKEwpOwoKICAgIGx1YV9yZWdpc3RlcihMLCAiY19hZGQiLCBjX2FkZCk7ICAvLyBSZWdpc3RlciB0aGUgQyBmdW5jdGlvbgoKICAgIGx1YUxfZG9zdHJpbmcoTCwgInByaW50KGNfYWRkKDIsIDMpKSIpOyAgLy8gQ2FsbCB0aGUgQyBmdW5jdGlvbiBmcm9tIEx1YQoKICAgIGx1YV9jbG9zZShMKTsKICAgIHJldHVybiAwOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;lua.h&gt;
#include &lt;lauxlib.h&gt;
#include &lt;lualib.h&gt;

static int c_add(lua_State *L) {
    int a = luaL_checkinteger(L, 1);
    int b = luaL_checkinteger(L, 2);
    lua_pushinteger(L, a + b);
    return 1;  // Number of return values
}

int main(void) {
    lua_State *L = luaL_newstate();
    luaL_openlibs(L);

    lua_register(L, &quot;c_add&quot;, c_add);  // Register the C function

    luaL_dostring(L, &quot;print(c_add(2, 3))&quot;);  // Call the C function from Lua

    lua_close(L);
    return 0;
}</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>We define a C function <code>c_add</code> that adds two integers.</li>
<li>We register this function with Lua using <code>lua_register()</code>.</li>
<li>We call the C function from Lua using <code>luaL_dostring()</code>.</li>
</ul>
</div><h1>Lua with Python</h1>
<div class='content'><p>Although Lua and Python are both high-level scripting languages, they can be used together in various ways.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Interfacing Lua with Python</strong>: Using libraries to call Lua from Python and vice versa.</li>
<li><strong>Libraries</strong>: <code>lupa</code> is a popular library for integrating Lua with Python.</li>
</ul>
</div><h2>Example: Using Lupa</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBsdXBhIGltcG9ydCBMdWFSdW50aW1lCgpsdWEgPSBMdWFSdW50aW1lKHVucGFja19yZXR1cm5lZF90dXBsZXM9VHJ1ZSkKbHVhX2Z1bmMgPSBsdWEuZXZhbCgnJycKICAgIGZ1bmN0aW9uKGEsIGIpCiAgICAgICAgcmV0dXJuIGEgKyBiCiAgICBlbmQKJycnKQoKcmVzdWx0ID0gbHVhX2Z1bmMoMiwgMykKcHJpbnQocmVzdWx0KSAgIyBPdXRwdXQ6IDU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from lupa import LuaRuntime

lua = LuaRuntime(unpack_returned_tuples=True)
lua_func = lua.eval('''
    function(a, b)
        return a + b
    end
''')

result = lua_func(2, 3)
print(result)  # Output: 5</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>We create a Lua runtime using <code>LuaRuntime</code>.</li>
<li>We define a Lua function that adds two numbers using <code>lua.eval()</code>.</li>
<li>We call the Lua function from Python and print the result.</li>
</ul>
</div><h1>Lua with Java</h1>
<div class='content'><p>Integrating Lua with Java can be achieved using libraries like <code>luaj</code>.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Interfacing Lua with Java</strong>: Using libraries to call Lua from Java and vice versa.</li>
<li><strong>Libraries</strong>: <code>luaj</code> is a popular library for integrating Lua with Java.</li>
</ul>
</div><h2>Example: Using Luaj</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5sdWFqLnZtMi5HbG9iYWxzOwppbXBvcnQgb3JnLmx1YWoudm0yLkx1YVZhbHVlOwppbXBvcnQgb3JnLmx1YWoudm0yLmxpYi5qc2UuSnNlUGxhdGZvcm07CgpwdWJsaWMgY2xhc3MgTWFpbiB7CiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7CiAgICAgICAgR2xvYmFscyBnbG9iYWxzID0gSnNlUGxhdGZvcm0uc3RhbmRhcmRHbG9iYWxzKCk7CiAgICAgICAgTHVhVmFsdWUgY2h1bmsgPSBnbG9iYWxzLmxvYWQoInJldHVybiAyICsgMyIpOwogICAgICAgIEx1YVZhbHVlIHJlc3VsdCA9IGNodW5rLmNhbGwoKTsKICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4ocmVzdWx0LnRvaW50KCkpOyAgLy8gT3V0cHV0OiA1CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.luaj.vm2.Globals;
import org.luaj.vm2.LuaValue;
import org.luaj.vm2.lib.jse.JsePlatform;

public class Main {
    public static void main(String[] args) {
        Globals globals = JsePlatform.standardGlobals();
        LuaValue chunk = globals.load(&quot;return 2 + 3&quot;);
        LuaValue result = chunk.call();
        System.out.println(result.toint());  // Output: 5
    }
}</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>We create a Lua environment using <code>JsePlatform.standardGlobals()</code>.</li>
<li>We load and execute a Lua script using <code>globals.load()</code> and <code>chunk.call()</code>.</li>
<li>We print the result of the Lua script.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Integrating Lua with other languages like C/C++, Python, and Java can significantly enhance the functionality and flexibility of your applications. By embedding Lua, calling Lua functions from other languages, and vice versa, you can leverage the strengths of both Lua and the host language. This section has provided a basic introduction and examples to get you started with using Lua alongside other programming languages.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='calling-c-from-lua'>&#x25C4;Calling C from Lua</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using Lua with Other Languages</a>
	</div>
	<div class='col-4 text-end'>
					<a href='building-a-simple-game'>Building a Simple Game &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
