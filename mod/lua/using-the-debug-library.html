<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using the Debug Library</title>

    <link rel="alternate" href="https://campusempresa.com/mod/lua/using-the-debug-library" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/lua/using-the-debug-library" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/lua/using-the-debug-library" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/lua/using-the-debug-library" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/lua/using-the-debug-library" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='debugging-techniques'>&#x25C4;Debugging Techniques</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using the Debug Library</a>
	</div>
	<div class='col-4 text-end'>
					<a href='unit-testing'>Unit Testing &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>The Debug Library in Lua is a powerful tool that allows developers to inspect and manipulate the execution of Lua programs. It provides functions to access and modify variables, set breakpoints, and trace program execution. This topic will guide you through the basics to advanced usage of the Debug Library.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Debugging</strong>: The process of identifying and removing errors from computer programs.</li>
<li><strong>Breakpoints</strong>: Points in the program where execution will pause, allowing inspection of the program state.</li>
<li><strong>Stack Trace</strong>: A report of the active stack frames at a certain point in time during the execution of a program.</li>
</ul>
</div><h1>Basic Usage</h1>
<div class='content'></div><h2>Loading the Debug Library</h2>
<div class='content'><p>To use the Debug Library, you need to require it in your Lua script:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgZGVidWcgPSByZXF1aXJlKCJkZWJ1ZyIp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local debug = require(&quot;debug&quot;)</pre></div><div class='content'></div><h2>Inspecting Variables</h2>
<div class='content'><p>You can use the <code>debug.getlocal</code> function to inspect local variables within a function.</p>
<p>Example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZXhhbXBsZUZ1bmN0aW9uKCkKICAgIGxvY2FsIGEgPSAxMAogICAgbG9jYWwgYiA9IDIwCiAgICBkZWJ1Zy5kZWJ1ZygpICAtLSBFbnRlciBpbnRlcmFjdGl2ZSBtb2RlCmVuZAoKZXhhbXBsZUZ1bmN0aW9uKCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function exampleFunction()
    local a = 10
    local b = 20
    debug.debug()  -- Enter interactive mode
end

exampleFunction()</pre></div><div class='content'><p>When the <code>debug.debug()</code> function is called, Lua enters an interactive mode where you can inspect and modify variables.</p>
</div><h2>Setting Breakpoints</h2>
<div class='content'><p>Breakpoints can be set using the <code>debug.sethook</code> function.</p>
<p>Example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgZnVuY3Rpb24gaG9vaygpCiAgICBwcmludCgiQnJlYWtwb2ludCBoaXQhIikKICAgIGRlYnVnLmRlYnVnKCkgIC0tIEVudGVyIGludGVyYWN0aXZlIG1vZGUKZW5kCgpkZWJ1Zy5zZXRob29rKGhvb2ssICJsIikgIC0tIFNldCBhIGxpbmUgaG9vawoKZnVuY3Rpb24gZXhhbXBsZUZ1bmN0aW9uKCkKICAgIGxvY2FsIGEgPSAxMAogICAgbG9jYWwgYiA9IDIwCiAgICBwcmludChhICsgYikKZW5kCgpleGFtcGxlRnVuY3Rpb24oKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local function hook()
    print(&quot;Breakpoint hit!&quot;)
    debug.debug()  -- Enter interactive mode
end

debug.sethook(hook, &quot;l&quot;)  -- Set a line hook

function exampleFunction()
    local a = 10
    local b = 20
    print(a + b)
end

exampleFunction()</pre></div><div class='content'><p>In this example, the hook function is called before every line of code in <code>exampleFunction</code>, allowing you to inspect the state of the program.</p>
</div><h1>Advanced Usage</h1>
<div class='content'></div><h2>Stack Trace</h2>
<div class='content'><p>You can obtain a stack trace using the <code>debug.traceback</code> function.</p>
<p>Example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZXhhbXBsZUZ1bmN0aW9uKCkKICAgIGxvY2FsIGEgPSAxMAogICAgbG9jYWwgYiA9IDIwCiAgICBwcmludChkZWJ1Zy50cmFjZWJhY2soIlN0YWNrIHRyYWNlOiIpKQplbmQKCmV4YW1wbGVGdW5jdGlvbigp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function exampleFunction()
    local a = 10
    local b = 20
    print(debug.traceback(&quot;Stack trace:&quot;))
end

exampleFunction()</pre></div><div class='content'><p>This will print the stack trace at the point where <code>debug.traceback</code> is called.</p>
</div><h2>Modifying Variables</h2>
<div class='content'><p>You can modify local variables using the <code>debug.setlocal</code> function.</p>
<p>Example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZXhhbXBsZUZ1bmN0aW9uKCkKICAgIGxvY2FsIGEgPSAxMAogICAgbG9jYWwgYiA9IDIwCiAgICBwcmludCgiQmVmb3JlIG1vZGlmaWNhdGlvbjogYSA9ICIgLi4gYSkKICAgIGRlYnVnLnNldGxvY2FsKDEsIDEsIDMwKSAgLS0gTW9kaWZ5IHRoZSBmaXJzdCBsb2NhbCB2YXJpYWJsZSBpbiB0aGUgZmlyc3Qgc3RhY2sgbGV2ZWwKICAgIHByaW50KCJBZnRlciBtb2RpZmljYXRpb246IGEgPSAiIC4uIGEpCmVuZAoKZXhhbXBsZUZ1bmN0aW9uKCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function exampleFunction()
    local a = 10
    local b = 20
    print(&quot;Before modification: a = &quot; .. a)
    debug.setlocal(1, 1, 30)  -- Modify the first local variable in the first stack level
    print(&quot;After modification: a = &quot; .. a)
end

exampleFunction()</pre></div><div class='content'><p>In this example, the value of <code>a</code> is modified from 10 to 30.</p>
</div><h2>Profiling</h2>
<div class='content'><p>You can use the Debug Library to profile your code by setting hooks to count function calls and execution time.</p>
<p>Example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgY2FsbF9jb3VudCA9IDAKCmxvY2FsIGZ1bmN0aW9uIGhvb2soZXZlbnQpCiAgICBpZiBldmVudCA9PSAiY2FsbCIgdGhlbgogICAgICAgIGNhbGxfY291bnQgPSBjYWxsX2NvdW50ICsgMQogICAgZW5kCmVuZAoKZGVidWcuc2V0aG9vayhob29rLCAiY3IiKSAgLS0gU2V0IGhvb2tzIGZvciBjYWxsIGFuZCByZXR1cm4gZXZlbnRzCgpmdW5jdGlvbiBleGFtcGxlRnVuY3Rpb24oKQogICAgbG9jYWwgYSA9IDEwCiAgICBsb2NhbCBiID0gMjAKICAgIHJldHVybiBhICsgYgplbmQKCmV4YW1wbGVGdW5jdGlvbigpCmV4YW1wbGVGdW5jdGlvbigpCgpwcmludCgiRnVuY3Rpb24gY2FsbCBjb3VudDogIiAuLiBjYWxsX2NvdW50KQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local call_count = 0

local function hook(event)
    if event == &quot;call&quot; then
        call_count = call_count + 1
    end
end

debug.sethook(hook, &quot;cr&quot;)  -- Set hooks for call and return events

function exampleFunction()
    local a = 10
    local b = 20
    return a + b
end

exampleFunction()
exampleFunction()

print(&quot;Function call count: &quot; .. call_count)</pre></div><div class='content'><p>This example counts the number of function calls made during the execution of the script.</p>
</div><h1>Conclusion</h1>
<div class='content'><p>The Debug Library in Lua is a versatile tool that can help you inspect, modify, and profile your Lua programs. By understanding how to use its functions, you can effectively debug and optimize your code. Remember to use these tools wisely, as excessive use of debugging features can impact the performance of your program.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='debugging-techniques'>&#x25C4;Debugging Techniques</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using the Debug Library</a>
	</div>
	<div class='col-4 text-end'>
					<a href='unit-testing'>Unit Testing &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
