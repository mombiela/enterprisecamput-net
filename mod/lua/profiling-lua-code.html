<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profiling Lua Code</title>

    <link rel="alternate" href="https://campusempresa.com/mod/lua/profiling-lua-code" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/lua/profiling-lua-code" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/lua/profiling-lua-code" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/lua/profiling-lua-code" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/lua/profiling-lua-code" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing'>&#x25C4;Unit Testing</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Profiling Lua Code</a>
	</div>
	<div class='col-4 text-end'>
					<a href='memory-management'>Memory Management &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Profiling is an essential technique for optimizing code performance by identifying bottlenecks and inefficient sections. In this topic, we will cover the basics of profiling Lua code, tools available for profiling, and practical examples to help you get started.</p>
</div><h1>Introduction to Profiling</h1>
<div class='content'><p>Profiling involves measuring the performance of your code to understand where time is being spent. This can help you:</p>
<ul>
<li>Identify slow functions or code segments.</li>
<li>Optimize resource usage.</li>
<li>Improve overall application performance.</li>
</ul>
</div><h1>Tools for Profiling Lua Code</h1>
<div class='content'><p>Several tools can be used to profile Lua code. Here are some popular ones:</p>
<ul>
<li><strong>LuaProfiler</strong>: A simple and easy-to-use profiler for Lua.</li>
<li><strong>LuaJIT's <code>-jv</code> option</strong>: Provides profiling information for LuaJIT users.</li>
<li><strong>Plop</strong>: A Lua profiler that provides detailed reports.</li>
</ul>
</div><h2>LuaProfiler</h2>
<div class='content'><p>LuaProfiler is a lightweight profiler that can be easily integrated into your Lua projects. It provides basic profiling capabilities and is suitable for beginners.</p>
<h4>Installation</h4>
<p>To install LuaProfiler, you can use LuaRocks:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bHVhcm9ja3MgaW5zdGFsbCBMdWFQcm9maWxlcg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>luarocks install LuaProfiler</pre></div><div class='content'><h4>Basic Usage</h4>
<p>Here is a simple example of how to use LuaProfiler:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgcHJvZmlsZXIgPSByZXF1aXJlKCJwcm9maWxlciIpCgotLSBTdGFydCBwcm9maWxpbmcKcHJvZmlsZXIuc3RhcnQoInByb2ZpbGUubG9nIikKCi0tIFlvdXIgTHVhIGNvZGUKbG9jYWwgZnVuY3Rpb24gc2xvd0Z1bmN0aW9uKCkKICAgIGZvciBpID0gMSwgMTAwMDAwMCBkbwogICAgICAgIGxvY2FsIHggPSBtYXRoLnNxcnQoaSkKICAgIGVuZAplbmQKCnNsb3dGdW5jdGlvbigpCgotLSBTdG9wIHByb2ZpbGluZwpwcm9maWxlci5zdG9wKCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local profiler = require(&quot;profiler&quot;)

-- Start profiling
profiler.start(&quot;profile.log&quot;)

-- Your Lua code
local function slowFunction()
    for i = 1, 1000000 do
        local x = math.sqrt(i)
    end
end

slowFunction()

-- Stop profiling
profiler.stop()</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>We start profiling by calling <code>profiler.start(&quot;profile.log&quot;)</code>.</li>
<li>We run a function <code>slowFunction</code> that performs a time-consuming task.</li>
<li>We stop profiling by calling <code>profiler.stop()</code>.</li>
</ul>
<p>The profiling data is saved in <code>profile.log</code>, which can be analyzed to identify performance bottlenecks.</p>
</div><h2>LuaJIT's `-jv` Option</h2>
<div class='content'><p>LuaJIT provides a built-in profiling option that can be enabled using the <code>-jv</code> command-line option.</p>
<h4>Basic Usage</h4>
<p>To profile a Lua script using LuaJIT, run the following command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bHVhaml0IC1qdiB5b3VyX3NjcmlwdC5sdWE="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>luajit -jv your_script.lua</pre></div><div class='content'><p>This will output profiling information to the console, showing the time spent in each function.</p>
</div><h2>Plop</h2>
<div class='content'><p>Plop is another Lua profiler that provides more detailed reports, including call graphs and function statistics.</p>
<h4>Installation</h4>
<p>To install Plop, you can use LuaRocks:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bHVhcm9ja3MgaW5zdGFsbCBwbG9w"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>luarocks install plop</pre></div><div class='content'><h4>Basic Usage</h4>
<p>Here is an example of how to use Plop:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgcGxvcCA9IHJlcXVpcmUoInBsb3AiKQoKLS0gU3RhcnQgcHJvZmlsaW5nCnBsb3Auc3RhcnQoKQoKLS0gWW91ciBMdWEgY29kZQpsb2NhbCBmdW5jdGlvbiBzbG93RnVuY3Rpb24oKQogICAgZm9yIGkgPSAxLCAxMDAwMDAwIGRvCiAgICAgICAgbG9jYWwgeCA9IG1hdGguc3FydChpKQogICAgZW5kCmVuZAoKc2xvd0Z1bmN0aW9uKCkKCi0tIFN0b3AgcHJvZmlsaW5nIGFuZCBwcmludCB0aGUgcmVwb3J0CnBsb3Auc3RvcCgpCnBsb3AucmVwb3J0KCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local plop = require(&quot;plop&quot;)

-- Start profiling
plop.start()

-- Your Lua code
local function slowFunction()
    for i = 1, 1000000 do
        local x = math.sqrt(i)
    end
end

slowFunction()

-- Stop profiling and print the report
plop.stop()
plop.report()</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>We start profiling by calling <code>plop.start()</code>.</li>
<li>We run a function <code>slowFunction</code> that performs a time-consuming task.</li>
<li>We stop profiling by calling <code>plop.stop()</code> and print the profiling report using <code>plop.report()</code>.</li>
</ul>
</div><h1>Analyzing Profiling Data</h1>
<div class='content'><p>Once you have collected profiling data, the next step is to analyze it. Here are some key points to consider:</p>
<ul>
<li><strong>Identify Hotspots</strong>: Look for functions or code segments that consume the most time.</li>
<li><strong>Optimize Critical Paths</strong>: Focus on optimizing the most time-consuming parts of your code.</li>
<li><strong>Measure Improvements</strong>: After making changes, re-profile your code to ensure that performance has improved.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Profiling is a powerful technique for optimizing Lua code. By using tools like LuaProfiler, LuaJIT's <code>-jv</code> option, and Plop, you can identify performance bottlenecks and make informed decisions to improve your code's efficiency. Remember to profile regularly, especially after making significant changes to your codebase, to maintain optimal performance.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing'>&#x25C4;Unit Testing</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Profiling Lua Code</a>
	</div>
	<div class='col-4 text-end'>
					<a href='memory-management'>Memory Management &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
