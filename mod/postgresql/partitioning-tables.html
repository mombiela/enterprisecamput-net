<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Partitioning Tables</title>

    <link rel="alternate" href="https://campusempresa.com/mod/postgresql/partitioning-tables" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/postgresql/partitioning-tables" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/postgresql/partitioning-tables" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/postgresql/partitioning-tables" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/postgresql/partitioning-tables" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='stored-procedures-and-triggers'>&#x25C4;Stored Procedures and Triggers</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Partitioning Tables</a>
	</div>
	<div class='col-4 text-end'>
					<a href='replication-and-high-availability'>Replication and High Availability &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Partitioning tables in PostgreSQL is a powerful feature that allows you to divide large tables into smaller, more manageable pieces, called partitions. This can improve performance, manageability, and scalability. In this topic, we will cover the basics of table partitioning, different partitioning methods, and how to implement them in PostgreSQL.</p>
</div><h1>Introduction to Table Partitioning</h1>
<div class='content'><ul>
<li><strong>Definition</strong>: Partitioning is the process of splitting a large table into smaller, more manageable pieces, called partitions, which can improve query performance and simplify data management.</li>
<li><strong>Benefits</strong>:
<ul>
<li>Improved query performance by scanning only relevant partitions.</li>
<li>Easier maintenance by allowing operations on individual partitions.</li>
<li>Better data organization and management.</li>
</ul>
</li>
</ul>
</div><h1>Types of Partitioning</h1>
<div class='content'><p>PostgreSQL supports several types of partitioning:</p>
<ol>
<li><strong>Range Partitioning</strong>: Divides data based on a range of values.</li>
<li><strong>List Partitioning</strong>: Divides data based on a list of values.</li>
<li><strong>Hash Partitioning</strong>: Divides data based on a hash function.</li>
<li><strong>Composite Partitioning</strong>: Combines multiple partitioning methods.</li>
</ol>
</div><h2>Range Partitioning</h2>
<div class='content'><p>Range partitioning is useful when you want to divide data based on a continuous range of values, such as dates or numeric ranges.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIHNhbGVzICgKICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSwKICAgIHNhbGVfZGF0ZSBEQVRFIE5PVCBOVUxMLAogICAgYW1vdW50IE5VTUVSSUMKKSBQQVJUSVRJT04gQlkgUkFOR0UgKHNhbGVfZGF0ZSk7CgpDUkVBVEUgVEFCTEUgc2FsZXNfMjAyMiBQQVJUSVRJT04gT0Ygc2FsZXMKICAgIEZPUiBWQUxVRVMgRlJPTSAoJzIwMjItMDEtMDEnKSBUTyAoJzIwMjMtMDEtMDEnKTsKCkNSRUFURSBUQUJMRSBzYWxlc18yMDIzIFBBUlRJVElPTiBPRiBzYWxlcwogICAgRk9SIFZBTFVFUyBGUk9NICgnMjAyMy0wMS0wMScpIFRPICgnMjAyNC0wMS0wMScpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE sales (
    id SERIAL PRIMARY KEY,
    sale_date DATE NOT NULL,
    amount NUMERIC
) PARTITION BY RANGE (sale_date);

CREATE TABLE sales_2022 PARTITION OF sales
    FOR VALUES FROM ('2022-01-01') TO ('2023-01-01');

CREATE TABLE sales_2023 PARTITION OF sales
    FOR VALUES FROM ('2023-01-01') TO ('2024-01-01');</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>The <code>sales</code> table is partitioned by the <code>sale_date</code> column.</li>
<li>Two partitions are created: <code>sales_2022</code> and <code>sales_2023</code>, each covering a specific range of dates.</li>
</ul>
</div><h2>List Partitioning</h2>
<div class='content'><p>List partitioning is useful when you want to divide data based on a discrete set of values, such as categories or regions.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIGVtcGxveWVlcyAoCiAgICBpZCBTRVJJQUwgUFJJTUFSWSBLRVksCiAgICBkZXBhcnRtZW50IFRFWFQgTk9UIE5VTEwsCiAgICBuYW1lIFRFWFQKKSBQQVJUSVRJT04gQlkgTElTVCAoZGVwYXJ0bWVudCk7CgpDUkVBVEUgVEFCTEUgZW1wbG95ZWVzX3NhbGVzIFBBUlRJVElPTiBPRiBlbXBsb3llZXMKICAgIEZPUiBWQUxVRVMgSU4gKCdTYWxlcycpOwoKQ1JFQVRFIFRBQkxFIGVtcGxveWVlc19ociBQQVJUSVRJT04gT0YgZW1wbG95ZWVzCiAgICBGT1IgVkFMVUVTIElOICgnSFInKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE employees (
    id SERIAL PRIMARY KEY,
    department TEXT NOT NULL,
    name TEXT
) PARTITION BY LIST (department);

CREATE TABLE employees_sales PARTITION OF employees
    FOR VALUES IN ('Sales');

CREATE TABLE employees_hr PARTITION OF employees
    FOR VALUES IN ('HR');</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>The <code>employees</code> table is partitioned by the <code>department</code> column.</li>
<li>Two partitions are created: <code>employees_sales</code> and <code>employees_hr</code>, each covering specific departments.</li>
</ul>
</div><h2>Hash Partitioning</h2>
<div class='content'><p>Hash partitioning is useful when you want to evenly distribute data across a number of partitions using a hash function.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIG9yZGVycyAoCiAgICBpZCBTRVJJQUwgUFJJTUFSWSBLRVksCiAgICBjdXN0b21lcl9pZCBJTlQgTk9UIE5VTEwsCiAgICBvcmRlcl9kYXRlIERBVEUKKSBQQVJUSVRJT04gQlkgSEFTSCAoY3VzdG9tZXJfaWQpOwoKQ1JFQVRFIFRBQkxFIG9yZGVyc19wMCBQQVJUSVRJT04gT0Ygb3JkZXJzCiAgICBGT1IgVkFMVUVTIFdJVEggKE1PRFVMVVMgNCwgUkVNQUlOREVSIDApOwoKQ1JFQVRFIFRBQkxFIG9yZGVyc19wMSBQQVJUSVRJT04gT0Ygb3JkZXJzCiAgICBGT1IgVkFMVUVTIFdJVEggKE1PRFVMVVMgNCwgUkVNQUlOREVSIDEpOwoKQ1JFQVRFIFRBQkxFIG9yZGVyc19wMiBQQVJUSVRJT04gT0Ygb3JkZXJzCiAgICBGT1IgVkFMVUVTIFdJVEggKE1PRFVMVVMgNCwgUkVNQUlOREVSIDIpOwoKQ1JFQVRFIFRBQkxFIG9yZGVyc19wMyBQQVJUSVRJT04gT0Ygb3JkZXJzCiAgICBGT1IgVkFMVUVTIFdJVEggKE1PRFVMVVMgNCwgUkVNQUlOREVSIDMpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    customer_id INT NOT NULL,
    order_date DATE
) PARTITION BY HASH (customer_id);

CREATE TABLE orders_p0 PARTITION OF orders
    FOR VALUES WITH (MODULUS 4, REMAINDER 0);

CREATE TABLE orders_p1 PARTITION OF orders
    FOR VALUES WITH (MODULUS 4, REMAINDER 1);

CREATE TABLE orders_p2 PARTITION OF orders
    FOR VALUES WITH (MODULUS 4, REMAINDER 2);

CREATE TABLE orders_p3 PARTITION OF orders
    FOR VALUES WITH (MODULUS 4, REMAINDER 3);</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>The <code>orders</code> table is partitioned by the <code>customer_id</code> column using a hash function.</li>
<li>Four partitions are created, each handling a different remainder of the hash function.</li>
</ul>
</div><h2>Composite Partitioning</h2>
<div class='content'><p>Composite partitioning combines multiple partitioning methods to achieve more complex data organization.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIGxvZ3MgKAogICAgaWQgU0VSSUFMIFBSSU1BUlkgS0VZLAogICAgbG9nX2RhdGUgREFURSBOT1QgTlVMTCwKICAgIHJlZ2lvbiBURVhUIE5PVCBOVUxMLAogICAgbWVzc2FnZSBURVhUCikgUEFSVElUSU9OIEJZIFJBTkdFIChsb2dfZGF0ZSk7CgpDUkVBVEUgVEFCTEUgbG9nc18yMDIyIFBBUlRJVElPTiBPRiBsb2dzCiAgICBGT1IgVkFMVUVTIEZST00gKCcyMDIyLTAxLTAxJykgVE8gKCcyMDIzLTAxLTAxJykKICAgIFBBUlRJVElPTiBCWSBMSVNUIChyZWdpb24pOwoKQ1JFQVRFIFRBQkxFIGxvZ3NfMjAyMl91cyBQQVJUSVRJT04gT0YgbG9nc18yMDIyCiAgICBGT1IgVkFMVUVTIElOICgnVVMnKTsKCkNSRUFURSBUQUJMRSBsb2dzXzIwMjJfZXUgUEFSVElUSU9OIE9GIGxvZ3NfMjAyMgogICAgRk9SIFZBTFVFUyBJTiAoJ0VVJyk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE logs (
    id SERIAL PRIMARY KEY,
    log_date DATE NOT NULL,
    region TEXT NOT NULL,
    message TEXT
) PARTITION BY RANGE (log_date);

CREATE TABLE logs_2022 PARTITION OF logs
    FOR VALUES FROM ('2022-01-01') TO ('2023-01-01')
    PARTITION BY LIST (region);

CREATE TABLE logs_2022_us PARTITION OF logs_2022
    FOR VALUES IN ('US');

CREATE TABLE logs_2022_eu PARTITION OF logs_2022
    FOR VALUES IN ('EU');</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>The <code>logs</code> table is first partitioned by the <code>log_date</code> column using range partitioning.</li>
<li>The <code>logs_2022</code> partition is further partitioned by the <code>region</code> column using list partitioning.</li>
</ul>
</div><h1>Managing Partitions</h1>
<div class='content'><ul>
<li><strong>Adding Partitions</strong>: You can add new partitions as your data grows.</li>
<li><strong>Dropping Partitions</strong>: You can drop partitions that are no longer needed.</li>
<li><strong>Attaching/Detaching Partitions</strong>: You can attach or detach partitions to/from a partitioned table.</li>
</ul>
<h4>Example: Adding a Partition</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIHNhbGVzXzIwMjQgUEFSVElUSU9OIE9GIHNhbGVzCiAgICBGT1IgVkFMVUVTIEZST00gKCcyMDI0LTAxLTAxJykgVE8gKCcyMDI1LTAxLTAxJyk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE sales_2024 PARTITION OF sales
    FOR VALUES FROM ('2024-01-01') TO ('2025-01-01');</pre></div><div class='content'><h4>Example: Dropping a Partition</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RFJPUCBUQUJMRSBzYWxlc18yMDIyOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DROP TABLE sales_2022;</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Partitioning tables in PostgreSQL is a powerful feature that can significantly improve the performance and manageability of large datasets. By understanding and implementing different partitioning methods—range, list, hash, and composite—you can optimize your database for better query performance and easier maintenance. Remember to carefully plan your partitioning strategy based on your specific use case and data distribution.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='stored-procedures-and-triggers'>&#x25C4;Stored Procedures and Triggers</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Partitioning Tables</a>
	</div>
	<div class='col-4 text-end'>
					<a href='replication-and-high-availability'>Replication and High Availability &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
