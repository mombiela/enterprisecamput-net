<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using Arrays and JSON in PostgreSQL</title>

    <link rel="alternate" href="https://campusempresa.com/mod/postgresql/using-arrays-and-json" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/postgresql/using-arrays-and-json" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/postgresql/using-arrays-and-json" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/postgresql/using-arrays-and-json" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/postgresql/using-arrays-and-json" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='understanding-data-types'>&#x25C4;Understanding Data Types</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using Arrays and JSON in PostgreSQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='date-and-time-functions'>Date and Time Functions &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In this section, we will explore how to use arrays and JSON in PostgreSQL. Arrays and JSON are powerful data types that allow you to store and manipulate complex data structures within your database. Understanding how to use these data types effectively can greatly enhance your ability to work with PostgreSQL.</p>
</div><h1>Arrays in PostgreSQL</h1>
<div class='content'></div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Array Data Type</strong>: PostgreSQL supports arrays of any built-in or user-defined data type.</li>
<li><strong>Array Declaration</strong>: Arrays can be declared using square brackets <code>[]</code>.</li>
<li><strong>Array Functions and Operators</strong>: PostgreSQL provides a variety of functions and operators to work with arrays.</li>
</ul>
</div><h2>Creating and Using Arrays</h2>
<div class='content'><p>To create a table with an array column:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIHN0dWRlbnRzICgKICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSwKICAgIG5hbWUgVkFSQ0hBUigxMDApLAogICAgZ3JhZGVzIElOVEVHRVJbXQopOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE students (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    grades INTEGER[]
);</pre></div><div class='content'><p>Inserting data into an array column:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SU5TRVJUIElOVE8gc3R1ZGVudHMgKG5hbWUsIGdyYWRlcykgVkFMVUVTICgnQWxpY2UnLCAnezg1LCA5MCwgNzh9Jyk7CklOU0VSVCBJTlRPIHN0dWRlbnRzIChuYW1lLCBncmFkZXMpIFZBTFVFUyAoJ0JvYicsICd7ODgsIDkyLCA4MH0nKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>INSERT INTO students (name, grades) VALUES ('Alice', '{85, 90, 78}');
INSERT INTO students (name, grades) VALUES ('Bob', '{88, 92, 80}');</pre></div><div class='content'><p>Querying data from an array column:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIG5hbWUsIGdyYWRlcyBGUk9NIHN0dWRlbnRzOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT name, grades FROM students;</pre></div><div class='content'></div><h2>Array Functions and Operators</h2>
<div class='content'><ul>
<li>
<p><strong>Accessing Array Elements</strong>: Use the subscript notation to access elements.</p>
<pre><code class="language-sql">SELECT grades[1] FROM students WHERE name = 'Alice'; -- Returns 85
</code></pre>
</li>
<li>
<p><strong>Array Length</strong>: Use the <code>array_length</code> function to get the length of an array.</p>
<pre><code class="language-sql">SELECT array_length(grades, 1) FROM students WHERE name = 'Alice'; -- Returns 3
</code></pre>
</li>
<li>
<p><strong>Array Append</strong>: Use the <code>||</code> operator to append elements to an array.</p>
<pre><code class="language-sql">UPDATE students SET grades = grades || 95 WHERE name = 'Alice';
</code></pre>
</li>
</ul>
</div><h1>JSON in PostgreSQL</h1>
<div class='content'></div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>JSON Data Type</strong>: PostgreSQL supports two JSON data types: <code>json</code> and <code>jsonb</code>.
<ul>
<li><code>json</code>: Stores JSON data as text.</li>
<li><code>jsonb</code>: Stores JSON data in a binary format for faster processing.</li>
</ul>
</li>
<li><strong>JSON Functions and Operators</strong>: PostgreSQL provides a rich set of functions and operators to work with JSON data.</li>
</ul>
</div><h2>Creating and Using JSON</h2>
<div class='content'><p>To create a table with a JSON column:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIHByb2R1Y3RzICgKICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSwKICAgIG5hbWUgVkFSQ0hBUigxMDApLAogICAgYXR0cmlidXRlcyBKU09OQgopOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE products (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    attributes JSONB
);</pre></div><div class='content'><p>Inserting data into a JSON column:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SU5TRVJUIElOVE8gcHJvZHVjdHMgKG5hbWUsIGF0dHJpYnV0ZXMpIFZBTFVFUyAoJ0xhcHRvcCcsICd7ImJyYW5kIjogIkRlbGwiLCAicHJpY2UiOiAxMjAwfScpOwpJTlNFUlQgSU5UTyBwcm9kdWN0cyAobmFtZSwgYXR0cmlidXRlcykgVkFMVUVTICgnU21hcnRwaG9uZScsICd7ImJyYW5kIjogIlNhbXN1bmciLCAicHJpY2UiOiA4MDB9Jyk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>INSERT INTO products (name, attributes) VALUES ('Laptop', '{&quot;brand&quot;: &quot;Dell&quot;, &quot;price&quot;: 1200}');
INSERT INTO products (name, attributes) VALUES ('Smartphone', '{&quot;brand&quot;: &quot;Samsung&quot;, &quot;price&quot;: 800}');</pre></div><div class='content'><p>Querying data from a JSON column:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIG5hbWUsIGF0dHJpYnV0ZXMgRlJPTSBwcm9kdWN0czs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT name, attributes FROM products;</pre></div><div class='content'></div><h2>JSON Functions and Operators</h2>
<div class='content'><ul>
<li>
<p><strong>Accessing JSON Fields</strong>: Use the <code>-&gt;</code> and <code>-&gt;&gt;</code> operators to access JSON fields.</p>
<pre><code class="language-sql">SELECT attributes-&gt;'brand' FROM products WHERE name = 'Laptop'; -- Returns &quot;Dell&quot;
SELECT attributes-&gt;&gt;'price' FROM products WHERE name = 'Laptop'; -- Returns 1200
</code></pre>
</li>
<li>
<p><strong>Updating JSON Fields</strong>: Use the <code>jsonb_set</code> function to update JSON fields.</p>
<pre><code class="language-sql">UPDATE products SET attributes = jsonb_set(attributes, '{price}', '1300') WHERE name = 'Laptop';
</code></pre>
</li>
<li>
<p><strong>JSON Aggregation</strong>: Use the <code>json_agg</code> function to aggregate results into a JSON array.</p>
<pre><code class="language-sql">SELECT json_agg(attributes) FROM products;
</code></pre>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Arrays and JSON are versatile data types in PostgreSQL that allow you to store and manipulate complex data structures efficiently. Arrays are useful for storing lists of homogeneous data, while JSON is ideal for representing structured data with varying formats. By mastering the use of arrays and JSON, you can enhance your database's functionality and performance, making your applications more robust and flexible.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='understanding-data-types'>&#x25C4;Understanding Data Types</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using Arrays and JSON in PostgreSQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='date-and-time-functions'>Date and Time Functions &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
