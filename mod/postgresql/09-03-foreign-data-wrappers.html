<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Foreign Data Wrappers</title>

    <link rel="alternate" href="https://campusempresa.com/mod/postgresql/09-03-foreign-data-wrappers" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/postgresql/09-03-foreign-data-wrappers" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/postgresql/09-03-foreign-data-wrappers" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=3" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/postgresql/09-03-foreign-data-wrappers" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/postgresql/09-03-foreign-data-wrappers" class="px-2">CA</a>
</span>
			<span class="d-none d-md-inline"><br><cite>Building today's and tomorrow's society</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Languages</a>
				 					<a href="/categ/frameworks">Frameworks</a>
				 					<a href="/categ/tech-tools">Tools</a>
				 					<a href="/categ/foundations">Foundations</a>
				 					<a href="/categ/soft-skills">Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='09-02-full-text-search' title="Full-Text Search">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Foreign Data Wrappers</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-04-plpgsql-and-other-procedural-languages' title="PL/pgSQL and Other Procedural Languages">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Foreign Data Wrappers (FDWs) are a powerful feature in PostgreSQL that allow you to access and manipulate data stored in external databases as if they were part of your PostgreSQL database. This capability is particularly useful for integrating data from different sources, performing federated queries, and migrating data between systems.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Foreign Data Wrapper (FDW)</strong>: A module that can be installed in PostgreSQL to enable access to external data sources.</li>
<li><strong>Foreign Server</strong>: Represents the external data source.</li>
<li><strong>User Mapping</strong>: Defines the connection credentials for accessing the foreign server.</li>
<li><strong>Foreign Table</strong>: A table in PostgreSQL that maps to a table or query in the external data source.</li>
</ol>
</div><h1><p>Steps to Use Foreign Data Wrappers</p>
</h1>
<div class='content'><ol>
<li><strong>Install the FDW Extension</strong>: Install the appropriate FDW extension for the external data source.</li>
<li><strong>Create a Foreign Server</strong>: Define the external data source.</li>
<li><strong>Create User Mappings</strong>: Set up the credentials for accessing the foreign server.</li>
<li><strong>Create Foreign Tables</strong>: Map the external data to PostgreSQL tables.</li>
</ol>
</div><h1><p>Example: Using <code>postgres_fdw</code> to Access Another PostgreSQL Database</p>
</h1>
<div class='content'></div><h2><p>Step 1: Install the FDW Extension</p>
</h2>
<div class='content'><p>First, you need to install the <code>postgres_fdw</code> extension. This can be done using the following SQL command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIEVYVEVOU0lPTiBJRiBOT1QgRVhJU1RTIHBvc3RncmVzX2Zkdzs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE EXTENSION IF NOT EXISTS postgres_fdw;</pre></div><div class='content'></div><h2><p>Step 2: Create a Foreign Server</p>
</h2>
<div class='content'><p>Next, create a foreign server that represents the external PostgreSQL database:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFNFUlZFUiBmb3JlaWduX3BnX3NlcnZlcgpGT1JFSUdOIERBVEEgV1JBUFBFUiBwb3N0Z3Jlc19mZHcKT1BUSU9OUyAoaG9zdCAncmVtb3RlX2hvc3QnLCBkYm5hbWUgJ3JlbW90ZV9kYicsIHBvcnQgJzU0MzInKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE SERVER foreign_pg_server
FOREIGN DATA WRAPPER postgres_fdw
OPTIONS (host 'remote_host', dbname 'remote_db', port '5432');</pre></div><div class='content'></div><h2><p>Step 3: Create User Mappings</p>
</h2>
<div class='content'><p>Define the user mappings to specify the credentials for accessing the foreign server:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFVTRVIgTUFQUElORyBGT1IgbG9jYWxfdXNlcgpTRVJWRVIgZm9yZWlnbl9wZ19zZXJ2ZXIKT1BUSU9OUyAodXNlciAncmVtb3RlX3VzZXInLCBwYXNzd29yZCAncmVtb3RlX3Bhc3N3b3JkJyk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE USER MAPPING FOR local_user
SERVER foreign_pg_server
OPTIONS (user 'remote_user', password 'remote_password');</pre></div><div class='content'></div><h2><p>Step 4: Create Foreign Tables</p>
</h2>
<div class='content'><p>Finally, create foreign tables that map to the tables in the external PostgreSQL database:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIEZPUkVJR04gVEFCTEUgZm9yZWlnbl90YWJsZSAoCiAgICBpZCBpbnRlZ2VyLAogICAgbmFtZSB0ZXh0LAogICAgdmFsdWUgbnVtZXJpYwopClNFUlZFUiBmb3JlaWduX3BnX3NlcnZlcgpPUFRJT05TIChzY2hlbWFfbmFtZSAncHVibGljJywgdGFibGVfbmFtZSAncmVtb3RlX3RhYmxlJyk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE FOREIGN TABLE foreign_table (
    id integer,
    name text,
    value numeric
)
SERVER foreign_pg_server
OPTIONS (schema_name 'public', table_name 'remote_table');</pre></div><div class='content'></div><h2><p>Querying Foreign Tables</p>
</h2>
<div class='content'><p>Once the foreign table is created, you can query it just like any other table in your PostgreSQL database:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUICogRlJPTSBmb3JlaWduX3RhYmxlOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT * FROM foreign_table;</pre></div><div class='content'></div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Setting Up a Foreign Data Wrapper</p>
</h2>
<div class='content'><ol>
<li><strong>Objective</strong>: Set up a foreign data wrapper to access a table from another PostgreSQL database.</li>
<li><strong>Steps</strong>:
<ul>
<li>Install the <code>postgres_fdw</code> extension.</li>
<li>Create a foreign server.</li>
<li>Create user mappings.</li>
<li>Create a foreign table.</li>
<li>Query the foreign table.</li>
</ul>
</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gU3RlcCAxOiBJbnN0YWxsIHRoZSBGRFcgRXh0ZW5zaW9uCkNSRUFURSBFWFRFTlNJT04gSUYgTk9UIEVYSVNUUyBwb3N0Z3Jlc19mZHc7CgotLSBTdGVwIDI6IENyZWF0ZSBhIEZvcmVpZ24gU2VydmVyCkNSRUFURSBTRVJWRVIgZm9yZWlnbl9wZ19zZXJ2ZXIKRk9SRUlHTiBEQVRBIFdSQVBQRVIgcG9zdGdyZXNfZmR3Ck9QVElPTlMgKGhvc3QgJ3JlbW90ZV9ob3N0JywgZGJuYW1lICdyZW1vdGVfZGInLCBwb3J0ICc1NDMyJyk7CgotLSBTdGVwIDM6IENyZWF0ZSBVc2VyIE1hcHBpbmdzCkNSRUFURSBVU0VSIE1BUFBJTkcgRk9SIGxvY2FsX3VzZXIKU0VSVkVSIGZvcmVpZ25fcGdfc2VydmVyCk9QVElPTlMgKHVzZXIgJ3JlbW90ZV91c2VyJywgcGFzc3dvcmQgJ3JlbW90ZV9wYXNzd29yZCcpOwoKLS0gU3RlcCA0OiBDcmVhdGUgRm9yZWlnbiBUYWJsZXMKQ1JFQVRFIEZPUkVJR04gVEFCTEUgZm9yZWlnbl90YWJsZSAoCiAgICBpZCBpbnRlZ2VyLAogICAgbmFtZSB0ZXh0LAogICAgdmFsdWUgbnVtZXJpYwopClNFUlZFUiBmb3JlaWduX3BnX3NlcnZlcgpPUFRJT05TIChzY2hlbWFfbmFtZSAncHVibGljJywgdGFibGVfbmFtZSAncmVtb3RlX3RhYmxlJyk7CgotLSBRdWVyeSB0aGUgRm9yZWlnbiBUYWJsZQpTRUxFQ1QgKiBGUk9NIGZvcmVpZ25fdGFibGU7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Step 1: Install the FDW Extension
CREATE EXTENSION IF NOT EXISTS postgres_fdw;

-- Step 2: Create a Foreign Server
CREATE SERVER foreign_pg_server
FOREIGN DATA WRAPPER postgres_fdw
OPTIONS (host 'remote_host', dbname 'remote_db', port '5432');

-- Step 3: Create User Mappings
CREATE USER MAPPING FOR local_user
SERVER foreign_pg_server
OPTIONS (user 'remote_user', password 'remote_password');

-- Step 4: Create Foreign Tables
CREATE FOREIGN TABLE foreign_table (
    id integer,
    name text,
    value numeric
)
SERVER foreign_pg_server
OPTIONS (schema_name 'public', table_name 'remote_table');

-- Query the Foreign Table
SELECT * FROM foreign_table;</pre></div><div class='content'></div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ul>
<li><strong>Incorrect Credentials</strong>: Ensure that the user mappings have the correct credentials for accessing the foreign server.</li>
<li><strong>Network Issues</strong>: Verify that the PostgreSQL server can connect to the remote host. Check firewall settings and network configurations.</li>
<li><strong>Schema and Table Names</strong>: Double-check the schema and table names in the <code>OPTIONS</code> clause to ensure they match the external data source.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>Foreign Data Wrappers provide a flexible and powerful way to integrate external data sources into your PostgreSQL database. By following the steps outlined in this section, you can set up FDWs to access and manipulate data from various external databases seamlessly. This capability is invaluable for data integration, migration, and federated querying, making PostgreSQL a versatile tool in your data management toolkit.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='09-02-full-text-search' title="Full-Text Search">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-04-plpgsql-and-other-procedural-languages' title="PL/pgSQL and Other Procedural Languages">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Advertising</h1>
<p>This space is reserved for advertising.</p>
<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Thank you for collaborating!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
