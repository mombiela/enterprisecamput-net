<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Joins and Subqueries</title>

    <link rel="alternate" href="https://campusempresa.com/mod/postgresql/joins-and-subqueries" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/postgresql/joins-and-subqueries" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/postgresql/joins-and-subqueries" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/postgresql/joins-and-subqueries" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/postgresql/joins-and-subqueries" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='updating-and-deleting-data'>&#x25C4;Updating and Deleting Data</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Joins and Subqueries</a>
	</div>
	<div class='col-4 text-end'>
					<a href='aggregate-functions'>Aggregate Functions &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In this section, we will explore two fundamental concepts in SQL: Joins and Subqueries. These concepts are crucial for querying data from multiple tables and performing complex data retrieval operations in PostgreSQL.</p>
</div><h1>Joins</h1>
<div class='content'><p>Joins are used to combine rows from two or more tables based on a related column between them.</p>
</div><h2>Types of Joins</h2>
<div class='content'><ul>
<li><strong>Inner Join</strong>: Returns records that have matching values in both tables.</li>
<li><strong>Left (Outer) Join</strong>: Returns all records from the left table, and the matched records from the right table. The result is NULL from the right side if there is no match.</li>
<li><strong>Right (Outer) Join</strong>: Returns all records from the right table, and the matched records from the left table. The result is NULL from the left side when there is no match.</li>
<li><strong>Full (Outer) Join</strong>: Returns all records when there is a match in either left or right table. Records not matching in either table will have NULLs.</li>
</ul>
</div><h2>Inner Join Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIGVtcGxveWVlcy5uYW1lLCBkZXBhcnRtZW50cy5kZXBhcnRtZW50X25hbWUKRlJPTSBlbXBsb3llZXMKSU5ORVIgSk9JTiBkZXBhcnRtZW50cyBPTiBlbXBsb3llZXMuZGVwYXJ0bWVudF9pZCA9IGRlcGFydG1lbnRzLmlkOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT employees.name, departments.department_name
FROM employees
INNER JOIN departments ON employees.department_id = departments.id;</pre></div><div class='content'><ul>
<li>This query selects the names of employees and their corresponding department names where there is a match between <code>employees.department_id</code> and <code>departments.id</code>.</li>
</ul>
</div><h2>Left Join Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIGVtcGxveWVlcy5uYW1lLCBkZXBhcnRtZW50cy5kZXBhcnRtZW50X25hbWUKRlJPTSBlbXBsb3llZXMKTEVGVCBKT0lOIGRlcGFydG1lbnRzIE9OIGVtcGxveWVlcy5kZXBhcnRtZW50X2lkID0gZGVwYXJ0bWVudHMuaWQ7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT employees.name, departments.department_name
FROM employees
LEFT JOIN departments ON employees.department_id = departments.id;</pre></div><div class='content'><ul>
<li>This query selects all employees and their corresponding department names. If an employee does not belong to any department, the department name will be NULL.</li>
</ul>
</div><h2>Right Join Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIGVtcGxveWVlcy5uYW1lLCBkZXBhcnRtZW50cy5kZXBhcnRtZW50X25hbWUKRlJPTSBlbXBsb3llZXMKUklHSFQgSk9JTiBkZXBhcnRtZW50cyBPTiBlbXBsb3llZXMuZGVwYXJ0bWVudF9pZCA9IGRlcGFydG1lbnRzLmlkOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT employees.name, departments.department_name
FROM employees
RIGHT JOIN departments ON employees.department_id = departments.id;</pre></div><div class='content'><ul>
<li>This query selects all departments and their corresponding employees. If a department has no employees, the employee name will be NULL.</li>
</ul>
</div><h2>Full Join Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIGVtcGxveWVlcy5uYW1lLCBkZXBhcnRtZW50cy5kZXBhcnRtZW50X25hbWUKRlJPTSBlbXBsb3llZXMKRlVMTCBKT0lOIGRlcGFydG1lbnRzIE9OIGVtcGxveWVlcy5kZXBhcnRtZW50X2lkID0gZGVwYXJ0bWVudHMuaWQ7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT employees.name, departments.department_name
FROM employees
FULL JOIN departments ON employees.department_id = departments.id;</pre></div><div class='content'><ul>
<li>This query selects all employees and all departments. If an employee does not belong to any department or a department has no employees, the corresponding fields will be NULL.</li>
</ul>
</div><h1>Subqueries</h1>
<div class='content'><p>Subqueries, also known as inner queries or nested queries, are queries within another SQL query. They can be used in various parts of a SQL statement, including the SELECT, FROM, WHERE, and HAVING clauses.</p>
</div><h2>Subquery in SELECT Clause</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIG5hbWUsIAogICAgICAgKFNFTEVDVCBkZXBhcnRtZW50X25hbWUgCiAgICAgICAgRlJPTSBkZXBhcnRtZW50cyAKICAgICAgICBXSEVSRSBkZXBhcnRtZW50cy5pZCA9IGVtcGxveWVlcy5kZXBhcnRtZW50X2lkKSBBUyBkZXBhcnRtZW50X25hbWUKRlJPTSBlbXBsb3llZXM7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT name, 
       (SELECT department_name 
        FROM departments 
        WHERE departments.id = employees.department_id) AS department_name
FROM employees;</pre></div><div class='content'><ul>
<li>This query selects the name of each employee and uses a subquery to find the corresponding department name.</li>
</ul>
</div><h2>Subquery in WHERE Clause</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIG5hbWUKRlJPTSBlbXBsb3llZXMKV0hFUkUgZGVwYXJ0bWVudF9pZCA9IChTRUxFQ1QgaWQgCiAgICAgICAgICAgICAgICAgICAgICAgRlJPTSBkZXBhcnRtZW50cyAKICAgICAgICAgICAgICAgICAgICAgICBXSEVSRSBkZXBhcnRtZW50X25hbWUgPSAnU2FsZXMnKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT name
FROM employees
WHERE department_id = (SELECT id 
                       FROM departments 
                       WHERE department_name = 'Sales');</pre></div><div class='content'><ul>
<li>This query selects the names of employees who belong to the 'Sales' department.</li>
</ul>
</div><h2>Subquery in FROM Clause</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIGRlcGFydG1lbnRfbmFtZSwgYXZnX3NhbGFyeQpGUk9NIChTRUxFQ1QgZGVwYXJ0bWVudF9pZCwgQVZHKHNhbGFyeSkgQVMgYXZnX3NhbGFyeQogICAgICBGUk9NIGVtcGxveWVlcwogICAgICBHUk9VUCBCWSBkZXBhcnRtZW50X2lkKSBBUyBkZXB0X2F2ZwpKT0lOIGRlcGFydG1lbnRzIE9OIGRlcHRfYXZnLmRlcGFydG1lbnRfaWQgPSBkZXBhcnRtZW50cy5pZDs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT department_name, avg_salary
FROM (SELECT department_id, AVG(salary) AS avg_salary
      FROM employees
      GROUP BY department_id) AS dept_avg
JOIN departments ON dept_avg.department_id = departments.id;</pre></div><div class='content'><ul>
<li>This query calculates the average salary for each department and then joins the result with the departments table to get the department names.</li>
</ul>
</div><h2>Subquery in HAVING Clause</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUIGRlcGFydG1lbnRfaWQsIEFWRyhzYWxhcnkpIEFTIGF2Z19zYWxhcnkKRlJPTSBlbXBsb3llZXMKR1JPVVAgQlkgZGVwYXJ0bWVudF9pZApIQVZJTkcgQVZHKHNhbGFyeSkgPiAoU0VMRUNUIEFWRyhzYWxhcnkpIEZST00gZW1wbG95ZWVzKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT department_id, AVG(salary) AS avg_salary
FROM employees
GROUP BY department_id
HAVING AVG(salary) &gt; (SELECT AVG(salary) FROM employees);</pre></div><div class='content'><ul>
<li>This query selects departments where the average salary is greater than the overall average salary of all employees.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Joins and subqueries are powerful tools in PostgreSQL that allow you to perform complex data retrieval operations. Joins are used to combine data from multiple tables, while subqueries allow you to nest queries within other queries to achieve more refined results. Understanding and mastering these concepts will significantly enhance your ability to work with relational databases and perform sophisticated data analysis.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='updating-and-deleting-data'>&#x25C4;Updating and Deleting Data</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Joins and Subqueries</a>
	</div>
	<div class='col-4 text-end'>
					<a href='aggregate-functions'>Aggregate Functions &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
