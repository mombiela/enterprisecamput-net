<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    <title>Query Optimization</title>

    <link rel="alternate" href="https://campusempresa.com/mod/postgresql/06-01-query-optimization" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/postgresql/06-01-query-optimization" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/postgresql/06-01-query-optimization" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.ea63f62b9e.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "languages";
  		var MOD_NAME = "postgresql";
  		var TEMA_NAME = "6-1";
  		var TYPE = "mod";
  		var PATH = "mod/postgresql/06-01-query-optimization";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.86da6c742a.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/postgresql/06-01-query-optimization" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/postgresql/06-01-query-optimization" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my_modules" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/end_modules" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="postgresql">
		<a  href="#" class="text-secondary d-none" data-read-mod="postgresql" data-read-unit="6-1" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="postgresql" data-unread-unit="6-1" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-04-transactions-and-concurrency' title="Transactions and Concurrency" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-04-transactions-and-concurrency' title="Transactions and Concurrency" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">Query Optimization</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='06-02-indexing-strategies' title="Indexing Strategies" class="py-2 px-3 btn btn-primary"
				data-read-mod="postgresql" data-read-unit="6-1">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='06-02-indexing-strategies' title="Indexing Strategies" class="py-2 px-3 btn btn-primary" 
				data-read-mod="postgresql" data-read-unit="6-1">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Query optimization is a crucial aspect of database management that ensures your SQL queries run efficiently and return results quickly. In this section, we will cover the fundamental concepts and techniques for optimizing queries in PostgreSQL.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Execution Plan</strong>: The sequence of operations that PostgreSQL uses to execute a query.</li>
<li><strong>Indexes</strong>: Data structures that improve the speed of data retrieval operations.</li>
<li><strong>Statistics</strong>: Metadata that PostgreSQL uses to estimate the cost of different query plans.</li>
<li><strong>Cost-Based Optimization</strong>: PostgreSQL's method of choosing the most efficient execution plan based on estimated costs.</li>
</ol>
</div><h1>Understanding Execution Plans</h1>
<div class='content'><p>PostgreSQL uses the <code>EXPLAIN</code> command to show the execution plan of a query. This plan includes details about how the query will be executed, including the use of indexes, joins, and other operations.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RVhQTEFJTiBTRUxFQ1QgKiBGUk9NIGVtcGxveWVlcyBXSEVSRSBkZXBhcnRtZW50ID0gJ1NhbGVzJzs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>EXPLAIN SELECT * FROM employees WHERE department = 'Sales';</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Seq Scan</strong>: A sequential scan of the table.</li>
<li><strong>Index Scan</strong>: A scan using an index.</li>
<li><strong>Cost</strong>: An estimate of the resources required to execute the query.</li>
</ul>
</div><h1>Creating and Using Indexes</h1>
<div class='content'><p>Indexes are essential for optimizing query performance. They allow PostgreSQL to quickly locate rows without scanning the entire table.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIElOREVYIGlkeF9kZXBhcnRtZW50IE9OIGVtcGxveWVlcyhkZXBhcnRtZW50KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE INDEX idx_department ON employees(department);</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>CREATE INDEX</strong>: The command to create an index.</li>
<li><strong>idx_department</strong>: The name of the index.</li>
<li><strong>employees(department)</strong>: The table and column on which the index is created.</li>
</ul>
</div><h1>Analyzing Query Performance</h1>
<div class='content'><p>PostgreSQL provides several tools to analyze and improve query performance.</p>
</div><h2><code>EXPLAIN ANALYZE</code></h2>
<div class='content'><p>This command executes the query and provides detailed execution statistics.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RVhQTEFJTiBBTkFMWVpFIFNFTEVDVCAqIEZST00gZW1wbG95ZWVzIFdIRVJFIGRlcGFydG1lbnQgPSAnU2FsZXMnOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>EXPLAIN ANALYZE SELECT * FROM employees WHERE department = 'Sales';</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>EXPLAIN ANALYZE</strong>: Combines <code>EXPLAIN</code> with actual execution statistics.</li>
<li><strong>Execution Time</strong>: The total time taken to execute the query.</li>
</ul>
</div><h1>Practical Exercises</h1>
<div class='content'></div><h2>Exercise 1: Creating Indexes</h2>
<div class='content'><ol>
<li>Create an index on the <code>salary</code> column of the <code>employees</code> table.</li>
<li>Use <code>EXPLAIN</code> to compare the execution plans of a query before and after creating the index.</li>
</ol>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gQmVmb3JlIGNyZWF0aW5nIHRoZSBpbmRleApFWFBMQUlOIFNFTEVDVCAqIEZST00gZW1wbG95ZWVzIFdIRVJFIHNhbGFyeSA+IDUwMDAwOwoKLS0gQ3JlYXRlIHRoZSBpbmRleApDUkVBVEUgSU5ERVggaWR4X3NhbGFyeSBPTiBlbXBsb3llZXMoc2FsYXJ5KTsKCi0tIEFmdGVyIGNyZWF0aW5nIHRoZSBpbmRleApFWFBMQUlOIFNFTEVDVCAqIEZST00gZW1wbG95ZWVzIFdIRVJFIHNhbGFyeSA+IDUwMDAwOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Before creating the index
EXPLAIN SELECT * FROM employees WHERE salary &gt; 50000;

-- Create the index
CREATE INDEX idx_salary ON employees(salary);

-- After creating the index
EXPLAIN SELECT * FROM employees WHERE salary &gt; 50000;</pre></div><div class='content'></div><h2>Exercise 2: Analyzing Query Performance</h2>
<div class='content'><ol>
<li>Use <code>EXPLAIN ANALYZE</code> to analyze the performance of a query that joins two tables.</li>
<li>Identify any potential bottlenecks and suggest optimizations.</li>
</ol>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gQW5hbHl6ZSB0aGUgcXVlcnkgcGVyZm9ybWFuY2UKRVhQTEFJTiBBTkFMWVpFClNFTEVDVCBlLm5hbWUsIGQuZGVwYXJ0bWVudF9uYW1lCkZST00gZW1wbG95ZWVzIGUKSk9JTiBkZXBhcnRtZW50cyBkIE9OIGUuZGVwYXJ0bWVudF9pZCA9IGQuaWQKV0hFUkUgZC5kZXBhcnRtZW50X25hbWUgPSAnU2FsZXMnOwoKLS0gUG90ZW50aWFsIG9wdGltaXphdGlvbnMKLS0gMS4gQ3JlYXRlIGluZGV4ZXMgb24gdGhlIGpvaW4gY29sdW1ucwpDUkVBVEUgSU5ERVggaWR4X2RlcGFydG1lbnRfaWQgT04gZW1wbG95ZWVzKGRlcGFydG1lbnRfaWQpOwpDUkVBVEUgSU5ERVggaWR4X2RlcGFydG1lbnRfbmFtZSBPTiBkZXBhcnRtZW50cyhkZXBhcnRtZW50X25hbWUpOwoKLS0gMi4gUmUtYW5hbHl6ZSB0aGUgcXVlcnkgcGVyZm9ybWFuY2UKRVhQTEFJTiBBTkFMWVpFClNFTEVDVCBlLm5hbWUsIGQuZGVwYXJ0bWVudF9uYW1lCkZST00gZW1wbG95ZWVzIGUKSk9JTiBkZXBhcnRtZW50cyBkIE9OIGUuZGVwYXJ0bWVudF9pZCA9IGQuaWQKV0hFUkUgZC5kZXBhcnRtZW50X25hbWUgPSAnU2FsZXMnOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Analyze the query performance
EXPLAIN ANALYZE
SELECT e.name, d.department_name
FROM employees e
JOIN departments d ON e.department_id = d.id
WHERE d.department_name = 'Sales';

-- Potential optimizations
-- 1. Create indexes on the join columns
CREATE INDEX idx_department_id ON employees(department_id);
CREATE INDEX idx_department_name ON departments(department_name);

-- 2. Re-analyze the query performance
EXPLAIN ANALYZE
SELECT e.name, d.department_name
FROM employees e
JOIN departments d ON e.department_id = d.id
WHERE d.department_name = 'Sales';</pre></div><div class='content'></div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Over-indexing</strong>: Creating too many indexes can slow down write operations. Only create indexes on columns that are frequently queried.</li>
<li><strong>Ignoring Statistics</strong>: Regularly update statistics using the <code>ANALYZE</code> command to ensure PostgreSQL has accurate data for query optimization.</li>
<li><strong>Complex Queries</strong>: Break down complex queries into simpler subqueries or use Common Table Expressions (CTEs) for better readability and optimization.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered the basics of query optimization in PostgreSQL, including understanding execution plans, creating and using indexes, and analyzing query performance. By applying these techniques, you can significantly improve the efficiency of your SQL queries. In the next section, we will delve into indexing strategies to further enhance query performance.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-04-transactions-and-concurrency' title="Transactions and Concurrency" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-04-transactions-and-concurrency' title="Transactions and Concurrency" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='06-02-indexing-strategies' title="Indexing Strategies" class="py-2 px-3 btn btn-primary"
				data-read-mod="postgresql" data-read-unit="6-1">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='06-02-indexing-strategies' title="Indexing Strategies" class="py-2 px-3 btn btn-primary" 
				data-read-mod="postgresql" data-read-unit="6-1">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>PostgreSQL Course</h1>
<h2>Module 1: Introduction to PostgreSQL</h2>
<ul>
<li><a href="01-01-what-is-postgresql">What is PostgreSQL?</a></li>
<li><a href="01-02-installing-postgresql">Installing PostgreSQL</a></li>
<li><a href="01-03-basic-sql-concepts">Basic SQL Concepts</a></li>
<li><a href="01-04-connecting-to-postgresql">Connecting to PostgreSQL</a></li>
</ul>
<h2>Module 2: Basic SQL Operations</h2>
<ul>
<li><a href="02-01-creating-databases-and-tables">Creating Databases and Tables</a></li>
<li><a href="02-02-inserting-data">Inserting Data</a></li>
<li><a href="02-03-querying-data">Querying Data</a></li>
<li><a href="02-04-updating-data">Updating Data</a></li>
<li><a href="02-05-deleting-data">Deleting Data</a></li>
</ul>
<h2>Module 3: Advanced SQL Queries</h2>
<ul>
<li><a href="03-01-joins">Joins</a></li>
<li><a href="03-02-subqueries">Subqueries</a></li>
<li><a href="03-03-aggregate-functions">Aggregate Functions</a></li>
<li><a href="03-04-window-functions">Window Functions</a></li>
<li><a href="03-05-common-table-expressions">Common Table Expressions (CTEs)</a></li>
</ul>
<h2>Module 4: Database Design and Normalization</h2>
<ul>
<li><a href="04-01-database-design-principles">Database Design Principles</a></li>
<li><a href="04-02-normalization">Normalization</a></li>
<li><a href="04-03-primary-and-foreign-keys">Primary and Foreign Keys</a></li>
<li><a href="04-04-indexes">Indexes</a></li>
</ul>
<h2>Module 5: Advanced PostgreSQL Features</h2>
<ul>
<li><a href="05-01-views">Views</a></li>
<li><a href="05-02-triggers">Triggers</a></li>
<li><a href="05-03-stored-procedures-and-functions">Stored Procedures and Functions</a></li>
<li><a href="05-04-transactions-and-concurrency">Transactions and Concurrency</a></li>
</ul>
<h2>Module 6: Performance Tuning and Optimization</h2>
<ul>
<li><a href="06-01-query-optimization">Query Optimization</a></li>
<li><a href="06-02-indexing-strategies">Indexing Strategies</a></li>
<li><a href="06-03-analyzing-query-performance">Analyzing Query Performance</a></li>
<li><a href="06-04-vacuuming-and-maintenance">Vacuuming and Maintenance</a></li>
</ul>
<h2>Module 7: Security and User Management</h2>
<ul>
<li><a href="07-01-user-roles-and-permissions">User Roles and Permissions</a></li>
<li><a href="07-02-authentication-methods">Authentication Methods</a></li>
<li><a href="07-03-data-encryption">Data Encryption</a></li>
<li><a href="07-04-backup-and-restore">Backup and Restore</a></li>
</ul>
<h2>Module 8: Working with JSON and NoSQL Features</h2>
<ul>
<li><a href="08-01-json-data-types">JSON Data Types</a></li>
<li><a href="08-02-json-functions-and-operators">JSON Functions and Operators</a></li>
<li><a href="08-03-using-postgresql-as-nosql">Using PostgreSQL as a NoSQL Database</a></li>
</ul>
<h2>Module 9: Extensions and Advanced Tools</h2>
<ul>
<li><a href="09-01-postgis-for-geospatial-data">PostGIS for Geospatial Data</a></li>
<li><a href="09-02-full-text-search">Full-Text Search</a></li>
<li><a href="09-03-foreign-data-wrappers">Foreign Data Wrappers</a></li>
<li><a href="09-04-plpgsql-and-other-procedural-languages">PL/pgSQL and Other Procedural Languages</a></li>
</ul>
<h2>Module 10: Case Studies and Real-World Applications</h2>
<ul>
<li><a href="10-01-e-commerce-database-design">E-commerce Database Design</a></li>
<li><a href="10-02-data-warehousing-with-postgresql">Data Warehousing with PostgreSQL</a></li>
<li><a href="10-03-handling-big-data">Handling Big Data</a></li>
<li><a href="10-04-postgresql-in-microservices-architecture">PostgreSQL in Microservices Architecture</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<p id="loginModalEmail"></p>
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
