<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disk Management</title>

    <link rel="alternate" href="https://campusempresa.com/mod/linux/05-02-disk-management" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/linux/05-02-gestio-de-discs" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/linux/05-02-disk-management" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/linux/05-02-disk-management" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/linux/05-02-gestio-de-discs" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-01-user-and-group-management' title="User and Group Management">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Disk Management</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-03-package-management' title="Package Management">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Disk management is a crucial aspect of system administration. It involves managing disk space, partitions, file systems, and ensuring data integrity. This section will cover the following key topics:</p>
<ol>
<li><strong>Understanding Disk Partitions</strong></li>
<li><strong>Creating and Managing Partitions</strong></li>
<li><strong>File Systems and Formatting</strong></li>
<li><strong>Mounting and Unmounting File Systems</strong></li>
<li><strong>Disk Usage and Quotas</strong></li>
<li><strong>Practical Exercises</strong></li>
</ol>
</div><h1>1. Understanding Disk Partitions</h1>
<div class='content'><p>Disk partitions are subdivisions of a physical disk drive. Each partition can be managed separately and can contain different file systems. Understanding partitions is essential for organizing data and optimizing disk usage.</p>
</div><h2>Key Concepts:</h2>
<div class='content'><ul>
<li><strong>Primary Partitions</strong>: The main partitions on a disk. A disk can have up to four primary partitions.</li>
<li><strong>Extended Partitions</strong>: A type of primary partition that can contain multiple logical partitions.</li>
<li><strong>Logical Partitions</strong>: Partitions within an extended partition.</li>
</ul>
</div><h2>Example:</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18CnwgUHJpbWFyeSB8IFByaW1hcnkgfCBFeHRlbmRlZCB8CnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfAp8IExvZ2ljYWwgfCBMb2dpY2FsIHwgTG9naWNhbCB8CnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>|-------------------------|
| Primary | Primary | Extended |
|-------------------------|
| Logical | Logical | Logical |
|-------------------------|</pre></div><div class='content'></div><h1>2. Creating and Managing Partitions</h1>
<div class='content'></div><h2>Tools:</h2>
<div class='content'><ul>
<li><strong>fdisk</strong>: A command-line utility for managing disk partitions.</li>
<li><strong>parted</strong>: A more advanced tool for managing partitions.</li>
</ul>
</div><h2>Example: Using `fdisk`</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBmZGlzayAvZGV2L3NkYQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo fdisk /dev/sda</pre></div><div class='content'><ul>
<li><strong>Command Explanation</strong>:
<ul>
<li><code>n</code>: Create a new partition.</li>
<li><code>p</code>: Print the partition table.</li>
<li><code>d</code>: Delete a partition.</li>
<li><code>w</code>: Write changes to disk and exit.</li>
</ul>
</li>
</ul>
</div><h2>Example: Using `parted`</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBwYXJ0ZWQgL2Rldi9zZGE="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo parted /dev/sda</pre></div><div class='content'><ul>
<li><strong>Command Explanation</strong>:
<ul>
<li><code>mklabel gpt</code>: Create a new GPT partition table.</li>
<li><code>mkpart primary ext4 1MiB 100%</code>: Create a new primary partition with ext4 file system.</li>
<li><code>print</code>: Display the partition table.</li>
</ul>
</li>
</ul>
</div><h1>3. File Systems and Formatting</h1>
<div class='content'></div><h2>Common File Systems:</h2>
<div class='content'><ul>
<li><strong>ext4</strong>: The default file system for many Linux distributions.</li>
<li><strong>xfs</strong>: A high-performance file system.</li>
<li><strong>btrfs</strong>: A modern file system with advanced features.</li>
</ul>
</div><h2>Formatting a Partition:</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBta2ZzLmV4dDQgL2Rldi9zZGEx"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo mkfs.ext4 /dev/sda1</pre></div><div class='content'><ul>
<li><strong>Command Explanation</strong>:
<ul>
<li><code>mkfs.ext4</code>: Format the partition with the ext4 file system.</li>
<li><code>/dev/sda1</code>: The partition to format.</li>
</ul>
</li>
</ul>
</div><h1>4. Mounting and Unmounting File Systems</h1>
<div class='content'></div><h2>Mounting:</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBtb3VudCAvZGV2L3NkYTEgL21udA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo mount /dev/sda1 /mnt</pre></div><div class='content'><ul>
<li><strong>Command Explanation</strong>:
<ul>
<li><code>mount</code>: Mount a file system.</li>
<li><code>/dev/sda1</code>: The partition to mount.</li>
<li><code>/mnt</code>: The directory to mount the partition to.</li>
</ul>
</li>
</ul>
</div><h2>Unmounting:</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyB1bW91bnQgL21udA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo umount /mnt</pre></div><div class='content'><ul>
<li><strong>Command Explanation</strong>:
<ul>
<li><code>umount</code>: Unmount a file system.</li>
<li><code>/mnt</code>: The directory where the file system is mounted.</li>
</ul>
</li>
</ul>
</div><h2>Persistent Mounts:</h2>
<div class='content'><p>To make mounts persistent across reboots, add entries to <code>/etc/fstab</code>.</p>
</div><h2>Example `/etc/fstab` Entry:</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("L2Rldi9zZGExIC9tbnQgZXh0NCBkZWZhdWx0cyAwIDI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>/dev/sda1 /mnt ext4 defaults 0 2</pre></div><div class='content'></div><h1>5. Disk Usage and Quotas</h1>
<div class='content'></div><h2>Checking Disk Usage:</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGYgLWg="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>df -h</pre></div><div class='content'><ul>
<li><strong>Command Explanation</strong>:
<ul>
<li><code>df</code>: Display disk space usage.</li>
<li><code>-h</code>: Human-readable format.</li>
</ul>
</li>
</ul>
</div><h2>Setting Up Quotas:</h2>
<div class='content'><ol>
<li>
<p><strong>Install Quota Tools</strong>:</p>
<pre><code class="language-bash">sudo apt-get install quota
</code></pre>
</li>
<li>
<p><strong>Edit <code>/etc/fstab</code></strong>:
Add <code>usrquota</code> and/or <code>grpquota</code> to the relevant partition.</p>
<pre><code class="language-plaintext">/dev/sda1 /mnt ext4 defaults,usrquota,grpquota 0 2
</code></pre>
</li>
<li>
<p><strong>Remount the File System</strong>:</p>
<pre><code class="language-bash">sudo mount -o remount /mnt
</code></pre>
</li>
<li>
<p><strong>Initialize Quota Database</strong>:</p>
<pre><code class="language-bash">sudo quotacheck -cug /mnt
</code></pre>
</li>
<li>
<p><strong>Enable Quotas</strong>:</p>
<pre><code class="language-bash">sudo quotaon /mnt
</code></pre>
</li>
<li>
<p><strong>Set Quotas</strong>:</p>
<pre><code class="language-bash">sudo edquota -u username
</code></pre>
</li>
</ol>
</div><h1>6. Practical Exercises</h1>
<div class='content'></div><h2>Exercise 1: Create and Format a Partition</h2>
<div class='content'><ol>
<li>Use <code>fdisk</code> to create a new partition on <code>/dev/sdb</code>.</li>
<li>Format the partition with the ext4 file system.</li>
<li>Mount the partition to <code>/mnt/data</code>.</li>
</ol>
</div><h2>Solution:</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBmZGlzayAvZGV2L3NkYgojIEZvbGxvdyBwcm9tcHRzIHRvIGNyZWF0ZSBhIG5ldyBwYXJ0aXRpb24Kc3VkbyBta2ZzLmV4dDQgL2Rldi9zZGIxCnN1ZG8gbW91bnQgL2Rldi9zZGIxIC9tbnQvZGF0YQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo fdisk /dev/sdb
# Follow prompts to create a new partition
sudo mkfs.ext4 /dev/sdb1
sudo mount /dev/sdb1 /mnt/data</pre></div><div class='content'></div><h2>Exercise 2: Set Up Disk Quotas</h2>
<div class='content'><ol>
<li>Install quota tools.</li>
<li>Edit <code>/etc/fstab</code> to enable user quotas on <code>/mnt/data</code>.</li>
<li>Initialize and enable quotas.</li>
<li>Set a quota for a user.</li>
</ol>
</div><h2>Solution:</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3VkbyBhcHQtZ2V0IGluc3RhbGwgcXVvdGEKc3VkbyBuYW5vIC9ldGMvZnN0YWIKIyBBZGQgdXNycXVvdGEgdG8gdGhlIHJlbGV2YW50IHBhcnRpdGlvbgpzdWRvIG1vdW50IC1vIHJlbW91bnQgL21udC9kYXRhCnN1ZG8gcXVvdGFjaGVjayAtY3VnIC9tbnQvZGF0YQpzdWRvIHF1b3Rhb24gL21udC9kYXRhCnN1ZG8gZWRxdW90YSAtdSB1c2VybmFtZQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sudo apt-get install quota
sudo nano /etc/fstab
# Add usrquota to the relevant partition
sudo mount -o remount /mnt/data
sudo quotacheck -cug /mnt/data
sudo quotaon /mnt/data
sudo edquota -u username</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered the essentials of disk management, including understanding partitions, creating and managing partitions, formatting file systems, mounting and unmounting file systems, and setting up disk quotas. Mastering these skills is crucial for effective system administration and ensuring optimal disk usage and data integrity. In the next section, we will delve into package management, another critical aspect of maintaining a Linux system.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-01-user-and-group-management' title="User and Group Management">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-03-package-management' title="Package Management">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
