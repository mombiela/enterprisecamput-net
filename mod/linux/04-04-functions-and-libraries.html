<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Functions and Libraries</title>

    <link rel="alternate" href="https://campusempresa.com/mod/linux/04-04-functions-and-libraries" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/linux/04-04-funcions-i-biblioteques" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/linux/04-04-functions-and-libraries" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/linux/04-04-functions-and-libraries" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/linux/04-04-functions-and-libraries" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='04-03-control-structures' title="Control Structures">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Functions and Libraries</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='04-05-debugging-and-error-handling' title="Debugging and Error Handling">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will delve into the concepts of functions and libraries in shell scripting. Functions allow you to encapsulate code into reusable blocks, making your scripts more modular and easier to maintain. Libraries, on the other hand, are collections of functions that can be shared across multiple scripts.</p>
</div><h1>1. Introduction to Functions</h1>
<div class='content'></div><h2>What is a Function?</h2>
<div class='content'><p>A function is a block of code that performs a specific task and can be reused multiple times within a script. Functions help in organizing code, making it more readable and maintainable.</p>
</div><h2>Defining a Function</h2>
<div class='content'><p>To define a function in a shell script, you use the following syntax:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb25fbmFtZSgpIHsKICAgICMgQ29kZSB0byBiZSBleGVjdXRlZAp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function_name() {
    # Code to be executed
}</pre></div><div class='content'></div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z3JlZXQoKSB7CiAgICBlY2hvICJIZWxsbywgJDEhIgp9CgojIENhbGxpbmcgdGhlIGZ1bmN0aW9uCmdyZWV0ICJXb3JsZCI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>greet() {
    echo &quot;Hello, $1!&quot;
}

# Calling the function
greet &quot;World&quot;</pre></div><div class='content'><p>In this example, the <code>greet</code> function takes one argument and prints a greeting message.</p>
</div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>greet</code> is the name of the function.</li>
<li><code>$1</code> is a positional parameter that represents the first argument passed to the function.</li>
<li><code>echo &quot;Hello, $1!&quot;</code> prints the greeting message.</li>
</ul>
</div><h1>2. Using Functions</h1>
<div class='content'></div><h2>Calling a Function</h2>
<div class='content'><p>To call a function, simply use its name followed by any required arguments:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z3JlZXQgIkFsaWNlIg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>greet &quot;Alice&quot;</pre></div><div class='content'></div><h2>Returning Values from Functions</h2>
<div class='content'><p>Functions can return values using the <code>return</code> statement. The return value is an integer between 0 and 255.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YWRkKCkgewogICAgbG9jYWwgc3VtPSQoKCAkMSArICQyICkpCiAgICByZXR1cm4gJHN1bQp9CgojIENhbGxpbmcgdGhlIGZ1bmN0aW9uCmFkZCAzIDUKcmVzdWx0PSQ/CmVjaG8gIlRoZSBzdW0gaXMgJHJlc3VsdCI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>add() {
    local sum=$(( $1 + $2 ))
    return $sum
}

# Calling the function
add 3 5
result=$?
echo &quot;The sum is $result&quot;</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>local sum=$(( $1 + $2 ))</code> calculates the sum of the two arguments.</li>
<li><code>return $sum</code> returns the sum.</li>
<li><code>$?</code> captures the return value of the last executed command, which is the function in this case.</li>
</ul>
</div><h1>3. Libraries</h1>
<div class='content'></div><h2>What is a Library?</h2>
<div class='content'><p>A library is a file containing a collection of functions that can be included in other scripts. This promotes code reuse and modularity.</p>
</div><h2>Creating a Library</h2>
<div class='content'><p>Create a file named <code>mylib.sh</code> with the following content:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBteWxpYi5zaAoKZ3JlZXQoKSB7CiAgICBlY2hvICJIZWxsbywgJDEhIgp9CgphZGQoKSB7CiAgICBlY2hvICQoKCAkMSArICQyICkpCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># mylib.sh

greet() {
    echo &quot;Hello, $1!&quot;
}

add() {
    echo $(( $1 + $2 ))
}</pre></div><div class='content'></div><h2>Using a Library</h2>
<div class='content'><p>To use the functions defined in <code>mylib.sh</code>, you can source the library file in your script:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyEvYmluL2Jhc2gKCiMgU291cmNlIHRoZSBsaWJyYXJ5CnNvdXJjZSAuL215bGliLnNoCgojIENhbGwgdGhlIGZ1bmN0aW9ucwpncmVldCAiQm9iIgpzdW09JChhZGQgNCA2KQplY2hvICJUaGUgc3VtIGlzICRzdW0i"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#!/bin/bash

# Source the library
source ./mylib.sh

# Call the functions
greet &quot;Bob&quot;
sum=$(add 4 6)
echo &quot;The sum is $sum&quot;</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>source ./mylib.sh</code> includes the functions defined in <code>mylib.sh</code> into the current script.</li>
<li><code>greet &quot;Bob&quot;</code> calls the <code>greet</code> function from the library.</li>
<li><code>sum=$(add 4 6)</code> calls the <code>add</code> function and stores the result in the <code>sum</code> variable.</li>
</ul>
</div><h1>4. Practical Exercises</h1>
<div class='content'></div><h2>Exercise 1: Create and Use a Function</h2>
<div class='content'><p><strong>Task:</strong> Write a function named <code>factorial</code> that calculates the factorial of a given number.</p>
<p><strong>Solution:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZmFjdG9yaWFsKCkgewogICAgaWYgWyAkMSAtbGUgMSBdOyB0aGVuCiAgICAgICAgZWNobyAxCiAgICBlbHNlCiAgICAgICAgbG9jYWwgdGVtcD0kKCggJDEgLSAxICkpCiAgICAgICAgbG9jYWwgcmVzdWx0PSQoZmFjdG9yaWFsICR0ZW1wKQogICAgICAgIGVjaG8gJCgoICQxICogcmVzdWx0ICkpCiAgICBmaQp9CgojIFRlc3QgdGhlIGZ1bmN0aW9uCnJlc3VsdD0kKGZhY3RvcmlhbCA1KQplY2hvICJGYWN0b3JpYWwgb2YgNSBpcyAkcmVzdWx0Ig=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>factorial() {
    if [ $1 -le 1 ]; then
        echo 1
    else
        local temp=$(( $1 - 1 ))
        local result=$(factorial $temp)
        echo $(( $1 * result ))
    fi
}

# Test the function
result=$(factorial 5)
echo &quot;Factorial of 5 is $result&quot;</pre></div><div class='content'></div><h2>Exercise 2: Create and Use a Library</h2>
<div class='content'><p><strong>Task:</strong> Create a library file named <code>mathlib.sh</code> with functions for addition, subtraction, multiplication, and division. Use this library in a script.</p>
<p><strong>Solution:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBtYXRobGliLnNoCgphZGQoKSB7CiAgICBlY2hvICQoKCAkMSArICQyICkpCn0KCnN1YnRyYWN0KCkgewogICAgZWNobyAkKCggJDEgLSAkMiApKQp9CgptdWx0aXBseSgpIHsKICAgIGVjaG8gJCgoICQxICogJDIgKSkKfQoKZGl2aWRlKCkgewogICAgaWYgWyAkMiAtbmUgMCBdOyB0aGVuCiAgICAgICAgZWNobyAkKCggJDEgLyAkMiApKQogICAgZWxzZQogICAgICAgIGVjaG8gIkRpdmlzaW9uIGJ5IHplcm8gZXJyb3IiCiAgICBmaQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># mathlib.sh

add() {
    echo $(( $1 + $2 ))
}

subtract() {
    echo $(( $1 - $2 ))
}

multiply() {
    echo $(( $1 * $2 ))
}

divide() {
    if [ $2 -ne 0 ]; then
        echo $(( $1 / $2 ))
    else
        echo &quot;Division by zero error&quot;
    fi
}</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyEvYmluL2Jhc2gKCiMgU291cmNlIHRoZSBsaWJyYXJ5CnNvdXJjZSAuL21hdGhsaWIuc2gKCiMgVGVzdCB0aGUgZnVuY3Rpb25zCnN1bT0kKGFkZCAxMCA1KQpkaWZmPSQoc3VidHJhY3QgMTAgNSkKcHJvZD0kKG11bHRpcGx5IDEwIDUpCnF1b3Q9JChkaXZpZGUgMTAgNSkKCmVjaG8gIlN1bTogJHN1bSIKZWNobyAiRGlmZmVyZW5jZTogJGRpZmYiCmVjaG8gIlByb2R1Y3Q6ICRwcm9kIgplY2hvICJRdW90aWVudDogJHF1b3Qi"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#!/bin/bash

# Source the library
source ./mathlib.sh

# Test the functions
sum=$(add 10 5)
diff=$(subtract 10 5)
prod=$(multiply 10 5)
quot=$(divide 10 5)

echo &quot;Sum: $sum&quot;
echo &quot;Difference: $diff&quot;
echo &quot;Product: $prod&quot;
echo &quot;Quotient: $quot&quot;</pre></div><div class='content'></div><h1>5. Common Mistakes and Tips</h1>
<div class='content'></div><h2>Common Mistakes</h2>
<div class='content'><ul>
<li><strong>Forgetting to source the library:</strong> Ensure you use the <code>source</code> command to include the library in your script.</li>
<li><strong>Incorrect function names:</strong> Make sure the function names are unique and do not conflict with built-in commands.</li>
</ul>
</div><h2>Tips</h2>
<div class='content'><ul>
<li><strong>Use local variables:</strong> Use <code>local</code> to define variables within functions to avoid conflicts with global variables.</li>
<li><strong>Modularize your code:</strong> Break down complex tasks into smaller functions for better readability and maintainability.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered the basics of functions and libraries in shell scripting. Functions help in organizing and reusing code, while libraries allow you to share functions across multiple scripts. By mastering these concepts, you can write more efficient and maintainable shell scripts. In the next section, we will explore debugging and error handling techniques to further enhance your scripting skills.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='04-03-control-structures' title="Control Structures">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='04-05-debugging-and-error-handling' title="Debugging and Error Handling">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
