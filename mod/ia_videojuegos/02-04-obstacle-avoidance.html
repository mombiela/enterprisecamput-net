<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obstacle Avoidance</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ia_videojuegos/02-04-evitacion-obstaculos" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ia_videojuegos/02-04-evitacio-obstacles" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ia_videojuegos/02-04-obstacle-avoidance" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/ia_videojuegos/02-04-evitacion-obstaculos" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/ia_videojuegos/02-04-evitacio-obstacles" class="px-2">CA</a>
					</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='02-03-navigation-navmesh' title="Navigation with NavMesh">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Obstacle Avoidance</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='03-01-finite-state-machines' title="Finite State Machines (FSM)">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introduction</p>
</h1>
<div class='content'><p>Obstacle avoidance is a crucial aspect of AI in video games, ensuring that characters can navigate environments smoothly without colliding with static or dynamic obstacles. This topic will cover the fundamental concepts, algorithms, and practical implementations of obstacle avoidance in video games.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Static vs. Dynamic Obstacles</strong>:</p>
<ul>
<li><strong>Static Obstacles</strong>: These are fixed in place and do not move (e.g., walls, buildings).</li>
<li><strong>Dynamic Obstacles</strong>: These can move and change position over time (e.g., other characters, moving platforms).</li>
</ul>
</li>
<li>
<p><strong>Collision Detection</strong>:</p>
<ul>
<li>The process of determining when a character is about to collide with an obstacle.</li>
</ul>
</li>
<li>
<p><strong>Steering Behaviors</strong>:</p>
<ul>
<li>Algorithms that adjust the character's path to avoid obstacles while maintaining a smooth trajectory.</li>
</ul>
</li>
</ol>
</div><h1><p>Common Algorithms</p>
</h1>
<div class='content'></div><h2><ol>
<li><strong>Raycasting</strong></li>
</ol>
</h2>
<div class='content'><p>Raycasting involves projecting a ray from the character's position in the direction of movement to detect potential collisions.</p>
<p><strong>Example</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIHJheWNhc3QocG9zaXRpb24sIGRpcmVjdGlvbiwgb2JzdGFjbGVzKToKICAgIGZvciBvYnN0YWNsZSBpbiBvYnN0YWNsZXM6CiAgICAgICAgaWYgaW50ZXJzZWN0cyhwb3NpdGlvbiwgZGlyZWN0aW9uLCBvYnN0YWNsZSk6CiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICByZXR1cm4gRmFsc2UKCmRlZiBpbnRlcnNlY3RzKHBvc2l0aW9uLCBkaXJlY3Rpb24sIG9ic3RhY2xlKToKICAgICMgU2ltcGxpZmllZCBpbnRlcnNlY3Rpb24gbG9naWMKICAgIHJldHVybiBvYnN0YWNsZS5jb250YWlucyhwb3NpdGlvbiArIGRpcmVjdGlvbik="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def raycast(position, direction, obstacles):
    for obstacle in obstacles:
        if intersects(position, direction, obstacle):
            return True
    return False

def intersects(position, direction, obstacle):
    # Simplified intersection logic
    return obstacle.contains(position + direction)</pre></div><div class='content'></div><h2><ol start="2">
<li><strong>Vector Field Histogram (VFH)</strong></li>
</ol>
</h2>
<div class='content'><p>VFH is used to create a histogram grid around the character, representing the density of obstacles. The character then navigates through the least dense areas.</p>
<p><strong>Example</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIGNyZWF0ZV9oaXN0b2dyYW1fZ3JpZChwb3NpdGlvbiwgb2JzdGFjbGVzLCBncmlkX3NpemUpOgogICAgaGlzdG9ncmFtID0gW1swIGZvciBfIGluIHJhbmdlKGdyaWRfc2l6ZSldIGZvciBfIGluIHJhbmdlKGdyaWRfc2l6ZSldCiAgICBmb3Igb2JzdGFjbGUgaW4gb2JzdGFjbGVzOgogICAgICAgIHgsIHkgPSBvYnN0YWNsZS5wb3NpdGlvbgogICAgICAgIGhpc3RvZ3JhbVt4XVt5XSArPSAxCiAgICByZXR1cm4gaGlzdG9ncmFtCgpkZWYgZmluZF9jbGVhcl9wYXRoKGhpc3RvZ3JhbSk6CiAgICAjIFNpbXBsaWZpZWQgcGF0aGZpbmRpbmcgbG9naWMKICAgIGZvciByb3cgaW4gaGlzdG9ncmFtOgogICAgICAgIGZvciBjZWxsIGluIHJvdzoKICAgICAgICAgICAgaWYgY2VsbCA9PSAwOgogICAgICAgICAgICAgICAgcmV0dXJuIGNlbGwucG9zaXRpb24KICAgIHJldHVybiBOb25l"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def create_histogram_grid(position, obstacles, grid_size):
    histogram = [[0 for _ in range(grid_size)] for _ in range(grid_size)]
    for obstacle in obstacles:
        x, y = obstacle.position
        histogram[x][y] += 1
    return histogram

def find_clear_path(histogram):
    # Simplified pathfinding logic
    for row in histogram:
        for cell in row:
            if cell == 0:
                return cell.position
    return None</pre></div><div class='content'></div><h2><ol start="3">
<li><strong>Potential Fields</strong></li>
</ol>
</h2>
<div class='content'><p>Potential fields treat obstacles as repulsive forces and the goal as an attractive force, guiding the character through a gradient descent.</p>
<p><strong>Example</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIGNhbGN1bGF0ZV9wb3RlbnRpYWxfZmllbGQocG9zaXRpb24sIGdvYWwsIG9ic3RhY2xlcyk6CiAgICBmaWVsZCA9IHt9CiAgICBmb3IgeCBpbiByYW5nZSgtMTAsIDEwKToKICAgICAgICBmb3IgeSBpbiByYW5nZSgtMTAsIDEwKToKICAgICAgICAgICAgcG9zID0gKHBvc2l0aW9uWzBdICsgeCwgcG9zaXRpb25bMV0gKyB5KQogICAgICAgICAgICBmaWVsZFtwb3NdID0gY2FsY3VsYXRlX3BvdGVudGlhbChwb3MsIGdvYWwsIG9ic3RhY2xlcykKICAgIHJldHVybiBmaWVsZAoKZGVmIGNhbGN1bGF0ZV9wb3RlbnRpYWwocG9zLCBnb2FsLCBvYnN0YWNsZXMpOgogICAgYXR0cmFjdGlvbiA9IGRpc3RhbmNlKHBvcywgZ29hbCkKICAgIHJlcHVsc2lvbiA9IHN1bShbMSAvIGRpc3RhbmNlKHBvcywgb2JzLnBvc2l0aW9uKSBmb3Igb2JzIGluIG9ic3RhY2xlc10pCiAgICByZXR1cm4gYXR0cmFjdGlvbiAtIHJlcHVsc2lvbg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def calculate_potential_field(position, goal, obstacles):
    field = {}
    for x in range(-10, 10):
        for y in range(-10, 10):
            pos = (position[0] + x, position[1] + y)
            field[pos] = calculate_potential(pos, goal, obstacles)
    return field

def calculate_potential(pos, goal, obstacles):
    attraction = distance(pos, goal)
    repulsion = sum([1 / distance(pos, obs.position) for obs in obstacles])
    return attraction - repulsion</pre></div><div class='content'></div><h1><p>Practical Implementation</p>
</h1>
<div class='content'></div><h2><p>Example: Simple Obstacle Avoidance in Unity</p>
</h2>
<div class='content'><p><strong>Step-by-Step Guide</strong>:</p>
<ol>
<li>
<p><strong>Setup the Scene</strong>:</p>
<ul>
<li>Create a character (e.g., a sphere) and obstacles (e.g., cubes) in Unity.</li>
</ul>
</li>
<li>
<p><strong>Attach a Script to the Character</strong>:</p>
<ul>
<li>Create a C# script to handle obstacle avoidance.</li>
</ul>
</li>
</ol>
<p><strong>C# Script</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgVW5pdHlFbmdpbmU7CgpwdWJsaWMgY2xhc3MgT2JzdGFjbGVBdm9pZGFuY2UgOiBNb25vQmVoYXZpb3VyCnsKICAgIHB1YmxpYyBmbG9hdCBzcGVlZCA9IDUuMGY7CiAgICBwdWJsaWMgZmxvYXQgZGV0ZWN0aW9uUmFkaXVzID0gMi4wZjsKICAgIHB1YmxpYyBMYXllck1hc2sgb2JzdGFjbGVMYXllcjsKCiAgICB2b2lkIFVwZGF0ZSgpCiAgICB7CiAgICAgICAgVmVjdG9yMyBkaXJlY3Rpb24gPSB0cmFuc2Zvcm0uZm9yd2FyZDsKICAgICAgICBSYXljYXN0SGl0IGhpdDsKCiAgICAgICAgaWYgKFBoeXNpY3MuU3BoZXJlQ2FzdCh0cmFuc2Zvcm0ucG9zaXRpb24sIGRldGVjdGlvblJhZGl1cywgZGlyZWN0aW9uLCBvdXQgaGl0LCBkZXRlY3Rpb25SYWRpdXMsIG9ic3RhY2xlTGF5ZXIpKQogICAgICAgIHsKICAgICAgICAgICAgVmVjdG9yMyBhdm9pZERpcmVjdGlvbiA9IFZlY3RvcjMuUmVmbGVjdChkaXJlY3Rpb24sIGhpdC5ub3JtYWwpOwogICAgICAgICAgICB0cmFuc2Zvcm0ucG9zaXRpb24gKz0gYXZvaWREaXJlY3Rpb24gKiBzcGVlZCAqIFRpbWUuZGVsdGFUaW1lOwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICB0cmFuc2Zvcm0ucG9zaXRpb24gKz0gZGlyZWN0aW9uICogc3BlZWQgKiBUaW1lLmRlbHRhVGltZTsKICAgICAgICB9CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using UnityEngine;

public class ObstacleAvoidance : MonoBehaviour
{
    public float speed = 5.0f;
    public float detectionRadius = 2.0f;
    public LayerMask obstacleLayer;

    void Update()
    {
        Vector3 direction = transform.forward;
        RaycastHit hit;

        if (Physics.SphereCast(transform.position, detectionRadius, direction, out hit, detectionRadius, obstacleLayer))
        {
            Vector3 avoidDirection = Vector3.Reflect(direction, hit.normal);
            transform.position += avoidDirection * speed * Time.deltaTime;
        }
        else
        {
            transform.position += direction * speed * Time.deltaTime;
        }
    }
}</pre></div><div class='content'><ol start="3">
<li><strong>Test and Adjust</strong>:
<ul>
<li>Run the scene and adjust parameters like <code>speed</code> and <code>detectionRadius</code> to fine-tune the avoidance behavior.</li>
</ul>
</li>
</ol>
</div><h1><p>Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Implement Raycasting for Obstacle Detection</p>
</h2>
<div class='content'><p><strong>Task</strong>: Write a function that uses raycasting to detect obstacles and adjust the character's path.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIHJheWNhc3RfYXZvaWRhbmNlKHBvc2l0aW9uLCBkaXJlY3Rpb24sIG9ic3RhY2xlcyk6CiAgICBmb3Igb2JzdGFjbGUgaW4gb2JzdGFjbGVzOgogICAgICAgIGlmIGludGVyc2VjdHMocG9zaXRpb24sIGRpcmVjdGlvbiwgb2JzdGFjbGUpOgogICAgICAgICAgICAjIEFkanVzdCBkaXJlY3Rpb24gdG8gYXZvaWQgb2JzdGFjbGUKICAgICAgICAgICAgbmV3X2RpcmVjdGlvbiA9IHJlZmxlY3QoZGlyZWN0aW9uLCBvYnN0YWNsZS5ub3JtYWwpCiAgICAgICAgICAgIHJldHVybiBuZXdfZGlyZWN0aW9uCiAgICByZXR1cm4gZGlyZWN0aW9uCgpkZWYgcmVmbGVjdChkaXJlY3Rpb24sIG5vcm1hbCk6CiAgICByZXR1cm4gZGlyZWN0aW9uIC0gMiAqIChkaXJlY3Rpb24uZG90KG5vcm1hbCkpICogbm9ybWFs"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def raycast_avoidance(position, direction, obstacles):
    for obstacle in obstacles:
        if intersects(position, direction, obstacle):
            # Adjust direction to avoid obstacle
            new_direction = reflect(direction, obstacle.normal)
            return new_direction
    return direction

def reflect(direction, normal):
    return direction - 2 * (direction.dot(normal)) * normal</pre></div><div class='content'></div><h2><p>Exercise 2: Create a Potential Field for Navigation</p>
</h2>
<div class='content'><p><strong>Task</strong>: Implement a potential field algorithm to navigate a character through a grid with obstacles.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIG5hdmlnYXRlX3dpdGhfcG90ZW50aWFsX2ZpZWxkKHBvc2l0aW9uLCBnb2FsLCBvYnN0YWNsZXMpOgogICAgZmllbGQgPSBjYWxjdWxhdGVfcG90ZW50aWFsX2ZpZWxkKHBvc2l0aW9uLCBnb2FsLCBvYnN0YWNsZXMpCiAgICBtaW5fcG90ZW50aWFsID0gZmxvYXQoJ2luZicpCiAgICBiZXN0X3Bvc2l0aW9uID0gcG9zaXRpb24KCiAgICBmb3IgcG9zLCBwb3RlbnRpYWwgaW4gZmllbGQuaXRlbXMoKToKICAgICAgICBpZiBwb3RlbnRpYWwgPCBtaW5fcG90ZW50aWFsOgogICAgICAgICAgICBtaW5fcG90ZW50aWFsID0gcG90ZW50aWFsCiAgICAgICAgICAgIGJlc3RfcG9zaXRpb24gPSBwb3MKCiAgICByZXR1cm4gYmVzdF9wb3NpdGlvbg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def navigate_with_potential_field(position, goal, obstacles):
    field = calculate_potential_field(position, goal, obstacles)
    min_potential = float('inf')
    best_position = position

    for pos, potential in field.items():
        if potential &lt; min_potential:
            min_potential = potential
            best_position = pos

    return best_position</pre></div><div class='content'></div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Ignoring Dynamic Obstacles</strong>:</p>
<ul>
<li>Ensure your algorithm accounts for moving obstacles to avoid collisions in real-time.</li>
</ul>
</li>
<li>
<p><strong>Overcomplicating the Algorithm</strong>:</p>
<ul>
<li>Start with simple algorithms and gradually add complexity as needed.</li>
</ul>
</li>
<li>
<p><strong>Not Testing in Diverse Scenarios</strong>:</p>
<ul>
<li>Test your obstacle avoidance in various environments to ensure robustness.</li>
</ul>
</li>
</ol>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>Obstacle avoidance is a vital component of AI in video games, enabling characters to navigate environments smoothly. By understanding and implementing algorithms like raycasting, vector field histograms, and potential fields, you can create intelligent behaviors that enhance the gaming experience. Practice with the provided exercises to solidify your understanding and prepare for more advanced topics in AI for video games.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='02-03-navigation-navmesh' title="Navigation with NavMesh">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='03-01-finite-state-machines' title="Finite State Machines (FSM)">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
