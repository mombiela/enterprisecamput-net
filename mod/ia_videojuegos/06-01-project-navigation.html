<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 1: Implementation of Basic Navigation</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ia_videojuegos/06-01-proyecto-navegacion" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ia_videojuegos/06-01-projecte-navegacio" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ia_videojuegos/06-01-project-navigation" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/ia_videojuegos/06-01-proyecto-navegacion" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/ia_videojuegos/06-01-projecte-navegacio" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-03-testing-debugging' title="AI Testing and Debugging">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Project 1: Implementation of Basic Navigation</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-project-npc' title="Project 2: Creation of an NPC with Decision Making">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this project, you will implement basic navigation for a game character using pathfinding algorithms. This will involve creating a grid-based map, implementing the A* algorithm, and enabling the character to navigate from a start point to a goal point while avoiding obstacles.</p>
</div><h1><p>Objectives</p>
</h1>
<div class='content'><ul>
<li>Understand the basics of grid-based navigation.</li>
<li>Implement the A* pathfinding algorithm.</li>
<li>Enable a game character to navigate a map with obstacles.</li>
</ul>
</div><h1><p>Prerequisites</p>
</h1>
<div class='content'><p>Before starting this project, ensure you have completed the following modules:</p>
<ul>
<li><a href="02-01-pathfinding-algorithms">Pathfinding Algorithms</a></li>
<li><a href="02-02-a-star-implementation">A* Implementation</a></li>
<li><a href="02-03-navigation-navmesh">Navigation with NavMesh</a></li>
</ul>
</div><h1><p>Step-by-Step Guide</p>
</h1>
<div class='content'></div><h2><p>Step 1: Setting Up the Environment</p>
</h2>
<div class='content'><ol>
<li><strong>Create a New Project</strong>: Open your preferred game development environment (e.g., Unity, Unreal Engine) and create a new project.</li>
<li><strong>Create a Grid-Based Map</strong>: Design a simple grid-based map where each cell can be either walkable or an obstacle.</li>
</ol>
</div><h2><p>Step 2: Implementing the A* Algorithm</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Define the Grid</strong>: Create a class to represent the grid. Each cell in the grid should have properties such as <code>isWalkable</code>, <code>gCost</code>, <code>hCost</code>, and <code>parent</code>.</p>
<pre><code class="language-csharp">public class Node
{
    public bool isWalkable;
    public Vector2 position;
    public int gCost;
    public int hCost;
    public Node parent;

    public int fCost =&gt; gCost + hCost;
}
</code></pre>
</li>
<li>
<p><strong>Initialize the Grid</strong>: Initialize the grid with walkable and non-walkable cells.</p>
<pre><code class="language-csharp">public class Grid
{
    private Node[,] nodes;
    private int width;
    private int height;

    public Grid(int width, int height)
    {
        this.width = width;
        this.height = height;
        nodes = new Node[width, height];
        InitializeGrid();
    }

    private void InitializeGrid()
    {
        for (int x = 0; x &lt; width; x++)
        {
            for (int y = 0; y &lt; height; y++)
            {
                nodes[x, y] = new Node
                {
                    isWalkable = true,
                    position = new Vector2(x, y)
                };
            }
        }
    }
}
</code></pre>
</li>
<li>
<p><em><em>Implement the A</em> Algorithm</em>*: Implement the A* algorithm to find the shortest path from the start node to the goal node.</p>
<pre><code class="language-csharp">public List&lt;Node&gt; FindPath(Node startNode, Node goalNode)
{
    List&lt;Node&gt; openList = new List&lt;Node&gt;();
    HashSet&lt;Node&gt; closedList = new HashSet&lt;Node&gt;();

    openList.Add(startNode);

    while (openList.Count &gt; 0)
    {
        Node currentNode = openList[0];
        for (int i = 1; i &lt; openList.Count; i++)
        {
            if (openList[i].fCost &lt; currentNode.fCost || openList[i].fCost == currentNode.fCost &amp;&amp; openList[i].hCost &lt; currentNode.hCost)
            {
                currentNode = openList[i];
            }
        }

        openList.Remove(currentNode);
        closedList.Add(currentNode);

        if (currentNode == goalNode)
        {
            return RetracePath(startNode, goalNode);
        }

        foreach (Node neighbor in GetNeighbors(currentNode))
        {
            if (!neighbor.isWalkable || closedList.Contains(neighbor))
            {
                continue;
            }

            int newMovementCostToNeighbor = currentNode.gCost + GetDistance(currentNode, neighbor);
            if (newMovementCostToNeighbor &lt; neighbor.gCost || !openList.Contains(neighbor))
            {
                neighbor.gCost = newMovementCostToNeighbor;
                neighbor.hCost = GetDistance(neighbor, goalNode);
                neighbor.parent = currentNode;

                if (!openList.Contains(neighbor))
                {
                    openList.Add(neighbor);
                }
            }
        }
    }

    return null;
}

private List&lt;Node&gt; RetracePath(Node startNode, Node endNode)
{
    List&lt;Node&gt; path = new List&lt;Node&gt;();
    Node currentNode = endNode;

    while (currentNode != startNode)
    {
        path.Add(currentNode);
        currentNode = currentNode.parent;
    }
    path.Reverse();
    return path;
}

private int GetDistance(Node nodeA, Node nodeB)
{
    int dstX = Mathf.Abs(nodeA.position.x - nodeB.position.x);
    int dstY = Mathf.Abs(nodeA.position.y - nodeB.position.y);

    if (dstX &gt; dstY)
        return 14 * dstY + 10 * (dstX - dstY);
    return 14 * dstX + 10 * (dstY - dstX);
}
</code></pre>
</li>
</ol>
</div><h2><p>Step 3: Visualizing the Path</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Draw the Grid</strong>: Create a method to draw the grid and visualize the path.</p>
<pre><code class="language-csharp">void OnDrawGizmos()
{
    if (grid != null)
    {
        foreach (Node node in grid.nodes)
        {
            Gizmos.color = node.isWalkable ? Color.white : Color.red;
            Gizmos.DrawCube(new Vector3(node.position.x, 0, node.position.y), Vector3.one * 0.9f);
        }
    }
}
</code></pre>
</li>
<li>
<p><strong>Draw the Path</strong>: Visualize the path found by the A* algorithm.</p>
<pre><code class="language-csharp">void OnDrawGizmos()
{
    if (grid != null)
    {
        foreach (Node node in grid.nodes)
        {
            Gizmos.color = node.isWalkable ? Color.white : Color.red;
            Gizmos.DrawCube(new Vector3(node.position.x, 0, node.position.y), Vector3.one * 0.9f);
        }

        if (path != null)
        {
            foreach (Node node in path)
            {
                Gizmos.color = Color.black;
                Gizmos.DrawCube(new Vector3(node.position.x, 0, node.position.y), Vector3.one * 0.9f);
            }
        }
    }
}
</code></pre>
</li>
</ol>
</div><h2><p>Step 4: Moving the Character</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Create a Character</strong>: Add a character to the scene and create a script to move it along the path.</p>
<pre><code class="language-csharp">public class Character : MonoBehaviour
{
    public float speed = 5f;
    private List&lt;Node&gt; path;
    private int targetIndex;

    public void SetPath(List&lt;Node&gt; path)
    {
        this.path = path;
        targetIndex = 0;
        StopCoroutine(&quot;FollowPath&quot;);
        StartCoroutine(&quot;FollowPath&quot;);
    }

    private IEnumerator FollowPath()
    {
        Vector3 currentWaypoint = path[0].position;
        while (true)
        {
            if (transform.position == currentWaypoint)
            {
                targetIndex++;
                if (targetIndex &gt;= path.Count)
                {
                    yield break;
                }
                currentWaypoint = path[targetIndex].position;
            }

            transform.position = Vector3.MoveTowards(transform.position, currentWaypoint, speed * Time.deltaTime);
            yield return null;
        }
    }
}
</code></pre>
</li>
<li>
<p><strong>Assign the Path to the Character</strong>: Once the path is found, assign it to the character.</p>
<pre><code class="language-csharp">void Update()
{
    if (Input.GetMouseButtonDown(0))
    {
        Vector3 mousePosition = Camera.main.ScreenToWorldPoint(Input.mousePosition);
        Node startNode = grid.GetNodeFromWorldPoint(transform.position);
        Node goalNode = grid.GetNodeFromWorldPoint(mousePosition);

        List&lt;Node&gt; path = FindPath(startNode, goalNode);
        character.SetPath(path);
    }
}
</code></pre>
</li>
</ol>
</div><h1><p>Practical Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Modify the Grid Size</p>
</h2>
<div class='content'><ul>
<li><strong>Task</strong>: Modify the grid size to be larger or smaller and observe how the pathfinding algorithm performs.</li>
<li><strong>Solution</strong>: Change the <code>width</code> and <code>height</code> parameters in the <code>Grid</code> class constructor.</li>
</ul>
</div><h2><p>Exercise 2: Add More Obstacles</p>
</h2>
<div class='content'><ul>
<li><strong>Task</strong>: Add more obstacles to the grid and ensure the character can still find a path to the goal.</li>
<li><strong>Solution</strong>: Modify the <code>InitializeGrid</code> method to set more cells as non-walkable.</li>
</ul>
</div><h2><p>Exercise 3: Optimize the A* Algorithm</p>
</h2>
<div class='content'><ul>
<li><strong>Task</strong>: Optimize the A* algorithm to improve performance, especially for larger grids.</li>
<li><strong>Solution</strong>: Implement a priority queue for the open list to reduce the time complexity of finding the node with the lowest <code>fCost</code>.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this project, you have implemented basic navigation for a game character using the A* pathfinding algorithm. You have learned how to create a grid-based map, implement the A* algorithm, visualize the path, and move a character along the path. These skills are fundamental for developing intelligent behaviors in game characters and will serve as a foundation for more advanced AI techniques in video games.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-03-testing-debugging' title="AI Testing and Debugging">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='06-02-project-npc' title="Project 2: Creation of an NPC with Decision Making">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
