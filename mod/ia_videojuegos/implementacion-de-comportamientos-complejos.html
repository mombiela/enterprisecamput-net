<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implementation of Complex Behaviors</title>

    <link rel="alternate" href="https://campusempresa.com/mod/ia_videojuegos/implementacion-de-comportamientos-complejos" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/ia_videojuegos/implementacion-de-comportamientos-complejos" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/ia_videojuegos/implementacion-de-comportamientos-complejos" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/ia_videojuegos/implementacion-de-comportamientos-complejos" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/ia_videojuegos/implementacion-de-comportamientos-complejos" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In video game development, artificial intelligence (AI) plays a crucial role in creating immersive and challenging experiences. Implementing complex behaviors in NPCs (Non-Player Characters) is essential to achieve a dynamic and realistic game environment. This topic will address the techniques and algorithms used to design and program advanced AI behaviors for video games.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>FSM (Finite State Machines)</strong>: Finite state machines that allow NPCs to switch between different behavior states.</li>
<li><strong>BT (Behavior Trees)</strong>: Behavior trees that structure NPC decisions hierarchically.</li>
<li><strong>Pathfinding</strong>: Algorithms that enable NPCs to find optimal routes in the game environment.</li>
<li><strong>Steering Behaviors</strong>: Steering behaviors that allow NPCs to move realistically.</li>
<li><strong>Utility AI</strong>: Systems that evaluate multiple factors to make complex decisions.</li>
</ul>
</div><h1>Finite State Machines (FSM)</h1>
<div class='content'><p>FSMs are one of the most common techniques for implementing behaviors in NPCs. An FSM consists of:</p>
<ul>
<li><strong>States</strong>: Represent different behaviors or actions.</li>
<li><strong>Transitions</strong>: Conditions that allow switching from one state to another.</li>
<li><strong>Events</strong>: Occurrences that trigger transitions.</li>
</ul>
</div><h2>Code Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgTlBDOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYuc3RhdGUgPSAiaWRsZSIKCiAgICBkZWYgdXBkYXRlKHNlbGYsIGV2ZW50KToKICAgICAgICBpZiBzZWxmLnN0YXRlID09ICJpZGxlIjoKICAgICAgICAgICAgaWYgZXZlbnQgPT0gInNlZV9lbmVteSI6CiAgICAgICAgICAgICAgICBzZWxmLnN0YXRlID0gImF0dGFjayIKICAgICAgICBlbGlmIHNlbGYuc3RhdGUgPT0gImF0dGFjayI6CiAgICAgICAgICAgIGlmIGV2ZW50ID09ICJlbmVteV9kZWFkIjoKICAgICAgICAgICAgICAgIHNlbGYuc3RhdGUgPSAiaWRsZSIKCm5wYyA9IE5QQygpCm5wYy51cGRhdGUoInNlZV9lbmVteSIpCnByaW50KG5wYy5zdGF0ZSkgICMgT3V0cHV0OiBhdHRhY2sKbnBjLnVwZGF0ZSgiZW5lbXlfZGVhZCIpCnByaW50KG5wYy5zdGF0ZSkgICMgT3V0cHV0OiBpZGxl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class NPC:
    def __init__(self):
        self.state = &quot;idle&quot;

    def update(self, event):
        if self.state == &quot;idle&quot;:
            if event == &quot;see_enemy&quot;:
                self.state = &quot;attack&quot;
        elif self.state == &quot;attack&quot;:
            if event == &quot;enemy_dead&quot;:
                self.state = &quot;idle&quot;

npc = NPC()
npc.update(&quot;see_enemy&quot;)
print(npc.state)  # Output: attack
npc.update(&quot;enemy_dead&quot;)
print(npc.state)  # Output: idle</pre></div><div class='content'></div><h1>Behavior Trees (BT)</h1>
<div class='content'><p>BTs are an alternative to FSMs that allow for greater modularity and reuse of behaviors. A BT is composed of:</p>
<ul>
<li><strong>Nodes</strong>: Represent actions or decisions.</li>
<li><strong>Sequences</strong>: Execute child nodes in order until one fails.</li>
<li><strong>Selectors</strong>: Execute child nodes in order until one succeeds.</li>
</ul>
</div><h2>Code Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgTm9kZToKICAgIGRlZiBydW4oc2VsZik6CiAgICAgICAgcGFzcwoKY2xhc3MgU2VxdWVuY2UoTm9kZSk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgbm9kZXMpOgogICAgICAgIHNlbGYubm9kZXMgPSBub2RlcwoKICAgIGRlZiBydW4oc2VsZik6CiAgICAgICAgZm9yIG5vZGUgaW4gc2VsZi5ub2RlczoKICAgICAgICAgICAgaWYgbm90IG5vZGUucnVuKCk6CiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICByZXR1cm4gVHJ1ZQoKY2xhc3MgU2VsZWN0b3IoTm9kZSk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgbm9kZXMpOgogICAgICAgIHNlbGYubm9kZXMgPSBub2RlcwoKICAgIGRlZiBydW4oc2VsZik6CiAgICAgICAgZm9yIG5vZGUgaW4gc2VsZi5ub2RlczoKICAgICAgICAgICAgaWYgbm9kZS5ydW4oKToKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgcmV0dXJuIEZhbHNlCgpjbGFzcyBBY3Rpb24oTm9kZSk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgYWN0aW9uKToKICAgICAgICBzZWxmLmFjdGlvbiA9IGFjdGlvbgoKICAgIGRlZiBydW4oc2VsZik6CiAgICAgICAgcmV0dXJuIHNlbGYuYWN0aW9uKCkKCmRlZiBzZWVfZW5lbXkoKToKICAgIHJldHVybiBUcnVlCgpkZWYgYXR0YWNrX2VuZW15KCk6CiAgICBwcmludCgiQXR0YWNraW5nIGVuZW15IikKICAgIHJldHVybiBUcnVlCgpidCA9IFNlbGVjdG9yKFtTZXF1ZW5jZShbQWN0aW9uKHNlZV9lbmVteSksIEFjdGlvbihhdHRhY2tfZW5lbXkpXSldKQpidC5ydW4oKSAgIyBPdXRwdXQ6IEF0dGFja2luZyBlbmVteQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Node:
    def run(self):
        pass

class Sequence(Node):
    def __init__(self, nodes):
        self.nodes = nodes

    def run(self):
        for node in self.nodes:
            if not node.run():
                return False
        return True

class Selector(Node):
    def __init__(self, nodes):
        self.nodes = nodes

    def run(self):
        for node in self.nodes:
            if node.run():
                return True
        return False

class Action(Node):
    def __init__(self, action):
        self.action = action

    def run(self):
        return self.action()

def see_enemy():
    return True

def attack_enemy():
    print(&quot;Attacking enemy&quot;)
    return True

bt = Selector([Sequence([Action(see_enemy), Action(attack_enemy)])])
bt.run()  # Output: Attacking enemy</pre></div><div class='content'></div><h1>Pathfinding</h1>
<div class='content'><p>Pathfinding is crucial for NPCs to navigate the game environment efficiently. The A* (A-star) algorithm is one of the most used.</p>
</div><h2>Code Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBoZWFwcSBpbXBvcnQgaGVhcHBvcCwgaGVhcHB1c2gKCmRlZiBoZXVyaXN0aWMoYSwgYik6CiAgICByZXR1cm4gYWJzKGFbMF0gLSBiWzBdKSArIGFicyhhWzFdIC0gYlsxXSkKCmRlZiBhX3N0YXJfc2VhcmNoKGdyYXBoLCBzdGFydCwgZ29hbCk6CiAgICBmcm9udGllciA9IFtdCiAgICBoZWFwcHVzaChmcm9udGllciwgKDAsIHN0YXJ0KSkKICAgIGNhbWVfZnJvbSA9IHt9CiAgICBjb3N0X3NvX2ZhciA9IHt9CiAgICBjYW1lX2Zyb21bc3RhcnRdID0gTm9uZQogICAgY29zdF9zb19mYXJbc3RhcnRdID0gMAoKICAgIHdoaWxlIGZyb250aWVyOgogICAgICAgIGN1cnJlbnQgPSBoZWFwcG9wKGZyb250aWVyKVsxXQoKICAgICAgICBpZiBjdXJyZW50ID09IGdvYWw6CiAgICAgICAgICAgIGJyZWFrCgogICAgICAgIGZvciBuZXh0IGluIGdyYXBoLm5laWdoYm9ycyhjdXJyZW50KToKICAgICAgICAgICAgbmV3X2Nvc3QgPSBjb3N0X3NvX2ZhcltjdXJyZW50XSArIGdyYXBoLmNvc3QoY3VycmVudCwgbmV4dCkKICAgICAgICAgICAgaWYgbmV4dCBub3QgaW4gY29zdF9zb19mYXIgb3IgbmV3X2Nvc3QgPCBjb3N0X3NvX2ZhcltuZXh0XToKICAgICAgICAgICAgICAgIGNvc3Rfc29fZmFyW25leHRdID0gbmV3X2Nvc3QKICAgICAgICAgICAgICAgIHByaW9yaXR5ID0gbmV3X2Nvc3QgKyBoZXVyaXN0aWMoZ29hbCwgbmV4dCkKICAgICAgICAgICAgICAgIGhlYXBwdXNoKGZyb250aWVyLCAocHJpb3JpdHksIG5leHQpKQogICAgICAgICAgICAgICAgY2FtZV9mcm9tW25leHRdID0gY3VycmVudAoKICAgIHJldHVybiBjYW1lX2Zyb20sIGNvc3Rfc29fZmFyCgojIEV4YW1wbGUgb2YgdXNlCiMgRGVmaW5lIHRoZSBncmFwaCBhbmQgdGhlIHN0YXJ0IGFuZCBnb2FsIG5vZGVzIGFjY29yZGluZyB0byB0aGUgZ2FtZSBjb250ZXh0"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from heapq import heappop, heappush

def heuristic(a, b):
    return abs(a[0] - b[0]) + abs(a[1] - b[1])

def a_star_search(graph, start, goal):
    frontier = []
    heappush(frontier, (0, start))
    came_from = {}
    cost_so_far = {}
    came_from[start] = None
    cost_so_far[start] = 0

    while frontier:
        current = heappop(frontier)[1]

        if current == goal:
            break

        for next in graph.neighbors(current):
            new_cost = cost_so_far[current] + graph.cost(current, next)
            if next not in cost_so_far or new_cost &lt; cost_so_far[next]:
                cost_so_far[next] = new_cost
                priority = new_cost + heuristic(goal, next)
                heappush(frontier, (priority, next))
                came_from[next] = current

    return came_from, cost_so_far

# Example of use
# Define the graph and the start and goal nodes according to the game context</pre></div><div class='content'></div><h1>Steering Behaviors</h1>
<div class='content'><p>Steering behaviors allow NPCs to move realistically and smoothly. Some common behaviors include:</p>
<ul>
<li><strong>Seek</strong>: Move towards a target.</li>
<li><strong>Flee</strong>: Move away from a threat.</li>
<li><strong>Arrive</strong>: Reach a target and stop smoothly.</li>
</ul>
</div><h2>Code Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgVmVjdG9yMjoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCB4LCB5KToKICAgICAgICBzZWxmLnggPSB4CiAgICAgICAgc2VsZi55ID0geQoKICAgIGRlZiBfX3N1Yl9fKHNlbGYsIG90aGVyKToKICAgICAgICByZXR1cm4gVmVjdG9yMihzZWxmLnggLSBvdGhlci54LCBzZWxmLnkgLSBvdGhlci55KQoKICAgIGRlZiBsZW5ndGgoc2VsZik6CiAgICAgICAgcmV0dXJuIChzZWxmLngqKjIgKyBzZWxmLnkqKjIpKiowLjUKCiAgICBkZWYgbm9ybWFsaXplKHNlbGYpOgogICAgICAgIGwgPSBzZWxmLmxlbmd0aCgpCiAgICAgICAgcmV0dXJuIFZlY3RvcjIoc2VsZi54IC8gbCwgc2VsZi55IC8gbCkKCmNsYXNzIE5QQzoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBwb3NpdGlvbik6CiAgICAgICAgc2VsZi5wb3NpdGlvbiA9IHBvc2l0aW9uCiAgICAgICAgc2VsZi52ZWxvY2l0eSA9IFZlY3RvcjIoMCwgMCkKCiAgICBkZWYgc2VlayhzZWxmLCB0YXJnZXQpOgogICAgICAgIGRlc2lyZWRfdmVsb2NpdHkgPSAodGFyZ2V0IC0gc2VsZi5wb3NpdGlvbikubm9ybWFsaXplKCkKICAgICAgICBzZWxmLnZlbG9jaXR5ID0gZGVzaXJlZF92ZWxvY2l0eQoKbnBjID0gTlBDKFZlY3RvcjIoMCwgMCkpCnRhcmdldCA9IFZlY3RvcjIoMTAsIDEwKQpucGMuc2Vlayh0YXJnZXQpCnByaW50KG5wYy52ZWxvY2l0eS54LCBucGMudmVsb2NpdHkueSkgICMgT3V0cHV0OiAwLjcwNyAwLjcwNw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Vector2:
    def __init__(self, x, y):
        self.x = x
        self.y = y

    def __sub__(self, other):
        return Vector2(self.x - other.x, self.y - other.y)

    def length(self):
        return (self.x**2 + self.y**2)**0.5

    def normalize(self):
        l = self.length()
        return Vector2(self.x / l, self.y / l)

class NPC:
    def __init__(self, position):
        self.position = position
        self.velocity = Vector2(0, 0)

    def seek(self, target):
        desired_velocity = (target - self.position).normalize()
        self.velocity = desired_velocity

npc = NPC(Vector2(0, 0))
target = Vector2(10, 10)
npc.seek(target)
print(npc.velocity.x, npc.velocity.y)  # Output: 0.707 0.707</pre></div><div class='content'></div><h1>Utility AI</h1>
<div class='content'><p>Utility AI allows NPCs to make decisions based on multiple factors, assigning a &quot;utility&quot; to each possible action.</p>
</div><h2>Code Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgVXRpbGl0eUFJOgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGFjdGlvbnMpOgogICAgICAgIHNlbGYuYWN0aW9ucyA9IGFjdGlvbnMKCiAgICBkZWYgZXZhbHVhdGUoc2VsZik6CiAgICAgICAgYmVzdF9hY3Rpb24gPSBOb25lCiAgICAgICAgaGlnaGVzdF91dGlsaXR5ID0gLWZsb2F0KCdpbmYnKQogICAgICAgIGZvciBhY3Rpb24sIHV0aWxpdHkgaW4gc2VsZi5hY3Rpb25zLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIHV0aWxpdHkoKSA+IGhpZ2hlc3RfdXRpbGl0eToKICAgICAgICAgICAgICAgIGhpZ2hlc3RfdXRpbGl0eSA9IHV0aWxpdHkoKQogICAgICAgICAgICAgICAgYmVzdF9hY3Rpb24gPSBhY3Rpb24KICAgICAgICByZXR1cm4gYmVzdF9hY3Rpb24KCmRlZiBhdHRhY2tfdXRpbGl0eSgpOgogICAgcmV0dXJuIDAuOAoKZGVmIGZsZWVfdXRpbGl0eSgpOgogICAgcmV0dXJuIDAuNQoKYWN0aW9ucyA9IHsKICAgICJhdHRhY2siOiBhdHRhY2tfdXRpbGl0eSwKICAgICJmbGVlIjogZmxlZV91dGlsaXR5Cn0KCmFpID0gVXRpbGl0eUFJKGFjdGlvbnMpCnByaW50KGFpLmV2YWx1YXRlKCkpICAjIE91dHB1dDogYXR0YWNr"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class UtilityAI:
    def __init__(self, actions):
        self.actions = actions

    def evaluate(self):
        best_action = None
        highest_utility = -float('inf')
        for action, utility in self.actions.items():
            if utility() &gt; highest_utility:
                highest_utility = utility()
                best_action = action
        return best_action

def attack_utility():
    return 0.8

def flee_utility():
    return 0.5

actions = {
    &quot;attack&quot;: attack_utility,
    &quot;flee&quot;: flee_utility
}

ai = UtilityAI(actions)
print(ai.evaluate())  # Output: attack</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Implementing complex behaviors in AI for video games is a vast and constantly evolving field. From FSMs and BTs to pathfinding and steering behaviors, each technique offers different advantages and challenges. The choice of the right technique depends on the game context and the specific behaviors to be implemented. With a solid understanding of these concepts, developers can create NPCs that significantly enhance the gaming experience.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
