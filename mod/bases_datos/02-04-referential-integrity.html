<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Referential Integrity</title>

    <link rel="alternate" href="https://campusempresa.com/mod/bases_datos/02-04-integridad-referencial" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/bases_datos/02-04-integritat-referencial" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/bases_datos/02-04-referential-integrity" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=3" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/bases_datos/02-04-integridad-referencial" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/bases_datos/02-04-integritat-referencial" class="px-2">CA</a>
</span>
			<span class="d-none d-md-inline"><br><cite>Building today's and tomorrow's society</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Languages</a>
				 					<a href="/categ/frameworks">Frameworks</a>
				 					<a href="/categ/tech-tools">Tools</a>
				 					<a href="/categ/foundations">Foundations</a>
				 					<a href="/categ/soft-skills">Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='02-03-basic-operations-sql' title="Basic Operations in SQL">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Referential Integrity</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='03-01-introduction-nosql' title="Introduction to NoSQL">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Referential integrity is a fundamental concept in relational databases that ensures the consistency and accuracy of data. It involves maintaining the relationships between tables in a database to prevent orphaned records and ensure that data remains reliable and meaningful.</p>
</div><h1><p>Key Concepts of Referential Integrity</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Primary Key (PK):</strong></p>
<ul>
<li>A primary key is a unique identifier for each record in a table.</li>
<li>It ensures that each record can be uniquely identified.</li>
<li>Example: In a <code>Customers</code> table, the <code>CustomerID</code> could be the primary key.</li>
</ul>
</li>
<li>
<p><strong>Foreign Key (FK):</strong></p>
<ul>
<li>A foreign key is a field (or collection of fields) in one table that uniquely identifies a row of another table.</li>
<li>It establishes a link between the data in two tables.</li>
<li>Example: In an <code>Orders</code> table, the <code>CustomerID</code> could be a foreign key that references the <code>CustomerID</code> in the <code>Customers</code> table.</li>
</ul>
</li>
<li>
<p><strong>Referential Integrity Constraint:</strong></p>
<ul>
<li>A rule that ensures that foreign keys correctly and consistently reference primary keys.</li>
<li>It prevents actions that would leave orphaned records in the database.</li>
</ul>
</li>
</ol>
</div><h1><p>Referential Integrity in SQL</p>
</h1>
<div class='content'></div><h2><p>Creating Tables with Primary and Foreign Keys</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gQ3JlYXRpbmcgdGhlIEN1c3RvbWVycyB0YWJsZSB3aXRoIGEgcHJpbWFyeSBrZXkKQ1JFQVRFIFRBQkxFIEN1c3RvbWVycyAoCiAgICBDdXN0b21lcklEIElOVCBQUklNQVJZIEtFWSwKICAgIEN1c3RvbWVyTmFtZSBWQVJDSEFSKDEwMCksCiAgICBDb250YWN0TmFtZSBWQVJDSEFSKDEwMCksCiAgICBDb3VudHJ5IFZBUkNIQVIoNTApCik7CgotLSBDcmVhdGluZyB0aGUgT3JkZXJzIHRhYmxlIHdpdGggYSBmb3JlaWduIGtleQpDUkVBVEUgVEFCTEUgT3JkZXJzICgKICAgIE9yZGVySUQgSU5UIFBSSU1BUlkgS0VZLAogICAgT3JkZXJEYXRlIERBVEUsCiAgICBDdXN0b21lcklEIElOVCwKICAgIEZPUkVJR04gS0VZIChDdXN0b21lcklEKSBSRUZFUkVOQ0VTIEN1c3RvbWVycyhDdXN0b21lcklEKQopOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Creating the Customers table with a primary key
CREATE TABLE Customers (
    CustomerID INT PRIMARY KEY,
    CustomerName VARCHAR(100),
    ContactName VARCHAR(100),
    Country VARCHAR(50)
);

-- Creating the Orders table with a foreign key
CREATE TABLE Orders (
    OrderID INT PRIMARY KEY,
    OrderDate DATE,
    CustomerID INT,
    FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
);</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li>The <code>Customers</code> table has a primary key <code>CustomerID</code>.</li>
<li>The <code>Orders</code> table has a foreign key <code>CustomerID</code> that references the <code>CustomerID</code> in the <code>Customers</code> table.</li>
<li>This setup ensures that every order is linked to a valid customer.</li>
</ul>
</div><h2><p>Ensuring Referential Integrity</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Insert Operations:</strong></p>
<ul>
<li>When inserting a record into the <code>Orders</code> table, the <code>CustomerID</code> must exist in the <code>Customers</code> table.</li>
<li>Example:
<pre><code class="language-sql">-- Valid insert
INSERT INTO Customers (CustomerID, CustomerName, ContactName, Country)
VALUES (1, 'John Doe', 'John', 'USA');

INSERT INTO Orders (OrderID, OrderDate, CustomerID)
VALUES (101, '2023-10-01', 1);

-- Invalid insert (CustomerID 2 does not exist in Customers table)
INSERT INTO Orders (OrderID, OrderDate, CustomerID)
VALUES (102, '2023-10-02', 2); -- This will fail
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Update Operations:</strong></p>
<ul>
<li>When updating a foreign key, the new value must exist in the referenced table.</li>
<li>Example:
<pre><code class="language-sql">-- Valid update
UPDATE Orders
SET CustomerID = 1
WHERE OrderID = 101;

-- Invalid update (CustomerID 2 does not exist in Customers table)
UPDATE Orders
SET CustomerID = 2
WHERE OrderID = 101; -- This will fail
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Delete Operations:</strong></p>
<ul>
<li>Deleting a record that is referenced by a foreign key can violate referential integrity.</li>
<li>To handle this, you can use <code>ON DELETE</code> and <code>ON UPDATE</code> actions:
<ul>
<li><code>CASCADE</code>: Automatically delete or update the dependent records.</li>
<li><code>SET NULL</code>: Set the foreign key to <code>NULL</code>.</li>
<li><code>RESTRICT</code>: Prevent the delete or update operation.</li>
</ul>
</li>
<li>Example:
<pre><code class="language-sql">-- Creating the Orders table with ON DELETE CASCADE
CREATE TABLE Orders (
    OrderID INT PRIMARY KEY,
    OrderDate DATE,
    CustomerID INT,
    FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID) ON DELETE CASCADE
);

-- Deleting a customer will automatically delete related orders
DELETE FROM Customers WHERE CustomerID = 1;
</code></pre>
</li>
</ul>
</li>
</ol>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Creating Tables with Referential Integrity</p>
</h2>
<div class='content'><ol>
<li>
<p>Create a <code>Products</code> table with the following fields:</p>
<ul>
<li><code>ProductID</code> (Primary Key)</li>
<li><code>ProductName</code></li>
<li><code>SupplierID</code> (Foreign Key referencing <code>Suppliers</code> table)</li>
</ul>
</li>
<li>
<p>Create a <code>Suppliers</code> table with the following fields:</p>
<ul>
<li><code>SupplierID</code> (Primary Key)</li>
<li><code>SupplierName</code></li>
<li><code>ContactName</code></li>
<li><code>Country</code></li>
</ul>
</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gQ3JlYXRpbmcgdGhlIFN1cHBsaWVycyB0YWJsZQpDUkVBVEUgVEFCTEUgU3VwcGxpZXJzICgKICAgIFN1cHBsaWVySUQgSU5UIFBSSU1BUlkgS0VZLAogICAgU3VwcGxpZXJOYW1lIFZBUkNIQVIoMTAwKSwKICAgIENvbnRhY3ROYW1lIFZBUkNIQVIoMTAwKSwKICAgIENvdW50cnkgVkFSQ0hBUig1MCkKKTsKCi0tIENyZWF0aW5nIHRoZSBQcm9kdWN0cyB0YWJsZSB3aXRoIGEgZm9yZWlnbiBrZXkKQ1JFQVRFIFRBQkxFIFByb2R1Y3RzICgKICAgIFByb2R1Y3RJRCBJTlQgUFJJTUFSWSBLRVksCiAgICBQcm9kdWN0TmFtZSBWQVJDSEFSKDEwMCksCiAgICBTdXBwbGllcklEIElOVCwKICAgIEZPUkVJR04gS0VZIChTdXBwbGllcklEKSBSRUZFUkVOQ0VTIFN1cHBsaWVycyhTdXBwbGllcklEKQopOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Creating the Suppliers table
CREATE TABLE Suppliers (
    SupplierID INT PRIMARY KEY,
    SupplierName VARCHAR(100),
    ContactName VARCHAR(100),
    Country VARCHAR(50)
);

-- Creating the Products table with a foreign key
CREATE TABLE Products (
    ProductID INT PRIMARY KEY,
    ProductName VARCHAR(100),
    SupplierID INT,
    FOREIGN KEY (SupplierID) REFERENCES Suppliers(SupplierID)
);</pre></div><div class='content'></div><h2><p>Exercise 2: Inserting Data with Referential Integrity</p>
</h2>
<div class='content'><ol>
<li>Insert a record into the <code>Suppliers</code> table.</li>
<li>Insert a record into the <code>Products</code> table with a valid <code>SupplierID</code>.</li>
<li>Attempt to insert a record into the <code>Products</code> table with an invalid <code>SupplierID</code>.</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gSW5zZXJ0aW5nIGEgcmVjb3JkIGludG8gdGhlIFN1cHBsaWVycyB0YWJsZQpJTlNFUlQgSU5UTyBTdXBwbGllcnMgKFN1cHBsaWVySUQsIFN1cHBsaWVyTmFtZSwgQ29udGFjdE5hbWUsIENvdW50cnkpClZBTFVFUyAoMSwgJ0FjbWUgQ29ycCcsICdBbGljZScsICdVU0EnKTsKCi0tIEluc2VydGluZyBhIHZhbGlkIHJlY29yZCBpbnRvIHRoZSBQcm9kdWN0cyB0YWJsZQpJTlNFUlQgSU5UTyBQcm9kdWN0cyAoUHJvZHVjdElELCBQcm9kdWN0TmFtZSwgU3VwcGxpZXJJRCkKVkFMVUVTICgxMDEsICdHYWRnZXQnLCAxKTsKCi0tIEF0dGVtcHRpbmcgdG8gaW5zZXJ0IGFuIGludmFsaWQgcmVjb3JkIGludG8gdGhlIFByb2R1Y3RzIHRhYmxlCklOU0VSVCBJTlRPIFByb2R1Y3RzIChQcm9kdWN0SUQsIFByb2R1Y3ROYW1lLCBTdXBwbGllcklEKQpWQUxVRVMgKDEwMiwgJ1dpZGdldCcsIDIpOyAtLSBUaGlzIHdpbGwgZmFpbCBiZWNhdXNlIFN1cHBsaWVySUQgMiBkb2VzIG5vdCBleGlzdA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Inserting a record into the Suppliers table
INSERT INTO Suppliers (SupplierID, SupplierName, ContactName, Country)
VALUES (1, 'Acme Corp', 'Alice', 'USA');

-- Inserting a valid record into the Products table
INSERT INTO Products (ProductID, ProductName, SupplierID)
VALUES (101, 'Gadget', 1);

-- Attempting to insert an invalid record into the Products table
INSERT INTO Products (ProductID, ProductName, SupplierID)
VALUES (102, 'Widget', 2); -- This will fail because SupplierID 2 does not exist</pre></div><div class='content'></div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ul>
<li><strong>Mistake:</strong> Forgetting to define foreign keys.
<ul>
<li><strong>Tip:</strong> Always define foreign keys to maintain referential integrity.</li>
</ul>
</li>
<li><strong>Mistake:</strong> Attempting to delete a record that is referenced by a foreign key without handling the constraint.
<ul>
<li><strong>Tip:</strong> Use <code>ON DELETE CASCADE</code> or other actions to manage deletions.</li>
</ul>
</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>Referential integrity is crucial for maintaining the consistency and reliability of data in relational databases. By using primary and foreign keys, and enforcing referential integrity constraints, you can ensure that your database remains accurate and meaningful. Understanding and implementing these concepts will help you design robust and reliable database systems.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='02-03-basic-operations-sql' title="Basic Operations in SQL">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='03-01-introduction-nosql' title="Introduction to NoSQL">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Advertising</h1>
<p>This space is reserved for advertising.</p>
<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Thank you for collaborating!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
