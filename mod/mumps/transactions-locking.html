<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transactions and Locking in MUMPS (M)</title>

    <link rel="alternate" href="https://campusempresa.com/mod/mumps/transactions-locking" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/mumps/transactions-locking" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/mumps/transactions-locking" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/mumps/transactions-locking" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/mumps/transactions-locking" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='database-operations'>&#x25C4;Database Operations</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Transactions and Locking in MUMPS (M)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='error-handling'>Error Handling &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Transactions and locking are fundamental concepts in database management, ensuring data integrity and consistency. In this section, we'll explore how these concepts are implemented in MUMPS (M), a language known for its powerful database capabilities.</p>
</div><h1>Transactions</h1>
<div class='content'><p>A transaction in MUMPS is a sequence of operations performed as a single logical unit of work. Transactions ensure that either all operations are completed successfully, or none are, maintaining data integrity.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Atomicity</strong>: Ensures that all operations within a transaction are completed; if not, the transaction is aborted.</li>
<li><strong>Consistency</strong>: Ensures that the database remains in a consistent state before and after the transaction.</li>
<li><strong>Isolation</strong>: Ensures that transactions are isolated from each other until they are completed.</li>
<li><strong>Durability</strong>: Ensures that once a transaction is committed, it remains so, even in the event of a system failure.</li>
</ul>
</div><h2>Basic Transaction Commands</h2>
<div class='content'><ul>
<li><code>TSTART</code>: Begins a transaction.</li>
<li><code>TCOMMIT</code>: Commits the transaction.</li>
<li><code>TROLLBACK</code>: Rolls back the transaction.</li>
</ul>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBTdGFydCBhIHRyYW5zYWN0aW9uClRTVEFSVAoKOyBQZXJmb3JtIHNvbWUgb3BlcmF0aW9ucwpTRVQgXlBhdGllbnQoMSwgIk5hbWUiKSA9ICJKb2huIERvZSIKU0VUIF5QYXRpZW50KDEsICJBZ2UiKSA9IDMwCgo7IENvbW1pdCB0aGUgdHJhbnNhY3Rpb24KVENPTU1JVA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Start a transaction
TSTART

; Perform some operations
SET ^Patient(1, &quot;Name&quot;) = &quot;John Doe&quot;
SET ^Patient(1, &quot;Age&quot;) = 30

; Commit the transaction
TCOMMIT</pre></div><div class='content'><p>In this example, the transaction starts with <code>TSTART</code>, updates the patient's name and age, and then commits the transaction with <code>TCOMMIT</code>.</p>
</div><h2>Handling Errors</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("VFNUQVJUClNFVCAkRVRSQVA9IkRPIEVSUk9SXiVaVEVSIgpTRVQgXlBhdGllbnQoMSwgIk5hbWUiKSA9ICJKb2huIERvZSIKU0VUIF5QYXRpZW50KDEsICJBZ2UiKSA9IDMwClRDT01NSVQKUVVJVAoKRVJST1IKVFJPTExCQUNLCldSSVRFICJUcmFuc2FjdGlvbiBmYWlsZWQgYW5kIHJvbGxlZCBiYWNrIiwhClFVSVQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>TSTART
SET $ETRAP=&quot;DO ERROR^%ZTER&quot;
SET ^Patient(1, &quot;Name&quot;) = &quot;John Doe&quot;
SET ^Patient(1, &quot;Age&quot;) = 30
TCOMMIT
QUIT

ERROR
TROLLBACK
WRITE &quot;Transaction failed and rolled back&quot;,!
QUIT</pre></div><div class='content'><p>Here, if an error occurs, the transaction is rolled back using <code>TROLLBACK</code>, ensuring no partial updates are made.</p>
</div><h1>Locking</h1>
<div class='content'><p>Locking is a mechanism to control concurrent access to data, preventing conflicts and ensuring data integrity.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Exclusive Lock</strong>: Prevents other processes from accessing the locked data.</li>
<li><strong>Shared Lock</strong>: Allows multiple processes to read but not modify the locked data.</li>
</ul>
</div><h2>Basic Lock Commands</h2>
<div class='content'><ul>
<li><code>LOCK</code>: Acquires a lock.</li>
<li><code>UNLOCK</code>: Releases a lock.</li>
</ul>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBBY3F1aXJlIGEgbG9jayBvbiBhIGdsb2JhbCBub2RlCkxPQ0sgXlBhdGllbnQoMSkKCjsgUGVyZm9ybSBvcGVyYXRpb25zClNFVCBeUGF0aWVudCgxLCAiTmFtZSIpID0gIkphbmUgRG9lIgoKOyBSZWxlYXNlIHRoZSBsb2NrClVOTE9DSyBeUGF0aWVudCgxKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Acquire a lock on a global node
LOCK ^Patient(1)

; Perform operations
SET ^Patient(1, &quot;Name&quot;) = &quot;Jane Doe&quot;

; Release the lock
UNLOCK ^Patient(1)</pre></div><div class='content'><p>In this example, the <code>LOCK</code> command acquires an exclusive lock on the <code>^Patient(1)</code> node, ensuring no other process can modify it until the lock is released with <code>UNLOCK</code>.</p>
</div><h2>Lock Timeout</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBBdHRlbXB0IHRvIGFjcXVpcmUgYSBsb2NrIHdpdGggYSB0aW1lb3V0CkxPQ0sgK15QYXRpZW50KDEpOjUKSUYgJyRURVNUIFdSSVRFICJDb3VsZCBub3QgYWNxdWlyZSBsb2NrIiwhIFFVSVQKCjsgUGVyZm9ybSBvcGVyYXRpb25zClNFVCBeUGF0aWVudCgxLCAiTmFtZSIpID0gIkphbmUgRG9lIgoKOyBSZWxlYXNlIHRoZSBsb2NrClVOTE9DSyBeUGF0aWVudCgxKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Attempt to acquire a lock with a timeout
LOCK +^Patient(1):5
IF '$TEST WRITE &quot;Could not acquire lock&quot;,! QUIT

; Perform operations
SET ^Patient(1, &quot;Name&quot;) = &quot;Jane Doe&quot;

; Release the lock
UNLOCK ^Patient(1)</pre></div><div class='content'><p>Here, the <code>LOCK</code> command attempts to acquire a lock with a 5-second timeout. If the lock cannot be acquired within this time, the operation fails.</p>
</div><h1>Conclusion</h1>
<div class='content'><p>Understanding transactions and locking in MUMPS is crucial for maintaining data integrity and consistency in your applications. Transactions ensure that operations are completed fully or not at all, while locking controls concurrent access to data, preventing conflicts. By mastering these concepts, you can build robust and reliable MUMPS applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='database-operations'>&#x25C4;Database Operations</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Transactions and Locking in MUMPS (M)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='error-handling'>Error Handling &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
