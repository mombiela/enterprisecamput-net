<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Case Study: Migration from Monolith to Microservices</title>

    <link rel="alternate" href="https://campusempresa.com/mod/microservicios/08-01-caso-estudio-migracion" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/microservicios/08-01-caso-estudio-migracion" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/microservicios/08-01-case-study-migration" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/microservicios/08-01-caso-estudio-migracion" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/microservicios/08-01-caso-estudio-migracion" class="px-2">CA</a>
					</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-03-security-practices' title="Security Practices">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Case Study: Migration from Monolith to Microservices</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-02-practical-example' title="Practical Example: Complete Implementation">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introduction</p>
</h1>
<div class='content'><p>In this case study, we will explore the process of migrating a monolithic application to a microservices architecture. We will cover the following key aspects:</p>
<ol>
<li><strong>Understanding the Monolithic Application</strong></li>
<li><strong>Identifying Microservices</strong></li>
<li><strong>Planning the Migration</strong></li>
<li><strong>Implementing the Migration</strong></li>
<li><strong>Testing and Validation</strong></li>
<li><strong>Deployment and Monitoring</strong></li>
</ol>
</div><h1><p>Understanding the Monolithic Application</p>
</h1>
<div class='content'><p>Before starting the migration, it's crucial to understand the existing monolithic application. This involves:</p>
<ul>
<li><strong>Analyzing the Codebase</strong>: Review the code to understand the different modules and their dependencies.</li>
<li><strong>Identifying Bottlenecks</strong>: Determine the parts of the application that are causing performance issues or are difficult to maintain.</li>
<li><strong>Mapping Functionalities</strong>: Create a map of the application's functionalities and how they interact with each other.</li>
</ul>
</div><h2><p>Example</p>
</h2>
<div class='content'><p>Consider a monolithic e-commerce application with the following modules:</p>
<ul>
<li><strong>User Management</strong>: Handles user registration, login, and profile management.</li>
<li><strong>Product Catalog</strong>: Manages product listings, categories, and search functionality.</li>
<li><strong>Order Processing</strong>: Handles order creation, payment processing, and order tracking.</li>
<li><strong>Inventory Management</strong>: Manages stock levels and inventory updates.</li>
</ul>
</div><h1><p>Identifying Microservices</p>
</h1>
<div class='content'><p>The next step is to identify the microservices that will replace the monolithic modules. Each microservice should be a self-contained unit that handles a specific business capability.</p>
</div><h2><p>Example</p>
</h2>
<div class='content'><p>From the e-commerce application, we can identify the following microservices:</p>
<ul>
<li><strong>User Service</strong>: Manages user-related functionalities.</li>
<li><strong>Product Service</strong>: Handles product listings and search.</li>
<li><strong>Order Service</strong>: Manages order creation and tracking.</li>
<li><strong>Inventory Service</strong>: Manages stock levels and updates.</li>
</ul>
</div><h1><p>Planning the Migration</p>
</h1>
<div class='content'><p>Planning is crucial for a successful migration. This involves:</p>
<ul>
<li><strong>Defining the Scope</strong>: Decide which parts of the application will be migrated first.</li>
<li><strong>Creating a Roadmap</strong>: Develop a step-by-step plan for the migration process.</li>
<li><strong>Setting Up Infrastructure</strong>: Prepare the necessary infrastructure for deploying microservices (e.g., Docker, Kubernetes).</li>
</ul>
</div><h2><p>Example Roadmap</p>
</h2>
<div class='content'><ol>
<li><strong>Phase 1</strong>: Migrate User Management to User Service.</li>
<li><strong>Phase 2</strong>: Migrate Product Catalog to Product Service.</li>
<li><strong>Phase 3</strong>: Migrate Order Processing to Order Service.</li>
<li><strong>Phase 4</strong>: Migrate Inventory Management to Inventory Service.</li>
</ol>
</div><h1><p>Implementing the Migration</p>
</h1>
<div class='content'><p>During implementation, follow these steps:</p>
<ol>
<li><strong>Extract Functionality</strong>: Extract the functionality of each module into a separate microservice.</li>
<li><strong>Create APIs</strong>: Develop RESTful APIs for communication between microservices.</li>
<li><strong>Refactor Code</strong>: Refactor the monolithic code to remove dependencies on the extracted functionalities.</li>
</ol>
</div><h2><p>Example Code Snippet</p>
</h2>
<div class='content'><h4>Monolithic Code (Order Processing)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgT3JkZXJQcm9jZXNzaW5nOgogICAgZGVmIGNyZWF0ZV9vcmRlcihzZWxmLCB1c2VyX2lkLCBwcm9kdWN0X2lkKToKICAgICAgICB1c2VyID0gc2VsZi5nZXRfdXNlcih1c2VyX2lkKQogICAgICAgIHByb2R1Y3QgPSBzZWxmLmdldF9wcm9kdWN0KHByb2R1Y3RfaWQpCiAgICAgICAgaWYgcHJvZHVjdC5zdG9jayA+IDA6CiAgICAgICAgICAgIG9yZGVyID0gT3JkZXIodXNlciwgcHJvZHVjdCkKICAgICAgICAgICAgc2VsZi5zYXZlX29yZGVyKG9yZGVyKQogICAgICAgICAgICBzZWxmLnVwZGF0ZV9pbnZlbnRvcnkocHJvZHVjdF9pZCkKICAgICAgICAgICAgcmV0dXJuIG9yZGVyCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCJQcm9kdWN0IG91dCBvZiBzdG9jayIp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class OrderProcessing:
    def create_order(self, user_id, product_id):
        user = self.get_user(user_id)
        product = self.get_product(product_id)
        if product.stock &gt; 0:
            order = Order(user, product)
            self.save_order(order)
            self.update_inventory(product_id)
            return order
        else:
            raise Exception(&quot;Product out of stock&quot;)</pre></div><div class='content'><h4>Microservice Code (Order Service)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBvcmRlcl9zZXJ2aWNlLnB5CmZyb20gZmxhc2sgaW1wb3J0IEZsYXNrLCByZXF1ZXN0LCBqc29uaWZ5CmFwcCA9IEZsYXNrKF9fbmFtZV9fKQoKQGFwcC5yb3V0ZSgnL2NyZWF0ZV9vcmRlcicsIG1ldGhvZHM9WydQT1NUJ10pCmRlZiBjcmVhdGVfb3JkZXIoKToKICAgIGRhdGEgPSByZXF1ZXN0Lmpzb24KICAgIHVzZXJfaWQgPSBkYXRhWyd1c2VyX2lkJ10KICAgIHByb2R1Y3RfaWQgPSBkYXRhWydwcm9kdWN0X2lkJ10KICAgIAogICAgIyBDYWxsIFVzZXIgU2VydmljZSB0byBnZXQgdXNlciBkZXRhaWxzCiAgICB1c2VyID0gZ2V0X3VzZXIodXNlcl9pZCkKICAgIAogICAgIyBDYWxsIFByb2R1Y3QgU2VydmljZSB0byBnZXQgcHJvZHVjdCBkZXRhaWxzCiAgICBwcm9kdWN0ID0gZ2V0X3Byb2R1Y3QocHJvZHVjdF9pZCkKICAgIAogICAgaWYgcHJvZHVjdFsnc3RvY2snXSA+IDA6CiAgICAgICAgb3JkZXIgPSBjcmVhdGVfb3JkZXJfaW5fZGIodXNlciwgcHJvZHVjdCkKICAgICAgICAKICAgICAgICAjIENhbGwgSW52ZW50b3J5IFNlcnZpY2UgdG8gdXBkYXRlIHN0b2NrCiAgICAgICAgdXBkYXRlX2ludmVudG9yeShwcm9kdWN0X2lkKQogICAgICAgIAogICAgICAgIHJldHVybiBqc29uaWZ5KG9yZGVyKSwgMjAxCiAgICBlbHNlOgogICAgICAgIHJldHVybiBqc29uaWZ5KHsiZXJyb3IiOiAiUHJvZHVjdCBvdXQgb2Ygc3RvY2sifSksIDQwMAoKZGVmIGdldF91c2VyKHVzZXJfaWQpOgogICAgIyBTaW11bGF0ZSBBUEkgY2FsbCB0byBVc2VyIFNlcnZpY2UKICAgIHJldHVybiB7ImlkIjogdXNlcl9pZCwgIm5hbWUiOiAiSm9obiBEb2UifQoKZGVmIGdldF9wcm9kdWN0KHByb2R1Y3RfaWQpOgogICAgIyBTaW11bGF0ZSBBUEkgY2FsbCB0byBQcm9kdWN0IFNlcnZpY2UKICAgIHJldHVybiB7ImlkIjogcHJvZHVjdF9pZCwgIm5hbWUiOiAiTGFwdG9wIiwgInN0b2NrIjogMTB9CgpkZWYgY3JlYXRlX29yZGVyX2luX2RiKHVzZXIsIHByb2R1Y3QpOgogICAgIyBTaW11bGF0ZSBkYXRhYmFzZSBvcGVyYXRpb24KICAgIHJldHVybiB7Im9yZGVyX2lkIjogMSwgInVzZXIiOiB1c2VyLCAicHJvZHVjdCI6IHByb2R1Y3R9CgpkZWYgdXBkYXRlX2ludmVudG9yeShwcm9kdWN0X2lkKToKICAgICMgU2ltdWxhdGUgQVBJIGNhbGwgdG8gSW52ZW50b3J5IFNlcnZpY2UKICAgIHBhc3MKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICBhcHAucnVuKGRlYnVnPVRydWUp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># order_service.py
from flask import Flask, request, jsonify
app = Flask(__name__)

@app.route('/create_order', methods=['POST'])
def create_order():
    data = request.json
    user_id = data['user_id']
    product_id = data['product_id']
    
    # Call User Service to get user details
    user = get_user(user_id)
    
    # Call Product Service to get product details
    product = get_product(product_id)
    
    if product['stock'] &gt; 0:
        order = create_order_in_db(user, product)
        
        # Call Inventory Service to update stock
        update_inventory(product_id)
        
        return jsonify(order), 201
    else:
        return jsonify({&quot;error&quot;: &quot;Product out of stock&quot;}), 400

def get_user(user_id):
    # Simulate API call to User Service
    return {&quot;id&quot;: user_id, &quot;name&quot;: &quot;John Doe&quot;}

def get_product(product_id):
    # Simulate API call to Product Service
    return {&quot;id&quot;: product_id, &quot;name&quot;: &quot;Laptop&quot;, &quot;stock&quot;: 10}

def create_order_in_db(user, product):
    # Simulate database operation
    return {&quot;order_id&quot;: 1, &quot;user&quot;: user, &quot;product&quot;: product}

def update_inventory(product_id):
    # Simulate API call to Inventory Service
    pass

if __name__ == '__main__':
    app.run(debug=True)</pre></div><div class='content'></div><h1><p>Testing and Validation</p>
</h1>
<div class='content'><p>Testing is critical to ensure that the new microservices work correctly and integrate seamlessly. This involves:</p>
<ul>
<li><strong>Unit Testing</strong>: Test individual microservices.</li>
<li><strong>Integration Testing</strong>: Test the interaction between microservices.</li>
<li><strong>Performance Testing</strong>: Ensure that the microservices perform well under load.</li>
</ul>
</div><h2><p>Example Test Cases</p>
</h2>
<div class='content'><ol>
<li><strong>Unit Test for Order Service</strong>: Verify that an order is created successfully when the product is in stock.</li>
<li><strong>Integration Test</strong>: Verify that the Order Service correctly interacts with the User Service and Product Service.</li>
</ol>
</div><h1><p>Deployment and Monitoring</p>
</h1>
<div class='content'><p>Finally, deploy the microservices and set up monitoring to ensure they are running smoothly.</p>
<ul>
<li><strong>Deployment</strong>: Use containerization tools like Docker and orchestration tools like Kubernetes.</li>
<li><strong>Monitoring</strong>: Implement monitoring and logging to track the performance and health of the microservices.</li>
</ul>
</div><h2><p>Example Deployment</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBrdWJlcm5ldGVzLWRlcGxveW1lbnQueWFtbAphcGlWZXJzaW9uOiBhcHBzL3YxCmtpbmQ6IERlcGxveW1lbnQKbWV0YWRhdGE6CiAgbmFtZTogb3JkZXItc2VydmljZQpzcGVjOgogIHJlcGxpY2FzOiAzCiAgc2VsZWN0b3I6CiAgICBtYXRjaExhYmVsczoKICAgICAgYXBwOiBvcmRlci1zZXJ2aWNlCiAgdGVtcGxhdGU6CiAgICBtZXRhZGF0YToKICAgICAgbGFiZWxzOgogICAgICAgIGFwcDogb3JkZXItc2VydmljZQogICAgc3BlYzoKICAgICAgY29udGFpbmVyczoKICAgICAgLSBuYW1lOiBvcmRlci1zZXJ2aWNlCiAgICAgICAgaW1hZ2U6IG9yZGVyLXNlcnZpY2U6bGF0ZXN0CiAgICAgICAgcG9ydHM6CiAgICAgICAgLSBjb250YWluZXJQb3J0OiA1MDAw"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># kubernetes-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: order-service
spec:
  replicas: 3
  selector:
    matchLabels:
      app: order-service
  template:
    metadata:
      labels:
        app: order-service
    spec:
      containers:
      - name: order-service
        image: order-service:latest
        ports:
        - containerPort: 5000</pre></div><div class='content'></div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>Migrating from a monolithic architecture to microservices involves careful planning, implementation, and testing. By breaking down the monolithic application into smaller, manageable microservices, organizations can achieve greater scalability, flexibility, and maintainability. This case study provides a practical example of how to approach and execute such a migration, ensuring a smooth transition and successful deployment.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-03-security-practices' title="Security Practices">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-02-practical-example' title="Practical Example: Complete Implementation">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
