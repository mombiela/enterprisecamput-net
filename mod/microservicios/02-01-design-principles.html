<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Microservices Design Principles</title>

    <link rel="alternate" href="https://campusempresa.com/mod/microservicios/02-01-principios-diseno" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/microservicios/02-01-principios-diseno" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/microservicios/02-01-design-principles" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/microservicios/02-01-principios-diseno" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/microservicios/02-01-principios-diseno" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='01-03-comparison-monolithic' title="Comparison with Monolithic Architecture">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Microservices Design Principles</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='02-02-decomposition-monolithic' title="Decomposition of Monolithic Applications">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore the fundamental principles that guide the design of microservices. Understanding these principles is crucial for building robust, scalable, and maintainable microservices architectures.</p>
</div><h1><p>Key Design Principles</p>
</h1>
<div class='content'></div><h2><ol>
<li>Single Responsibility Principle (SRP)</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Definition</strong>: Each microservice should have a single responsibility, focusing on a specific business capability.</li>
<li><strong>Example</strong>: In an e-commerce application, separate microservices could handle user authentication, product catalog, order processing, and payment processing.</li>
</ul>
</div><h2><ol start="2">
<li>Loose Coupling</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Definition</strong>: Microservices should be loosely coupled, meaning changes in one service should not require changes in another.</li>
<li><strong>Example</strong>: The order processing service should not depend on the internal implementation of the payment processing service. They should communicate through well-defined APIs.</li>
</ul>
</div><h2><ol start="3">
<li>High Cohesion</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Definition</strong>: Microservices should have high cohesion, meaning that the functionalities within a service are closely related and focused on a specific task.</li>
<li><strong>Example</strong>: A user service should handle all aspects related to user management, such as registration, login, and profile updates.</li>
</ul>
</div><h2><ol start="4">
<li>Scalability</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Definition</strong>: Microservices should be designed to scale independently based on demand.</li>
<li><strong>Example</strong>: The product catalog service might need to scale differently compared to the user authentication service, depending on the load and usage patterns.</li>
</ul>
</div><h2><ol start="5">
<li>Resilience</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Definition</strong>: Microservices should be resilient, meaning they can handle failures gracefully and recover quickly.</li>
<li><strong>Example</strong>: Implementing circuit breakers and retries to handle temporary failures in communication between services.</li>
</ul>
</div><h2><ol start="6">
<li>Decentralized Data Management</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Definition</strong>: Each microservice should manage its own data, avoiding a single centralized database.</li>
<li><strong>Example</strong>: The order processing service and the inventory service should have their own databases to avoid tight coupling and enable independent scaling.</li>
</ul>
</div><h2><ol start="7">
<li>API First</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Definition</strong>: Design APIs before implementing the microservices to ensure clear and consistent communication interfaces.</li>
<li><strong>Example</strong>: Define the RESTful endpoints, request/response formats, and error handling mechanisms before writing the service logic.</li>
</ul>
</div><h2><ol start="8">
<li>Automation</li>
</ol>
</h2>
<div class='content'><ul>
<li><strong>Definition</strong>: Automate the deployment, scaling, and monitoring of microservices to ensure consistency and reliability.</li>
<li><strong>Example</strong>: Use CI/CD pipelines to automate the build, test, and deployment processes.</li>
</ul>
</div><h1><p>Practical Example: Designing a User Service</p>
</h1>
<div class='content'><p>Let's design a simple user service following the microservices design principles.</p>
</div><h2><p>Step 1: Define the Responsibility</p>
</h2>
<div class='content'><ul>
<li><strong>Responsibility</strong>: Manage user-related functionalities such as registration, login, and profile updates.</li>
</ul>
</div><h2><p>Step 2: Design the API</p>
</h2>
<div class='content'><ul>
<li><strong>Endpoints</strong>:
<ul>
<li><code>POST /users/register</code>: Register a new user.</li>
<li><code>POST /users/login</code>: Authenticate a user.</li>
<li><code>GET /users/{id}</code>: Retrieve user profile information.</li>
<li><code>PUT /users/{id}</code>: Update user profile information.</li>
</ul>
</li>
</ul>
</div><h2><p>Step 3: Implement the Service</p>
</h2>
<div class='content'><p>Here is a basic implementation using Python and Flask:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIHJlcXVlc3QsIGpzb25pZnkKCmFwcCA9IEZsYXNrKF9fbmFtZV9fKQoKIyBJbi1tZW1vcnkgdXNlciBzdG9yYWdlIGZvciBzaW1wbGljaXR5CnVzZXJzID0ge30KCkBhcHAucm91dGUoJy91c2Vycy9yZWdpc3RlcicsIG1ldGhvZHM9WydQT1NUJ10pCmRlZiByZWdpc3Rlcl91c2VyKCk6CiAgICBkYXRhID0gcmVxdWVzdC5qc29uCiAgICB1c2VyX2lkID0gbGVuKHVzZXJzKSArIDEKICAgIHVzZXJzW3VzZXJfaWRdID0gewogICAgICAgICd1c2VybmFtZSc6IGRhdGFbJ3VzZXJuYW1lJ10sCiAgICAgICAgJ3Bhc3N3b3JkJzogZGF0YVsncGFzc3dvcmQnXSwKICAgICAgICAncHJvZmlsZSc6IGRhdGEuZ2V0KCdwcm9maWxlJywge30pCiAgICB9CiAgICByZXR1cm4ganNvbmlmeSh7J3VzZXJfaWQnOiB1c2VyX2lkfSksIDIwMQoKQGFwcC5yb3V0ZSgnL3VzZXJzL2xvZ2luJywgbWV0aG9kcz1bJ1BPU1QnXSkKZGVmIGxvZ2luX3VzZXIoKToKICAgIGRhdGEgPSByZXF1ZXN0Lmpzb24KICAgIGZvciB1c2VyX2lkLCB1c2VyIGluIHVzZXJzLml0ZW1zKCk6CiAgICAgICAgaWYgdXNlclsndXNlcm5hbWUnXSA9PSBkYXRhWyd1c2VybmFtZSddIGFuZCB1c2VyWydwYXNzd29yZCddID09IGRhdGFbJ3Bhc3N3b3JkJ106CiAgICAgICAgICAgIHJldHVybiBqc29uaWZ5KHsnbWVzc2FnZSc6ICdMb2dpbiBzdWNjZXNzZnVsJ30pLCAyMDAKICAgIHJldHVybiBqc29uaWZ5KHsnbWVzc2FnZSc6ICdJbnZhbGlkIGNyZWRlbnRpYWxzJ30pLCA0MDEKCkBhcHAucm91dGUoJy91c2Vycy88aW50OnVzZXJfaWQ+JywgbWV0aG9kcz1bJ0dFVCddKQpkZWYgZ2V0X3VzZXIodXNlcl9pZCk6CiAgICB1c2VyID0gdXNlcnMuZ2V0KHVzZXJfaWQpCiAgICBpZiB1c2VyOgogICAgICAgIHJldHVybiBqc29uaWZ5KHVzZXIpLCAyMDAKICAgIHJldHVybiBqc29uaWZ5KHsnbWVzc2FnZSc6ICdVc2VyIG5vdCBmb3VuZCd9KSwgNDA0CgpAYXBwLnJvdXRlKCcvdXNlcnMvPGludDp1c2VyX2lkPicsIG1ldGhvZHM9WydQVVQnXSkKZGVmIHVwZGF0ZV91c2VyKHVzZXJfaWQpOgogICAgZGF0YSA9IHJlcXVlc3QuanNvbgogICAgdXNlciA9IHVzZXJzLmdldCh1c2VyX2lkKQogICAgaWYgdXNlcjoKICAgICAgICB1c2VyWydwcm9maWxlJ10gPSBkYXRhLmdldCgncHJvZmlsZScsIHVzZXJbJ3Byb2ZpbGUnXSkKICAgICAgICByZXR1cm4ganNvbmlmeSh1c2VyKSwgMjAwCiAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiAnVXNlciBub3QgZm91bmQnfSksIDQwNAoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIGFwcC5ydW4oZGVidWc9VHJ1ZSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from flask import Flask, request, jsonify

app = Flask(__name__)

# In-memory user storage for simplicity
users = {}

@app.route('/users/register', methods=['POST'])
def register_user():
    data = request.json
    user_id = len(users) + 1
    users[user_id] = {
        'username': data['username'],
        'password': data['password'],
        'profile': data.get('profile', {})
    }
    return jsonify({'user_id': user_id}), 201

@app.route('/users/login', methods=['POST'])
def login_user():
    data = request.json
    for user_id, user in users.items():
        if user['username'] == data['username'] and user['password'] == data['password']:
            return jsonify({'message': 'Login successful'}), 200
    return jsonify({'message': 'Invalid credentials'}), 401

@app.route('/users/&lt;int:user_id&gt;', methods=['GET'])
def get_user(user_id):
    user = users.get(user_id)
    if user:
        return jsonify(user), 200
    return jsonify({'message': 'User not found'}), 404

@app.route('/users/&lt;int:user_id&gt;', methods=['PUT'])
def update_user(user_id):
    data = request.json
    user = users.get(user_id)
    if user:
        user['profile'] = data.get('profile', user['profile'])
        return jsonify(user), 200
    return jsonify({'message': 'User not found'}), 404

if __name__ == '__main__':
    app.run(debug=True)</pre></div><div class='content'></div><h2><p>Step 4: Ensure Resilience and Scalability</p>
</h2>
<div class='content'><ul>
<li><strong>Resilience</strong>: Implement error handling and retries for database operations.</li>
<li><strong>Scalability</strong>: Deploy the service in a containerized environment (e.g., Docker) and use orchestration tools (e.g., Kubernetes) to manage scaling.</li>
</ul>
</div><h1><p>Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Define the API for an Order Service</p>
</h2>
<div class='content'><ul>
<li><strong>Task</strong>: Design the API endpoints for an order service that handles order creation, retrieval, and status updates.</li>
<li><strong>Solution</strong>:
<ul>
<li><code>POST /orders</code>: Create a new order.</li>
<li><code>GET /orders/{id}</code>: Retrieve order details.</li>
<li><code>PUT /orders/{id}/status</code>: Update order status.</li>
</ul>
</li>
</ul>
</div><h2><p>Exercise 2: Implement a Simple Order Service</p>
</h2>
<div class='content'><ul>
<li><strong>Task</strong>: Implement the order service using Python and Flask, following the designed API.</li>
<li><strong>Solution</strong>:</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIHJlcXVlc3QsIGpzb25pZnkKCmFwcCA9IEZsYXNrKF9fbmFtZV9fKQoKIyBJbi1tZW1vcnkgb3JkZXIgc3RvcmFnZSBmb3Igc2ltcGxpY2l0eQpvcmRlcnMgPSB7fQoKQGFwcC5yb3V0ZSgnL29yZGVycycsIG1ldGhvZHM9WydQT1NUJ10pCmRlZiBjcmVhdGVfb3JkZXIoKToKICAgIGRhdGEgPSByZXF1ZXN0Lmpzb24KICAgIG9yZGVyX2lkID0gbGVuKG9yZGVycykgKyAxCiAgICBvcmRlcnNbb3JkZXJfaWRdID0gewogICAgICAgICdpdGVtcyc6IGRhdGFbJ2l0ZW1zJ10sCiAgICAgICAgJ3N0YXR1cyc6ICdwZW5kaW5nJwogICAgfQogICAgcmV0dXJuIGpzb25pZnkoeydvcmRlcl9pZCc6IG9yZGVyX2lkfSksIDIwMQoKQGFwcC5yb3V0ZSgnL29yZGVycy88aW50Om9yZGVyX2lkPicsIG1ldGhvZHM9WydHRVQnXSkKZGVmIGdldF9vcmRlcihvcmRlcl9pZCk6CiAgICBvcmRlciA9IG9yZGVycy5nZXQob3JkZXJfaWQpCiAgICBpZiBvcmRlcjoKICAgICAgICByZXR1cm4ganNvbmlmeShvcmRlciksIDIwMAogICAgcmV0dXJuIGpzb25pZnkoeydtZXNzYWdlJzogJ09yZGVyIG5vdCBmb3VuZCd9KSwgNDA0CgpAYXBwLnJvdXRlKCcvb3JkZXJzLzxpbnQ6b3JkZXJfaWQ+L3N0YXR1cycsIG1ldGhvZHM9WydQVVQnXSkKZGVmIHVwZGF0ZV9vcmRlcl9zdGF0dXMob3JkZXJfaWQpOgogICAgZGF0YSA9IHJlcXVlc3QuanNvbgogICAgb3JkZXIgPSBvcmRlcnMuZ2V0KG9yZGVyX2lkKQogICAgaWYgb3JkZXI6CiAgICAgICAgb3JkZXJbJ3N0YXR1cyddID0gZGF0YVsnc3RhdHVzJ10KICAgICAgICByZXR1cm4ganNvbmlmeShvcmRlciksIDIwMAogICAgcmV0dXJuIGpzb25pZnkoeydtZXNzYWdlJzogJ09yZGVyIG5vdCBmb3VuZCd9KSwgNDA0CgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgYXBwLnJ1bihkZWJ1Zz1UcnVlKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from flask import Flask, request, jsonify

app = Flask(__name__)

# In-memory order storage for simplicity
orders = {}

@app.route('/orders', methods=['POST'])
def create_order():
    data = request.json
    order_id = len(orders) + 1
    orders[order_id] = {
        'items': data['items'],
        'status': 'pending'
    }
    return jsonify({'order_id': order_id}), 201

@app.route('/orders/&lt;int:order_id&gt;', methods=['GET'])
def get_order(order_id):
    order = orders.get(order_id)
    if order:
        return jsonify(order), 200
    return jsonify({'message': 'Order not found'}), 404

@app.route('/orders/&lt;int:order_id&gt;/status', methods=['PUT'])
def update_order_status(order_id):
    data = request.json
    order = orders.get(order_id)
    if order:
        order['status'] = data['status']
        return jsonify(order), 200
    return jsonify({'message': 'Order not found'}), 404

if __name__ == '__main__':
    app.run(debug=True)</pre></div><div class='content'></div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the essential design principles for microservices, including single responsibility, loose coupling, high cohesion, scalability, resilience, decentralized data management, API first, and automation. We also provided practical examples and exercises to reinforce these concepts. Understanding and applying these principles will help you design effective and efficient microservices architectures.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='01-03-comparison-monolithic' title="Comparison with Monolithic Architecture">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='02-02-decomposition-monolithic' title="Decomposition of Monolithic Applications">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
