<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Messaging and Events in Microservices</title>

    <link rel="alternate" href="https://campusempresa.com/mod/microservicios/mensajeria-y-eventos" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/microservicios/mensajeria-y-eventos" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/microservicios/mensajeria-y-eventos" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body  class="test" >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/microservicios/mensajeria-y-eventos" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/microservicios/mensajeria-y-eventos" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
									<div class="assert">
						<p><b>Attention!</b> There has been an error in the course generation, and it may contain translation errors.We are working to resolve this issue, so please use the content with caution.You can check the correct content in another language at the following link:<br>
						<a href="https://campusempresa.com/mod/microservicios/mensajeria-y-eventos">https://campusempresa.com/mod/microservicios/mensajeria-y-eventos</a></p>
					</div>
								<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In the context of microservices, communication between services is crucial for the proper functioning of the system. Two common patterns for this communication are messaging and events. This topic will address both concepts, their differences, advantages, disadvantages, and how to implement them in a microservices system.</p>
</div><h1>Messaging</h1>
<div class='content'></div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Asynchronous Messaging</strong>: Allows services to communicate without waiting for an immediate response. This improves the scalability and resilience of the system.</li>
<li><strong>Message Queues</strong>: Used to store messages until the receiving service is ready to process them.</li>
<li><strong>Message Brokers</strong>: Intermediary systems that manage message queues, such as RabbitMQ, Apache Kafka, and AWS SQS.</li>
</ul>
</div><h2>Advantages</h2>
<div class='content'><ul>
<li><strong>Decoupling</strong>: Services do not need to know the location or implementation of other services.</li>
<li><strong>Scalability</strong>: Services can scale independently.</li>
<li><strong>Resilience</strong>: Messages can be temporarily stored if a service is inactive.</li>
</ul>
</div><h2>Disadvantages</h2>
<div class='content'><ul>
<li><strong>Complexity</strong>: Introduces additional complexity in message and error management.</li>
<li><strong>Latency</strong>: There may be additional latency due to the asynchronous nature.</li>
</ul>
</div><h2>Code Example</h2>
<div class='content'><p>Below is an example of how to send and receive messages using RabbitMQ in Python.</p>
<h4>Send Message</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHBpa2EKCiMgQ29ubmVjdCB0byBSYWJiaXRNUSBicm9rZXIKY29ubmVjdGlvbiA9IHBpa2EuQmxvY2tpbmdDb25uZWN0aW9uKHBpa2EuQ29ubmVjdGlvblBhcmFtZXRlcnMoJ2xvY2FsaG9zdCcpKQpjaGFubmVsID0gY29ubmVjdGlvbi5jaGFubmVsKCkKCiMgRGVjbGFyZSBhIHF1ZXVlCmNoYW5uZWwucXVldWVfZGVjbGFyZShxdWV1ZT0naGVsbG8nKQoKIyBTZW5kIGEgbWVzc2FnZQpjaGFubmVsLmJhc2ljX3B1Ymxpc2goZXhjaGFuZ2U9JycsIHJvdXRpbmdfa2V5PSdoZWxsbycsIGJvZHk9J0hlbGxvIFdvcmxkIScpCnByaW50KCIgW3hdIFNlbnQgJ0hlbGxvIFdvcmxkISciKQoKIyBDbG9zZSB0aGUgY29ubmVjdGlvbgpjb25uZWN0aW9uLmNsb3NlKCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import pika

# Connect to RabbitMQ broker
connection = pika.BlockingConnection(pika.ConnectionParameters('localhost'))
channel = connection.channel()

# Declare a queue
channel.queue_declare(queue='hello')

# Send a message
channel.basic_publish(exchange='', routing_key='hello', body='Hello World!')
print(&quot; [x] Sent 'Hello World!'&quot;)

# Close the connection
connection.close()</pre></div><div class='content'><h4>Receive Message</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHBpa2EKCiMgQ29ubmVjdCB0byBSYWJiaXRNUSBicm9rZXIKY29ubmVjdGlvbiA9IHBpa2EuQmxvY2tpbmdDb25uZWN0aW9uKHBpa2EuQ29ubmVjdGlvblBhcmFtZXRlcnMoJ2xvY2FsaG9zdCcpKQpjaGFubmVsID0gY29ubmVjdGlvbi5jaGFubmVsKCkKCiMgRGVjbGFyZSBhIHF1ZXVlCmNoYW5uZWwucXVldWVfZGVjbGFyZShxdWV1ZT0naGVsbG8nKQoKIyBEZWZpbmUgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uCmRlZiBjYWxsYmFjayhjaCwgbWV0aG9kLCBwcm9wZXJ0aWVzLCBib2R5KToKICAgIHByaW50KGYiIFt4XSBSZWNlaXZlZCB7Ym9keX0iKQoKIyBDb25maWd1cmUgdGhlIGNvbnN1bWVyCmNoYW5uZWwuYmFzaWNfY29uc3VtZShxdWV1ZT0naGVsbG8nLCBvbl9tZXNzYWdlX2NhbGxiYWNrPWNhbGxiYWNrLCBhdXRvX2Fjaz1UcnVlKQoKcHJpbnQoJyBbKl0gV2FpdGluZyBmb3IgbWVzc2FnZXMuIFRvIGV4aXQgcHJlc3MgQ1RSTCtDJykKY2hhbm5lbC5zdGFydF9jb25zdW1pbmcoKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import pika

# Connect to RabbitMQ broker
connection = pika.BlockingConnection(pika.ConnectionParameters('localhost'))
channel = connection.channel()

# Declare a queue
channel.queue_declare(queue='hello')

# Define the callback function
def callback(ch, method, properties, body):
    print(f&quot; [x] Received {body}&quot;)

# Configure the consumer
channel.basic_consume(queue='hello', on_message_callback=callback, auto_ack=True)

print(' [*] Waiting for messages. To exit press CTRL+C')
channel.start_consuming()</pre></div><div class='content'></div><h1>Events</h1>
<div class='content'></div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Events</strong>: Represent a state change or an action that has occurred in the system.</li>
<li><strong>Publishers and Subscribers</strong>: Services that generate events are publishers, and those that consume them are subscribers.</li>
<li><strong>Event Sourcing</strong>: A pattern where state changes are stored as a sequence of events.</li>
</ul>
</div><h2>Advantages</h2>
<div class='content'><ul>
<li><strong>Decoupling</strong>: Similar to messaging, services do not need to know the implementation of other services.</li>
<li><strong>Auditability</strong>: Events can be stored for auditing and historical analysis.</li>
<li><strong>Scalability</strong>: Services can scale independently.</li>
</ul>
</div><h2>Disadvantages</h2>
<div class='content'><ul>
<li><strong>Complexity</strong>: Event management and eventual consistency can be complicated.</li>
<li><strong>Latency</strong>: There may be additional latency due to the asynchronous nature.</li>
</ul>
</div><h2>Code Example</h2>
<div class='content'><p>Below is an example of how to publish and subscribe to events using Apache Kafka in Python.</p>
<h4>Publish Event</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBrYWZrYSBpbXBvcnQgS2Fma2FQcm9kdWNlcgppbXBvcnQganNvbgoKcHJvZHVjZXIgPSBLYWZrYVByb2R1Y2VyKGJvb3RzdHJhcF9zZXJ2ZXJzPSdsb2NhbGhvc3Q6OTA5MicsCiAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZV9zZXJpYWxpemVyPWxhbWJkYSB2OiBqc29uLmR1bXBzKHYpLmVuY29kZSgndXRmLTgnKSkKCiMgUHVibGlzaCBhbiBldmVudApldmVudCA9IHsnZXZlbnRfdHlwZSc6ICd1c2VyX3NpZ251cCcsICd1c2VyX2lkJzogJzEyMzQ1J30KcHJvZHVjZXIuc2VuZCgnZXZlbnRzJywgZXZlbnQpCnByb2R1Y2VyLmZsdXNoKCkKcHJpbnQoIiBbeF0gRXZlbnQgcHVibGlzaGVkIik="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from kafka import KafkaProducer
import json

producer = KafkaProducer(bootstrap_servers='localhost:9092',
                         value_serializer=lambda v: json.dumps(v).encode('utf-8'))

# Publish an event
event = {'event_type': 'user_signup', 'user_id': '12345'}
producer.send('events', event)
producer.flush()
print(&quot; [x] Event published&quot;)</pre></div><div class='content'><h4>Subscribe to Event</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBrYWZrYSBpbXBvcnQgS2Fma2FDb25zdW1lcgppbXBvcnQganNvbgoKY29uc3VtZXIgPSBLYWZrYUNvbnN1bWVyKCdldmVudHMnLAogICAgICAgICAgICAgICAgICAgICAgICAgYm9vdHN0cmFwX3NlcnZlcnM9J2xvY2FsaG9zdDo5MDkyJywKICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlX2Rlc2VyaWFsaXplcj1sYW1iZGEgeDoganNvbi5sb2Fkcyh4LmRlY29kZSgndXRmLTgnKSkpCgojIFByb2Nlc3MgZXZlbnRzCmZvciBtZXNzYWdlIGluIGNvbnN1bWVyOgogICAgZXZlbnQgPSBtZXNzYWdlLnZhbHVlCiAgICBwcmludChmIiBbeF0gRXZlbnQgcmVjZWl2ZWQ6IHtldmVudH0iKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from kafka import KafkaConsumer
import json

consumer = KafkaConsumer('events',
                         bootstrap_servers='localhost:9092',
                         value_deserializer=lambda x: json.loads(x.decode('utf-8')))

# Process events
for message in consumer:
    event = message.value
    print(f&quot; [x] Event received: {event}&quot;)</pre></div><div class='content'></div><h1>Comparison between Messaging and Events</h1>
<div class='content'><p>| Feature              | Messaging                       | Events                           |
|----------------------|---------------------------------|----------------------------------|
| Decoupling           | High                            | High                             |
| Scalability          | High                            | High                             |
| Resilience           | High                            | High                             |
| Complexity           | Moderate                        | High                             |
| Latency              | Moderate                        | Moderate                         |
| Auditability         | Low                             | High                             |</p>
</div><h1>Conclusion</h1>
<div class='content'><p>Messaging and events are essential patterns for communication in microservices systems. Both offer significant advantages in terms of decoupling, scalability, and resilience, although they also introduce additional complexities. The choice between messaging and events will depend on the specific requirements of your system and the trade-offs you are willing to accept.</p>
</div>
			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
