<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing and Deployment</title>

    <link rel="alternate" href="https://campusempresa.com/mod/go/10-04-testing-and-deployment" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/go/10-04-testing-and-deployment" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/go/10-04-testing-and-deployment" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=2" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/go/10-04-testing-and-deployment" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/go/10-04-testing-and-deployment" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Programming Languages</a>
				 					<a href="/categ/frameworks">Frameworks and Libraries</a>
				 					<a href="/categ/tech-tools">Technical Tools</a>
				 					<a href="/categ/foundations">Theoretical Foundations</a>
				 					<a href="/categ/soft-skills">Social Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='10-03-implementation' title="Implementation">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Testing and Deployment</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
			</div>
</div>
<div class='content'><p>In this final topic, we will cover the essential steps to test and deploy your Go application. This includes writing and running tests, ensuring your application is ready for production, and deploying it to a live environment.</p>
</div><h1><ol>
<li>Writing Tests</li>
</ol>
</h1>
<div class='content'></div><h2><p>Unit Testing</p>
</h2>
<div class='content'><p>Unit tests are used to test individual components of your application to ensure they work as expected. Go has a built-in testing package that makes it easy to write and run tests.</p>
<h4>Example: Writing a Simple Unit Test</h4>
<p>Let's say we have a simple function that adds two numbers:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gbWF0aC5nbwpwYWNrYWdlIG1hdGgKCmZ1bmMgQWRkKGEsIGIgaW50KSBpbnQgewogICAgcmV0dXJuIGEgKyBiCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// math.go
package math

func Add(a, b int) int {
    return a + b
}</pre></div><div class='content'><p>We can write a unit test for this function as follows:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gbWF0aF90ZXN0LmdvCnBhY2thZ2UgbWF0aAoKaW1wb3J0ICJ0ZXN0aW5nIgoKZnVuYyBUZXN0QWRkKHQgKnRlc3RpbmcuVCkgewogICAgcmVzdWx0IDo9IEFkZCgyLCAzKQogICAgZXhwZWN0ZWQgOj0gNQoKICAgIGlmIHJlc3VsdCAhPSBleHBlY3RlZCB7CiAgICAgICAgdC5FcnJvcmYoIkFkZCgyLCAzKSA9ICVkOyB3YW50ICVkIiwgcmVzdWx0LCBleHBlY3RlZCkKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// math_test.go
package math

import &quot;testing&quot;

func TestAdd(t *testing.T) {
    result := Add(2, 3)
    expected := 5

    if result != expected {
        t.Errorf(&quot;Add(2, 3) = %d; want %d&quot;, result, expected)
    }
}</pre></div><div class='content'></div><h2><p>Running Tests</p>
</h2>
<div class='content'><p>To run the tests, use the <code>go test</code> command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z28gdGVzdCAuLy4uLg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>go test ./...</pre></div><div class='content'><p>This command will run all tests in the current directory and its subdirectories.</p>
</div><h2><p>Table-Driven Tests</p>
</h2>
<div class='content'><p>Table-driven tests are a common pattern in Go, where you define a table of test cases and iterate over them. This is useful for testing multiple scenarios with the same test logic.</p>
<h4>Example: Table-Driven Test</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuYyBUZXN0QWRkKHQgKnRlc3RpbmcuVCkgewogICAgdGVzdHMgOj0gW11zdHJ1Y3QgewogICAgICAgIGEsIGIsIGV4cGVjdGVkIGludAogICAgfXsKICAgICAgICB7MSwgMSwgMn0sCiAgICAgICAgezIsIDIsIDR9LAogICAgICAgIHsyLCAzLCA1fSwKICAgIH0KCiAgICBmb3IgXywgdHQgOj0gcmFuZ2UgdGVzdHMgewogICAgICAgIHJlc3VsdCA6PSBBZGQodHQuYSwgdHQuYikKICAgICAgICBpZiByZXN1bHQgIT0gdHQuZXhwZWN0ZWQgewogICAgICAgICAgICB0LkVycm9yZigiQWRkKCVkLCAlZCkgPSAlZDsgd2FudCAlZCIsIHR0LmEsIHR0LmIsIHJlc3VsdCwgdHQuZXhwZWN0ZWQpCiAgICAgICAgfQogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>func TestAdd(t *testing.T) {
    tests := []struct {
        a, b, expected int
    }{
        {1, 1, 2},
        {2, 2, 4},
        {2, 3, 5},
    }

    for _, tt := range tests {
        result := Add(tt.a, tt.b)
        if result != tt.expected {
            t.Errorf(&quot;Add(%d, %d) = %d; want %d&quot;, tt.a, tt.b, result, tt.expected)
        }
    }
}</pre></div><div class='content'></div><h1><ol start="2">
<li>Integration Testing</li>
</ol>
</h1>
<div class='content'><p>Integration tests verify that different parts of your application work together as expected. These tests often involve external systems like databases or APIs.</p>
</div><h2><p>Example: Integration Test</p>
</h2>
<div class='content'><p>Assume we have a function that interacts with a database:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gZGIuZ28KcGFja2FnZSBkYgoKaW1wb3J0ICJkYXRhYmFzZS9zcWwiCgpmdW5jIEdldFVzZXIoZGIgKnNxbC5EQiwgaWQgaW50KSAoc3RyaW5nLCBlcnJvcikgewogICAgdmFyIG5hbWUgc3RyaW5nCiAgICBlcnIgOj0gZGIuUXVlcnlSb3coIlNFTEVDVCBuYW1lIEZST00gdXNlcnMgV0hFUkUgaWQgPSA/IiwgaWQpLlNjYW4oJm5hbWUpCiAgICBpZiBlcnIgIT0gbmlsIHsKICAgICAgICByZXR1cm4gIiIsIGVycgogICAgfQogICAgcmV0dXJuIG5hbWUsIG5pbAp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// db.go
package db

import &quot;database/sql&quot;

func GetUser(db *sql.DB, id int) (string, error) {
    var name string
    err := db.QueryRow(&quot;SELECT name FROM users WHERE id = ?&quot;, id).Scan(&amp;name)
    if err != nil {
        return &quot;&quot;, err
    }
    return name, nil
}</pre></div><div class='content'><p>We can write an integration test for this function:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gZGJfdGVzdC5nbwpwYWNrYWdlIGRiCgppbXBvcnQgKAogICAgImRhdGFiYXNlL3NxbCIKICAgICJ0ZXN0aW5nIgogICAgXyAiZ2l0aHViLmNvbS9tYXR0bi9nby1zcWxpdGUzIgopCgpmdW5jIFRlc3RHZXRVc2VyKHQgKnRlc3RpbmcuVCkgewogICAgZGIsIGVyciA6PSBzcWwuT3Blbigic3FsaXRlMyIsICI6bWVtb3J5OiIpCiAgICBpZiBlcnIgIT0gbmlsIHsKICAgICAgICB0LkZhdGFsKGVycikKICAgIH0KICAgIGRlZmVyIGRiLkNsb3NlKCkKCiAgICBfLCBlcnIgPSBkYi5FeGVjKCJDUkVBVEUgVEFCTEUgdXNlcnMgKGlkIElOVEVHRVIgUFJJTUFSWSBLRVksIG5hbWUgVEVYVCkiKQogICAgaWYgZXJyICE9IG5pbCB7CiAgICAgICAgdC5GYXRhbChlcnIpCiAgICB9CgogICAgXywgZXJyID0gZGIuRXhlYygiSU5TRVJUIElOVE8gdXNlcnMgKGlkLCBuYW1lKSBWQUxVRVMgKDEsICdKb2huIERvZScpIikKICAgIGlmIGVyciAhPSBuaWwgewogICAgICAgIHQuRmF0YWwoZXJyKQogICAgfQoKICAgIG5hbWUsIGVyciA6PSBHZXRVc2VyKGRiLCAxKQogICAgaWYgZXJyICE9IG5pbCB7CiAgICAgICAgdC5GYXRhbChlcnIpCiAgICB9CgogICAgaWYgbmFtZSAhPSAiSm9obiBEb2UiIHsKICAgICAgICB0LkVycm9yZigiR2V0VXNlcigxKSA9ICVzOyB3YW50ICdKb2huIERvZSciLCBuYW1lKQogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// db_test.go
package db

import (
    &quot;database/sql&quot;
    &quot;testing&quot;
    _ &quot;github.com/mattn/go-sqlite3&quot;
)

func TestGetUser(t *testing.T) {
    db, err := sql.Open(&quot;sqlite3&quot;, &quot;:memory:&quot;)
    if err != nil {
        t.Fatal(err)
    }
    defer db.Close()

    _, err = db.Exec(&quot;CREATE TABLE users (id INTEGER PRIMARY KEY, name TEXT)&quot;)
    if err != nil {
        t.Fatal(err)
    }

    _, err = db.Exec(&quot;INSERT INTO users (id, name) VALUES (1, 'John Doe')&quot;)
    if err != nil {
        t.Fatal(err)
    }

    name, err := GetUser(db, 1)
    if err != nil {
        t.Fatal(err)
    }

    if name != &quot;John Doe&quot; {
        t.Errorf(&quot;GetUser(1) = %s; want 'John Doe'&quot;, name)
    }
}</pre></div><div class='content'></div><h1><ol start="3">
<li>Deployment</li>
</ol>
</h1>
<div class='content'></div><h2><p>Building the Application</p>
</h2>
<div class='content'><p>To build your Go application for deployment, use the <code>go build</code> command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z28gYnVpbGQgLW8gbXlhcHA="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>go build -o myapp</pre></div><div class='content'><p>This will create an executable named <code>myapp</code>.</p>
</div><h2><p>Dockerizing the Application</p>
</h2>
<div class='content'><p>Docker is a popular tool for containerizing applications. Here is a simple Dockerfile for a Go application:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVc2UgdGhlIG9mZmljaWFsIEdvbGFuZyBpbWFnZSBhcyB0aGUgYmFzZSBpbWFnZQpGUk9NIGdvbGFuZzoxLjE3LWFscGluZQoKIyBTZXQgdGhlIHdvcmtpbmcgZGlyZWN0b3J5IGluc2lkZSB0aGUgY29udGFpbmVyCldPUktESVIgL2FwcAoKIyBDb3B5IHRoZSBHbyBzb3VyY2UgY29kZSB0byB0aGUgd29ya2luZyBkaXJlY3RvcnkKQ09QWSAuIC4KCiMgQnVpbGQgdGhlIEdvIGFwcGxpY2F0aW9uClJVTiBnbyBidWlsZCAtbyBteWFwcAoKIyBDb21tYW5kIHRvIHJ1biB0aGUgYXBwbGljYXRpb24KQ01EIFsiLi9teWFwcCJd"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Use the official Golang image as the base image
FROM golang:1.17-alpine

# Set the working directory inside the container
WORKDIR /app

# Copy the Go source code to the working directory
COPY . .

# Build the Go application
RUN go build -o myapp

# Command to run the application
CMD [&quot;./myapp&quot;]</pre></div><div class='content'><p>To build the Docker image, use the <code>docker build</code> command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9ja2VyIGJ1aWxkIC10IG15YXBwIC4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>docker build -t myapp .</pre></div><div class='content'></div><h2><p>Deploying to a Cloud Provider</p>
</h2>
<div class='content'><p>There are many cloud providers you can use to deploy your Go application, such as AWS, Google Cloud, and Heroku. Here, we'll briefly cover deploying to Heroku.</p>
<h4>Deploying to Heroku</h4>
<ol>
<li>
<p><strong>Install the Heroku CLI</strong>: Follow the instructions on the <a href="https://devcenter.heroku.com/articles/heroku-cli">Heroku website</a>.</p>
</li>
<li>
<p><strong>Login to Heroku</strong>: Use the following command to log in:</p>
<pre><code class="language-sh">heroku login
</code></pre>
</li>
<li>
<p><strong>Create a Heroku App</strong>: Create a new app on Heroku:</p>
<pre><code class="language-sh">heroku create myapp
</code></pre>
</li>
<li>
<p><strong>Deploy the Application</strong>: Push your code to Heroku:</p>
<pre><code class="language-sh">git push heroku main
</code></pre>
</li>
</ol>
<p>Heroku will automatically detect your Go application, build it, and deploy it.</p>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this topic, we covered the essential steps for testing and deploying your Go application. We discussed writing unit and integration tests, building the application, containerizing it with Docker, and deploying it to a cloud provider like Heroku. By following these steps, you can ensure your application is robust, reliable, and ready for production.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='10-03-implementation' title="Implementation">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Advertising</h1>
<p>This space is reserved for advertising.</p>
<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Thank you for collaborating!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
