<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Channels</title>

    <link rel="alternate" href="https://campusempresa.com/mod/go/05-02-channels" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/go/05-02-channels" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/go/05-02-channels" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/go/05-02-channels" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/go/05-02-channels" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-01-goroutines' title="Goroutines">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Channels</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-03-select-statement' title="Select Statement">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In Go, channels are a powerful feature that allows goroutines to communicate with each other and synchronize their execution. Channels provide a way to send and receive values between goroutines, making it easier to build concurrent programs.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Channel Creation</strong>: Channels are created using the <code>make</code> function.</li>
<li><strong>Channel Types</strong>: Channels can be typed to allow only specific types of data to be sent and received.</li>
<li><strong>Sending and Receiving</strong>: Use the <code>&lt;-</code> operator to send and receive data through channels.</li>
<li><strong>Buffered vs Unbuffered Channels</strong>: Channels can be buffered or unbuffered, affecting how they handle data.</li>
<li><strong>Channel Direction</strong>: Channels can be directional, meaning they can be restricted to sending or receiving.</li>
</ol>
</div><h1><p>Creating Channels</p>
</h1>
<div class='content'><p>Channels are created using the <code>make</code> function. Here's how you can create a channel:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2ggOj0gbWFrZShjaGFuIGludCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ch := make(chan int)</pre></div><div class='content'><p>This creates a channel that can send and receive <code>int</code> values.</p>
</div><h1><p>Sending and Receiving Data</p>
</h1>
<div class='content'><p>To send data to a channel, use the <code>&lt;-</code> operator:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2ggPC0gNDI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ch &lt;- 42</pre></div><div class='content'><p>To receive data from a channel, also use the <code>&lt;-</code> operator:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFsdWUgOj0gPC1jaA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>value := &lt;-ch</pre></div><div class='content'></div><h1><p>Example: Basic Channel Usage</p>
</h1>
<div class='content'><p>Here's a simple example demonstrating how to use channels:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgImZtdCIKKQoKZnVuYyBtYWluKCkgewogICAgLy8gQ3JlYXRlIGEgY2hhbm5lbAogICAgY2ggOj0gbWFrZShjaGFuIGludCkKCiAgICAvLyBTdGFydCBhIG5ldyBnb3JvdXRpbmUKICAgIGdvIGZ1bmMoKSB7CiAgICAgICAgLy8gU2VuZCBhIHZhbHVlIHRvIHRoZSBjaGFubmVsCiAgICAgICAgY2ggPC0gNDIKICAgIH0oKQoKICAgIC8vIFJlY2VpdmUgdGhlIHZhbHVlIGZyb20gdGhlIGNoYW5uZWwKICAgIHZhbHVlIDo9IDwtY2gKICAgIGZtdC5QcmludGxuKHZhbHVlKSAvLyBPdXRwdXQ6IDQyCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;fmt&quot;
)

func main() {
    // Create a channel
    ch := make(chan int)

    // Start a new goroutine
    go func() {
        // Send a value to the channel
        ch &lt;- 42
    }()

    // Receive the value from the channel
    value := &lt;-ch
    fmt.Println(value) // Output: 42
}</pre></div><div class='content'></div><h1><p>Buffered Channels</p>
</h1>
<div class='content'><p>Buffered channels allow you to specify the capacity of the channel. This means the channel can hold a certain number of values before it blocks.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2ggOj0gbWFrZShjaGFuIGludCwgMik="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ch := make(chan int, 2)</pre></div><div class='content'><p>In this example, the channel can hold up to 2 <code>int</code> values.</p>
</div><h2><p>Example: Buffered Channel</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgImZtdCIKKQoKZnVuYyBtYWluKCkgewogICAgLy8gQ3JlYXRlIGEgYnVmZmVyZWQgY2hhbm5lbCB3aXRoIGNhcGFjaXR5IDIKICAgIGNoIDo9IG1ha2UoY2hhbiBpbnQsIDIpCgogICAgLy8gU2VuZCB2YWx1ZXMgdG8gdGhlIGNoYW5uZWwKICAgIGNoIDwtIDEKICAgIGNoIDwtIDIKCiAgICAvLyBSZWNlaXZlIHZhbHVlcyBmcm9tIHRoZSBjaGFubmVsCiAgICBmbXQuUHJpbnRsbig8LWNoKSAvLyBPdXRwdXQ6IDEKICAgIGZtdC5QcmludGxuKDwtY2gpIC8vIE91dHB1dDogMgp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;fmt&quot;
)

func main() {
    // Create a buffered channel with capacity 2
    ch := make(chan int, 2)

    // Send values to the channel
    ch &lt;- 1
    ch &lt;- 2

    // Receive values from the channel
    fmt.Println(&lt;-ch) // Output: 1
    fmt.Println(&lt;-ch) // Output: 2
}</pre></div><div class='content'></div><h1><p>Channel Direction</p>
</h1>
<div class='content'><p>Channels can be directional, meaning they can be restricted to sending or receiving. This is useful for function parameters to ensure that the function only sends or receives data.</p>
</div><h2><p>Example: Directional Channels</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgImZtdCIKKQoKLy8gRnVuY3Rpb24gdGhhdCBvbmx5IHNlbmRzIGRhdGEgdG8gdGhlIGNoYW5uZWwKZnVuYyBzZW5kRGF0YShjaCBjaGFuPC0gaW50KSB7CiAgICBjaCA8LSA0Mgp9CgovLyBGdW5jdGlvbiB0aGF0IG9ubHkgcmVjZWl2ZXMgZGF0YSBmcm9tIHRoZSBjaGFubmVsCmZ1bmMgcmVjZWl2ZURhdGEoY2ggPC1jaGFuIGludCkgewogICAgdmFsdWUgOj0gPC1jaAogICAgZm10LlByaW50bG4odmFsdWUpCn0KCmZ1bmMgbWFpbigpIHsKICAgIGNoIDo9IG1ha2UoY2hhbiBpbnQpCgogICAgZ28gc2VuZERhdGEoY2gpCiAgICByZWNlaXZlRGF0YShjaCkKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;fmt&quot;
)

// Function that only sends data to the channel
func sendData(ch chan&lt;- int) {
    ch &lt;- 42
}

// Function that only receives data from the channel
func receiveData(ch &lt;-chan int) {
    value := &lt;-ch
    fmt.Println(value)
}

func main() {
    ch := make(chan int)

    go sendData(ch)
    receiveData(ch)
}</pre></div><div class='content'></div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise: Implement a Worker Pool</p>
</h2>
<div class='content'><p>Create a worker pool using goroutines and channels. The worker pool should process a set of tasks concurrently.</p>
<h4>Steps:</h4>
<ol>
<li>Create a channel to send tasks to workers.</li>
<li>Create a channel to receive results from workers.</li>
<li>Start a fixed number of worker goroutines.</li>
<li>Send tasks to the task channel.</li>
<li>Collect results from the result channel.</li>
</ol>
<h4>Solution:</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGFja2FnZSBtYWluCgppbXBvcnQgKAogICAgImZtdCIKICAgICJzeW5jIgopCgovLyBXb3JrZXIgZnVuY3Rpb24KZnVuYyB3b3JrZXIoaWQgaW50LCB0YXNrcyA8LWNoYW4gaW50LCByZXN1bHRzIGNoYW48LSBpbnQsIHdnICpzeW5jLldhaXRHcm91cCkgewogICAgZGVmZXIgd2cuRG9uZSgpCiAgICBmb3IgdGFzayA6PSByYW5nZSB0YXNrcyB7CiAgICAgICAgZm10LlByaW50ZigiV29ya2VyICVkIHByb2Nlc3NpbmcgdGFzayAlZFxuIiwgaWQsIHRhc2spCiAgICAgICAgcmVzdWx0cyA8LSB0YXNrICogMiAvLyBFeGFtcGxlIHByb2Nlc3NpbmcKICAgIH0KfQoKZnVuYyBtYWluKCkgewogICAgY29uc3QgbnVtV29ya2VycyA9IDMKICAgIGNvbnN0IG51bVRhc2tzID0gNQoKICAgIHRhc2tzIDo9IG1ha2UoY2hhbiBpbnQsIG51bVRhc2tzKQogICAgcmVzdWx0cyA6PSBtYWtlKGNoYW4gaW50LCBudW1UYXNrcykKCiAgICB2YXIgd2cgc3luYy5XYWl0R3JvdXAKCiAgICAvLyBTdGFydCB3b3JrZXJzCiAgICBmb3IgaSA6PSAxOyBpIDw9IG51bVdvcmtlcnM7IGkrKyB7CiAgICAgICAgd2cuQWRkKDEpCiAgICAgICAgZ28gd29ya2VyKGksIHRhc2tzLCByZXN1bHRzLCAmd2cpCiAgICB9CgogICAgLy8gU2VuZCB0YXNrcwogICAgZm9yIGkgOj0gMTsgaSA8PSBudW1UYXNrczsgaSsrIHsKICAgICAgICB0YXNrcyA8LSBpCiAgICB9CiAgICBjbG9zZSh0YXNrcykKCiAgICAvLyBXYWl0IGZvciBhbGwgd29ya2VycyB0byBmaW5pc2gKICAgIHdnLldhaXQoKQogICAgY2xvc2UocmVzdWx0cykKCiAgICAvLyBDb2xsZWN0IHJlc3VsdHMKICAgIGZvciByZXN1bHQgOj0gcmFuZ2UgcmVzdWx0cyB7CiAgICAgICAgZm10LlByaW50bG4oIlJlc3VsdDoiLCByZXN1bHQpCiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>package main

import (
    &quot;fmt&quot;
    &quot;sync&quot;
)

// Worker function
func worker(id int, tasks &lt;-chan int, results chan&lt;- int, wg *sync.WaitGroup) {
    defer wg.Done()
    for task := range tasks {
        fmt.Printf(&quot;Worker %d processing task %d\n&quot;, id, task)
        results &lt;- task * 2 // Example processing
    }
}

func main() {
    const numWorkers = 3
    const numTasks = 5

    tasks := make(chan int, numTasks)
    results := make(chan int, numTasks)

    var wg sync.WaitGroup

    // Start workers
    for i := 1; i &lt;= numWorkers; i++ {
        wg.Add(1)
        go worker(i, tasks, results, &amp;wg)
    }

    // Send tasks
    for i := 1; i &lt;= numTasks; i++ {
        tasks &lt;- i
    }
    close(tasks)

    // Wait for all workers to finish
    wg.Wait()
    close(results)

    // Collect results
    for result := range results {
        fmt.Println(&quot;Result:&quot;, result)
    }
}</pre></div><div class='content'></div><h2><p>Common Mistakes and Tips</p>
</h2>
<div class='content'><ul>
<li><strong>Deadlocks</strong>: Ensure that channels are properly closed to avoid deadlocks.</li>
<li><strong>Buffered Channels</strong>: Be cautious with buffer sizes to avoid unexpected blocking.</li>
<li><strong>Channel Direction</strong>: Use directional channels to enforce correct usage in functions.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>Channels are a fundamental part of Go's concurrency model, enabling safe communication between goroutines. Understanding how to create, use, and manage channels is crucial for building efficient concurrent programs. In the next section, we will explore the <code>select</code> statement, which allows you to handle multiple channels simultaneously.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-01-goroutines' title="Goroutines">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-03-select-statement' title="Select Statement">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
