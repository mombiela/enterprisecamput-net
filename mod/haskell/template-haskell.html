<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template Haskell</title>

    <link rel="alternate" href="https://campusempresa.com/mod/haskell/template-haskell" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/haskell/template-haskell" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/haskell/template-haskell" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/haskell/template-haskell" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/haskell/template-haskell" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='foreign-function-interface'>&#x25C4;Foreign Function Interface (FFI)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Template Haskell</a>
	</div>
	<div class='col-4 text-end'>
					<a href='metaprogramming'>Metaprogramming &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Template Haskell is a powerful metaprogramming tool in Haskell that allows you to generate and manipulate Haskell code programmatically. This topic will guide you through the basics of Template Haskell, its key concepts, and practical examples to help you understand and utilize this feature effectively.</p>
</div><h1>Introduction to Template Haskell</h1>
<div class='content'><p>Template Haskell (TH) is a Haskell extension that enables compile-time meta-programming. It allows you to write code that generates other code, which can be very useful for tasks such as:</p>
<ul>
<li>Code generation</li>
<li>Compile-time computation</li>
<li>Domain-specific language implementation</li>
<li>Optimization</li>
</ul>
<p>To use Template Haskell, you need to enable the extension by adding the following pragma at the top of your Haskell file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ey0jIExBTkdVQUdFIFRlbXBsYXRlSGFza2VsbCAjLX0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{-# LANGUAGE TemplateHaskell #-}</pre></div><div class='content'></div><h1>Key Concepts</h1>
<div class='content'></div><h2>Quasi-Quoting</h2>
<div class='content'><p>Quasi-quoting is a way to include code fragments within your Haskell code that will be processed by Template Haskell. Quasi-quoting uses special syntax to denote code that should be treated as a Template Haskell expression.</p>
<ul>
<li><strong>Expression Quasi-Quotes</strong>: Denoted by <code>[| ... |]</code>, used to quote expressions.</li>
<li><strong>Pattern Quasi-Quotes</strong>: Denoted by <code>[p| ... |]</code>, used to quote patterns.</li>
<li><strong>Type Quasi-Quotes</strong>: Denoted by <code>[t| ... |]</code>, used to quote types.</li>
<li><strong>Declaration Quasi-Quotes</strong>: Denoted by <code>[d| ... |]</code>, used to quote declarations.</li>
</ul>
<p>Example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ey0jIExBTkdVQUdFIFRlbXBsYXRlSGFza2VsbCAjLX0KCm1vZHVsZSBNYWluIHdoZXJlCgppbXBvcnQgTGFuZ3VhZ2UuSGFza2VsbC5USAoKbWFpbiA6OiBJTyAoKQptYWluID0gZG8KICBsZXQgZXhwciA9IFt8IDEgKyAyIHxdCiAgcHV0U3RyTG4gJCAiVGhlIHF1b3RlZCBleHByZXNzaW9uIGlzOiAiICsrIHNob3cgZXhwcg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{-# LANGUAGE TemplateHaskell #-}

module Main where

import Language.Haskell.TH

main :: IO ()
main = do
  let expr = [| 1 + 2 |]
  putStrLn $ &quot;The quoted expression is: &quot; ++ show expr</pre></div><div class='content'></div><h2>Splicing</h2>
<div class='content'><p>Splicing is the process of inserting the result of a Template Haskell computation into your code. Splicing is denoted by <code>$</code> for expressions and <code>$$</code> for declarations.</p>
<p>Example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ey0jIExBTkdVQUdFIFRlbXBsYXRlSGFza2VsbCAjLX0KCm1vZHVsZSBNYWluIHdoZXJlCgppbXBvcnQgTGFuZ3VhZ2UuSGFza2VsbC5USAoKbWFpbiA6OiBJTyAoKQptYWluID0gZG8KICBsZXQgZXhwciA9ICQoIFt8IDEgKyAyIHxdICkKICBwdXRTdHJMbiAkICJUaGUgc3BsaWNlZCBleHByZXNzaW9uIGV2YWx1YXRlcyB0bzogIiArKyBzaG93IGV4cHI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{-# LANGUAGE TemplateHaskell #-}

module Main where

import Language.Haskell.TH

main :: IO ()
main = do
  let expr = $( [| 1 + 2 |] )
  putStrLn $ &quot;The spliced expression evaluates to: &quot; ++ show expr</pre></div><div class='content'></div><h2>Reification</h2>
<div class='content'><p>Reification is the process of querying the compiler for information about a given name. This can be useful for introspection and generating code based on existing definitions.</p>
<p>Example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ey0jIExBTkdVQUdFIFRlbXBsYXRlSGFza2VsbCAjLX0KCm1vZHVsZSBNYWluIHdoZXJlCgppbXBvcnQgTGFuZ3VhZ2UuSGFza2VsbC5USAoKbWFpbiA6OiBJTyAoKQptYWluID0gZG8KICBpbmZvIDwtIHJlaWZ5ICdtYWluCiAgcHV0U3RyTG4gJCAiSW5mb3JtYXRpb24gYWJvdXQgJ21haW4nOiAiICsrIHNob3cgaW5mbw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{-# LANGUAGE TemplateHaskell #-}

module Main where

import Language.Haskell.TH

main :: IO ()
main = do
  info &lt;- reify 'main
  putStrLn $ &quot;Information about 'main': &quot; ++ show info</pre></div><div class='content'></div><h2>Generating Code</h2>
<div class='content'><p>Template Haskell allows you to generate code programmatically using its API. This can be particularly useful for creating boilerplate code or implementing domain-specific languages.</p>
<p>Example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ey0jIExBTkdVQUdFIFRlbXBsYXRlSGFza2VsbCAjLX0KCm1vZHVsZSBNYWluIHdoZXJlCgppbXBvcnQgTGFuZ3VhZ2UuSGFza2VsbC5USAoKZ2VuRnVuY3Rpb24gOjogUSBbRGVjXQpnZW5GdW5jdGlvbiA9IFtkfAogIGdlbmVyYXRlZEZ1bmN0aW9uIDo6IEludCAtPiBJbnQKICBnZW5lcmF0ZWRGdW5jdGlvbiB4ID0geCArIDEKICB8XQoKJChnZW5GdW5jdGlvbikKCm1haW4gOjogSU8gKCkKbWFpbiA9IHByaW50ICQgZ2VuZXJhdGVkRnVuY3Rpb24gNQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{-# LANGUAGE TemplateHaskell #-}

module Main where

import Language.Haskell.TH

genFunction :: Q [Dec]
genFunction = [d|
  generatedFunction :: Int -&gt; Int
  generatedFunction x = x + 1
  |]

$(genFunction)

main :: IO ()
main = print $ generatedFunction 5</pre></div><div class='content'></div><h1>Practical Examples</h1>
<div class='content'></div><h2>Example 1: Compile-Time Computation</h2>
<div class='content'><p>Template Haskell can be used to perform computations at compile time, which can then be spliced into the code.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ey0jIExBTkdVQUdFIFRlbXBsYXRlSGFza2VsbCAjLX0KCm1vZHVsZSBNYWluIHdoZXJlCgppbXBvcnQgTGFuZ3VhZ2UuSGFza2VsbC5USAoKZmFjdG9yaWFsIDo6IEludGVnZXIgLT4gSW50ZWdlcgpmYWN0b3JpYWwgMCA9IDEKZmFjdG9yaWFsIG4gPSBuICogZmFjdG9yaWFsIChuIC0gMSkKCmZhY3RvcmlhbFRIIDo6IEludGVnZXIgLT4gUSBFeHAKZmFjdG9yaWFsVEggbiA9IFt8IGZhY3RvcmlhbCBuIHxdCgptYWluIDo6IElPICgpCm1haW4gPSBkbwogIGxldCBmYWN0NSA9ICQoZmFjdG9yaWFsVEggNSkKICBwdXRTdHJMbiAkICJGYWN0b3JpYWwgb2YgNSBpczogIiArKyBzaG93IGZhY3Q1"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{-# LANGUAGE TemplateHaskell #-}

module Main where

import Language.Haskell.TH

factorial :: Integer -&gt; Integer
factorial 0 = 1
factorial n = n * factorial (n - 1)

factorialTH :: Integer -&gt; Q Exp
factorialTH n = [| factorial n |]

main :: IO ()
main = do
  let fact5 = $(factorialTH 5)
  putStrLn $ &quot;Factorial of 5 is: &quot; ++ show fact5</pre></div><div class='content'></div><h2>Example 2: Generating Boilerplate Code</h2>
<div class='content'><p>Template Haskell can be used to generate repetitive boilerplate code, such as instances for data types.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ey0jIExBTkdVQUdFIFRlbXBsYXRlSGFza2VsbCAjLX0KCm1vZHVsZSBNYWluIHdoZXJlCgppbXBvcnQgTGFuZ3VhZ2UuSGFza2VsbC5USAoKZGF0YSBNeURhdGEgPSBNeURhdGEgSW50IFN0cmluZwoKZGVyaXZlU2hvdyA6OiBOYW1lIC0+IFEgW0RlY10KZGVyaXZlU2hvdyBuYW1lID0gW2R8CiAgaW5zdGFuY2UgU2hvdyAkKGNvblQgbmFtZSkgd2hlcmUKICAgIHNob3cgKE15RGF0YSBpIHMpID0gIk15RGF0YSAiICsrIHNob3cgaSArKyAiICIgKysgc2hvdyBzCiAgfF0KCiQoZGVyaXZlU2hvdyAnJ015RGF0YSkKCm1haW4gOjogSU8gKCkKbWFpbiA9IHByaW50ICQgTXlEYXRhIDQyICJIZWxsbyI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{-# LANGUAGE TemplateHaskell #-}

module Main where

import Language.Haskell.TH

data MyData = MyData Int String

deriveShow :: Name -&gt; Q [Dec]
deriveShow name = [d|
  instance Show $(conT name) where
    show (MyData i s) = &quot;MyData &quot; ++ show i ++ &quot; &quot; ++ show s
  |]

$(deriveShow ''MyData)

main :: IO ()
main = print $ MyData 42 &quot;Hello&quot;</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Template Haskell is a powerful tool that can greatly enhance your Haskell programming by allowing you to generate and manipulate code at compile time. By understanding and utilizing quasi-quoting, splicing, reification, and code generation, you can write more efficient and maintainable Haskell programs. Practice with the provided examples and explore further to master Template Haskell and leverage its full potential in your projects.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='foreign-function-interface'>&#x25C4;Foreign Function Interface (FFI)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Template Haskell</a>
	</div>
	<div class='col-4 text-end'>
					<a href='metaprogramming'>Metaprogramming &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
