<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing TypeScript Code</title>

    <link rel="alternate" href="https://campusempresa.com/mod/typescript/06-02-testing-typescript" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/typescript/06-02-testing-typescript" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/typescript/06-02-testing-typescript" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/typescript/06-02-testing-typescript" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/typescript/06-02-testing-typescript" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Programming Languages</a>
				 					<a href="/categ/frameworks">Frameworks and Libraries</a>
				 					<a href="/categ/tech-tools">Technical Tools</a>
				 					<a href="/categ/foundations">Theoretical Foundations</a>
				 					<a href="/categ/soft-skills">Social Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-01-linting-formatting' title="Linting and Formatting">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Testing TypeScript Code</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-03-typescript-webpack' title="TypeScript with Webpack">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Testing is a crucial part of software development, ensuring that your code works as expected and helping to catch bugs early. In this section, we will cover how to test TypeScript code using popular testing frameworks and tools.</p>
</div><h1><ol>
<li>Introduction to Testing in TypeScript</li>
</ol>
</h1>
<div class='content'></div><h2><p>Key Concepts:</p>
</h2>
<div class='content'><ul>
<li><strong>Unit Testing</strong>: Testing individual units or components of the code.</li>
<li><strong>Integration Testing</strong>: Testing the interaction between different units or components.</li>
<li><strong>End-to-End (E2E) Testing</strong>: Testing the complete flow of an application from start to finish.</li>
</ul>
</div><h2><p>Popular Testing Frameworks:</p>
</h2>
<div class='content'><ul>
<li><strong>Jest</strong>: A delightful JavaScript testing framework with a focus on simplicity.</li>
<li><strong>Mocha</strong>: A flexible JavaScript test framework for Node.js.</li>
<li><strong>Chai</strong>: A BDD / TDD assertion library for Node.js and the browser.</li>
<li><strong>Sinon</strong>: Standalone test spies, stubs, and mocks for JavaScript.</li>
</ul>
</div><h1><ol start="2">
<li>Setting Up Jest for TypeScript</li>
</ol>
</h1>
<div class='content'></div><h2><p>Step-by-Step Guide:</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Initialize a new Node.js project</strong>:</p>
<pre><code class="language-bash">npm init -y
</code></pre>
</li>
<li>
<p><strong>Install Jest and TypeScript</strong>:</p>
<pre><code class="language-bash">npm install --save-dev jest @types/jest ts-jest typescript
</code></pre>
</li>
<li>
<p><strong>Configure Jest</strong>:
Create a <code>jest.config.js</code> file:</p>
<pre><code class="language-javascript">module.exports = {
  preset: 'ts-jest',
  testEnvironment: 'node',
};
</code></pre>
</li>
<li>
<p><strong>Add a TypeScript configuration file</strong>:
Create a <code>tsconfig.json</code> file:</p>
<pre><code class="language-json">{
  &quot;compilerOptions&quot;: {
    &quot;target&quot;: &quot;ES6&quot;,
    &quot;module&quot;: &quot;commonjs&quot;,
    &quot;strict&quot;: true,
    &quot;esModuleInterop&quot;: true,
    &quot;skipLibCheck&quot;: true,
    &quot;forceConsistentCasingInFileNames&quot;: true
  }
}
</code></pre>
</li>
<li>
<p><strong>Add a test script to <code>package.json</code></strong>:</p>
<pre><code class="language-json">&quot;scripts&quot;: {
  &quot;test&quot;: &quot;jest&quot;
}
</code></pre>
</li>
</ol>
</div><h1><ol start="3">
<li>Writing Your First Test</li>
</ol>
</h1>
<div class='content'></div><h2><p>Example Code:</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Create a simple function</strong>:
Create a file <code>src/sum.ts</code>:</p>
<pre><code class="language-typescript">export function sum(a: number, b: number): number {
  return a + b;
}
</code></pre>
</li>
<li>
<p><strong>Write a test for the function</strong>:
Create a file <code>src/sum.test.ts</code>:</p>
<pre><code class="language-typescript">import { sum } from './sum';

test('adds 1 + 2 to equal 3', () =&gt; {
  expect(sum(1, 2)).toBe(3);
});
</code></pre>
</li>
<li>
<p><strong>Run the test</strong>:</p>
<pre><code class="language-bash">npm test
</code></pre>
</li>
</ol>
</div><h2><p>Explanation:</p>
</h2>
<div class='content'><ul>
<li><strong>import { sum } from './sum';</strong>: Import the function to be tested.</li>
<li><strong>test('adds 1 + 2 to equal 3', () =&gt; { ... });</strong>: Define a test case.</li>
<li><strong>expect(sum(1, 2)).toBe(3);</strong>: Assert that the result of <code>sum(1, 2)</code> is <code>3</code>.</li>
</ul>
</div><h1><ol start="4">
<li>Advanced Testing Techniques</li>
</ol>
</h1>
<div class='content'></div><h2><p>Mocking with Jest:</p>
</h2>
<div class='content'><p>Mocking is useful for isolating the unit of code being tested.</p>
<ol>
<li>
<p><strong>Mocking a function</strong>:</p>
<pre><code class="language-typescript">const mockFn = jest.fn().mockReturnValue(42);
expect(mockFn()).toBe(42);
</code></pre>
</li>
<li>
<p><strong>Mocking a module</strong>:</p>
<pre><code class="language-typescript">jest.mock('./moduleToMock');
import { functionToMock } from './moduleToMock';
</code></pre>
</li>
</ol>
</div><h2><p>Testing Asynchronous Code:</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Using async/await</strong>:</p>
<pre><code class="language-typescript">test('async test', async () =&gt; {
  const data = await fetchData();
  expect(data).toBe('some data');
});
</code></pre>
</li>
<li>
<p><strong>Using Promises</strong>:</p>
<pre><code class="language-typescript">test('promise test', () =&gt; {
  return fetchData().then(data =&gt; {
    expect(data).toBe('some data');
  });
});
</code></pre>
</li>
</ol>
</div><h1><ol start="5">
<li>Practical Exercises</li>
</ol>
</h1>
<div class='content'></div><h2><p>Exercise 1: Testing a Calculator Module</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Create a calculator module</strong>:</p>
<pre><code class="language-typescript">// src/calculator.ts
export class Calculator {
  add(a: number, b: number): number {
    return a + b;
  }

  subtract(a: number, b: number): number {
    return a - b;
  }

  multiply(a: number, b: number): number {
    return a * b;
  }

  divide(a: number, b: number): number {
    if (b === 0) throw new Error('Cannot divide by zero');
    return a / b;
  }
}
</code></pre>
</li>
<li>
<p><strong>Write tests for the calculator module</strong>:</p>
<pre><code class="language-typescript">// src/calculator.test.ts
import { Calculator } from './calculator';

let calculator: Calculator;

beforeEach(() =&gt; {
  calculator = new Calculator();
});

test('adds 1 + 2 to equal 3', () =&gt; {
  expect(calculator.add(1, 2)).toBe(3);
});

test('subtracts 5 - 2 to equal 3', () =&gt; {
  expect(calculator.subtract(5, 2)).toBe(3);
});

test('multiplies 2 * 3 to equal 6', () =&gt; {
  expect(calculator.multiply(2, 3)).toBe(6);
});

test('divides 6 / 2 to equal 3', () =&gt; {
  expect(calculator.divide(6, 2)).toBe(3);
});

test('throws error when dividing by zero', () =&gt; {
  expect(() =&gt; calculator.divide(1, 0)).toThrow('Cannot divide by zero');
});
</code></pre>
</li>
</ol>
</div><h2><p>Solution:</p>
</h2>
<div class='content'><ul>
<li><strong>beforeEach</strong>: Initializes a new instance of <code>Calculator</code> before each test.</li>
<li><strong>expect</strong>: Asserts the expected outcome of each method.</li>
</ul>
</div><h1><ol start="6">
<li>Common Mistakes and Tips</li>
</ol>
</h1>
<div class='content'></div><h2><p>Common Mistakes:</p>
</h2>
<div class='content'><ul>
<li><strong>Not isolating tests</strong>: Ensure each test is independent.</li>
<li><strong>Ignoring edge cases</strong>: Test for edge cases like dividing by zero.</li>
<li><strong>Not using mocks</strong>: Use mocks to isolate the unit of code being tested.</li>
</ul>
</div><h2><p>Tips:</p>
</h2>
<div class='content'><ul>
<li><strong>Use descriptive test names</strong>: Clearly describe what each test is verifying.</li>
<li><strong>Keep tests small and focused</strong>: Test one thing at a time.</li>
<li><strong>Run tests frequently</strong>: Integrate tests into your development workflow.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the basics of testing TypeScript code using Jest. We set up a testing environment, wrote our first test, and explored advanced testing techniques. Testing is an essential skill for any developer, and mastering it will help you write more reliable and maintainable code. In the next module, we will delve into using TypeScript with Webpack to bundle and optimize your code.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-01-linting-formatting' title="Linting and Formatting">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-03-typescript-webpack' title="TypeScript with Webpack">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
