<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Context API with TypeScript</title>

    <link rel="alternate" href="https://campusempresa.com/mod/typescript/context-api-typescript" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/typescript/context-api-typescript" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/typescript/context-api-typescript" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/typescript/context-api-typescript" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/typescript/context-api-typescript" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='hooks-typescript'>&#x25C4;Hooks with TypeScript</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Context API with TypeScript</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-testing'>Introduction to Testing &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Context API</h1>
<div class='content'><p>The Context API in React is a powerful feature that allows you to manage state globally across your application without the need for prop drilling. When combined with TypeScript, it provides a robust and type-safe way to handle state.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Context</strong>: A way to pass data through the component tree without having to pass props down manually at every level.</li>
<li><strong>Provider</strong>: A component that provides the context value to its children.</li>
<li><strong>Consumer</strong>: A component that consumes the context value.</li>
</ul>
</div><h1>Creating a Context</h1>
<div class='content'><p>To create a context in TypeScript, you need to define the shape of the context value using an interface.</p>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZVN0YXRlLCBSZWFjdE5vZGUgfSBmcm9tICdyZWFjdCc7CgovLyBEZWZpbmUgdGhlIHNoYXBlIG9mIHRoZSBjb250ZXh0IHZhbHVlCmludGVyZmFjZSBUaGVtZUNvbnRleHRUeXBlIHsKICB0aGVtZTogc3RyaW5nOwogIHRvZ2dsZVRoZW1lOiAoKSA9PiB2b2lkOwp9CgovLyBDcmVhdGUgdGhlIGNvbnRleHQgd2l0aCBhIGRlZmF1bHQgdmFsdWUKY29uc3QgVGhlbWVDb250ZXh0ID0gY3JlYXRlQ29udGV4dDxUaGVtZUNvbnRleHRUeXBlIHwgdW5kZWZpbmVkPih1bmRlZmluZWQpOwoKLy8gQ3JlYXRlIGEgcHJvdmlkZXIgY29tcG9uZW50CmNvbnN0IFRoZW1lUHJvdmlkZXI6IFJlYWN0LkZDPHsgY2hpbGRyZW46IFJlYWN0Tm9kZSB9PiA9ICh7IGNoaWxkcmVuIH0pID0+IHsKICBjb25zdCBbdGhlbWUsIHNldFRoZW1lXSA9IHVzZVN0YXRlPHN0cmluZz4oJ2xpZ2h0Jyk7CgogIGNvbnN0IHRvZ2dsZVRoZW1lID0gKCkgPT4gewogICAgc2V0VGhlbWUoKHByZXZUaGVtZSkgPT4gKHByZXZUaGVtZSA9PT0gJ2xpZ2h0JyA/ICdkYXJrJyA6ICdsaWdodCcpKTsKICB9OwoKICByZXR1cm4gKAogICAgPFRoZW1lQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17eyB0aGVtZSwgdG9nZ2xlVGhlbWUgfX0+CiAgICAgIHtjaGlsZHJlbn0KICAgIDwvVGhlbWVDb250ZXh0LlByb3ZpZGVyPgogICk7Cn07CgovLyBDdXN0b20gaG9vayB0byB1c2UgdGhlIFRoZW1lQ29udGV4dApjb25zdCB1c2VUaGVtZSA9ICgpID0+IHsKICBjb25zdCBjb250ZXh0ID0gdXNlQ29udGV4dChUaGVtZUNvbnRleHQpOwogIGlmIChjb250ZXh0ID09PSB1bmRlZmluZWQpIHsKICAgIHRocm93IG5ldyBFcnJvcigndXNlVGhlbWUgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIFRoZW1lUHJvdmlkZXInKTsKICB9CiAgcmV0dXJuIGNvbnRleHQ7Cn07CgpleHBvcnQgeyBUaGVtZVByb3ZpZGVyLCB1c2VUaGVtZSB9Ow=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React, { createContext, useContext, useState, ReactNode } from 'react';

// Define the shape of the context value
interface ThemeContextType {
  theme: string;
  toggleTheme: () =&gt; void;
}

// Create the context with a default value
const ThemeContext = createContext&lt;ThemeContextType | undefined&gt;(undefined);

// Create a provider component
const ThemeProvider: React.FC&lt;{ children: ReactNode }&gt; = ({ children }) =&gt; {
  const [theme, setTheme] = useState&lt;string&gt;('light');

  const toggleTheme = () =&gt; {
    setTheme((prevTheme) =&gt; (prevTheme === 'light' ? 'dark' : 'light'));
  };

  return (
    &lt;ThemeContext.Provider value={{ theme, toggleTheme }}&gt;
      {children}
    &lt;/ThemeContext.Provider&gt;
  );
};

// Custom hook to use the ThemeContext
const useTheme = () =&gt; {
  const context = useContext(ThemeContext);
  if (context === undefined) {
    throw new Error('useTheme must be used within a ThemeProvider');
  }
  return context;
};

export { ThemeProvider, useTheme };</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>ThemeContextType</strong>: Defines the shape of the context value.</li>
<li><strong>ThemeContext</strong>: Creates the context with a default value of <code>undefined</code>.</li>
<li><strong>ThemeProvider</strong>: Provides the context value to its children.</li>
<li><strong>useTheme</strong>: Custom hook to consume the context value.</li>
</ul>
</div><h1>Using the Context in Components</h1>
<div class='content'><p>Once the context is created and provided, you can use it in any component within the provider.</p>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgVGhlbWVQcm92aWRlciwgdXNlVGhlbWUgfSBmcm9tICcuL1RoZW1lQ29udGV4dCc7Cgpjb25zdCBUaGVtZVRvZ2dsZUJ1dHRvbjogUmVhY3QuRkMgPSAoKSA9PiB7CiAgY29uc3QgeyB0aGVtZSwgdG9nZ2xlVGhlbWUgfSA9IHVzZVRoZW1lKCk7CgogIHJldHVybiAoCiAgICA8YnV0dG9uIG9uQ2xpY2s9e3RvZ2dsZVRoZW1lfT4KICAgICAgQ3VycmVudCBUaGVtZToge3RoZW1lfQogICAgPC9idXR0b24+CiAgKTsKfTsKCmNvbnN0IEFwcDogUmVhY3QuRkMgPSAoKSA9PiB7CiAgcmV0dXJuICgKICAgIDxUaGVtZVByb3ZpZGVyPgogICAgICA8ZGl2PgogICAgICAgIDxoMT5XZWxjb21lIHRvIHRoZSBUaGVtZSBBcHA8L2gxPgogICAgICAgIDxUaGVtZVRvZ2dsZUJ1dHRvbiAvPgogICAgICA8L2Rpdj4KICAgIDwvVGhlbWVQcm92aWRlcj4KICApOwp9OwoKZXhwb3J0IGRlZmF1bHQgQXBwOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React from 'react';
import { ThemeProvider, useTheme } from './ThemeContext';

const ThemeToggleButton: React.FC = () =&gt; {
  const { theme, toggleTheme } = useTheme();

  return (
    &lt;button onClick={toggleTheme}&gt;
      Current Theme: {theme}
    &lt;/button&gt;
  );
};

const App: React.FC = () =&gt; {
  return (
    &lt;ThemeProvider&gt;
      &lt;div&gt;
        &lt;h1&gt;Welcome to the Theme App&lt;/h1&gt;
        &lt;ThemeToggleButton /&gt;
      &lt;/div&gt;
    &lt;/ThemeProvider&gt;
  );
};

export default App;</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>ThemeToggleButton</strong>: A component that consumes the context value using the <code>useTheme</code> hook and toggles the theme on button click.</li>
<li><strong>App</strong>: The main application component that wraps its children with the <code>ThemeProvider</code>.</li>
</ul>
</div><h1>Type Safety with TypeScript</h1>
<div class='content'><p>Using TypeScript with the Context API ensures that the context value is type-safe, reducing the risk of runtime errors.</p>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoVGhlbWVDb250ZXh0KTsKaWYgKGNvbnRleHQgPT09IHVuZGVmaW5lZCkgewogIHRocm93IG5ldyBFcnJvcigndXNlVGhlbWUgbXVzdCBiZSB1c2VkIHdpdGhpbiBhIFRoZW1lUHJvdmlkZXInKTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const context = useContext(ThemeContext);
if (context === undefined) {
  throw new Error('useTheme must be used within a ThemeProvider');
}</pre></div><div class='content'><ul>
<li>This check ensures that the context is not <code>undefined</code>, providing a type-safe way to consume the context value.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>The Context API, when combined with TypeScript, provides a powerful and type-safe way to manage state globally in your React application. By defining the shape of the context value using TypeScript interfaces, you can ensure that your context values are consistent and type-safe throughout your application.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='hooks-typescript'>&#x25C4;Hooks with TypeScript</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Context API with TypeScript</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-testing'>Introduction to Testing &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
