<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Async/Await</title>

    <link rel="alternate" href="https://campusempresa.com/mod/typescript/05-02-async-await" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/typescript/05-02-async-await" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/typescript/05-02-async-await" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/typescript/05-02-async-await" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/typescript/05-02-async-await" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='05-01-promises' title="Promises">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Async/Await</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='05-03-working-with-apis' title="Working with APIs">Next &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In this section, we will explore the <code>async</code> and <code>await</code> keywords in TypeScript, which provide a more readable and straightforward way to handle asynchronous operations compared to traditional promise chaining. By the end of this section, you will understand how to use <code>async</code> and <code>await</code> to write cleaner and more maintainable asynchronous code.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Async Functions</strong>: Functions declared with the <code>async</code> keyword.</li>
<li><strong>Await Keyword</strong>: Used to pause the execution of an <code>async</code> function until a promise is resolved.</li>
<li><strong>Error Handling</strong>: Using <code>try...catch</code> blocks to handle errors in <code>async</code> functions.</li>
</ol>
</div><h1>Async Functions</h1>
<div class='content'><p>An <code>async</code> function is a function that returns a promise. The <code>async</code> keyword is placed before the function declaration.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZmV0Y2hEYXRhKCk6IFByb21pc2U8c3RyaW5nPiB7CiAgICByZXR1cm4gIkRhdGEgZmV0Y2hlZCI7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function fetchData(): Promise&lt;string&gt; {
    return &quot;Data fetched&quot;;
}</pre></div><div class='content'><p>In this example, <code>fetchData</code> is an <code>async</code> function that returns a promise which resolves to the string &quot;Data fetched&quot;.</p>
</div><h1>Await Keyword</h1>
<div class='content'><p>The <code>await</code> keyword can only be used inside <code>async</code> functions. It pauses the execution of the function until the promise is resolved.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZmV0Y2hEYXRhKCk6IFByb21pc2U8c3RyaW5nPiB7CiAgICByZXR1cm4gIkRhdGEgZmV0Y2hlZCI7Cn0KCmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NEYXRhKCkgewogICAgY29uc3QgZGF0YSA9IGF3YWl0IGZldGNoRGF0YSgpOwogICAgY29uc29sZS5sb2coZGF0YSk7IC8vIE91dHB1dDogRGF0YSBmZXRjaGVkCn0KCnByb2Nlc3NEYXRhKCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function fetchData(): Promise&lt;string&gt; {
    return &quot;Data fetched&quot;;
}

async function processData() {
    const data = await fetchData();
    console.log(data); // Output: Data fetched
}

processData();</pre></div><div class='content'><p>In this example, <code>await fetchData()</code> pauses the execution of <code>processData</code> until <code>fetchData</code> resolves, and then assigns the resolved value to <code>data</code>.</p>
</div><h1>Error Handling</h1>
<div class='content'><p>Errors in <code>async</code> functions can be caught using <code>try...catch</code> blocks.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZmV0Y2hEYXRhKCk6IFByb21pc2U8c3RyaW5nPiB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIkZhaWxlZCB0byBmZXRjaCBkYXRhIik7Cn0KCmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NEYXRhKCkgewogICAgdHJ5IHsKICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgZmV0Y2hEYXRhKCk7CiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yOiIsIGVycm9yLm1lc3NhZ2UpOyAvLyBPdXRwdXQ6IEVycm9yOiBGYWlsZWQgdG8gZmV0Y2ggZGF0YQogICAgfQp9Cgpwcm9jZXNzRGF0YSgpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function fetchData(): Promise&lt;string&gt; {
    throw new Error(&quot;Failed to fetch data&quot;);
}

async function processData() {
    try {
        const data = await fetchData();
        console.log(data);
    } catch (error) {
        console.error(&quot;Error:&quot;, error.message); // Output: Error: Failed to fetch data
    }
}

processData();</pre></div><div class='content'><p>In this example, if <code>fetchData</code> throws an error, it is caught in the <code>catch</code> block, and the error message is logged to the console.</p>
</div><h1>Practical Example: Fetching Data from an API</h1>
<div class='content'><p>Let's see a practical example of using <code>async</code> and <code>await</code> to fetch data from an API.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZmV0Y2hVc2VyRGF0YSh1c2VySWQ6IG51bWJlcik6IFByb21pc2U8YW55PiB7CiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vdXNlcnMvJHt1c2VySWR9YCk7CiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJOZXR3b3JrIHJlc3BvbnNlIHdhcyBub3Qgb2siKTsKICAgIH0KICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7CiAgICByZXR1cm4gZGF0YTsKfQoKYXN5bmMgZnVuY3Rpb24gZGlzcGxheVVzZXJEYXRhKHVzZXJJZDogbnVtYmVyKSB7CiAgICB0cnkgewogICAgICAgIGNvbnN0IHVzZXJEYXRhID0gYXdhaXQgZmV0Y2hVc2VyRGF0YSh1c2VySWQpOwogICAgICAgIGNvbnNvbGUubG9nKHVzZXJEYXRhKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3IgZmV0Y2hpbmcgdXNlciBkYXRhOiIsIGVycm9yLm1lc3NhZ2UpOwogICAgfQp9CgpkaXNwbGF5VXNlckRhdGEoMSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function fetchUserData(userId: number): Promise&lt;any&gt; {
    const response = await fetch(`https://jsonplaceholder.typicode.com/users/${userId}`);
    if (!response.ok) {
        throw new Error(&quot;Network response was not ok&quot;);
    }
    const data = await response.json();
    return data;
}

async function displayUserData(userId: number) {
    try {
        const userData = await fetchUserData(userId);
        console.log(userData);
    } catch (error) {
        console.error(&quot;Error fetching user data:&quot;, error.message);
    }
}

displayUserData(1);</pre></div><div class='content'><p>In this example:</p>
<ol>
<li><code>fetchUserData</code> is an <code>async</code> function that fetches user data from an API.</li>
<li><code>displayUserData</code> is an <code>async</code> function that calls <code>fetchUserData</code> and handles any errors that may occur.</li>
</ol>
</div><h1>Exercises</h1>
<div class='content'></div><h2>Exercise 1: Basic Async/Await</h2>
<div class='content'><p>Write an <code>async</code> function <code>getNumber</code> that returns a promise resolving to the number 42. Then, write another <code>async</code> function <code>printNumber</code> that uses <code>await</code> to get the number from <code>getNumber</code> and logs it to the console.</p>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZ2V0TnVtYmVyKCk6IFByb21pc2U8bnVtYmVyPiB7CiAgICByZXR1cm4gNDI7Cn0KCmFzeW5jIGZ1bmN0aW9uIHByaW50TnVtYmVyKCkgewogICAgY29uc3QgbnVtYmVyID0gYXdhaXQgZ2V0TnVtYmVyKCk7CiAgICBjb25zb2xlLmxvZyhudW1iZXIpOyAvLyBPdXRwdXQ6IDQyCn0KCnByaW50TnVtYmVyKCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function getNumber(): Promise&lt;number&gt; {
    return 42;
}

async function printNumber() {
    const number = await getNumber();
    console.log(number); // Output: 42
}

printNumber();</pre></div><div class='content'></div><h2>Exercise 2: Error Handling</h2>
<div class='content'><p>Modify the <code>getNumber</code> function to throw an error with the message &quot;Something went wrong&quot;. Update the <code>printNumber</code> function to handle this error and log &quot;Error: Something went wrong&quot; to the console.</p>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZ2V0TnVtYmVyKCk6IFByb21pc2U8bnVtYmVyPiB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIlNvbWV0aGluZyB3ZW50IHdyb25nIik7Cn0KCmFzeW5jIGZ1bmN0aW9uIHByaW50TnVtYmVyKCkgewogICAgdHJ5IHsKICAgICAgICBjb25zdCBudW1iZXIgPSBhd2FpdCBnZXROdW1iZXIoKTsKICAgICAgICBjb25zb2xlLmxvZyhudW1iZXIpOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvcjoiLCBlcnJvci5tZXNzYWdlKTsgLy8gT3V0cHV0OiBFcnJvcjogU29tZXRoaW5nIHdlbnQgd3JvbmcKICAgIH0KfQoKcHJpbnROdW1iZXIoKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function getNumber(): Promise&lt;number&gt; {
    throw new Error(&quot;Something went wrong&quot;);
}

async function printNumber() {
    try {
        const number = await getNumber();
        console.log(number);
    } catch (error) {
        console.error(&quot;Error:&quot;, error.message); // Output: Error: Something went wrong
    }
}

printNumber();</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered the basics of <code>async</code> and <code>await</code> in TypeScript. We learned how to declare <code>async</code> functions, use the <code>await</code> keyword to pause execution until a promise is resolved, and handle errors using <code>try...catch</code> blocks. We also saw practical examples and exercises to reinforce these concepts. In the next section, we will explore working with APIs in more detail.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='05-01-promises' title="Promises">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='05-03-working-with-apis' title="Working with APIs">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
