<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Organization</title>

    <link rel="alternate" href="https://campusempresa.com/mod/terraform/07-01-code-organization" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/terraform/07-01-code-organization" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/terraform/07-01-code-organization" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/terraform/07-01-code-organization" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/terraform/07-01-code-organization" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-04-terraform-import' title="Terraform Import">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Code Organization</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-02-version-control' title="Version Control">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Effective code organization is crucial for maintaining, scaling, and collaborating on Terraform projects. In this section, we will cover best practices for organizing your Terraform code to ensure it is clean, modular, and easy to manage.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Directory Structure</strong>: Organizing files and directories in a logical manner.</li>
<li><strong>Modules</strong>: Reusable components that encapsulate resources.</li>
<li><strong>Naming Conventions</strong>: Consistent naming for resources, variables, and outputs.</li>
<li><strong>File Separation</strong>: Splitting configuration into multiple files for clarity.</li>
<li><strong>Version Control</strong>: Using version control systems to track changes.</li>
</ol>
</div><h1><p>Directory Structure</p>
</h1>
<div class='content'><p>A well-organized directory structure helps in managing Terraform configurations efficiently. Here is a recommended structure:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvamVjdC8K4pSc4pSA4pSAIG1vZHVsZXMvCuKUgiAgIOKUnOKUgOKUgCBuZXR3b3JrLwrilIIgICDilIIgICDilJzilIDilIAgbWFpbi50ZgrilIIgICDilIIgICDilJzilIDilIAgdmFyaWFibGVzLnRmCuKUgiAgIOKUgiAgIOKUlOKUgOKUgCBvdXRwdXRzLnRmCuKUgiAgIOKUnOKUgOKUgCBjb21wdXRlLwrilIIgICDilIIgICDilJzilIDilIAgbWFpbi50ZgrilIIgICDilIIgICDilJzilIDilIAgdmFyaWFibGVzLnRmCuKUgiAgIOKUgiAgIOKUlOKUgOKUgCBvdXRwdXRzLnRmCuKUnOKUgOKUgCBlbnZpcm9ubWVudHMvCuKUgiAgIOKUnOKUgOKUgCBkZXYvCuKUgiAgIOKUgiAgIOKUnOKUgOKUgCBtYWluLnRmCuKUgiAgIOKUgiAgIOKUnOKUgOKUgCB2YXJpYWJsZXMudGYK4pSCICAg4pSCICAg4pSU4pSA4pSAIG91dHB1dHMudGYK4pSCICAg4pSc4pSA4pSAIHByb2QvCuKUgiAgIOKUgiAgIOKUnOKUgOKUgCBtYWluLnRmCuKUgiAgIOKUgiAgIOKUnOKUgOKUgCB2YXJpYWJsZXMudGYK4pSCICAg4pSCICAg4pSU4pSA4pSAIG91dHB1dHMudGYK4pSc4pSA4pSAIG1haW4udGYK4pSc4pSA4pSAIHZhcmlhYmxlcy50ZgrilJTilIDilIAgb3V0cHV0cy50Zg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>project/
├── modules/
│   ├── network/
│   │   ├── main.tf
│   │   ├── variables.tf
│   │   └── outputs.tf
│   ├── compute/
│   │   ├── main.tf
│   │   ├── variables.tf
│   │   └── outputs.tf
├── environments/
│   ├── dev/
│   │   ├── main.tf
│   │   ├── variables.tf
│   │   └── outputs.tf
│   ├── prod/
│   │   ├── main.tf
│   │   ├── variables.tf
│   │   └── outputs.tf
├── main.tf
├── variables.tf
└── outputs.tf</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>modules/</strong>: Contains reusable modules like <code>network</code> and <code>compute</code>.</li>
<li><strong>environments/</strong>: Separate configurations for different environments (e.g., <code>dev</code>, <code>prod</code>).</li>
<li><strong>main.tf</strong>: The main configuration file.</li>
<li><strong>variables.tf</strong>: Definitions for input variables.</li>
<li><strong>outputs.tf</strong>: Definitions for output values.</li>
</ul>
</div><h1><p>Modules</p>
</h1>
<div class='content'><p>Modules are the building blocks of Terraform configurations. They allow you to encapsulate and reuse code. Here’s an example of a simple module for creating an AWS VPC:</p>
</div><h2><p>Module: <code>network</code></p>
</h2>
<div class='content'><p><strong>main.tf</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVzb3VyY2UgImF3c192cGMiICJtYWluIiB7CiAgY2lkcl9ibG9jayA9IHZhci5jaWRyX2Jsb2NrCn0KCnJlc291cmNlICJhd3Nfc3VibmV0IiAic3VibmV0IiB7CiAgY291bnQgICAgICAgICAgICAgPSBsZW5ndGgodmFyLnN1Ym5ldF9jaWRycykKICB2cGNfaWQgICAgICAgICAgICA9IGF3c192cGMubWFpbi5pZAogIGNpZHJfYmxvY2sgICAgICAgID0gdmFyLnN1Ym5ldF9jaWRyc1tjb3VudC5pbmRleF0KICBhdmFpbGFiaWxpdHlfem9uZSA9IGVsZW1lbnQodmFyLmF2YWlsYWJpbGl0eV96b25lcywgY291bnQuaW5kZXgpCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>resource &quot;aws_vpc&quot; &quot;main&quot; {
  cidr_block = var.cidr_block
}

resource &quot;aws_subnet&quot; &quot;subnet&quot; {
  count             = length(var.subnet_cidrs)
  vpc_id            = aws_vpc.main.id
  cidr_block        = var.subnet_cidrs[count.index]
  availability_zone = element(var.availability_zones, count.index)
}</pre></div><div class='content'><p><strong>variables.tf</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyaWFibGUgImNpZHJfYmxvY2siIHsKICBkZXNjcmlwdGlvbiA9ICJUaGUgQ0lEUiBibG9jayBmb3IgdGhlIFZQQyIKICB0eXBlICAgICAgICA9IHN0cmluZwp9Cgp2YXJpYWJsZSAic3VibmV0X2NpZHJzIiB7CiAgZGVzY3JpcHRpb24gPSAiTGlzdCBvZiBzdWJuZXQgQ0lEUiBibG9ja3MiCiAgdHlwZSAgICAgICAgPSBsaXN0KHN0cmluZykKfQoKdmFyaWFibGUgImF2YWlsYWJpbGl0eV96b25lcyIgewogIGRlc2NyaXB0aW9uID0gIkxpc3Qgb2YgYXZhaWxhYmlsaXR5IHpvbmVzIgogIHR5cGUgICAgICAgID0gbGlzdChzdHJpbmcpCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>variable &quot;cidr_block&quot; {
  description = &quot;The CIDR block for the VPC&quot;
  type        = string
}

variable &quot;subnet_cidrs&quot; {
  description = &quot;List of subnet CIDR blocks&quot;
  type        = list(string)
}

variable &quot;availability_zones&quot; {
  description = &quot;List of availability zones&quot;
  type        = list(string)
}</pre></div><div class='content'><p><strong>outputs.tf</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3V0cHV0ICJ2cGNfaWQiIHsKICB2YWx1ZSA9IGF3c192cGMubWFpbi5pZAp9CgpvdXRwdXQgInN1Ym5ldF9pZHMiIHsKICB2YWx1ZSA9IGF3c19zdWJuZXQuc3VibmV0WypdLmlkCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>output &quot;vpc_id&quot; {
  value = aws_vpc.main.id
}

output &quot;subnet_ids&quot; {
  value = aws_subnet.subnet[*].id
}</pre></div><div class='content'></div><h2><p>Using the Module</p>
</h2>
<div class='content'><p>In your main configuration, you can use the module as follows:</p>
<p><strong>main.tf</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9kdWxlICJuZXR3b3JrIiB7CiAgc291cmNlICAgICAgICAgICAgPSAiLi9tb2R1bGVzL25ldHdvcmsiCiAgY2lkcl9ibG9jayAgICAgICAgPSAiMTAuMC4wLjAvMTYiCiAgc3VibmV0X2NpZHJzICAgICAgPSBbIjEwLjAuMS4wLzI0IiwgIjEwLjAuMi4wLzI0Il0KICBhdmFpbGFiaWxpdHlfem9uZXMgPSBbInVzLXdlc3QtMWEiLCAidXMtd2VzdC0xYiJdCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>module &quot;network&quot; {
  source            = &quot;./modules/network&quot;
  cidr_block        = &quot;10.0.0.0/16&quot;
  subnet_cidrs      = [&quot;10.0.1.0/24&quot;, &quot;10.0.2.0/24&quot;]
  availability_zones = [&quot;us-west-1a&quot;, &quot;us-west-1b&quot;]
}</pre></div><div class='content'></div><h1><p>Naming Conventions</p>
</h1>
<div class='content'><p>Consistent naming conventions make your code more readable and maintainable. Here are some guidelines:</p>
<ul>
<li><strong>Resources</strong>: Use descriptive names (e.g., <code>aws_instance.web_server</code>).</li>
<li><strong>Variables</strong>: Use snake_case (e.g., <code>instance_type</code>).</li>
<li><strong>Outputs</strong>: Use snake_case (e.g., <code>instance_id</code>).</li>
</ul>
</div><h1><p>File Separation</p>
</h1>
<div class='content'><p>Splitting your configuration into multiple files can improve readability and manageability. Common files include:</p>
<ul>
<li><strong>main.tf</strong>: Core resources and modules.</li>
<li><strong>variables.tf</strong>: Input variable definitions.</li>
<li><strong>outputs.tf</strong>: Output value definitions.</li>
<li><strong>providers.tf</strong>: Provider configurations.</li>
</ul>
</div><h1><p>Version Control</p>
</h1>
<div class='content'><p>Using a version control system like Git is essential for tracking changes and collaborating with others. Here are some tips:</p>
<ul>
<li><strong>Commit Often</strong>: Make small, frequent commits with descriptive messages.</li>
<li><strong>Branching</strong>: Use branches for new features or changes.</li>
<li><strong>Pull Requests</strong>: Use pull requests for code reviews and collaboration.</li>
</ul>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise: Organize a Terraform Project</p>
</h2>
<div class='content'><ol>
<li>Create a directory structure as shown above.</li>
<li>Write a simple module for creating an AWS S3 bucket.</li>
<li>Use the module in your main configuration.</li>
<li>Commit your changes to a Git repository.</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'><p><strong>Directory Structure</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvamVjdC8K4pSc4pSA4pSAIG1vZHVsZXMvCuKUgiAgIOKUlOKUgOKUgCBzMy8K4pSCICAgICAgIOKUnOKUgOKUgCBtYWluLnRmCuKUgiAgICAgICDilJzilIDilIAgdmFyaWFibGVzLnRmCuKUgiAgICAgICDilJTilIDilIAgb3V0cHV0cy50ZgrilJzilIDilIAgbWFpbi50ZgrilJzilIDilIAgdmFyaWFibGVzLnRmCuKUlOKUgOKUgCBvdXRwdXRzLnRm"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>project/
├── modules/
│   └── s3/
│       ├── main.tf
│       ├── variables.tf
│       └── outputs.tf
├── main.tf
├── variables.tf
└── outputs.tf</pre></div><div class='content'><p><strong>Module: <code>s3</code></strong></p>
<p><strong>main.tf</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVzb3VyY2UgImF3c19zM19idWNrZXQiICJidWNrZXQiIHsKICBidWNrZXQgPSB2YXIuYnVja2V0X25hbWUKICBhY2wgICAgPSB2YXIuYWNsCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>resource &quot;aws_s3_bucket&quot; &quot;bucket&quot; {
  bucket = var.bucket_name
  acl    = var.acl
}</pre></div><div class='content'><p><strong>variables.tf</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyaWFibGUgImJ1Y2tldF9uYW1lIiB7CiAgZGVzY3JpcHRpb24gPSAiVGhlIG5hbWUgb2YgdGhlIFMzIGJ1Y2tldCIKICB0eXBlICAgICAgICA9IHN0cmluZwp9Cgp2YXJpYWJsZSAiYWNsIiB7CiAgZGVzY3JpcHRpb24gPSAiVGhlIEFDTCBmb3IgdGhlIFMzIGJ1Y2tldCIKICB0eXBlICAgICAgICA9IHN0cmluZwogIGRlZmF1bHQgICAgID0gInByaXZhdGUiCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>variable &quot;bucket_name&quot; {
  description = &quot;The name of the S3 bucket&quot;
  type        = string
}

variable &quot;acl&quot; {
  description = &quot;The ACL for the S3 bucket&quot;
  type        = string
  default     = &quot;private&quot;
}</pre></div><div class='content'><p><strong>outputs.tf</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3V0cHV0ICJidWNrZXRfYXJuIiB7CiAgdmFsdWUgPSBhd3NfczNfYnVja2V0LmJ1Y2tldC5hcm4KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>output &quot;bucket_arn&quot; {
  value = aws_s3_bucket.bucket.arn
}</pre></div><div class='content'><p><strong>Main Configuration</strong></p>
<p><strong>main.tf</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9kdWxlICJzMyIgewogIHNvdXJjZSAgICAgID0gIi4vbW9kdWxlcy9zMyIKICBidWNrZXRfbmFtZSA9ICJteS11bmlxdWUtYnVja2V0LW5hbWUiCiAgYWNsICAgICAgICAgPSAicHJpdmF0ZSIKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>module &quot;s3&quot; {
  source      = &quot;./modules/s3&quot;
  bucket_name = &quot;my-unique-bucket-name&quot;
  acl         = &quot;private&quot;
}</pre></div><div class='content'><p><strong>variables.tf</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBObyB2YXJpYWJsZXMgbmVlZGVkIGZvciB0aGlzIGV4YW1wbGU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># No variables needed for this example</pre></div><div class='content'><p><strong>outputs.tf</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3V0cHV0ICJzM19idWNrZXRfYXJuIiB7CiAgdmFsdWUgPSBtb2R1bGUuczMuYnVja2V0X2Fybgp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>output &quot;s3_bucket_arn&quot; {
  value = module.s3.bucket_arn
}</pre></div><div class='content'><p><strong>Git Commands</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Z2l0IGluaXQKZ2l0IGFkZCAuCmdpdCBjb21taXQgLW0gIkluaXRpYWwgY29tbWl0IHdpdGggUzMgbW9kdWxlIg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>git init
git add .
git commit -m &quot;Initial commit with S3 module&quot;</pre></div><div class='content'></div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the importance of code organization in Terraform projects. We discussed directory structure, modules, naming conventions, file separation, and version control. By following these best practices, you can create Terraform configurations that are easy to manage, scale, and collaborate on. In the next section, we will delve into version control in more detail.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='06-04-terraform-import' title="Terraform Import">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-02-version-control' title="Version Control">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
