<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Managing Secrets in Terraform</title>

    <link rel="alternate" href="https://campusempresa.com/mod/terraform/managing-secrets" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/terraform/managing-secrets" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/terraform/managing-secrets" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/terraform/managing-secrets" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/terraform/managing-secrets" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='securing-terraform-configurations'>&#x25C4;Securing Terraform Configurations</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Managing Secrets in Terraform</a>
	</div>
	<div class='col-4 text-end'>
					<a href='compliance-and-governance'>Compliance and Governance &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Managing secrets is a critical aspect of infrastructure as code (IaC) to ensure sensitive information such as API keys, passwords, and tokens are securely handled. This section will guide you through best practices and tools for managing secrets in Terraform from a beginner to an advanced level.</p>
</div><h1>Introduction to Secrets Management</h1>
<div class='content'><ul>
<li>
<p><strong>What are Secrets?</strong></p>
<ul>
<li>Secrets include sensitive information like API keys, passwords, tokens, and other credentials.</li>
</ul>
</li>
<li>
<p><strong>Why is Secrets Management Important?</strong></p>
<ul>
<li>Prevent unauthorized access.</li>
<li>Ensure compliance with security policies.</li>
<li>Protect sensitive data from being exposed.</li>
</ul>
</li>
</ul>
</div><h1>Storing Secrets Securely</h1>
<div class='content'></div><h2>Environment Variables</h2>
<div class='content'><ul>
<li>
<p><strong>Pros:</strong></p>
<ul>
<li>Easy to use and integrate.</li>
<li>No changes required in Terraform code.</li>
</ul>
</li>
<li>
<p><strong>Cons:</strong></p>
<ul>
<li>Can be exposed if not handled properly.</li>
<li>Not suitable for large-scale secret management.</li>
</ul>
</li>
</ul>
<p><strong>Example:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXhwb3J0IFRGX1ZBUl9kYl9wYXNzd29yZD0ibXlzZWNyZXRwYXNzd29yZCIKdGVycmFmb3JtIGFwcGx5"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>export TF_VAR_db_password=&quot;mysecretpassword&quot;
terraform apply</pre></div><div class='content'></div><h2>Terraform Variables</h2>
<div class='content'><ul>
<li><strong>Sensitive Variables:</strong>
<ul>
<li>Mark variables as sensitive to prevent them from being displayed in logs.</li>
</ul>
</li>
</ul>
<p><strong>Example:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyaWFibGUgImRiX3Bhc3N3b3JkIiB7CiAgZGVzY3JpcHRpb24gPSAiVGhlIHBhc3N3b3JkIGZvciB0aGUgZGF0YWJhc2UiCiAgdHlwZSAgICAgICAgPSBzdHJpbmcKICBzZW5zaXRpdmUgICA9IHRydWUKfQoKcmVzb3VyY2UgImF3c19kYl9pbnN0YW5jZSIgImV4YW1wbGUiIHsKICBhbGxvY2F0ZWRfc3RvcmFnZSA9IDIwCiAgZW5naW5lICAgICAgICAgICAgPSAibXlzcWwiCiAgaW5zdGFuY2VfY2xhc3MgICAgPSAiZGIudDIubWljcm8iCiAgbmFtZSAgICAgICAgICAgICAgPSAiZXhhbXBsZSIKICB1c2VybmFtZSAgICAgICAgICA9ICJhZG1pbiIKICBwYXNzd29yZCAgICAgICAgICA9IHZhci5kYl9wYXNzd29yZAp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>variable &quot;db_password&quot; {
  description = &quot;The password for the database&quot;
  type        = string
  sensitive   = true
}

resource &quot;aws_db_instance&quot; &quot;example&quot; {
  allocated_storage = 20
  engine            = &quot;mysql&quot;
  instance_class    = &quot;db.t2.micro&quot;
  name              = &quot;example&quot;
  username          = &quot;admin&quot;
  password          = var.db_password
}</pre></div><div class='content'></div><h1>Using Secret Management Tools</h1>
<div class='content'></div><h2>HashiCorp Vault</h2>
<div class='content'><ul>
<li><strong>Features:</strong>
<ul>
<li>Secure storage for secrets.</li>
<li>Dynamic secrets generation.</li>
<li>Access control policies.</li>
</ul>
</li>
</ul>
<p><strong>Example:</strong></p>
<ol>
<li><strong>Store a Secret in Vault:</strong></li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmF1bHQga3YgcHV0IHNlY3JldC9kYl9wYXNzd29yZCB2YWx1ZT0ibXlzZWNyZXRwYXNzd29yZCI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>vault kv put secret/db_password value=&quot;mysecretpassword&quot;</pre></div><div class='content'><ol start="2">
<li><strong>Retrieve a Secret in Terraform:</strong></li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgInZhdWx0IiB7CiAgYWRkcmVzcyA9ICJodHRwOi8vMTI3LjAuMC4xOjgyMDAiCn0KCmRhdGEgInZhdWx0X2dlbmVyaWNfc2VjcmV0IiAiZGJfcGFzc3dvcmQiIHsKICBwYXRoID0gInNlY3JldC9kYl9wYXNzd29yZCIKfQoKcmVzb3VyY2UgImF3c19kYl9pbnN0YW5jZSIgImV4YW1wbGUiIHsKICBhbGxvY2F0ZWRfc3RvcmFnZSA9IDIwCiAgZW5naW5lICAgICAgICAgICAgPSAibXlzcWwiCiAgaW5zdGFuY2VfY2xhc3MgICAgPSAiZGIudDIubWljcm8iCiAgbmFtZSAgICAgICAgICAgICAgPSAiZXhhbXBsZSIKICB1c2VybmFtZSAgICAgICAgICA9ICJhZG1pbiIKICBwYXNzd29yZCAgICAgICAgICA9IGRhdGEudmF1bHRfZ2VuZXJpY19zZWNyZXQuZGJfcGFzc3dvcmQuZGF0YVsidmFsdWUiXQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;vault&quot; {
  address = &quot;http://127.0.0.1:8200&quot;
}

data &quot;vault_generic_secret&quot; &quot;db_password&quot; {
  path = &quot;secret/db_password&quot;
}

resource &quot;aws_db_instance&quot; &quot;example&quot; {
  allocated_storage = 20
  engine            = &quot;mysql&quot;
  instance_class    = &quot;db.t2.micro&quot;
  name              = &quot;example&quot;
  username          = &quot;admin&quot;
  password          = data.vault_generic_secret.db_password.data[&quot;value&quot;]
}</pre></div><div class='content'></div><h2>AWS Secrets Manager</h2>
<div class='content'><ul>
<li><strong>Features:</strong>
<ul>
<li>Centralized secrets management.</li>
<li>Automatic secrets rotation.</li>
<li>Integrated with AWS IAM for access control.</li>
</ul>
</li>
</ul>
<p><strong>Example:</strong></p>
<ol>
<li><strong>Store a Secret in AWS Secrets Manager:</strong></li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXdzIHNlY3JldHNtYW5hZ2VyIGNyZWF0ZS1zZWNyZXQgLS1uYW1lIE15U2VjcmV0IC0tc2VjcmV0LXN0cmluZyAibXlzZWNyZXRwYXNzd29yZCI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>aws secretsmanager create-secret --name MySecret --secret-string &quot;mysecretpassword&quot;</pre></div><div class='content'><ol start="2">
<li><strong>Retrieve a Secret in Terraform:</strong></li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgImF3cyIgewogIHJlZ2lvbiA9ICJ1cy13ZXN0LTIiCn0KCmRhdGEgImF3c19zZWNyZXRzbWFuYWdlcl9zZWNyZXQiICJleGFtcGxlIiB7CiAgbmFtZSA9ICJNeVNlY3JldCIKfQoKZGF0YSAiYXdzX3NlY3JldHNtYW5hZ2VyX3NlY3JldF92ZXJzaW9uIiAiZXhhbXBsZSIgewogIHNlY3JldF9pZCA9IGRhdGEuYXdzX3NlY3JldHNtYW5hZ2VyX3NlY3JldC5leGFtcGxlLmlkCn0KCnJlc291cmNlICJhd3NfZGJfaW5zdGFuY2UiICJleGFtcGxlIiB7CiAgYWxsb2NhdGVkX3N0b3JhZ2UgPSAyMAogIGVuZ2luZSAgICAgICAgICAgID0gIm15c3FsIgogIGluc3RhbmNlX2NsYXNzICAgID0gImRiLnQyLm1pY3JvIgogIG5hbWUgICAgICAgICAgICAgID0gImV4YW1wbGUiCiAgdXNlcm5hbWUgICAgICAgICAgPSAiYWRtaW4iCiAgcGFzc3dvcmQgICAgICAgICAgPSBkYXRhLmF3c19zZWNyZXRzbWFuYWdlcl9zZWNyZXRfdmVyc2lvbi5leGFtcGxlLnNlY3JldF9zdHJpbmcKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;aws&quot; {
  region = &quot;us-west-2&quot;
}

data &quot;aws_secretsmanager_secret&quot; &quot;example&quot; {
  name = &quot;MySecret&quot;
}

data &quot;aws_secretsmanager_secret_version&quot; &quot;example&quot; {
  secret_id = data.aws_secretsmanager_secret.example.id
}

resource &quot;aws_db_instance&quot; &quot;example&quot; {
  allocated_storage = 20
  engine            = &quot;mysql&quot;
  instance_class    = &quot;db.t2.micro&quot;
  name              = &quot;example&quot;
  username          = &quot;admin&quot;
  password          = data.aws_secretsmanager_secret_version.example.secret_string
}</pre></div><div class='content'></div><h1>Best Practices for Managing Secrets</h1>
<div class='content'><ul>
<li>
<p><strong>Avoid Hardcoding Secrets:</strong></p>
<ul>
<li>Never hardcode secrets directly in your Terraform configuration files.</li>
</ul>
</li>
<li>
<p><strong>Use Version Control Ignoring:</strong></p>
<ul>
<li>Add sensitive files to <code>.gitignore</code> to prevent them from being committed to version control.</li>
</ul>
</li>
<li>
<p><strong>Rotate Secrets Regularly:</strong></p>
<ul>
<li>Regularly update and rotate secrets to minimize the risk of exposure.</li>
</ul>
</li>
<li>
<p><strong>Access Control:</strong></p>
<ul>
<li>Use IAM policies and roles to control access to secrets.</li>
</ul>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Managing secrets in Terraform is essential for maintaining the security and integrity of your infrastructure. By using environment variables, Terraform variables, and secret management tools like HashiCorp Vault and AWS Secrets Manager, you can securely handle sensitive information. Always follow best practices to ensure your secrets are protected and regularly reviewed.</p>
<p>By understanding and implementing these techniques, you can enhance the security of your Terraform-managed infrastructure and reduce the risk of unauthorized access to sensitive data.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='securing-terraform-configurations'>&#x25C4;Securing Terraform Configurations</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Managing Secrets in Terraform</a>
	</div>
	<div class='col-4 text-end'>
					<a href='compliance-and-governance'>Compliance and Governance &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
