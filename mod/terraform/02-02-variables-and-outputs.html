<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Variables and Outputs</title>

    <link rel="alternate" href="https://campusempresa.com/mod/terraform/02-02-variables-and-outputs" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/terraform/02-02-variables-and-outputs" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/terraform/02-02-variables-and-outputs" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/terraform/02-02-variables-and-outputs" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/terraform/02-02-variables-and-outputs" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='02-01-hcl-syntax' title="HCL Syntax">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Variables and Outputs</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='02-03-resource-and-data-blocks' title="Resource and Data Blocks">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will delve into the concepts of variables and outputs in Terraform. These are fundamental components that help in making your Terraform configurations more dynamic and reusable.</p>
</div><h1>What are Variables?</h1>
<div class='content'><p>Variables in Terraform allow you to parameterize your configurations. This means you can define values that can be reused across your configuration files, making them more flexible and easier to manage.</p>
</div><h2>Types of Variables</h2>
<div class='content'><p>Terraform supports three types of variables:</p>
<ol>
<li><strong>String</strong>: A single line of text.</li>
<li><strong>Number</strong>: A numeric value.</li>
<li><strong>Bool</strong>: A boolean value (true or false).</li>
</ol>
</div><h2>Defining Variables</h2>
<div class='content'><p>Variables are defined using the <code>variable</code> block. Here is an example of defining a string variable:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyaWFibGUgInJlZ2lvbiIgewogIGRlc2NyaXB0aW9uID0gIlRoZSBBV1MgcmVnaW9uIHRvIGRlcGxveSByZXNvdXJjZXMgaW4iCiAgdHlwZSAgICAgICAgPSBzdHJpbmcKICBkZWZhdWx0ICAgICA9ICJ1cy13ZXN0LTIiCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>variable &quot;region&quot; {
  description = &quot;The AWS region to deploy resources in&quot;
  type        = string
  default     = &quot;us-west-2&quot;
}</pre></div><div class='content'></div><h2>Using Variables</h2>
<div class='content'><p>Once defined, you can use variables in your Terraform configuration by referencing them with the <code>var</code> keyword:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgImF3cyIgewogIHJlZ2lvbiA9IHZhci5yZWdpb24KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;aws&quot; {
  region = var.region
}</pre></div><div class='content'></div><h2>Variable Files</h2>
<div class='content'><p>Variables can also be defined in separate files, typically with a <code>.tfvars</code> extension. This is useful for managing different sets of variables for different environments (e.g., development, staging, production).</p>
<p>Example <code>variables.tf</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyaWFibGUgInJlZ2lvbiIgewogIGRlc2NyaXB0aW9uID0gIlRoZSBBV1MgcmVnaW9uIHRvIGRlcGxveSByZXNvdXJjZXMgaW4iCiAgdHlwZSAgICAgICAgPSBzdHJpbmcKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>variable &quot;region&quot; {
  description = &quot;The AWS region to deploy resources in&quot;
  type        = string
}</pre></div><div class='content'><p>Example <code>terraform.tfvars</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVnaW9uID0gInVzLWVhc3QtMSI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>region = &quot;us-east-1&quot;</pre></div><div class='content'></div><h1>What are Outputs?</h1>
<div class='content'><p>Outputs in Terraform are used to extract information from your Terraform state files and make it available for other configurations or for external use.</p>
</div><h2>Defining Outputs</h2>
<div class='content'><p>Outputs are defined using the <code>output</code> block. Here is an example of defining an output:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3V0cHV0ICJpbnN0YW5jZV9pZCIgewogIGRlc2NyaXB0aW9uID0gIlRoZSBJRCBvZiB0aGUgRUMyIGluc3RhbmNlIgogIHZhbHVlICAgICAgID0gYXdzX2luc3RhbmNlLm15X2luc3RhbmNlLmlkCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>output &quot;instance_id&quot; {
  description = &quot;The ID of the EC2 instance&quot;
  value       = aws_instance.my_instance.id
}</pre></div><div class='content'></div><h2>Using Outputs</h2>
<div class='content'><p>Outputs can be accessed after running <code>terraform apply</code> by using the <code>terraform output</code> command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCB0ZXJyYWZvcm0gb3V0cHV0IGluc3RhbmNlX2lk"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ terraform output instance_id</pre></div><div class='content'></div><h2>Output Sensitivity</h2>
<div class='content'><p>You can mark outputs as sensitive to prevent them from being displayed in the CLI output or logs:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3V0cHV0ICJkYl9wYXNzd29yZCIgewogIGRlc2NyaXB0aW9uID0gIlRoZSBkYXRhYmFzZSBwYXNzd29yZCIKICB2YWx1ZSAgICAgICA9IGF3c19kYl9pbnN0YW5jZS5teV9kYi5wYXNzd29yZAogIHNlbnNpdGl2ZSAgID0gdHJ1ZQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>output &quot;db_password&quot; {
  description = &quot;The database password&quot;
  value       = aws_db_instance.my_db.password
  sensitive   = true
}</pre></div><div class='content'></div><h1>Practical Example</h1>
<div class='content'><p>Let's create a simple Terraform configuration that uses variables and outputs.</p>
</div><h2>Step 1: Define Variables</h2>
<div class='content'><p>Create a file named <code>variables.tf</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyaWFibGUgInJlZ2lvbiIgewogIGRlc2NyaXB0aW9uID0gIlRoZSBBV1MgcmVnaW9uIHRvIGRlcGxveSByZXNvdXJjZXMgaW4iCiAgdHlwZSAgICAgICAgPSBzdHJpbmcKICBkZWZhdWx0ICAgICA9ICJ1cy13ZXN0LTIiCn0KCnZhcmlhYmxlICJpbnN0YW5jZV90eXBlIiB7CiAgZGVzY3JpcHRpb24gPSAiVGhlIHR5cGUgb2YgRUMyIGluc3RhbmNlIgogIHR5cGUgICAgICAgID0gc3RyaW5nCiAgZGVmYXVsdCAgICAgPSAidDIubWljcm8iCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>variable &quot;region&quot; {
  description = &quot;The AWS region to deploy resources in&quot;
  type        = string
  default     = &quot;us-west-2&quot;
}

variable &quot;instance_type&quot; {
  description = &quot;The type of EC2 instance&quot;
  type        = string
  default     = &quot;t2.micro&quot;
}</pre></div><div class='content'></div><h2>Step 2: Use Variables in Configuration</h2>
<div class='content'><p>Create a file named <code>main.tf</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgImF3cyIgewogIHJlZ2lvbiA9IHZhci5yZWdpb24KfQoKcmVzb3VyY2UgImF3c19pbnN0YW5jZSIgIm15X2luc3RhbmNlIiB7CiAgYW1pICAgICAgICAgICA9ICJhbWktMGM1NWIxNTljYmZhZmUxZjAiCiAgaW5zdGFuY2VfdHlwZSA9IHZhci5pbnN0YW5jZV90eXBlCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;aws&quot; {
  region = var.region
}

resource &quot;aws_instance&quot; &quot;my_instance&quot; {
  ami           = &quot;ami-0c55b159cbfafe1f0&quot;
  instance_type = var.instance_type
}</pre></div><div class='content'></div><h2>Step 3: Define Outputs</h2>
<div class='content'><p>Add the following to <code>main.tf</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3V0cHV0ICJpbnN0YW5jZV9pZCIgewogIGRlc2NyaXB0aW9uID0gIlRoZSBJRCBvZiB0aGUgRUMyIGluc3RhbmNlIgogIHZhbHVlICAgICAgID0gYXdzX2luc3RhbmNlLm15X2luc3RhbmNlLmlkCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>output &quot;instance_id&quot; {
  description = &quot;The ID of the EC2 instance&quot;
  value       = aws_instance.my_instance.id
}</pre></div><div class='content'></div><h2>Step 4: Apply Configuration</h2>
<div class='content'><p>Run the following commands to apply the configuration:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCB0ZXJyYWZvcm0gaW5pdAokIHRlcnJhZm9ybSBhcHBseQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ terraform init
$ terraform apply</pre></div><div class='content'><p>After the apply is complete, you can view the output:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("JCB0ZXJyYWZvcm0gb3V0cHV0IGluc3RhbmNlX2lk"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>$ terraform output instance_id</pre></div><div class='content'></div><h1>Exercises</h1>
<div class='content'></div><h2>Exercise 1: Define and Use a Variable</h2>
<div class='content'><ol>
<li>Define a variable for the EC2 instance's key name in <code>variables.tf</code>.</li>
<li>Use this variable in the <code>aws_instance</code> resource in <code>main.tf</code>.</li>
</ol>
<p><strong>Solution:</strong></p>
<p>Add to <code>variables.tf</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyaWFibGUgImtleV9uYW1lIiB7CiAgZGVzY3JpcHRpb24gPSAiVGhlIGtleSBuYW1lIGZvciB0aGUgRUMyIGluc3RhbmNlIgogIHR5cGUgICAgICAgID0gc3RyaW5nCiAgZGVmYXVsdCAgICAgPSAibXkta2V5Igp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>variable &quot;key_name&quot; {
  description = &quot;The key name for the EC2 instance&quot;
  type        = string
  default     = &quot;my-key&quot;
}</pre></div><div class='content'><p>Modify <code>main.tf</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVzb3VyY2UgImF3c19pbnN0YW5jZSIgIm15X2luc3RhbmNlIiB7CiAgYW1pICAgICAgICAgICA9ICJhbWktMGM1NWIxNTljYmZhZmUxZjAiCiAgaW5zdGFuY2VfdHlwZSA9IHZhci5pbnN0YW5jZV90eXBlCiAga2V5X25hbWUgICAgICA9IHZhci5rZXlfbmFtZQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>resource &quot;aws_instance&quot; &quot;my_instance&quot; {
  ami           = &quot;ami-0c55b159cbfafe1f0&quot;
  instance_type = var.instance_type
  key_name      = var.key_name
}</pre></div><div class='content'></div><h2>Exercise 2: Define and Use an Output</h2>
<div class='content'><ol>
<li>Define an output for the public IP of the EC2 instance in <code>main.tf</code>.</li>
</ol>
<p><strong>Solution:</strong></p>
<p>Add to <code>main.tf</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3V0cHV0ICJpbnN0YW5jZV9wdWJsaWNfaXAiIHsKICBkZXNjcmlwdGlvbiA9ICJUaGUgcHVibGljIElQIG9mIHRoZSBFQzIgaW5zdGFuY2UiCiAgdmFsdWUgICAgICAgPSBhd3NfaW5zdGFuY2UubXlfaW5zdGFuY2UucHVibGljX2lwCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>output &quot;instance_public_ip&quot; {
  description = &quot;The public IP of the EC2 instance&quot;
  value       = aws_instance.my_instance.public_ip
}</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>In this section, we covered the basics of variables and outputs in Terraform. We learned how to define and use variables to make our configurations more dynamic and reusable. We also explored how to define outputs to extract useful information from our Terraform state. These concepts are essential for writing efficient and maintainable Terraform configurations.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='02-01-hcl-syntax' title="HCL Syntax">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='02-03-resource-and-data-blocks' title="Resource and Data Blocks">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
