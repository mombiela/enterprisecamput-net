<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 4: Serverless Applications</title>

    <link rel="alternate" href="https://campusempresa.com/mod/terraform/10-04-project-serverless-applications" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/terraform/10-04-project-serverless-applications" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/terraform/10-04-project-serverless-applications" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/terraform/10-04-project-serverless-applications" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/terraform/10-04-project-serverless-applications" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='10-03-project-kubernetes-with-terraform' title="Project 3: Kubernetes with Terraform">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Project 4: Serverless Applications</h2></a>
			</div>
	<div class='col-2 text-end'>
			</div>
</div>
<div class='content'><p>In this project, we will explore how to use Terraform to deploy serverless applications. Serverless computing allows you to build and run applications without managing the underlying infrastructure. This project will focus on deploying a simple serverless application using AWS Lambda and API Gateway.</p>
</div><h1>Objectives</h1>
<div class='content'><ul>
<li>Understand the basics of serverless architecture.</li>
<li>Learn how to use Terraform to deploy AWS Lambda functions.</li>
<li>Configure API Gateway to trigger Lambda functions.</li>
<li>Manage serverless application resources using Terraform.</li>
</ul>
</div><h1>Prerequisites</h1>
<div class='content'><ul>
<li>Basic understanding of Terraform and AWS.</li>
<li>AWS account with necessary permissions to create Lambda functions and API Gateway resources.</li>
<li>Terraform installed on your local machine.</li>
</ul>
</div><h1>Step-by-Step Guide</h1>
<div class='content'></div><h2>Step 1: Setting Up the Project Directory</h2>
<div class='content'><p>Create a new directory for your project and navigate into it:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bWtkaXIgdGVycmFmb3JtLXNlcnZlcmxlc3MKY2QgdGVycmFmb3JtLXNlcnZlcmxlc3M="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>mkdir terraform-serverless
cd terraform-serverless</pre></div><div class='content'></div><h2>Step 2: Writing the Terraform Configuration</h2>
<div class='content'><h4>2.1. Providers Configuration</h4>
<p>Create a file named <code>main.tf</code> and add the following code to configure the AWS provider:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgImF3cyIgewogIHJlZ2lvbiA9ICJ1cy13ZXN0LTIiCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;aws&quot; {
  region = &quot;us-west-2&quot;
}</pre></div><div class='content'><h4>2.2. Lambda Function</h4>
<p>Create a file named <code>lambda_function.py</code> with the following content:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIGxhbWJkYV9oYW5kbGVyKGV2ZW50LCBjb250ZXh0KToKICAgIHJldHVybiB7CiAgICAgICAgJ3N0YXR1c0NvZGUnOiAyMDAsCiAgICAgICAgJ2JvZHknOiAnSGVsbG8gZnJvbSBMYW1iZGEhJwogICAgfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def lambda_handler(event, context):
    return {
        'statusCode': 200,
        'body': 'Hello from Lambda!'
    }</pre></div><div class='content'><p>Next, create a file named <code>lambda.tf</code> to define the Lambda function:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVzb3VyY2UgImF3c19sYW1iZGFfZnVuY3Rpb24iICJoZWxsb193b3JsZCIgewogIGZpbGVuYW1lICAgICAgICAgPSAibGFtYmRhX2Z1bmN0aW9uLnppcCIKICBmdW5jdGlvbl9uYW1lICAgID0gImhlbGxvX3dvcmxkX2Z1bmN0aW9uIgogIHJvbGUgICAgICAgICAgICAgPSBhd3NfaWFtX3JvbGUubGFtYmRhX2V4ZWMuYXJuCiAgaGFuZGxlciAgICAgICAgICA9ICJsYW1iZGFfZnVuY3Rpb24ubGFtYmRhX2hhbmRsZXIiCiAgcnVudGltZSAgICAgICAgICA9ICJweXRob24zLjgiCiAgc291cmNlX2NvZGVfaGFzaCA9IGZpbGViYXNlNjRzaGEyNTYoImxhbWJkYV9mdW5jdGlvbi56aXAiKQp9CgpyZXNvdXJjZSAiYXdzX2lhbV9yb2xlIiAibGFtYmRhX2V4ZWMiIHsKICBuYW1lID0gImxhbWJkYV9leGVjX3JvbGUiCgogIGFzc3VtZV9yb2xlX3BvbGljeSA9IGpzb25lbmNvZGUoewogICAgVmVyc2lvbiA9ICIyMDEyLTEwLTE3IgogICAgU3RhdGVtZW50ID0gWwogICAgICB7CiAgICAgICAgQWN0aW9uID0gInN0czpBc3N1bWVSb2xlIgogICAgICAgIEVmZmVjdCA9ICJBbGxvdyIKICAgICAgICBQcmluY2lwYWwgPSB7CiAgICAgICAgICBTZXJ2aWNlID0gImxhbWJkYS5hbWF6b25hd3MuY29tIgogICAgICAgIH0KICAgICAgfSwKICAgIF0KICB9KQp9CgpyZXNvdXJjZSAiYXdzX2lhbV9yb2xlX3BvbGljeV9hdHRhY2htZW50IiAibGFtYmRhX2V4ZWNfcG9saWN5IiB7CiAgcm9sZSAgICAgICA9IGF3c19pYW1fcm9sZS5sYW1iZGFfZXhlYy5uYW1lCiAgcG9saWN5X2FybiA9ICJhcm46YXdzOmlhbTo6YXdzOnBvbGljeS9zZXJ2aWNlLXJvbGUvQVdTTGFtYmRhQmFzaWNFeGVjdXRpb25Sb2xlIgp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>resource &quot;aws_lambda_function&quot; &quot;hello_world&quot; {
  filename         = &quot;lambda_function.zip&quot;
  function_name    = &quot;hello_world_function&quot;
  role             = aws_iam_role.lambda_exec.arn
  handler          = &quot;lambda_function.lambda_handler&quot;
  runtime          = &quot;python3.8&quot;
  source_code_hash = filebase64sha256(&quot;lambda_function.zip&quot;)
}

resource &quot;aws_iam_role&quot; &quot;lambda_exec&quot; {
  name = &quot;lambda_exec_role&quot;

  assume_role_policy = jsonencode({
    Version = &quot;2012-10-17&quot;
    Statement = [
      {
        Action = &quot;sts:AssumeRole&quot;
        Effect = &quot;Allow&quot;
        Principal = {
          Service = &quot;lambda.amazonaws.com&quot;
        }
      },
    ]
  })
}

resource &quot;aws_iam_role_policy_attachment&quot; &quot;lambda_exec_policy&quot; {
  role       = aws_iam_role.lambda_exec.name
  policy_arn = &quot;arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole&quot;
}</pre></div><div class='content'><h4>2.3. API Gateway</h4>
<p>Add the following code to <code>api_gateway.tf</code> to define the API Gateway:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVzb3VyY2UgImF3c19hcGlfZ2F0ZXdheV9yZXN0X2FwaSIgImFwaSIgewogIG5hbWUgICAgICAgID0gInNlcnZlcmxlc3NfYXBpIgogIGRlc2NyaXB0aW9uID0gIkFQSSBHYXRld2F5IGZvciBzZXJ2ZXJsZXNzIGFwcGxpY2F0aW9uIgp9CgpyZXNvdXJjZSAiYXdzX2FwaV9nYXRld2F5X3Jlc291cmNlIiAicmVzb3VyY2UiIHsKICByZXN0X2FwaV9pZCA9IGF3c19hcGlfZ2F0ZXdheV9yZXN0X2FwaS5hcGkuaWQKICBwYXJlbnRfaWQgICA9IGF3c19hcGlfZ2F0ZXdheV9yZXN0X2FwaS5hcGkucm9vdF9yZXNvdXJjZV9pZAogIHBhdGhfcGFydCAgID0gImhlbGxvIgp9CgpyZXNvdXJjZSAiYXdzX2FwaV9nYXRld2F5X21ldGhvZCIgIm1ldGhvZCIgewogIHJlc3RfYXBpX2lkICAgPSBhd3NfYXBpX2dhdGV3YXlfcmVzdF9hcGkuYXBpLmlkCiAgcmVzb3VyY2VfaWQgICA9IGF3c19hcGlfZ2F0ZXdheV9yZXNvdXJjZS5yZXNvdXJjZS5pZAogIGh0dHBfbWV0aG9kICAgPSAiR0VUIgogIGF1dGhvcml6YXRpb24gPSAiTk9ORSIKfQoKcmVzb3VyY2UgImF3c19hcGlfZ2F0ZXdheV9pbnRlZ3JhdGlvbiIgImludGVncmF0aW9uIiB7CiAgcmVzdF9hcGlfaWQgPSBhd3NfYXBpX2dhdGV3YXlfcmVzdF9hcGkuYXBpLmlkCiAgcmVzb3VyY2VfaWQgPSBhd3NfYXBpX2dhdGV3YXlfcmVzb3VyY2UucmVzb3VyY2UuaWQKICBodHRwX21ldGhvZCA9IGF3c19hcGlfZ2F0ZXdheV9tZXRob2QubWV0aG9kLmh0dHBfbWV0aG9kCiAgdHlwZSAgICAgICAgPSAiQVdTX1BST1hZIgogIGludGVncmF0aW9uX2h0dHBfbWV0aG9kID0gIlBPU1QiCiAgdXJpICAgICAgICAgPSBhd3NfbGFtYmRhX2Z1bmN0aW9uLmhlbGxvX3dvcmxkLmludm9rZV9hcm4KfQoKcmVzb3VyY2UgImF3c19sYW1iZGFfcGVybWlzc2lvbiIgImFwaV9nYXRld2F5IiB7CiAgc3RhdGVtZW50X2lkICA9ICJBbGxvd0FQSUdhdGV3YXlJbnZva2UiCiAgYWN0aW9uICAgICAgICA9ICJsYW1iZGE6SW52b2tlRnVuY3Rpb24iCiAgZnVuY3Rpb25fbmFtZSA9IGF3c19sYW1iZGFfZnVuY3Rpb24uaGVsbG9fd29ybGQuZnVuY3Rpb25fbmFtZQogIHByaW5jaXBhbCAgICAgPSAiYXBpZ2F0ZXdheS5hbWF6b25hd3MuY29tIgogIHNvdXJjZV9hcm4gICAgPSAiJHthd3NfYXBpX2dhdGV3YXlfcmVzdF9hcGkuYXBpLmV4ZWN1dGlvbl9hcm59LyovKiIKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>resource &quot;aws_api_gateway_rest_api&quot; &quot;api&quot; {
  name        = &quot;serverless_api&quot;
  description = &quot;API Gateway for serverless application&quot;
}

resource &quot;aws_api_gateway_resource&quot; &quot;resource&quot; {
  rest_api_id = aws_api_gateway_rest_api.api.id
  parent_id   = aws_api_gateway_rest_api.api.root_resource_id
  path_part   = &quot;hello&quot;
}

resource &quot;aws_api_gateway_method&quot; &quot;method&quot; {
  rest_api_id   = aws_api_gateway_rest_api.api.id
  resource_id   = aws_api_gateway_resource.resource.id
  http_method   = &quot;GET&quot;
  authorization = &quot;NONE&quot;
}

resource &quot;aws_api_gateway_integration&quot; &quot;integration&quot; {
  rest_api_id = aws_api_gateway_rest_api.api.id
  resource_id = aws_api_gateway_resource.resource.id
  http_method = aws_api_gateway_method.method.http_method
  type        = &quot;AWS_PROXY&quot;
  integration_http_method = &quot;POST&quot;
  uri         = aws_lambda_function.hello_world.invoke_arn
}

resource &quot;aws_lambda_permission&quot; &quot;api_gateway&quot; {
  statement_id  = &quot;AllowAPIGatewayInvoke&quot;
  action        = &quot;lambda:InvokeFunction&quot;
  function_name = aws_lambda_function.hello_world.function_name
  principal     = &quot;apigateway.amazonaws.com&quot;
  source_arn    = &quot;${aws_api_gateway_rest_api.api.execution_arn}/*/*&quot;
}</pre></div><div class='content'></div><h2>Step 3: Packaging the Lambda Function</h2>
<div class='content'><p>Before deploying, we need to package the Lambda function code:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("emlwIGxhbWJkYV9mdW5jdGlvbi56aXAgbGFtYmRhX2Z1bmN0aW9uLnB5"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>zip lambda_function.zip lambda_function.py</pre></div><div class='content'></div><h2>Step 4: Initializing and Applying Terraform Configuration</h2>
<div class='content'><p>Initialize the Terraform configuration:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVycmFmb3JtIGluaXQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>terraform init</pre></div><div class='content'><p>Apply the Terraform configuration:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVycmFmb3JtIGFwcGx5"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>terraform apply</pre></div><div class='content'></div><h2>Step 5: Testing the Serverless Application</h2>
<div class='content'><p>After the deployment is complete, you can test the serverless application by accessing the API Gateway endpoint. The URL will be displayed in the Terraform output.</p>
</div><h2>Step 6: Cleaning Up</h2>
<div class='content'><p>To clean up the resources created by this project, run:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVycmFmb3JtIGRlc3Ryb3k="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>terraform destroy</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>In this project, we learned how to deploy a serverless application using Terraform. We covered the following key concepts:</p>
<ul>
<li>Configuring AWS Lambda functions with Terraform.</li>
<li>Setting up API Gateway to trigger Lambda functions.</li>
<li>Managing serverless application resources using Terraform.</li>
</ul>
<p>By completing this project, you should now have a solid understanding of how to use Terraform to manage serverless applications on AWS. This knowledge can be extended to more complex serverless architectures and other cloud providers.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='10-03-project-kubernetes-with-terraform' title="Project 3: Kubernetes with Terraform">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
