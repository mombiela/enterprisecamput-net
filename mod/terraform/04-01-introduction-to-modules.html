<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introduction to Modules</title>

    <link rel="alternate" href="https://campusempresa.com/mod/terraform/04-01-introduction-to-modules" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/terraform/04-01-introduction-to-modules" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/terraform/04-01-introduction-to-modules" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/terraform/04-01-introduction-to-modules" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/terraform/04-01-introduction-to-modules" class="px-2">CA</a>
					</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-04-state-locking' title="State Locking">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Introduction to Modules</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-02-creating-modules' title="Creating Modules">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>What are Terraform Modules?</p>
</h1>
<div class='content'><p>Terraform modules are a way to organize and encapsulate your Terraform configuration into reusable components. They allow you to group related resources together and manage them as a single unit. This modular approach helps in maintaining, reusing, and sharing your infrastructure code.</p>
</div><h2><p>Key Concepts:</p>
</h2>
<div class='content'><ul>
<li><strong>Module</strong>: A container for multiple resources that are used together.</li>
<li><strong>Root Module</strong>: The main module that Terraform uses to run your configuration.</li>
<li><strong>Child Module</strong>: Any module that is called by another module.</li>
</ul>
</div><h1><p>Why Use Modules?</p>
</h1>
<div class='content'><p>Modules provide several benefits:</p>
<ol>
<li><strong>Reusability</strong>: Write your configuration once and reuse it across different projects.</li>
<li><strong>Maintainability</strong>: Easier to manage and update your infrastructure code.</li>
<li><strong>Organization</strong>: Helps in organizing your code into logical components.</li>
<li><strong>Collaboration</strong>: Share modules with your team or the community.</li>
</ol>
</div><h1><p>Basic Structure of a Module</p>
</h1>
<div class='content'><p>A module typically consists of the following files:</p>
<ul>
<li><strong>main.tf</strong>: Contains the primary configuration for the module.</li>
<li><strong>variables.tf</strong>: Defines the input variables for the module.</li>
<li><strong>outputs.tf</strong>: Defines the outputs of the module.</li>
<li><strong>README.md</strong>: Provides documentation for the module.</li>
</ul>
</div><h2><p>Example Directory Structure:</p>
</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bXktbW9kdWxlLwrilJzilIDilIAgbWFpbi50ZgrilJzilIDilIAgdmFyaWFibGVzLnRmCuKUnOKUgOKUgCBvdXRwdXRzLnRmCuKUlOKUgOKUgCBSRUFETUUubWQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>my-module/
├── main.tf
├── variables.tf
├── outputs.tf
└── README.md</pre></div><div class='content'></div><h1><p>Creating a Simple Module</p>
</h1>
<div class='content'><p>Let's create a simple module that provisions an AWS S3 bucket.</p>
</div><h2><p>Step 1: Define the Module</p>
</h2>
<div class='content'><p>Create a directory named <code>s3-bucket</code> and add the following files:</p>
<h4>main.tf</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVzb3VyY2UgImF3c19zM19idWNrZXQiICJleGFtcGxlIiB7CiAgYnVja2V0ID0gdmFyLmJ1Y2tldF9uYW1lCiAgYWNsICAgID0gdmFyLmFjbAoKICB0YWdzID0gewogICAgTmFtZSAgICAgICAgPSB2YXIuYnVja2V0X25hbWUKICAgIEVudmlyb25tZW50ID0gdmFyLmVudmlyb25tZW50CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>resource &quot;aws_s3_bucket&quot; &quot;example&quot; {
  bucket = var.bucket_name
  acl    = var.acl

  tags = {
    Name        = var.bucket_name
    Environment = var.environment
  }
}</pre></div><div class='content'><h4>variables.tf</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyaWFibGUgImJ1Y2tldF9uYW1lIiB7CiAgZGVzY3JpcHRpb24gPSAiVGhlIG5hbWUgb2YgdGhlIFMzIGJ1Y2tldCIKICB0eXBlICAgICAgICA9IHN0cmluZwp9Cgp2YXJpYWJsZSAiYWNsIiB7CiAgZGVzY3JpcHRpb24gPSAiVGhlIEFDTCB0byBhcHBseSB0byB0aGUgYnVja2V0IgogIHR5cGUgICAgICAgID0gc3RyaW5nCiAgZGVmYXVsdCAgICAgPSAicHJpdmF0ZSIKfQoKdmFyaWFibGUgImVudmlyb25tZW50IiB7CiAgZGVzY3JpcHRpb24gPSAiVGhlIGVudmlyb25tZW50IGZvciB0aGUgYnVja2V0IgogIHR5cGUgICAgICAgID0gc3RyaW5nCiAgZGVmYXVsdCAgICAgPSAiZGV2Igp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>variable &quot;bucket_name&quot; {
  description = &quot;The name of the S3 bucket&quot;
  type        = string
}

variable &quot;acl&quot; {
  description = &quot;The ACL to apply to the bucket&quot;
  type        = string
  default     = &quot;private&quot;
}

variable &quot;environment&quot; {
  description = &quot;The environment for the bucket&quot;
  type        = string
  default     = &quot;dev&quot;
}</pre></div><div class='content'><h4>outputs.tf</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3V0cHV0ICJidWNrZXRfYXJuIiB7CiAgZGVzY3JpcHRpb24gPSAiVGhlIEFSTiBvZiB0aGUgUzMgYnVja2V0IgogIHZhbHVlICAgICAgID0gYXdzX3MzX2J1Y2tldC5leGFtcGxlLmFybgp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>output &quot;bucket_arn&quot; {
  description = &quot;The ARN of the S3 bucket&quot;
  value       = aws_s3_bucket.example.arn
}</pre></div><div class='content'></div><h2><p>Step 2: Use the Module</p>
</h2>
<div class='content'><p>Now, let's use this module in a root module.</p>
<h4>main.tf</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgImF3cyIgewogIHJlZ2lvbiA9ICJ1cy13ZXN0LTIiCn0KCm1vZHVsZSAiczNfYnVja2V0IiB7CiAgc291cmNlICAgICAgPSAiLi9zMy1idWNrZXQiCiAgYnVja2V0X25hbWUgPSAibXktdW5pcXVlLWJ1Y2tldC1uYW1lIgogIGVudmlyb25tZW50ID0gInByb2R1Y3Rpb24iCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;aws&quot; {
  region = &quot;us-west-2&quot;
}

module &quot;s3_bucket&quot; {
  source      = &quot;./s3-bucket&quot;
  bucket_name = &quot;my-unique-bucket-name&quot;
  environment = &quot;production&quot;
}</pre></div><div class='content'></div><h2><p>Step 3: Initialize and Apply</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Initialize the configuration</strong>:</p>
<pre><code class="language-sh">terraform init
</code></pre>
</li>
<li>
<p><strong>Apply the configuration</strong>:</p>
<pre><code class="language-sh">terraform apply
</code></pre>
</li>
</ol>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Task:</p>
</h2>
<div class='content'><p>Create a module that provisions an AWS EC2 instance with the following specifications:</p>
<ul>
<li>Instance type: <code>t2.micro</code></li>
<li>AMI ID: <code>ami-0c55b159cbfafe1f0</code> (Amazon Linux 2)</li>
<li>Key pair name: <code>my-key-pair</code></li>
<li>Tags: <code>Name = &quot;MyInstance&quot;</code></li>
</ul>
</div><h2><p>Solution:</p>
</h2>
<div class='content'><h4>Directory Structure:</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZWMyLWluc3RhbmNlLwrilJzilIDilIAgbWFpbi50ZgrilJzilIDilIAgdmFyaWFibGVzLnRmCuKUnOKUgOKUgCBvdXRwdXRzLnRmCuKUlOKUgOKUgCBSRUFETUUubWQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ec2-instance/
├── main.tf
├── variables.tf
├── outputs.tf
└── README.md</pre></div><div class='content'><h4>main.tf</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVzb3VyY2UgImF3c19pbnN0YW5jZSIgImV4YW1wbGUiIHsKICBhbWkgICAgICAgICAgID0gdmFyLmFtaV9pZAogIGluc3RhbmNlX3R5cGUgPSB2YXIuaW5zdGFuY2VfdHlwZQogIGtleV9uYW1lICAgICAgPSB2YXIua2V5X25hbWUKCiAgdGFncyA9IHsKICAgIE5hbWUgPSB2YXIuaW5zdGFuY2VfbmFtZQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>resource &quot;aws_instance&quot; &quot;example&quot; {
  ami           = var.ami_id
  instance_type = var.instance_type
  key_name      = var.key_name

  tags = {
    Name = var.instance_name
  }
}</pre></div><div class='content'><h4>variables.tf</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyaWFibGUgImFtaV9pZCIgewogIGRlc2NyaXB0aW9uID0gIlRoZSBBTUkgSUQgdG8gdXNlIGZvciB0aGUgaW5zdGFuY2UiCiAgdHlwZSAgICAgICAgPSBzdHJpbmcKfQoKdmFyaWFibGUgImluc3RhbmNlX3R5cGUiIHsKICBkZXNjcmlwdGlvbiA9ICJUaGUgdHlwZSBvZiBpbnN0YW5jZSB0byB1c2UiCiAgdHlwZSAgICAgICAgPSBzdHJpbmcKICBkZWZhdWx0ICAgICA9ICJ0Mi5taWNybyIKfQoKdmFyaWFibGUgImtleV9uYW1lIiB7CiAgZGVzY3JpcHRpb24gPSAiVGhlIGtleSBwYWlyIG5hbWUgdG8gdXNlIGZvciB0aGUgaW5zdGFuY2UiCiAgdHlwZSAgICAgICAgPSBzdHJpbmcKfQoKdmFyaWFibGUgImluc3RhbmNlX25hbWUiIHsKICBkZXNjcmlwdGlvbiA9ICJUaGUgbmFtZSB0byB0YWcgdGhlIGluc3RhbmNlIHdpdGgiCiAgdHlwZSAgICAgICAgPSBzdHJpbmcKICBkZWZhdWx0ICAgICA9ICJNeUluc3RhbmNlIgp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>variable &quot;ami_id&quot; {
  description = &quot;The AMI ID to use for the instance&quot;
  type        = string
}

variable &quot;instance_type&quot; {
  description = &quot;The type of instance to use&quot;
  type        = string
  default     = &quot;t2.micro&quot;
}

variable &quot;key_name&quot; {
  description = &quot;The key pair name to use for the instance&quot;
  type        = string
}

variable &quot;instance_name&quot; {
  description = &quot;The name to tag the instance with&quot;
  type        = string
  default     = &quot;MyInstance&quot;
}</pre></div><div class='content'><h4>outputs.tf</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3V0cHV0ICJpbnN0YW5jZV9pZCIgewogIGRlc2NyaXB0aW9uID0gIlRoZSBJRCBvZiB0aGUgRUMyIGluc3RhbmNlIgogIHZhbHVlICAgICAgID0gYXdzX2luc3RhbmNlLmV4YW1wbGUuaWQKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>output &quot;instance_id&quot; {
  description = &quot;The ID of the EC2 instance&quot;
  value       = aws_instance.example.id
}</pre></div><div class='content'><h4>Using the Module:</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgImF3cyIgewogIHJlZ2lvbiA9ICJ1cy13ZXN0LTIiCn0KCm1vZHVsZSAiZWMyX2luc3RhbmNlIiB7CiAgc291cmNlICAgICAgICA9ICIuL2VjMi1pbnN0YW5jZSIKICBhbWlfaWQgICAgICAgID0gImFtaS0wYzU1YjE1OWNiZmFmZTFmMCIKICBrZXlfbmFtZSAgICAgID0gIm15LWtleS1wYWlyIgogIGluc3RhbmNlX25hbWUgPSAiTXlJbnN0YW5jZSIKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;aws&quot; {
  region = &quot;us-west-2&quot;
}

module &quot;ec2_instance&quot; {
  source        = &quot;./ec2-instance&quot;
  ami_id        = &quot;ami-0c55b159cbfafe1f0&quot;
  key_name      = &quot;my-key-pair&quot;
  instance_name = &quot;MyInstance&quot;
}</pre></div><div class='content'></div><h2><p>Initialize and Apply:</p>
</h2>
<div class='content'><ol>
<li>
<p><strong>Initialize the configuration</strong>:</p>
<pre><code class="language-sh">terraform init
</code></pre>
</li>
<li>
<p><strong>Apply the configuration</strong>:</p>
<pre><code class="language-sh">terraform apply
</code></pre>
</li>
</ol>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we introduced Terraform modules, explained their benefits, and demonstrated how to create and use a simple module. Modules are a powerful feature in Terraform that help you write clean, reusable, and maintainable infrastructure code. In the next section, we will dive deeper into creating more complex modules and using the Terraform Module Registry.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-04-state-locking' title="State Locking">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-02-creating-modules' title="Creating Modules">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
