<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integrating Terraform with CI/CD</title>

    <link rel="alternate" href="https://campusempresa.com/mod/terraform/integrating-terraform-with-cicd" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/terraform/integrating-terraform-with-cicd" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/terraform/integrating-terraform-with-cicd" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/terraform/integrating-terraform-with-cicd" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/terraform/integrating-terraform-with-cicd" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='managing-aws-infrastructure'>&#x25C4;Managing AWS Infrastructure</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Integrating Terraform with CI/CD</a>
	</div>
	<div class='col-4 text-end'>
					<a href='monitoring-and-logging-with-terraform'>Monitoring and Logging with Terraform &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Integrating Terraform with Continuous Integration and Continuous Deployment (CI/CD) pipelines can significantly enhance the automation, consistency, and reliability of your infrastructure management. This section will guide you through the process of integrating Terraform with popular CI/CD tools, providing examples and exercises to solidify your understanding.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>CI/CD</strong>: Continuous Integration (CI) is the practice of automatically integrating code changes from multiple contributors into a shared repository several times a day. Continuous Deployment (CD) is the practice of automatically deploying every change that passes all stages of your production pipeline.</li>
<li><strong>Terraform</strong>: An open-source infrastructure as code software tool that provides a consistent CLI workflow to manage hundreds of cloud services.</li>
<li><strong>Pipeline</strong>: A set of automated processes that allow developers and DevOps professionals to compile, build, and deploy their code to their production environments.</li>
</ul>
</div><h1>Setting Up Terraform in a CI/CD Pipeline</h1>
<h2>Prerequisites</h2>
<div class='content'><ul>
<li>Basic understanding of Terraform and its commands.</li>
<li>A CI/CD tool (e.g., GitHub Actions, GitLab CI, Jenkins, CircleCI).</li>
<li>Access to a cloud provider (e.g., AWS, Azure, GCP).</li>
</ul>
</div><h2>Example: Integrating Terraform with GitHub Actions</h2>
<div class='content'><h4>Step 1: Create a Terraform Configuration</h4>
<p>Create a simple Terraform configuration file, <code>main.tf</code>, to provision a resource. For example, an AWS S3 bucket:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgImF3cyIgewogIHJlZ2lvbiA9ICJ1cy13ZXN0LTIiCn0KCnJlc291cmNlICJhd3NfczNfYnVja2V0IiAiZXhhbXBsZSIgewogIGJ1Y2tldCA9ICJteS11bmlxdWUtYnVja2V0LW5hbWUiCiAgYWNsICAgID0gInByaXZhdGUiCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;aws&quot; {
  region = &quot;us-west-2&quot;
}

resource &quot;aws_s3_bucket&quot; &quot;example&quot; {
  bucket = &quot;my-unique-bucket-name&quot;
  acl    = &quot;private&quot;
}</pre></div><div class='content'><h4>Step 2: Set Up GitHub Actions Workflow</h4>
<p>Create a GitHub Actions workflow file, <code>.github/workflows/terraform.yml</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmFtZTogJ1RlcnJhZm9ybSBDSS9DRCcKCm9uOgogIHB1c2g6CiAgICBicmFuY2hlczoKICAgICAgLSBtYWluCgpqb2JzOgogIHRlcnJhZm9ybToKICAgIHJ1bnMtb246IHVidW50dS1sYXRlc3QKCiAgICBzdGVwczoKICAgIC0gbmFtZTogQ2hlY2tvdXQgY29kZQogICAgICB1c2VzOiBhY3Rpb25zL2NoZWNrb3V0QHYyCgogICAgLSBuYW1lOiBTZXQgdXAgVGVycmFmb3JtCiAgICAgIHVzZXM6IGhhc2hpY29ycC9zZXR1cC10ZXJyYWZvcm1AdjEKCiAgICAtIG5hbWU6IFRlcnJhZm9ybSBJbml0CiAgICAgIHJ1bjogdGVycmFmb3JtIGluaXQKCiAgICAtIG5hbWU6IFRlcnJhZm9ybSBQbGFuCiAgICAgIHJ1bjogdGVycmFmb3JtIHBsYW4KCiAgICAtIG5hbWU6IFRlcnJhZm9ybSBBcHBseQogICAgICBpZjogZ2l0aHViLnJlZiA9PSAncmVmcy9oZWFkcy9tYWluJwogICAgICBydW46IHRlcnJhZm9ybSBhcHBseSAtYXV0by1hcHByb3Zl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>name: 'Terraform CI/CD'

on:
  push:
    branches:
      - main

jobs:
  terraform:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Terraform
      uses: hashicorp/setup-terraform@v1

    - name: Terraform Init
      run: terraform init

    - name: Terraform Plan
      run: terraform plan

    - name: Terraform Apply
      if: github.ref == 'refs/heads/main'
      run: terraform apply -auto-approve</pre></div><div class='content'><h4>Explanation</h4>
<ul>
<li><strong>Checkout code</strong>: Uses the <code>actions/checkout@v2</code> action to check out the repository.</li>
<li><strong>Set up Terraform</strong>: Uses the <code>hashicorp/setup-terraform@v1</code> action to set up Terraform.</li>
<li><strong>Terraform Init</strong>: Initializes the Terraform working directory.</li>
<li><strong>Terraform Plan</strong>: Creates an execution plan.</li>
<li><strong>Terraform Apply</strong>: Applies the changes required to reach the desired state of the configuration.</li>
</ul>
</div><h2>Example: Integrating Terraform with GitLab CI</h2>
<div class='content'><h4>Step 1: Create a Terraform Configuration</h4>
<p>Use the same <code>main.tf</code> file as in the GitHub Actions example.</p>
<h4>Step 2: Set Up GitLab CI Pipeline</h4>
<p>Create a GitLab CI configuration file, <code>.gitlab-ci.yml</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RhZ2VzOgogIC0gaW5pdAogIC0gcGxhbgogIC0gYXBwbHkKCnZhcmlhYmxlczoKICBURl9WRVJTSU9OOiAiMS4wLjAiCiAgVEZfV09SS0lOR19ESVI6ICIuIgoKYmVmb3JlX3NjcmlwdDoKICAtIGFwayBhZGQgLS1uby1jYWNoZSBjdXJsIHVuemlwCiAgLSBjdXJsIC1vIC90bXAvdGVycmFmb3JtLnppcCBodHRwczovL3JlbGVhc2VzLmhhc2hpY29ycC5jb20vdGVycmFmb3JtLyR7VEZfVkVSU0lPTn0vdGVycmFmb3JtXyR7VEZfVkVSU0lPTn1fbGludXhfYW1kNjQuemlwCiAgLSB1bnppcCAvdG1wL3RlcnJhZm9ybS56aXAgLWQgL3Vzci9sb2NhbC9iaW4vCgppbml0OgogIHN0YWdlOiBpbml0CiAgc2NyaXB0OgogICAgLSB0ZXJyYWZvcm0gaW5pdCAke1RGX1dPUktJTkdfRElSfQoKcGxhbjoKICBzdGFnZTogcGxhbgogIHNjcmlwdDoKICAgIC0gdGVycmFmb3JtIHBsYW4gJHtURl9XT1JLSU5HX0RJUn0KCmFwcGx5OgogIHN0YWdlOiBhcHBseQogIHNjcmlwdDoKICAgIC0gdGVycmFmb3JtIGFwcGx5IC1hdXRvLWFwcHJvdmUgJHtURl9XT1JLSU5HX0RJUn0KICB3aGVuOiBtYW51YWw="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>stages:
  - init
  - plan
  - apply

variables:
  TF_VERSION: &quot;1.0.0&quot;
  TF_WORKING_DIR: &quot;.&quot;

before_script:
  - apk add --no-cache curl unzip
  - curl -o /tmp/terraform.zip https://releases.hashicorp.com/terraform/${TF_VERSION}/terraform_${TF_VERSION}_linux_amd64.zip
  - unzip /tmp/terraform.zip -d /usr/local/bin/

init:
  stage: init
  script:
    - terraform init ${TF_WORKING_DIR}

plan:
  stage: plan
  script:
    - terraform plan ${TF_WORKING_DIR}

apply:
  stage: apply
  script:
    - terraform apply -auto-approve ${TF_WORKING_DIR}
  when: manual</pre></div><div class='content'><h4>Explanation</h4>
<ul>
<li><strong>Stages</strong>: Defines the stages of the pipeline (<code>init</code>, <code>plan</code>, <code>apply</code>).</li>
<li><strong>Variables</strong>: Sets the Terraform version and working directory.</li>
<li><strong>before_script</strong>: Installs Terraform.</li>
<li><strong>init</strong>: Initializes the Terraform working directory.</li>
<li><strong>plan</strong>: Creates an execution plan.</li>
<li><strong>apply</strong>: Applies the changes required to reach the desired state of the configuration. This stage is set to <code>manual</code> to prevent automatic deployment.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Integrating Terraform with CI/CD pipelines automates the process of provisioning and managing infrastructure, ensuring consistency and reducing the risk of human error. By following the examples provided for GitHub Actions and GitLab CI, you can set up your own CI/CD pipelines to manage your infrastructure as code efficiently. Practice these integrations with different CI/CD tools to gain a deeper understanding and flexibility in managing your infrastructure.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='managing-aws-infrastructure'>&#x25C4;Managing AWS Infrastructure</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Integrating Terraform with CI/CD</a>
	</div>
	<div class='col-4 text-end'>
					<a href='monitoring-and-logging-with-terraform'>Monitoring and Logging with Terraform &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
