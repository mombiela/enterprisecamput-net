<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimizing D3.js Performance</title>

    <link rel="alternate" href="https://campusempresa.com/mod/d3_js/08-01-optimizing-performance" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/d3_js/08-01-optimizing-performance" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/d3_js/08-01-optimizing-performance" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/d3_js/08-01-optimizing-performance" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/d3_js/08-01-optimizing-performance" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='07-04-case-studies' title="Case Studies and Examples">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Optimizing D3.js Performance</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='08-02-handling-large-datasets' title="Handling Large Datasets">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Optimizing the performance of your D3.js visualizations is crucial, especially when dealing with large datasets or complex interactions. This section will cover various techniques and best practices to ensure your visualizations run smoothly and efficiently.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Minimize DOM Manipulations</strong>: Frequent updates to the DOM can be costly. Batch updates and minimize the number of changes to the DOM.</li>
<li><strong>Efficient Data Binding</strong>: Use D3's data binding efficiently to avoid unnecessary computations.</li>
<li><strong>Use Appropriate Data Structures</strong>: Choose the right data structures for your data to optimize access and manipulation.</li>
<li><strong>Optimize Rendering</strong>: Use techniques like canvas rendering for complex or large-scale visualizations.</li>
<li><strong>Profile and Benchmark</strong>: Regularly profile your code to identify and address performance bottlenecks.</li>
</ol>
</div><h1><p>Techniques for Optimization</p>
</h1>
<div class='content'></div><h2><ol>
<li>Minimize DOM Manipulations</li>
</ol>
</h2>
<div class='content'><p>Frequent DOM manipulations can slow down your visualization. Here are some strategies to minimize them:</p>
<ul>
<li><strong>Batch Updates</strong>: Group multiple DOM updates into a single operation.</li>
<li><strong>Use <code>documentFragment</code></strong>: Create elements in a <code>documentFragment</code> and append them to the DOM in one go.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRXhhbXBsZSBvZiB1c2luZyBkb2N1bWVudEZyYWdtZW50CmNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwpkYXRhLmZvckVhY2goZCA9PiB7CiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgZGl2LnRleHRDb250ZW50ID0gZDsKICBmcmFnbWVudC5hcHBlbmRDaGlsZChkaXYpOwp9KTsKZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmcmFnbWVudCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Example of using documentFragment
const fragment = document.createDocumentFragment();
data.forEach(d =&gt; {
  const div = document.createElement('div');
  div.textContent = d;
  fragment.appendChild(div);
});
document.body.appendChild(fragment);</pre></div><div class='content'></div><h2><ol start="2">
<li>Efficient Data Binding</li>
</ol>
</h2>
<div class='content'><p>Efficient data binding ensures that only necessary updates are made to the DOM.</p>
<ul>
<li><strong>Key Functions</strong>: Use key functions to help D3 identify which elements need to be updated, added, or removed.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZGF0YSA9IFsvKiB5b3VyIGRhdGEgKi9dOwpjb25zdCB1cGRhdGUgPSBkMy5zZWxlY3QoJ2JvZHknKS5zZWxlY3RBbGwoJ2RpdicpLmRhdGEoZGF0YSwgZCA9PiBkLmlkKTsKCnVwZGF0ZS5lbnRlcigpLmFwcGVuZCgnZGl2JykKICAubWVyZ2UodXBkYXRlKQogIC50ZXh0KGQgPT4gZC5uYW1lKTsKCnVwZGF0ZS5leGl0KCkucmVtb3ZlKCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const data = [/* your data */];
const update = d3.select('body').selectAll('div').data(data, d =&gt; d.id);

update.enter().append('div')
  .merge(update)
  .text(d =&gt; d.name);

update.exit().remove();</pre></div><div class='content'></div><h2><ol start="3">
<li>Use Appropriate Data Structures</li>
</ol>
</h2>
<div class='content'><p>Choosing the right data structures can significantly impact performance.</p>
<ul>
<li><strong>Arrays vs. Objects</strong>: Use arrays for ordered data and objects for key-value pairs.</li>
<li><strong>Typed Arrays</strong>: For numerical data, consider using typed arrays for better performance.</li>
</ul>
</div><h2><ol start="4">
<li>Optimize Rendering</li>
</ol>
</h2>
<div class='content'><p>For complex or large-scale visualizations, consider using canvas rendering instead of SVG.</p>
<ul>
<li><strong>Canvas Rendering</strong>: Canvas can handle a larger number of elements more efficiently than SVG.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignY2FudmFzJyk7CmNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKCmRhdGEuZm9yRWFjaChkID0+IHsKICBjb250ZXh0LmJlZ2luUGF0aCgpOwogIGNvbnRleHQuYXJjKGQueCwgZC55LCBkLnJhZGl1cywgMCwgMiAqIE1hdGguUEkpOwogIGNvbnRleHQuZmlsbCgpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const canvas = document.querySelector('canvas');
const context = canvas.getContext('2d');

data.forEach(d =&gt; {
  context.beginPath();
  context.arc(d.x, d.y, d.radius, 0, 2 * Math.PI);
  context.fill();
});</pre></div><div class='content'></div><h2><ol start="5">
<li>Profile and Benchmark</li>
</ol>
</h2>
<div class='content'><p>Regularly profile your code to identify performance bottlenecks.</p>
<ul>
<li><strong>Browser DevTools</strong>: Use browser developer tools to profile your code and monitor performance.</li>
<li><strong>Benchmarking</strong>: Write benchmarks to compare different approaches and choose the most efficient one.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc29sZS50aW1lKCdyZW5kZXJpbmcnKTsKLy8gWW91ciByZW5kZXJpbmcgY29kZSBoZXJlCmNvbnNvbGUudGltZUVuZCgncmVuZGVyaW5nJyk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>console.time('rendering');
// Your rendering code here
console.timeEnd('rendering');</pre></div><div class='content'></div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise: Optimize a Bar Chart</p>
</h2>
<div class='content'><p>Given a basic bar chart, optimize its performance by applying the techniques discussed.</p>
<h4>Initial Code</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogIDx0aXRsZT5CYXIgQ2hhcnQ8L3RpdGxlPgogIDxzY3JpcHQgc3JjPSJodHRwczovL2QzanMub3JnL2QzLnY2Lm1pbi5qcyI+PC9zY3JpcHQ+CjwvaGVhZD4KPGJvZHk+CiAgPHNjcmlwdD4KICAgIGNvbnN0IGRhdGEgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDAwIH0sICgpID0+IE1hdGgucmFuZG9tKCkgKiAxMDApOwoKICAgIGNvbnN0IHN2ZyA9IGQzLnNlbGVjdCgnYm9keScpLmFwcGVuZCgnc3ZnJykKICAgICAgLmF0dHIoJ3dpZHRoJywgODAwKQogICAgICAuYXR0cignaGVpZ2h0JywgNDAwKTsKCiAgICBzdmcuc2VsZWN0QWxsKCdyZWN0JykKICAgICAgLmRhdGEoZGF0YSkKICAgICAgLmVudGVyKCkuYXBwZW5kKCdyZWN0JykKICAgICAgLmF0dHIoJ3gnLCAoZCwgaSkgPT4gaSAqIDMpCiAgICAgIC5hdHRyKCd5JywgZCA9PiA0MDAgLSBkKQogICAgICAuYXR0cignd2lkdGgnLCAyKQogICAgICAuYXR0cignaGVpZ2h0JywgZCA9PiBkKTsKICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;title&gt;Bar Chart&lt;/title&gt;
  &lt;script src=&quot;https://d3js.org/d3.v6.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script&gt;
    const data = Array.from({ length: 1000 }, () =&gt; Math.random() * 100);

    const svg = d3.select('body').append('svg')
      .attr('width', 800)
      .attr('height', 400);

    svg.selectAll('rect')
      .data(data)
      .enter().append('rect')
      .attr('x', (d, i) =&gt; i * 3)
      .attr('y', d =&gt; 400 - d)
      .attr('width', 2)
      .attr('height', d =&gt; d);
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'><h4>Optimized Code</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogIDx0aXRsZT5PcHRpbWl6ZWQgQmFyIENoYXJ0PC90aXRsZT4KICA8c2NyaXB0IHNyYz0iaHR0cHM6Ly9kM2pzLm9yZy9kMy52Ni5taW4uanMiPjwvc2NyaXB0Pgo8L2hlYWQ+Cjxib2R5PgogIDxzY3JpcHQ+CiAgICBjb25zdCBkYXRhID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAwMCB9LCAoKSA9PiBNYXRoLnJhbmRvbSgpICogMTAwKTsKCiAgICBjb25zdCBzdmcgPSBkMy5zZWxlY3QoJ2JvZHknKS5hcHBlbmQoJ3N2ZycpCiAgICAgIC5hdHRyKCd3aWR0aCcsIDgwMCkKICAgICAgLmF0dHIoJ2hlaWdodCcsIDQwMCk7CgogICAgY29uc3QgdXBkYXRlID0gc3ZnLnNlbGVjdEFsbCgncmVjdCcpCiAgICAgIC5kYXRhKGRhdGEsIChkLCBpKSA9PiBpKTsKCiAgICB1cGRhdGUuZW50ZXIoKS5hcHBlbmQoJ3JlY3QnKQogICAgICAubWVyZ2UodXBkYXRlKQogICAgICAuYXR0cigneCcsIChkLCBpKSA9PiBpICogMykKICAgICAgLmF0dHIoJ3knLCBkID0+IDQwMCAtIGQpCiAgICAgIC5hdHRyKCd3aWR0aCcsIDIpCiAgICAgIC5hdHRyKCdoZWlnaHQnLCBkID0+IGQpOwoKICAgIHVwZGF0ZS5leGl0KCkucmVtb3ZlKCk7CiAgPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;title&gt;Optimized Bar Chart&lt;/title&gt;
  &lt;script src=&quot;https://d3js.org/d3.v6.min.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script&gt;
    const data = Array.from({ length: 1000 }, () =&gt; Math.random() * 100);

    const svg = d3.select('body').append('svg')
      .attr('width', 800)
      .attr('height', 400);

    const update = svg.selectAll('rect')
      .data(data, (d, i) =&gt; i);

    update.enter().append('rect')
      .merge(update)
      .attr('x', (d, i) =&gt; i * 3)
      .attr('y', d =&gt; 400 - d)
      .attr('width', 2)
      .attr('height', d =&gt; d);

    update.exit().remove();
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h2><p>Solution Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>Efficient Data Binding</strong>: Used a key function to ensure efficient data binding.</li>
<li><strong>Minimize DOM Manipulations</strong>: Used <code>merge</code> to update existing elements and <code>exit</code> to remove unnecessary elements.</li>
</ul>
</div><h1><p>Summary</p>
</h1>
<div class='content'><p>In this section, we covered various techniques to optimize the performance of D3.js visualizations, including minimizing DOM manipulations, efficient data binding, using appropriate data structures, optimizing rendering, and profiling and benchmarking. By applying these techniques, you can ensure that your visualizations are both efficient and responsive, even with large datasets or complex interactions.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='07-04-case-studies' title="Case Studies and Examples">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='08-02-handling-large-datasets' title="Handling Large Datasets">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
