<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Cleaning and Transformation</title>

    <link rel="alternate" href="https://campusempresa.com/mod/d3_js/07-02-data-cleaning-transformation" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/d3_js/07-02-data-cleaning-transformation" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/d3_js/07-02-data-cleaning-transformation" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/d3_js/07-02-data-cleaning-transformation" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/d3_js/07-02-data-cleaning-transformation" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='07-01-fetching-data-apis' title="Fetching Data from APIs">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Data Cleaning and Transformation</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-03-integrating-other-libraries' title="Integrating with Other Libraries">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this module, we will explore the essential steps of data cleaning and transformation, which are crucial for preparing data for visualization with D3.js. This process ensures that the data is in the correct format and free of inconsistencies, making it easier to create accurate and meaningful visualizations.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Data Cleaning</strong>: The process of detecting and correcting (or removing) corrupt or inaccurate records from a dataset.</li>
<li><strong>Data Transformation</strong>: The process of converting data from one format or structure into another format or structure.</li>
</ol>
</div><h1>Steps in Data Cleaning and Transformation</h1>
<div class='content'><ol>
<li><strong>Identifying and Handling Missing Values</strong></li>
<li><strong>Removing Duplicates</strong></li>
<li><strong>Correcting Inconsistencies</strong></li>
<li><strong>Normalizing Data</strong></li>
<li><strong>Transforming Data Types</strong></li>
<li><strong>Aggregating Data</strong></li>
</ol>
</div><h1>Practical Example: Cleaning and Transforming Data with D3.js</h1>
<div class='content'></div><h2>Step 1: Loading Data</h2>
<div class='content'><p>First, let's load a sample dataset using D3.js. We'll use a CSV file for this example.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMuY3N2KCJkYXRhL3NhbXBsZS1kYXRhLmNzdiIpLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgY29uc29sZS5sb2coZGF0YSk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.csv(&quot;data/sample-data.csv&quot;).then(function(data) {
    console.log(data);
});</pre></div><div class='content'></div><h2>Step 2: Identifying and Handling Missing Values</h2>
<div class='content'><p>Missing values can be identified and handled by checking for <code>null</code>, <code>undefined</code>, or empty strings.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMuY3N2KCJkYXRhL3NhbXBsZS1kYXRhLmNzdiIpLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgZGF0YS5mb3JFYWNoKGQgPT4gewogICAgICAgIGlmIChkLnZhbHVlID09PSBudWxsIHx8IGQudmFsdWUgPT09IHVuZGVmaW5lZCB8fCBkLnZhbHVlID09PSAiIikgewogICAgICAgICAgICBkLnZhbHVlID0gMDsgLy8gUmVwbGFjZSBtaXNzaW5nIHZhbHVlcyB3aXRoIDAKICAgICAgICB9CiAgICB9KTsKICAgIGNvbnNvbGUubG9nKGRhdGEpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.csv(&quot;data/sample-data.csv&quot;).then(function(data) {
    data.forEach(d =&gt; {
        if (d.value === null || d.value === undefined || d.value === &quot;&quot;) {
            d.value = 0; // Replace missing values with 0
        }
    });
    console.log(data);
});</pre></div><div class='content'></div><h2>Step 3: Removing Duplicates</h2>
<div class='content'><p>Duplicates can be removed by using JavaScript's <code>Set</code> or by filtering the data.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMuY3N2KCJkYXRhL3NhbXBsZS1kYXRhLmNzdiIpLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgbGV0IHVuaXF1ZURhdGEgPSBkYXRhLmZpbHRlcigodmFsdWUsIGluZGV4LCBzZWxmKSA9PiAKICAgICAgICBpbmRleCA9PT0gc2VsZi5maW5kSW5kZXgoKHQpID0+ICgKICAgICAgICAgICAgdC5pZCA9PT0gdmFsdWUuaWQKICAgICAgICApKQogICAgKTsKICAgIGNvbnNvbGUubG9nKHVuaXF1ZURhdGEpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.csv(&quot;data/sample-data.csv&quot;).then(function(data) {
    let uniqueData = data.filter((value, index, self) =&gt; 
        index === self.findIndex((t) =&gt; (
            t.id === value.id
        ))
    );
    console.log(uniqueData);
});</pre></div><div class='content'></div><h2>Step 4: Correcting Inconsistencies</h2>
<div class='content'><p>Inconsistencies can be corrected by standardizing the data format.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMuY3N2KCJkYXRhL3NhbXBsZS1kYXRhLmNzdiIpLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgZGF0YS5mb3JFYWNoKGQgPT4gewogICAgICAgIGQuZGF0ZSA9IG5ldyBEYXRlKGQuZGF0ZSk7IC8vIENvbnZlcnQgZGF0ZSBzdHJpbmdzIHRvIERhdGUgb2JqZWN0cwogICAgfSk7CiAgICBjb25zb2xlLmxvZyhkYXRhKTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.csv(&quot;data/sample-data.csv&quot;).then(function(data) {
    data.forEach(d =&gt; {
        d.date = new Date(d.date); // Convert date strings to Date objects
    });
    console.log(data);
});</pre></div><div class='content'></div><h2>Step 5: Normalizing Data</h2>
<div class='content'><p>Normalization involves scaling data to a specific range, often between 0 and 1.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMuY3N2KCJkYXRhL3NhbXBsZS1kYXRhLmNzdiIpLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgbGV0IG1heFZhbHVlID0gZDMubWF4KGRhdGEsIGQgPT4gK2QudmFsdWUpOwogICAgZGF0YS5mb3JFYWNoKGQgPT4gewogICAgICAgIGQubm9ybWFsaXplZFZhbHVlID0gK2QudmFsdWUgLyBtYXhWYWx1ZTsKICAgIH0pOwogICAgY29uc29sZS5sb2coZGF0YSk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.csv(&quot;data/sample-data.csv&quot;).then(function(data) {
    let maxValue = d3.max(data, d =&gt; +d.value);
    data.forEach(d =&gt; {
        d.normalizedValue = +d.value / maxValue;
    });
    console.log(data);
});</pre></div><div class='content'></div><h2>Step 6: Transforming Data Types</h2>
<div class='content'><p>Transforming data types ensures that all data is in the correct format for analysis.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMuY3N2KCJkYXRhL3NhbXBsZS1kYXRhLmNzdiIpLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgZGF0YS5mb3JFYWNoKGQgPT4gewogICAgICAgIGQudmFsdWUgPSArZC52YWx1ZTsgLy8gQ29udmVydCBzdHJpbmcgdG8gbnVtYmVyCiAgICB9KTsKICAgIGNvbnNvbGUubG9nKGRhdGEpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.csv(&quot;data/sample-data.csv&quot;).then(function(data) {
    data.forEach(d =&gt; {
        d.value = +d.value; // Convert string to number
    });
    console.log(data);
});</pre></div><div class='content'></div><h2>Step 7: Aggregating Data</h2>
<div class='content'><p>Aggregating data involves summarizing data points to provide a higher-level view.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMuY3N2KCJkYXRhL3NhbXBsZS1kYXRhLmNzdiIpLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgbGV0IGFnZ3JlZ2F0ZWREYXRhID0gZDMubmVzdCgpCiAgICAgICAgLmtleShkID0+IGQuY2F0ZWdvcnkpCiAgICAgICAgLnJvbGx1cCh2ID0+IGQzLnN1bSh2LCBkID0+IGQudmFsdWUpKQogICAgICAgIC5lbnRyaWVzKGRhdGEpOwogICAgY29uc29sZS5sb2coYWdncmVnYXRlZERhdGEpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.csv(&quot;data/sample-data.csv&quot;).then(function(data) {
    let aggregatedData = d3.nest()
        .key(d =&gt; d.category)
        .rollup(v =&gt; d3.sum(v, d =&gt; d.value))
        .entries(data);
    console.log(aggregatedData);
});</pre></div><div class='content'></div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise: Clean and Transform a Dataset</h2>
<div class='content'><p>Given the following CSV data, clean and transform it to prepare for visualization:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aWQsZGF0ZSx2YWx1ZSxjYXRlZ29yeQoxLDIwMjMtMDEtMDEsMTAsQQoyLDIwMjMtMDEtMDIsMTUsQgozLDIwMjMtMDEtMDMsLEEKNCwyMDIzLTAxLTA0LDIwLEIKNSwyMDIzLTAxLTA1LDI1LEEKNiwyMDIzLTAxLTAxLDEwLEE="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>id,date,value,category
1,2023-01-01,10,A
2,2023-01-02,15,B
3,2023-01-03,,A
4,2023-01-04,20,B
5,2023-01-05,25,A
6,2023-01-01,10,A</pre></div><div class='content'><ol>
<li>Load the data using D3.js.</li>
<li>Handle missing values by replacing them with the average value of the column.</li>
<li>Remove duplicate entries.</li>
<li>Convert the <code>date</code> column to Date objects.</li>
<li>Normalize the <code>value</code> column.</li>
<li>Aggregate the data by <code>category</code>.</li>
</ol>
</div><h2>Solution</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMuY3N2KCJkYXRhL3NhbXBsZS1kYXRhLmNzdiIpLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgLy8gU3RlcCAxOiBIYW5kbGUgbWlzc2luZyB2YWx1ZXMKICAgIGxldCB0b3RhbFZhbHVlID0gMDsKICAgIGxldCBjb3VudCA9IDA7CiAgICBkYXRhLmZvckVhY2goZCA9PiB7CiAgICAgICAgaWYgKGQudmFsdWUgIT09IG51bGwgJiYgZC52YWx1ZSAhPT0gdW5kZWZpbmVkICYmIGQudmFsdWUgIT09ICIiKSB7CiAgICAgICAgICAgIHRvdGFsVmFsdWUgKz0gK2QudmFsdWU7CiAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgfQogICAgfSk7CiAgICBsZXQgYXZlcmFnZVZhbHVlID0gdG90YWxWYWx1ZSAvIGNvdW50OwogICAgZGF0YS5mb3JFYWNoKGQgPT4gewogICAgICAgIGlmIChkLnZhbHVlID09PSBudWxsIHx8IGQudmFsdWUgPT09IHVuZGVmaW5lZCB8fCBkLnZhbHVlID09PSAiIikgewogICAgICAgICAgICBkLnZhbHVlID0gYXZlcmFnZVZhbHVlOwogICAgICAgIH0KICAgIH0pOwoKICAgIC8vIFN0ZXAgMjogUmVtb3ZlIGR1cGxpY2F0ZXMKICAgIGxldCB1bmlxdWVEYXRhID0gZGF0YS5maWx0ZXIoKHZhbHVlLCBpbmRleCwgc2VsZikgPT4gCiAgICAgICAgaW5kZXggPT09IHNlbGYuZmluZEluZGV4KCh0KSA9PiAoCiAgICAgICAgICAgIHQuaWQgPT09IHZhbHVlLmlkCiAgICAgICAgKSkKICAgICk7CgogICAgLy8gU3RlcCAzOiBDb252ZXJ0IGRhdGUgc3RyaW5ncyB0byBEYXRlIG9iamVjdHMKICAgIHVuaXF1ZURhdGEuZm9yRWFjaChkID0+IHsKICAgICAgICBkLmRhdGUgPSBuZXcgRGF0ZShkLmRhdGUpOwogICAgfSk7CgogICAgLy8gU3RlcCA0OiBOb3JtYWxpemUgdGhlIHZhbHVlIGNvbHVtbgogICAgbGV0IG1heFZhbHVlID0gZDMubWF4KHVuaXF1ZURhdGEsIGQgPT4gK2QudmFsdWUpOwogICAgdW5pcXVlRGF0YS5mb3JFYWNoKGQgPT4gewogICAgICAgIGQubm9ybWFsaXplZFZhbHVlID0gK2QudmFsdWUgLyBtYXhWYWx1ZTsKICAgIH0pOwoKICAgIC8vIFN0ZXAgNTogQWdncmVnYXRlIGRhdGEgYnkgY2F0ZWdvcnkKICAgIGxldCBhZ2dyZWdhdGVkRGF0YSA9IGQzLm5lc3QoKQogICAgICAgIC5rZXkoZCA9PiBkLmNhdGVnb3J5KQogICAgICAgIC5yb2xsdXAodiA9PiBkMy5zdW0odiwgZCA9PiBkLnZhbHVlKSkKICAgICAgICAuZW50cmllcyh1bmlxdWVEYXRhKTsKCiAgICBjb25zb2xlLmxvZyhhZ2dyZWdhdGVkRGF0YSk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.csv(&quot;data/sample-data.csv&quot;).then(function(data) {
    // Step 1: Handle missing values
    let totalValue = 0;
    let count = 0;
    data.forEach(d =&gt; {
        if (d.value !== null &amp;&amp; d.value !== undefined &amp;&amp; d.value !== &quot;&quot;) {
            totalValue += +d.value;
            count++;
        }
    });
    let averageValue = totalValue / count;
    data.forEach(d =&gt; {
        if (d.value === null || d.value === undefined || d.value === &quot;&quot;) {
            d.value = averageValue;
        }
    });

    // Step 2: Remove duplicates
    let uniqueData = data.filter((value, index, self) =&gt; 
        index === self.findIndex((t) =&gt; (
            t.id === value.id
        ))
    );

    // Step 3: Convert date strings to Date objects
    uniqueData.forEach(d =&gt; {
        d.date = new Date(d.date);
    });

    // Step 4: Normalize the value column
    let maxValue = d3.max(uniqueData, d =&gt; +d.value);
    uniqueData.forEach(d =&gt; {
        d.normalizedValue = +d.value / maxValue;
    });

    // Step 5: Aggregate data by category
    let aggregatedData = d3.nest()
        .key(d =&gt; d.category)
        .rollup(v =&gt; d3.sum(v, d =&gt; d.value))
        .entries(uniqueData);

    console.log(aggregatedData);
});</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered the essential steps of data cleaning and transformation, including handling missing values, removing duplicates, correcting inconsistencies, normalizing data, transforming data types, and aggregating data. These steps are crucial for preparing data for visualization with D3.js, ensuring that the data is accurate and in the correct format. In the next module, we will explore how to integrate D3.js with other libraries to enhance our visualizations.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='07-01-fetching-data-apis' title="Fetching Data from APIs">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-03-integrating-other-libraries' title="Integrating with Other Libraries">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
