<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Advanced D3.js Patterns</title>

    <link rel="alternate" href="https://campusempresa.com/mod/d3_js/09-03-advanced-patterns" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/d3_js/09-03-advanced-patterns" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/d3_js/09-03-advanced-patterns" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=3" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/d3_js/09-03-advanced-patterns" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/d3_js/09-03-advanced-patterns" class="px-2">CA</a>
</span>
			<span class="d-none d-md-inline"><br><cite>Building today's and tomorrow's society</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Languages</a>
				 					<a href="/categ/frameworks">Frameworks</a>
				 					<a href="/categ/tech-tools">Tools</a>
				 					<a href="/categ/foundations">Foundations</a>
				 					<a href="/categ/soft-skills">Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='09-02-reusable-components' title="Reusable Components">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Advanced D3.js Patterns</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-04-contributing-community' title="Contributing to D3.js Community">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will delve into advanced patterns in D3.js that can help you create more efficient, maintainable, and scalable visualizations. These patterns are essential for developers looking to push the boundaries of what D3.js can do and to create complex, interactive data visualizations.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Reusable Charts</strong>: Creating modular and reusable chart components.</li>
<li><strong>Data Joins</strong>: Advanced techniques for binding data to DOM elements.</li>
<li><strong>Enter, Update, Exit Pattern</strong>: Managing data updates efficiently.</li>
<li><strong>Custom Transitions and Animations</strong>: Creating smooth and complex animations.</li>
<li><strong>Event Handling</strong>: Advanced event handling techniques for interactivity.</li>
</ol>
</div><h1><p>Reusable Charts</p>
</h1>
<div class='content'><p>Reusable charts are a powerful pattern in D3.js that allows you to create modular and maintainable code. The idea is to encapsulate the chart logic in a function that can be reused with different datasets and configurations.</p>
</div><h2><p>Example: Reusable Bar Chart</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gYmFyQ2hhcnQoKSB7CiAgICBsZXQgd2lkdGggPSA1MDA7CiAgICBsZXQgaGVpZ2h0ID0gMzAwOwogICAgbGV0IG1hcmdpbiA9IHsgdG9wOiAyMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiA0MCB9OwoKICAgIGZ1bmN0aW9uIGNoYXJ0KHNlbGVjdGlvbikgewogICAgICAgIHNlbGVjdGlvbi5lYWNoKGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgLy8gU2V0IHVwIHRoZSBTVkcgZWxlbWVudAogICAgICAgICAgICBsZXQgc3ZnID0gZDMuc2VsZWN0KHRoaXMpLnNlbGVjdEFsbCgic3ZnIikuZGF0YShbZGF0YV0pOwogICAgICAgICAgICBsZXQgc3ZnRW50ZXIgPSBzdmcuZW50ZXIoKS5hcHBlbmQoInN2ZyIpOwogICAgICAgICAgICBzdmcgPSBzdmcubWVyZ2Uoc3ZnRW50ZXIpOwoKICAgICAgICAgICAgc3ZnLmF0dHIoIndpZHRoIiwgd2lkdGgpCiAgICAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpOwoKICAgICAgICAgICAgLy8gU2V0IHVwIHNjYWxlcwogICAgICAgICAgICBsZXQgeCA9IGQzLnNjYWxlQmFuZCgpLnJhbmdlUm91bmQoWzAsIHdpZHRoIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHRdKS5wYWRkaW5nKDAuMSk7CiAgICAgICAgICAgIGxldCB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZVJvdW5kKFtoZWlnaHQgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbSwgMF0pOwoKICAgICAgICAgICAgeC5kb21haW4oZGF0YS5tYXAoZCA9PiBkLm5hbWUpKTsKICAgICAgICAgICAgeS5kb21haW4oWzAsIGQzLm1heChkYXRhLCBkID0+IGQudmFsdWUpXSk7CgogICAgICAgICAgICAvLyBBcHBlbmQgdGhlIGJhcnMKICAgICAgICAgICAgbGV0IGJhcnMgPSBzdmcuc2VsZWN0QWxsKCIuYmFyIikuZGF0YShkYXRhKTsKICAgICAgICAgICAgYmFycy5lbnRlcigpLmFwcGVuZCgicmVjdCIpCiAgICAgICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiYmFyIikKICAgICAgICAgICAgICAgIC5hdHRyKCJ4IiwgZCA9PiB4KGQubmFtZSkpCiAgICAgICAgICAgICAgICAuYXR0cigieSIsIGQgPT4geShkLnZhbHVlKSkKICAgICAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIHguYmFuZHdpZHRoKCkpCiAgICAgICAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgZCA9PiBoZWlnaHQgLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbSAtIHkoZC52YWx1ZSkpOwogICAgICAgIH0pOwogICAgfQoKICAgIGNoYXJ0LndpZHRoID0gZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiB3aWR0aDsKICAgICAgICB3aWR0aCA9IHZhbHVlOwogICAgICAgIHJldHVybiBjaGFydDsKICAgIH07CgogICAgY2hhcnQuaGVpZ2h0ID0gZnVuY3Rpb24odmFsdWUpIHsKICAgICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHJldHVybiBoZWlnaHQ7CiAgICAgICAgaGVpZ2h0ID0gdmFsdWU7CiAgICAgICAgcmV0dXJuIGNoYXJ0OwogICAgfTsKCiAgICByZXR1cm4gY2hhcnQ7Cn0KCi8vIFVzYWdlCmxldCBteUJhckNoYXJ0ID0gYmFyQ2hhcnQoKS53aWR0aCg2MDApLmhlaWdodCg0MDApOwpkMy5zZWxlY3QoIiNjaGFydCIpLmRhdHVtKGRhdGEpLmNhbGwobXlCYXJDaGFydCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function barChart() {
    let width = 500;
    let height = 300;
    let margin = { top: 20, right: 20, bottom: 30, left: 40 };

    function chart(selection) {
        selection.each(function(data) {
            // Set up the SVG element
            let svg = d3.select(this).selectAll(&quot;svg&quot;).data([data]);
            let svgEnter = svg.enter().append(&quot;svg&quot;);
            svg = svg.merge(svgEnter);

            svg.attr(&quot;width&quot;, width)
               .attr(&quot;height&quot;, height);

            // Set up scales
            let x = d3.scaleBand().rangeRound([0, width - margin.left - margin.right]).padding(0.1);
            let y = d3.scaleLinear().rangeRound([height - margin.top - margin.bottom, 0]);

            x.domain(data.map(d =&gt; d.name));
            y.domain([0, d3.max(data, d =&gt; d.value)]);

            // Append the bars
            let bars = svg.selectAll(&quot;.bar&quot;).data(data);
            bars.enter().append(&quot;rect&quot;)
                .attr(&quot;class&quot;, &quot;bar&quot;)
                .attr(&quot;x&quot;, d =&gt; x(d.name))
                .attr(&quot;y&quot;, d =&gt; y(d.value))
                .attr(&quot;width&quot;, x.bandwidth())
                .attr(&quot;height&quot;, d =&gt; height - margin.top - margin.bottom - y(d.value));
        });
    }

    chart.width = function(value) {
        if (!arguments.length) return width;
        width = value;
        return chart;
    };

    chart.height = function(value) {
        if (!arguments.length) return height;
        height = value;
        return chart;
    };

    return chart;
}

// Usage
let myBarChart = barChart().width(600).height(400);
d3.select(&quot;#chart&quot;).datum(data).call(myBarChart);</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>Encapsulation</strong>: The chart logic is encapsulated in a function, making it reusable.</li>
<li><strong>Configuration</strong>: The <code>width</code> and <code>height</code> can be configured using getter/setter methods.</li>
<li><strong>Selection</strong>: The chart function is called on a D3 selection, allowing it to be reused with different datasets.</li>
</ul>
</div><h1><p>Advanced Data Joins</p>
</h1>
<div class='content'><p>Data joins are a fundamental concept in D3.js, allowing you to bind data to DOM elements. Advanced data joins involve more complex scenarios, such as handling nested data or updating existing elements.</p>
</div><h2><p>Example: Nested Data Join</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IG5lc3RlZERhdGEgPSBbCiAgICB7IGNhdGVnb3J5OiAiQSIsIHZhbHVlczogWzEsIDIsIDNdIH0sCiAgICB7IGNhdGVnb3J5OiAiQiIsIHZhbHVlczogWzQsIDUsIDZdIH0KXTsKCmxldCBzdmcgPSBkMy5zZWxlY3QoInN2ZyIpOwoKbGV0IGNhdGVnb3JpZXMgPSBzdmcuc2VsZWN0QWxsKCIuY2F0ZWdvcnkiKQogICAgLmRhdGEobmVzdGVkRGF0YSkKICAgIC5lbnRlcigpLmFwcGVuZCgiZyIpCiAgICAuYXR0cigiY2xhc3MiLCAiY2F0ZWdvcnkiKTsKCmNhdGVnb3JpZXMuc2VsZWN0QWxsKCJjaXJjbGUiKQogICAgLmRhdGEoZCA9PiBkLnZhbHVlcykKICAgIC5lbnRlcigpLmFwcGVuZCgiY2lyY2xlIikKICAgIC5hdHRyKCJjeCIsIChkLCBpKSA9PiBpICogMzApCiAgICAuYXR0cigiY3kiLCAoZCwgaSwgbm9kZXMpID0+IGQzLnNlbGVjdChub2Rlc1tpXS5wYXJlbnROb2RlKS5kYXR1bSgpLmNhdGVnb3J5ID09PSAiQSIgPyA1MCA6IDEwMCkKICAgIC5hdHRyKCJyIiwgZCA9PiBkKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let nestedData = [
    { category: &quot;A&quot;, values: [1, 2, 3] },
    { category: &quot;B&quot;, values: [4, 5, 6] }
];

let svg = d3.select(&quot;svg&quot;);

let categories = svg.selectAll(&quot;.category&quot;)
    .data(nestedData)
    .enter().append(&quot;g&quot;)
    .attr(&quot;class&quot;, &quot;category&quot;);

categories.selectAll(&quot;circle&quot;)
    .data(d =&gt; d.values)
    .enter().append(&quot;circle&quot;)
    .attr(&quot;cx&quot;, (d, i) =&gt; i * 30)
    .attr(&quot;cy&quot;, (d, i, nodes) =&gt; d3.select(nodes[i].parentNode).datum().category === &quot;A&quot; ? 50 : 100)
    .attr(&quot;r&quot;, d =&gt; d);</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>Nested Data</strong>: The data is nested, with each category containing an array of values.</li>
<li><strong>Nested Selection</strong>: The <code>selectAll</code> method is used twice to handle the nested data structure.</li>
</ul>
</div><h1><p>Enter, Update, Exit Pattern</p>
</h1>
<div class='content'><p>The enter, update, exit pattern is crucial for managing data updates efficiently. It allows you to handle new data, update existing data, and remove old data.</p>
</div><h2><p>Example: Enter, Update, Exit</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGRhdGEgPSBbMSwgMiwgMywgNCwgNV07CgpsZXQgY2lyY2xlcyA9IHN2Zy5zZWxlY3RBbGwoImNpcmNsZSIpCiAgICAuZGF0YShkYXRhKTsKCmNpcmNsZXMuZW50ZXIoKS5hcHBlbmQoImNpcmNsZSIpCiAgICAuYXR0cigiY3giLCAoZCwgaSkgPT4gaSAqIDMwKQogICAgLmF0dHIoImN5IiwgNTApCiAgICAuYXR0cigiciIsIDEwKQogICAgLm1lcmdlKGNpcmNsZXMpCiAgICAuYXR0cigiZmlsbCIsICJibHVlIik7CgpjaXJjbGVzLmV4aXQoKS5yZW1vdmUoKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let data = [1, 2, 3, 4, 5];

let circles = svg.selectAll(&quot;circle&quot;)
    .data(data);

circles.enter().append(&quot;circle&quot;)
    .attr(&quot;cx&quot;, (d, i) =&gt; i * 30)
    .attr(&quot;cy&quot;, 50)
    .attr(&quot;r&quot;, 10)
    .merge(circles)
    .attr(&quot;fill&quot;, &quot;blue&quot;);

circles.exit().remove();</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>Enter</strong>: Handles new data by appending new elements.</li>
<li><strong>Update</strong>: Updates existing elements with new data.</li>
<li><strong>Exit</strong>: Removes old elements that are no longer needed.</li>
</ul>
</div><h1><p>Custom Transitions and Animations</p>
</h1>
<div class='content'><p>Creating smooth and complex animations can enhance the user experience. D3.js provides powerful tools for creating custom transitions.</p>
</div><h2><p>Example: Custom Transition</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGRhdGEgPSBbMSwgMiwgMywgNCwgNV07CgpsZXQgY2lyY2xlcyA9IHN2Zy5zZWxlY3RBbGwoImNpcmNsZSIpCiAgICAuZGF0YShkYXRhKTsKCmNpcmNsZXMuZW50ZXIoKS5hcHBlbmQoImNpcmNsZSIpCiAgICAuYXR0cigiY3giLCAoZCwgaSkgPT4gaSAqIDMwKQogICAgLmF0dHIoImN5IiwgNTApCiAgICAuYXR0cigiciIsIDEwKQogICAgLm1lcmdlKGNpcmNsZXMpCiAgICAudHJhbnNpdGlvbigpCiAgICAuZHVyYXRpb24oMTAwMCkKICAgIC5hdHRyKCJmaWxsIiwgInJlZCIpCiAgICAuYXR0cigiciIsIDIwKTsKCmNpcmNsZXMuZXhpdCgpLnRyYW5zaXRpb24oKQogICAgLmR1cmF0aW9uKDEwMDApCiAgICAuYXR0cigiciIsIDApCiAgICAucmVtb3ZlKCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let data = [1, 2, 3, 4, 5];

let circles = svg.selectAll(&quot;circle&quot;)
    .data(data);

circles.enter().append(&quot;circle&quot;)
    .attr(&quot;cx&quot;, (d, i) =&gt; i * 30)
    .attr(&quot;cy&quot;, 50)
    .attr(&quot;r&quot;, 10)
    .merge(circles)
    .transition()
    .duration(1000)
    .attr(&quot;fill&quot;, &quot;red&quot;)
    .attr(&quot;r&quot;, 20);

circles.exit().transition()
    .duration(1000)
    .attr(&quot;r&quot;, 0)
    .remove();</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>Transition</strong>: The <code>transition</code> method is used to create animations.</li>
<li><strong>Duration</strong>: The <code>duration</code> method specifies the length of the animation.</li>
<li><strong>Chaining</strong>: Transitions can be chained to create complex animations.</li>
</ul>
</div><h1><p>Advanced Event Handling</p>
</h1>
<div class='content'><p>Advanced event handling techniques can make your visualizations more interactive and responsive.</p>
</div><h2><p>Example: Advanced Event Handling</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3ZnLnNlbGVjdEFsbCgiY2lyY2xlIikKICAgIC5kYXRhKGRhdGEpCiAgICAuZW50ZXIoKS5hcHBlbmQoImNpcmNsZSIpCiAgICAuYXR0cigiY3giLCAoZCwgaSkgPT4gaSAqIDMwKQogICAgLmF0dHIoImN5IiwgNTApCiAgICAuYXR0cigiciIsIDEwKQogICAgLm9uKCJtb3VzZW92ZXIiLCBmdW5jdGlvbihldmVudCwgZCkgewogICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKCJmaWxsIiwgIm9yYW5nZSIpOwogICAgfSkKICAgIC5vbigibW91c2VvdXQiLCBmdW5jdGlvbihldmVudCwgZCkgewogICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKCJmaWxsIiwgImJsdWUiKTsKICAgIH0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>svg.selectAll(&quot;circle&quot;)
    .data(data)
    .enter().append(&quot;circle&quot;)
    .attr(&quot;cx&quot;, (d, i) =&gt; i * 30)
    .attr(&quot;cy&quot;, 50)
    .attr(&quot;r&quot;, 10)
    .on(&quot;mouseover&quot;, function(event, d) {
        d3.select(this).attr(&quot;fill&quot;, &quot;orange&quot;);
    })
    .on(&quot;mouseout&quot;, function(event, d) {
        d3.select(this).attr(&quot;fill&quot;, &quot;blue&quot;);
    });</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>Event Listeners</strong>: The <code>on</code> method is used to add event listeners.</li>
<li><strong>Event Handling</strong>: The event handlers change the attributes of the elements based on user interactions.</li>
</ul>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Task</p>
</h2>
<div class='content'><p>Create a reusable line chart component that can be used with different datasets and configurations. The line chart should support transitions and handle data updates efficiently.</p>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gbGluZUNoYXJ0KCkgewogICAgbGV0IHdpZHRoID0gNTAwOwogICAgbGV0IGhlaWdodCA9IDMwMDsKICAgIGxldCBtYXJnaW4gPSB7IHRvcDogMjAsIHJpZ2h0OiAyMCwgYm90dG9tOiAzMCwgbGVmdDogNDAgfTsKCiAgICBmdW5jdGlvbiBjaGFydChzZWxlY3Rpb24pIHsKICAgICAgICBzZWxlY3Rpb24uZWFjaChmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgIC8vIFNldCB1cCB0aGUgU1ZHIGVsZW1lbnQKICAgICAgICAgICAgbGV0IHN2ZyA9IGQzLnNlbGVjdCh0aGlzKS5zZWxlY3RBbGwoInN2ZyIpLmRhdGEoW2RhdGFdKTsKICAgICAgICAgICAgbGV0IHN2Z0VudGVyID0gc3ZnLmVudGVyKCkuYXBwZW5kKCJzdmciKTsKICAgICAgICAgICAgc3ZnID0gc3ZnLm1lcmdlKHN2Z0VudGVyKTsKCiAgICAgICAgICAgIHN2Zy5hdHRyKCJ3aWR0aCIsIHdpZHRoKQogICAgICAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgaGVpZ2h0KTsKCiAgICAgICAgICAgIC8vIFNldCB1cCBzY2FsZXMKICAgICAgICAgICAgbGV0IHggPSBkMy5zY2FsZUxpbmVhcigpLnJhbmdlKFswLCB3aWR0aCAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0XSk7CiAgICAgICAgICAgIGxldCB5ID0gZDMuc2NhbGVMaW5lYXIoKS5yYW5nZShbaGVpZ2h0IC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b20sIDBdKTsKCiAgICAgICAgICAgIHguZG9tYWluKGQzLmV4dGVudChkYXRhLCBkID0+IGQueCkpOwogICAgICAgICAgICB5LmRvbWFpbihkMy5leHRlbnQoZGF0YSwgZCA9PiBkLnkpKTsKCiAgICAgICAgICAgIC8vIFNldCB1cCBsaW5lIGdlbmVyYXRvcgogICAgICAgICAgICBsZXQgbGluZSA9IGQzLmxpbmUoKQogICAgICAgICAgICAgICAgLngoZCA9PiB4KGQueCkpCiAgICAgICAgICAgICAgICAueShkID0+IHkoZC55KSk7CgogICAgICAgICAgICAvLyBBcHBlbmQgdGhlIGxpbmUKICAgICAgICAgICAgbGV0IHBhdGggPSBzdmcuc2VsZWN0QWxsKCIubGluZSIpLmRhdGEoW2RhdGFdKTsKICAgICAgICAgICAgcGF0aC5lbnRlcigpLmFwcGVuZCgicGF0aCIpCiAgICAgICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibGluZSIpCiAgICAgICAgICAgICAgICAubWVyZ2UocGF0aCkKICAgICAgICAgICAgICAgIC50cmFuc2l0aW9uKCkKICAgICAgICAgICAgICAgIC5kdXJhdGlvbigxMDAwKQogICAgICAgICAgICAgICAgLmF0dHIoImQiLCBsaW5lKTsKICAgICAgICB9KTsKICAgIH0KCiAgICBjaGFydC53aWR0aCA9IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gd2lkdGg7CiAgICAgICAgd2lkdGggPSB2YWx1ZTsKICAgICAgICByZXR1cm4gY2hhcnQ7CiAgICB9OwoKICAgIGNoYXJ0LmhlaWdodCA9IGZ1bmN0aW9uKHZhbHVlKSB7CiAgICAgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gaGVpZ2h0OwogICAgICAgIGhlaWdodCA9IHZhbHVlOwogICAgICAgIHJldHVybiBjaGFydDsKICAgIH07CgogICAgcmV0dXJuIGNoYXJ0Owp9CgovLyBVc2FnZQpsZXQgbXlMaW5lQ2hhcnQgPSBsaW5lQ2hhcnQoKS53aWR0aCg2MDApLmhlaWdodCg0MDApOwpkMy5zZWxlY3QoIiNjaGFydCIpLmRhdHVtKGRhdGEpLmNhbGwobXlMaW5lQ2hhcnQpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function lineChart() {
    let width = 500;
    let height = 300;
    let margin = { top: 20, right: 20, bottom: 30, left: 40 };

    function chart(selection) {
        selection.each(function(data) {
            // Set up the SVG element
            let svg = d3.select(this).selectAll(&quot;svg&quot;).data([data]);
            let svgEnter = svg.enter().append(&quot;svg&quot;);
            svg = svg.merge(svgEnter);

            svg.attr(&quot;width&quot;, width)
               .attr(&quot;height&quot;, height);

            // Set up scales
            let x = d3.scaleLinear().range([0, width - margin.left - margin.right]);
            let y = d3.scaleLinear().range([height - margin.top - margin.bottom, 0]);

            x.domain(d3.extent(data, d =&gt; d.x));
            y.domain(d3.extent(data, d =&gt; d.y));

            // Set up line generator
            let line = d3.line()
                .x(d =&gt; x(d.x))
                .y(d =&gt; y(d.y));

            // Append the line
            let path = svg.selectAll(&quot;.line&quot;).data([data]);
            path.enter().append(&quot;path&quot;)
                .attr(&quot;class&quot;, &quot;line&quot;)
                .merge(path)
                .transition()
                .duration(1000)
                .attr(&quot;d&quot;, line);
        });
    }

    chart.width = function(value) {
        if (!arguments.length) return width;
        width = value;
        return chart;
    };

    chart.height = function(value) {
        if (!arguments.length) return height;
        height = value;
        return chart;
    };

    return chart;
}

// Usage
let myLineChart = lineChart().width(600).height(400);
d3.select(&quot;#chart&quot;).datum(data).call(myLineChart);</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>Reusable Component</strong>: The line chart is encapsulated in a function, making it reusable.</li>
<li><strong>Transitions</strong>: The line chart supports transitions for smooth updates.</li>
<li><strong>Configuration</strong>: The <code>width</code> and <code>height</code> can be configured using getter/setter methods.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we explored advanced D3.js patterns that can help you create more efficient, maintainable, and scalable visualizations. We covered reusable charts, advanced data joins, the enter, update, exit pattern, custom transitions, and advanced event handling. By mastering these patterns, you can take your D3.js skills to the next level and create complex, interactive data visualizations.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='09-02-reusable-components' title="Reusable Components">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='09-04-contributing-community' title="Contributing to D3.js Community">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Advertising</h1>
<p>This space is reserved for advertising.</p>
<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Thank you for collaborating!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
