<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading and Parsing Data</title>

    <link rel="alternate" href="https://campusempresa.com/mod/d3_js/03-01-loading-parsing-data" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/d3_js/03-01-loading-parsing-data" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/d3_js/03-01-loading-parsing-data" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/d3_js/03-01-loading-parsing-data" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/d3_js/03-01-loading-parsing-data" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='02-04-binding-data' title="Binding Data to Elements">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Loading and Parsing Data</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='03-02-using-scales' title="Using D3 Scales">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to load and parse data in D3.js. Data is the backbone of any visualization, and understanding how to effectively load and manipulate it is crucial for creating dynamic and informative visualizations.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Data Formats</strong>: Common data formats used in D3.js include CSV, TSV, JSON, and XML.</li>
<li><strong>Loading Data</strong>: D3.js provides methods to load data from various sources.</li>
<li><strong>Parsing Data</strong>: Once data is loaded, it often needs to be parsed or transformed to be useful in visualizations.</li>
</ol>
</div><h1>Loading Data</h1>
<div class='content'><p>D3.js offers several methods to load data from different formats. Here are some of the most commonly used methods:</p>
</div><h2>Loading CSV Data</h2>
<div class='content'><p>CSV (Comma-Separated Values) is a common data format. D3.js provides the <code>d3.csv</code> method to load CSV data.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMuY3N2KCJkYXRhLmNzdiIpLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgY29uc29sZS5sb2coZGF0YSk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.csv(&quot;data.csv&quot;).then(function(data) {
    console.log(data);
});</pre></div><div class='content'></div><h2>Loading JSON Data</h2>
<div class='content'><p>JSON (JavaScript Object Notation) is another popular data format. Use the <code>d3.json</code> method to load JSON data.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMuanNvbigiZGF0YS5qc29uIikudGhlbihmdW5jdGlvbihkYXRhKSB7CiAgICBjb25zb2xlLmxvZyhkYXRhKTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.json(&quot;data.json&quot;).then(function(data) {
    console.log(data);
});</pre></div><div class='content'></div><h2>Loading TSV Data</h2>
<div class='content'><p>TSV (Tab-Separated Values) is similar to CSV but uses tabs as delimiters. Use the <code>d3.tsv</code> method to load TSV data.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMudHN2KCJkYXRhLnRzdiIpLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgY29uc29sZS5sb2coZGF0YSk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.tsv(&quot;data.tsv&quot;).then(function(data) {
    console.log(data);
});</pre></div><div class='content'></div><h2>Loading XML Data</h2>
<div class='content'><p>XML (eXtensible Markup Language) is a markup language that defines a set of rules for encoding documents. Use the <code>d3.xml</code> method to load XML data.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMueG1sKCJkYXRhLnhtbCIpLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgY29uc29sZS5sb2coZGF0YSk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.xml(&quot;data.xml&quot;).then(function(data) {
    console.log(data);
});</pre></div><div class='content'></div><h1>Parsing Data</h1>
<div class='content'><p>Once the data is loaded, it often needs to be parsed or transformed. D3.js provides several utilities to help with this.</p>
</div><h2>Parsing CSV Data</h2>
<div class='content'><p>When loading CSV data, D3.js automatically parses it into an array of objects. Each object represents a row, with properties corresponding to the column names.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMuY3N2KCJkYXRhLmNzdiIpLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGQpIHsKICAgICAgICBkLnZhbHVlID0gK2QudmFsdWU7IC8vIENvbnZlcnQgc3RyaW5nIHRvIG51bWJlcgogICAgfSk7CiAgICBjb25zb2xlLmxvZyhkYXRhKTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.csv(&quot;data.csv&quot;).then(function(data) {
    data.forEach(function(d) {
        d.value = +d.value; // Convert string to number
    });
    console.log(data);
});</pre></div><div class='content'></div><h2>Parsing JSON Data</h2>
<div class='content'><p>JSON data is typically already in a usable format, but you may need to transform it to fit your needs.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMuanNvbigiZGF0YS5qc29uIikudGhlbihmdW5jdGlvbihkYXRhKSB7CiAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24oZCkgewogICAgICAgIGQudmFsdWUgPSArZC52YWx1ZTsgLy8gQ29udmVydCBzdHJpbmcgdG8gbnVtYmVyCiAgICB9KTsKICAgIGNvbnNvbGUubG9nKGRhdGEpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.json(&quot;data.json&quot;).then(function(data) {
    data.forEach(function(d) {
        d.value = +d.value; // Convert string to number
    });
    console.log(data);
});</pre></div><div class='content'></div><h2>Parsing TSV Data</h2>
<div class='content'><p>Similar to CSV, TSV data is parsed into an array of objects.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMudHN2KCJkYXRhLnRzdiIpLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGQpIHsKICAgICAgICBkLnZhbHVlID0gK2QudmFsdWU7IC8vIENvbnZlcnQgc3RyaW5nIHRvIG51bWJlcgogICAgfSk7CiAgICBjb25zb2xlLmxvZyhkYXRhKTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.tsv(&quot;data.tsv&quot;).then(function(data) {
    data.forEach(function(d) {
        d.value = +d.value; // Convert string to number
    });
    console.log(data);
});</pre></div><div class='content'></div><h2>Parsing XML Data</h2>
<div class='content'><p>Parsing XML data requires navigating the XML structure to extract the needed information.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZDMueG1sKCJkYXRhLnhtbCIpLnRoZW4oZnVuY3Rpb24oZGF0YSkgewogICAgbGV0IGl0ZW1zID0gZGF0YS5kb2N1bWVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIml0ZW0iKTsKICAgIGxldCBwYXJzZWREYXRhID0gW107CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IGl0ZW0gPSBpdGVtc1tpXTsKICAgICAgICBwYXJzZWREYXRhLnB1c2goewogICAgICAgICAgICBuYW1lOiBpdGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJuYW1lIilbMF0udGV4dENvbnRlbnQsCiAgICAgICAgICAgIHZhbHVlOiAraXRlbS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidmFsdWUiKVswXS50ZXh0Q29udGVudAogICAgICAgIH0pOwogICAgfQogICAgY29uc29sZS5sb2cocGFyc2VkRGF0YSk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>d3.xml(&quot;data.xml&quot;).then(function(data) {
    let items = data.documentElement.getElementsByTagName(&quot;item&quot;);
    let parsedData = [];
    for (let i = 0; i &lt; items.length; i++) {
        let item = items[i];
        parsedData.push({
            name: item.getElementsByTagName(&quot;name&quot;)[0].textContent,
            value: +item.getElementsByTagName(&quot;value&quot;)[0].textContent
        });
    }
    console.log(parsedData);
});</pre></div><div class='content'></div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise: Load and Parse CSV Data</h2>
<div class='content'><ol>
<li>
<p><strong>Objective</strong>: Load a CSV file and parse the data to create a simple bar chart.</p>
</li>
<li>
<p><strong>Data</strong>: Create a CSV file named <code>data.csv</code> with the following content:</p>
<pre><code class="language-csv">name,value
A,30
B,80
C,45
D,60
E,20
F,90
G,55
</code></pre>
</li>
<li>
<p><strong>Steps</strong>:</p>
<ul>
<li>Load the CSV file using <code>d3.csv</code>.</li>
<li>Parse the data to convert the <code>value</code> field to a number.</li>
<li>Create a simple bar chart using the parsed data.</li>
</ul>
</li>
</ol>
</div><h2>Solution</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+QmFyIENoYXJ0PC90aXRsZT4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2QzanMub3JnL2QzLnY2Lm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c3R5bGU+CiAgICAgICAgLmJhciB7CiAgICAgICAgICAgIGZpbGw6IHN0ZWVsYmx1ZTsKICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPHNjcmlwdD4KICAgICAgICAvLyBMb2FkIGFuZCBwYXJzZSB0aGUgQ1NWIGRhdGEKICAgICAgICBkMy5jc3YoImRhdGEuY3N2IikudGhlbihmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICBkLnZhbHVlID0gK2QudmFsdWU7IC8vIENvbnZlcnQgc3RyaW5nIHRvIG51bWJlcgogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIFNldCB1cCB0aGUgU1ZHIGNhbnZhcyBkaW1lbnNpb25zCiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gNTAwOwogICAgICAgICAgICBjb25zdCBoZWlnaHQgPSAzMDA7CiAgICAgICAgICAgIGNvbnN0IG1hcmdpbiA9IHsgdG9wOiAyMCwgcmlnaHQ6IDMwLCBib3R0b206IDQwLCBsZWZ0OiA0MCB9OwoKICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBTVkcgZWxlbWVudAogICAgICAgICAgICBjb25zdCBzdmcgPSBkMy5zZWxlY3QoImJvZHkiKS5hcHBlbmQoInN2ZyIpCiAgICAgICAgICAgICAgICAuYXR0cigid2lkdGgiLCB3aWR0aCkKICAgICAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpOwoKICAgICAgICAgICAgLy8gU2V0IHVwIHRoZSBzY2FsZXMKICAgICAgICAgICAgY29uc3QgeCA9IGQzLnNjYWxlQmFuZCgpCiAgICAgICAgICAgICAgICAuZG9tYWluKGRhdGEubWFwKGQgPT4gZC5uYW1lKSkKICAgICAgICAgICAgICAgIC5yYW5nZShbbWFyZ2luLmxlZnQsIHdpZHRoIC0gbWFyZ2luLnJpZ2h0XSkKICAgICAgICAgICAgICAgIC5wYWRkaW5nKDAuMSk7CgogICAgICAgICAgICBjb25zdCB5ID0gZDMuc2NhbGVMaW5lYXIoKQogICAgICAgICAgICAgICAgLmRvbWFpbihbMCwgZDMubWF4KGRhdGEsIGQgPT4gZC52YWx1ZSldKS5uaWNlKCkKICAgICAgICAgICAgICAgIC5yYW5nZShbaGVpZ2h0IC0gbWFyZ2luLmJvdHRvbSwgbWFyZ2luLnRvcF0pOwoKICAgICAgICAgICAgLy8gQWRkIHRoZSBiYXJzCiAgICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoIi5iYXIiKQogICAgICAgICAgICAgICAgLmRhdGEoZGF0YSkKICAgICAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgicmVjdCIpCiAgICAgICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiYmFyIikKICAgICAgICAgICAgICAgIC5hdHRyKCJ4IiwgZCA9PiB4KGQubmFtZSkpCiAgICAgICAgICAgICAgICAuYXR0cigieSIsIGQgPT4geShkLnZhbHVlKSkKICAgICAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIHguYmFuZHdpZHRoKCkpCiAgICAgICAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgZCA9PiB5KDApIC0geShkLnZhbHVlKSk7CgogICAgICAgICAgICAvLyBBZGQgdGhlIHgtYXhpcwogICAgICAgICAgICBzdmcuYXBwZW5kKCJnIikKICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKDAsJHtoZWlnaHQgLSBtYXJnaW4uYm90dG9tfSlgKQogICAgICAgICAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSh4KSk7CgogICAgICAgICAgICAvLyBBZGQgdGhlIHktYXhpcwogICAgICAgICAgICBzdmcuYXBwZW5kKCJnIikKICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCBgdHJhbnNsYXRlKCR7bWFyZ2luLmxlZnR9LDApYCkKICAgICAgICAgICAgICAgIC5jYWxsKGQzLmF4aXNMZWZ0KHkpKTsKICAgICAgICB9KTsKICAgIDwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Bar Chart&lt;/title&gt;
    &lt;script src=&quot;https://d3js.org/d3.v6.min.js&quot;&gt;&lt;/script&gt;
    &lt;style&gt;
        .bar {
            fill: steelblue;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;script&gt;
        // Load and parse the CSV data
        d3.csv(&quot;data.csv&quot;).then(function(data) {
            data.forEach(function(d) {
                d.value = +d.value; // Convert string to number
            });

            // Set up the SVG canvas dimensions
            const width = 500;
            const height = 300;
            const margin = { top: 20, right: 30, bottom: 40, left: 40 };

            // Create the SVG element
            const svg = d3.select(&quot;body&quot;).append(&quot;svg&quot;)
                .attr(&quot;width&quot;, width)
                .attr(&quot;height&quot;, height);

            // Set up the scales
            const x = d3.scaleBand()
                .domain(data.map(d =&gt; d.name))
                .range([margin.left, width - margin.right])
                .padding(0.1);

            const y = d3.scaleLinear()
                .domain([0, d3.max(data, d =&gt; d.value)]).nice()
                .range([height - margin.bottom, margin.top]);

            // Add the bars
            svg.selectAll(&quot;.bar&quot;)
                .data(data)
                .enter().append(&quot;rect&quot;)
                .attr(&quot;class&quot;, &quot;bar&quot;)
                .attr(&quot;x&quot;, d =&gt; x(d.name))
                .attr(&quot;y&quot;, d =&gt; y(d.value))
                .attr(&quot;width&quot;, x.bandwidth())
                .attr(&quot;height&quot;, d =&gt; y(0) - y(d.value));

            // Add the x-axis
            svg.append(&quot;g&quot;)
                .attr(&quot;transform&quot;, `translate(0,${height - margin.bottom})`)
                .call(d3.axisBottom(x));

            // Add the y-axis
            svg.append(&quot;g&quot;)
                .attr(&quot;transform&quot;, `translate(${margin.left},0)`)
                .call(d3.axisLeft(y));
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Incorrect Data Types</strong>: Ensure that numerical data is correctly parsed as numbers. Use the <code>+</code> operator or <code>parseInt</code>/<code>parseFloat</code> functions.</li>
<li><strong>File Paths</strong>: Make sure the file paths are correct and accessible from your HTML file.</li>
<li><strong>Data Structure</strong>: Understand the structure of your data and how to navigate it, especially for XML data.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered the basics of loading and parsing data in D3.js. We explored different data formats and how to load them using D3.js methods. We also discussed how to parse and transform the data to make it suitable for visualizations. With these skills, you are now ready to move on to using D3 scales to map your data to visual elements.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='02-04-binding-data' title="Binding Data to Elements">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='03-02-using-scales' title="Using D3 Scales">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
