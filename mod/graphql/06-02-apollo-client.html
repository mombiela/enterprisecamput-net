<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apollo Client</title>

    <link rel="alternate" href="https://campusempresa.com/mod/graphql/06-02-apollo-client" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/graphql/06-02-apollo-client" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/graphql/06-02-apollo-client" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/graphql/06-02-apollo-client" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/graphql/06-02-apollo-client" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='06-01-graphiql-playground' title="GraphiQL and Playground">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Apollo Client</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='06-03-relay' title="Relay">Next &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Apollo Client is a comprehensive state management library for JavaScript that enables you to manage both local and remote data with GraphQL. It helps you fetch, cache, and modify application data, all while automatically updating your UI.</p>
</div><h2>Key Features of Apollo Client:</h2>
<div class='content'><ul>
<li><strong>Declarative Data Fetching</strong>: Write queries directly within your components.</li>
<li><strong>Normalized Caching</strong>: Efficiently cache and manage data.</li>
<li><strong>State Management</strong>: Manage local and remote data seamlessly.</li>
<li><strong>Developer Tools</strong>: Powerful tools for debugging and optimizing your GraphQL queries.</li>
</ul>
</div><h1>Setting Up Apollo Client</h1>
<div class='content'></div><h2>Step 1: Install Apollo Client</h2>
<div class='content'><p>To get started, you need to install the necessary packages. You can do this using npm or yarn.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgQGFwb2xsby9jbGllbnQgZ3JhcGhxbA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install @apollo/client graphql</pre></div><div class='content'><p>or</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("eWFybiBhZGQgQGFwb2xsby9jbGllbnQgZ3JhcGhxbA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>yarn add @apollo/client graphql</pre></div><div class='content'></div><h2>Step 2: Initialize Apollo Client</h2>
<div class='content'><p>Create an instance of Apollo Client and provide it with the URL of your GraphQL server.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQXBvbGxvQ2xpZW50LCBJbk1lbW9yeUNhY2hlIH0gZnJvbSAnQGFwb2xsby9jbGllbnQnOwoKY29uc3QgY2xpZW50ID0gbmV3IEFwb2xsb0NsaWVudCh7CiAgdXJpOiAnaHR0cHM6Ly95b3VyLWdyYXBocWwtZW5kcG9pbnQuY29tL2dyYXBocWwnLAogIGNhY2hlOiBuZXcgSW5NZW1vcnlDYWNoZSgpCn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { ApolloClient, InMemoryCache } from '@apollo/client';

const client = new ApolloClient({
  uri: 'https://your-graphql-endpoint.com/graphql',
  cache: new InMemoryCache()
});</pre></div><div class='content'></div><h2>Step 3: Integrate Apollo Client with React</h2>
<div class='content'><p>To use Apollo Client with React, you need to wrap your application with the <code>ApolloProvider</code> component.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7CmltcG9ydCB7IEFwb2xsb1Byb3ZpZGVyIH0gZnJvbSAnQGFwb2xsby9jbGllbnQnOwppbXBvcnQgQXBwIGZyb20gJy4vQXBwJzsKaW1wb3J0IGNsaWVudCBmcm9tICcuL2Fwb2xsb0NsaWVudCc7IC8vIEltcG9ydCB0aGUgY2xpZW50IGluc3RhbmNlCgpSZWFjdERPTS5yZW5kZXIoCiAgPEFwb2xsb1Byb3ZpZGVyIGNsaWVudD17Y2xpZW50fT4KICAgIDxBcHAgLz4KICA8L0Fwb2xsb1Byb3ZpZGVyPiwKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm9vdCcpCik7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React from 'react';
import ReactDOM from 'react-dom';
import { ApolloProvider } from '@apollo/client';
import App from './App';
import client from './apolloClient'; // Import the client instance

ReactDOM.render(
  &lt;ApolloProvider client={client}&gt;
    &lt;App /&gt;
  &lt;/ApolloProvider&gt;,
  document.getElementById('root')
);</pre></div><div class='content'></div><h1>Fetching Data with Queries</h1>
<div class='content'></div><h2>Writing a Query</h2>
<div class='content'><p>Define your GraphQL query using the <code>gql</code> template literal.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgZ3FsIH0gZnJvbSAnQGFwb2xsby9jbGllbnQnOwoKY29uc3QgR0VUX1VTRVJTID0gZ3FsYAogIHF1ZXJ5IEdldFVzZXJzIHsKICAgIHVzZXJzIHsKICAgICAgaWQKICAgICAgbmFtZQogICAgICBlbWFpbAogICAgfQogIH0KYDs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { gql } from '@apollo/client';

const GET_USERS = gql`
  query GetUsers {
    users {
      id
      name
      email
    }
  }
`;</pre></div><div class='content'></div><h2>Executing a Query</h2>
<div class='content'><p>Use the <code>useQuery</code> hook to execute the query within a React component.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgdXNlUXVlcnkgfSBmcm9tICdAYXBvbGxvL2NsaWVudCc7CmltcG9ydCB7IEdFVF9VU0VSUyB9IGZyb20gJy4vcXVlcmllcyc7Cgpjb25zdCBVc2VycyA9ICgpID0+IHsKICBjb25zdCB7IGxvYWRpbmcsIGVycm9yLCBkYXRhIH0gPSB1c2VRdWVyeShHRVRfVVNFUlMpOwoKICBpZiAobG9hZGluZykgcmV0dXJuIDxwPkxvYWRpbmcuLi48L3A+OwogIGlmIChlcnJvcikgcmV0dXJuIDxwPkVycm9yOiB7ZXJyb3IubWVzc2FnZX08L3A+OwoKICByZXR1cm4gKAogICAgPHVsPgogICAgICB7ZGF0YS51c2Vycy5tYXAodXNlciA9PiAoCiAgICAgICAgPGxpIGtleT17dXNlci5pZH0+CiAgICAgICAgICB7dXNlci5uYW1lfSAtIHt1c2VyLmVtYWlsfQogICAgICAgIDwvbGk+CiAgICAgICkpfQogICAgPC91bD4KICApOwp9OwoKZXhwb3J0IGRlZmF1bHQgVXNlcnM7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React from 'react';
import { useQuery } from '@apollo/client';
import { GET_USERS } from './queries';

const Users = () =&gt; {
  const { loading, error, data } = useQuery(GET_USERS);

  if (loading) return &lt;p&gt;Loading...&lt;/p&gt;;
  if (error) return &lt;p&gt;Error: {error.message}&lt;/p&gt;;

  return (
    &lt;ul&gt;
      {data.users.map(user =&gt; (
        &lt;li key={user.id}&gt;
          {user.name} - {user.email}
        &lt;/li&gt;
      ))}
    &lt;/ul&gt;
  );
};

export default Users;</pre></div><div class='content'></div><h1>Modifying Data with Mutations</h1>
<div class='content'></div><h2>Writing a Mutation</h2>
<div class='content'><p>Define your GraphQL mutation using the <code>gql</code> template literal.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgZ3FsIH0gZnJvbSAnQGFwb2xsby9jbGllbnQnOwoKY29uc3QgQUREX1VTRVIgPSBncWxgCiAgbXV0YXRpb24gQWRkVXNlcigkbmFtZTogU3RyaW5nISwgJGVtYWlsOiBTdHJpbmchKSB7CiAgICBhZGRVc2VyKG5hbWU6ICRuYW1lLCBlbWFpbDogJGVtYWlsKSB7CiAgICAgIGlkCiAgICAgIG5hbWUKICAgICAgZW1haWwKICAgIH0KICB9CmA7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { gql } from '@apollo/client';

const ADD_USER = gql`
  mutation AddUser($name: String!, $email: String!) {
    addUser(name: $name, email: $email) {
      id
      name
      email
    }
  }
`;</pre></div><div class='content'></div><h2>Executing a Mutation</h2>
<div class='content'><p>Use the <code>useMutation</code> hook to execute the mutation within a React component.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyB1c2VNdXRhdGlvbiB9IGZyb20gJ0BhcG9sbG8vY2xpZW50JzsKaW1wb3J0IHsgQUREX1VTRVIgfSBmcm9tICcuL211dGF0aW9ucyc7Cgpjb25zdCBBZGRVc2VyID0gKCkgPT4gewogIGNvbnN0IFtuYW1lLCBzZXROYW1lXSA9IHVzZVN0YXRlKCcnKTsKICBjb25zdCBbZW1haWwsIHNldEVtYWlsXSA9IHVzZVN0YXRlKCcnKTsKICBjb25zdCBbYWRkVXNlciwgeyBkYXRhLCBsb2FkaW5nLCBlcnJvciB9XSA9IHVzZU11dGF0aW9uKEFERF9VU0VSKTsKCiAgY29uc3QgaGFuZGxlU3VibWl0ID0gKGUpID0+IHsKICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgIGFkZFVzZXIoeyB2YXJpYWJsZXM6IHsgbmFtZSwgZW1haWwgfSB9KTsKICB9OwoKICBpZiAobG9hZGluZykgcmV0dXJuIDxwPkxvYWRpbmcuLi48L3A+OwogIGlmIChlcnJvcikgcmV0dXJuIDxwPkVycm9yOiB7ZXJyb3IubWVzc2FnZX08L3A+OwoKICByZXR1cm4gKAogICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZVN1Ym1pdH0+CiAgICAgIDxpbnB1dAogICAgICAgIHR5cGU9InRleHQiCiAgICAgICAgcGxhY2Vob2xkZXI9Ik5hbWUiCiAgICAgICAgdmFsdWU9e25hbWV9CiAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXROYW1lKGUudGFyZ2V0LnZhbHVlKX0KICAgICAgLz4KICAgICAgPGlucHV0CiAgICAgICAgdHlwZT0iZW1haWwiCiAgICAgICAgcGxhY2Vob2xkZXI9IkVtYWlsIgogICAgICAgIHZhbHVlPXtlbWFpbH0KICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldEVtYWlsKGUudGFyZ2V0LnZhbHVlKX0KICAgICAgLz4KICAgICAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiPkFkZCBVc2VyPC9idXR0b24+CiAgICAgIHtkYXRhICYmIDxwPlVzZXIgYWRkZWQ6IHtkYXRhLmFkZFVzZXIubmFtZX08L3A+fQogICAgPC9mb3JtPgogICk7Cn07CgpleHBvcnQgZGVmYXVsdCBBZGRVc2VyOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React, { useState } from 'react';
import { useMutation } from '@apollo/client';
import { ADD_USER } from './mutations';

const AddUser = () =&gt; {
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');
  const [addUser, { data, loading, error }] = useMutation(ADD_USER);

  const handleSubmit = (e) =&gt; {
    e.preventDefault();
    addUser({ variables: { name, email } });
  };

  if (loading) return &lt;p&gt;Loading...&lt;/p&gt;;
  if (error) return &lt;p&gt;Error: {error.message}&lt;/p&gt;;

  return (
    &lt;form onSubmit={handleSubmit}&gt;
      &lt;input
        type=&quot;text&quot;
        placeholder=&quot;Name&quot;
        value={name}
        onChange={(e) =&gt; setName(e.target.value)}
      /&gt;
      &lt;input
        type=&quot;email&quot;
        placeholder=&quot;Email&quot;
        value={email}
        onChange={(e) =&gt; setEmail(e.target.value)}
      /&gt;
      &lt;button type=&quot;submit&quot;&gt;Add User&lt;/button&gt;
      {data &amp;&amp; &lt;p&gt;User added: {data.addUser.name}&lt;/p&gt;}
    &lt;/form&gt;
  );
};

export default AddUser;</pre></div><div class='content'></div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise: Fetch and Display a List of Posts</h2>
<div class='content'><ol>
<li><strong>Define the Query</strong>: Create a new file <code>queries.js</code> and define a query to fetch posts.</li>
<li><strong>Create the Component</strong>: Create a new component <code>Posts.js</code> to fetch and display the list of posts.</li>
<li><strong>Integrate the Component</strong>: Use the <code>Posts</code> component in your main application.</li>
</ol>
<h4>Solution</h4>
<p><strong>queries.js</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgZ3FsIH0gZnJvbSAnQGFwb2xsby9jbGllbnQnOwoKZXhwb3J0IGNvbnN0IEdFVF9QT1NUUyA9IGdxbGAKICBxdWVyeSBHZXRQb3N0cyB7CiAgICBwb3N0cyB7CiAgICAgIGlkCiAgICAgIHRpdGxlCiAgICAgIGNvbnRlbnQKICAgIH0KICB9CmA7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { gql } from '@apollo/client';

export const GET_POSTS = gql`
  query GetPosts {
    posts {
      id
      title
      content
    }
  }
`;</pre></div><div class='content'><p><strong>Posts.js</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgdXNlUXVlcnkgfSBmcm9tICdAYXBvbGxvL2NsaWVudCc7CmltcG9ydCB7IEdFVF9QT1NUUyB9IGZyb20gJy4vcXVlcmllcyc7Cgpjb25zdCBQb3N0cyA9ICgpID0+IHsKICBjb25zdCB7IGxvYWRpbmcsIGVycm9yLCBkYXRhIH0gPSB1c2VRdWVyeShHRVRfUE9TVFMpOwoKICBpZiAobG9hZGluZykgcmV0dXJuIDxwPkxvYWRpbmcuLi48L3A+OwogIGlmIChlcnJvcikgcmV0dXJuIDxwPkVycm9yOiB7ZXJyb3IubWVzc2FnZX08L3A+OwoKICByZXR1cm4gKAogICAgPHVsPgogICAgICB7ZGF0YS5wb3N0cy5tYXAocG9zdCA9PiAoCiAgICAgICAgPGxpIGtleT17cG9zdC5pZH0+CiAgICAgICAgICA8aDI+e3Bvc3QudGl0bGV9PC9oMj4KICAgICAgICAgIDxwPntwb3N0LmNvbnRlbnR9PC9wPgogICAgICAgIDwvbGk+CiAgICAgICkpfQogICAgPC91bD4KICApOwp9OwoKZXhwb3J0IGRlZmF1bHQgUG9zdHM7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React from 'react';
import { useQuery } from '@apollo/client';
import { GET_POSTS } from './queries';

const Posts = () =&gt; {
  const { loading, error, data } = useQuery(GET_POSTS);

  if (loading) return &lt;p&gt;Loading...&lt;/p&gt;;
  if (error) return &lt;p&gt;Error: {error.message}&lt;/p&gt;;

  return (
    &lt;ul&gt;
      {data.posts.map(post =&gt; (
        &lt;li key={post.id}&gt;
          &lt;h2&gt;{post.title}&lt;/h2&gt;
          &lt;p&gt;{post.content}&lt;/p&gt;
        &lt;/li&gt;
      ))}
    &lt;/ul&gt;
  );
};

export default Posts;</pre></div><div class='content'><p><strong>App.js</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IFBvc3RzIGZyb20gJy4vUG9zdHMnOwoKY29uc3QgQXBwID0gKCkgPT4gewogIHJldHVybiAoCiAgICA8ZGl2PgogICAgICA8aDE+UG9zdHM8L2gxPgogICAgICA8UG9zdHMgLz4KICAgIDwvZGl2PgogICk7Cn07CgpleHBvcnQgZGVmYXVsdCBBcHA7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React from 'react';
import Posts from './Posts';

const App = () =&gt; {
  return (
    &lt;div&gt;
      &lt;h1&gt;Posts&lt;/h1&gt;
      &lt;Posts /&gt;
    &lt;/div&gt;
  );
};

export default App;</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>In this section, you learned how to set up Apollo Client, fetch data using queries, and modify data using mutations. You also practiced these concepts by creating a component to fetch and display a list of posts. In the next module, we will explore more advanced features of Apollo Client, such as caching strategies and state management.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='06-01-graphiql-playground' title="GraphiQL and Playground">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='06-03-relay' title="Relay">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
