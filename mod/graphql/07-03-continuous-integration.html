<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Continuous Integration</title>

    <link rel="alternate" href="https://campusempresa.com/mod/graphql/07-03-continuous-integration" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/graphql/07-03-continuous-integration" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/graphql/07-03-continuous-integration" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/graphql/07-03-continuous-integration" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/graphql/07-03-continuous-integration" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='07-02-integration-testing' title="Integration Testing">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Continuous Integration</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-04-deploying-graphql-servers' title="Deploying GraphQL Servers">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Continuous Integration (CI) is a software development practice where developers frequently integrate their code changes into a shared repository, which is then automatically tested and built. This practice helps to detect errors quickly, improve software quality, and reduce the time it takes to validate and release new software updates.</p>
</div><h1>Key Concepts of Continuous Integration</h1>
<div class='content'><ol>
<li><strong>Frequent Commits</strong>: Developers commit their code changes frequently to the shared repository.</li>
<li><strong>Automated Builds</strong>: Each commit triggers an automated build process to compile the code and run tests.</li>
<li><strong>Automated Testing</strong>: Automated tests are run to ensure that the new code does not break existing functionality.</li>
<li><strong>Feedback</strong>: Immediate feedback is provided to developers if the build or tests fail.</li>
<li><strong>Version Control</strong>: A version control system (e.g., Git) is used to manage code changes.</li>
</ol>
</div><h1>Setting Up Continuous Integration for a GraphQL Server</h1>
<div class='content'></div><h2>Step 1: Choose a CI Tool</h2>
<div class='content'><p>There are several CI tools available, such as:</p>
<ul>
<li><strong>Jenkins</strong></li>
<li><strong>Travis CI</strong></li>
<li><strong>CircleCI</strong></li>
<li><strong>GitHub Actions</strong></li>
</ul>
<p>For this example, we will use GitHub Actions.</p>
</div><h2>Step 2: Create a GitHub Repository</h2>
<div class='content'><ol>
<li>Create a new repository on GitHub.</li>
<li>Clone the repository to your local machine.</li>
</ol>
</div><h2>Step 3: Add a GitHub Actions Workflow</h2>
<div class='content'><ol>
<li>In your repository, create a directory named <code>.github/workflows</code>.</li>
<li>Inside the <code>workflows</code> directory, create a file named <code>ci.yml</code>.</li>
</ol>
</div><h2>Step 4: Define the CI Workflow</h2>
<div class='content'><p>Add the following content to the <code>ci.yml</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmFtZTogQ0kKCm9uOgogIHB1c2g6CiAgICBicmFuY2hlczoKICAgICAgLSBtYWluCiAgcHVsbF9yZXF1ZXN0OgogICAgYnJhbmNoZXM6CiAgICAgIC0gbWFpbgoKam9iczoKICBidWlsZDoKICAgIHJ1bnMtb246IHVidW50dS1sYXRlc3QKCiAgICBzdGVwczoKICAgIC0gbmFtZTogQ2hlY2tvdXQgY29kZQogICAgICB1c2VzOiBhY3Rpb25zL2NoZWNrb3V0QHYyCgogICAgLSBuYW1lOiBTZXQgdXAgTm9kZS5qcwogICAgICB1c2VzOiBhY3Rpb25zL3NldHVwLW5vZGVAdjIKICAgICAgd2l0aDoKICAgICAgICBub2RlLXZlcnNpb246ICcxNCcKCiAgICAtIG5hbWU6IEluc3RhbGwgZGVwZW5kZW5jaWVzCiAgICAgIHJ1bjogbnBtIGluc3RhbGwKCiAgICAtIG5hbWU6IFJ1biB0ZXN0cwogICAgICBydW46IG5wbSB0ZXN0"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>name: CI

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '14'

    - name: Install dependencies
      run: npm install

    - name: Run tests
      run: npm test</pre></div><div class='content'></div><h2>Explanation of the Workflow</h2>
<div class='content'><ul>
<li><strong>name</strong>: The name of the workflow.</li>
<li><strong>on</strong>: Specifies the events that trigger the workflow. In this case, it runs on pushes and pull requests to the <code>main</code> branch.</li>
<li><strong>jobs</strong>: Defines the jobs that will run as part of the workflow.
<ul>
<li><strong>build</strong>: The name of the job.</li>
<li><strong>runs-on</strong>: Specifies the environment for the job. Here, it uses the latest Ubuntu environment.</li>
<li><strong>steps</strong>: The steps to be executed in the job.
<ul>
<li><strong>Checkout code</strong>: Uses the <code>actions/checkout</code> action to check out the repository code.</li>
<li><strong>Set up Node.js</strong>: Uses the <code>actions/setup-node</code> action to set up Node.js version 14.</li>
<li><strong>Install dependencies</strong>: Runs <code>npm install</code> to install the project dependencies.</li>
<li><strong>Run tests</strong>: Runs <code>npm test</code> to execute the tests.</li>
</ul>
</li>
</ul>
</li>
</ul>
</div><h2>Step 5: Add Tests to Your GraphQL Server</h2>
<div class='content'><p>Ensure that you have tests in place for your GraphQL server. Here is an example of a simple test using Jest:</p>
<ol>
<li>
<p>Install Jest:</p>
<pre><code class="language-bash">npm install --save-dev jest
</code></pre>
</li>
<li>
<p>Create a test file <code>server.test.js</code>:</p>
<pre><code class="language-javascript">const request = require('supertest');
const { createServer } = require('../server'); // Adjust the path to your server file

describe('GraphQL Server', () =&gt; {
  let server;

  beforeAll(() =&gt; {
    server = createServer();
  });

  afterAll(() =&gt; {
    server.close();
  });

  it('should return a valid response for a query', async () =&gt; {
    const response = await request(server)
      .post('/graphql')
      .send({
        query: '{ hello }',
      });

    expect(response.status).toBe(200);
    expect(response.body.data.hello).toBe('Hello world!');
  });
});
</code></pre>
</li>
<li>
<p>Update your <code>package.json</code> to include the test script:</p>
<pre><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;jest&quot;
  }
}
</code></pre>
</li>
</ol>
</div><h2>Step 6: Push Changes to GitHub</h2>
<div class='content'><ol>
<li>
<p>Commit your changes:</p>
<pre><code class="language-bash">git add .
git commit -m &quot;Add CI workflow&quot;
</code></pre>
</li>
<li>
<p>Push your changes to GitHub:</p>
<pre><code class="language-bash">git push origin main
</code></pre>
</li>
</ol>
</div><h2>Step 7: Verify the CI Workflow</h2>
<div class='content'><ol>
<li>Go to your GitHub repository.</li>
<li>Click on the &quot;Actions&quot; tab.</li>
<li>You should see the CI workflow running. Once it completes, you will see the results of the build and tests.</li>
</ol>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise: Set Up Continuous Integration for Your GraphQL Server</h2>
<div class='content'><ol>
<li>Create a new GitHub repository and clone it to your local machine.</li>
<li>Set up a basic GraphQL server with a simple query.</li>
<li>Add a test for the query using Jest.</li>
<li>Create a GitHub Actions workflow to automate the build and test process.</li>
<li>Push your changes to GitHub and verify that the CI workflow runs successfully.</li>
</ol>
</div><h2>Solution</h2>
<div class='content'><p>Follow the steps outlined in the &quot;Setting Up Continuous Integration for a GraphQL Server&quot; section to complete the exercise.</p>
</div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Incorrect Workflow Syntax</strong>: Ensure that your <code>ci.yml</code> file is correctly formatted. YAML is sensitive to indentation.</li>
<li><strong>Missing Dependencies</strong>: Make sure all necessary dependencies are listed in your <code>package.json</code> file.</li>
<li><strong>Failing Tests</strong>: If your tests fail, check the error messages and ensure that your GraphQL server is correctly set up and running.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, you learned how to set up Continuous Integration for a GraphQL server using GitHub Actions. CI helps to automate the build and test process, providing immediate feedback to developers and ensuring that code changes do not break existing functionality. By integrating CI into your development workflow, you can improve the quality and reliability of your GraphQL server.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='07-02-integration-testing' title="Integration Testing">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-04-deploying-graphql-servers' title="Deploying GraphQL Servers">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
