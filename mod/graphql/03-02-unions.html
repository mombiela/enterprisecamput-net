<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unions</title>

    <link rel="alternate" href="https://campusempresa.com/mod/graphql/03-02-unions" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/graphql/03-02-unions" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/graphql/03-02-unions" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=2" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/graphql/03-02-unions" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/graphql/03-02-unions" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Programming Languages</a>
				 					<a href="/categ/frameworks">Frameworks and Libraries</a>
				 					<a href="/categ/tech-tools">Technical Tools</a>
				 					<a href="/categ/foundations">Theoretical Foundations</a>
				 					<a href="/categ/soft-skills">Social Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-01-interfaces' title="Interfaces">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Unions</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='03-03-enums' title="Enums">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introduction to Unions</p>
</h1>
<div class='content'><p>In GraphQL, unions are a powerful feature that allows you to define a type that can represent one of several different object types. This is particularly useful when you have a field that can return multiple types of objects, and you want to handle them in a type-safe manner.</p>
</div><h2><p>Key Concepts</p>
</h2>
<div class='content'><ul>
<li><strong>Union Type</strong>: A union type is a special kind of type that can represent one of several object types.</li>
<li><strong>Type Safety</strong>: Unions help maintain type safety by ensuring that the field returns one of the specified types.</li>
<li><strong>Type Resolution</strong>: When querying a union type, the GraphQL server must resolve which type is being returned.</li>
</ul>
</div><h1><p>Defining Unions</p>
</h1>
<div class='content'><p>To define a union in GraphQL, you use the <code>union</code> keyword followed by the name of the union and the types it can represent.</p>
</div><h2><p>Example</p>
</h2>
<div class='content'><p>Let's consider a scenario where we have a <code>SearchResult</code> union that can be either a <code>Book</code> or an <code>Author</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBEZWZpbmUgdGhlIEJvb2sgdHlwZQp0eXBlIEJvb2sgewogIHRpdGxlOiBTdHJpbmchCiAgYXV0aG9yOiBBdXRob3IhCn0KCiMgRGVmaW5lIHRoZSBBdXRob3IgdHlwZQp0eXBlIEF1dGhvciB7CiAgbmFtZTogU3RyaW5nIQogIGJvb2tzOiBbQm9vayFdIQp9CgojIERlZmluZSB0aGUgU2VhcmNoUmVzdWx0IHVuaW9uCnVuaW9uIFNlYXJjaFJlc3VsdCA9IEJvb2sgfCBBdXRob3IKCiMgRGVmaW5lIGEgcXVlcnkgdGhhdCByZXR1cm5zIGEgU2VhcmNoUmVzdWx0CnR5cGUgUXVlcnkgewogIHNlYXJjaChxdWVyeTogU3RyaW5nISk6IFNlYXJjaFJlc3VsdAp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Define the Book type
type Book {
  title: String!
  author: Author!
}

# Define the Author type
type Author {
  name: String!
  books: [Book!]!
}

# Define the SearchResult union
union SearchResult = Book | Author

# Define a query that returns a SearchResult
type Query {
  search(query: String!): SearchResult
}</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>The <code>SearchResult</code> union can be either a <code>Book</code> or an <code>Author</code>.</li>
<li>The <code>search</code> query returns a <code>SearchResult</code>, which means it can return either a <code>Book</code> or an <code>Author</code>.</li>
</ul>
</div><h1><p>Querying Unions</p>
</h1>
<div class='content'><p>When querying a union type, you need to use inline fragments to specify the fields you want to retrieve for each possible type.</p>
</div><h2><p>Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cXVlcnkgewogIHNlYXJjaChxdWVyeTogIkdyYXBoUUwiKSB7CiAgICAuLi4gb24gQm9vayB7CiAgICAgIHRpdGxlCiAgICAgIGF1dGhvciB7CiAgICAgICAgbmFtZQogICAgICB9CiAgICB9CiAgICAuLi4gb24gQXV0aG9yIHsKICAgICAgbmFtZQogICAgICBib29rcyB7CiAgICAgICAgdGl0bGUKICAgICAgfQogICAgfQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>query {
  search(query: &quot;GraphQL&quot;) {
    ... on Book {
      title
      author {
        name
      }
    }
    ... on Author {
      name
      books {
        title
      }
    }
  }
}</pre></div><div class='content'><p>In this query:</p>
<ul>
<li>We use inline fragments (<code>... on Book</code> and <code>... on Author</code>) to specify the fields we want to retrieve for each type.</li>
<li>This ensures that we only request fields that are valid for the returned type.</li>
</ul>
</div><h1><p>Implementing Resolvers for Unions</p>
</h1>
<div class='content'><p>When implementing resolvers for union types, you need to provide a type resolver function that determines which type is being returned.</p>
</div><h2><p>Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgcmVzb2x2ZXJzID0gewogIFF1ZXJ5OiB7CiAgICBzZWFyY2g6IChwYXJlbnQsIGFyZ3MsIGNvbnRleHQsIGluZm8pID0+IHsKICAgICAgLy8gRXhhbXBsZSBzZWFyY2ggbG9naWMKICAgICAgaWYgKGFyZ3MucXVlcnkgPT09ICJHcmFwaFFMIikgewogICAgICAgIHJldHVybiB7IHRpdGxlOiAiTGVhcm5pbmcgR3JhcGhRTCIsIGF1dGhvcjogeyBuYW1lOiAiRXZlIFBvcmNlbGxvIiB9IH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHsgbmFtZTogIkV2ZSBQb3JjZWxsbyIsIGJvb2tzOiBbeyB0aXRsZTogIkxlYXJuaW5nIEdyYXBoUUwiIH1dIH07CiAgICAgIH0KICAgIH0sCiAgfSwKICBTZWFyY2hSZXN1bHQ6IHsKICAgIF9fcmVzb2x2ZVR5cGUob2JqLCBjb250ZXh0LCBpbmZvKSB7CiAgICAgIGlmIChvYmoudGl0bGUpIHsKICAgICAgICByZXR1cm4gJ0Jvb2snOwogICAgICB9CiAgICAgIGlmIChvYmoubmFtZSkgewogICAgICAgIHJldHVybiAnQXV0aG9yJzsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCiAgfSwKfTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const resolvers = {
  Query: {
    search: (parent, args, context, info) =&gt; {
      // Example search logic
      if (args.query === &quot;GraphQL&quot;) {
        return { title: &quot;Learning GraphQL&quot;, author: { name: &quot;Eve Porcello&quot; } };
      } else {
        return { name: &quot;Eve Porcello&quot;, books: [{ title: &quot;Learning GraphQL&quot; }] };
      }
    },
  },
  SearchResult: {
    __resolveType(obj, context, info) {
      if (obj.title) {
        return 'Book';
      }
      if (obj.name) {
        return 'Author';
      }
      return null;
    },
  },
};</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>The <code>search</code> resolver returns either a <code>Book</code> or an <code>Author</code> based on the query.</li>
<li>The <code>__resolveType</code> function determines the type of the returned object by checking its properties.</li>
</ul>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise</p>
</h2>
<div class='content'><ol>
<li>Define a union type <code>Media</code> that can be either a <code>Movie</code> or a <code>TVShow</code>.</li>
<li>Create a query <code>mediaSearch</code> that returns a <code>Media</code>.</li>
<li>Implement the resolver for <code>mediaSearch</code> and the type resolver for <code>Media</code>.</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBEZWZpbmUgdGhlIE1vdmllIHR5cGUKdHlwZSBNb3ZpZSB7CiAgdGl0bGU6IFN0cmluZyEKICBkaXJlY3RvcjogU3RyaW5nIQp9CgojIERlZmluZSB0aGUgVFZTaG93IHR5cGUKdHlwZSBUVlNob3cgewogIHRpdGxlOiBTdHJpbmchCiAgc2Vhc29uczogSW50IQp9CgojIERlZmluZSB0aGUgTWVkaWEgdW5pb24KdW5pb24gTWVkaWEgPSBNb3ZpZSB8IFRWU2hvdwoKIyBEZWZpbmUgYSBxdWVyeSB0aGF0IHJldHVybnMgYSBNZWRpYQp0eXBlIFF1ZXJ5IHsKICBtZWRpYVNlYXJjaChxdWVyeTogU3RyaW5nISk6IE1lZGlhCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Define the Movie type
type Movie {
  title: String!
  director: String!
}

# Define the TVShow type
type TVShow {
  title: String!
  seasons: Int!
}

# Define the Media union
union Media = Movie | TVShow

# Define a query that returns a Media
type Query {
  mediaSearch(query: String!): Media
}</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgcmVzb2x2ZXJzID0gewogIFF1ZXJ5OiB7CiAgICBtZWRpYVNlYXJjaDogKHBhcmVudCwgYXJncywgY29udGV4dCwgaW5mbykgPT4gewogICAgICAvLyBFeGFtcGxlIHNlYXJjaCBsb2dpYwogICAgICBpZiAoYXJncy5xdWVyeSA9PT0gIkluY2VwdGlvbiIpIHsKICAgICAgICByZXR1cm4geyB0aXRsZTogIkluY2VwdGlvbiIsIGRpcmVjdG9yOiAiQ2hyaXN0b3BoZXIgTm9sYW4iIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHsgdGl0bGU6ICJCcmVha2luZyBCYWQiLCBzZWFzb25zOiA1IH07CiAgICAgIH0KICAgIH0sCiAgfSwKICBNZWRpYTogewogICAgX19yZXNvbHZlVHlwZShvYmosIGNvbnRleHQsIGluZm8pIHsKICAgICAgaWYgKG9iai5kaXJlY3RvcikgewogICAgICAgIHJldHVybiAnTW92aWUnOwogICAgICB9CiAgICAgIGlmIChvYmouc2Vhc29ucykgewogICAgICAgIHJldHVybiAnVFZTaG93JzsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCiAgfSwKfTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const resolvers = {
  Query: {
    mediaSearch: (parent, args, context, info) =&gt; {
      // Example search logic
      if (args.query === &quot;Inception&quot;) {
        return { title: &quot;Inception&quot;, director: &quot;Christopher Nolan&quot; };
      } else {
        return { title: &quot;Breaking Bad&quot;, seasons: 5 };
      }
    },
  },
  Media: {
    __resolveType(obj, context, info) {
      if (obj.director) {
        return 'Movie';
      }
      if (obj.seasons) {
        return 'TVShow';
      }
      return null;
    },
  },
};</pre></div><div class='content'></div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ul>
<li><strong>Missing Type Resolver</strong>: Always provide a type resolver function for unions to ensure the server can determine the correct type.</li>
<li><strong>Invalid Fields</strong>: When querying unions, ensure that you only request fields that are valid for the returned type.</li>
<li><strong>Clear Type Distinction</strong>: Make sure the types in a union are distinct enough to be easily resolved.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>Unions in GraphQL provide a flexible way to handle fields that can return multiple types. By defining unions and implementing type resolvers, you can maintain type safety and ensure your API is robust and easy to use. In the next section, we will explore another advanced schema design feature: Enums.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-01-interfaces' title="Interfaces">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='03-03-enums' title="Enums">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Advertising</h1>
<p>This space is reserved for advertising.</p>
<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Thank you for collaborating!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
