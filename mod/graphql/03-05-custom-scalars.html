<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Custom Scalars</title>

    <link rel="alternate" href="https://campusempresa.com/mod/graphql/03-05-custom-scalars" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/graphql/03-05-custom-scalars" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/graphql/03-05-custom-scalars" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/graphql/03-05-custom-scalars" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/graphql/03-05-custom-scalars" class="px-2">CA</a>
</span>
			<span class="d-none d-md-inline"><br><cite>All the knowledge within your reach</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
					 				<a href="/"><i class="bi bi-house-fill"></i> HOME</a>
											</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-04-input-types' title="Input Types">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Custom Scalars</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-01-connecting-to-database' title="Connecting to a Database">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore custom scalars in GraphQL. Scalars are the basic data types in GraphQL, such as <code>Int</code>, <code>Float</code>, <code>String</code>, <code>Boolean</code>, and <code>ID</code>. However, sometimes these built-in scalars are not sufficient for your application's needs. Custom scalars allow you to define your own data types with specific validation and parsing logic.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Definition</strong>: Custom scalars are user-defined data types that extend the basic scalar types provided by GraphQL.</li>
<li><strong>Use Cases</strong>: Common use cases include dates, email addresses, URLs, and other domain-specific data types.</li>
<li><strong>Implementation</strong>: Custom scalars require defining the scalar type in the schema and providing parsing and serialization logic in the resolvers.</li>
</ol>
</div><h1>Defining Custom Scalars</h1>
<div class='content'></div><h2>Step 1: Define the Scalar in the Schema</h2>
<div class='content'><p>First, you need to define the custom scalar type in your GraphQL schema.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzY2hlbWEuZ3JhcGhxbApzY2FsYXIgRGF0ZQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># schema.graphql
scalar Date</pre></div><div class='content'></div><h2>Step 2: Implement the Scalar in the Resolvers</h2>
<div class='content'><p>Next, you need to implement the custom scalar in your resolvers. This involves defining how the scalar should be parsed and serialized.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gcmVzb2x2ZXJzLmpzCmNvbnN0IHsgR3JhcGhRTFNjYWxhclR5cGUsIEtpbmQgfSA9IHJlcXVpcmUoJ2dyYXBocWwnKTsKY29uc3QgeyBHcmFwaFFMRXJyb3IgfSA9IHJlcXVpcmUoJ2dyYXBocWwvZXJyb3InKTsKCmNvbnN0IERhdGVTY2FsYXIgPSBuZXcgR3JhcGhRTFNjYWxhclR5cGUoewogIG5hbWU6ICdEYXRlJywKICBkZXNjcmlwdGlvbjogJ0N1c3RvbSBzY2FsYXIgdHlwZSBmb3IgZGF0ZXMnLAogIHNlcmlhbGl6ZSh2YWx1ZSkgewogICAgLy8gQ29udmVydCBvdXRnb2luZyBEYXRlIHRvIElTTyBzdHJpbmcgZm9yIEpTT04KICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIERhdGUgPyB2YWx1ZS50b0lTT1N0cmluZygpIDogbnVsbDsKICB9LAogIHBhcnNlVmFsdWUodmFsdWUpIHsKICAgIC8vIENvbnZlcnQgaW5jb21pbmcgSVNPIHN0cmluZyB0byBEYXRlCiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodmFsdWUpOwogICAgaWYgKGlzTmFOKGRhdGUuZ2V0VGltZSgpKSkgewogICAgICB0aHJvdyBuZXcgR3JhcGhRTEVycm9yKCdJbnZhbGlkIGRhdGUgZm9ybWF0Jyk7CiAgICB9CiAgICByZXR1cm4gZGF0ZTsKICB9LAogIHBhcnNlTGl0ZXJhbChhc3QpIHsKICAgIGlmIChhc3Qua2luZCA9PT0gS2luZC5TVFJJTkcpIHsKICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGFzdC52YWx1ZSk7CiAgICAgIGlmIChpc05hTihkYXRlLmdldFRpbWUoKSkpIHsKICAgICAgICB0aHJvdyBuZXcgR3JhcGhRTEVycm9yKCdJbnZhbGlkIGRhdGUgZm9ybWF0Jyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGRhdGU7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9LAp9KTsKCm1vZHVsZS5leHBvcnRzID0gewogIERhdGU6IERhdGVTY2FsYXIsCn07"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// resolvers.js
const { GraphQLScalarType, Kind } = require('graphql');
const { GraphQLError } = require('graphql/error');

const DateScalar = new GraphQLScalarType({
  name: 'Date',
  description: 'Custom scalar type for dates',
  serialize(value) {
    // Convert outgoing Date to ISO string for JSON
    return value instanceof Date ? value.toISOString() : null;
  },
  parseValue(value) {
    // Convert incoming ISO string to Date
    const date = new Date(value);
    if (isNaN(date.getTime())) {
      throw new GraphQLError('Invalid date format');
    }
    return date;
  },
  parseLiteral(ast) {
    if (ast.kind === Kind.STRING) {
      const date = new Date(ast.value);
      if (isNaN(date.getTime())) {
        throw new GraphQLError('Invalid date format');
      }
      return date;
    }
    return null;
  },
});

module.exports = {
  Date: DateScalar,
};</pre></div><div class='content'></div><h2>Step 3: Use the Custom Scalar in Your Schema</h2>
<div class='content'><p>Now you can use the custom scalar type in your schema definitions.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBzY2hlbWEuZ3JhcGhxbAp0eXBlIEV2ZW50IHsKICBpZDogSUQhCiAgbmFtZTogU3RyaW5nIQogIGRhdGU6IERhdGUhCn0KCnR5cGUgUXVlcnkgewogIGV2ZW50czogW0V2ZW50IV0hCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># schema.graphql
type Event {
  id: ID!
  name: String!
  date: Date!
}

type Query {
  events: [Event!]!
}</pre></div><div class='content'></div><h1>Practical Example</h1>
<div class='content'><p>Let's create a simple GraphQL server that uses the custom <code>Date</code> scalar.</p>
</div><h2>Setting Up the Server</h2>
<div class='content'><ol>
<li>
<p><strong>Install Dependencies</strong>:</p>
<pre><code class="language-bash">npm install express express-graphql graphql
</code></pre>
</li>
<li>
<p><strong>Create the Schema and Resolvers</strong>:</p>
<pre><code class="language-javascript">// schema.js
const { buildSchema } = require('graphql');
const { Date } = require('./resolvers');

const schema = buildSchema(`
  scalar Date

  type Event {
    id: ID!
    name: String!
    date: Date!
  }

  type Query {
    events: [Event!]!
  }
`);

const root = {
  Date,
  events: () =&gt; [
    { id: '1', name: 'GraphQL Meetup', date: new Date() },
  ],
};

module.exports = { schema, root };
</code></pre>
</li>
<li>
<p><strong>Create the Server</strong>:</p>
<pre><code class="language-javascript">// server.js
const express = require('express');
const { graphqlHTTP } = require('express-graphql');
const { schema, root } = require('./schema');

const app = express();

app.use('/graphql', graphqlHTTP({
  schema,
  rootValue: root,
  graphiql: true,
}));

app.listen(4000, () =&gt; {
  console.log('Running a GraphQL API server at http://localhost:4000/graphql');
});
</code></pre>
</li>
<li>
<p><strong>Run the Server</strong>:</p>
<pre><code class="language-bash">node server.js
</code></pre>
</li>
</ol>
</div><h2>Querying the Custom Scalar</h2>
<div class='content'><p>You can now query the custom <code>Date</code> scalar using GraphiQL or any other GraphQL client.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cXVlcnkgewogIGV2ZW50cyB7CiAgICBpZAogICAgbmFtZQogICAgZGF0ZQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>query {
  events {
    id
    name
    date
  }
}</pre></div><div class='content'></div><h1>Exercises</h1>
<div class='content'></div><h2>Exercise 1: Create a Custom Scalar for Email</h2>
<div class='content'><ol>
<li>
<p><strong>Define the Scalar</strong>:</p>
<pre><code class="language-graphql">scalar Email
</code></pre>
</li>
<li>
<p><strong>Implement the Scalar</strong>:</p>
<pre><code class="language-javascript">const EmailScalar = new GraphQLScalarType({
  name: 'Email',
  description: 'Custom scalar type for email addresses',
  serialize(value) {
    return value;
  },
  parseValue(value) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(value)) {
      throw new GraphQLError('Invalid email format');
    }
    return value;
  },
  parseLiteral(ast) {
    if (ast.kind === Kind.STRING) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(ast.value)) {
        throw new GraphQLError('Invalid email format');
      }
      return ast.value;
    }
    return null;
  },
});

module.exports = {
  Email: EmailScalar,
};
</code></pre>
</li>
<li>
<p><strong>Use the Scalar in the Schema</strong>:</p>
<pre><code class="language-graphql">type User {
  id: ID!
  email: Email!
}

type Query {
  users: [User!]!
}
</code></pre>
</li>
</ol>
</div><h2>Solution</h2>
<div class='content'><ol>
<li><strong>Query</strong>:
<pre><code class="language-graphql">query {
  users {
    id
    email
  }
}
</code></pre>
</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>Custom scalars in GraphQL allow you to extend the basic scalar types to fit your application's specific needs. By defining custom scalars, you can ensure that your data is validated and parsed correctly, providing a more robust and flexible API. In this section, we covered the basics of defining and implementing custom scalars, and provided practical examples and exercises to reinforce the concepts. In the next module, we will delve into more advanced schema design techniques.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='03-04-input-types' title="Input Types">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='04-01-connecting-to-database' title="Connecting to a Database">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Advertising</h1>
<p>This space is reserved for advertising.</p>
<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Thank you for collaborating!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			









		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
