<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Batching and Caching in GraphQL</title>

    <link rel="alternate" href="https://campusempresa.com/mod/graphql/batching-and-caching" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/graphql/batching-and-caching" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/graphql/batching-and-caching" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/graphql/batching-and-caching" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/graphql/batching-and-caching" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='schema-stitching'>&#x25C4;Schema Stitching</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Batching and Caching in GraphQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='pagination'>Pagination &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Batching and caching are essential techniques in GraphQL to optimize performance and reduce the load on your server. This section will cover the basics of these concepts, how to implement them, and best practices for using them effectively.</p>
</div><h1>Batching</h1>
<div class='content'></div><h2>What is Batching?</h2>
<div class='content'><p>Batching in GraphQL refers to the process of combining multiple requests into a single request to reduce the number of network calls. This is particularly useful when dealing with multiple fields or nested queries that could otherwise result in multiple round trips to the server.</p>
</div><h2>Why Use Batching?</h2>
<div class='content'><ul>
<li><strong>Performance Improvement</strong>: Reduces the number of network requests.</li>
<li><strong>Efficiency</strong>: Minimizes the overhead associated with multiple requests.</li>
<li><strong>Resource Optimization</strong>: Better utilization of server resources.</li>
</ul>
</div><h2>Example of Batching</h2>
<div class='content'><p>Consider a scenario where you need to fetch user details and their posts. Without batching, this might result in multiple requests:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cXVlcnkgewogIHVzZXIoaWQ6ICIxIikgewogICAgaWQKICAgIG5hbWUKICB9CiAgcG9zdHModXNlcklkOiAiMSIpIHsKICAgIGlkCiAgICB0aXRsZQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>query {
  user(id: &quot;1&quot;) {
    id
    name
  }
  posts(userId: &quot;1&quot;) {
    id
    title
  }
}</pre></div><div class='content'><p>With batching, these requests can be combined into a single request:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cXVlcnkgewogIHVzZXIoaWQ6ICIxIikgewogICAgaWQKICAgIG5hbWUKICAgIHBvc3RzIHsKICAgICAgaWQKICAgICAgdGl0bGUKICAgIH0KICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>query {
  user(id: &quot;1&quot;) {
    id
    name
    posts {
      id
      title
    }
  }
}</pre></div><div class='content'></div><h2>Implementing Batching with DataLoader</h2>
<div class='content'><p>DataLoader is a popular library for batching and caching in GraphQL.</p>
<h4>Installation</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgZGF0YWxvYWRlcg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install dataloader</pre></div><div class='content'><h4>Basic Usage</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgRGF0YUxvYWRlciA9IHJlcXVpcmUoJ2RhdGFsb2FkZXInKTsKCi8vIENyZWF0ZSBhIERhdGFMb2FkZXIgaW5zdGFuY2UKY29uc3QgdXNlckxvYWRlciA9IG5ldyBEYXRhTG9hZGVyKGFzeW5jIChrZXlzKSA9PiB7CiAgY29uc3QgdXNlcnMgPSBhd2FpdCBnZXRVc2Vyc0J5SWRzKGtleXMpOwogIHJldHVybiBrZXlzLm1hcChrZXkgPT4gdXNlcnMuZmluZCh1c2VyID0+IHVzZXIuaWQgPT09IGtleSkpOwp9KTsKCi8vIFVzZSB0aGUgRGF0YUxvYWRlciBpbiB5b3VyIHJlc29sdmVyCmNvbnN0IHJlc29sdmVycyA9IHsKICBRdWVyeTogewogICAgdXNlcjogKHBhcmVudCwgYXJncykgPT4gdXNlckxvYWRlci5sb2FkKGFyZ3MuaWQpLAogIH0sCn07"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const DataLoader = require('dataloader');

// Create a DataLoader instance
const userLoader = new DataLoader(async (keys) =&gt; {
  const users = await getUsersByIds(keys);
  return keys.map(key =&gt; users.find(user =&gt; user.id === key));
});

// Use the DataLoader in your resolver
const resolvers = {
  Query: {
    user: (parent, args) =&gt; userLoader.load(args.id),
  },
};</pre></div><div class='content'></div><h1>Caching</h1>
<div class='content'></div><h2>What is Caching?</h2>
<div class='content'><p>Caching involves storing the results of expensive operations so that subsequent requests can be served faster. In GraphQL, caching can be applied at various levels, including query results, individual fields, and even at the network level.</p>
</div><h2>Why Use Caching?</h2>
<div class='content'><ul>
<li><strong>Performance Boost</strong>: Reduces the time taken to fetch data.</li>
<li><strong>Reduced Load</strong>: Decreases the number of requests hitting your database or backend services.</li>
<li><strong>Cost Efficiency</strong>: Minimizes resource usage and operational costs.</li>
</ul>
</div><h2>Types of Caching</h2>
<div class='content'><ul>
<li><strong>In-Memory Caching</strong>: Stores data in memory for quick access.</li>
<li><strong>Persistent Caching</strong>: Stores data in a persistent storage like Redis or a database.</li>
<li><strong>HTTP Caching</strong>: Utilizes HTTP headers to cache responses at the network level.</li>
</ul>
</div><h2>Example of Caching with Apollo Client</h2>
<div class='content'><p>Apollo Client provides built-in support for caching query results.</p>
<h4>Installation</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgQGFwb2xsby9jbGllbnQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install @apollo/client</pre></div><div class='content'><h4>Basic Usage</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQXBvbGxvQ2xpZW50LCBJbk1lbW9yeUNhY2hlLCBncWwgfSBmcm9tICdAYXBvbGxvL2NsaWVudCc7CgovLyBDcmVhdGUgYW4gQXBvbGxvIENsaWVudCBpbnN0YW5jZSB3aXRoIGluLW1lbW9yeSBjYWNoZQpjb25zdCBjbGllbnQgPSBuZXcgQXBvbGxvQ2xpZW50KHsKICB1cmk6ICdodHRwczovL3lvdXItZ3JhcGhxbC1lbmRwb2ludC5jb20vZ3JhcGhxbCcsCiAgY2FjaGU6IG5ldyBJbk1lbW9yeUNhY2hlKCksCn0pOwoKLy8gUXVlcnkgd2l0aCBjYWNoaW5nCmNsaWVudC5xdWVyeSh7CiAgcXVlcnk6IGdxbGAKICAgIHF1ZXJ5IEdldFVzZXIoJGlkOiBJRCEpIHsKICAgICAgdXNlcihpZDogJGlkKSB7CiAgICAgICAgaWQKICAgICAgICBuYW1lCiAgICAgIH0KICAgIH0KICBgLAogIHZhcmlhYmxlczogeyBpZDogJzEnIH0sCn0pLnRoZW4ocmVzcG9uc2UgPT4gewogIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { ApolloClient, InMemoryCache, gql } from '@apollo/client';

// Create an Apollo Client instance with in-memory cache
const client = new ApolloClient({
  uri: 'https://your-graphql-endpoint.com/graphql',
  cache: new InMemoryCache(),
});

// Query with caching
client.query({
  query: gql`
    query GetUser($id: ID!) {
      user(id: $id) {
        id
        name
      }
    }
  `,
  variables: { id: '1' },
}).then(response =&gt; {
  console.log(response.data);
});</pre></div><div class='content'></div><h2>Best Practices for Caching</h2>
<div class='content'><ul>
<li><strong>Cache Invalidation</strong>: Ensure that your cache is invalidated when the underlying data changes.</li>
<li><strong>Granularity</strong>: Cache at the appropriate level of granularity to balance performance and freshness.</li>
<li><strong>TTL (Time to Live)</strong>: Set appropriate TTL values to ensure that stale data is not served.</li>
</ul>
</div><h1>Summary</h1>
<div class='content'><p>Batching and caching are powerful techniques to optimize the performance of your GraphQL server. Batching reduces the number of network requests by combining multiple queries, while caching stores the results of expensive operations to serve subsequent requests faster. By implementing these techniques, you can significantly improve the efficiency and responsiveness of your GraphQL applications.</p>
<ul>
<li><strong>Batching</strong>: Use libraries like DataLoader to batch requests efficiently.</li>
<li><strong>Caching</strong>: Utilize caching strategies to store and retrieve data quickly.</li>
</ul>
<p>Understanding and implementing these concepts will help you build scalable and performant GraphQL applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='schema-stitching'>&#x25C4;Schema Stitching</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Batching and Caching in GraphQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='pagination'>Pagination &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
