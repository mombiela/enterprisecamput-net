<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schema Stitching in GraphQL</title>

    <link rel="alternate" href="https://campusempresa.com/mod/graphql/schema-stitching" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/graphql/schema-stitching" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/graphql/schema-stitching" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/graphql/schema-stitching" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/graphql/schema-stitching" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='directives'>&#x25C4;Directives</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Schema Stitching in GraphQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='batching-and-caching'>Batching and Caching &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Schema stitching is an advanced GraphQL technique that allows you to combine multiple GraphQL schemas into a single unified schema. This is particularly useful for microservices architectures or when integrating third-party APIs.</p>
</div><h1>What is Schema Stitching?</h1>
<div class='content'><p>Schema stitching involves merging multiple GraphQL schemas into one. This can be done by combining the type definitions and resolvers from different schemas, allowing you to query data from multiple sources in a single request.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Schemas</strong>: Individual GraphQL schemas that define types, queries, mutations, and subscriptions.</li>
<li><strong>Resolvers</strong>: Functions that resolve the values for the fields in your schema.</li>
<li><strong>Stitching</strong>: The process of merging multiple schemas into one.</li>
</ul>
</div><h1>Why Use Schema Stitching?</h1>
<div class='content'><ul>
<li><strong>Modularity</strong>: Break down your GraphQL API into smaller, manageable pieces.</li>
<li><strong>Reusability</strong>: Reuse existing schemas and resolvers across different projects.</li>
<li><strong>Scalability</strong>: Scale your application by distributing the load across multiple services.</li>
<li><strong>Integration</strong>: Easily integrate third-party APIs into your GraphQL schema.</li>
</ul>
</div><h1>Basic Example</h1>
<div class='content'><p>Let's start with a simple example where we have two separate GraphQL schemas: one for users and one for posts.</p>
</div><h2>User Schema</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyB1c2VyU2NoZW1hLmdyYXBocWwKdHlwZSBVc2VyIHsKICBpZDogSUQhCiAgbmFtZTogU3RyaW5nIQp9Cgp0eXBlIFF1ZXJ5IHsKICB1c2VyKGlkOiBJRCEpOiBVc2VyCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># userSchema.graphql
type User {
  id: ID!
  name: String!
}

type Query {
  user(id: ID!): User
}</pre></div><div class='content'></div><h2>Post Schema</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBwb3N0U2NoZW1hLmdyYXBocWwKdHlwZSBQb3N0IHsKICBpZDogSUQhCiAgdGl0bGU6IFN0cmluZyEKICBhdXRob3JJZDogSUQhCn0KCnR5cGUgUXVlcnkgewogIHBvc3QoaWQ6IElEISk6IFBvc3QKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># postSchema.graphql
type Post {
  id: ID!
  title: String!
  authorId: ID!
}

type Query {
  post(id: ID!): Post
}</pre></div><div class='content'></div><h2>Merging Schemas</h2>
<div class='content'><p>To stitch these schemas together, we can use a library like <code>graphql-tools</code> in JavaScript.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gaW5kZXguanMKY29uc3QgeyBtYWtlRXhlY3V0YWJsZVNjaGVtYSwgbWVyZ2VTY2hlbWFzIH0gPSByZXF1aXJlKCdncmFwaHFsLXRvb2xzJyk7CmNvbnN0IHsgQXBvbGxvU2VydmVyIH0gPSByZXF1aXJlKCdhcG9sbG8tc2VydmVyJyk7CgovLyBEZWZpbmUgdHlwZSBkZWZpbml0aW9ucyBhbmQgcmVzb2x2ZXJzIGZvciB1c2VyIHNjaGVtYQpjb25zdCB1c2VyVHlwZURlZnMgPSBgCiAgdHlwZSBVc2VyIHsKICAgIGlkOiBJRCEKICAgIG5hbWU6IFN0cmluZyEKICB9CgogIHR5cGUgUXVlcnkgewogICAgdXNlcihpZDogSUQhKTogVXNlcgogIH0KYDsKCmNvbnN0IHVzZXJSZXNvbHZlcnMgPSB7CiAgUXVlcnk6IHsKICAgIHVzZXI6IChfLCB7IGlkIH0pID0+ICh7IGlkLCBuYW1lOiBgVXNlciAke2lkfWAgfSksCiAgfSwKfTsKCi8vIERlZmluZSB0eXBlIGRlZmluaXRpb25zIGFuZCByZXNvbHZlcnMgZm9yIHBvc3Qgc2NoZW1hCmNvbnN0IHBvc3RUeXBlRGVmcyA9IGAKICB0eXBlIFBvc3QgewogICAgaWQ6IElEIQogICAgdGl0bGU6IFN0cmluZyEKICAgIGF1dGhvcklkOiBJRCEKICB9CgogIHR5cGUgUXVlcnkgewogICAgcG9zdChpZDogSUQhKTogUG9zdAogIH0KYDsKCmNvbnN0IHBvc3RSZXNvbHZlcnMgPSB7CiAgUXVlcnk6IHsKICAgIHBvc3Q6IChfLCB7IGlkIH0pID0+ICh7IGlkLCB0aXRsZTogYFBvc3QgJHtpZH1gLCBhdXRob3JJZDogYFVzZXIgJHtpZH1gIH0pLAogIH0sCn07CgovLyBDcmVhdGUgZXhlY3V0YWJsZSBzY2hlbWFzCmNvbnN0IHVzZXJTY2hlbWEgPSBtYWtlRXhlY3V0YWJsZVNjaGVtYSh7IHR5cGVEZWZzOiB1c2VyVHlwZURlZnMsIHJlc29sdmVyczogdXNlclJlc29sdmVycyB9KTsKY29uc3QgcG9zdFNjaGVtYSA9IG1ha2VFeGVjdXRhYmxlU2NoZW1hKHsgdHlwZURlZnM6IHBvc3RUeXBlRGVmcywgcmVzb2x2ZXJzOiBwb3N0UmVzb2x2ZXJzIH0pOwoKLy8gTWVyZ2Ugc2NoZW1hcwpjb25zdCBzY2hlbWEgPSBtZXJnZVNjaGVtYXMoewogIHNjaGVtYXM6IFt1c2VyU2NoZW1hLCBwb3N0U2NoZW1hXSwKfSk7CgovLyBDcmVhdGUgQXBvbGxvIFNlcnZlcgpjb25zdCBzZXJ2ZXIgPSBuZXcgQXBvbGxvU2VydmVyKHsgc2NoZW1hIH0pOwoKc2VydmVyLmxpc3RlbigpLnRoZW4oKHsgdXJsIH0pID0+IHsKICBjb25zb2xlLmxvZyhgU2VydmVyIHJlYWR5IGF0ICR7dXJsfWApOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// index.js
const { makeExecutableSchema, mergeSchemas } = require('graphql-tools');
const { ApolloServer } = require('apollo-server');

// Define type definitions and resolvers for user schema
const userTypeDefs = `
  type User {
    id: ID!
    name: String!
  }

  type Query {
    user(id: ID!): User
  }
`;

const userResolvers = {
  Query: {
    user: (_, { id }) =&gt; ({ id, name: `User ${id}` }),
  },
};

// Define type definitions and resolvers for post schema
const postTypeDefs = `
  type Post {
    id: ID!
    title: String!
    authorId: ID!
  }

  type Query {
    post(id: ID!): Post
  }
`;

const postResolvers = {
  Query: {
    post: (_, { id }) =&gt; ({ id, title: `Post ${id}`, authorId: `User ${id}` }),
  },
};

// Create executable schemas
const userSchema = makeExecutableSchema({ typeDefs: userTypeDefs, resolvers: userResolvers });
const postSchema = makeExecutableSchema({ typeDefs: postTypeDefs, resolvers: postResolvers });

// Merge schemas
const schema = mergeSchemas({
  schemas: [userSchema, postSchema],
});

// Create Apollo Server
const server = new ApolloServer({ schema });

server.listen().then(({ url }) =&gt; {
  console.log(`Server ready at ${url}`);
});</pre></div><div class='content'></div><h1>Advanced Schema Stitching</h1>
<div class='content'></div><h2>Adding Relationships</h2>
<div class='content'><p>To make the stitched schema more useful, you can add relationships between types in different schemas. For example, linking posts to their authors.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBFeHRlbmQgVXNlciB0eXBlIHRvIGluY2x1ZGUgcG9zdHMKZXh0ZW5kIHR5cGUgVXNlciB7CiAgcG9zdHM6IFtQb3N0XQp9CgojIEV4dGVuZCBQb3N0IHR5cGUgdG8gaW5jbHVkZSBhdXRob3IKZXh0ZW5kIHR5cGUgUG9zdCB7CiAgYXV0aG9yOiBVc2VyCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Extend User type to include posts
extend type User {
  posts: [Post]
}

# Extend Post type to include author
extend type Post {
  author: User
}</pre></div><div class='content'></div><h2>Resolvers for Relationships</h2>
<div class='content'><p>You need to add resolvers to handle these relationships.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgdXNlclJlc29sdmVycyA9IHsKICBRdWVyeTogewogICAgdXNlcjogKF8sIHsgaWQgfSkgPT4gKHsgaWQsIG5hbWU6IGBVc2VyICR7aWR9YCB9KSwKICB9LAogIFVzZXI6IHsKICAgIHBvc3RzOiAodXNlcikgPT4gW3sgaWQ6IDEsIHRpdGxlOiAnUG9zdCAxJywgYXV0aG9ySWQ6IHVzZXIuaWQgfV0sCiAgfSwKfTsKCmNvbnN0IHBvc3RSZXNvbHZlcnMgPSB7CiAgUXVlcnk6IHsKICAgIHBvc3Q6IChfLCB7IGlkIH0pID0+ICh7IGlkLCB0aXRsZTogYFBvc3QgJHtpZH1gLCBhdXRob3JJZDogYFVzZXIgJHtpZH1gIH0pLAogIH0sCiAgUG9zdDogewogICAgYXV0aG9yOiAocG9zdCkgPT4gKHsgaWQ6IHBvc3QuYXV0aG9ySWQsIG5hbWU6IGBVc2VyICR7cG9zdC5hdXRob3JJZH1gIH0pLAogIH0sCn07"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const userResolvers = {
  Query: {
    user: (_, { id }) =&gt; ({ id, name: `User ${id}` }),
  },
  User: {
    posts: (user) =&gt; [{ id: 1, title: 'Post 1', authorId: user.id }],
  },
};

const postResolvers = {
  Query: {
    post: (_, { id }) =&gt; ({ id, title: `Post ${id}`, authorId: `User ${id}` }),
  },
  Post: {
    author: (post) =&gt; ({ id: post.authorId, name: `User ${post.authorId}` }),
  },
};</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>Schema stitching is a powerful technique in GraphQL that allows you to:</p>
<ul>
<li>Combine multiple schemas into a single unified schema.</li>
<li>Enhance modularity, reusability, and scalability of your GraphQL APIs.</li>
<li>Integrate third-party APIs seamlessly.</li>
</ul>
<p>By understanding and implementing schema stitching, you can build more flexible and maintainable GraphQL architectures, especially in complex or distributed systems.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='directives'>&#x25C4;Directives</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Schema Stitching in GraphQL</a>
	</div>
	<div class='col-4 text-end'>
					<a href='batching-and-caching'>Batching and Caching &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
