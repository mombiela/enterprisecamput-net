<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mutations</title>

    <link rel="alternate" href="https://campusempresa.com/mod/graphql/02-02-mutations" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/graphql/02-02-mutations" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/graphql/02-02-mutations" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/graphql/02-02-mutations" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/graphql/02-02-mutations" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='02-01-queries' title="Queries">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Mutations</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='02-03-resolvers' title="Resolvers">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will delve into GraphQL mutations, which are used to modify data on the server. Mutations are similar to queries in GraphQL, but they allow you to perform operations that change the state of the data, such as creating, updating, or deleting records.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Definition</strong>: Mutations are a type of operation in GraphQL that allows you to modify server-side data.</li>
<li><strong>Structure</strong>: Mutations have a similar structure to queries but typically include input arguments to specify the data to be modified.</li>
<li><strong>Resolvers</strong>: Each mutation must have a corresponding resolver function that handles the logic for modifying the data.</li>
</ol>
</div><h1>Basic Mutation Structure</h1>
<div class='content'><p>A mutation in GraphQL is defined in the schema and includes the following components:</p>
<ul>
<li><strong>Mutation Type</strong>: Defines the available mutation operations.</li>
<li><strong>Input Arguments</strong>: Specifies the data required to perform the mutation.</li>
<li><strong>Return Type</strong>: Defines the type of data returned after the mutation is executed.</li>
</ul>
</div><h2>Example Schema Definition</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dHlwZSBNdXRhdGlvbiB7CiAgYWRkVXNlcihuYW1lOiBTdHJpbmchLCBhZ2U6IEludCEpOiBVc2VyCn0KCnR5cGUgVXNlciB7CiAgaWQ6IElEIQogIG5hbWU6IFN0cmluZyEKICBhZ2U6IEludCEKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>type Mutation {
  addUser(name: String!, age: Int!): User
}

type User {
  id: ID!
  name: String!
  age: Int!
}</pre></div><div class='content'><p>In this example:</p>
<ul>
<li><code>addUser</code> is a mutation that takes <code>name</code> and <code>age</code> as input arguments and returns a <code>User</code> type.</li>
</ul>
</div><h2>Example Resolver</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgcmVzb2x2ZXJzID0gewogIE11dGF0aW9uOiB7CiAgICBhZGRVc2VyOiAocGFyZW50LCBhcmdzLCBjb250ZXh0LCBpbmZvKSA9PiB7CiAgICAgIGNvbnN0IG5ld1VzZXIgPSB7CiAgICAgICAgaWQ6IGdlbmVyYXRlVW5pcXVlSWQoKSwKICAgICAgICBuYW1lOiBhcmdzLm5hbWUsCiAgICAgICAgYWdlOiBhcmdzLmFnZSwKICAgICAgfTsKICAgICAgLy8gTG9naWMgdG8gc2F2ZSB0aGUgbmV3IHVzZXIgdG8gdGhlIGRhdGFiYXNlCiAgICAgIHVzZXJzLnB1c2gobmV3VXNlcik7CiAgICAgIHJldHVybiBuZXdVc2VyOwogICAgfSwKICB9LAp9Ow=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const resolvers = {
  Mutation: {
    addUser: (parent, args, context, info) =&gt; {
      const newUser = {
        id: generateUniqueId(),
        name: args.name,
        age: args.age,
      };
      // Logic to save the new user to the database
      users.push(newUser);
      return newUser;
    },
  },
};</pre></div><div class='content'><p>In this resolver:</p>
<ul>
<li><code>addUser</code> function takes <code>args</code> containing the input arguments (<code>name</code> and <code>age</code>).</li>
<li>A new user object is created and added to the <code>users</code> array.</li>
<li>The newly created user is returned.</li>
</ul>
</div><h1>Practical Example</h1>
<div class='content'><p>Let's create a simple GraphQL server with a mutation to add a user.</p>
</div><h2>Step 1: Setting Up the Server</h2>
<div class='content'><p>First, set up a basic GraphQL server using <code>express</code> and <code>apollo-server-express</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3QgeyBBcG9sbG9TZXJ2ZXIsIGdxbCB9ID0gcmVxdWlyZSgnYXBvbGxvLXNlcnZlci1leHByZXNzJyk7Cgpjb25zdCBhcHAgPSBleHByZXNzKCk7CmNvbnN0IHBvcnQgPSA0MDAwOwoKY29uc3QgdHlwZURlZnMgPSBncWxgCiAgdHlwZSBVc2VyIHsKICAgIGlkOiBJRCEKICAgIG5hbWU6IFN0cmluZyEKICAgIGFnZTogSW50IQogIH0KCiAgdHlwZSBNdXRhdGlvbiB7CiAgICBhZGRVc2VyKG5hbWU6IFN0cmluZyEsIGFnZTogSW50ISk6IFVzZXIKICB9CgogIHR5cGUgUXVlcnkgewogICAgdXNlcnM6IFtVc2VyXQogIH0KYDsKCmxldCB1c2VycyA9IFtdOwoKY29uc3QgcmVzb2x2ZXJzID0gewogIFF1ZXJ5OiB7CiAgICB1c2VyczogKCkgPT4gdXNlcnMsCiAgfSwKICBNdXRhdGlvbjogewogICAgYWRkVXNlcjogKHBhcmVudCwgYXJncykgPT4gewogICAgICBjb25zdCBuZXdVc2VyID0gewogICAgICAgIGlkOiB1c2Vycy5sZW5ndGggKyAxLAogICAgICAgIG5hbWU6IGFyZ3MubmFtZSwKICAgICAgICBhZ2U6IGFyZ3MuYWdlLAogICAgICB9OwogICAgICB1c2Vycy5wdXNoKG5ld1VzZXIpOwogICAgICByZXR1cm4gbmV3VXNlcjsKICAgIH0sCiAgfSwKfTsKCmNvbnN0IHNlcnZlciA9IG5ldyBBcG9sbG9TZXJ2ZXIoeyB0eXBlRGVmcywgcmVzb2x2ZXJzIH0pOwpzZXJ2ZXIuYXBwbHlNaWRkbGV3YXJlKHsgYXBwIH0pOwoKYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiB7CiAgY29uc29sZS5sb2coYFNlcnZlciBpcyBydW5uaW5nIGF0IGh0dHA6Ly9sb2NhbGhvc3Q6JHtwb3J0fSR7c2VydmVyLmdyYXBocWxQYXRofWApOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const express = require('express');
const { ApolloServer, gql } = require('apollo-server-express');

const app = express();
const port = 4000;

const typeDefs = gql`
  type User {
    id: ID!
    name: String!
    age: Int!
  }

  type Mutation {
    addUser(name: String!, age: Int!): User
  }

  type Query {
    users: [User]
  }
`;

let users = [];

const resolvers = {
  Query: {
    users: () =&gt; users,
  },
  Mutation: {
    addUser: (parent, args) =&gt; {
      const newUser = {
        id: users.length + 1,
        name: args.name,
        age: args.age,
      };
      users.push(newUser);
      return newUser;
    },
  },
};

const server = new ApolloServer({ typeDefs, resolvers });
server.applyMiddleware({ app });

app.listen(port, () =&gt; {
  console.log(`Server is running at http://localhost:${port}${server.graphqlPath}`);
});</pre></div><div class='content'></div><h2>Step 2: Testing the Mutation</h2>
<div class='content'><p>You can test the mutation using GraphiQL or any other GraphQL client.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bXV0YXRpb24gewogIGFkZFVzZXIobmFtZTogIkpvaG4gRG9lIiwgYWdlOiAzMCkgewogICAgaWQKICAgIG5hbWUKICAgIGFnZQogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>mutation {
  addUser(name: &quot;John Doe&quot;, age: 30) {
    id
    name
    age
  }
}</pre></div><div class='content'><p>This mutation will add a new user with the name &quot;John Doe&quot; and age 30 to the server.</p>
</div><h1>Exercises</h1>
<div class='content'></div><h2>Exercise 1: Add a New Mutation</h2>
<div class='content'><p><strong>Task</strong>: Add a mutation to update a user's age.</p>
<ol>
<li>
<p><strong>Schema Definition</strong>:</p>
<pre><code class="language-graphql">type Mutation {
  updateUserAge(id: ID!, age: Int!): User
}
</code></pre>
</li>
<li>
<p><strong>Resolver</strong>:</p>
<pre><code class="language-javascript">const resolvers = {
  Mutation: {
    updateUserAge: (parent, args) =&gt; {
      const user = users.find(user =&gt; user.id === args.id);
      if (!user) {
        throw new Error('User not found');
      }
      user.age = args.age;
      return user;
    },
  },
};
</code></pre>
</li>
<li>
<p><strong>Test the Mutation</strong>:</p>
<pre><code class="language-graphql">mutation {
  updateUserAge(id: 1, age: 35) {
    id
    name
    age
  }
}
</code></pre>
</li>
</ol>
</div><h2>Solution</h2>
<div class='content'><ol>
<li>
<p><strong>Schema Definition</strong>:</p>
<pre><code class="language-graphql">type Mutation {
  updateUserAge(id: ID!, age: Int!): User
}
</code></pre>
</li>
<li>
<p><strong>Resolver</strong>:</p>
<pre><code class="language-javascript">const resolvers = {
  Mutation: {
    updateUserAge: (parent, args) =&gt; {
      const user = users.find(user =&gt; user.id === args.id);
      if (!user) {
        throw new Error('User not found');
      }
      user.age = args.age;
      return user;
    },
  },
};
</code></pre>
</li>
<li>
<p><strong>Test the Mutation</strong>:</p>
<pre><code class="language-graphql">mutation {
  updateUserAge(id: 1, age: 35) {
    id
    name
    age
  }
}
</code></pre>
</li>
</ol>
</div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Missing Input Arguments</strong>: Ensure that all required input arguments are provided when calling a mutation.</li>
<li><strong>Error Handling</strong>: Always handle errors gracefully in your resolvers to provide meaningful feedback to the client.</li>
<li><strong>Validation</strong>: Validate input data to prevent invalid data from being processed.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered the basics of GraphQL mutations, including their structure, how to define them in the schema, and how to implement resolvers. We also provided a practical example and exercises to reinforce the concepts. Understanding mutations is crucial for performing data modifications in a GraphQL server, and mastering them will enable you to build more dynamic and interactive applications.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='02-01-queries' title="Queries">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='02-03-resolvers' title="Resolvers">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
