<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Efficient DOM Manipulation</title>

    <link rel="alternate" href="https://campusempresa.com/mod/javascript/09-03-efficient-dom-manipulation" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/javascript/09-03-efficient-dom-manipulation" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/javascript/09-03-efficient-dom-manipulation" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/javascript/09-03-efficient-dom-manipulation" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/javascript/09-03-efficient-dom-manipulation" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='09-02-memory-management' title="Memory Management">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Efficient DOM Manipulation</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='09-04-lazy-loading-code-splitting' title="Lazy Loading and Code Splitting">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Efficient manipulation of the Document Object Model (DOM) is crucial for creating high-performance web applications. Inefficient DOM operations can lead to slow rendering, poor user experience, and high memory usage. This section will cover best practices and techniques to optimize DOM manipulation in JavaScript.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li>
<p><strong>Minimize Reflows and Repaints</strong>:</p>
<ul>
<li><strong>Reflow</strong>: The process of recalculating the positions and geometries of elements in the document.</li>
<li><strong>Repaint</strong>: The process of redrawing the elements on the screen.</li>
<li>Both processes are computationally expensive and should be minimized.</li>
</ul>
</li>
<li>
<p><strong>Batch DOM Updates</strong>:</p>
<ul>
<li>Perform multiple DOM updates in a single operation to reduce the number of reflows and repaints.</li>
</ul>
</li>
<li>
<p><strong>Use Document Fragments</strong>:</p>
<ul>
<li>A lightweight container for holding multiple DOM nodes. It helps in reducing reflows by allowing batch updates.</li>
</ul>
</li>
<li>
<p><strong>Clone Nodes for Bulk Changes</strong>:</p>
<ul>
<li>Clone a node, make changes to the clone, and then replace the original node with the modified clone.</li>
</ul>
</li>
<li>
<p><strong>Use Efficient Selectors</strong>:</p>
<ul>
<li>Use efficient and specific selectors to minimize the time spent in querying the DOM.</li>
</ul>
</li>
<li>
<p><strong>Avoid Layout Thrashing</strong>:</p>
<ul>
<li>Avoid reading from and writing to the DOM in rapid succession. This can cause multiple reflows and repaints.</li>
</ul>
</li>
</ol>
</div><h1>Practical Examples</h1>
<div class='content'></div><h2>Example 1: Minimizing Reflows and Repaints</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5lZmZpY2llbnQgd2F5OiBDYXVzZXMgbXVsdGlwbGUgcmVmbG93cyBhbmQgcmVwYWludHMKY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteUVsZW1lbnQnKTsKZWxlbWVudC5zdHlsZS53aWR0aCA9ICcxMDBweCc7CmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzEwMHB4JzsKZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnYmx1ZSc7CgovLyBFZmZpY2llbnQgd2F5OiBCYXRjaCB1cGRhdGVzIHRvIG1pbmltaXplIHJlZmxvd3MgYW5kIHJlcGFpbnRzCmNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXlFbGVtZW50Jyk7CmVsZW1lbnQuc3R5bGUuY3NzVGV4dCA9ICd3aWR0aDogMTAwcHg7IGhlaWdodDogMTAwcHg7IGJhY2tncm91bmQtY29sb3I6IGJsdWU7Jzs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Inefficient way: Causes multiple reflows and repaints
const element = document.getElementById('myElement');
element.style.width = '100px';
element.style.height = '100px';
element.style.backgroundColor = 'blue';

// Efficient way: Batch updates to minimize reflows and repaints
const element = document.getElementById('myElement');
element.style.cssText = 'width: 100px; height: 100px; background-color: blue;';</pre></div><div class='content'></div><h2>Example 2: Using Document Fragments</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5lZmZpY2llbnQgd2F5OiBNdWx0aXBsZSByZWZsb3dzIGZvciBlYWNoIGFwcGVuZENoaWxkIGNhbGwKY29uc3QgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteUxpc3QnKTsKZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykgewogIGNvbnN0IGxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICBsaXN0SXRlbS50ZXh0Q29udGVudCA9IGBJdGVtICR7aX1gOwogIGxpc3QuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pOwp9CgovLyBFZmZpY2llbnQgd2F5OiBVc2luZyBEb2N1bWVudCBGcmFnbWVudCB0byBiYXRjaCB1cGRhdGVzCmNvbnN0IGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXlMaXN0Jyk7CmNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpOwpmb3IgKGxldCBpID0gMDsgaSA8IDEwMDsgaSsrKSB7CiAgY29uc3QgbGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpOwogIGxpc3RJdGVtLnRleHRDb250ZW50ID0gYEl0ZW0gJHtpfWA7CiAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pOwp9Cmxpc3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Inefficient way: Multiple reflows for each appendChild call
const list = document.getElementById('myList');
for (let i = 0; i &lt; 100; i++) {
  const listItem = document.createElement('li');
  listItem.textContent = `Item ${i}`;
  list.appendChild(listItem);
}

// Efficient way: Using Document Fragment to batch updates
const list = document.getElementById('myList');
const fragment = document.createDocumentFragment();
for (let i = 0; i &lt; 100; i++) {
  const listItem = document.createElement('li');
  listItem.textContent = `Item ${i}`;
  fragment.appendChild(listItem);
}
list.appendChild(fragment);</pre></div><div class='content'></div><h2>Example 3: Cloning Nodes for Bulk Changes</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5lZmZpY2llbnQgd2F5OiBNdWx0aXBsZSByZWZsb3dzIGZvciBlYWNoIHN0eWxlIGNoYW5nZQpjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215RWxlbWVudCcpOwplbGVtZW50LnN0eWxlLmNvbG9yID0gJ3JlZCc7CmVsZW1lbnQuc3R5bGUuZm9udFNpemUgPSAnMjBweCc7CmVsZW1lbnQuc3R5bGUubWFyZ2luID0gJzEwcHgnOwoKLy8gRWZmaWNpZW50IHdheTogQ2xvbmUgbm9kZSwgbWFrZSBjaGFuZ2VzLCBhbmQgcmVwbGFjZQpjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215RWxlbWVudCcpOwpjb25zdCBjbG9uZSA9IGVsZW1lbnQuY2xvbmVOb2RlKHRydWUpOwpjbG9uZS5zdHlsZS5jb2xvciA9ICdyZWQnOwpjbG9uZS5zdHlsZS5mb250U2l6ZSA9ICcyMHB4JzsKY2xvbmUuc3R5bGUubWFyZ2luID0gJzEwcHgnOwplbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNsb25lLCBlbGVtZW50KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Inefficient way: Multiple reflows for each style change
const element = document.getElementById('myElement');
element.style.color = 'red';
element.style.fontSize = '20px';
element.style.margin = '10px';

// Efficient way: Clone node, make changes, and replace
const element = document.getElementById('myElement');
const clone = element.cloneNode(true);
clone.style.color = 'red';
clone.style.fontSize = '20px';
clone.style.margin = '10px';
element.parentNode.replaceChild(clone, element);</pre></div><div class='content'></div><h2>Example 4: Using Efficient Selectors</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5lZmZpY2llbnQgd2F5OiBHZW5lcmFsIHNlbGVjdG9yIHRoYXQgc2VhcmNoZXMgdGhlIGVudGlyZSBkb2N1bWVudApjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5teUNsYXNzJyk7CgovLyBFZmZpY2llbnQgd2F5OiBTcGVjaWZpYyBzZWxlY3RvciB0aGF0IGxpbWl0cyB0aGUgc2VhcmNoIHNjb3BlCmNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteUNvbnRhaW5lcicpOwpjb25zdCBlbGVtZW50cyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcubXlDbGFzcycpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Inefficient way: General selector that searches the entire document
const elements = document.querySelectorAll('.myClass');

// Efficient way: Specific selector that limits the search scope
const container = document.getElementById('myContainer');
const elements = container.querySelectorAll('.myClass');</pre></div><div class='content'></div><h2>Example 5: Avoiding Layout Thrashing</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gSW5lZmZpY2llbnQgd2F5OiBDYXVzZXMgbGF5b3V0IHRocmFzaGluZwpjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215RWxlbWVudCcpOwpjb25zdCBoZWlnaHQgPSBlbGVtZW50Lm9mZnNldEhlaWdodDsKZWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHtoZWlnaHQgKyAxMH1weGA7CgovLyBFZmZpY2llbnQgd2F5OiBNaW5pbWl6ZSBsYXlvdXQgdGhyYXNoaW5nCmNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXlFbGVtZW50Jyk7CmNvbnN0IGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0OwplbGVtZW50LnN0eWxlLmhlaWdodCA9IGAke2hlaWdodCArIDEwfXB4YDs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Inefficient way: Causes layout thrashing
const element = document.getElementById('myElement');
const height = element.offsetHeight;
element.style.height = `${height + 10}px`;

// Efficient way: Minimize layout thrashing
const element = document.getElementById('myElement');
const height = element.offsetHeight;
element.style.height = `${height + 10}px`;</pre></div><div class='content'></div><h1>Practical Exercises</h1>
<div class='content'></div><h2>Exercise 1: Optimize DOM Manipulation</h2>
<div class='content'><p><strong>Task</strong>: Given the following code, optimize it to minimize reflows and repaints.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpOwpmb3IgKGxldCBpID0gMDsgaSA8IDUwOyBpKyspIHsKICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICBkaXYudGV4dENvbnRlbnQgPSBgRGl2ICR7aX1gOwogIGRpdi5zdHlsZS53aWR0aCA9ICcxMDBweCc7CiAgZGl2LnN0eWxlLmhlaWdodCA9ICcxMDBweCc7CiAgZGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGkgJSAyID09PSAwID8gJ3JlZCcgOiAnYmx1ZSc7CiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGRpdik7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const container = document.getElementById('container');
for (let i = 0; i &lt; 50; i++) {
  const div = document.createElement('div');
  div.textContent = `Div ${i}`;
  div.style.width = '100px';
  div.style.height = '100px';
  div.style.backgroundColor = i % 2 === 0 ? 'red' : 'blue';
  container.appendChild(div);
}</pre></div><div class='content'><p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcicpOwpjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTsKZm9yIChsZXQgaSA9IDA7IGkgPCA1MDsgaSsrKSB7CiAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgZGl2LnRleHRDb250ZW50ID0gYERpdiAke2l9YDsKICBkaXYuc3R5bGUuY3NzVGV4dCA9IGB3aWR0aDogMTAwcHg7IGhlaWdodDogMTAwcHg7IGJhY2tncm91bmQtY29sb3I6ICR7aSAlIDIgPT09IDAgPyAncmVkJyA6ICdibHVlJ307YDsKICBmcmFnbWVudC5hcHBlbmRDaGlsZChkaXYpOwp9CmNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const container = document.getElementById('container');
const fragment = document.createDocumentFragment();
for (let i = 0; i &lt; 50; i++) {
  const div = document.createElement('div');
  div.textContent = `Div ${i}`;
  div.style.cssText = `width: 100px; height: 100px; background-color: ${i % 2 === 0 ? 'red' : 'blue'};`;
  fragment.appendChild(div);
}
container.appendChild(fragment);</pre></div><div class='content'></div><h2>Exercise 2: Efficiently Update Multiple Elements</h2>
<div class='content'><p><strong>Task</strong>: Update the background color of all elements with the class <code>item</code> to green in an efficient manner.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXRlbScpOwppdGVtcy5mb3JFYWNoKGl0ZW0gPT4gewogIGl0ZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ2dyZWVuJzsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const items = document.querySelectorAll('.item');
items.forEach(item =&gt; {
  item.style.backgroundColor = 'green';
});</pre></div><div class='content'></div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li>
<p><strong>Mistake</strong>: Directly manipulating the DOM in a loop without using a document fragment.</p>
<ul>
<li><strong>Tip</strong>: Always use a document fragment for batch updates to minimize reflows.</li>
</ul>
</li>
<li>
<p><strong>Mistake</strong>: Using general selectors that search the entire document.</p>
<ul>
<li><strong>Tip</strong>: Use specific selectors to limit the search scope and improve performance.</li>
</ul>
</li>
<li>
<p><strong>Mistake</strong>: Reading and writing to the DOM in rapid succession.</p>
<ul>
<li><strong>Tip</strong>: Minimize layout thrashing by batching reads and writes.</li>
</ul>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Efficient DOM manipulation is essential for creating high-performance web applications. By minimizing reflows and repaints, using document fragments, cloning nodes for bulk changes, using efficient selectors, and avoiding layout thrashing, you can significantly improve the performance of your web applications. Practice these techniques to become proficient in optimizing DOM operations.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='09-02-memory-management' title="Memory Management">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='09-04-lazy-loading-code-splitting' title="Lazy Loading and Code Splitting">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
