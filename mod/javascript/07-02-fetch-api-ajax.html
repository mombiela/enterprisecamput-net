<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch API and AJAX</title>

    <link rel="alternate" href="https://campusempresa.com/mod/javascript/07-02-fetch-api-ajax" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/javascript/07-02-fetch-api-ajax" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/javascript/07-02-fetch-api-ajax" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/javascript/07-02-fetch-api-ajax" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/javascript/07-02-fetch-api-ajax" class="px-2">CA</a>
					</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-01-local-session-storage' title="Local Storage and Session Storage">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Fetch API and AJAX</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-03-websockets' title="WebSockets">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to make asynchronous requests to servers using the Fetch API and AJAX (Asynchronous JavaScript and XML). These techniques are essential for creating dynamic web applications that can update content without reloading the entire page.</p>
</div><h1><p>What is AJAX?</p>
</h1>
<div class='content'><p>AJAX stands for Asynchronous JavaScript and XML. It is a set of web development techniques that allow web pages to be updated asynchronously by exchanging small amounts of data with the server behind the scenes. This means that it is possible to update parts of a web page, without reloading the whole page.</p>
</div><h1><p>Fetch API</p>
</h1>
<div class='content'><p>The Fetch API is a modern replacement for XMLHttpRequest (XHR) and provides a more powerful and flexible feature set for making HTTP requests. It is built into most modern browsers and allows you to make network requests similar to XHR but with a more powerful and flexible feature set.</p>
</div><h2><p>Key Concepts of Fetch API</p>
</h2>
<div class='content'><ol>
<li><strong>Promises</strong>: Fetch API uses Promises, which makes it easier to work with asynchronous requests.</li>
<li><strong>Request and Response Objects</strong>: Fetch API provides Request and Response objects to handle HTTP requests and responses.</li>
<li><strong>Simplified Syntax</strong>: Fetch API has a simpler and cleaner syntax compared to XHR.</li>
</ol>
</div><h2><p>Basic Fetch Example</p>
</h2>
<div class='content'><p>Here is a basic example of how to use the Fetch API to make a GET request:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gTWFraW5nIGEgR0VUIHJlcXVlc3QgdXNpbmcgRmV0Y2ggQVBJCmZldGNoKCdodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vcG9zdHMnKQogIC50aGVuKHJlc3BvbnNlID0+IHsKICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdOZXR3b3JrIHJlc3BvbnNlIHdhcyBub3Qgb2sgJyArIHJlc3BvbnNlLnN0YXR1c1RleHQpOwogICAgfQogICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICB9KQogIC50aGVuKGRhdGEgPT4gewogICAgY29uc29sZS5sb2coZGF0YSk7CiAgfSkKICAuY2F0Y2goZXJyb3IgPT4gewogICAgY29uc29sZS5lcnJvcignVGhlcmUgaGFzIGJlZW4gYSBwcm9ibGVtIHdpdGggeW91ciBmZXRjaCBvcGVyYXRpb246JywgZXJyb3IpOwogIH0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Making a GET request using Fetch API
fetch('https://jsonplaceholder.typicode.com/posts')
  .then(response =&gt; {
    if (!response.ok) {
      throw new Error('Network response was not ok ' + response.statusText);
    }
    return response.json();
  })
  .then(data =&gt; {
    console.log(data);
  })
  .catch(error =&gt; {
    console.error('There has been a problem with your fetch operation:', error);
  });</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li><code>fetch('https://jsonplaceholder.typicode.com/posts')</code>: Initiates a GET request to the specified URL.</li>
<li><code>.then(response =&gt; { ... })</code>: Handles the response. The <code>response.ok</code> property checks if the request was successful.</li>
<li><code>response.json()</code>: Parses the response body as JSON.</li>
<li><code>.then(data =&gt; { ... })</code>: Handles the parsed JSON data.</li>
<li><code>.catch(error =&gt; { ... })</code>: Catches and handles any errors that occur during the fetch operation.</li>
</ul>
</div><h2><p>Making a POST Request</p>
</h2>
<div class='content'><p>To make a POST request, you need to specify the method and provide the request body:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gTWFraW5nIGEgUE9TVCByZXF1ZXN0IHVzaW5nIEZldGNoIEFQSQpmZXRjaCgnaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3Bvc3RzJywgewogIG1ldGhvZDogJ1BPU1QnLAogIGhlYWRlcnM6IHsKICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICB9LAogIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsKICAgIHRpdGxlOiAnZm9vJywKICAgIGJvZHk6ICdiYXInLAogICAgdXNlcklkOiAxCiAgfSkKfSkKICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpCiAgLnRoZW4oZGF0YSA9PiB7CiAgICBjb25zb2xlLmxvZyhkYXRhKTsKICB9KQogIC5jYXRjaChlcnJvciA9PiB7CiAgICBjb25zb2xlLmVycm9yKCdUaGVyZSBoYXMgYmVlbiBhIHByb2JsZW0gd2l0aCB5b3VyIGZldGNoIG9wZXJhdGlvbjonLCBlcnJvcik7CiAgfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Making a POST request using Fetch API
fetch('https://jsonplaceholder.typicode.com/posts', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    title: 'foo',
    body: 'bar',
    userId: 1
  })
})
  .then(response =&gt; response.json())
  .then(data =&gt; {
    console.log(data);
  })
  .catch(error =&gt; {
    console.error('There has been a problem with your fetch operation:', error);
  });</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li><code>method: 'POST'</code>: Specifies the HTTP method.</li>
<li><code>headers: { 'Content-Type': 'application/json' }</code>: Sets the request headers.</li>
<li><code>body: JSON.stringify({ ... })</code>: Converts the JavaScript object to a JSON string for the request body.</li>
</ul>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Fetch Data from an API</p>
</h2>
<div class='content'><p><strong>Task:</strong>
Create a simple HTML page with a button. When the button is clicked, fetch data from an API and display it on the page.</p>
<p><strong>HTML:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIj4KICA8dGl0bGU+RmV0Y2ggQVBJIEV4YW1wbGU8L3RpdGxlPgo8L2hlYWQ+Cjxib2R5PgogIDxidXR0b24gaWQ9ImZldGNoQnV0dG9uIj5GZXRjaCBEYXRhPC9idXR0b24+CiAgPGRpdiBpZD0iZGF0YURpc3BsYXkiPjwvZGl2PgoKICA8c2NyaXB0IHNyYz0ic2NyaXB0LmpzIj48L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;Fetch API Example&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;button id=&quot;fetchButton&quot;&gt;Fetch Data&lt;/button&gt;
  &lt;div id=&quot;dataDisplay&quot;&gt;&lt;/div&gt;

  &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'><p><strong>JavaScript (script.js):</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZldGNoQnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7CiAgZmV0Y2goJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS9wb3N0cycpCiAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpCiAgICAudGhlbihkYXRhID0+IHsKICAgICAgY29uc3QgZGF0YURpc3BsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YURpc3BsYXknKTsKICAgICAgZGF0YURpc3BsYXkuaW5uZXJIVE1MID0gSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMik7CiAgICB9KQogICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgZGF0YTonLCBlcnJvcik7CiAgICB9KTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>document.getElementById('fetchButton').addEventListener('click', () =&gt; {
  fetch('https://jsonplaceholder.typicode.com/posts')
    .then(response =&gt; response.json())
    .then(data =&gt; {
      const dataDisplay = document.getElementById('dataDisplay');
      dataDisplay.innerHTML = JSON.stringify(data, null, 2);
    })
    .catch(error =&gt; {
      console.error('Error fetching data:', error);
    });
});</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li>The HTML contains a button and a div to display the fetched data.</li>
<li>The JavaScript adds an event listener to the button. When clicked, it fetches data from the API and displays it in the <code>dataDisplay</code> div.</li>
</ul>
</div><h2><p>Exercise 2: Submit Form Data Using Fetch API</p>
</h2>
<div class='content'><p><strong>Task:</strong>
Create a simple HTML form. When the form is submitted, use the Fetch API to send the form data to a server.</p>
<p><strong>HTML:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wIj4KICA8dGl0bGU+U3VibWl0IEZvcm0gd2l0aCBGZXRjaCBBUEk8L3RpdGxlPgo8L2hlYWQ+Cjxib2R5PgogIDxmb3JtIGlkPSJkYXRhRm9ybSI+CiAgICA8bGFiZWwgZm9yPSJ0aXRsZSI+VGl0bGU6PC9sYWJlbD4KICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0idGl0bGUiIG5hbWU9InRpdGxlIiByZXF1aXJlZD4KICAgIDxsYWJlbCBmb3I9ImJvZHkiPkJvZHk6PC9sYWJlbD4KICAgIDx0ZXh0YXJlYSBpZD0iYm9keSIgbmFtZT0iYm9keSIgcmVxdWlyZWQ+PC90ZXh0YXJlYT4KICAgIDxidXR0b24gdHlwZT0ic3VibWl0Ij5TdWJtaXQ8L2J1dHRvbj4KICA8L2Zvcm0+CiAgPGRpdiBpZD0icmVzcG9uc2VEaXNwbGF5Ij48L2Rpdj4KCiAgPHNjcmlwdCBzcmM9InNjcmlwdC5qcyI+PC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;Submit Form with Fetch API&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;form id=&quot;dataForm&quot;&gt;
    &lt;label for=&quot;title&quot;&gt;Title:&lt;/label&gt;
    &lt;input type=&quot;text&quot; id=&quot;title&quot; name=&quot;title&quot; required&gt;
    &lt;label for=&quot;body&quot;&gt;Body:&lt;/label&gt;
    &lt;textarea id=&quot;body&quot; name=&quot;body&quot; required&gt;&lt;/textarea&gt;
    &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;
  &lt;/form&gt;
  &lt;div id=&quot;responseDisplay&quot;&gt;&lt;/div&gt;

  &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'><p><strong>JavaScript (script.js):</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGFGb3JtJykuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2ZW50KSA9PiB7CiAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGUnKS52YWx1ZTsKICBjb25zdCBib2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JvZHknKS52YWx1ZTsKCiAgZmV0Y2goJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS9wb3N0cycsIHsKICAgIG1ldGhvZDogJ1BPU1QnLAogICAgaGVhZGVyczogewogICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9LAogICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICB0aXRsZTogdGl0bGUsCiAgICAgIGJvZHk6IGJvZHksCiAgICAgIHVzZXJJZDogMQogICAgfSkKICB9KQogICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKQogICAgLnRoZW4oZGF0YSA9PiB7CiAgICAgIGNvbnN0IHJlc3BvbnNlRGlzcGxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNwb25zZURpc3BsYXknKTsKICAgICAgcmVzcG9uc2VEaXNwbGF5LmlubmVySFRNTCA9IEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpOwogICAgfSkKICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN1Ym1pdHRpbmcgZm9ybTonLCBlcnJvcik7CiAgICB9KTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>document.getElementById('dataForm').addEventListener('submit', (event) =&gt; {
  event.preventDefault();

  const title = document.getElementById('title').value;
  const body = document.getElementById('body').value;

  fetch('https://jsonplaceholder.typicode.com/posts', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      title: title,
      body: body,
      userId: 1
    })
  })
    .then(response =&gt; response.json())
    .then(data =&gt; {
      const responseDisplay = document.getElementById('responseDisplay');
      responseDisplay.innerHTML = JSON.stringify(data, null, 2);
    })
    .catch(error =&gt; {
      console.error('Error submitting form:', error);
    });
});</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li>The HTML contains a form with input fields for title and body, and a submit button.</li>
<li>The JavaScript adds an event listener to the form. When the form is submitted, it prevents the default form submission, retrieves the input values, and uses the Fetch API to send the data to the server. The response is then displayed in the <code>responseDisplay</code> div.</li>
</ul>
</div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ol>
<li><strong>Handling Errors</strong>: Always handle errors using <code>.catch()</code> to ensure that any issues with the network request are properly managed.</li>
<li><strong>Parsing Response</strong>: Ensure that you parse the response correctly (e.g., <code>response.json()</code> for JSON data).</li>
<li><strong>CORS Issues</strong>: Be aware of Cross-Origin Resource Sharing (CORS) issues when making requests to different domains. Ensure the server supports CORS if needed.</li>
</ol>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the basics of making HTTP requests using the Fetch API and AJAX. We learned how to make GET and POST requests, handle responses, and manage errors. We also provided practical exercises to reinforce the concepts. Understanding these techniques is crucial for building dynamic and interactive web applications. In the next section, we will delve into WebSockets for real-time communication.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-01-local-session-storage' title="Local Storage and Session Storage">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='07-03-websockets' title="WebSockets">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
