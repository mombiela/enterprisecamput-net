<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Closures in JavaScript</title>

    <link rel="alternate" href="https://campusempresa.com/mod/javascript/closures" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/javascript/closures" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/javascript/closures" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/javascript/closures" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/javascript/closures" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='higher-order-functions'>&#x25C4;Higher-Order Functions</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Closures in JavaScript</a>
	</div>
	<div class='col-4 text-end'>
					<a href='callbacks-and-promises'>Callbacks and Promises &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Closures</h1>
<div class='content'><p>Closures are a fundamental concept in JavaScript that allow functions to access variables from an enclosing scope, even after that scope has closed. Understanding closures is crucial for mastering JavaScript, as they are widely used in various programming patterns and techniques.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Lexical Scoping</strong>: Functions in JavaScript form closures around the scope in which they were defined.</li>
<li><strong>Function Scope</strong>: Variables defined inside a function are not accessible outside of it, but closures allow inner functions to access these variables.</li>
<li><strong>Persistent State</strong>: Closures can maintain a persistent state across multiple invocations.</li>
</ul>
</div><h1>Basic Example of a Closure</h1>
<div class='content'><p>Let's start with a simple example to illustrate what a closure is.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gb3V0ZXJGdW5jdGlvbigpIHsKICAgIGxldCBvdXRlclZhcmlhYmxlID0gJ0kgYW0gb3V0c2lkZSEnOwoKICAgIGZ1bmN0aW9uIGlubmVyRnVuY3Rpb24oKSB7CiAgICAgICAgY29uc29sZS5sb2cob3V0ZXJWYXJpYWJsZSk7IC8vIEFjY2Vzc2luZyBvdXRlclZhcmlhYmxlIGZyb20gdGhlIG91dGVyIHNjb3BlCiAgICB9CgogICAgcmV0dXJuIGlubmVyRnVuY3Rpb247Cn0KCmNvbnN0IG15Q2xvc3VyZSA9IG91dGVyRnVuY3Rpb24oKTsKbXlDbG9zdXJlKCk7IC8vIExvZ3M6ICdJIGFtIG91dHNpZGUhJw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function outerFunction() {
    let outerVariable = 'I am outside!';

    function innerFunction() {
        console.log(outerVariable); // Accessing outerVariable from the outer scope
    }

    return innerFunction;
}

const myClosure = outerFunction();
myClosure(); // Logs: 'I am outside!'</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>outerFunction</code> defines a variable <code>outerVariable</code>.</li>
<li><code>innerFunction</code> is defined inside <code>outerFunction</code> and accesses <code>outerVariable</code>.</li>
<li><code>outerFunction</code> returns <code>innerFunction</code>, creating a closure.</li>
<li>When <code>myClosure</code> is called, it still has access to <code>outerVariable</code> even though <code>outerFunction</code> has finished executing.</li>
</ul>
</div><h1>Practical Uses of Closures</h1>
<div class='content'><p>Closures are not just theoretical; they have practical applications in real-world programming.</p>
</div><h2>Data Privacy</h2>
<div class='content'><p>Closures can be used to create private variables.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gY3JlYXRlQ291bnRlcigpIHsKICAgIGxldCBjb3VudCA9IDA7CgogICAgcmV0dXJuIHsKICAgICAgICBpbmNyZW1lbnQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBjb3VudCsrOwogICAgICAgICAgICByZXR1cm4gY291bnQ7CiAgICAgICAgfSwKICAgICAgICBkZWNyZW1lbnQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBjb3VudC0tOwogICAgICAgICAgICByZXR1cm4gY291bnQ7CiAgICAgICAgfSwKICAgICAgICBnZXRDb3VudDogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBjb3VudDsKICAgICAgICB9CiAgICB9Owp9Cgpjb25zdCBjb3VudGVyID0gY3JlYXRlQ291bnRlcigpOwpjb25zb2xlLmxvZyhjb3VudGVyLmluY3JlbWVudCgpKTsgLy8gMQpjb25zb2xlLmxvZyhjb3VudGVyLmluY3JlbWVudCgpKTsgLy8gMgpjb25zb2xlLmxvZyhjb3VudGVyLmRlY3JlbWVudCgpKTsgLy8gMQpjb25zb2xlLmxvZyhjb3VudGVyLmdldENvdW50KCkpOyAvLyAx"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function createCounter() {
    let count = 0;

    return {
        increment: function() {
            count++;
            return count;
        },
        decrement: function() {
            count--;
            return count;
        },
        getCount: function() {
            return count;
        }
    };
}

const counter = createCounter();
console.log(counter.increment()); // 1
console.log(counter.increment()); // 2
console.log(counter.decrement()); // 1
console.log(counter.getCount()); // 1</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>createCounter</code> function creates a private variable <code>count</code>.</li>
<li>The returned object contains methods that form closures around <code>count</code>, allowing controlled access to it.</li>
</ul>
</div><h2>Event Handlers</h2>
<div class='content'><p>Closures are often used in event handlers to maintain state.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gc2V0dXBCdXR0b24oKSB7CiAgICBsZXQgY2xpY2tDb3VudCA9IDA7CgogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ215QnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHsKICAgICAgICBjbGlja0NvdW50Kys7CiAgICAgICAgY29uc29sZS5sb2coYEJ1dHRvbiBjbGlja2VkICR7Y2xpY2tDb3VudH0gdGltZXNgKTsKICAgIH0pOwp9CgpzZXR1cEJ1dHRvbigpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function setupButton() {
    let clickCount = 0;

    document.getElementById('myButton').addEventListener('click', function() {
        clickCount++;
        console.log(`Button clicked ${clickCount} times`);
    });
}

setupButton();</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>setupButton</code> initializes <code>clickCount</code>.</li>
<li>The event handler function forms a closure around <code>clickCount</code>, maintaining its state across multiple clicks.</li>
</ul>
</div><h1>Advanced Concepts</h1>
<h2>Closures in Loops</h2>
<div class='content'><p>Closures can sometimes lead to unexpected behavior in loops if not handled correctly.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Zm9yICh2YXIgaSA9IDE7IGkgPD0gMzsgaSsrKSB7CiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIGNvbnNvbGUubG9nKGkpOwogICAgfSwgMTAwMCk7Cn0KLy8gTG9nczogNCwgNCwgNA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>for (var i = 1; i &lt;= 3; i++) {
    setTimeout(function() {
        console.log(i);
    }, 1000);
}
// Logs: 4, 4, 4</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li>The <code>setTimeout</code> callbacks form closures around the same <code>i</code> variable, which ends up being <code>4</code> after the loop.</li>
</ul>
</div><h2>Fixing with IIFE</h2>
<div class='content'><p>An Immediately Invoked Function Expression (IIFE) can be used to create a new scope for each iteration.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Zm9yICh2YXIgaSA9IDE7IGkgPD0gMzsgaSsrKSB7CiAgICAoZnVuY3Rpb24oaSkgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGkpOwogICAgICAgIH0sIDEwMDApOwogICAgfSkoaSk7Cn0KLy8gTG9nczogMSwgMiwgMw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>for (var i = 1; i &lt;= 3; i++) {
    (function(i) {
        setTimeout(function() {
            console.log(i);
        }, 1000);
    })(i);
}
// Logs: 1, 2, 3</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li>The IIFE creates a new scope for each iteration, preserving the current value of <code>i</code>.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Closures are a powerful feature in JavaScript that allow functions to access variables from an enclosing scope. They enable data privacy, maintain state in asynchronous operations, and are essential for many advanced programming patterns. Understanding and mastering closures will significantly enhance your JavaScript programming skills.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='higher-order-functions'>&#x25C4;Higher-Order Functions</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Closures in JavaScript</a>
	</div>
	<div class='col-4 text-end'>
					<a href='callbacks-and-promises'>Callbacks and Promises &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
