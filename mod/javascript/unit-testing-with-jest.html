<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit Testing with Jest</title>

    <link rel="alternate" href="https://campusempresa.com/mod/javascript/unit-testing-with-jest" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/javascript/unit-testing-with-jest" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/javascript/unit-testing-with-jest" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/javascript/unit-testing-with-jest" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/javascript/unit-testing-with-jest" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='security-best-practices'>&#x25C4;Security Best Practices</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Unit Testing with Jest</a>
	</div>
	<div class='col-4 text-end'>
					<a href='end-to-end-testing-with-cypress'>End-to-End Testing with Cypress &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Unit Testing</h1>
<div class='content'><ul>
<li><strong>Definition</strong>: Unit testing involves testing individual units or components of a software to ensure they work as intended.</li>
<li><strong>Importance</strong>: Helps catch bugs early, ensures code reliability, and facilitates refactoring.</li>
</ul>
</div><h1>Introduction to Jest</h1>
<div class='content'><ul>
<li><strong>What is Jest?</strong>: Jest is a JavaScript testing framework maintained by Facebook, designed to ensure correctness of any JavaScript codebase.</li>
<li><strong>Features</strong>:
<ul>
<li>Zero configuration required</li>
<li>Snapshot testing</li>
<li>Built-in code coverage</li>
<li>Easy mocking</li>
</ul>
</li>
</ul>
</div><h1>Setting Up Jest</h1>
<div class='content'><ul>
<li><strong>Installation</strong>:
<pre><code class="language-bash">npm install --save-dev jest
</code></pre>
</li>
<li><strong>Configuration</strong>:
<ul>
<li>Add a test script in <code>package.json</code>:
<pre><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;jest&quot;
  }
}
</code></pre>
</li>
</ul>
</li>
</ul>
</div><h1>Writing Your First Test</h1>
<div class='content'><ul>
<li>
<p><strong>Creating a Test File</strong>:</p>
<ul>
<li>Test files should be named with a <code>.test.js</code> or <code>.spec.js</code> extension.</li>
<li>Example: <code>sum.test.js</code></li>
</ul>
</li>
<li>
<p><strong>Basic Test Example</strong>:</p>
<pre><code class="language-javascript">// sum.js
function sum(a, b) {
  return a + b;
}
module.exports = sum;

// sum.test.js
const sum = require('./sum');

test('adds 1 + 2 to equal 3', () =&gt; {
  expect(sum(1, 2)).toBe(3);
});
</code></pre>
</li>
</ul>
</div><h1>Jest Matchers</h1>
<div class='content'><ul>
<li>
<p><strong>Common Matchers</strong>:</p>
<ul>
<li><code>toBe</code>: Exact equality</li>
<li><code>toEqual</code>: Deep equality</li>
<li><code>toBeNull</code>: Matches only <code>null</code></li>
<li><code>toBeUndefined</code>: Matches only <code>undefined</code></li>
<li><code>toBeTruthy</code>: Matches anything that an <code>if</code> statement treats as true</li>
<li><code>toBeFalsy</code>: Matches anything that an <code>if</code> statement treats as false</li>
</ul>
</li>
<li>
<p><strong>Example</strong>:</p>
<pre><code class="language-javascript">test('object assignment', () =&gt; {
  const data = {one: 1};
  data['two'] = 2;
  expect(data).toEqual({one: 1, two: 2});
});
</code></pre>
</li>
</ul>
</div><h1>Testing Asynchronous Code</h1>
<div class='content'><ul>
<li>
<p><strong>Callbacks</strong>:</p>
<pre><code class="language-javascript">// fetchData.js
function fetchData(callback) {
  setTimeout(() =&gt; {
    callback('peanut butter');
  }, 1000);
}
module.exports = fetchData;

// fetchData.test.js
const fetchData = require('./fetchData');

test('the data is peanut butter', done =&gt; {
  function callback(data) {
    expect(data).toBe('peanut butter');
    done();
  }

  fetchData(callback);
});
</code></pre>
</li>
<li>
<p><strong>Promises</strong>:</p>
<pre><code class="language-javascript">// fetchDataPromise.js
function fetchData() {
  return new Promise((resolve) =&gt; {
    setTimeout(() =&gt; {
      resolve('peanut butter');
    }, 1000);
  });
}
module.exports = fetchData;

// fetchDataPromise.test.js
const fetchData = require('./fetchDataPromise');

test('the data is peanut butter', () =&gt; {
  return fetchData().then(data =&gt; {
    expect(data).toBe('peanut butter');
  });
});
</code></pre>
</li>
<li>
<p><strong>Async/Await</strong>:</p>
<pre><code class="language-javascript">test('the data is peanut butter', async () =&gt; {
  const data = await fetchData();
  expect(data).toBe('peanut butter');
});
</code></pre>
</li>
</ul>
</div><h1>Mocking in Jest</h1>
<div class='content'><ul>
<li><strong>Manual Mocks</strong>:
<pre><code class="language-javascript">// user.js
const fetchData = require('./fetchData');

function getUser() {
  return fetchData().then(data =&gt; data.user);
}
module.exports = getUser;

// __mocks__/fetchData.js
module.exports = jest.fn(() =&gt; Promise.resolve({user: 'John Doe'}));

// user.test.js
jest.mock('./fetchData');
const getUser = require('./user');
const fetchData = require('./fetchData');

test('fetches user', async () =&gt; {
  const user = await getUser();
  expect(user).toBe('John Doe');
  expect(fetchData).toHaveBeenCalledTimes(1);
});
</code></pre>
</li>
</ul>
</div><h1>Snapshot Testing</h1>
<div class='content'><ul>
<li><strong>Definition</strong>: Snapshot testing is a way to test the UI by comparing the current state of the UI with a saved snapshot.</li>
<li><strong>Example</strong>:
<pre><code class="language-javascript">// Link.js
const React = require('react');

function Link({page, children}) {
  return &lt;a href={page}&gt;{children}&lt;/a&gt;;
}
module.exports = Link;

// Link.test.js
const React = require('react');
const renderer = require('react-test-renderer');
const Link = require('./Link');

test('Link changes the class when hovered', () =&gt; {
  const component = renderer.create(
    &lt;Link page=&quot;http://www.facebook.com&quot;&gt;Facebook&lt;/Link&gt;,
  );
  let tree = component.toJSON();
  expect(tree).toMatchSnapshot();
});
</code></pre>
</li>
</ul>
</div><h1>Code Coverage</h1>
<div class='content'><ul>
<li>
<p><strong>Generating Coverage Reports</strong>:</p>
<ul>
<li>Run Jest with the <code>--coverage</code> flag:
<pre><code class="language-bash">npm test -- --coverage
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Interpreting Coverage Reports</strong>:</p>
<ul>
<li>Coverage reports will be generated in the <code>coverage</code> directory.</li>
<li>Key metrics include:
<ul>
<li><strong>Statements</strong>: Percentage of executed statements.</li>
<li><strong>Branches</strong>: Percentage of executed branches in conditional statements.</li>
<li><strong>Functions</strong>: Percentage of executed functions.</li>
<li><strong>Lines</strong>: Percentage of executed lines.</li>
</ul>
</li>
</ul>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Unit testing with Jest is a powerful way to ensure your JavaScript code is reliable and bug-free. By understanding the basics of Jest, writing tests, using matchers, handling asynchronous code, mocking, snapshot testing, and generating code coverage reports, you can significantly improve the quality of your codebase. Happy testing!</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='security-best-practices'>&#x25C4;Security Best Practices</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Unit Testing with Jest</a>
	</div>
	<div class='col-4 text-end'>
					<a href='end-to-end-testing-with-cypress'>End-to-End Testing with Cypress &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
