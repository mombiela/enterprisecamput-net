<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Management</title>

    <link rel="alternate" href="https://campusempresa.com/mod/javascript/09-02-memory-management" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/javascript/09-02-memory-management" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/javascript/09-02-memory-management" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/javascript/09-02-memory-management" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/javascript/09-02-memory-management" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='09-01-optimizing-performance' title="Optimizing JavaScript Performance">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Memory Management</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='09-03-efficient-dom-manipulation' title="Efficient DOM Manipulation">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Memory management is a crucial aspect of programming, especially in JavaScript, where efficient use of memory can significantly impact the performance of your applications. In this section, we will cover the following topics:</p>
<ol>
<li><strong>Understanding Memory Allocation</strong></li>
<li><strong>Garbage Collection</strong></li>
<li><strong>Common Memory Leaks</strong></li>
<li><strong>Best Practices for Memory Management</strong></li>
</ol>
</div><h1>1. Understanding Memory Allocation</h1>
<div class='content'><p>Memory allocation in JavaScript can be divided into two main areas:</p>
<ul>
<li><strong>Stack Memory</strong>: Used for static memory allocation. It stores primitive values (e.g., numbers, strings, booleans) and references to objects.</li>
<li><strong>Heap Memory</strong>: Used for dynamic memory allocation. It stores objects and functions.</li>
</ul>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gU3RhY2sgbWVtb3J5IGFsbG9jYXRpb24KbGV0IG51bSA9IDQyOyAvLyBQcmltaXRpdmUgdmFsdWUgc3RvcmVkIGluIHN0YWNrCmxldCBzdHIgPSAiSGVsbG8sIFdvcmxkISI7IC8vIFByaW1pdGl2ZSB2YWx1ZSBzdG9yZWQgaW4gc3RhY2sKCi8vIEhlYXAgbWVtb3J5IGFsbG9jYXRpb24KbGV0IG9iaiA9IHsgbmFtZTogIkFsaWNlIiwgYWdlOiAzMCB9OyAvLyBPYmplY3Qgc3RvcmVkIGluIGhlYXAKbGV0IGFyciA9IFsxLCAyLCAzLCA0LCA1XTsgLy8gQXJyYXkgc3RvcmVkIGluIGhlYXA="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Stack memory allocation
let num = 42; // Primitive value stored in stack
let str = &quot;Hello, World!&quot;; // Primitive value stored in stack

// Heap memory allocation
let obj = { name: &quot;Alice&quot;, age: 30 }; // Object stored in heap
let arr = [1, 2, 3, 4, 5]; // Array stored in heap</pre></div><div class='content'></div><h1>2. Garbage Collection</h1>
<div class='content'><p>JavaScript uses an automatic memory management system known as <strong>garbage collection</strong>. The garbage collector periodically identifies and frees up memory that is no longer in use.</p>
</div><h2>Garbage Collection Algorithms</h2>
<div class='content'><ul>
<li><strong>Mark-and-Sweep</strong>: The most common algorithm. It marks all reachable objects and then sweeps through memory to collect unmarked objects.</li>
<li><strong>Reference Counting</strong>: Keeps track of the number of references to each object. When an object's reference count drops to zero, it is collected.</li>
</ul>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gY3JlYXRlVXNlcigpIHsKICAgIGxldCB1c2VyID0geyBuYW1lOiAiQm9iIiB9OyAvLyBPYmplY3QgY3JlYXRlZCBpbiBoZWFwCiAgICByZXR1cm4gdXNlcjsKfQoKbGV0IHVzZXIxID0gY3JlYXRlVXNlcigpOyAvLyB1c2VyMSByZWZlcmVuY2VzIHRoZSBvYmplY3QKbGV0IHVzZXIyID0gdXNlcjE7IC8vIHVzZXIyIGFsc28gcmVmZXJlbmNlcyB0aGUgc2FtZSBvYmplY3QKCnVzZXIxID0gbnVsbDsgLy8gdXNlcjEgbm8gbG9uZ2VyIHJlZmVyZW5jZXMgdGhlIG9iamVjdAp1c2VyMiA9IG51bGw7IC8vIHVzZXIyIG5vIGxvbmdlciByZWZlcmVuY2VzIHRoZSBvYmplY3QKCi8vIFRoZSBvYmplY3QgaXMgbm93IGVsaWdpYmxlIGZvciBnYXJiYWdlIGNvbGxlY3Rpb24="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function createUser() {
    let user = { name: &quot;Bob&quot; }; // Object created in heap
    return user;
}

let user1 = createUser(); // user1 references the object
let user2 = user1; // user2 also references the same object

user1 = null; // user1 no longer references the object
user2 = null; // user2 no longer references the object

// The object is now eligible for garbage collection</pre></div><div class='content'></div><h1>3. Common Memory Leaks</h1>
<div class='content'><p>Memory leaks occur when memory that is no longer needed is not released. Common causes include:</p>
<ul>
<li><strong>Global Variables</strong>: Variables that are not properly scoped can remain in memory.</li>
<li><strong>Event Listeners</strong>: Unremoved event listeners can keep references to objects.</li>
<li><strong>Closures</strong>: Functions that reference variables from an outer scope can prevent garbage collection.</li>
</ul>
</div><h2>Example of a Memory Leak</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXlFbGVtZW50Jyk7CgpmdW5jdGlvbiBoYW5kbGVDbGljaygpIHsKICAgIGNvbnNvbGUubG9nKCdFbGVtZW50IGNsaWNrZWQnKTsKfQoKZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsaWNrKTsKCi8vIE1lbW9yeSBsZWFrOiBUaGUgZXZlbnQgbGlzdGVuZXIgaXMgbm90IHJlbW92ZWQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let element = document.getElementById('myElement');

function handleClick() {
    console.log('Element clicked');
}

element.addEventListener('click', handleClick);

// Memory leak: The event listener is not removed</pre></div><div class='content'></div><h2>Fixing the Memory Leak</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXlFbGVtZW50Jyk7CgpmdW5jdGlvbiBoYW5kbGVDbGljaygpIHsKICAgIGNvbnNvbGUubG9nKCdFbGVtZW50IGNsaWNrZWQnKTsKfQoKZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsaWNrKTsKCi8vIFByb3Blcmx5IHJlbW92ZSB0aGUgZXZlbnQgbGlzdGVuZXIKZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUNsaWNrKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let element = document.getElementById('myElement');

function handleClick() {
    console.log('Element clicked');
}

element.addEventListener('click', handleClick);

// Properly remove the event listener
element.removeEventListener('click', handleClick);</pre></div><div class='content'></div><h1>4. Best Practices for Memory Management</h1>
<div class='content'><ul>
<li><strong>Avoid Global Variables</strong>: Use local variables and closures to limit the scope.</li>
<li><strong>Remove Event Listeners</strong>: Always remove event listeners when they are no longer needed.</li>
<li><strong>Use WeakMap and WeakSet</strong>: These collections do not prevent garbage collection of their keys.</li>
<li><strong>Optimize Data Structures</strong>: Use appropriate data structures to manage memory efficiently.</li>
</ul>
</div><h2>Example Using WeakMap</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGV0IHdlYWtNYXAgPSBuZXcgV2Vha01hcCgpOwoKbGV0IG9iaiA9IHsgbmFtZTogIkNoYXJsaWUiIH07CndlYWtNYXAuc2V0KG9iaiwgInNvbWUgdmFsdWUiKTsKCi8vIG9iaiBpcyBlbGlnaWJsZSBmb3IgZ2FyYmFnZSBjb2xsZWN0aW9uIHdoZW4gaXQgaXMgbm8gbG9uZ2VyIHJlZmVyZW5jZWQKb2JqID0gbnVsbDs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>let weakMap = new WeakMap();

let obj = { name: &quot;Charlie&quot; };
weakMap.set(obj, &quot;some value&quot;);

// obj is eligible for garbage collection when it is no longer referenced
obj = null;</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>In this section, we covered the basics of memory management in JavaScript, including memory allocation, garbage collection, common memory leaks, and best practices. Understanding these concepts is essential for writing efficient and performant JavaScript code. In the next section, we will delve into optimizing JavaScript performance, building on the principles learned here.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='09-01-optimizing-performance' title="Optimizing JavaScript Performance">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='09-03-efficient-dom-manipulation' title="Efficient DOM Manipulation">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
