<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using APIs</title>

    <link rel="alternate" href="https://campusempresa.com/mod/cl/06-03-using-apis" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/cl/06-03-using-apis" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/cl/06-03-using-apis" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/cl/06-03-using-apis" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/cl/06-03-using-apis" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='06-02-interfacing-databases' title="Interfacing with Databases">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Using APIs</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='06-04-network-communication' title="Network Communication">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this module, we will explore how to use APIs (Application Programming Interfaces) within Control Language (CL) programs. APIs allow CL programs to interact with other software components, services, or systems, enabling a wide range of functionalities and integrations.</p>
</div><h1><p>What is an API?</p>
</h1>
<div class='content'><p>An API is a set of rules and protocols for building and interacting with software applications. It defines the methods and data formats that applications can use to communicate with each other. APIs are essential for enabling software components to interact and share data.</p>
</div><h2><p>Key Concepts:</p>
</h2>
<div class='content'><ul>
<li><strong>Endpoint</strong>: A specific URL where an API can be accessed.</li>
<li><strong>Request</strong>: The act of asking for data or action from an API.</li>
<li><strong>Response</strong>: The data or action returned by the API.</li>
<li><strong>HTTP Methods</strong>: Common methods include GET (retrieve data), POST (send data), PUT (update data), and DELETE (remove data).</li>
</ul>
</div><h1><p>Setting Up Your Environment</p>
</h1>
<div class='content'><p>Before you can use APIs in your CL programs, ensure that your environment is properly set up:</p>
<ol>
<li><strong>Network Configuration</strong>: Ensure your system can access the internet or the network where the API is hosted.</li>
<li><strong>API Credentials</strong>: Obtain any necessary API keys or authentication tokens required to access the API.</li>
</ol>
</div><h1><p>Basic Syntax for API Calls in CL</p>
</h1>
<div class='content'><p>CL does not natively support HTTP requests, so you will typically use external programs or utilities to make API calls. One common approach is to use the <code>QSH</code> (QShell) command to execute curl commands.</p>
</div><h2><p>Example: Making a GET Request</p>
</h2>
<div class='content'><p>Here is an example of how to make a GET request to an API using CL:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCgpEQ0wgVkFSKCZVUkwpIFRZUEUoKkNIQVIpIExFTigyNTYpIFZBTFVFKCdodHRwczovL2FwaS5leGFtcGxlLmNvbS9kYXRhJykKRENMIFZBUigmUkVTUE9OU0UpIFRZUEUoKkNIQVIpIExFTigxMDI0KQoKUVNIIENNRCgnY3VybCAtcyAnICpDQVQgJlVSTCAqQ0FUICcgPiAvdG1wL2FwaV9yZXNwb25zZS50eHQnKQoKLyogUmVhZCB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgZmlsZSAqLwpSVFZNQlJEIEZJTEUoUVRFTVAvQVBJX1JFU1BPTlNFKSBNQlIoKkZJUlNUKSBSVE5WQVIoJlJFU1BPTlNFKQoKU05EUEdNTVNHIE1TRygmUkVTUE9OU0UpCgpFTkRQR00="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM

DCL VAR(&amp;URL) TYPE(*CHAR) LEN(256) VALUE('https://api.example.com/data')
DCL VAR(&amp;RESPONSE) TYPE(*CHAR) LEN(1024)

QSH CMD('curl -s ' *CAT &amp;URL *CAT ' &gt; /tmp/api_response.txt')

/* Read the response from the file */
RTVMBRD FILE(QTEMP/API_RESPONSE) MBR(*FIRST) RTNVAR(&amp;RESPONSE)

SNDPGMMSG MSG(&amp;RESPONSE)

ENDPGM</pre></div><div class='content'></div><h2><p>Explanation:</p>
</h2>
<div class='content'><ol>
<li><strong>Declare Variables</strong>: Define the URL and a variable to store the response.</li>
<li><strong>QSH Command</strong>: Use the <code>QSH</code> command to execute a curl command that makes the GET request and saves the response to a temporary file.</li>
<li><strong>Retrieve Response</strong>: Read the response from the file and store it in a variable.</li>
<li><strong>Send Program Message</strong>: Display the response.</li>
</ol>
</div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise: Making a POST Request</p>
</h2>
<div class='content'><p>Write a CL program that makes a POST request to an API to send data.</p>
<h4>Requirements:</h4>
<ul>
<li>The API endpoint is <code>https://api.example.com/submit</code>.</li>
<li>The data to be sent is in JSON format: <code>{&quot;name&quot;: &quot;John Doe&quot;, &quot;email&quot;: &quot;john.doe@example.com&quot;}</code>.</li>
<li>Save the response to a file and display it.</li>
</ul>
</div><h2><p>Solution:</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCgpEQ0wgVkFSKCZVUkwpIFRZUEUoKkNIQVIpIExFTigyNTYpIFZBTFVFKCdodHRwczovL2FwaS5leGFtcGxlLmNvbS9zdWJtaXQnKQpEQ0wgVkFSKCZEQVRBKSBUWVBFKCpDSEFSKSBMRU4oMjU2KSBWQUxVRSgneyJuYW1lIjogIkpvaG4gRG9lIiwgImVtYWlsIjogImpvaG4uZG9lQGV4YW1wbGUuY29tIn0nKQpEQ0wgVkFSKCZSRVNQT05TRSkgVFlQRSgqQ0hBUikgTEVOKDEwMjQpCgpRU0ggQ01EKCdjdXJsIC1zIC1YIFBPU1QgLUggIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbiIgLWQgJyAqQ0FUICZEQVRBICpDQVQgJyAnICpDQVQgJlVSTCAqQ0FUICcgPiAvdG1wL2FwaV9yZXNwb25zZS50eHQnKQoKLyogUmVhZCB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgZmlsZSAqLwpSVFZNQlJEIEZJTEUoUVRFTVAvQVBJX1JFU1BPTlNFKSBNQlIoKkZJUlNUKSBSVE5WQVIoJlJFU1BPTlNFKQoKU05EUEdNTVNHIE1TRygmUkVTUE9OU0UpCgpFTkRQR00="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM

DCL VAR(&amp;URL) TYPE(*CHAR) LEN(256) VALUE('https://api.example.com/submit')
DCL VAR(&amp;DATA) TYPE(*CHAR) LEN(256) VALUE('{&quot;name&quot;: &quot;John Doe&quot;, &quot;email&quot;: &quot;john.doe@example.com&quot;}')
DCL VAR(&amp;RESPONSE) TYPE(*CHAR) LEN(1024)

QSH CMD('curl -s -X POST -H &quot;Content-Type: application/json&quot; -d ' *CAT &amp;DATA *CAT ' ' *CAT &amp;URL *CAT ' &gt; /tmp/api_response.txt')

/* Read the response from the file */
RTVMBRD FILE(QTEMP/API_RESPONSE) MBR(*FIRST) RTNVAR(&amp;RESPONSE)

SNDPGMMSG MSG(&amp;RESPONSE)

ENDPGM</pre></div><div class='content'></div><h2><p>Explanation:</p>
</h2>
<div class='content'><ol>
<li><strong>Declare Variables</strong>: Define the URL, data to be sent, and a variable to store the response.</li>
<li><strong>QSH Command</strong>: Use the <code>QSH</code> command to execute a curl command that makes the POST request with the JSON data and saves the response to a temporary file.</li>
<li><strong>Retrieve Response</strong>: Read the response from the file and store it in a variable.</li>
<li><strong>Send Program Message</strong>: Display the response.</li>
</ol>
</div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'></div><h2><p>Common Mistakes:</p>
</h2>
<div class='content'><ul>
<li><strong>Incorrect URL</strong>: Ensure the URL is correct and accessible.</li>
<li><strong>Missing Headers</strong>: Some APIs require specific headers (e.g., Content-Type).</li>
<li><strong>Authentication</strong>: Ensure you include any necessary API keys or tokens.</li>
</ul>
</div><h2><p>Tips:</p>
</h2>
<div class='content'><ul>
<li><strong>Use Variables</strong>: Store URLs, data, and other parameters in variables for easier management.</li>
<li><strong>Error Handling</strong>: Implement error handling to manage failed API calls gracefully.</li>
<li><strong>Logging</strong>: Log API requests and responses for debugging and auditing purposes.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we learned how to use APIs within CL programs by making HTTP requests using the <code>QSH</code> command and curl. We covered both GET and POST requests, providing practical examples and exercises to reinforce the concepts. Understanding how to interact with APIs opens up a wide range of possibilities for integrating CL programs with other systems and services.</p>
<p>Next, we will explore how to interface with databases in the following module.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='06-02-interfacing-databases' title="Interfacing with Databases">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='06-04-network-communication' title="Network Communication">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
