<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Error Handling in CL (Control Language)</title>

    <link rel="alternate" href="https://campusempresa.com/mod/cl/error-handling" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/cl/error-handling" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/cl/error-handling" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/cl/error-handling" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/cl/error-handling" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='looping-constructs'>&#x25C4;Looping Constructs</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Error Handling in CL (Control Language)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='subroutines-procedures'>Subroutines and Procedures &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Error handling is a crucial aspect of programming in Control Language (CL) on IBM i systems. Proper error handling ensures that your programs can gracefully handle unexpected situations and provide meaningful feedback to users. This topic will guide you from the basics of error handling in CL to more advanced techniques.</p>
</div><h1>Introduction to Error Handling</h1>
<div class='content'><p>Error handling in CL involves detecting and responding to errors that occur during the execution of a CL program. This can include system errors, user errors, or unexpected conditions.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Error Messages</strong>: Messages generated by the system when an error occurs.</li>
<li><strong>Message Handling Commands</strong>: Commands used to handle messages, such as <code>MONMSG</code> (Monitor Message).</li>
<li><strong>Program Status Data Structure (PSDS)</strong>: A data structure that contains information about the program's status, including error information.</li>
</ul>
</div><h1>Basic Error Handling</h1>
<div class='content'></div><h2>Using MONMSG Command</h2>
<div class='content'><p>The <code>MONMSG</code> command is used to monitor for specific messages and take action when those messages are received.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICAvKiBBdHRlbXB0IHRvIGRlbGV0ZSBhIGZpbGUgKi8KICAgIERMVEYgRklMRShNWUxJQi9NWUZJTEUpCiAgICAvKiBNb25pdG9yIGZvciBmaWxlIG5vdCBmb3VuZCBlcnJvciAqLwogICAgTU9OTVNHIE1TR0lEKENQRjIxMDUpIEVYRUMoRE8pCiAgICAgICAgLyogSGFuZGxlIHRoZSBlcnJvciAqLwogICAgICAgIFNORFBHTU1TRyBNU0coJ0ZpbGUgbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgdGhlIGZpbGUgbmFtZS4nKQogICAgRU5ERE8KRU5EUEdN"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    /* Attempt to delete a file */
    DLTF FILE(MYLIB/MYFILE)
    /* Monitor for file not found error */
    MONMSG MSGID(CPF2105) EXEC(DO)
        /* Handle the error */
        SNDPGMMSG MSG('File not found. Please check the file name.')
    ENDDO
ENDPGM</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>The <code>DLTF</code> command attempts to delete a file.</li>
<li>The <code>MONMSG</code> command monitors for the <code>CPF2105</code> message, which indicates that the file was not found.</li>
<li>If the message is received, a program message is sent to inform the user.</li>
</ul>
</div><h1>Intermediate Error Handling</h1>
<div class='content'></div><h2>Using Multiple MONMSG Commands</h2>
<div class='content'><p>You can use multiple <code>MONMSG</code> commands to handle different errors in different ways.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICAvKiBBdHRlbXB0IHRvIGRlbGV0ZSBhIGZpbGUgKi8KICAgIERMVEYgRklMRShNWUxJQi9NWUZJTEUpCiAgICAvKiBNb25pdG9yIGZvciBmaWxlIG5vdCBmb3VuZCBlcnJvciAqLwogICAgTU9OTVNHIE1TR0lEKENQRjIxMDUpIEVYRUMoRE8pCiAgICAgICAgU05EUEdNTVNHIE1TRygnRmlsZSBub3QgZm91bmQuIFBsZWFzZSBjaGVjayB0aGUgZmlsZSBuYW1lLicpCiAgICBFTkRETwogICAgLyogTW9uaXRvciBmb3IgZmlsZSBpbiB1c2UgZXJyb3IgKi8KICAgIE1PTk1TRyBNU0dJRChDUEYyMTEwKSBFWEVDKERPKQogICAgICAgIFNORFBHTU1TRyBNU0coJ0ZpbGUgaXMgY3VycmVudGx5IGluIHVzZS4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nKQogICAgRU5ERE8KRU5EUEdN"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    /* Attempt to delete a file */
    DLTF FILE(MYLIB/MYFILE)
    /* Monitor for file not found error */
    MONMSG MSGID(CPF2105) EXEC(DO)
        SNDPGMMSG MSG('File not found. Please check the file name.')
    ENDDO
    /* Monitor for file in use error */
    MONMSG MSGID(CPF2110) EXEC(DO)
        SNDPGMMSG MSG('File is currently in use. Please try again later.')
    ENDDO
ENDPGM</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>Two <code>MONMSG</code> commands are used to handle different error messages (<code>CPF2105</code> and <code>CPF2110</code>).</li>
</ul>
</div><h2>Using Generic Message IDs</h2>
<div class='content'><p>You can use generic message IDs to handle a range of related errors.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICAvKiBBdHRlbXB0IHRvIGRlbGV0ZSBhIGZpbGUgKi8KICAgIERMVEYgRklMRShNWUxJQi9NWUZJTEUpCiAgICAvKiBNb25pdG9yIGZvciBhbnkgQ1BGMjF4eCBlcnJvciAqLwogICAgTU9OTVNHIE1TR0lEKENQRjIxIyMpIEVYRUMoRE8pCiAgICAgICAgU05EUEdNTVNHIE1TRygnQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgZGVsZXRpbmcgdGhlIGZpbGUuJykKICAgIEVORERPCkVORFBHTQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    /* Attempt to delete a file */
    DLTF FILE(MYLIB/MYFILE)
    /* Monitor for any CPF21xx error */
    MONMSG MSGID(CPF21##) EXEC(DO)
        SNDPGMMSG MSG('An error occurred while deleting the file.')
    ENDDO
ENDPGM</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>The <code>MONMSG</code> command uses the generic message ID <code>CPF21##</code> to handle any error in the <code>CPF21xx</code> range.</li>
</ul>
</div><h1>Advanced Error Handling</h1>
<div class='content'></div><h2>Using Program Status Data Structure (PSDS)</h2>
<div class='content'><p>The PSDS can be used to get detailed information about the error that occurred.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0wgJk1TR0lEICpDSEFSIDcKICAgIERDTCAmTVNHRFRBICpDSEFSIDI1NgogICAgRENMICZNU0dGICpDSEFSIDEwCgogICAgLyogRGVmaW5lIHRoZSBQU0RTICovCiAgICBEQ0xGIEZJTEUoUVNZUy9RQURTUFBHTSkKCiAgICAvKiBBdHRlbXB0IHRvIGRlbGV0ZSBhIGZpbGUgKi8KICAgIERMVEYgRklMRShNWUxJQi9NWUZJTEUpCiAgICAvKiBNb25pdG9yIGZvciBhbnkgZXJyb3IgKi8KICAgIE1PTk1TRyBNU0dJRChDUEYwMDAwKSBFWEVDKERPKQogICAgICAgIC8qIFJldHJpZXZlIHRoZSBtZXNzYWdlIElEIGFuZCBtZXNzYWdlIGRhdGEgKi8KICAgICAgICBSQ1ZNU0cgTVNHVFlQRSgqRElBRykgTVNHSUQoJk1TR0lEKSBNU0dEVEEoJk1TR0RUQSkgTVNHRigmTVNHRikKICAgICAgICAvKiBTZW5kIGEgcHJvZ3JhbSBtZXNzYWdlIHdpdGggdGhlIGVycm9yIGRldGFpbHMgKi8KICAgICAgICBTTkRQR01NU0cgTVNHKCdFcnJvcjogJyAqQ0FUICZNU0dJRCAqQkNBVCAmTVNHRFRBKQogICAgRU5ERE8KRU5EUEdN"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCL &amp;MSGID *CHAR 7
    DCL &amp;MSGDTA *CHAR 256
    DCL &amp;MSGF *CHAR 10

    /* Define the PSDS */
    DCLF FILE(QSYS/QADSPPGM)

    /* Attempt to delete a file */
    DLTF FILE(MYLIB/MYFILE)
    /* Monitor for any error */
    MONMSG MSGID(CPF0000) EXEC(DO)
        /* Retrieve the message ID and message data */
        RCVMSG MSGTYPE(*DIAG) MSGID(&amp;MSGID) MSGDTA(&amp;MSGDTA) MSGF(&amp;MSGF)
        /* Send a program message with the error details */
        SNDPGMMSG MSG('Error: ' *CAT &amp;MSGID *BCAT &amp;MSGDTA)
    ENDDO
ENDPGM</pre></div><div class='content'><p>In this example:</p>
<ul>
<li>The PSDS is used to retrieve detailed information about the error.</li>
<li>The <code>RCVMSG</code> command retrieves the message ID and message data.</li>
<li>A program message is sent with the error details.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Error handling in CL is essential for creating robust and user-friendly programs. By using commands like <code>MONMSG</code> and leveraging the PSDS, you can effectively manage errors and provide meaningful feedback to users. As you advance, you can create more sophisticated error handling mechanisms to cover a wide range of scenarios. Remember, good error handling not only improves the reliability of your programs but also enhances the user experience.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='looping-constructs'>&#x25C4;Looping Constructs</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Error Handling in CL (Control Language)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='subroutines-procedures'>Subroutines and Procedures &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
