<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subroutines and Procedures in CL (Control Language)</title>

    <link rel="alternate" href="https://campusempresa.com/mod/cl/subroutines-procedures" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/cl/subroutines-procedures" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/cl/subroutines-procedures" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/cl/subroutines-procedures" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/cl/subroutines-procedures" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='error-handling'>&#x25C4;Error Handling</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Subroutines and Procedures in CL (Control Language)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='advanced-file-operations'>Advanced File Operations &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Subroutines and Procedures</h1>
<div class='content'><p>Subroutines and procedures are fundamental concepts in Control Language (CL) that allow you to modularize your code, making it more readable, maintainable, and reusable. This section will guide you from the basics to advanced usage of subroutines and procedures in CL.</p>
</div><h1>Understanding Subroutines</h1>
<div class='content'><p>Subroutines in CL are blocks of code that perform specific tasks and can be called from different parts of a program. They help in breaking down complex tasks into simpler, manageable pieces.</p>
</div><h2>Key Concepts of Subroutines</h2>
<div class='content'><ul>
<li><strong>Definition</strong>: A subroutine is defined within a CL program using the <code>SUBR</code> command.</li>
<li><strong>Calling a Subroutine</strong>: Use the <code>CALLSUBR</code> command to invoke a subroutine.</li>
<li><strong>Returning from a Subroutine</strong>: Use the <code>RTNSUBR</code> command to return control to the calling program.</li>
</ul>
</div><h2>Example of a Simple Subroutine</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0wgVkFSKCZNU0cpIFRZUEUoKkNIQVIpIExFTig1MCkKICAgIAogICAgQ0FMTFNVQlIgU1VCUihNWV9TVUJST1VUSU5FKQogICAgCiAgICAvKiBNYWluIHByb2dyYW0gY29udGludWVzIGhlcmUgKi8KICAgIFNORFBHTU1TRyBNU0coJk1TRykKICAgIEVORFBHTQoKU1VCUiBNWV9TVUJST1VUSU5FCiAgICBDSEdWQVIgVkFSKCZNU0cpIFZBTFVFKCdIZWxsbyBmcm9tIHRoZSBzdWJyb3V0aW5lIScpCiAgICBSVE5TVUJS"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCL VAR(&amp;MSG) TYPE(*CHAR) LEN(50)
    
    CALLSUBR SUBR(MY_SUBROUTINE)
    
    /* Main program continues here */
    SNDPGMMSG MSG(&amp;MSG)
    ENDPGM

SUBR MY_SUBROUTINE
    CHGVAR VAR(&amp;MSG) VALUE('Hello from the subroutine!')
    RTNSUBR</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>DCL VAR(&amp;MSG) TYPE(*CHAR) LEN(50)</code>: Declares a variable <code>&amp;MSG</code>.</li>
<li><code>CALLSUBR SUBR(MY_SUBROUTINE)</code>: Calls the subroutine named <code>MY_SUBROUTINE</code>.</li>
<li><code>CHGVAR VAR(&amp;MSG) VALUE('Hello from the subroutine!')</code>: Changes the value of <code>&amp;MSG</code> within the subroutine.</li>
<li><code>RTNSUBR</code>: Returns control to the main program.</li>
</ul>
</li>
</ul>
</div><h1>Procedures in CL</h1>
<div class='content'><p>Procedures are similar to subroutines but offer more flexibility and functionality. They can accept parameters, return values, and are defined outside the main program.</p>
</div><h2>Key Concepts of Procedures</h2>
<div class='content'><ul>
<li><strong>Definition</strong>: Procedures are defined using the <code>PROC</code> command.</li>
<li><strong>Calling a Procedure</strong>: Use the <code>CALLPRC</code> command to invoke a procedure.</li>
<li><strong>Returning from a Procedure</strong>: Use the <code>RETURN</code> command to return a value from a procedure.</li>
</ul>
</div><h2>Example of a Simple Procedure</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0wgVkFSKCZSRVNVTFQpIFRZUEUoKkRFQykgTEVOKDUgMikKICAgIAogICAgQ0FMTFBSQyBQUkMoQ0FMQ1VMQVRFX1NVTSkgUEFSTSgxMCAyMCkgUlROVkFMKCZSRVNVTFQpCiAgICAKICAgIC8qIE1haW4gcHJvZ3JhbSBjb250aW51ZXMgaGVyZSAqLwogICAgU05EUEdNTVNHIE1TRygnVGhlIHN1bSBpcyAnICpDQVQgJlJFU1VMVCkKICAgIEVORFBHTQoKUFJPQyBDQUxDVUxBVEVfU1VNCiAgICBEQ0wgVkFSKCZOVU0xKSBUWVBFKCpERUMpIExFTig1IDIpCiAgICBEQ0wgVkFSKCZOVU0yKSBUWVBFKCpERUMpIExFTig1IDIpCiAgICBEQ0wgVkFSKCZTVU0pIFRZUEUoKkRFQykgTEVOKDUgMikKICAgIAogICAgLyogUmV0cmlldmUgcGFyYW1ldGVycyAqLwogICAgQ0hHVkFSIFZBUigmTlVNMSkgVkFMVUUoJVBBUk0oMSkpCiAgICBDSEdWQVIgVkFSKCZOVU0yKSBWQUxVRSglUEFSTSgyKSkKICAgIAogICAgLyogQ2FsY3VsYXRlIHN1bSAqLwogICAgQ0hHVkFSIFZBUigmU1VNKSBWQUxVRSgmTlVNMSArICZOVU0yKQogICAgCiAgICAvKiBSZXR1cm4gdGhlIHJlc3VsdCAqLwogICAgUkVUVVJOIFZBTFVFKCZTVU0p"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCL VAR(&amp;RESULT) TYPE(*DEC) LEN(5 2)
    
    CALLPRC PRC(CALCULATE_SUM) PARM(10 20) RTNVAL(&amp;RESULT)
    
    /* Main program continues here */
    SNDPGMMSG MSG('The sum is ' *CAT &amp;RESULT)
    ENDPGM

PROC CALCULATE_SUM
    DCL VAR(&amp;NUM1) TYPE(*DEC) LEN(5 2)
    DCL VAR(&amp;NUM2) TYPE(*DEC) LEN(5 2)
    DCL VAR(&amp;SUM) TYPE(*DEC) LEN(5 2)
    
    /* Retrieve parameters */
    CHGVAR VAR(&amp;NUM1) VALUE(%PARM(1))
    CHGVAR VAR(&amp;NUM2) VALUE(%PARM(2))
    
    /* Calculate sum */
    CHGVAR VAR(&amp;SUM) VALUE(&amp;NUM1 + &amp;NUM2)
    
    /* Return the result */
    RETURN VALUE(&amp;SUM)</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>DCL VAR(&amp;RESULT) TYPE(*DEC) LEN(5 2)</code>: Declares a variable <code>&amp;RESULT</code>.</li>
<li><code>CALLPRC PRC(CALCULATE_SUM) PARM(10 20) RTNVAL(&amp;RESULT)</code>: Calls the procedure <code>CALCULATE_SUM</code> with parameters 10 and 20, and stores the returned value in <code>&amp;RESULT</code>.</li>
<li><code>DCL VAR(&amp;NUM1) TYPE(*DEC) LEN(5 2)</code>: Declares a variable <code>&amp;NUM1</code> within the procedure.</li>
<li><code>CHGVAR VAR(&amp;NUM1) VALUE(%PARM(1))</code>: Retrieves the first parameter.</li>
<li><code>CHGVAR VAR(&amp;SUM) VALUE(&amp;NUM1 + &amp;NUM2)</code>: Calculates the sum of <code>&amp;NUM1</code> and <code>&amp;NUM2</code>.</li>
<li><code>RETURN VALUE(&amp;SUM)</code>: Returns the calculated sum.</li>
</ul>
</li>
</ul>
</div><h1>Advanced Usage of Subroutines and Procedures</h1>
<h2>Passing Parameters to Subroutines</h2>
<div class='content'><p>While subroutines in CL do not natively support parameter passing like procedures, you can use global variables to share data between the main program and subroutines.</p>
</div><h2>Example with Global Variables</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0wgVkFSKCZOVU0xKSBUWVBFKCpERUMpIExFTig1IDIpIFZBTFVFKDE1KQogICAgRENMIFZBUigmTlVNMikgVFlQRSgqREVDKSBMRU4oNSAyKSBWQUxVRSgyNSkKICAgIERDTCBWQVIoJlNVTSkgVFlQRSgqREVDKSBMRU4oNSAyKQogICAgCiAgICBDQUxMU1VCUiBTVUJSKENBTENVTEFURV9TVU0pCiAgICAKICAgIC8qIE1haW4gcHJvZ3JhbSBjb250aW51ZXMgaGVyZSAqLwogICAgU05EUEdNTVNHIE1TRygnVGhlIHN1bSBpcyAnICpDQVQgJlNVTSkKICAgIEVORFBHTQoKU1VCUiBDQUxDVUxBVEVfU1VNCiAgICBDSEdWQVIgVkFSKCZTVU0pIFZBTFVFKCZOVU0xICsgJk5VTTIpCiAgICBSVE5TVUJS"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCL VAR(&amp;NUM1) TYPE(*DEC) LEN(5 2) VALUE(15)
    DCL VAR(&amp;NUM2) TYPE(*DEC) LEN(5 2) VALUE(25)
    DCL VAR(&amp;SUM) TYPE(*DEC) LEN(5 2)
    
    CALLSUBR SUBR(CALCULATE_SUM)
    
    /* Main program continues here */
    SNDPGMMSG MSG('The sum is ' *CAT &amp;SUM)
    ENDPGM

SUBR CALCULATE_SUM
    CHGVAR VAR(&amp;SUM) VALUE(&amp;NUM1 + &amp;NUM2)
    RTNSUBR</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li>Global variables <code>&amp;NUM1</code>, <code>&amp;NUM2</code>, and <code>&amp;SUM</code> are declared in the main program.</li>
<li>The subroutine <code>CALCULATE_SUM</code> accesses these global variables to perform the calculation.</li>
</ul>
</li>
</ul>
</div><h1>Summary</h1>
<div class='content'><ul>
<li><strong>Subroutines</strong>: Useful for modularizing code within a single CL program. They are defined using <code>SUBR</code> and called with <code>CALLSUBR</code>.</li>
<li><strong>Procedures</strong>: More flexible than subroutines, allowing parameter passing and returning values. Defined using <code>PROC</code> and called with <code>CALLPRC</code>.</li>
<li><strong>Advanced Techniques</strong>: Use global variables to pass data to subroutines, and leverage procedures for more complex tasks requiring parameter passing and return values.</li>
</ul>
<p>Understanding and utilizing subroutines and procedures effectively can greatly enhance the structure and maintainability of your CL programs.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='error-handling'>&#x25C4;Error Handling</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Subroutines and Procedures in CL (Control Language)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='advanced-file-operations'>Advanced File Operations &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
