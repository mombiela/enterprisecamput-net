<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creating Custom Commands</title>

    <link rel="alternate" href="https://campusempresa.com/mod/cl/creating-custom-commands" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/cl/creating-custom-commands" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/cl/creating-custom-commands" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/cl/creating-custom-commands" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/cl/creating-custom-commands" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='automating-system-tasks'>&#x25C4;Automating System Tasks</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Creating Custom Commands</a>
	</div>
	<div class='col-4 text-end'>
					<a href='integrating-databases'>Integrating with Databases &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Creating custom commands in Control Language (CL) allows you to extend the functionality of your IBM i system by defining new commands that can simplify complex tasks, automate processes, and improve productivity. This topic will guide you through the process of creating custom commands from a beginner to an advanced level.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Command Definition</strong>: The process of specifying the syntax and parameters of a new command.</li>
<li><strong>Command Processing Program (CPP)</strong>: The program that executes when the command is run.</li>
<li><strong>Command Source File</strong>: A source file where the command definition is stored.</li>
<li><strong>Parameter Definition</strong>: Specifying the parameters that the command will accept.</li>
</ul>
</div><h1>Beginner Level</h1>
<div class='content'></div><h2>Creating a Simple Command</h2>
<div class='content'><p>To create a simple custom command, follow these steps:</p>
<ol>
<li>
<p><strong>Create a Source Physical File</strong>:</p>
<pre><code class="language-cl">CRTSRCPF FILE(QGPL/QCMDSRC) RCDLEN(112)
</code></pre>
<p>This command creates a source physical file named QCMDSRC in the QGPL library with a record length of 112.</p>
</li>
<li>
<p><strong>Add a Member to the Source File</strong>:</p>
<pre><code class="language-cl">ADDPFM FILE(QGPL/QCMDSRC) MBR(MYCMD) SRCTYPE(CMD)
</code></pre>
<p>This command adds a member named MYCMD to the QCMDSRC file with a source type of CMD.</p>
</li>
<li>
<p><strong>Edit the Command Source</strong>:
Use the Source Entry Utility (SEU) or another editor to enter the command definition:</p>
<pre><code class="language-plaintext">CMD        PROMPT('My Custom Command')
PARM       KWD(MSG) TYPE(*CHAR) LEN(50) PROMPT('Message')
</code></pre>
<p>This defines a command named MYCMD with a single parameter MSG, which is a 50-character string.</p>
</li>
<li>
<p><strong>Create the Command</strong>:</p>
<pre><code class="language-cl">CRTCMD CMD(QGPL/MYCMD) PGM(QGPL/MYPGM) SRCFILE(QGPL/QCMDSRC)
</code></pre>
<p>This command creates the custom command MYCMD in the QGPL library and associates it with a command processing program (CPP) named MYPGM.</p>
</li>
</ol>
</div><h2>Writing the Command Processing Program</h2>
<div class='content'><p>Create a simple CL program to process the command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNICAgICAgICBQQVJNKCZNU0cpCkRDTCAgICAgICAgVkFSKCZNU0cpIFRZUEUoKkNIQVIpIExFTig1MCkKU05EUEdNTVNHICBNU0coJk1TRykKRU5EUEdN"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM        PARM(&amp;MSG)
DCL        VAR(&amp;MSG) TYPE(*CHAR) LEN(50)
SNDPGMMSG  MSG(&amp;MSG)
ENDPGM</pre></div><div class='content'><p>This program takes the MSG parameter and sends it as a program message.</p>
</div><h1>Intermediate Level</h1>
<div class='content'></div><h2>Adding Multiple Parameters</h2>
<div class='content'><p>Enhance your command by adding more parameters:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q01EICAgICAgICBQUk9NUFQoJ0VuaGFuY2VkIEN1c3RvbSBDb21tYW5kJykKUEFSTSAgICAgICBLV0QoTVNHKSBUWVBFKCpDSEFSKSBMRU4oNTApIFBST01QVCgnTWVzc2FnZScpClBBUk0gICAgICAgS1dEKFVTRVIpIFRZUEUoKk5BTUUpIFBST01QVCgnVXNlciBOYW1lJyk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CMD        PROMPT('Enhanced Custom Command')
PARM       KWD(MSG) TYPE(*CHAR) LEN(50) PROMPT('Message')
PARM       KWD(USER) TYPE(*NAME) PROMPT('User Name')</pre></div><div class='content'><p>This command now accepts a message and a user name.</p>
</div><h2>Conditional Logic in CPP</h2>
<div class='content'><p>Modify the CPP to include conditional logic:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNICAgICAgICBQQVJNKCZNU0cgJlVTRVIpCkRDTCAgICAgICAgVkFSKCZNU0cpIFRZUEUoKkNIQVIpIExFTig1MCkKRENMICAgICAgICBWQVIoJlVTRVIpIFRZUEUoKk5BTUUpCklGICAgICAgICAgQ09ORCgmVVNFUiAqTkUgJycpIFRIRU4oRE8pCiAgIFNORFBHTU1TRyAgTVNHKCdIZWxsbyAnICpDQVQgJlVTRVIgKlRDQVQgJyAtICcgKkNBVCAmTVNHKQpFTkRETwpFTFNFICAgICAgIENNRChTTkRQR01NU0cgTVNHKCZNU0cpKQpFTkRQR00="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM        PARM(&amp;MSG &amp;USER)
DCL        VAR(&amp;MSG) TYPE(*CHAR) LEN(50)
DCL        VAR(&amp;USER) TYPE(*NAME)
IF         COND(&amp;USER *NE '') THEN(DO)
   SNDPGMMSG  MSG('Hello ' *CAT &amp;USER *TCAT ' - ' *CAT &amp;MSG)
ENDDO
ELSE       CMD(SNDPGMMSG MSG(&amp;MSG))
ENDPGM</pre></div><div class='content'><p>This program sends a personalized message if the USER parameter is provided.</p>
</div><h1>Advanced Level</h1>
<div class='content'></div><h2>Using Command Processing Exit Programs</h2>
<div class='content'><p>Create a command processing exit program to handle more complex scenarios:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q01EICAgICAgICBQUk9NUFQoJ0FkdmFuY2VkIEN1c3RvbSBDb21tYW5kJykKUEFSTSAgICAgICBLV0QoTVNHKSBUWVBFKCpDSEFSKSBMRU4oNTApIFBST01QVCgnTWVzc2FnZScpClBBUk0gICAgICAgS1dEKFVTRVIpIFRZUEUoKk5BTUUpIFBST01QVCgnVXNlciBOYW1lJykKUEFSTSAgICAgICBLV0QoT1BUSU9OKSBUWVBFKCpDSEFSKSBMRU4oMTApIFZBTFVFUygnSU5GTycgJ1dBUk4nICdFUlJPUicpIFBST01QVCgnT3B0aW9uJyk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CMD        PROMPT('Advanced Custom Command')
PARM       KWD(MSG) TYPE(*CHAR) LEN(50) PROMPT('Message')
PARM       KWD(USER) TYPE(*NAME) PROMPT('User Name')
PARM       KWD(OPTION) TYPE(*CHAR) LEN(10) VALUES('INFO' 'WARN' 'ERROR') PROMPT('Option')</pre></div><div class='content'><p>This command includes an OPTION parameter with predefined values.</p>
</div><h2>Advanced CPP with Exit Program</h2>
<div class='content'><p>Write an advanced CPP that uses an exit program:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNICAgICAgICBQQVJNKCZNU0cgJlVTRVIgJk9QVElPTikKRENMICAgICAgICBWQVIoJk1TRykgVFlQRSgqQ0hBUikgTEVOKDUwKQpEQ0wgICAgICAgIFZBUigmVVNFUikgVFlQRSgqTkFNRSkKRENMICAgICAgICBWQVIoJk9QVElPTikgVFlQRSgqQ0hBUikgTEVOKDEwKQoKSUYgICAgICAgICBDT05EKCZPUFRJT04gKkVRICdJTkZPJykgVEhFTihETykKICAgU05EUEdNTVNHICBNU0coJ0lORk86ICcgKkNBVCAmTVNHKQpFTkRETwpFTFNFSUYgICAgIENPTkQoJk9QVElPTiAqRVEgJ1dBUk4nKSBUSEVOKERPKQogICBTTkRQR01NU0cgIE1TRygnV0FSTklORzogJyAqQ0FUICZNU0cpCkVORERPCkVMU0VJRiAgICAgQ09ORCgmT1BUSU9OICpFUSAnRVJST1InKSBUSEVOKERPKQogICBTTkRQR01NU0cgIE1TRygnRVJST1I6ICcgKkNBVCAmTVNHKQpFTkRETwoKSUYgICAgICAgICBDT05EKCZVU0VSICpORSAnJykgVEhFTihETykKICAgU05EUEdNTVNHICBNU0coJ1VzZXI6ICcgKkNBVCAmVVNFUikKRU5ERE8KCkVORFBHTQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM        PARM(&amp;MSG &amp;USER &amp;OPTION)
DCL        VAR(&amp;MSG) TYPE(*CHAR) LEN(50)
DCL        VAR(&amp;USER) TYPE(*NAME)
DCL        VAR(&amp;OPTION) TYPE(*CHAR) LEN(10)

IF         COND(&amp;OPTION *EQ 'INFO') THEN(DO)
   SNDPGMMSG  MSG('INFO: ' *CAT &amp;MSG)
ENDDO
ELSEIF     COND(&amp;OPTION *EQ 'WARN') THEN(DO)
   SNDPGMMSG  MSG('WARNING: ' *CAT &amp;MSG)
ENDDO
ELSEIF     COND(&amp;OPTION *EQ 'ERROR') THEN(DO)
   SNDPGMMSG  MSG('ERROR: ' *CAT &amp;MSG)
ENDDO

IF         COND(&amp;USER *NE '') THEN(DO)
   SNDPGMMSG  MSG('User: ' *CAT &amp;USER)
ENDDO

ENDPGM</pre></div><div class='content'><p>This program processes the OPTION parameter to send different types of messages.</p>
</div><h1>Conclusion</h1>
<div class='content'><p>Creating custom commands in CL can significantly enhance the functionality and usability of your IBM i system. Starting with simple commands and gradually incorporating more complex logic and parameters allows you to tailor commands to meet specific needs. By mastering these techniques, you can automate tasks, enforce standards, and improve overall system efficiency.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='automating-system-tasks'>&#x25C4;Automating System Tasks</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Creating Custom Commands</a>
	</div>
	<div class='col-4 text-end'>
					<a href='integrating-databases'>Integrating with Databases &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
