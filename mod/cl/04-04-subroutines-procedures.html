<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive">
    <title>Subroutines and Procedures</title>

    <link rel="alternate" href="https://campusempresa.com/mod/cl/04-04-subroutines-procedures" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/cl/04-04-subroutines-procedures" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/cl/04-04-subroutines-procedures" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css?v=4" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
	</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
			<span>	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/cl/04-04-subroutines-procedures" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/cl/04-04-subroutines-procedures" class="px-2">CA</a>
</span>
			<span class="d-none d-md-inline"><br><cite>All the knowledge within your reach</cite></span>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
					 				<a href="/"><i class="bi bi-house-fill"></i> HOME</a>
											</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-03-error-handling' title="Error Handling">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Subroutines and Procedures</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-01-advanced-file-operations' title="Advanced File Operations">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will delve into subroutines and procedures in Control Language (CL). Subroutines and procedures are essential for creating modular, reusable, and maintainable code. They allow you to break down complex tasks into smaller, manageable pieces.</p>
</div><h1>What are Subroutines and Procedures?</h1>
<div class='content'><ul>
<li><strong>Subroutines</strong>: A subroutine is a block of code that performs a specific task and can be called from different parts of a program. Subroutines help in reducing code duplication and improving readability.</li>
<li><strong>Procedures</strong>: Procedures are similar to subroutines but are more formalized. They can accept parameters, return values, and are often used to encapsulate complex logic.</li>
</ul>
</div><h1>Defining a Subroutine</h1>
<div class='content'><p>To define a subroutine in CL, you use the <code>SUBR</code> command. Here is a basic example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0wgVkFSKCZSRVNVTFQpIFRZUEUoKkRFQykgTEVOKDUgMCkKICAgIENBTExTVUJSIFNVQlIoTVlfU1VCUk9VVElORSkKICAgIFNORFBHTU1TRyBNU0coJ1Jlc3VsdDogJyAqQ0FUICZSRVNVTFQpCiAgICBFTkRQR00KClNVQlIgTVlfU1VCUk9VVElORQogICAgRENMIFZBUigmQSkgVFlQRSgqREVDKSBMRU4oNSAwKSBWQUxVRSgxMCkKICAgIERDTCBWQVIoJkIpIFRZUEUoKkRFQykgTEVOKDUgMCkgVkFMVUUoMjApCiAgICBDSEdWQVIgVkFSKCZSRVNVTFQpIFZBTFVFKCZBICsgJkIpCiAgICBFTkRTVUJS"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCL VAR(&amp;RESULT) TYPE(*DEC) LEN(5 0)
    CALLSUBR SUBR(MY_SUBROUTINE)
    SNDPGMMSG MSG('Result: ' *CAT &amp;RESULT)
    ENDPGM

SUBR MY_SUBROUTINE
    DCL VAR(&amp;A) TYPE(*DEC) LEN(5 0) VALUE(10)
    DCL VAR(&amp;B) TYPE(*DEC) LEN(5 0) VALUE(20)
    CHGVAR VAR(&amp;RESULT) VALUE(&amp;A + &amp;B)
    ENDSUBR</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>PGM</strong>: Marks the beginning of the main program.</li>
<li><strong>DCL</strong>: Declares a variable <code>&amp;RESULT</code> to store the result.</li>
<li><strong>CALLSUBR</strong>: Calls the subroutine <code>MY_SUBROUTINE</code>.</li>
<li><strong>SNDPGMMSG</strong>: Sends a program message displaying the result.</li>
<li><strong>ENDPGM</strong>: Marks the end of the main program.</li>
<li><strong>SUBR</strong>: Defines the subroutine <code>MY_SUBROUTINE</code>.</li>
<li><strong>CHGVAR</strong>: Changes the value of <code>&amp;RESULT</code> to the sum of <code>&amp;A</code> and <code>&amp;B</code>.</li>
<li><strong>ENDSUBR</strong>: Marks the end of the subroutine.</li>
</ul>
</div><h1>Defining a Procedure</h1>
<div class='content'><p>Procedures in CL are defined using the <code>PROC</code> command. Here is an example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0wgVkFSKCZSRVNVTFQpIFRZUEUoKkRFQykgTEVOKDUgMCkKICAgIENBTExQUk9DIFBST0MoTVlfUFJPQ0VEVVJFKSBQQVJNKCZSRVNVTFQpCiAgICBTTkRQR01NU0cgTVNHKCdSZXN1bHQ6ICcgKkNBVCAmUkVTVUxUKQogICAgRU5EUEdNCgpQUk9DIE1ZX1BST0NFRFVSRQogICAgRENMIFZBUigmUkVTVUxUKSBUWVBFKCpERUMpIExFTig1IDApCiAgICBEQ0wgVkFSKCZBKSBUWVBFKCpERUMpIExFTig1IDApIFZBTFVFKDEwKQogICAgRENMIFZBUigmQikgVFlQRSgqREVDKSBMRU4oNSAwKSBWQUxVRSgyMCkKICAgIENIR1ZBUiBWQVIoJlJFU1VMVCkgVkFMVUUoJkEgKyAmQikKICAgIFJFVFVSTgpFTkRQUk9D"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCL VAR(&amp;RESULT) TYPE(*DEC) LEN(5 0)
    CALLPROC PROC(MY_PROCEDURE) PARM(&amp;RESULT)
    SNDPGMMSG MSG('Result: ' *CAT &amp;RESULT)
    ENDPGM

PROC MY_PROCEDURE
    DCL VAR(&amp;RESULT) TYPE(*DEC) LEN(5 0)
    DCL VAR(&amp;A) TYPE(*DEC) LEN(5 0) VALUE(10)
    DCL VAR(&amp;B) TYPE(*DEC) LEN(5 0) VALUE(20)
    CHGVAR VAR(&amp;RESULT) VALUE(&amp;A + &amp;B)
    RETURN
ENDPROC</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>PGM</strong>: Marks the beginning of the main program.</li>
<li><strong>DCL</strong>: Declares a variable <code>&amp;RESULT</code> to store the result.</li>
<li><strong>CALLPROC</strong>: Calls the procedure <code>MY_PROCEDURE</code> and passes <code>&amp;RESULT</code> as a parameter.</li>
<li><strong>SNDPGMMSG</strong>: Sends a program message displaying the result.</li>
<li><strong>ENDPGM</strong>: Marks the end of the main program.</li>
<li><strong>PROC</strong>: Defines the procedure <code>MY_PROCEDURE</code>.</li>
<li><strong>RETURN</strong>: Returns control to the calling program.</li>
<li><strong>ENDPROC</strong>: Marks the end of the procedure.</li>
</ul>
</div><h1>Practical Exercise</h1>
<div class='content'></div><h2>Exercise 1: Create a Subroutine</h2>
<div class='content'><ol>
<li>Write a CL program that defines a subroutine to calculate the factorial of a number.</li>
<li>The main program should call the subroutine and display the result.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0wgVkFSKCZOVU1CRVIpIFRZUEUoKkRFQykgTEVOKDUgMCkgVkFMVUUoNSkKICAgIERDTCBWQVIoJkZBQ1RPUklBTCkgVFlQRSgqREVDKSBMRU4oMTAgMCkKICAgIENBTExTVUJSIFNVQlIoQ0FMQ19GQUNUT1JJQUwpCiAgICBTTkRQR01NU0cgTVNHKCdGYWN0b3JpYWw6ICcgKkNBVCAmRkFDVE9SSUFMKQogICAgRU5EUEdNCgpTVUJSIENBTENfRkFDVE9SSUFMCiAgICBEQ0wgVkFSKCZJKSBUWVBFKCpERUMpIExFTig1IDApCiAgICBEQ0wgVkFSKCZSRVNVTFQpIFRZUEUoKkRFQykgTEVOKDEwIDApIFZBTFVFKDEpCiAgICBGT1IgJkkgRlJPTSgxKSBUTygmTlVNQkVSKSBCWSgxKQogICAgICAgIENIR1ZBUiBWQVIoJlJFU1VMVCkgVkFMVUUoJlJFU1VMVCAqICZJKQogICAgRU5ERk9SCiAgICBDSEdWQVIgVkFSKCZGQUNUT1JJQUwpIFZBTFVFKCZSRVNVTFQpCiAgICBFTkRTVUJS"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCL VAR(&amp;NUMBER) TYPE(*DEC) LEN(5 0) VALUE(5)
    DCL VAR(&amp;FACTORIAL) TYPE(*DEC) LEN(10 0)
    CALLSUBR SUBR(CALC_FACTORIAL)
    SNDPGMMSG MSG('Factorial: ' *CAT &amp;FACTORIAL)
    ENDPGM

SUBR CALC_FACTORIAL
    DCL VAR(&amp;I) TYPE(*DEC) LEN(5 0)
    DCL VAR(&amp;RESULT) TYPE(*DEC) LEN(10 0) VALUE(1)
    FOR &amp;I FROM(1) TO(&amp;NUMBER) BY(1)
        CHGVAR VAR(&amp;RESULT) VALUE(&amp;RESULT * &amp;I)
    ENDFOR
    CHGVAR VAR(&amp;FACTORIAL) VALUE(&amp;RESULT)
    ENDSUBR</pre></div><div class='content'></div><h2>Solution Explanation</h2>
<div class='content'><ul>
<li><strong>FOR</strong>: Loop from 1 to the value of <code>&amp;NUMBER</code>.</li>
<li><strong>CHGVAR</strong>: Multiply <code>&amp;RESULT</code> by the loop variable <code>&amp;I</code> in each iteration.</li>
<li><strong>ENDFOR</strong>: End of the loop.</li>
<li><strong>CHGVAR</strong>: Assign the final result to <code>&amp;FACTORIAL</code>.</li>
</ul>
</div><h2>Exercise 2: Create a Procedure</h2>
<div class='content'><ol>
<li>Write a CL program that defines a procedure to check if a number is prime.</li>
<li>The main program should call the procedure and display the result.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0wgVkFSKCZOVU1CRVIpIFRZUEUoKkRFQykgTEVOKDUgMCkgVkFMVUUoNykKICAgIERDTCBWQVIoJklTX1BSSU1FKSBUWVBFKCpDSEFSKSBMRU4oMykKICAgIENBTExQUk9DIFBST0MoQ0hFQ0tfUFJJTUUpIFBBUk0oJk5VTUJFUiAmSVNfUFJJTUUpCiAgICBTTkRQR01NU0cgTVNHKCdJcyBQcmltZTogJyAqQ0FUICZJU19QUklNRSkKICAgIEVORFBHTQoKUFJPQyBDSEVDS19QUklNRQogICAgRENMIFZBUigmTlVNQkVSKSBUWVBFKCpERUMpIExFTig1IDApCiAgICBEQ0wgVkFSKCZJU19QUklNRSkgVFlQRSgqQ0hBUikgTEVOKDMpCiAgICBEQ0wgVkFSKCZJKSBUWVBFKCpERUMpIExFTig1IDApCiAgICBEQ0wgVkFSKCZGTEFHKSBUWVBFKCpDSEFSKSBMRU4oMykgVkFMVUUoJ1lFUycpCiAgICBGT1IgJkkgRlJPTSgyKSBUTygmTlVNQkVSIC0gMSkgQlkoMSkKICAgICAgICBJRiBDT05EKCZOVU1CRVIgLyAmSSAqICZJID0gJk5VTUJFUikgVEhFTihETykKICAgICAgICAgICAgQ0hHVkFSIFZBUigmRkxBRykgVkFMVUUoJ05PJykKICAgICAgICAgICAgTEVBVkUKICAgICAgICBFTkRETwogICAgRU5ERk9SCiAgICBDSEdWQVIgVkFSKCZJU19QUklNRSkgVkFMVUUoJkZMQUcpCiAgICBSRVRVUk4KRU5EUFJPQw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCL VAR(&amp;NUMBER) TYPE(*DEC) LEN(5 0) VALUE(7)
    DCL VAR(&amp;IS_PRIME) TYPE(*CHAR) LEN(3)
    CALLPROC PROC(CHECK_PRIME) PARM(&amp;NUMBER &amp;IS_PRIME)
    SNDPGMMSG MSG('Is Prime: ' *CAT &amp;IS_PRIME)
    ENDPGM

PROC CHECK_PRIME
    DCL VAR(&amp;NUMBER) TYPE(*DEC) LEN(5 0)
    DCL VAR(&amp;IS_PRIME) TYPE(*CHAR) LEN(3)
    DCL VAR(&amp;I) TYPE(*DEC) LEN(5 0)
    DCL VAR(&amp;FLAG) TYPE(*CHAR) LEN(3) VALUE('YES')
    FOR &amp;I FROM(2) TO(&amp;NUMBER - 1) BY(1)
        IF COND(&amp;NUMBER / &amp;I * &amp;I = &amp;NUMBER) THEN(DO)
            CHGVAR VAR(&amp;FLAG) VALUE('NO')
            LEAVE
        ENDDO
    ENDFOR
    CHGVAR VAR(&amp;IS_PRIME) VALUE(&amp;FLAG)
    RETURN
ENDPROC</pre></div><div class='content'></div><h2>Solution Explanation</h2>
<div class='content'><ul>
<li><strong>FOR</strong>: Loop from 2 to <code>&amp;NUMBER - 1</code>.</li>
<li><strong>IF</strong>: Check if <code>&amp;NUMBER</code> is divisible by <code>&amp;I</code>.</li>
<li><strong>CHGVAR</strong>: Set <code>&amp;FLAG</code> to 'NO' if <code>&amp;NUMBER</code> is not prime.</li>
<li><strong>LEAVE</strong>: Exit the loop if a divisor is found.</li>
<li><strong>CHGVAR</strong>: Assign the final result to <code>&amp;IS_PRIME</code>.</li>
</ul>
</div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Variable Scope</strong>: Ensure variables are declared in the correct scope. Variables declared inside a subroutine or procedure are local to that block.</li>
<li><strong>Parameter Passing</strong>: When using procedures, ensure parameters are passed correctly and match the expected types and lengths.</li>
<li><strong>Error Handling</strong>: Always include error handling to manage unexpected conditions gracefully.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered the basics of subroutines and procedures in CL. We learned how to define and call subroutines and procedures, and we practiced with exercises to reinforce these concepts. Understanding subroutines and procedures is crucial for writing modular and maintainable CL programs. In the next section, we will explore advanced file operations to further enhance your CL programming skills.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-03-error-handling' title="Error Handling">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-01-advanced-file-operations' title="Advanced File Operations">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<!-- 
<h1>Advertising</h1>
<p>This space is reserved for advertising.</p>
<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
<p>Thank you for collaborating!</p>
-->

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725"
     crossorigin="anonymous"></script>
<!-- enterprise_campus -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0611338592562725"
     data-ad-slot="6914733106"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
			









		</div>
	</div>
</div>

<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
