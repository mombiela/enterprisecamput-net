<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automating System Tasks</title>

    <link rel="alternate" href="https://campusempresa.com/mod/cl/automating-system-tasks" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/cl/automating-system-tasks" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/cl/automating-system-tasks" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/cl/automating-system-tasks" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/cl/automating-system-tasks" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='performance-optimization'>&#x25C4;Performance Optimization</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Automating System Tasks</a>
	</div>
	<div class='col-4 text-end'>
					<a href='creating-custom-commands'>Creating Custom Commands &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to CL (Control Language)</h1>
<div class='content'><p>Control Language (CL) is a scripting language used on IBM's AS/400 (now IBM i) systems. It is designed to control system operations, automate tasks, and manage system resources. This topic will guide you from the basics of CL to advanced automation techniques.</p>
</div><h1>Getting Started with CL</h1>
<div class='content'><p>Before diving into automation, it's essential to understand the basics of CL.</p>
</div><h2>Basic Syntax and Commands</h2>
<div class='content'><ul>
<li><strong>Commands</strong>: CL commands are the building blocks of scripts. Each command performs a specific task.</li>
<li><strong>Parameters</strong>: Commands often have parameters that specify details about how the command should be executed.</li>
</ul>
<h4>Example: Displaying a Message</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RFNQTVNHIE1TR1EoKlNZU09QUik="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DSPMSG MSGQ(*SYSOPR)</pre></div><div class='content'><p>This command displays messages from the system operator message queue.</p>
</div><h2>Creating a Simple CL Program</h2>
<div class='content'><p>A CL program is a sequence of CL commands saved in a source member.</p>
<h4>Example: Hello World Program</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0wgVkFSKCZNU0cpIFRZUEUoKkNIQVIpIExFTig1MCkKICAgIENIR1ZBUiBWQVIoJk1TRykgVkFMVUUoJ0hlbGxvLCBXb3JsZCEnKQogICAgU05EUEdNTVNHIE1TRygmTVNHKQpFTkRQR00="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCL VAR(&amp;MSG) TYPE(*CHAR) LEN(50)
    CHGVAR VAR(&amp;MSG) VALUE('Hello, World!')
    SNDPGMMSG MSG(&amp;MSG)
ENDPGM</pre></div><div class='content'><ul>
<li><code>PGM</code> and <code>ENDPGM</code> mark the beginning and end of the program.</li>
<li><code>DCL</code> declares a variable.</li>
<li><code>CHGVAR</code> changes the value of a variable.</li>
<li><code>SNDPGMMSG</code> sends a program message.</li>
</ul>
</div><h1>Automating Routine Tasks</h1>
<div class='content'><p>Automation in CL involves creating scripts that perform repetitive tasks without manual intervention.</p>
</div><h2>Scheduling Jobs</h2>
<div class='content'><p>Jobs can be scheduled to run at specific times using the <code>SBMJOB</code> command.</p>
<h4>Example: Submitting a Job</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0JNSk9CIENNRChDQUxMIFBHTShNWVBHTSkpIEpPQihNWUpPQikgU0NEREFURSgnMjAyMy0xMC0wMScpIFNDRFRJTUUoJzEyOjAwOjAwJyk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SBMJOB CMD(CALL PGM(MYPGM)) JOB(MYJOB) SCDDATE('2023-10-01') SCDTIME('12:00:00')</pre></div><div class='content'><ul>
<li><code>CMD</code> specifies the command to run.</li>
<li><code>JOB</code> names the job.</li>
<li><code>SCDDATE</code> and <code>SCDTIME</code> schedule the job.</li>
</ul>
</div><h2>Looping and Conditional Logic</h2>
<div class='content'><p>Loops and conditional statements allow for more complex automation.</p>
<h4>Example: Looping Through Files</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0xGIEZJTEUoUVRFTVAvTVlGSUxFKQogICAgRENMIFZBUigmRU9GKSBUWVBFKCpMR0wpCiAgICBEQ0wgVkFSKCZDT1VOVCkgVFlQRSgqREVDKSBMRU4oNSAwKQoKICAgIENIR1ZBUiBWQVIoJkNPVU5UKSBWQUxVRSgwKQogICAgT1ZSREJGIEZJTEUoUVRFTVAvTVlGSUxFKSBUT0ZJTEUoTVlMSUIvTVlGSUxFKQoKICAgIERPV0hJTEUgQ09ORCgmRU9GICpFUSAqT0ZGKQogICAgICAgIFJDVkYKICAgICAgICBNT05NU0cgTVNHSUQoQ1BGMDg2NCkgRVhFQyhDSEdWQVIgVkFSKCZFT0YpIFZBTFVFKCpPTikpCiAgICAgICAgSUYgQ09ORCgmRU9GICpFUSAqT0ZGKSBUSEVOKERPKQogICAgICAgICAgICBDSEdWQVIgVkFSKCZDT1VOVCkgVkFMVUUoJkNPVU5UICsgMSkKICAgICAgICBFTkRETwogICAgRU5ERE8KCiAgICBTTkRQR01NU0cgTVNHKCdUb3RhbCByZWNvcmRzOiAnICpDQVQgJkNPVU5UKQpFTkRQR00="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCLF FILE(QTEMP/MYFILE)
    DCL VAR(&amp;EOF) TYPE(*LGL)
    DCL VAR(&amp;COUNT) TYPE(*DEC) LEN(5 0)

    CHGVAR VAR(&amp;COUNT) VALUE(0)
    OVRDBF FILE(QTEMP/MYFILE) TOFILE(MYLIB/MYFILE)

    DOWHILE COND(&amp;EOF *EQ *OFF)
        RCVF
        MONMSG MSGID(CPF0864) EXEC(CHGVAR VAR(&amp;EOF) VALUE(*ON))
        IF COND(&amp;EOF *EQ *OFF) THEN(DO)
            CHGVAR VAR(&amp;COUNT) VALUE(&amp;COUNT + 1)
        ENDDO
    ENDDO

    SNDPGMMSG MSG('Total records: ' *CAT &amp;COUNT)
ENDPGM</pre></div><div class='content'><ul>
<li><code>DCLF</code> declares a file for reading.</li>
<li><code>RCVF</code> receives a record from the file.</li>
<li><code>MONMSG</code> monitors for specific messages (e.g., end of file).</li>
<li><code>DOWHILE</code> creates a loop that continues until a condition is met.</li>
</ul>
</div><h1>Advanced Automation Techniques</h1>
<div class='content'><p>Advanced techniques involve integrating CL with other system tools and handling errors effectively.</p>
</div><h2>Error Handling</h2>
<div class='content'><p>Proper error handling ensures that your scripts can recover from unexpected issues.</p>
<h4>Example: Error Handling with MONMSG</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBEQ0wgVkFSKCZNU0cpIFRZUEUoKkNIQVIpIExFTig1MCkKCiAgICBDSEdWQVIgVkFSKCZNU0cpIFZBTFVFKCdTdGFydGluZyBqb2IuLi4nKQogICAgU05EUEdNTVNHIE1TRygmTVNHKQoKICAgIENBTEwgUEdNKE1ZUEdNKQogICAgTU9OTVNHIE1TR0lEKENQRjAwMDApIEVYRUMoRE8pCiAgICAgICAgQ0hHVkFSIFZBUigmTVNHKSBWQUxVRSgnQW4gZXJyb3Igb2NjdXJyZWQuJykKICAgICAgICBTTkRQR01NU0cgTVNHKCZNU0cpCiAgICBFTkRETwoKICAgIENIR1ZBUiBWQVIoJk1TRykgVkFMVUUoJ0pvYiBjb21wbGV0ZWQuJykKICAgIFNORFBHTU1TRyBNU0coJk1TRykKRU5EUEdN"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    DCL VAR(&amp;MSG) TYPE(*CHAR) LEN(50)

    CHGVAR VAR(&amp;MSG) VALUE('Starting job...')
    SNDPGMMSG MSG(&amp;MSG)

    CALL PGM(MYPGM)
    MONMSG MSGID(CPF0000) EXEC(DO)
        CHGVAR VAR(&amp;MSG) VALUE('An error occurred.')
        SNDPGMMSG MSG(&amp;MSG)
    ENDDO

    CHGVAR VAR(&amp;MSG) VALUE('Job completed.')
    SNDPGMMSG MSG(&amp;MSG)
ENDPGM</pre></div><div class='content'><ul>
<li><code>MONMSG</code> captures any error messages and executes a recovery block.</li>
</ul>
</div><h2>Integrating with Other Tools</h2>
<div class='content'><p>CL can interact with other system tools like SQL and Qshell for more powerful automation.</p>
<h4>Example: Running SQL from CL</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UEdNCiAgICBSVU5TUUwgU1FMKCdVUERBVEUgTVlMSUIuTVlUQUJMRSBTRVQgU1RBVFVTID0gJydDT01QTEVURScnIFdIRVJFIFNUQVRVUyA9ICcnUEVORElORycnJykKRU5EUEdN"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PGM
    RUNSQL SQL('UPDATE MYLIB.MYTABLE SET STATUS = ''COMPLETE'' WHERE STATUS = ''PENDING''')
ENDPGM</pre></div><div class='content'><ul>
<li><code>RUNSQL</code> executes an SQL statement from within a CL program.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Automating system tasks with CL can significantly improve efficiency and reduce manual workload. By mastering the basics, learning to schedule jobs, implementing loops and conditional logic, handling errors, and integrating with other tools, you can create powerful automation scripts. Practice these techniques to become proficient in automating tasks on IBM i systems.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='performance-optimization'>&#x25C4;Performance Optimization</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Automating System Tasks</a>
	</div>
	<div class='col-4 text-end'>
					<a href='creating-custom-commands'>Creating Custom Commands &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
