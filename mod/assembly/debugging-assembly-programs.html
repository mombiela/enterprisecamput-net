<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debugging Assembly Programs</title>

    <link rel="alternate" href="https://campusempresa.com/mod/assembly/debugging-assembly-programs" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/assembly/debugging-assembly-programs" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/assembly/debugging-assembly-programs" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/assembly/debugging-assembly-programs" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/assembly/debugging-assembly-programs" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='optimizing-assembly-code'>&#x25C4;Optimizing Assembly Code</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Debugging Assembly Programs</a>
	</div>
	<div class='col-4 text-end'>
					<a href='x86-assembly'>x86 Assembly &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Debugging Assembly Programs</h1>
<div class='content'><p>Debugging is an essential skill for any programmer, and it becomes even more critical when working with low-level languages like Assembly. This section will cover the basics of debugging Assembly programs, including common tools and techniques.</p>
</div><h1>Common Debugging Tools</h1>
<div class='content'><p>Several tools can help you debug Assembly programs effectively. Here are some of the most commonly used ones:</p>
<ul>
<li><strong>GDB (GNU Debugger)</strong>: A powerful debugger for programs written in C, C++, and Assembly.</li>
<li><strong>LLDB</strong>: The LLVM debugger, which is part of the LLVM project.</li>
<li><strong>OllyDbg</strong>: A 32-bit assembler-level debugger for Windows.</li>
<li><strong>WinDbg</strong>: A multipurpose debugger for Windows, often used for debugging kernel-mode and user-mode code.</li>
</ul>
</div><h2>Example: Using GDB to Debug Assembly Code</h2>
<div class='content'><p>Let's walk through a simple example of using GDB to debug an Assembly program.</p>
<h4>Sample Assembly Code</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VjdGlvbiAuZGF0YQogICAgbXNnIGRiICdIZWxsbywgV29ybGQhJywgMAoKc2VjdGlvbiAudGV4dAogICAgZ2xvYmFsIF9zdGFydAoKX3N0YXJ0OgogICAgbW92IGVheCwgNCAgICAgICAgICA7IHN5c2NhbGwgbnVtYmVyIGZvciBzeXNfd3JpdGUKICAgIG1vdiBlYngsIDEgICAgICAgICAgOyBmaWxlIGRlc2NyaXB0b3IgMSBpcyBzdGRvdXQKICAgIG1vdiBlY3gsIG1zZyAgICAgICAgOyBwb2ludGVyIHRvIG1lc3NhZ2UKICAgIG1vdiBlZHgsIDEzICAgICAgICAgOyBtZXNzYWdlIGxlbmd0aAogICAgaW50IDB4ODAgICAgICAgICAgICA7IGNhbGwga2VybmVsCgogICAgbW92IGVheCwgMSAgICAgICAgICA7IHN5c2NhbGwgbnVtYmVyIGZvciBzeXNfZXhpdAogICAgeG9yIGVieCwgZWJ4ICAgICAgICA7IGV4aXQgY29kZSAwCiAgICBpbnQgMHg4MCAgICAgICAgICAgIDsgY2FsbCBrZXJuZWw="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>section .data
    msg db 'Hello, World!', 0

section .text
    global _start

_start:
    mov eax, 4          ; syscall number for sys_write
    mov ebx, 1          ; file descriptor 1 is stdout
    mov ecx, msg        ; pointer to message
    mov edx, 13         ; message length
    int 0x80            ; call kernel

    mov eax, 1          ; syscall number for sys_exit
    xor ebx, ebx        ; exit code 0
    int 0x80            ; call kernel</pre></div><div class='content'><h4>Compiling and Running the Program</h4>
<p>First, assemble and link the program:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmFzbSAtZiBlbGYzMiAtbyBoZWxsby5vIGhlbGxvLmFzbQpsZCAtbSBlbGZfaTM4NiAtbyBoZWxsbyBoZWxsby5v"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>nasm -f elf32 -o hello.o hello.asm
ld -m elf_i386 -o hello hello.o</pre></div><div class='content'><p>Run the program:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Li9oZWxsbw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>./hello</pre></div><div class='content'><h4>Debugging with GDB</h4>
<ol>
<li>
<p>Start GDB with the compiled program:</p>
<pre><code class="language-sh">gdb ./hello
</code></pre>
</li>
<li>
<p>Set a breakpoint at the <code>_start</code> label:</p>
<pre><code class="language-sh">(gdb) break _start
</code></pre>
</li>
<li>
<p>Run the program within GDB:</p>
<pre><code class="language-sh">(gdb) run
</code></pre>
</li>
<li>
<p>Step through the program one instruction at a time:</p>
<pre><code class="language-sh">(gdb) stepi
</code></pre>
</li>
<li>
<p>Examine the contents of registers:</p>
<pre><code class="language-sh">(gdb) info registers
</code></pre>
</li>
<li>
<p>View the disassembled code:</p>
<pre><code class="language-sh">(gdb) disassemble _start
</code></pre>
</li>
</ol>
</div><h1>Common Debugging Techniques</h1>
<div class='content'><p>When debugging Assembly programs, several techniques can help you identify and fix issues:</p>
<ul>
<li><strong>Breakpoints</strong>: Set breakpoints at critical points in your code to pause execution and examine the state of the program.</li>
<li><strong>Step Execution</strong>: Step through your code one instruction at a time to observe how each instruction affects the program state.</li>
<li><strong>Register Inspection</strong>: Regularly check the contents of CPU registers to ensure they hold the expected values.</li>
<li><strong>Memory Inspection</strong>: Examine specific memory addresses to verify that data is being correctly read from and written to memory.</li>
</ul>
</div><h2>Example: Inspecting Registers and Memory</h2>
<div class='content'><p>Let's continue with our previous example to inspect registers and memory.</p>
<ol>
<li>
<p>After setting a breakpoint and running the program, step through the first instruction:</p>
<pre><code class="language-sh">(gdb) stepi
</code></pre>
</li>
<li>
<p>Check the value of the <code>eax</code> register:</p>
<pre><code class="language-sh">(gdb) info registers eax
</code></pre>
</li>
<li>
<p>Examine the memory at the address of the <code>msg</code> label:</p>
<pre><code class="language-sh">(gdb) x/s msg
</code></pre>
</li>
</ol>
</div><h1>Debugging Common Issues</h1>
<div class='content'><p>Here are some common issues you might encounter when debugging Assembly programs and how to address them:</p>
<ul>
<li><strong>Segmentation Faults</strong>: Often caused by accessing invalid memory addresses. Use breakpoints and memory inspection to identify the faulty access.</li>
<li><strong>Incorrect Register Values</strong>: Verify that each instruction correctly sets the registers. Use step execution and register inspection to trace the source of incorrect values.</li>
<li><strong>Infinite Loops</strong>: Ensure that loop conditions are correctly implemented and that the loop has a valid exit condition. Use breakpoints and step execution to monitor loop behavior.</li>
</ul>
</div><h2>Example: Debugging a Segmentation Fault</h2>
<div class='content'><p>Consider the following code that causes a segmentation fault:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VjdGlvbiAudGV4dAogICAgZ2xvYmFsIF9zdGFydAoKX3N0YXJ0OgogICAgbW92IGVheCwgMSAgICAgICAgICA7IHN5c2NhbGwgbnVtYmVyIGZvciBzeXNfZXhpdAogICAgbW92IGVieCwgMCAgICAgICAgICA7IGV4aXQgY29kZQogICAgbW92IGVjeCwgWzB4MF0gICAgICA7IGF0dGVtcHQgdG8gcmVhZCBmcm9tIGFkZHJlc3MgMHgwIChpbnZhbGlkKQogICAgaW50IDB4ODAgICAgICAgICAgICA7IGNhbGwga2VybmVs"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>section .text
    global _start

_start:
    mov eax, 1          ; syscall number for sys_exit
    mov ebx, 0          ; exit code
    mov ecx, [0x0]      ; attempt to read from address 0x0 (invalid)
    int 0x80            ; call kernel</pre></div><div class='content'><ol>
<li>
<p>Assemble and link the program:</p>
<pre><code class="language-sh">nasm -f elf32 -o segfault.o segfault.asm
ld -m elf_i386 -o segfault segfault.o
</code></pre>
</li>
<li>
<p>Run the program in GDB:</p>
<pre><code class="language-sh">gdb ./segfault
</code></pre>
</li>
<li>
<p>Set a breakpoint at <code>_start</code> and run the program:</p>
<pre><code class="language-sh">(gdb) break _start
(gdb) run
</code></pre>
</li>
<li>
<p>Step through the instructions until the segmentation fault occurs:</p>
<pre><code class="language-sh">(gdb) stepi
</code></pre>
</li>
<li>
<p>Identify the instruction causing the fault and inspect the memory address being accessed:</p>
<pre><code class="language-sh">(gdb) x/4x 0x0
</code></pre>
</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>Debugging Assembly programs can be challenging, but with the right tools and techniques, you can effectively identify and resolve issues. By using debuggers like GDB, setting breakpoints, stepping through code, and inspecting registers and memory, you can gain a deeper understanding of your program's behavior and ensure it operates correctly. Practice these techniques regularly to become proficient in debugging Assembly code.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='optimizing-assembly-code'>&#x25C4;Optimizing Assembly Code</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Debugging Assembly Programs</a>
	</div>
	<div class='col-4 text-end'>
					<a href='x86-assembly'>x86 Assembly &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
