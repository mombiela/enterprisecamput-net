<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Writing Your First Assembly Program</title>

    <link rel="alternate" href="https://campusempresa.com/mod/assembly/02-04-first-program" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/assembly/02-04-first-program" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/assembly/02-04-first-program" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/assembly/02-04-first-program" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/assembly/02-04-first-program" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='02-03-basic-syntax' title="Basic Syntax and Structure">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Writing Your First Assembly Program</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='03-01-binary-hexadecimal' title="Binary and Hexadecimal Systems">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will guide you through writing your first assembly program. We will cover the basic structure of an assembly program, how to write and compile it, and how to run it. By the end of this section, you will have a working assembly program that you can build upon in future lessons.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Assembly Program Structure</strong>: Understanding the basic layout of an assembly program.</li>
<li><strong>Writing the Code</strong>: Writing a simple program that prints &quot;Hello, World!&quot; to the console.</li>
<li><strong>Compiling the Program</strong>: Using an assembler to convert the assembly code into machine code.</li>
<li><strong>Running the Program</strong>: Executing the compiled program.</li>
</ol>
</div><h1><p>Assembly Program Structure</p>
</h1>
<div class='content'><p>An assembly program typically consists of the following sections:</p>
<ul>
<li><strong>Data Section</strong>: Defines data elements.</li>
<li><strong>BSS Section</strong>: Defines uninitialized data.</li>
<li><strong>Text Section</strong>: Contains the actual code.</li>
</ul>
</div><h2><p>Example Structure</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VjdGlvbiAuZGF0YQogICAgOyBEYXRhIHNlY3Rpb24KCnNlY3Rpb24gLmJzcwogICAgOyBCU1Mgc2VjdGlvbgoKc2VjdGlvbiAudGV4dAogICAgZ2xvYmFsIF9zdGFydAoKX3N0YXJ0OgogICAgOyBDb2RlIHNlY3Rpb24="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>section .data
    ; Data section

section .bss
    ; BSS section

section .text
    global _start

_start:
    ; Code section</pre></div><div class='content'></div><h1><p>Writing the Code</p>
</h1>
<div class='content'><p>Let's write a simple program that prints &quot;Hello, World!&quot; to the console. We will use the x86 architecture for this example.</p>
</div><h2><p>Code Example</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VjdGlvbiAuZGF0YQogICAgaGVsbG8gZGIgJ0hlbGxvLCBXb3JsZCEnLCAweEEgIDsgVGhlIHN0cmluZyB0byBwcmludCwgZm9sbG93ZWQgYnkgYSBuZXdsaW5lIGNoYXJhY3RlcgoKc2VjdGlvbiAuYnNzCgpzZWN0aW9uIC50ZXh0CiAgICBnbG9iYWwgX3N0YXJ0Cgpfc3RhcnQ6CiAgICA7IFdyaXRlIHRoZSBzdHJpbmcgdG8gc3Rkb3V0CiAgICBtb3YgZWF4LCA0ICAgICAgICAgIDsgc3lzY2FsbCBudW1iZXIgZm9yIHN5c193cml0ZQogICAgbW92IGVieCwgMSAgICAgICAgICA7IGZpbGUgZGVzY3JpcHRvciAxIGlzIHN0ZG91dAogICAgbW92IGVjeCwgaGVsbG8gICAgICA7IHBvaW50ZXIgdG8gdGhlIHN0cmluZwogICAgbW92IGVkeCwgMTMgICAgICAgICA7IGxlbmd0aCBvZiB0aGUgc3RyaW5nCiAgICBpbnQgMHg4MCAgICAgICAgICAgIDsgY2FsbCBrZXJuZWwKCiAgICA7IEV4aXQgdGhlIHByb2dyYW0KICAgIG1vdiBlYXgsIDEgICAgICAgICAgOyBzeXNjYWxsIG51bWJlciBmb3Igc3lzX2V4aXQKICAgIHhvciBlYngsIGVieCAgICAgICAgOyBleGl0IGNvZGUgMAogICAgaW50IDB4ODAgICAgICAgICAgICA7IGNhbGwga2VybmVs"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>section .data
    hello db 'Hello, World!', 0xA  ; The string to print, followed by a newline character

section .bss

section .text
    global _start

_start:
    ; Write the string to stdout
    mov eax, 4          ; syscall number for sys_write
    mov ebx, 1          ; file descriptor 1 is stdout
    mov ecx, hello      ; pointer to the string
    mov edx, 13         ; length of the string
    int 0x80            ; call kernel

    ; Exit the program
    mov eax, 1          ; syscall number for sys_exit
    xor ebx, ebx        ; exit code 0
    int 0x80            ; call kernel</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>section .data</strong>: This section contains initialized data. We define a string &quot;Hello, World!&quot; followed by a newline character.</li>
<li><strong>section .text</strong>: This section contains the code. The <code>_start</code> label marks the entry point of the program.</li>
<li><strong>mov eax, 4</strong>: This instruction sets the <code>eax</code> register to 4, which is the syscall number for <code>sys_write</code>.</li>
<li><strong>mov ebx, 1</strong>: This sets the <code>ebx</code> register to 1, which is the file descriptor for stdout.</li>
<li><strong>mov ecx, hello</strong>: This sets the <code>ecx</code> register to the address of the string we want to print.</li>
<li><strong>mov edx, 13</strong>: This sets the <code>edx</code> register to the length of the string.</li>
<li><strong>int 0x80</strong>: This triggers a software interrupt to make a system call.</li>
<li><strong>mov eax, 1</strong>: This sets the <code>eax</code> register to 1, which is the syscall number for <code>sys_exit</code>.</li>
<li><strong>xor ebx, ebx</strong>: This sets the <code>ebx</code> register to 0, which is the exit code.</li>
<li><strong>int 0x80</strong>: This triggers a software interrupt to exit the program.</li>
</ul>
</div><h1><p>Compiling the Program</p>
</h1>
<div class='content'><p>To compile the assembly program, we will use the <code>nasm</code> assembler and the <code>ld</code> linker.</p>
</div><h2><p>Steps</p>
</h2>
<div class='content'><ol>
<li><strong>Save the Code</strong>: Save the code in a file named <code>hello.asm</code>.</li>
<li><strong>Assemble the Code</strong>: Use <code>nasm</code> to assemble the code.
<pre><code class="language-sh">nasm -f elf32 hello.asm -o hello.o
</code></pre>
</li>
<li><strong>Link the Object File</strong>: Use <code>ld</code> to link the object file and create an executable.
<pre><code class="language-sh">ld -m elf_i386 hello.o -o hello
</code></pre>
</li>
</ol>
</div><h1><p>Running the Program</p>
</h1>
<div class='content'><p>To run the compiled program, use the following command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Li9oZWxsbw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>./hello</pre></div><div class='content'><p>You should see the output:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SGVsbG8sIFdvcmxkIQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Hello, World!</pre></div><div class='content'></div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Task</p>
</h2>
<div class='content'><p>Write an assembly program that prints &quot;Welcome to Assembly Programming!&quot; to the console.</p>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VjdGlvbiAuZGF0YQogICAgd2VsY29tZSBkYiAnV2VsY29tZSB0byBBc3NlbWJseSBQcm9ncmFtbWluZyEnLCAweEEKCnNlY3Rpb24gLmJzcwoKc2VjdGlvbiAudGV4dAogICAgZ2xvYmFsIF9zdGFydAoKX3N0YXJ0OgogICAgbW92IGVheCwgNAogICAgbW92IGVieCwgMQogICAgbW92IGVjeCwgd2VsY29tZQogICAgbW92IGVkeCwgMzEKICAgIGludCAweDgwCgogICAgbW92IGVheCwgMQogICAgeG9yIGVieCwgZWJ4CiAgICBpbnQgMHg4MA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>section .data
    welcome db 'Welcome to Assembly Programming!', 0xA

section .bss

section .text
    global _start

_start:
    mov eax, 4
    mov ebx, 1
    mov ecx, welcome
    mov edx, 31
    int 0x80

    mov eax, 1
    xor ebx, ebx
    int 0x80</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li>The string &quot;Welcome to Assembly Programming!&quot; is defined in the data section.</li>
<li>The length of the string is 31 characters.</li>
<li>The rest of the code follows the same structure as the &quot;Hello, World!&quot; program.</li>
</ul>
</div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ul>
<li><strong>Incorrect String Length</strong>: Ensure the length of the string is correctly specified in the <code>mov edx, &lt;length&gt;</code> instruction.</li>
<li><strong>Missing Newline Character</strong>: Adding a newline character (<code>0xA</code>) at the end of the string ensures the output is properly formatted.</li>
<li><strong>File Permissions</strong>: Ensure the compiled executable has the correct permissions to run. Use <code>chmod +x hello</code> if necessary.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, you learned how to write, compile, and run a simple assembly program. You now have a basic understanding of the structure of an assembly program and how to use system calls to interact with the operating system. In the next section, we will delve deeper into data representation and instructions.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='02-03-basic-syntax' title="Basic Syntax and Structure">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='03-01-binary-hexadecimal' title="Binary and Hexadecimal Systems">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
