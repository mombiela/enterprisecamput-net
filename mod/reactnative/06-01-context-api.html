<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Context API</title>

    <link rel="alternate" href="https://campusempresa.com/mod/reactnative/06-01-context-api" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/reactnative/06-01-context-api" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/reactnative/06-01-context-api" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/reactnative/06-01-context-api" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/reactnative/06-01-context-api" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Programming Languages</a>
				 					<a href="/categ/frameworks">Frameworks and Libraries</a>
				 					<a href="/categ/tech-tools">Technical Tools</a>
				 					<a href="/categ/foundations">Theoretical Foundations</a>
				 					<a href="/categ/soft-skills">Social Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-05-integrating-rest-apis' title="Integrating with REST APIs">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Context API</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-02-hooks-react-native' title="Hooks in React Native">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'></div><h1><p>Introduction</p>
</h1>
<div class='content'><p>The Context API in React Native is a powerful feature that allows you to share state across the entire app (or part of it) without having to pass props down manually at every level. This is particularly useful for global settings, themes, user authentication, and other data that needs to be accessible by many components.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Context Creation</strong>: Creating a context using <code>React.createContext()</code>.</li>
<li><strong>Provider</strong>: A component that provides the context value to its children.</li>
<li><strong>Consumer</strong>: A component that consumes the context value.</li>
<li><strong>useContext Hook</strong>: A hook that allows functional components to consume context.</li>
</ol>
</div><h1><p>Creating a Context</p>
</h1>
<div class='content'><p>To create a context, you use the <code>React.createContext()</code> function. This function returns an object with two properties: <code>Provider</code> and <code>Consumer</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKCi8vIENyZWF0ZSBhIENvbnRleHQKY29uc3QgTXlDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dCgpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React from 'react';

// Create a Context
const MyContext = React.createContext();</pre></div><div class='content'></div><h1><p>Providing Context</p>
</h1>
<div class='content'><p>The <code>Provider</code> component is used to wrap the part of your app where you want the context to be available. It accepts a <code>value</code> prop, which will be passed to all consuming components.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JzsKaW1wb3J0IHsgVmlldywgVGV4dCB9IGZyb20gJ3JlYWN0LW5hdGl2ZSc7CgovLyBDcmVhdGUgYSBDb250ZXh0CmNvbnN0IE15Q29udGV4dCA9IFJlYWN0LmNyZWF0ZUNvbnRleHQoKTsKCmNvbnN0IEFwcCA9ICgpID0+IHsKICByZXR1cm4gKAogICAgPE15Q29udGV4dC5Qcm92aWRlciB2YWx1ZT0iSGVsbG8sIFdvcmxkISI+CiAgICAgIDxWaWV3PgogICAgICAgIDxNeUNvbXBvbmVudCAvPgogICAgICA8L1ZpZXc+CiAgICA8L015Q29udGV4dC5Qcm92aWRlcj4KICApOwp9OwoKY29uc3QgTXlDb21wb25lbnQgPSAoKSA9PiB7CiAgcmV0dXJuICgKICAgIDxNeUNvbnRleHQuQ29uc3VtZXI+CiAgICAgIHt2YWx1ZSA9PiA8VGV4dD57dmFsdWV9PC9UZXh0Pn0KICAgIDwvTXlDb250ZXh0LkNvbnN1bWVyPgogICk7Cn07CgpleHBvcnQgZGVmYXVsdCBBcHA7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React from 'react';
import { View, Text } from 'react-native';

// Create a Context
const MyContext = React.createContext();

const App = () =&gt; {
  return (
    &lt;MyContext.Provider value=&quot;Hello, World!&quot;&gt;
      &lt;View&gt;
        &lt;MyComponent /&gt;
      &lt;/View&gt;
    &lt;/MyContext.Provider&gt;
  );
};

const MyComponent = () =&gt; {
  return (
    &lt;MyContext.Consumer&gt;
      {value =&gt; &lt;Text&gt;{value}&lt;/Text&gt;}
    &lt;/MyContext.Consumer&gt;
  );
};

export default App;</pre></div><div class='content'></div><h1><p>Consuming Context</p>
</h1>
<div class='content'><p>There are two ways to consume context: using the <code>Consumer</code> component or the <code>useContext</code> hook.</p>
</div><h2><p>Using the Consumer Component</p>
</h2>
<div class='content'><p>The <code>Consumer</code> component requires a function as a child. This function receives the current context value and returns a React node.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgTXlDb21wb25lbnQgPSAoKSA9PiB7CiAgcmV0dXJuICgKICAgIDxNeUNvbnRleHQuQ29uc3VtZXI+CiAgICAgIHt2YWx1ZSA9PiA8VGV4dD57dmFsdWV9PC9UZXh0Pn0KICAgIDwvTXlDb250ZXh0LkNvbnN1bWVyPgogICk7Cn07"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const MyComponent = () =&gt; {
  return (
    &lt;MyContext.Consumer&gt;
      {value =&gt; &lt;Text&gt;{value}&lt;/Text&gt;}
    &lt;/MyContext.Consumer&gt;
  );
};</pre></div><div class='content'></div><h2><p>Using the useContext Hook</p>
</h2>
<div class='content'><p>The <code>useContext</code> hook is a simpler way to consume context in functional components.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0LCB7IHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7CmltcG9ydCB7IFZpZXcsIFRleHQgfSBmcm9tICdyZWFjdC1uYXRpdmUnOwoKY29uc3QgTXlDb21wb25lbnQgPSAoKSA9PiB7CiAgY29uc3QgdmFsdWUgPSB1c2VDb250ZXh0KE15Q29udGV4dCk7CiAgcmV0dXJuIDxUZXh0Pnt2YWx1ZX08L1RleHQ+Owp9Ow=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React, { useContext } from 'react';
import { View, Text } from 'react-native';

const MyComponent = () =&gt; {
  const value = useContext(MyContext);
  return &lt;Text&gt;{value}&lt;/Text&gt;;
};</pre></div><div class='content'></div><h1><p>Practical Example</p>
</h1>
<div class='content'><p>Let's create a simple app that uses the Context API to manage a theme (light or dark).</p>
</div><h2><p>Step 1: Create the Context</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBWaWV3LCBUZXh0LCBCdXR0b24sIFN0eWxlU2hlZXQgfSBmcm9tICdyZWFjdC1uYXRpdmUnOwoKLy8gQ3JlYXRlIGEgQ29udGV4dCBmb3IgdGhlIHRoZW1lCmNvbnN0IFRoZW1lQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoKTsKCmNvbnN0IEFwcCA9ICgpID0+IHsKICBjb25zdCBbdGhlbWUsIHNldFRoZW1lXSA9IHVzZVN0YXRlKCdsaWdodCcpOwoKICBjb25zdCB0b2dnbGVUaGVtZSA9ICgpID0+IHsKICAgIHNldFRoZW1lKHByZXZUaGVtZSA9PiAocHJldlRoZW1lID09PSAnbGlnaHQnID8gJ2RhcmsnIDogJ2xpZ2h0JykpOwogIH07CgogIHJldHVybiAoCiAgICA8VGhlbWVDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXt0aGVtZX0+CiAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuY29udGFpbmVyfT4KICAgICAgICA8QnV0dG9uIHRpdGxlPSJUb2dnbGUgVGhlbWUiIG9uUHJlc3M9e3RvZ2dsZVRoZW1lfSAvPgogICAgICAgIDxUaGVtZUNvbXBvbmVudCAvPgogICAgICA8L1ZpZXc+CiAgICA8L1RoZW1lQ29udGV4dC5Qcm92aWRlcj4KICApOwp9OwoKY29uc3QgVGhlbWVDb21wb25lbnQgPSAoKSA9PiB7CiAgY29uc3QgdGhlbWUgPSB1c2VDb250ZXh0KFRoZW1lQ29udGV4dCk7CiAgcmV0dXJuICgKICAgIDxWaWV3IHN0eWxlPXt0aGVtZSA9PT0gJ2xpZ2h0JyA/IHN0eWxlcy5saWdodCA6IHN0eWxlcy5kYXJrfT4KICAgICAgPFRleHQ+VGhlIGN1cnJlbnQgdGhlbWUgaXMge3RoZW1lfTwvVGV4dD4KICAgIDwvVmlldz4KICApOwp9OwoKY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoewogIGNvbnRhaW5lcjogewogICAgZmxleDogMSwKICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywKICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLAogIH0sCiAgbGlnaHQ6IHsKICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmYnLAogICAgcGFkZGluZzogMjAsCiAgfSwKICBkYXJrOiB7CiAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMzMzJywKICAgIHBhZGRpbmc6IDIwLAogIH0sCn0pOwoKZXhwb3J0IGRlZmF1bHQgQXBwOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React, { createContext, useState } from 'react';
import { View, Text, Button, StyleSheet } from 'react-native';

// Create a Context for the theme
const ThemeContext = createContext();

const App = () =&gt; {
  const [theme, setTheme] = useState('light');

  const toggleTheme = () =&gt; {
    setTheme(prevTheme =&gt; (prevTheme === 'light' ? 'dark' : 'light'));
  };

  return (
    &lt;ThemeContext.Provider value={theme}&gt;
      &lt;View style={styles.container}&gt;
        &lt;Button title=&quot;Toggle Theme&quot; onPress={toggleTheme} /&gt;
        &lt;ThemeComponent /&gt;
      &lt;/View&gt;
    &lt;/ThemeContext.Provider&gt;
  );
};

const ThemeComponent = () =&gt; {
  const theme = useContext(ThemeContext);
  return (
    &lt;View style={theme === 'light' ? styles.light : styles.dark}&gt;
      &lt;Text&gt;The current theme is {theme}&lt;/Text&gt;
    &lt;/View&gt;
  );
};

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  },
  light: {
    backgroundColor: '#fff',
    padding: 20,
  },
  dark: {
    backgroundColor: '#333',
    padding: 20,
  },
});

export default App;</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ol>
<li><strong>Creating the Context</strong>: We create a <code>ThemeContext</code> using <code>createContext()</code>.</li>
<li><strong>Providing the Context</strong>: We wrap our app in a <code>ThemeContext.Provider</code> and pass the current theme as the value.</li>
<li><strong>Consuming the Context</strong>: In <code>ThemeComponent</code>, we use the <code>useContext</code> hook to get the current theme and apply styles accordingly.</li>
</ol>
</div><h1><p>Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: User Authentication Context</p>
</h2>
<div class='content'><p>Create a context to manage user authentication state (logged in or logged out).</p>
<ol>
<li>Create a <code>UserContext</code> using <code>createContext()</code>.</li>
<li>Provide the context with a state that indicates whether the user is logged in.</li>
<li>Create a component that consumes the context and displays a message based on the user's authentication state.</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IFJlYWN0LCB7IGNyZWF0ZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VDb250ZXh0IH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBWaWV3LCBUZXh0LCBCdXR0b24gfSBmcm9tICdyZWFjdC1uYXRpdmUnOwoKLy8gQ3JlYXRlIGEgQ29udGV4dCBmb3IgdXNlciBhdXRoZW50aWNhdGlvbgpjb25zdCBVc2VyQ29udGV4dCA9IGNyZWF0ZUNvbnRleHQoKTsKCmNvbnN0IEFwcCA9ICgpID0+IHsKICBjb25zdCBbaXNMb2dnZWRJbiwgc2V0SXNMb2dnZWRJbl0gPSB1c2VTdGF0ZShmYWxzZSk7CgogIGNvbnN0IHRvZ2dsZUxvZ2luID0gKCkgPT4gewogICAgc2V0SXNMb2dnZWRJbihwcmV2U3RhdGUgPT4gIXByZXZTdGF0ZSk7CiAgfTsKCiAgcmV0dXJuICgKICAgIDxVc2VyQ29udGV4dC5Qcm92aWRlciB2YWx1ZT17aXNMb2dnZWRJbn0+CiAgICAgIDxWaWV3PgogICAgICAgIDxCdXR0b24gdGl0bGU9IlRvZ2dsZSBMb2dpbiIgb25QcmVzcz17dG9nZ2xlTG9naW59IC8+CiAgICAgICAgPEF1dGhDb21wb25lbnQgLz4KICAgICAgPC9WaWV3PgogICAgPC9Vc2VyQ29udGV4dC5Qcm92aWRlcj4KICApOwp9OwoKY29uc3QgQXV0aENvbXBvbmVudCA9ICgpID0+IHsKICBjb25zdCBpc0xvZ2dlZEluID0gdXNlQ29udGV4dChVc2VyQ29udGV4dCk7CiAgcmV0dXJuICgKICAgIDxUZXh0Pntpc0xvZ2dlZEluID8gJ1VzZXIgaXMgbG9nZ2VkIGluJyA6ICdVc2VyIGlzIGxvZ2dlZCBvdXQnfTwvVGV4dD4KICApOwp9OwoKZXhwb3J0IGRlZmF1bHQgQXBwOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import React, { createContext, useState, useContext } from 'react';
import { View, Text, Button } from 'react-native';

// Create a Context for user authentication
const UserContext = createContext();

const App = () =&gt; {
  const [isLoggedIn, setIsLoggedIn] = useState(false);

  const toggleLogin = () =&gt; {
    setIsLoggedIn(prevState =&gt; !prevState);
  };

  return (
    &lt;UserContext.Provider value={isLoggedIn}&gt;
      &lt;View&gt;
        &lt;Button title=&quot;Toggle Login&quot; onPress={toggleLogin} /&gt;
        &lt;AuthComponent /&gt;
      &lt;/View&gt;
    &lt;/UserContext.Provider&gt;
  );
};

const AuthComponent = () =&gt; {
  const isLoggedIn = useContext(UserContext);
  return (
    &lt;Text&gt;{isLoggedIn ? 'User is logged in' : 'User is logged out'}&lt;/Text&gt;
  );
};

export default App;</pre></div><div class='content'></div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>The Context API is a powerful tool for managing state that needs to be shared across multiple components in a React Native application. By understanding how to create, provide, and consume context, you can simplify state management and avoid prop drilling. Practice using the Context API in different scenarios to become more comfortable with its usage.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-05-integrating-rest-apis' title="Integrating with REST APIs">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-02-hooks-react-native' title="Hooks in React Native">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
