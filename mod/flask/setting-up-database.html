<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setting Up a Database</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flask/setting-up-database" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flask/setting-up-database" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flask/setting-up-database" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/flask/setting-up-database" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/flask/setting-up-database" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='introduction-to-sqlalchemy'>&#x25C4;Introduction to SQLAlchemy</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Setting Up a Database</a>
	</div>
	<div class='col-4 text-end'>
					<a href='creating-models'>Creating Models &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In this section, we will learn how to set up a database for a Flask application. We will cover the basics of connecting to a database, creating tables, and performing CRUD (Create, Read, Update, Delete) operations. By the end of this section, you will have a solid understanding of how to integrate a database with your Flask application.</p>
</div><h1>Choosing a Database</h1>
<div class='content'><p>Before we start, it's important to choose the right database for your application. Flask supports various databases, but the most commonly used are:</p>
<ul>
<li>SQLite: Lightweight and easy to set up, ideal for small applications or development.</li>
<li>PostgreSQL: Powerful and scalable, suitable for larger applications.</li>
<li>MySQL: Widely used and reliable, good for medium to large applications.</li>
</ul>
<p>For this course, we will use SQLite due to its simplicity and ease of setup.</p>
</div><h1>Setting Up SQLite with Flask</h1>
<div class='content'></div><h2>Installing Flask and Flask-SQLAlchemy</h2>
<div class='content'><p>First, ensure you have Flask and Flask-SQLAlchemy installed. Flask-SQLAlchemy is an extension that simplifies the integration of SQLAlchemy with Flask.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwIGluc3RhbGwgRmxhc2sgRmxhc2stU1FMQWxjaGVteQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pip install Flask Flask-SQLAlchemy</pre></div><div class='content'></div><h2>Configuring the Database</h2>
<div class='content'><p>Next, configure your Flask application to use SQLite. Create a file named <code>app.py</code> and add the following code:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBmbGFzayBpbXBvcnQgRmxhc2sKZnJvbSBmbGFza19zcWxhbGNoZW15IGltcG9ydCBTUUxBbGNoZW15CgphcHAgPSBGbGFzayhfX25hbWVfXykKYXBwLmNvbmZpZ1snU1FMQUxDSEVNWV9EQVRBQkFTRV9VUkknXSA9ICdzcWxpdGU6Ly8vc2l0ZS5kYicKYXBwLmNvbmZpZ1snU1FMQUxDSEVNWV9UUkFDS19NT0RJRklDQVRJT05TJ10gPSBGYWxzZQpkYiA9IFNRTEFsY2hlbXkoYXBwKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from flask import Flask
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///site.db'
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False
db = SQLAlchemy(app)</pre></div><div class='content'></div><h2>Creating Models</h2>
<div class='content'><p>Models are classes that represent tables in your database. Let's create a simple model for a <code>User</code> table.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgVXNlcihkYi5Nb2RlbCk6CiAgICBpZCA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQogICAgdXNlcm5hbWUgPSBkYi5Db2x1bW4oZGIuU3RyaW5nKDE1MCksIHVuaXF1ZT1UcnVlLCBudWxsYWJsZT1GYWxzZSkKICAgIGVtYWlsID0gZGIuQ29sdW1uKGRiLlN0cmluZygxMjApLCB1bmlxdWU9VHJ1ZSwgbnVsbGFibGU9RmFsc2UpCiAgICBwYXNzd29yZCA9IGRiLkNvbHVtbihkYi5TdHJpbmcoNjApLCBudWxsYWJsZT1GYWxzZSkKCiAgICBkZWYgX19yZXByX18oc2VsZik6CiAgICAgICAgcmV0dXJuIGYiVXNlcigne3NlbGYudXNlcm5hbWV9JywgJ3tzZWxmLmVtYWlsfScpIg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(150), unique=True, nullable=False)
    email = db.Column(db.String(120), unique=True, nullable=False)
    password = db.Column(db.String(60), nullable=False)

    def __repr__(self):
        return f&quot;User('{self.username}', '{self.email}')&quot;</pre></div><div class='content'></div><h2>Creating the Database</h2>
<div class='content'><p>To create the database and tables, use the following commands in a Python shell:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBhcHAgaW1wb3J0IGRiCmRiLmNyZWF0ZV9hbGwoKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from app import db
db.create_all()</pre></div><div class='content'><p>This will create a <code>site.db</code> file with a <code>User</code> table.</p>
</div><h1>Performing CRUD Operations</h1>
<div class='content'></div><h2>Create</h2>
<div class='content'><p>To add a new user to the database, use the following code:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBhcHAgaW1wb3J0IGRiLCBVc2VyCgpuZXdfdXNlciA9IFVzZXIodXNlcm5hbWU9J2pvaG5fZG9lJywgZW1haWw9J2pvaG5AZXhhbXBsZS5jb20nLCBwYXNzd29yZD0ncGFzc3dvcmQxMjMnKQpkYi5zZXNzaW9uLmFkZChuZXdfdXNlcikKZGIuc2Vzc2lvbi5jb21taXQoKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from app import db, User

new_user = User(username='john_doe', email='john@example.com', password='password123')
db.session.add(new_user)
db.session.commit()</pre></div><div class='content'></div><h2>Read</h2>
<div class='content'><p>To query users from the database:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlcnMgPSBVc2VyLnF1ZXJ5LmFsbCgpCnByaW50KHVzZXJzKQoKdXNlciA9IFVzZXIucXVlcnkuZmlsdGVyX2J5KHVzZXJuYW1lPSdqb2huX2RvZScpLmZpcnN0KCkKcHJpbnQodXNlcik="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>users = User.query.all()
print(users)

user = User.query.filter_by(username='john_doe').first()
print(user)</pre></div><div class='content'></div><h2>Update</h2>
<div class='content'><p>To update a user's information:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlciA9IFVzZXIucXVlcnkuZmlsdGVyX2J5KHVzZXJuYW1lPSdqb2huX2RvZScpLmZpcnN0KCkKdXNlci5lbWFpbCA9ICdqb2huX2RvZUBleGFtcGxlLmNvbScKZGIuc2Vzc2lvbi5jb21taXQoKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>user = User.query.filter_by(username='john_doe').first()
user.email = 'john_doe@example.com'
db.session.commit()</pre></div><div class='content'></div><h2>Delete</h2>
<div class='content'><p>To delete a user from the database:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlciA9IFVzZXIucXVlcnkuZmlsdGVyX2J5KHVzZXJuYW1lPSdqb2huX2RvZScpLmZpcnN0KCkKZGIuc2Vzc2lvbi5kZWxldGUodXNlcikKZGIuc2Vzc2lvbi5jb21taXQoKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>user = User.query.filter_by(username='john_doe').first()
db.session.delete(user)
db.session.commit()</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>In this section, we covered the basics of setting up a database in a Flask application using SQLite. We learned how to install necessary packages, configure the database, create models, and perform CRUD operations. This foundational knowledge will enable you to build more complex applications with robust database interactions.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='introduction-to-sqlalchemy'>&#x25C4;Introduction to SQLAlchemy</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Setting Up a Database</a>
	</div>
	<div class='col-4 text-end'>
					<a href='creating-models'>Creating Models &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
