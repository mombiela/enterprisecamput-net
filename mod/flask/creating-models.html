<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creating Models</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flask/creating-models" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flask/creating-models" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flask/creating-models" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/flask/creating-models" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/flask/creating-models" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='setting-up-database'>&#x25C4;Setting Up a Database</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Creating Models</a>
	</div>
	<div class='col-4 text-end'>
					<a href='performing-crud-operations'>Performing CRUD Operations &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to create models in Flask. Models are a crucial part of any web application as they represent the data structure and business logic. We will start with the basics and gradually move to more advanced concepts.</p>
</div><h1>Introduction to Models</h1>
<div class='content'><p>Models in Flask are typically created using SQLAlchemy, a powerful Object Relational Mapper (ORM) that allows you to interact with the database using Python objects.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>ORM (Object Relational Mapper):</strong> A technique that lets you query and manipulate data from a database using an object-oriented paradigm.</li>
<li><strong>SQLAlchemy:</strong> A popular ORM for Python that provides a full suite of well-known enterprise-level persistence patterns.</li>
</ul>
</div><h1>Setting Up SQLAlchemy</h1>
<div class='content'><p>Before creating models, you need to set up SQLAlchemy in your Flask application.</p>
</div><h2>Installation</h2>
<div class='content'><p>First, install Flask-SQLAlchemy using pip:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwIGluc3RhbGwgRmxhc2stU1FMQWxjaGVteQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pip install Flask-SQLAlchemy</pre></div><div class='content'></div><h2>Configuration</h2>
<div class='content'><p>Next, configure SQLAlchemy in your Flask application:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBmbGFzayBpbXBvcnQgRmxhc2sKZnJvbSBmbGFza19zcWxhbGNoZW15IGltcG9ydCBTUUxBbGNoZW15CgphcHAgPSBGbGFzayhfX25hbWVfXykKYXBwLmNvbmZpZ1snU1FMQUxDSEVNWV9EQVRBQkFTRV9VUkknXSA9ICdzcWxpdGU6Ly8vc2l0ZS5kYicKZGIgPSBTUUxBbGNoZW15KGFwcCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from flask import Flask
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///site.db'
db = SQLAlchemy(app)</pre></div><div class='content'><ul>
<li><code>SQLALCHEMY_DATABASE_URI</code>: This configuration key sets the database URI that should be used for the connection. In this example, we are using SQLite.</li>
</ul>
</div><h1>Creating a Basic Model</h1>
<div class='content'><p>Let's create a simple model for a <code>User</code>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgVXNlcihkYi5Nb2RlbCk6CiAgICBpZCA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQogICAgdXNlcm5hbWUgPSBkYi5Db2x1bW4oZGIuU3RyaW5nKDIwKSwgdW5pcXVlPVRydWUsIG51bGxhYmxlPUZhbHNlKQogICAgZW1haWwgPSBkYi5Db2x1bW4oZGIuU3RyaW5nKDEyMCksIHVuaXF1ZT1UcnVlLCBudWxsYWJsZT1GYWxzZSkKICAgIHBhc3N3b3JkID0gZGIuQ29sdW1uKGRiLlN0cmluZyg2MCksIG51bGxhYmxlPUZhbHNlKQoKICAgIGRlZiBfX3JlcHJfXyhzZWxmKToKICAgICAgICByZXR1cm4gZiJVc2VyKCd7c2VsZi51c2VybmFtZX0nLCAne3NlbGYuZW1haWx9Jyki"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(20), unique=True, nullable=False)
    email = db.Column(db.String(120), unique=True, nullable=False)
    password = db.Column(db.String(60), nullable=False)

    def __repr__(self):
        return f&quot;User('{self.username}', '{self.email}')&quot;</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>db.Model</code>: This is the base class for all models in SQLAlchemy.</li>
<li><code>db.Column</code>: Defines a column in the database.</li>
<li><code>db.Integer</code>, <code>db.String</code>: Specifies the type of data the column will hold.</li>
<li><code>primary_key=True</code>: Marks this column as the primary key.</li>
<li><code>unique=True</code>: Ensures all values in this column are unique.</li>
<li><code>nullable=False</code>: Ensures this column cannot be empty.</li>
</ul>
</div><h1>Creating Relationships</h1>
<div class='content'><p>Models often need to relate to each other. Let's create a <code>Post</code> model that relates to the <code>User</code> model:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgUG9zdChkYi5Nb2RlbCk6CiAgICBpZCA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQogICAgdGl0bGUgPSBkYi5Db2x1bW4oZGIuU3RyaW5nKDEwMCksIG51bGxhYmxlPUZhbHNlKQogICAgZGF0ZV9wb3N0ZWQgPSBkYi5Db2x1bW4oZGIuRGF0ZVRpbWUsIG51bGxhYmxlPUZhbHNlLCBkZWZhdWx0PWRhdGV0aW1lLnV0Y25vdykKICAgIGNvbnRlbnQgPSBkYi5Db2x1bW4oZGIuVGV4dCwgbnVsbGFibGU9RmFsc2UpCiAgICB1c2VyX2lkID0gZGIuQ29sdW1uKGRiLkludGVnZXIsIGRiLkZvcmVpZ25LZXkoJ3VzZXIuaWQnKSwgbnVsbGFibGU9RmFsc2UpCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBmIlBvc3QoJ3tzZWxmLnRpdGxlfScsICd7c2VsZi5kYXRlX3Bvc3RlZH0nKSI="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Post(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(100), nullable=False)
    date_posted = db.Column(db.DateTime, nullable=False, default=datetime.utcnow)
    content = db.Column(db.Text, nullable=False)
    user_id = db.Column(db.Integer, db.ForeignKey('user.id'), nullable=False)

    def __repr__(self):
        return f&quot;Post('{self.title}', '{self.date_posted}')&quot;</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>db.ForeignKey('user.id')</code>: This creates a foreign key constraint, linking the <code>user_id</code> column in the <code>Post</code> model to the <code>id</code> column in the <code>User</code> model.</li>
</ul>
</div><h1>Advanced Model Features</h1>
<div class='content'></div><h2>Adding Methods to Models</h2>
<div class='content'><p>You can add methods to your models to encapsulate business logic. For example, a method to set the password hash:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSB3ZXJremV1Zy5zZWN1cml0eSBpbXBvcnQgZ2VuZXJhdGVfcGFzc3dvcmRfaGFzaCwgY2hlY2tfcGFzc3dvcmRfaGFzaAoKY2xhc3MgVXNlcihkYi5Nb2RlbCk6CiAgICAjIC4uLiBwcmV2aW91cyBmaWVsZHMgLi4uCgogICAgZGVmIHNldF9wYXNzd29yZChzZWxmLCBwYXNzd29yZCk6CiAgICAgICAgc2VsZi5wYXNzd29yZCA9IGdlbmVyYXRlX3Bhc3N3b3JkX2hhc2gocGFzc3dvcmQpCgogICAgZGVmIGNoZWNrX3Bhc3N3b3JkKHNlbGYsIHBhc3N3b3JkKToKICAgICAgICByZXR1cm4gY2hlY2tfcGFzc3dvcmRfaGFzaChzZWxmLnBhc3N3b3JkLCBwYXNzd29yZCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from werkzeug.security import generate_password_hash, check_password_hash

class User(db.Model):
    # ... previous fields ...

    def set_password(self, password):
        self.password = generate_password_hash(password)

    def check_password(self, password):
        return check_password_hash(self.password, password)</pre></div><div class='content'></div><h2>Using Mixins for Reusability</h2>
<div class='content'><p>Mixins allow you to reuse common fields and methods across multiple models:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgVGltZXN0YW1wTWl4aW4ob2JqZWN0KToKICAgIGNyZWF0ZWRfYXQgPSBkYi5Db2x1bW4oZGIuRGF0ZVRpbWUsIGRlZmF1bHQ9ZGF0ZXRpbWUudXRjbm93KQogICAgdXBkYXRlZF9hdCA9IGRiLkNvbHVtbihkYi5EYXRlVGltZSwgZGVmYXVsdD1kYXRldGltZS51dGNub3csIG9udXBkYXRlPWRhdGV0aW1lLnV0Y25vdykKCmNsYXNzIFVzZXIoZGIuTW9kZWwsIFRpbWVzdGFtcE1peGluKToKICAgICMgLi4uIHByZXZpb3VzIGZpZWxkcyAuLi4KCmNsYXNzIFBvc3QoZGIuTW9kZWwsIFRpbWVzdGFtcE1peGluKToKICAgICMgLi4uIHByZXZpb3VzIGZpZWxkcyAuLi4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class TimestampMixin(object):
    created_at = db.Column(db.DateTime, default=datetime.utcnow)
    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)

class User(db.Model, TimestampMixin):
    # ... previous fields ...

class Post(db.Model, TimestampMixin):
    # ... previous fields ...</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>In this section, we covered the basics of creating models in Flask using SQLAlchemy. We started with setting up SQLAlchemy, creating basic models, and establishing relationships between models. We also explored advanced features like adding methods to models and using mixins for reusability.</p>
<p>By understanding these concepts, you can effectively manage the data layer of your Flask applications, ensuring that your data is well-structured and easily accessible.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='setting-up-database'>&#x25C4;Setting Up a Database</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Creating Models</a>
	</div>
	<div class='col-4 text-end'>
					<a href='performing-crud-operations'>Performing CRUD Operations &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
