<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performing CRUD Operations</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flask/performing-crud-operations" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flask/performing-crud-operations" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flask/performing-crud-operations" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/flask/performing-crud-operations" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/flask/performing-crud-operations" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='creating-models'>&#x25C4;Creating Models</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Performing CRUD Operations</a>
	</div>
	<div class='col-4 text-end'>
					<a href='user-authentication'>User Authentication &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In this section, we will explore how to perform CRUD (Create, Read, Update, Delete) operations using Flask. CRUD operations are fundamental to web applications, allowing users to interact with the database. We'll cover each operation step-by-step, providing code examples and explanations to ensure you understand how to implement them in your Flask application.</p>
</div><h1>Setting Up the Environment</h1>
<div class='content'><p>Before we dive into CRUD operations, let's set up our Flask environment.</p>
<ol>
<li>
<p><strong>Install Flask and SQLAlchemy</strong>:</p>
<pre><code class="language-bash">pip install Flask SQLAlchemy
</code></pre>
</li>
<li>
<p><strong>Create a basic Flask application</strong>:</p>
<pre><code class="language-python">from flask import Flask
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///test.db'
db = SQLAlchemy(app)

if __name__ == '__main__':
    app.run(debug=True)
</code></pre>
</li>
</ol>
</div><h1>Creating the Database Model</h1>
<div class='content'><p>Define a model for the database. For this example, we'll create a simple <code>User</code> model.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgVXNlcihkYi5Nb2RlbCk6CiAgICBpZCA9IGRiLkNvbHVtbihkYi5JbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQogICAgbmFtZSA9IGRiLkNvbHVtbihkYi5TdHJpbmcoODApLCBudWxsYWJsZT1GYWxzZSkKICAgIGVtYWlsID0gZGIuQ29sdW1uKGRiLlN0cmluZygxMjApLCB1bmlxdWU9VHJ1ZSwgbnVsbGFibGU9RmFsc2UpCgogICAgZGVmIF9fcmVwcl9fKHNlbGYpOgogICAgICAgIHJldHVybiBmJzxVc2VyIHtzZWxmLm5hbWV9Pic="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(80), nullable=False)
    email = db.Column(db.String(120), unique=True, nullable=False)

    def __repr__(self):
        return f'&lt;User {self.name}&gt;'</pre></div><div class='content'><p>Run the following commands to create the database:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSB5b3VyX2FwcGxpY2F0aW9uIGltcG9ydCBkYgpkYi5jcmVhdGVfYWxsKCk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from your_application import db
db.create_all()</pre></div><div class='content'></div><h1>Create Operation</h1>
<div class='content'><p>To add new users to the database, we need to create a route that handles the creation of new <code>User</code> instances.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGFwcC5yb3V0ZSgnL3VzZXInLCBtZXRob2RzPVsnUE9TVCddKQpkZWYgY3JlYXRlX3VzZXIoKToKICAgIG5hbWUgPSByZXF1ZXN0Lmpzb25bJ25hbWUnXQogICAgZW1haWwgPSByZXF1ZXN0Lmpzb25bJ2VtYWlsJ10KICAgIG5ld191c2VyID0gVXNlcihuYW1lPW5hbWUsIGVtYWlsPWVtYWlsKQoKICAgIHRyeToKICAgICAgICBkYi5zZXNzaW9uLmFkZChuZXdfdXNlcikKICAgICAgICBkYi5zZXNzaW9uLmNvbW1pdCgpCiAgICAgICAgcmV0dXJuIHsibWVzc2FnZSI6ICJVc2VyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5In0sIDIwMQogICAgZXhjZXB0OgogICAgICAgIHJldHVybiB7Im1lc3NhZ2UiOiAiVGhlcmUgd2FzIGFuIGlzc3VlIGNyZWF0aW5nIHRoZSB1c2VyIn0sIDUwMA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@app.route('/user', methods=['POST'])
def create_user():
    name = request.json['name']
    email = request.json['email']
    new_user = User(name=name, email=email)

    try:
        db.session.add(new_user)
        db.session.commit()
        return {&quot;message&quot;: &quot;User created successfully&quot;}, 201
    except:
        return {&quot;message&quot;: &quot;There was an issue creating the user&quot;}, 500</pre></div><div class='content'></div><h1>Read Operation</h1>
<div class='content'><p>To read or retrieve users from the database, we can create routes to get all users or a specific user by ID.</p>
<ul>
<li>
<p><strong>Get all users</strong>:</p>
<pre><code class="language-python">@app.route('/users', methods=['GET'])
def get_users():
    users = User.query.all()
    return {&quot;users&quot;: [{&quot;id&quot;: user.id, &quot;name&quot;: user.name, &quot;email&quot;: user.email} for user in users]}
</code></pre>
</li>
<li>
<p><strong>Get user by ID</strong>:</p>
<pre><code class="language-python">@app.route('/user/&lt;int:id&gt;', methods=['GET'])
def get_user(id):
    user = User.query.get_or_404(id)
    return {&quot;id&quot;: user.id, &quot;name&quot;: user.name, &quot;email&quot;: user.email}
</code></pre>
</li>
</ul>
</div><h1>Update Operation</h1>
<div class='content'><p>To update an existing user, we need to create a route that handles the update logic.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGFwcC5yb3V0ZSgnL3VzZXIvPGludDppZD4nLCBtZXRob2RzPVsnUFVUJ10pCmRlZiB1cGRhdGVfdXNlcihpZCk6CiAgICB1c2VyID0gVXNlci5xdWVyeS5nZXRfb3JfNDA0KGlkKQogICAgbmFtZSA9IHJlcXVlc3QuanNvblsnbmFtZSddCiAgICBlbWFpbCA9IHJlcXVlc3QuanNvblsnZW1haWwnXQoKICAgIHRyeToKICAgICAgICB1c2VyLm5hbWUgPSBuYW1lCiAgICAgICAgdXNlci5lbWFpbCA9IGVtYWlsCiAgICAgICAgZGIuc2Vzc2lvbi5jb21taXQoKQogICAgICAgIHJldHVybiB7Im1lc3NhZ2UiOiAiVXNlciB1cGRhdGVkIHN1Y2Nlc3NmdWxseSJ9CiAgICBleGNlcHQ6CiAgICAgICAgcmV0dXJuIHsibWVzc2FnZSI6ICJUaGVyZSB3YXMgYW4gaXNzdWUgdXBkYXRpbmcgdGhlIHVzZXIifSwgNTAw"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@app.route('/user/&lt;int:id&gt;', methods=['PUT'])
def update_user(id):
    user = User.query.get_or_404(id)
    name = request.json['name']
    email = request.json['email']

    try:
        user.name = name
        user.email = email
        db.session.commit()
        return {&quot;message&quot;: &quot;User updated successfully&quot;}
    except:
        return {&quot;message&quot;: &quot;There was an issue updating the user&quot;}, 500</pre></div><div class='content'></div><h1>Delete Operation</h1>
<div class='content'><p>To delete a user from the database, we need to create a route that handles the deletion.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QGFwcC5yb3V0ZSgnL3VzZXIvPGludDppZD4nLCBtZXRob2RzPVsnREVMRVRFJ10pCmRlZiBkZWxldGVfdXNlcihpZCk6CiAgICB1c2VyID0gVXNlci5xdWVyeS5nZXRfb3JfNDA0KGlkKQoKICAgIHRyeToKICAgICAgICBkYi5zZXNzaW9uLmRlbGV0ZSh1c2VyKQogICAgICAgIGRiLnNlc3Npb24uY29tbWl0KCkKICAgICAgICByZXR1cm4geyJtZXNzYWdlIjogIlVzZXIgZGVsZXRlZCBzdWNjZXNzZnVsbHkifQogICAgZXhjZXB0OgogICAgICAgIHJldHVybiB7Im1lc3NhZ2UiOiAiVGhlcmUgd2FzIGFuIGlzc3VlIGRlbGV0aW5nIHRoZSB1c2VyIn0sIDUwMA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@app.route('/user/&lt;int:id&gt;', methods=['DELETE'])
def delete_user(id):
    user = User.query.get_or_404(id)

    try:
        db.session.delete(user)
        db.session.commit()
        return {&quot;message&quot;: &quot;User deleted successfully&quot;}
    except:
        return {&quot;message&quot;: &quot;There was an issue deleting the user&quot;}, 500</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered how to perform CRUD operations in a Flask application using SQLAlchemy. We learned how to:</p>
<ul>
<li>Set up the Flask environment and database.</li>
<li>Create a database model.</li>
<li>Implement routes for creating, reading, updating, and deleting records.</li>
</ul>
<p>Understanding CRUD operations is essential for building dynamic web applications. Practice these concepts to solidify your understanding and apply them to your projects.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='creating-models'>&#x25C4;Creating Models</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Performing CRUD Operations</a>
	</div>
	<div class='col-4 text-end'>
					<a href='user-authentication'>User Authentication &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
