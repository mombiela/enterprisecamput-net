<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Coverage</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flask/09-03-test-coverage" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flask/09-03-test-coverage" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flask/09-03-test-coverage" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/flask/09-03-test-coverage" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/flask/09-03-test-coverage" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='09-02-integration-testing' title="Integration Testing">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Test Coverage</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='09-04-best-practices' title="Best Practices for Flask Development">Next &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Test coverage is a metric used to measure the amount of code being tested by your test suite. It helps ensure that your application is thoroughly tested and can highlight untested parts of your codebase. In this section, we will cover the following:</p>
<ol>
<li>What is test coverage?</li>
<li>Tools for measuring test coverage in Flask.</li>
<li>How to generate a test coverage report.</li>
<li>Analyzing and improving test coverage.</li>
</ol>
</div><h1>1. What is Test Coverage?</h1>
<div class='content'><p>Test coverage is a measure of how much of your code is executed when your tests run. It is usually expressed as a percentage. Higher test coverage means more of your code is being tested, which can lead to more reliable and maintainable software.</p>
</div><h2>Types of Test Coverage</h2>
<div class='content'><ul>
<li><strong>Line Coverage</strong>: Measures the percentage of lines of code executed.</li>
<li><strong>Branch Coverage</strong>: Measures the percentage of branches (if/else statements) executed.</li>
<li><strong>Function Coverage</strong>: Measures the percentage of functions executed.</li>
<li><strong>Statement Coverage</strong>: Measures the percentage of executable statements executed.</li>
</ul>
</div><h1>2. Tools for Measuring Test Coverage in Flask</h1>
<div class='content'><p>Several tools can be used to measure test coverage in a Flask application. One of the most popular tools is <code>coverage.py</code>.</p>
</div><h2>Installing `coverage.py`</h2>
<div class='content'><p>You can install <code>coverage.py</code> using pip:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwIGluc3RhbGwgY292ZXJhZ2U="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pip install coverage</pre></div><div class='content'></div><h1>3. How to Generate a Test Coverage Report</h1>
<div class='content'></div><h2>Step-by-Step Guide</h2>
<div class='content'><ol>
<li>
<p><strong>Run Your Tests with Coverage</strong>:
Use the <code>coverage run</code> command to run your tests. This will collect coverage data.</p>
<pre><code class="language-bash">coverage run -m unittest discover
</code></pre>
<p>This command runs all tests discovered in the current directory using the <code>unittest</code> framework.</p>
</li>
<li>
<p><strong>Generate the Coverage Report</strong>:
After running your tests, generate a coverage report using the <code>coverage report</code> command.</p>
<pre><code class="language-bash">coverage report
</code></pre>
<p>This will display a summary of the coverage in the terminal.</p>
</li>
<li>
<p><strong>Generate an HTML Report</strong>:
For a more detailed view, you can generate an HTML report.</p>
<pre><code class="language-bash">coverage html
</code></pre>
<p>This will create an <code>htmlcov</code> directory containing the HTML files. Open <code>htmlcov/index.html</code> in your browser to view the report.</p>
</li>
</ol>
</div><h2>Example</h2>
<div class='content'><p>Let's consider a simple Flask application and its test suite.</p>
<p><strong>app.py</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIGpzb25pZnkKCmFwcCA9IEZsYXNrKF9fbmFtZV9fKQoKQGFwcC5yb3V0ZSgnLycpCmRlZiBob21lKCk6CiAgICByZXR1cm4ganNvbmlmeShtZXNzYWdlPSJIZWxsbywgV29ybGQhIikKCkBhcHAucm91dGUoJy9hZGQvPGludDphPi88aW50OmI+JykKZGVmIGFkZChhLCBiKToKICAgIHJldHVybiBqc29uaWZ5KHJlc3VsdD1hICsgYikKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICBhcHAucnVuKGRlYnVnPVRydWUp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from flask import Flask, jsonify

app = Flask(__name__)

@app.route('/')
def home():
    return jsonify(message=&quot;Hello, World!&quot;)

@app.route('/add/&lt;int:a&gt;/&lt;int:b&gt;')
def add(a, b):
    return jsonify(result=a + b)

if __name__ == '__main__':
    app.run(debug=True)</pre></div><div class='content'><p><strong>test_app.py</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHVuaXR0ZXN0CmZyb20gYXBwIGltcG9ydCBhcHAKCmNsYXNzIEJhc2ljVGVzdHModW5pdHRlc3QuVGVzdENhc2UpOgoKICAgIGRlZiBzZXRVcChzZWxmKToKICAgICAgICBzZWxmLmFwcCA9IGFwcC50ZXN0X2NsaWVudCgpCiAgICAgICAgc2VsZi5hcHAudGVzdGluZyA9IFRydWUKCiAgICBkZWYgdGVzdF9ob21lKHNlbGYpOgogICAgICAgIHJlc3BvbnNlID0gc2VsZi5hcHAuZ2V0KCcvJykKICAgICAgICBzZWxmLmFzc2VydEVxdWFsKHJlc3BvbnNlLnN0YXR1c19jb2RlLCAyMDApCiAgICAgICAgc2VsZi5hc3NlcnRJbihiJ0hlbGxvLCBXb3JsZCEnLCByZXNwb25zZS5kYXRhKQoKICAgIGRlZiB0ZXN0X2FkZChzZWxmKToKICAgICAgICByZXNwb25zZSA9IHNlbGYuYXBwLmdldCgnL2FkZC8xLzInKQogICAgICAgIHNlbGYuYXNzZXJ0RXF1YWwocmVzcG9uc2Uuc3RhdHVzX2NvZGUsIDIwMCkKICAgICAgICBzZWxmLmFzc2VydEluKGInMycsIHJlc3BvbnNlLmRhdGEpCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgdW5pdHRlc3QubWFpbigp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import unittest
from app import app

class BasicTests(unittest.TestCase):

    def setUp(self):
        self.app = app.test_client()
        self.app.testing = True

    def test_home(self):
        response = self.app.get('/')
        self.assertEqual(response.status_code, 200)
        self.assertIn(b'Hello, World!', response.data)

    def test_add(self):
        response = self.app.get('/add/1/2')
        self.assertEqual(response.status_code, 200)
        self.assertIn(b'3', response.data)

if __name__ == &quot;__main__&quot;:
    unittest.main()</pre></div><div class='content'><p>Run the tests with coverage:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y292ZXJhZ2UgcnVuIC1tIHVuaXR0ZXN0IGRpc2NvdmVy"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>coverage run -m unittest discover</pre></div><div class='content'><p>Generate the report:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y292ZXJhZ2UgcmVwb3J0"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>coverage report</pre></div><div class='content'><p>Generate the HTML report:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y292ZXJhZ2UgaHRtbA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>coverage html</pre></div><div class='content'></div><h1>4. Analyzing and Improving Test Coverage</h1>
<div class='content'></div><h2>Analyzing the Report</h2>
<div class='content'><p>Open the HTML report in your browser. It will show you which lines of code were executed and which were not. Lines that were not executed will be highlighted in red.</p>
</div><h2>Improving Coverage</h2>
<div class='content'><ul>
<li><strong>Identify Gaps</strong>: Look for untested parts of your code in the coverage report.</li>
<li><strong>Write More Tests</strong>: Add tests to cover the untested code.</li>
<li><strong>Refactor</strong>: Simplify complex code to make it easier to test.</li>
</ul>
</div><h2>Common Areas to Focus On</h2>
<div class='content'><ul>
<li><strong>Edge Cases</strong>: Ensure you test edge cases and error conditions.</li>
<li><strong>Branches</strong>: Test all branches of conditional statements.</li>
<li><strong>Functions</strong>: Ensure all functions are called in your tests.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Test coverage is a crucial aspect of maintaining a reliable and maintainable Flask application. By measuring and improving test coverage, you can ensure that your application is thoroughly tested and robust. Use tools like <code>coverage.py</code> to generate coverage reports and identify areas for improvement. Remember, while high test coverage is desirable, it is also important to write meaningful tests that validate the correctness of your application.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='09-02-integration-testing' title="Integration Testing">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='09-04-best-practices' title="Best Practices for Flask Development">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
