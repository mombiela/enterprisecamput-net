<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Database Optimization in Flask</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flask/database-optimization" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flask/database-optimization" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flask/database-optimization" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/flask/database-optimization" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/flask/database-optimization" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='caching-strategies'>&#x25C4;Caching Strategies</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Database Optimization in Flask</a>
	</div>
	<div class='col-4 text-end'>
					<a href='asynchronous-tasks-celery'>Asynchronous Tasks with Celery &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Database Optimization</h1>
<div class='content'><p>Database optimization is crucial for ensuring that your Flask application runs efficiently, especially as the amount of data and the number of users grow. This section will cover the basics of database optimization, including why it is important and the fundamental concepts you need to understand.</p>
<ul>
<li>
<p><strong>Why Optimize?</strong></p>
<ul>
<li>Improve application performance.</li>
<li>Reduce server load and costs.</li>
<li>Enhance user experience with faster response times.</li>
</ul>
</li>
<li>
<p><strong>Key Concepts</strong></p>
<ul>
<li>Indexing</li>
<li>Query Optimization</li>
<li>Caching</li>
<li>Database Normalization</li>
<li>Connection Pooling</li>
</ul>
</li>
</ul>
</div><h1>Indexing</h1>
<div class='content'><p>Indexes are special data structures that improve the speed of data retrieval operations on a database table at the cost of additional storage space and slower write operations.</p>
<ul>
<li>
<p><strong>Creating Indexes</strong></p>
<pre><code class="language-python">from flask_sqlalchemy import SQLAlchemy

db = SQLAlchemy()

class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(80), index=True)  # Index on username
    email = db.Column(db.String(120), unique=True, index=True)  # Unique index on email
</code></pre>
</li>
<li>
<p><strong>Benefits</strong></p>
<ul>
<li>Faster search operations.</li>
<li>Efficient sorting and filtering.</li>
</ul>
</li>
<li>
<p><strong>Drawbacks</strong></p>
<ul>
<li>Increased storage requirements.</li>
<li>Slower insert, update, and delete operations.</li>
</ul>
</li>
</ul>
</div><h1>Query Optimization</h1>
<div class='content'><p>Optimizing your SQL queries can significantly improve the performance of your Flask application.</p>
<ul>
<li>
<p><strong>Use SELECT Statements Wisely</strong></p>
<pre><code class="language-python"># Inefficient query
users = User.query.all()

# Efficient query
users = User.query.filter_by(active=True).all()
</code></pre>
</li>
<li>
<p><strong>Avoid N+1 Query Problem</strong></p>
<pre><code class="language-python"># Inefficient query
users = User.query.all()
for user in users:
    print(user.profile)

# Efficient query using join
users = User.query.join(Profile).all()
for user in users:
    print(user.profile)
</code></pre>
</li>
<li>
<p><strong>Use Pagination</strong></p>
<pre><code class="language-python"># Fetching all records at once
users = User.query.all()

# Fetching records in pages
users = User.query.paginate(page=1, per_page=10).items
</code></pre>
</li>
</ul>
</div><h1>Caching</h1>
<div class='content'><p>Caching can significantly reduce the load on your database by storing frequently accessed data in memory.</p>
<ul>
<li>
<p><strong>Using Flask-Caching</strong></p>
<pre><code class="language-python">from flask_caching import Cache

cache = Cache(config={'CACHE_TYPE': 'simple'})

@app.route('/user/&lt;int:user_id&gt;')
@cache.cached(timeout=60)
def get_user(user_id):
    user = User.query.get(user_id)
    return jsonify(user)
</code></pre>
</li>
<li>
<p><strong>Benefits</strong></p>
<ul>
<li>Reduced database load.</li>
<li>Faster response times.</li>
</ul>
</li>
<li>
<p><strong>Drawbacks</strong></p>
<ul>
<li>Cache invalidation complexity.</li>
<li>Potential for stale data.</li>
</ul>
</li>
</ul>
</div><h1>Database Normalization</h1>
<div class='content'><p>Normalization is the process of organizing the fields and tables of a relational database to minimize redundancy and dependency.</p>
<ul>
<li>
<p><strong>Normalization Forms</strong></p>
<ul>
<li>First Normal Form (1NF)</li>
<li>Second Normal Form (2NF)</li>
<li>Third Normal Form (3NF)</li>
</ul>
</li>
<li>
<p><strong>Example</strong></p>
<pre><code class="language-python"># Unnormalized table
class Order(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    customer_name = db.Column(db.String(80))
    product_name = db.Column(db.String(80))

# Normalized tables
class Customer(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(80))

class Product(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(80))

class Order(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    customer_id = db.Column(db.Integer, db.ForeignKey('customer.id'))
    product_id = db.Column(db.Integer, db.ForeignKey('product.id'))
</code></pre>
</li>
</ul>
</div><h1>Connection Pooling</h1>
<div class='content'><p>Connection pooling refers to the practice of maintaining a cache of database connections so that connections can be reused when future requests to the database are required.</p>
<ul>
<li>
<p><strong>Using SQLAlchemy Connection Pooling</strong></p>
<pre><code class="language-python">app.config['SQLALCHEMY_DATABASE_URI'] = 'mysql+pymysql://user:password@localhost/dbname'
app.config['SQLALCHEMY_POOL_SIZE'] = 10
app.config['SQLALCHEMY_POOL_TIMEOUT'] = 30
</code></pre>
</li>
<li>
<p><strong>Benefits</strong></p>
<ul>
<li>Reduced connection overhead.</li>
<li>Improved performance for high-traffic applications.</li>
</ul>
</li>
<li>
<p><strong>Drawbacks</strong></p>
<ul>
<li>Complexity in managing pool size and timeouts.</li>
</ul>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Database optimization is a critical aspect of developing efficient and scalable Flask applications. By understanding and implementing techniques such as indexing, query optimization, caching, normalization, and connection pooling, you can significantly improve the performance and reliability of your application. Remember to always monitor and profile your database queries to identify and address performance bottlenecks.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='caching-strategies'>&#x25C4;Caching Strategies</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Database Optimization in Flask</a>
	</div>
	<div class='col-4 text-end'>
					<a href='asynchronous-tasks-celery'>Asynchronous Tasks with Celery &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
