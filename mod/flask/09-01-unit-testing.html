<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    <title>Unit Testing with Flask</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flask/09-01-unit-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flask/09-01-unit-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flask/09-01-unit-testing" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.ea63f62b9e.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "flask";
  		var TEMA_NAME = "9-1";
  		var TYPE = "mod";
  		var PATH = "mod/flask/09-01-unit-testing";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.86da6c742a.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/flask/09-01-unit-testing" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/flask/09-01-unit-testing" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my_modules" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/end_modules" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="flask">
		<a  href="#" class="text-secondary d-none" data-read-mod="flask" data-read-unit="9-1" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="flask" data-unread-unit="9-1" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='08-04-monitoring-performance' title="Monitoring and Performance Tuning" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='08-04-monitoring-performance' title="Monitoring and Performance Tuning" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">Unit Testing with Flask</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='09-02-integration-testing' title="Integration Testing" class="py-2 px-3 btn btn-primary"
				data-read-mod="flask" data-read-unit="9-1">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='09-02-integration-testing' title="Integration Testing" class="py-2 px-3 btn btn-primary" 
				data-read-mod="flask" data-read-unit="9-1">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>Unit testing is a crucial part of software development that ensures individual components of your application work as expected. In this section, we will cover the basics of unit testing in Flask, including setting up your testing environment, writing test cases, and running tests.</p>
</div><h1>What is Unit Testing?</h1>
<div class='content'><p>Unit testing involves testing individual units or components of a software application in isolation. The goal is to validate that each unit performs as expected. In the context of a Flask application, a unit could be a function, a route, or a model.</p>
</div><h1>Setting Up Your Testing Environment</h1>
<div class='content'><p>Before you can start writing tests, you need to set up your testing environment. Flask provides a built-in testing client that makes it easy to simulate requests to your application.</p>
</div><h2>Step-by-Step Setup</h2>
<div class='content'><ol>
<li>
<p><strong>Install the Required Packages</strong>:
Ensure you have <code>pytest</code> and <code>Flask-Testing</code> installed. You can install them using pip:</p>
<pre><code class="language-bash">pip install pytest Flask-Testing
</code></pre>
</li>
<li>
<p><strong>Create a Test Configuration</strong>:
Create a separate configuration for testing. This configuration will disable certain features like CSRF protection and use a different database.</p>
<pre><code class="language-python"># config.py
class TestConfig:
    TESTING = True
    SQLALCHEMY_DATABASE_URI = 'sqlite:///:memory:'
    WTF_CSRF_ENABLED = False
</code></pre>
</li>
<li>
<p><strong>Set Up the Test Structure</strong>:
Create a <code>tests</code> directory in your project root and add an <code>__init__.py</code> file to make it a package.</p>
<pre><code class="language-bash">mkdir tests
touch tests/__init__.py
</code></pre>
</li>
<li>
<p><strong>Create a Base Test Class</strong>:
Create a base test class that sets up and tears down the Flask application context for each test.</p>
<pre><code class="language-python"># tests/base.py
import unittest
from myapp import create_app, db
from config import TestConfig

class BaseTestCase(unittest.TestCase):
    def setUp(self):
        self.app = create_app(TestConfig)
        self.client = self.app.test_client()
        self.app_context = self.app.app_context()
        self.app_context.push()
        db.create_all()

    def tearDown(self):
        db.session.remove()
        db.drop_all()
        self.app_context.pop()
</code></pre>
</li>
</ol>
</div><h1>Writing Test Cases</h1>
<div class='content'><p>Now that your testing environment is set up, you can start writing test cases. Test cases are written as methods within a test class that inherits from <code>BaseTestCase</code>.</p>
</div><h2>Example: Testing a Simple Route</h2>
<div class='content'><p>Let's write a test case for a simple route that returns a &quot;Hello, World!&quot; message.</p>
<ol>
<li>
<p><strong>Create a Test File</strong>:
Create a new test file in the <code>tests</code> directory.</p>
<pre><code class="language-bash">touch tests/test_routes.py
</code></pre>
</li>
<li>
<p><strong>Write the Test Case</strong>:</p>
<pre><code class="language-python"># tests/test_routes.py
from tests.base import BaseTestCase

class TestRoutes(BaseTestCase):
    def test_hello_route(self):
        response = self.client.get('/hello')
        self.assertEqual(response.status_code, 200)
        self.assertIn(b'Hello, World!', response.data)
</code></pre>
</li>
<li>
<p><strong>Run the Test</strong>:
Use <code>pytest</code> to run your tests.</p>
<pre><code class="language-bash">pytest
</code></pre>
</li>
</ol>
</div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong><code>self.client.get('/hello')</code></strong>: This line simulates a GET request to the <code>/hello</code> route.</li>
<li><strong><code>self.assertEqual(response.status_code, 200)</code></strong>: This assertion checks that the response status code is 200 (OK).</li>
<li><strong><code>self.assertIn(b'Hello, World!', response.data)</code></strong>: This assertion checks that the response data contains the byte string <code>b'Hello, World!'</code>.</li>
</ul>
</div><h1>Practical Exercises</h1>
<div class='content'></div><h2>Exercise 1: Test a POST Route</h2>
<div class='content'><p><strong>Task</strong>: Write a test case for a POST route that accepts JSON data and returns a success message.</p>
<ol>
<li>
<p><strong>Create the Route</strong>:</p>
<pre><code class="language-python"># myapp/routes.py
from flask import Flask, request, jsonify

app = Flask(__name__)

@app.route('/submit', methods=['POST'])
def submit():
    data = request.get_json()
    return jsonify({'message': 'Data received', 'data': data}), 200
</code></pre>
</li>
<li>
<p><strong>Write the Test Case</strong>:</p>
<pre><code class="language-python"># tests/test_routes.py
class TestRoutes(BaseTestCase):
    def test_submit_route(self):
        response = self.client.post('/submit', json={'key': 'value'})
        self.assertEqual(response.status_code, 200)
        self.assertIn(b'Data received', response.data)
        self.assertIn(b'&quot;key&quot;: &quot;value&quot;', response.data)
</code></pre>
</li>
<li>
<p><strong>Run the Test</strong>:</p>
<pre><code class="language-bash">pytest
</code></pre>
</li>
</ol>
</div><h2>Solution Explanation</h2>
<div class='content'><ul>
<li><strong><code>self.client.post('/submit', json={'key': 'value'})</code></strong>: This line simulates a POST request to the <code>/submit</code> route with JSON data.</li>
<li><strong><code>self.assertEqual(response.status_code, 200)</code></strong>: This assertion checks that the response status code is 200 (OK).</li>
<li><strong><code>self.assertIn(b'Data received', response.data)</code></strong>: This assertion checks that the response data contains the byte string <code>b'Data received'</code>.</li>
<li><strong><code>self.assertIn(b'&quot;key&quot;: &quot;value&quot;', response.data)</code></strong>: This assertion checks that the response data contains the byte string representation of the JSON data.</li>
</ul>
</div><h1>Common Mistakes and Tips</h1>
<div class='content'><ul>
<li><strong>Not Isolating Tests</strong>: Ensure each test is independent and does not rely on the state left by other tests.</li>
<li><strong>Ignoring Edge Cases</strong>: Test for edge cases and invalid inputs to ensure your application handles them gracefully.</li>
<li><strong>Not Using Test Configurations</strong>: Use a separate configuration for testing to avoid affecting your development or production environment.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this section, you learned how to set up a testing environment for a Flask application, write unit tests, and run them using <code>pytest</code>. Unit testing is an essential practice that helps ensure the reliability and correctness of your application. In the next section, we will delve into integration testing to test how different parts of your application work together.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='08-04-monitoring-performance' title="Monitoring and Performance Tuning" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='08-04-monitoring-performance' title="Monitoring and Performance Tuning" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='09-02-integration-testing' title="Integration Testing" class="py-2 px-3 btn btn-primary"
				data-read-mod="flask" data-read-unit="9-1">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='09-02-integration-testing' title="Integration Testing" class="py-2 px-3 btn btn-primary" 
				data-read-mod="flask" data-read-unit="9-1">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Flask Web Development Course</h1>
<h2>Module 1: Introduction to Flask</h2>
<ul>
<li><a href="01-01-what-is-flask">What is Flask?</a></li>
<li><a href="01-02-setting-up-environment">Setting Up Your Development Environment</a></li>
<li><a href="01-03-first-flask-app">Creating Your First Flask Application</a></li>
<li><a href="01-04-flask-app-structure">Understanding Flask Application Structure</a></li>
</ul>
<h2>Module 2: Basic Flask Concepts</h2>
<ul>
<li><a href="02-01-routing-url-mapping">Routing and URL Mapping</a></li>
<li><a href="02-02-handling-http-methods">Handling HTTP Methods</a></li>
<li><a href="02-03-rendering-templates">Rendering Templates with Jinja2</a></li>
<li><a href="02-04-static-files">Working with Static Files</a></li>
</ul>
<h2>Module 3: Forms and User Input</h2>
<ul>
<li><a href="03-01-creating-handling-forms">Creating and Handling Forms</a></li>
<li><a href="03-02-form-validation-wtforms">Form Validation with WTForms</a></li>
<li><a href="03-03-file-uploads">File Uploads</a></li>
</ul>
<h2>Module 4: Database Integration</h2>
<ul>
<li><a href="04-01-intro-flask-sqlalchemy">Introduction to Flask-SQLAlchemy</a></li>
<li><a href="04-02-defining-models">Defining Models</a></li>
<li><a href="04-03-crud-operations">Performing CRUD Operations</a></li>
<li><a href="04-04-database-migrations">Database Migrations with Flask-Migrate</a></li>
</ul>
<h2>Module 5: User Authentication</h2>
<ul>
<li><a href="05-01-user-registration">User Registration</a></li>
<li><a href="05-02-user-login-logout">User Login and Logout</a></li>
<li><a href="05-03-password-hashing">Password Hashing</a></li>
<li><a href="05-04-user-session-management">User Session Management</a></li>
</ul>
<h2>Module 6: Advanced Flask Concepts</h2>
<ul>
<li><a href="06-01-blueprints">Blueprints for Large Applications</a></li>
<li><a href="06-02-error-handling">Error Handling</a></li>
<li><a href="06-03-custom-error-pages">Custom Error Pages</a></li>
<li><a href="06-04-logging-debugging">Logging and Debugging</a></li>
</ul>
<h2>Module 7: RESTful APIs with Flask</h2>
<ul>
<li><a href="07-01-intro-restful-apis">Introduction to RESTful APIs</a></li>
<li><a href="07-02-creating-restful-endpoints">Creating RESTful Endpoints</a></li>
<li><a href="07-03-handling-json-data">Handling JSON Data</a></li>
<li><a href="07-04-authentication-apis">Authentication for APIs</a></li>
</ul>
<h2>Module 8: Deployment and Production</h2>
<ul>
<li><a href="08-01-configuring-production">Configuring Flask for Production</a></li>
<li><a href="08-02-deploying-heroku">Deploying to Heroku</a></li>
<li><a href="08-03-deploying-aws">Deploying to AWS</a></li>
<li><a href="08-04-monitoring-performance">Monitoring and Performance Tuning</a></li>
</ul>
<h2>Module 9: Testing and Best Practices</h2>
<ul>
<li><a href="09-01-unit-testing">Unit Testing with Flask</a></li>
<li><a href="09-02-integration-testing">Integration Testing</a></li>
<li><a href="09-03-test-coverage">Test Coverage</a></li>
<li><a href="09-04-best-practices">Best Practices for Flask Development</a></li>
</ul>
<h2>Module 10: Flask Extensions and Ecosystem</h2>
<ul>
<li><a href="10-01-popular-extensions">Popular Flask Extensions</a></li>
<li><a href="10-02-flask-mail">Using Flask-Mail for Email</a></li>
<li><a href="10-03-flask-admin">Using Flask-Admin for Admin Interfaces</a></li>
<li><a href="10-04-flask-socketio">Using Flask-SocketIO for WebSockets</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<p id="loginModalEmail"></p>
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
