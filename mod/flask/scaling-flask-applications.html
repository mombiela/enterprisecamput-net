<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scaling Flask Applications</title>

    <link rel="alternate" href="https://campusempresa.com/mod/flask/scaling-flask-applications" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/flask/scaling-flask-applications" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/flask/scaling-flask-applications" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/flask/scaling-flask-applications" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/flask/scaling-flask-applications" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='design-patterns'>&#x25C4;Design Patterns in Flask</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Scaling Flask Applications</a>
	</div>
	<div class='col-4 text-end'>
					<a href='microservices-flask'>Microservices with Flask &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Scaling a Flask application involves making sure that your application can handle increased load and traffic efficiently. This topic will cover various strategies and best practices for scaling Flask applications from a beginner to an advanced level.</p>
</div><h1>Introduction to Scaling</h1>
<div class='content'><p>Before diving into specific techniques, it's important to understand what scaling means in the context of web applications.</p>
<ul>
<li><strong>Vertical Scaling</strong>: Increasing the capacity of a single server (e.g., adding more CPU, RAM).</li>
<li><strong>Horizontal Scaling</strong>: Adding more servers to handle the load.</li>
</ul>
</div><h1>Load Balancing</h1>
<div class='content'><p>Load balancing is a key technique for horizontal scaling. It distributes incoming network traffic across multiple servers.</p>
<ul>
<li><strong>Reverse Proxy</strong>: A server that forwards client requests to other servers.</li>
<li><strong>Popular Load Balancers</strong>: Nginx, HAProxy, AWS Elastic Load Balancer.</li>
</ul>
</div><h2>Example: Setting Up Nginx as a Load Balancer</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aHR0cCB7CiAgICB1cHN0cmVhbSBmbGFza19hcHAgewogICAgICAgIHNlcnZlciAxMjcuMC4wLjE6NTAwMDsKICAgICAgICBzZXJ2ZXIgMTI3LjAuMC4xOjUwMDE7CiAgICB9CgogICAgc2VydmVyIHsKICAgICAgICBsaXN0ZW4gODA7CgogICAgICAgIGxvY2F0aW9uIC8gewogICAgICAgICAgICBwcm94eV9wYXNzIGh0dHA6Ly9mbGFza19hcHA7CiAgICAgICAgICAgIHByb3h5X3NldF9oZWFkZXIgSG9zdCAkaG9zdDsKICAgICAgICAgICAgcHJveHlfc2V0X2hlYWRlciBYLVJlYWwtSVAgJHJlbW90ZV9hZGRyOwogICAgICAgICAgICBwcm94eV9zZXRfaGVhZGVyIFgtRm9yd2FyZGVkLUZvciAkcHJveHlfYWRkX3hfZm9yd2FyZGVkX2ZvcjsKICAgICAgICAgICAgcHJveHlfc2V0X2hlYWRlciBYLUZvcndhcmRlZC1Qcm90byAkc2NoZW1lOwogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>http {
    upstream flask_app {
        server 127.0.0.1:5000;
        server 127.0.0.1:5001;
    }

    server {
        listen 80;

        location / {
            proxy_pass http://flask_app;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
    }
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>upstream flask_app</code>: Defines a group of servers.</li>
<li><code>proxy_pass http://flask_app</code>: Forwards requests to the defined server group.</li>
</ul>
</li>
</ul>
</div><h1>Database Scaling</h1>
<div class='content'><p>Databases can become a bottleneck as your application grows. There are several strategies to scale your database.</p>
<ul>
<li><strong>Read Replicas</strong>: Distribute read operations across multiple database instances.</li>
<li><strong>Sharding</strong>: Split your database into smaller, more manageable pieces.</li>
<li><strong>Caching</strong>: Use in-memory data stores like Redis or Memcached to cache frequently accessed data.</li>
</ul>
</div><h2>Example: Using Redis for Caching</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIHJlcXVlc3QKaW1wb3J0IHJlZGlzCgphcHAgPSBGbGFzayhfX25hbWVfXykKY2FjaGUgPSByZWRpcy5SZWRpcyhob3N0PSdsb2NhbGhvc3QnLCBwb3J0PTYzNzkpCgpAYXBwLnJvdXRlKCcvZGF0YScpCmRlZiBnZXRfZGF0YSgpOgogICAgZGF0YSA9IGNhY2hlLmdldCgnbXlfZGF0YScpCiAgICBpZiBub3QgZGF0YToKICAgICAgICBkYXRhID0gZmV0Y2hfZGF0YV9mcm9tX2RiKCkgICMgQXNzdW1lIHRoaXMgaXMgYSBmdW5jdGlvbiB0aGF0IGZldGNoZXMgZGF0YSBmcm9tIHRoZSBkYXRhYmFzZQogICAgICAgIGNhY2hlLnNldCgnbXlfZGF0YScsIGRhdGEpCiAgICByZXR1cm4gZGF0YQoKZGVmIGZldGNoX2RhdGFfZnJvbV9kYigpOgogICAgIyBTaW11bGF0ZSBhIGRhdGFiYXNlIGNhbGwKICAgIHJldHVybiAiRGF0YWJhc2UgRGF0YSIKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICBhcHAucnVuKGRlYnVnPVRydWUp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from flask import Flask, request
import redis

app = Flask(__name__)
cache = redis.Redis(host='localhost', port=6379)

@app.route('/data')
def get_data():
    data = cache.get('my_data')
    if not data:
        data = fetch_data_from_db()  # Assume this is a function that fetches data from the database
        cache.set('my_data', data)
    return data

def fetch_data_from_db():
    # Simulate a database call
    return &quot;Database Data&quot;

if __name__ == '__main__':
    app.run(debug=True)</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>cache.get('my_data')</code>: Attempts to get data from Redis.</li>
<li><code>cache.set('my_data', data)</code>: Stores data in Redis if not already cached.</li>
</ul>
</li>
</ul>
</div><h1>Asynchronous Task Queues</h1>
<div class='content'><p>For long-running tasks, it's better to handle them asynchronously to keep your application responsive.</p>
<ul>
<li><strong>Celery</strong>: A popular task queue for Python applications.</li>
<li><strong>Redis/RabbitMQ</strong>: Common brokers for Celery.</li>
</ul>
</div><h2>Example: Setting Up Celery with Flask</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBmbGFzayBpbXBvcnQgRmxhc2sKZnJvbSBjZWxlcnkgaW1wb3J0IENlbGVyeQoKYXBwID0gRmxhc2soX19uYW1lX18pCmFwcC5jb25maWdbJ0NFTEVSWV9CUk9LRVJfVVJMJ10gPSAncmVkaXM6Ly9sb2NhbGhvc3Q6NjM3OS8wJwphcHAuY29uZmlnWydDRUxFUllfUkVTVUxUX0JBQ0tFTkQnXSA9ICdyZWRpczovL2xvY2FsaG9zdDo2Mzc5LzAnCgpjZWxlcnkgPSBDZWxlcnkoYXBwLm5hbWUsIGJyb2tlcj1hcHAuY29uZmlnWydDRUxFUllfQlJPS0VSX1VSTCddKQpjZWxlcnkuY29uZi51cGRhdGUoYXBwLmNvbmZpZykKCkBhcHAucm91dGUoJy9sb25nX3Rhc2snKQpkZWYgbG9uZ190YXNrKCk6CiAgICB0YXNrID0gYmFja2dyb3VuZF90YXNrLmFwcGx5X2FzeW5jKCkKICAgIHJldHVybiBmJ1Rhc2sgSUQ6IHt0YXNrLmlkfScKCkBjZWxlcnkudGFzawpkZWYgYmFja2dyb3VuZF90YXNrKCk6CiAgICAjIFNpbXVsYXRlIGEgbG9uZy1ydW5uaW5nIHRhc2sKICAgIGltcG9ydCB0aW1lCiAgICB0aW1lLnNsZWVwKDEwKQogICAgcmV0dXJuICdUYXNrIENvbXBsZXRlZCcKCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICBhcHAucnVuKGRlYnVnPVRydWUp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from flask import Flask
from celery import Celery

app = Flask(__name__)
app.config['CELERY_BROKER_URL'] = 'redis://localhost:6379/0'
app.config['CELERY_RESULT_BACKEND'] = 'redis://localhost:6379/0'

celery = Celery(app.name, broker=app.config['CELERY_BROKER_URL'])
celery.conf.update(app.config)

@app.route('/long_task')
def long_task():
    task = background_task.apply_async()
    return f'Task ID: {task.id}'

@celery.task
def background_task():
    # Simulate a long-running task
    import time
    time.sleep(10)
    return 'Task Completed'

if __name__ == '__main__':
    app.run(debug=True)</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>Celery(app.name, broker=app.config['CELERY_BROKER_URL'])</code>: Initializes Celery with Flask.</li>
<li><code>background_task.apply_async()</code>: Runs the task asynchronously.</li>
</ul>
</li>
</ul>
</div><h1>Monitoring and Logging</h1>
<div class='content'><p>Monitoring and logging are crucial for maintaining the health of your application.</p>
<ul>
<li><strong>Monitoring Tools</strong>: Prometheus, Grafana, New Relic.</li>
<li><strong>Logging</strong>: Use structured logging and log aggregation services like ELK Stack (Elasticsearch, Logstash, Kibana).</li>
</ul>
</div><h2>Example: Basic Logging in Flask</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGxvZ2dpbmcKZnJvbSBmbGFzayBpbXBvcnQgRmxhc2sKCmFwcCA9IEZsYXNrKF9fbmFtZV9fKQoKbG9nZ2luZy5iYXNpY0NvbmZpZyhsZXZlbD1sb2dnaW5nLklORk8pCgpAYXBwLnJvdXRlKCcvJykKZGVmIGhvbWUoKToKICAgIGFwcC5sb2dnZXIuaW5mbygnSG9tZSBwYWdlIGFjY2Vzc2VkJykKICAgIHJldHVybiAnV2VsY29tZSB0byB0aGUgSG9tZSBQYWdlJwoKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIGFwcC5ydW4oZGVidWc9VHJ1ZSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import logging
from flask import Flask

app = Flask(__name__)

logging.basicConfig(level=logging.INFO)

@app.route('/')
def home():
    app.logger.info('Home page accessed')
    return 'Welcome to the Home Page'

if __name__ == '__main__':
    app.run(debug=True)</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>logging.basicConfig(level=logging.INFO)</code>: Configures logging level.</li>
<li><code>app.logger.info('Home page accessed')</code>: Logs an informational message.</li>
</ul>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Scaling Flask applications involves a combination of techniques including load balancing, database scaling, asynchronous task queues, and effective monitoring and logging. By implementing these strategies, you can ensure that your Flask application remains performant and reliable as it grows.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='design-patterns'>&#x25C4;Design Patterns in Flask</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Scaling Flask Applications</a>
	</div>
	<div class='col-4 text-end'>
					<a href='microservices-flask'>Microservices with Flask &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
