<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Validation</title>

    <link rel="alternate" href="https://campusempresa.com/mod/tensorflow/09-02-data-validation" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/tensorflow/09-02-data-validation" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/tensorflow/09-02-data-validation" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/tensorflow/09-02-data-validation" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/tensorflow/09-02-data-validation" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='09-01-introduction-to-tfx' title="Introduction to TFX">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Data Validation</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='09-03-transforming-data' title="Transforming Data">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Data validation is a crucial step in the machine learning pipeline to ensure the quality and integrity of the data used for training and evaluation. In this section, we will explore how to perform data validation using TensorFlow Extended (TFX).</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Data Validation</strong>: The process of ensuring that the data meets certain criteria and is free from errors.</li>
<li><strong>Schema</strong>: A description of the expected structure and types of data.</li>
<li><strong>Anomalies</strong>: Deviations from the expected data schema, such as missing values, outliers, or incorrect data types.</li>
<li><strong>TFDV (TensorFlow Data Validation)</strong>: A library in TFX for exploring and validating data.</li>
</ol>
</div><h1><p>Steps for Data Validation</p>
</h1>
<div class='content'><ol>
<li><strong>Generate Statistics</strong>: Compute statistics for the dataset to understand its distribution and identify potential issues.</li>
<li><strong>Infer Schema</strong>: Automatically generate a schema based on the computed statistics.</li>
<li><strong>Detect Anomalies</strong>: Compare the dataset against the schema to detect anomalies.</li>
<li><strong>Review and Update Schema</strong>: Manually review and update the schema as needed to handle legitimate variations in the data.</li>
</ol>
</div><h1><p>Practical Example</p>
</h1>
<div class='content'><p>Let's walk through a practical example of data validation using TFDV.</p>
</div><h2><p>Step 1: Install TensorFlow Data Validation</p>
</h2>
<div class='content'><p>First, ensure you have TFDV installed. You can install it using pip:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cGlwIGluc3RhbGwgdGVuc29yZmxvdy1kYXRhLXZhbGlkYXRpb24="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pip install tensorflow-data-validation</pre></div><div class='content'></div><h2><p>Step 2: Import Libraries</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHRlbnNvcmZsb3dfZGF0YV92YWxpZGF0aW9uIGFzIHRmZHY="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import tensorflow_data_validation as tfdv</pre></div><div class='content'></div><h2><p>Step 3: Generate Statistics</p>
</h2>
<div class='content'><p>Load your dataset and generate statistics. For this example, we'll use a sample CSV file.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBMb2FkIHRoZSBkYXRhc2V0CmRhdGFfcGF0aCA9ICdwYXRoL3RvL3lvdXIvZGF0YXNldC5jc3YnCgojIEdlbmVyYXRlIHN0YXRpc3RpY3MKc3RhdHMgPSB0ZmR2LmdlbmVyYXRlX3N0YXRpc3RpY3NfZnJvbV9jc3YoZGF0YV9sb2NhdGlvbj1kYXRhX3BhdGgpCgojIFZpc3VhbGl6ZSB0aGUgc3RhdGlzdGljcwp0ZmR2LnZpc3VhbGl6ZV9zdGF0aXN0aWNzKHN0YXRzKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Load the dataset
data_path = 'path/to/your/dataset.csv'

# Generate statistics
stats = tfdv.generate_statistics_from_csv(data_location=data_path)

# Visualize the statistics
tfdv.visualize_statistics(stats)</pre></div><div class='content'></div><h2><p>Step 4: Infer Schema</p>
</h2>
<div class='content'><p>Infer the schema from the generated statistics.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBJbmZlciBzY2hlbWEKc2NoZW1hID0gdGZkdi5pbmZlcl9zY2hlbWEoc3RhdHMpCgojIERpc3BsYXkgdGhlIHNjaGVtYQp0ZmR2LmRpc3BsYXlfc2NoZW1hKHNjaGVtYSk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Infer schema
schema = tfdv.infer_schema(stats)

# Display the schema
tfdv.display_schema(schema)</pre></div><div class='content'></div><h2><p>Step 5: Detect Anomalies</p>
</h2>
<div class='content'><p>Detect anomalies by comparing the dataset against the inferred schema.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBEZXRlY3QgYW5vbWFsaWVzCmFub21hbGllcyA9IHRmZHYudmFsaWRhdGVfc3RhdGlzdGljcyhzdGF0cywgc2NoZW1hKQoKIyBEaXNwbGF5IGFub21hbGllcwp0ZmR2LmRpc3BsYXlfYW5vbWFsaWVzKGFub21hbGllcyk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Detect anomalies
anomalies = tfdv.validate_statistics(stats, schema)

# Display anomalies
tfdv.display_anomalies(anomalies)</pre></div><div class='content'></div><h2><p>Step 6: Review and Update Schema</p>
</h2>
<div class='content'><p>Review the detected anomalies and update the schema if necessary. For example, if a certain feature is expected to have missing values, you can update the schema to reflect this.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBVcGRhdGUgc2NoZW1hIHRvIGFsbG93IG1pc3NpbmcgdmFsdWVzIGZvciBhIHNwZWNpZmljIGZlYXR1cmUKdGZkdi5nZXRfZmVhdHVyZShzY2hlbWEsICdmZWF0dXJlX25hbWUnKS5wcmVzZW5jZS5taW5fZnJhY3Rpb24gPSAwLjAKCiMgUmV2YWxpZGF0ZSB0aGUgc3RhdGlzdGljcyB3aXRoIHRoZSB1cGRhdGVkIHNjaGVtYQphbm9tYWxpZXMgPSB0ZmR2LnZhbGlkYXRlX3N0YXRpc3RpY3Moc3RhdHMsIHNjaGVtYSkKCiMgRGlzcGxheSBhbm9tYWxpZXMgYWdhaW4gdG8gZW5zdXJlIHRoZXkgYXJlIHJlc29sdmVkCnRmZHYuZGlzcGxheV9hbm9tYWxpZXMoYW5vbWFsaWVzKQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Update schema to allow missing values for a specific feature
tfdv.get_feature(schema, 'feature_name').presence.min_fraction = 0.0

# Revalidate the statistics with the updated schema
anomalies = tfdv.validate_statistics(stats, schema)

# Display anomalies again to ensure they are resolved
tfdv.display_anomalies(anomalies)</pre></div><div class='content'></div><h1><p>Practical Exercise</p>
</h1>
<div class='content'></div><h2><p>Exercise: Validate a New Dataset</p>
</h2>
<div class='content'><ol>
<li><strong>Dataset</strong>: Use a new dataset (you can use any CSV file with structured data).</li>
<li><strong>Generate Statistics</strong>: Compute statistics for the new dataset.</li>
<li><strong>Infer Schema</strong>: Automatically generate a schema based on the statistics.</li>
<li><strong>Detect Anomalies</strong>: Identify any anomalies in the dataset.</li>
<li><strong>Update Schema</strong>: Make necessary updates to the schema to handle legitimate variations.</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBMb2FkIHRoZSBuZXcgZGF0YXNldApuZXdfZGF0YV9wYXRoID0gJ3BhdGgvdG8veW91ci9uZXdfZGF0YXNldC5jc3YnCgojIEdlbmVyYXRlIHN0YXRpc3RpY3MgZm9yIHRoZSBuZXcgZGF0YXNldApuZXdfc3RhdHMgPSB0ZmR2LmdlbmVyYXRlX3N0YXRpc3RpY3NfZnJvbV9jc3YoZGF0YV9sb2NhdGlvbj1uZXdfZGF0YV9wYXRoKQoKIyBWaXN1YWxpemUgdGhlIHN0YXRpc3RpY3MKdGZkdi52aXN1YWxpemVfc3RhdGlzdGljcyhuZXdfc3RhdHMpCgojIEluZmVyIHNjaGVtYSBmb3IgdGhlIG5ldyBkYXRhc2V0Cm5ld19zY2hlbWEgPSB0ZmR2LmluZmVyX3NjaGVtYShuZXdfc3RhdHMpCgojIERpc3BsYXkgdGhlIHNjaGVtYQp0ZmR2LmRpc3BsYXlfc2NoZW1hKG5ld19zY2hlbWEpCgojIERldGVjdCBhbm9tYWxpZXMgaW4gdGhlIG5ldyBkYXRhc2V0Cm5ld19hbm9tYWxpZXMgPSB0ZmR2LnZhbGlkYXRlX3N0YXRpc3RpY3MobmV3X3N0YXRzLCBuZXdfc2NoZW1hKQoKIyBEaXNwbGF5IGFub21hbGllcwp0ZmR2LmRpc3BsYXlfYW5vbWFsaWVzKG5ld19hbm9tYWxpZXMpCgojIFVwZGF0ZSBzY2hlbWEgaWYgbmVjZXNzYXJ5IChleGFtcGxlOiBhbGxvdyBtaXNzaW5nIHZhbHVlcyBmb3IgYSBzcGVjaWZpYyBmZWF0dXJlKQp0ZmR2LmdldF9mZWF0dXJlKG5ld19zY2hlbWEsICdmZWF0dXJlX25hbWUnKS5wcmVzZW5jZS5taW5fZnJhY3Rpb24gPSAwLjAKCiMgUmV2YWxpZGF0ZSB0aGUgc3RhdGlzdGljcyB3aXRoIHRoZSB1cGRhdGVkIHNjaGVtYQpuZXdfYW5vbWFsaWVzID0gdGZkdi52YWxpZGF0ZV9zdGF0aXN0aWNzKG5ld19zdGF0cywgbmV3X3NjaGVtYSkKCiMgRGlzcGxheSBhbm9tYWxpZXMgYWdhaW4gdG8gZW5zdXJlIHRoZXkgYXJlIHJlc29sdmVkCnRmZHYuZGlzcGxheV9hbm9tYWxpZXMobmV3X2Fub21hbGllcyk="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Load the new dataset
new_data_path = 'path/to/your/new_dataset.csv'

# Generate statistics for the new dataset
new_stats = tfdv.generate_statistics_from_csv(data_location=new_data_path)

# Visualize the statistics
tfdv.visualize_statistics(new_stats)

# Infer schema for the new dataset
new_schema = tfdv.infer_schema(new_stats)

# Display the schema
tfdv.display_schema(new_schema)

# Detect anomalies in the new dataset
new_anomalies = tfdv.validate_statistics(new_stats, new_schema)

# Display anomalies
tfdv.display_anomalies(new_anomalies)

# Update schema if necessary (example: allow missing values for a specific feature)
tfdv.get_feature(new_schema, 'feature_name').presence.min_fraction = 0.0

# Revalidate the statistics with the updated schema
new_anomalies = tfdv.validate_statistics(new_stats, new_schema)

# Display anomalies again to ensure they are resolved
tfdv.display_anomalies(new_anomalies)</pre></div><div class='content'></div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ul>
<li><strong>Ignoring Anomalies</strong>: Always review and address anomalies. Ignoring them can lead to poor model performance.</li>
<li><strong>Overfitting Schema</strong>: Be cautious not to overfit the schema to a specific dataset. Ensure it generalizes well to new data.</li>
<li><strong>Regular Updates</strong>: Regularly update the schema as new data becomes available to accommodate legitimate changes.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the importance of data validation and how to perform it using TensorFlow Data Validation (TFDV). By following these steps, you can ensure the quality and integrity of your data, leading to more reliable and robust machine learning models. In the next section, we will explore how to transform data using TFX.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='09-01-introduction-to-tfx' title="Introduction to TFX">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='09-03-transforming-data' title="Transforming Data">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
