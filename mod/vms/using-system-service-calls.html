<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using System Service Calls</title>

    <link rel="alternate" href="https://campusempresa.com/mod/vms/using-system-service-calls" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/vms/using-system-service-calls" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/vms/using-system-service-calls" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/vms/using-system-service-calls" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/vms/using-system-service-calls" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='introduction-to-openvms-system-services'>&#x25C4;Introduction to OpenVMS System Services</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using System Service Calls</a>
	</div>
	<div class='col-4 text-end'>
					<a href='interprocess-communication'>Interprocess Communication &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to System Service Calls</h1>
<div class='content'><p>System service calls are fundamental to interacting with the OpenVMS operating system. They provide a way for programs to request services from the operating system, such as file operations, process control, and inter-process communication.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>System Service Call</strong>: A function provided by the operating system that can be invoked by user programs.</li>
<li><strong>Calling Convention</strong>: The method by which system services are called, including how parameters are passed and how results are returned.</li>
<li><strong>Status Codes</strong>: Codes returned by system services to indicate success or failure.</li>
</ul>
</div><h1>Basic System Service Calls</h1>
<div class='content'><p>Beginner programmers should start with understanding how to make basic system service calls and handle their responses.</p>
</div><h2>Example: Displaying a Message</h2>
<div class='content'><p>The following example demonstrates how to use the <code>SYS$PUTMSG</code> system service to display a message.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGRlc2NyaXAuaD4KI2luY2x1ZGUgPHNzZGVmLmg+CiNpbmNsdWRlIDxzdHNkZWYuaD4KI2luY2x1ZGUgPHN0YXJsZXQuaD4KCmludCBtYWluKCkgewogICAgLy8gRGVmaW5lIHRoZSBtZXNzYWdlIHRvIGJlIGRpc3BsYXllZAogICAgY2hhciBtZXNzYWdlW10gPSAiSGVsbG8sIE9wZW5WTVMhIjsKICAgIAogICAgLy8gQ3JlYXRlIGEgZGVzY3JpcHRvciBmb3IgdGhlIG1lc3NhZ2UKICAgIHN0cnVjdCBkc2MkZGVzY3JpcHRvcl9zIG1zZ19kZXNjOwogICAgbXNnX2Rlc2MuZHNjJHdfbGVuZ3RoID0gc2l6ZW9mKG1lc3NhZ2UpIC0gMTsKICAgIG1zZ19kZXNjLmRzYyRhX3BvaW50ZXIgPSBtZXNzYWdlOwogICAgbXNnX2Rlc2MuZHNjJGJfZHR5cGUgPSBEU0MkS19EVFlQRV9UOwogICAgbXNnX2Rlc2MuZHNjJGJfY2xhc3MgPSBEU0MkS19DTEFTU19TOwoKICAgIC8vIENhbGwgdGhlIFNZUyRQVVRNU0cgc3lzdGVtIHNlcnZpY2UKICAgIHVuc2lnbmVkIGxvbmcgc3RhdHVzID0gU1lTJFBVVE1TRygmbXNnX2Rlc2MpOwoKICAgIC8vIENoZWNrIHRoZSBzdGF0dXMgY29kZQogICAgaWYgKCEkVk1TX1NUQVRVU19TVUNDRVNTKHN0YXR1cykpIHsKICAgICAgICAvLyBIYW5kbGUgZXJyb3IKICAgICAgICByZXR1cm4gMTsKICAgIH0KCiAgICByZXR1cm4gMDsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;descrip.h&gt;
#include &lt;ssdef.h&gt;
#include &lt;stsdef.h&gt;
#include &lt;starlet.h&gt;

int main() {
    // Define the message to be displayed
    char message[] = &quot;Hello, OpenVMS!&quot;;
    
    // Create a descriptor for the message
    struct dsc$descriptor_s msg_desc;
    msg_desc.dsc$w_length = sizeof(message) - 1;
    msg_desc.dsc$a_pointer = message;
    msg_desc.dsc$b_dtype = DSC$K_DTYPE_T;
    msg_desc.dsc$b_class = DSC$K_CLASS_S;

    // Call the SYS$PUTMSG system service
    unsigned long status = SYS$PUTMSG(&amp;msg_desc);

    // Check the status code
    if (!$VMS_STATUS_SUCCESS(status)) {
        // Handle error
        return 1;
    }

    return 0;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Descriptor</strong>: A structure that describes the message to be displayed.</li>
<li><strong>SYS$PUTMSG</strong>: The system service call used to display the message.</li>
<li><strong>Status Check</strong>: Verifies if the call was successful.</li>
</ul>
</div><h1>Intermediate System Service Calls</h1>
<div class='content'><p>At the intermediate level, programmers should learn to perform more complex operations, such as file handling and process control.</p>
</div><h2>Example: Creating and Writing to a File</h2>
<div class='content'><p>The following example demonstrates how to create a file and write data to it using system services.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGRlc2NyaXAuaD4KI2luY2x1ZGUgPHJtcy5oPgojaW5jbHVkZSA8c3NkZWYuaD4KI2luY2x1ZGUgPHN0YXJsZXQuaD4KCmludCBtYWluKCkgewogICAgLy8gRGVmaW5lIHRoZSBmaWxlIG5hbWUgYW5kIGNvbnRlbnQKICAgIGNoYXIgZmlsZW5hbWVbXSA9ICJURVNULkRBVCI7CiAgICBjaGFyIGNvbnRlbnRbXSA9ICJUaGlzIGlzIGEgdGVzdCBmaWxlLiI7CgogICAgLy8gQ3JlYXRlIGEgZmlsZSBuYW1lIGRlc2NyaXB0b3IKICAgIHN0cnVjdCBkc2MkZGVzY3JpcHRvcl9zIGZpbGVfZGVzYzsKICAgIGZpbGVfZGVzYy5kc2Mkd19sZW5ndGggPSBzaXplb2YoZmlsZW5hbWUpIC0gMTsKICAgIGZpbGVfZGVzYy5kc2MkYV9wb2ludGVyID0gZmlsZW5hbWU7CiAgICBmaWxlX2Rlc2MuZHNjJGJfZHR5cGUgPSBEU0MkS19EVFlQRV9UOwogICAgZmlsZV9kZXNjLmRzYyRiX2NsYXNzID0gRFNDJEtfQ0xBU1NfUzsKCiAgICAvLyBDcmVhdGUgYSBmaWxlIGFjY2VzcyBibG9jayAoRkFCKQogICAgc3RydWN0IEZBQiBmYWIgPSBjYyRybXNfZmFiOwogICAgZmFiLmZhYiRsX2ZuYSA9IGZpbGVfZGVzYy5kc2MkYV9wb2ludGVyOwogICAgZmFiLmZhYiRiX2ZucyA9IGZpbGVfZGVzYy5kc2Mkd19sZW5ndGg7CiAgICBmYWIuZmFiJGJfZmFjID0gRkFCJE1fUFVUOwogICAgZmFiLmZhYiRiX29yZyA9IEZBQiRDX1NFUTsKICAgIGZhYi5mYWIkYl9yZm0gPSBGQUIkQ19WQVI7CgogICAgLy8gQ3JlYXRlIGEgcmVjb3JkIGFjY2VzcyBibG9jayAoUkFCKQogICAgc3RydWN0IFJBQiByYWIgPSBjYyRybXNfcmFiOwogICAgcmFiLnJhYiRsX2ZhYiA9ICZmYWI7CgogICAgLy8gQ3JlYXRlIHRoZSBmaWxlCiAgICB1bnNpZ25lZCBsb25nIHN0YXR1cyA9IFNZUyRDUkVBVEUoJmZhYik7CiAgICBpZiAoISRWTVNfU1RBVFVTX1NVQ0NFU1Moc3RhdHVzKSkgewogICAgICAgIC8vIEhhbmRsZSBlcnJvcgogICAgICAgIHJldHVybiAxOwogICAgfQoKICAgIC8vIFdyaXRlIHRvIHRoZSBmaWxlCiAgICByYWIucmFiJGxfcmJmID0gY29udGVudDsKICAgIHJhYi5yYWIkd19yc3ogPSBzaXplb2YoY29udGVudCkgLSAxOwogICAgc3RhdHVzID0gU1lTJFBVVCgmcmFiKTsKICAgIGlmICghJFZNU19TVEFUVVNfU1VDQ0VTUyhzdGF0dXMpKSB7CiAgICAgICAgLy8gSGFuZGxlIGVycm9yCiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgLy8gQ2xvc2UgdGhlIGZpbGUKICAgIHN0YXR1cyA9IFNZUyRDTE9TRSgmZmFiKTsKICAgIGlmICghJFZNU19TVEFUVVNfU1VDQ0VTUyhzdGF0dXMpKSB7CiAgICAgICAgLy8gSGFuZGxlIGVycm9yCiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgcmV0dXJuIDA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;descrip.h&gt;
#include &lt;rms.h&gt;
#include &lt;ssdef.h&gt;
#include &lt;starlet.h&gt;

int main() {
    // Define the file name and content
    char filename[] = &quot;TEST.DAT&quot;;
    char content[] = &quot;This is a test file.&quot;;

    // Create a file name descriptor
    struct dsc$descriptor_s file_desc;
    file_desc.dsc$w_length = sizeof(filename) - 1;
    file_desc.dsc$a_pointer = filename;
    file_desc.dsc$b_dtype = DSC$K_DTYPE_T;
    file_desc.dsc$b_class = DSC$K_CLASS_S;

    // Create a file access block (FAB)
    struct FAB fab = cc$rms_fab;
    fab.fab$l_fna = file_desc.dsc$a_pointer;
    fab.fab$b_fns = file_desc.dsc$w_length;
    fab.fab$b_fac = FAB$M_PUT;
    fab.fab$b_org = FAB$C_SEQ;
    fab.fab$b_rfm = FAB$C_VAR;

    // Create a record access block (RAB)
    struct RAB rab = cc$rms_rab;
    rab.rab$l_fab = &amp;fab;

    // Create the file
    unsigned long status = SYS$CREATE(&amp;fab);
    if (!$VMS_STATUS_SUCCESS(status)) {
        // Handle error
        return 1;
    }

    // Write to the file
    rab.rab$l_rbf = content;
    rab.rab$w_rsz = sizeof(content) - 1;
    status = SYS$PUT(&amp;rab);
    if (!$VMS_STATUS_SUCCESS(status)) {
        // Handle error
        return 1;
    }

    // Close the file
    status = SYS$CLOSE(&amp;fab);
    if (!$VMS_STATUS_SUCCESS(status)) {
        // Handle error
        return 1;
    }

    return 0;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>FAB (File Access Block)</strong>: Defines the file attributes.</li>
<li><strong>RAB (Record Access Block)</strong>: Defines the record attributes.</li>
<li><strong>SYS$CREATE</strong>: Creates the file.</li>
<li><strong>SYS$PUT</strong>: Writes data to the file.</li>
<li><strong>SYS$CLOSE</strong>: Closes the file.</li>
</ul>
</div><h1>Advanced System Service Calls</h1>
<div class='content'><p>Advanced programmers should be able to handle complex tasks such as inter-process communication and advanced process control.</p>
</div><h2>Example: Inter-Process Communication Using Mailboxes</h2>
<div class='content'><p>The following example demonstrates how to use mailboxes for inter-process communication.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGRlc2NyaXAuaD4KI2luY2x1ZGUgPHNzZGVmLmg+CiNpbmNsdWRlIDxzdGFybGV0Lmg+CiNpbmNsdWRlIDxpb2RlZi5oPgoKaW50IG1haW4oKSB7CiAgICAvLyBEZWZpbmUgdGhlIG1haWxib3ggbmFtZQogICAgY2hhciBtYWlsYm94X25hbWVbXSA9ICJNQlgxIjsKCiAgICAvLyBDcmVhdGUgYSBkZXNjcmlwdG9yIGZvciB0aGUgbWFpbGJveCBuYW1lCiAgICBzdHJ1Y3QgZHNjJGRlc2NyaXB0b3JfcyBtYnhfZGVzYzsKICAgIG1ieF9kZXNjLmRzYyR3X2xlbmd0aCA9IHNpemVvZihtYWlsYm94X25hbWUpIC0gMTsKICAgIG1ieF9kZXNjLmRzYyRhX3BvaW50ZXIgPSBtYWlsYm94X25hbWU7CiAgICBtYnhfZGVzYy5kc2MkYl9kdHlwZSA9IERTQyRLX0RUWVBFX1Q7CiAgICBtYnhfZGVzYy5kc2MkYl9jbGFzcyA9IERTQyRLX0NMQVNTX1M7CgogICAgLy8gQ3JlYXRlIHRoZSBtYWlsYm94CiAgICB1bnNpZ25lZCBzaG9ydCBtYnhfY2hhbjsKICAgIHVuc2lnbmVkIGxvbmcgc3RhdHVzID0gU1lTJENSRU1CWCgwLCAmbWJ4X2NoYW4sIDAsIDAsIDAsIDAsICZtYnhfZGVzYyk7CiAgICBpZiAoISRWTVNfU1RBVFVTX1NVQ0NFU1Moc3RhdHVzKSkgewogICAgICAgIC8vIEhhbmRsZSBlcnJvcgogICAgICAgIHJldHVybiAxOwogICAgfQoKICAgIC8vIFdyaXRlIGEgbWVzc2FnZSB0byB0aGUgbWFpbGJveAogICAgY2hhciBtZXNzYWdlW10gPSAiSGVsbG8gZnJvbSBwcm9jZXNzISI7CiAgICBzdGF0dXMgPSBTWVMkUUlPVygwLCBtYnhfY2hhbiwgSU8kX1dSSVRFVkJMSywgMCwgMCwgMCwgbWVzc2FnZSwgc2l6ZW9mKG1lc3NhZ2UpIC0gMSwgMCwgMCwgMCwgMCk7CiAgICBpZiAoISRWTVNfU1RBVFVTX1NVQ0NFU1Moc3RhdHVzKSkgewogICAgICAgIC8vIEhhbmRsZSBlcnJvcgogICAgICAgIHJldHVybiAxOwogICAgfQoKICAgIC8vIENsb3NlIHRoZSBtYWlsYm94CiAgICBzdGF0dXMgPSBTWVMkREFTU0dOKG1ieF9jaGFuKTsKICAgIGlmICghJFZNU19TVEFUVVNfU1VDQ0VTUyhzdGF0dXMpKSB7CiAgICAgICAgLy8gSGFuZGxlIGVycm9yCiAgICAgICAgcmV0dXJuIDE7CiAgICB9CgogICAgcmV0dXJuIDA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;descrip.h&gt;
#include &lt;ssdef.h&gt;
#include &lt;starlet.h&gt;
#include &lt;iodef.h&gt;

int main() {
    // Define the mailbox name
    char mailbox_name[] = &quot;MBX1&quot;;

    // Create a descriptor for the mailbox name
    struct dsc$descriptor_s mbx_desc;
    mbx_desc.dsc$w_length = sizeof(mailbox_name) - 1;
    mbx_desc.dsc$a_pointer = mailbox_name;
    mbx_desc.dsc$b_dtype = DSC$K_DTYPE_T;
    mbx_desc.dsc$b_class = DSC$K_CLASS_S;

    // Create the mailbox
    unsigned short mbx_chan;
    unsigned long status = SYS$CREMBX(0, &amp;mbx_chan, 0, 0, 0, 0, &amp;mbx_desc);
    if (!$VMS_STATUS_SUCCESS(status)) {
        // Handle error
        return 1;
    }

    // Write a message to the mailbox
    char message[] = &quot;Hello from process!&quot;;
    status = SYS$QIOW(0, mbx_chan, IO$_WRITEVBLK, 0, 0, 0, message, sizeof(message) - 1, 0, 0, 0, 0);
    if (!$VMS_STATUS_SUCCESS(status)) {
        // Handle error
        return 1;
    }

    // Close the mailbox
    status = SYS$DASSGN(mbx_chan);
    if (!$VMS_STATUS_SUCCESS(status)) {
        // Handle error
        return 1;
    }

    return 0;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>SYS$CREMBX</strong>: Creates a mailbox.</li>
<li><strong>SYS$QIOW</strong>: Performs I/O operations on the mailbox.</li>
<li><strong>SYS$DASSGN</strong>: Deassigns the mailbox channel.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Understanding and using system service calls in OpenVMS is crucial for effective system programming. Starting with basic calls and progressing to more complex operations allows programmers to harness the full power of the OpenVMS operating system. By mastering these concepts, you can develop robust and efficient applications that leverage the capabilities of OpenVMS.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='introduction-to-openvms-system-services'>&#x25C4;Introduction to OpenVMS System Services</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using System Service Calls</a>
	</div>
	<div class='col-4 text-end'>
					<a href='interprocess-communication'>Interprocess Communication &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
