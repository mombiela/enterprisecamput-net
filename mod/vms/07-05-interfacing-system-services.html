<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interfacing with System Services</title>

    <link rel="alternate" href="https://campusempresa.com/mod/vms/07-05-interfacing-system-services" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/vms/07-05-interfacing-system-services" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/vms/07-05-interfacing-system-services" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/vms/07-05-interfacing-system-services" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/vms/07-05-interfacing-system-services" class="px-2">CA</a>
					</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<!-- <a href="/">Home</a>  -->
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-04-using-cobol' title="Using COBOL on OpenVMS">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Interfacing with System Services</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-01-introduction-clustering' title="Introduction to Clustering">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore how to interface with system services in OpenVMS. System services are essential for performing various low-level operations, such as process control, file I/O, and inter-process communication. Understanding how to use these services effectively is crucial for advanced OpenVMS programming.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>System Services Overview</strong>:</p>
<ul>
<li>System services are provided by the OpenVMS operating system to perform various system-level operations.</li>
<li>They are typically accessed through system service calls, which are similar to system calls in other operating systems.</li>
</ul>
</li>
<li>
<p><strong>Calling System Services</strong>:</p>
<ul>
<li>System services can be called from various programming languages, including C, Fortran, and COBOL.</li>
<li>The general syntax for calling a system service involves specifying the service name and passing the required arguments.</li>
</ul>
</li>
<li>
<p><strong>Common System Services</strong>:</p>
<ul>
<li><strong>Process Control</strong>: Services for creating, managing, and terminating processes.</li>
<li><strong>File I/O</strong>: Services for reading from and writing to files.</li>
<li><strong>Inter-Process Communication</strong>: Services for communication between processes, such as mailboxes and shared memory.</li>
</ul>
</li>
</ol>
</div><h1><p>Practical Examples</p>
</h1>
<div class='content'></div><h2><p>Example 1: Calling a System Service in C</p>
</h2>
<div class='content'><p>Let's start with a simple example of calling a system service in C to get the current process ID.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxkZXNjcmlwLmg+CiNpbmNsdWRlIDxsaWIkcm91dGluZXMuaD4KI2luY2x1ZGUgPHNzZGVmLmg+CgppbnQgbWFpbigpIHsKICAgIHVuc2lnbmVkIGxvbmcgcGlkOwogICAgdW5zaWduZWQgbG9uZyBzdGF0dXM7CgogICAgLy8gQ2FsbCB0aGUgU1lTJEdFVEpQSVcgc3lzdGVtIHNlcnZpY2UgdG8gZ2V0IHRoZSBwcm9jZXNzIElECiAgICBzdGF0dXMgPSBsaWIkZ2V0anBpdygmcGlkKTsKCiAgICBpZiAoc3RhdHVzID09IFNTJF9OT1JNQUwpIHsKICAgICAgICBwcmludGYoIkN1cnJlbnQgUHJvY2VzcyBJRDogJWx1XG4iLCBwaWQpOwogICAgfSBlbHNlIHsKICAgICAgICBwcmludGYoIkVycm9yOiBVbmFibGUgdG8gZ2V0IHByb2Nlc3MgSURcbiIpOwogICAgfQoKICAgIHJldHVybiAwOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;descrip.h&gt;
#include &lt;lib$routines.h&gt;
#include &lt;ssdef.h&gt;

int main() {
    unsigned long pid;
    unsigned long status;

    // Call the SYS$GETJPIW system service to get the process ID
    status = lib$getjpiw(&amp;pid);

    if (status == SS$_NORMAL) {
        printf(&quot;Current Process ID: %lu\n&quot;, pid);
    } else {
        printf(&quot;Error: Unable to get process ID\n&quot;);
    }

    return 0;
}</pre></div><div class='content'><p><strong>Explanation</strong>:</p>
<ul>
<li><code>#include &lt;descrip.h&gt;</code> and <code>#include &lt;lib$routines.h&gt;</code>: These headers are required for system service calls.</li>
<li><code>lib$getjpiw(&amp;pid)</code>: This function calls the <code>SYS$GETJPIW</code> system service to get the current process ID.</li>
<li><code>SS$_NORMAL</code>: This is a status code indicating that the operation was successful.</li>
</ul>
</div><h2><p>Example 2: Reading a File Using System Services in Fortran</p>
</h2>
<div class='content'><p>Here is an example of reading a file using system services in Fortran.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UFJPR1JBTSBSZWFkRmlsZQogIElNUExJQ0lUIE5PTkUKICBJTlRFR0VSIDo6IHN0YXR1cwogIENIQVJBQ1RFUihMRU49MjU1KSA6OiBidWZmZXIKICBJTlRFR0VSIDo6IGlvc2IoMikKCiAgISBPcGVuIHRoZSBmaWxlCiAgQ0FMTCBTWVMkT1BFTigmCiAgICAgICAnTVlGSUxFLlRYVCcsICYKICAgICAgICdSRUFEJywgJgogICAgICAgc3RhdHVzKQoKICBJRiAoc3RhdHVzIC5ORS4gU1MkX05PUk1BTCkgVEhFTgogICAgUFJJTlQgKiwgJ0Vycm9yOiBVbmFibGUgdG8gb3BlbiBmaWxlJwogICAgU1RPUAogIEVORCBJRgoKICAhIFJlYWQgZnJvbSB0aGUgZmlsZQogIENBTEwgU1lTJFJFQUQoJgogICAgICAgJ01ZRklMRS5UWFQnLCAmCiAgICAgICBidWZmZXIsICYKICAgICAgIGlvc2IsICYKICAgICAgIHN0YXR1cykKCiAgSUYgKHN0YXR1cyAuRVEuIFNTJF9OT1JNQUwpIFRIRU4KICAgIFBSSU5UICosICdGaWxlIENvbnRlbnQ6ICcsIFRSSU0oYnVmZmVyKQogIEVMU0UKICAgIFBSSU5UICosICdFcnJvcjogVW5hYmxlIHRvIHJlYWQgZmlsZScKICBFTkQgSUYKCiAgISBDbG9zZSB0aGUgZmlsZQogIENBTEwgU1lTJENMT1NFKCYKICAgICAgICdNWUZJTEUuVFhUJywgJgogICAgICAgc3RhdHVzKQoKICBJRiAoc3RhdHVzIC5ORS4gU1MkX05PUk1BTCkgVEhFTgogICAgUFJJTlQgKiwgJ0Vycm9yOiBVbmFibGUgdG8gY2xvc2UgZmlsZScKICBFTkQgSUYKCkVORCBQUk9HUkFNIFJlYWRGaWxl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PROGRAM ReadFile
  IMPLICIT NONE
  INTEGER :: status
  CHARACTER(LEN=255) :: buffer
  INTEGER :: iosb(2)

  ! Open the file
  CALL SYS$OPEN(&amp;
       'MYFILE.TXT', &amp;
       'READ', &amp;
       status)

  IF (status .NE. SS$_NORMAL) THEN
    PRINT *, 'Error: Unable to open file'
    STOP
  END IF

  ! Read from the file
  CALL SYS$READ(&amp;
       'MYFILE.TXT', &amp;
       buffer, &amp;
       iosb, &amp;
       status)

  IF (status .EQ. SS$_NORMAL) THEN
    PRINT *, 'File Content: ', TRIM(buffer)
  ELSE
    PRINT *, 'Error: Unable to read file'
  END IF

  ! Close the file
  CALL SYS$CLOSE(&amp;
       'MYFILE.TXT', &amp;
       status)

  IF (status .NE. SS$_NORMAL) THEN
    PRINT *, 'Error: Unable to close file'
  END IF

END PROGRAM ReadFile</pre></div><div class='content'><p><strong>Explanation</strong>:</p>
<ul>
<li><code>CALL SYS$OPEN</code>: Opens the file for reading.</li>
<li><code>CALL SYS$READ</code>: Reads the content of the file into the buffer.</li>
<li><code>CALL SYS$CLOSE</code>: Closes the file after reading.</li>
</ul>
</div><h1><p>Practical Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Create a New Process</p>
</h2>
<div class='content'><p><strong>Task</strong>: Write a C program that creates a new process using the <code>SYS$CREPRC</code> system service.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxkZXNjcmlwLmg+CiNpbmNsdWRlIDxsaWIkcm91dGluZXMuaD4KI2luY2x1ZGUgPHNzZGVmLmg+CgppbnQgbWFpbigpIHsKICAgIHVuc2lnbmVkIGxvbmcgc3RhdHVzOwogICAgc3RydWN0IGRzYyRkZXNjcmlwdG9yX3MgcHJvY2Vzc19uYW1lID0gezAsIERTQyRLX0RUWVBFX1QsIERTQyRLX0NMQVNTX1MsICJORVdfUFJPQ0VTUyJ9OwoKICAgIC8vIENhbGwgdGhlIFNZUyRDUkVQUkMgc3lzdGVtIHNlcnZpY2UgdG8gY3JlYXRlIGEgbmV3IHByb2Nlc3MKICAgIHN0YXR1cyA9IGxpYiRjcmVwcmMoJnByb2Nlc3NfbmFtZSk7CgogICAgaWYgKHN0YXR1cyA9PSBTUyRfTk9STUFMKSB7CiAgICAgICAgcHJpbnRmKCJOZXcgcHJvY2VzcyBjcmVhdGVkIHN1Y2Nlc3NmdWxseVxuIik7CiAgICB9IGVsc2UgewogICAgICAgIHByaW50ZigiRXJyb3I6IFVuYWJsZSB0byBjcmVhdGUgbmV3IHByb2Nlc3NcbiIpOwogICAgfQoKICAgIHJldHVybiAwOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;descrip.h&gt;
#include &lt;lib$routines.h&gt;
#include &lt;ssdef.h&gt;

int main() {
    unsigned long status;
    struct dsc$descriptor_s process_name = {0, DSC$K_DTYPE_T, DSC$K_CLASS_S, &quot;NEW_PROCESS&quot;};

    // Call the SYS$CREPRC system service to create a new process
    status = lib$creprc(&amp;process_name);

    if (status == SS$_NORMAL) {
        printf(&quot;New process created successfully\n&quot;);
    } else {
        printf(&quot;Error: Unable to create new process\n&quot;);
    }

    return 0;
}</pre></div><div class='content'></div><h2><p>Exercise 2: Write to a File</p>
</h2>
<div class='content'><p><strong>Task</strong>: Write a Fortran program that writes a string to a file using system services.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UFJPR1JBTSBXcml0ZUZpbGUKICBJTVBMSUNJVCBOT05FCiAgSU5URUdFUiA6OiBzdGF0dXMKICBDSEFSQUNURVIoTEVOPTI1NSkgOjogYnVmZmVyCiAgSU5URUdFUiA6OiBpb3NiKDIpCgogIGJ1ZmZlciA9ICdIZWxsbywgT3BlblZNUyEnCgogICEgT3BlbiB0aGUgZmlsZQogIENBTEwgU1lTJE9QRU4oJgogICAgICAgJ01ZRklMRS5UWFQnLCAmCiAgICAgICAnV1JJVEUnLCAmCiAgICAgICBzdGF0dXMpCgogIElGIChzdGF0dXMgLk5FLiBTUyRfTk9STUFMKSBUSEVOCiAgICBQUklOVCAqLCAnRXJyb3I6IFVuYWJsZSB0byBvcGVuIGZpbGUnCiAgICBTVE9QCiAgRU5EIElGCgogICEgV3JpdGUgdG8gdGhlIGZpbGUKICBDQUxMIFNZUyRXUklURSgmCiAgICAgICAnTVlGSUxFLlRYVCcsICYKICAgICAgIGJ1ZmZlciwgJgogICAgICAgaW9zYiwgJgogICAgICAgc3RhdHVzKQoKICBJRiAoc3RhdHVzIC5FUS4gU1MkX05PUk1BTCkgVEhFTgogICAgUFJJTlQgKiwgJ1N1Y2Nlc3NmdWxseSB3cm90ZSB0byBmaWxlJwogIEVMU0UKICAgIFBSSU5UICosICdFcnJvcjogVW5hYmxlIHRvIHdyaXRlIHRvIGZpbGUnCiAgRU5EIElGCgogICEgQ2xvc2UgdGhlIGZpbGUKICBDQUxMIFNZUyRDTE9TRSgmCiAgICAgICAnTVlGSUxFLlRYVCcsICYKICAgICAgIHN0YXR1cykKCiAgSUYgKHN0YXR1cyAuTkUuIFNTJF9OT1JNQUwpIFRIRU4KICAgIFBSSU5UICosICdFcnJvcjogVW5hYmxlIHRvIGNsb3NlIGZpbGUnCiAgRU5EIElGCgpFTkQgUFJPR1JBTSBXcml0ZUZpbGU="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PROGRAM WriteFile
  IMPLICIT NONE
  INTEGER :: status
  CHARACTER(LEN=255) :: buffer
  INTEGER :: iosb(2)

  buffer = 'Hello, OpenVMS!'

  ! Open the file
  CALL SYS$OPEN(&amp;
       'MYFILE.TXT', &amp;
       'WRITE', &amp;
       status)

  IF (status .NE. SS$_NORMAL) THEN
    PRINT *, 'Error: Unable to open file'
    STOP
  END IF

  ! Write to the file
  CALL SYS$WRITE(&amp;
       'MYFILE.TXT', &amp;
       buffer, &amp;
       iosb, &amp;
       status)

  IF (status .EQ. SS$_NORMAL) THEN
    PRINT *, 'Successfully wrote to file'
  ELSE
    PRINT *, 'Error: Unable to write to file'
  END IF

  ! Close the file
  CALL SYS$CLOSE(&amp;
       'MYFILE.TXT', &amp;
       status)

  IF (status .NE. SS$_NORMAL) THEN
    PRINT *, 'Error: Unable to close file'
  END IF

END PROGRAM WriteFile</pre></div><div class='content'></div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ul>
<li><strong>Incorrect Argument Types</strong>: Ensure that the arguments passed to system services are of the correct type and format.</li>
<li><strong>Error Handling</strong>: Always check the status code returned by system services to handle errors appropriately.</li>
<li><strong>Resource Management</strong>: Remember to release any resources (e.g., close files) after use to avoid resource leaks.</li>
</ul>
</div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the basics of interfacing with system services in OpenVMS. We discussed how to call system services from C and Fortran, provided practical examples, and included exercises to reinforce the concepts. Understanding how to use system services effectively is crucial for advanced OpenVMS programming, enabling you to perform various low-level operations and manage system resources efficiently.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='07-04-using-cobol' title="Using COBOL on OpenVMS">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='08-01-introduction-clustering' title="Introduction to Clustering">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
