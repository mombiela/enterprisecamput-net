<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interfacing with Other Languages</title>

    <link rel="alternate" href="https://campusempresa.com/mod/rust/interfacing-with-other-languages" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/rust/interfacing-with-other-languages" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/rust/interfacing-with-other-languages" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/rust/interfacing-with-other-languages" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/rust/interfacing-with-other-languages" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='building-a-web-application'>&#x25C4;Building a Web Application</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Interfacing with Other Languages</a>
	</div>
	<div class='col-4 text-end'>
					<a href='code-style-and-formatting'>Code Style and Formatting &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Interfacing with other languages is a crucial skill for Rust programmers, enabling them to leverage existing libraries, optimize performance, and integrate Rust into larger projects. This topic will cover how to interface Rust with C and other languages, providing clear explanations, examples, and exercises.</p>
</div><h1>Interfacing with C</h1>
<div class='content'><p>Rust has excellent support for interfacing with C, which is essential given C's widespread use and the vast number of C libraries available.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>FFI (Foreign Function Interface):</strong> Mechanism by which a program written in one programming language can call routines or make use of services written in another.</li>
<li><strong><code>extern</code> keyword:</strong> Used to declare external functions and variables.</li>
<li><strong><code>unsafe</code> block:</strong> Required when calling external functions to ensure the programmer acknowledges the potential risks.</li>
</ul>
</div><h2>Declaring and Using C Functions</h2>
<div class='content'><p>To call a C function from Rust, you need to declare it using the <code>extern</code> keyword and specify the C calling convention.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXh0ZXJuICJDIiB7CiAgICBmbiBwcmludGYoZm9ybWF0OiAqY29uc3QgaTgsIC4uLikgLT4gaTMyOwp9CgpmbiBtYWluKCkgewogICAgbGV0IG1lc3NhZ2UgPSBiIkhlbGxvLCBXb3JsZCFcMCIuYXNfcHRyKCkgYXMgKmNvbnN0IGk4OwogICAgdW5zYWZlIHsKICAgICAgICBwcmludGYobWVzc2FnZSk7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>extern &quot;C&quot; {
    fn printf(format: *const i8, ...) -&gt; i32;
}

fn main() {
    let message = b&quot;Hello, World!\0&quot;.as_ptr() as *const i8;
    unsafe {
        printf(message);
    }
}</pre></div><div class='content'><ul>
<li><strong>Explanation:</strong>
<ul>
<li><code>extern &quot;C&quot;</code>: Declares that the following functions use the C calling convention.</li>
<li><code>printf</code>: A standard C function for printing formatted output.</li>
<li><code>unsafe</code>: Required because calling external functions can lead to undefined behavior if not used correctly.</li>
</ul>
</li>
</ul>
</div><h2>Linking to C Libraries</h2>
<div class='content'><p>To link a Rust program to a C library, you need to specify the library in your <code>Cargo.toml</code> and use the <code>#[link]</code> attribute.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("W2RlcGVuZGVuY2llc10KbGliYyA9ICIwLjIi"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>[dependencies]
libc = &quot;0.2&quot;</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXh0ZXJuIGNyYXRlIGxpYmM7CgpleHRlcm4gIkMiIHsKICAgIGZuIGNvcyh4OiBmNjQpIC0+IGY2NDsKfQoKZm4gbWFpbigpIHsKICAgIGxldCB4ID0gMC41OwogICAgdW5zYWZlIHsKICAgICAgICBwcmludGxuISgiVGhlIGNvc2luZSBvZiB7fSBpcyB7fSIsIHgsIGNvcyh4KSk7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>extern crate libc;

extern &quot;C&quot; {
    fn cos(x: f64) -&gt; f64;
}

fn main() {
    let x = 0.5;
    unsafe {
        println!(&quot;The cosine of {} is {}&quot;, x, cos(x));
    }
}</pre></div><div class='content'><ul>
<li><strong>Explanation:</strong>
<ul>
<li><code>extern crate libc</code>: Imports the <code>libc</code> crate, which provides bindings to C standard library functions.</li>
<li><code>cos</code>: A C function to compute the cosine of a number.</li>
</ul>
</li>
</ul>
</div><h1>Interfacing with Other Languages</h1>
<div class='content'><p>While Rust's primary FFI support is for C, it can also interface with other languages, often through C-compatible interfaces.</p>
</div><h2>Interfacing with C++</h2>
<div class='content'><p>Interfacing with C++ is more complex due to name mangling and other differences, but it is possible using <code>extern &quot;C&quot;</code> and C++'s <code>extern &quot;C&quot;</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gZXhhbXBsZS5jcHAKZXh0ZXJuICJDIiB7CiAgICBkb3VibGUgYWRkKGRvdWJsZSBhLCBkb3VibGUgYikgewogICAgICAgIHJldHVybiBhICsgYjsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// example.cpp
extern &quot;C&quot; {
    double add(double a, double b) {
        return a + b;
    }
}</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXh0ZXJuICJDIiB7CiAgICBmbiBhZGQoYTogZjY0LCBiOiBmNjQpIC0+IGY2NDsKfQoKZm4gbWFpbigpIHsKICAgIGxldCByZXN1bHQgPSB1bnNhZmUgeyBhZGQoMS4wLCAyLjApIH07CiAgICBwcmludGxuISgiMS4wICsgMi4wID0ge30iLCByZXN1bHQpOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>extern &quot;C&quot; {
    fn add(a: f64, b: f64) -&gt; f64;
}

fn main() {
    let result = unsafe { add(1.0, 2.0) };
    println!(&quot;1.0 + 2.0 = {}&quot;, result);
}</pre></div><div class='content'><ul>
<li><strong>Explanation:</strong>
<ul>
<li><code>extern &quot;C&quot;</code> in C++: Ensures the function uses C linkage, making it callable from Rust.</li>
<li><code>add</code>: A simple function to add two numbers.</li>
</ul>
</li>
</ul>
</div><h2>Interfacing with Python</h2>
<div class='content'><p>Interfacing with Python can be achieved using libraries like <code>pyo3</code> or <code>cpython</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("W2RlcGVuZGVuY2llc10KcHlvMyA9IHsgdmVyc2lvbiA9ICIwLjE1IiwgZmVhdHVyZXMgPSBbImV4dGVuc2lvbi1tb2R1bGUiXSB9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>[dependencies]
pyo3 = { version = &quot;0.15&quot;, features = [&quot;extension-module&quot;] }</pre></div><div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHB5bzM6OnByZWx1ZGU6Oio7CgojW3B5ZnVuY3Rpb25dCmZuIGFkZChhOiBmNjQsIGI6IGY2NCkgLT4gUHlSZXN1bHQ8ZjY0PiB7CiAgICBPayhhICsgYikKfQoKI1tweW1vZHVsZV0KZm4gcnVzdF9tb2R1bGUocHk6IFB5dGhvbiwgbTogJlB5TW9kdWxlKSAtPiBQeVJlc3VsdDwoKT4gewogICAgbS5hZGRfZnVuY3Rpb24od3JhcF9weWZ1bmN0aW9uIShhZGQsIG0pPyk/OwogICAgT2soKCkpCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use pyo3::prelude::*;

#[pyfunction]
fn add(a: f64, b: f64) -&gt; PyResult&lt;f64&gt; {
    Ok(a + b)
}

#[pymodule]
fn rust_module(py: Python, m: &amp;PyModule) -&gt; PyResult&lt;()&gt; {
    m.add_function(wrap_pyfunction!(add, m)?)?;
    Ok(())
}</pre></div><div class='content'><ul>
<li><strong>Explanation:</strong>
<ul>
<li><code>pyo3::prelude::*</code>: Imports necessary items from the <code>pyo3</code> crate.</li>
<li><code>#[pyfunction]</code>: Marks a Rust function as callable from Python.</li>
<li><code>#[pymodule]</code>: Defines a Python module.</li>
</ul>
</li>
</ul>
</div><h1>Exercises</h1>
<div class='content'><ol>
<li>
<p><strong>Call a C Function:</strong></p>
<ul>
<li>Write a Rust program that calls the C <code>sqrt</code> function to compute the square root of a number.</li>
</ul>
</li>
<li>
<p><strong>Link to a C Library:</strong></p>
<ul>
<li>Create a Rust project that links to the <code>math.h</code> library and uses the <code>pow</code> function to compute the power of a number.</li>
</ul>
</li>
<li>
<p><strong>Interfacing with C++:</strong></p>
<ul>
<li>Write a C++ function to multiply two numbers and call it from Rust.</li>
</ul>
</li>
<li>
<p><strong>Interfacing with Python:</strong></p>
<ul>
<li>Create a Rust module that defines a function to concatenate two strings and call it from Python.</li>
</ul>
</li>
</ol>
</div><h1>Summary</h1>
<div class='content'><p>Interfacing with other languages extends Rust's capabilities and allows for greater flexibility in software development. By understanding how to use the FFI, declare external functions, and link to external libraries, Rust programmers can effectively integrate Rust into multi-language projects. Practice with the provided exercises to solidify your understanding and skills in interfacing Rust with C, C++, and Python.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='building-a-web-application'>&#x25C4;Building a Web Application</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Interfacing with Other Languages</a>
	</div>
	<div class='col-4 text-end'>
					<a href='code-style-and-formatting'>Code Style and Formatting &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
