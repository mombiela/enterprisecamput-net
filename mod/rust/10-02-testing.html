<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing</title>

    <link rel="alternate" href="https://campusempresa.com/mod/rust/10-02-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/rust/10-02-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/rust/10-02-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/rust/10-02-testing" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/rust/10-02-testing" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='10-01-building-project' title="Building a Project">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Testing</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='10-03-documentation' title="Documentation">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Testing is a crucial part of software development, ensuring that your code works as expected and helping to catch bugs early. Rust provides a robust testing framework built into the language, making it easy to write and run tests. In this section, we will cover the basics of writing tests in Rust, including unit tests, integration tests, and some best practices.</p>
</div><h1>Table of Contents</h1>
<div class='content'><ol>
<li><a href="#introduction-to-testing-in-rust">Introduction to Testing in Rust</a></li>
<li><a href="#writing-unit-tests">Writing Unit Tests</a></li>
<li><a href="#running-tests">Running Tests</a></li>
<li><a href="#integration-tests">Integration Tests</a></li>
<li><a href="#test-organization">Test Organization</a></li>
<li><a href="#common-testing-patterns">Common Testing Patterns</a></li>
<li><a href="#practical-exercises">Practical Exercises</a></li>
<li><a href="#summary">Summary</a></li>
</ol>
</div><h1>Introduction to Testing in Rust</h1>
<div class='content'><p>Rust's testing framework is built into the language and the Cargo build system. This makes it easy to write and run tests without needing additional dependencies.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Unit Tests</strong>: Test individual units of code, such as functions or methods.</li>
<li><strong>Integration Tests</strong>: Test the interaction between multiple parts of your codebase.</li>
<li><strong>Test Functions</strong>: Functions annotated with <code>#[test]</code> that contain test logic.</li>
</ul>
</div><h1>Writing Unit Tests</h1>
<div class='content'><p>Unit tests are small, focused tests that verify the behavior of a single function or method. They are typically placed in the same file as the code they test.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gc3JjL2xpYi5ycwoKcHViIGZuIGFkZChhOiBpMzIsIGI6IGkzMikgLT4gaTMyIHsKICAgIGEgKyBiCn0KCiNbY2ZnKHRlc3QpXQptb2QgdGVzdHMgewogICAgdXNlIHN1cGVyOjoqOwoKICAgICNbdGVzdF0KICAgIGZuIHRlc3RfYWRkKCkgewogICAgICAgIGFzc2VydF9lcSEoYWRkKDIsIDMpLCA1KTsKICAgIH0KCiAgICAjW3Rlc3RdCiAgICBmbiB0ZXN0X2FkZF9uZWdhdGl2ZSgpIHsKICAgICAgICBhc3NlcnRfZXEhKGFkZCgtMiwgLTMpLCAtNSk7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// src/lib.rs

pub fn add(a: i32, b: i32) -&gt; i32 {
    a + b
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_add() {
        assert_eq!(add(2, 3), 5);
    }

    #[test]
    fn test_add_negative() {
        assert_eq!(add(-2, -3), -5);
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>#[cfg(test)]</code>: This attribute tells the compiler to compile the following module only when running tests.</li>
<li><code>mod tests</code>: Defines a module named <code>tests</code> to contain our test functions.</li>
<li><code>use super::*;</code>: Imports the functions from the parent module to be tested.</li>
<li><code>#[test]</code>: Marks a function as a test function.</li>
<li><code>assert_eq!</code>: A macro that asserts that two expressions are equal.</li>
</ul>
</div><h1>Running Tests</h1>
<div class='content'><p>To run tests, use the following Cargo command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2FyZ28gdGVzdA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>cargo test</pre></div><div class='content'><p>This command compiles your code and runs all tests, providing a summary of the results.</p>
</div><h2>Example Output</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cnVubmluZyAyIHRlc3RzCnRlc3QgdGVzdHM6OnRlc3RfYWRkIC4uLiBvawp0ZXN0IHRlc3RzOjp0ZXN0X2FkZF9uZWdhdGl2ZSAuLi4gb2sKCnRlc3QgcmVzdWx0OiBvay4gMiBwYXNzZWQ7IDAgZmFpbGVkOyAwIGlnbm9yZWQ7IDAgbWVhc3VyZWQ7IDAgZmlsdGVyZWQgb3V0"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>running 2 tests
test tests::test_add ... ok
test tests::test_add_negative ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out</pre></div><div class='content'></div><h1>Integration Tests</h1>
<div class='content'><p>Integration tests are used to test the interaction between multiple parts of your codebase. They are placed in the <code>tests</code> directory at the root of your project.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gdGVzdHMvaW50ZWdyYXRpb25fdGVzdC5ycwoKZXh0ZXJuIGNyYXRlIG15X2NyYXRlOwoKI1t0ZXN0XQpmbiB0ZXN0X2FkZCgpIHsKICAgIGFzc2VydF9lcSEobXlfY3JhdGU6OmFkZCgyLCAzKSwgNSk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// tests/integration_test.rs

extern crate my_crate;

#[test]
fn test_add() {
    assert_eq!(my_crate::add(2, 3), 5);
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><code>extern crate my_crate;</code>: Imports the crate to be tested.</li>
<li>Integration tests are placed in separate files within the <code>tests</code> directory.</li>
</ul>
</div><h1>Test Organization</h1>
<div class='content'><p>Organizing your tests can help maintain a clean and manageable codebase. Here are some tips:</p>
<ul>
<li><strong>Unit Tests</strong>: Place them in the same file as the code they test, within a <code>#[cfg(test)]</code> module.</li>
<li><strong>Integration Tests</strong>: Place them in the <code>tests</code> directory at the root of your project.</li>
<li><strong>Test Utilities</strong>: If you have common test utilities, consider placing them in a separate module or file.</li>
</ul>
</div><h1>Common Testing Patterns</h1>
<div class='content'></div><h2>Using `Result` in Tests</h2>
<div class='content'><p>You can write tests that return <code>Result</code> to leverage the <code>?</code> operator for error handling.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I1t0ZXN0XQpmbiB0ZXN0X2FkZCgpIC0+IFJlc3VsdDwoKSwgU3RyaW5nPiB7CiAgICBpZiBhZGQoMiwgMykgPT0gNSB7CiAgICAgICAgT2soKCkpCiAgICB9IGVsc2UgewogICAgICAgIEVycihTdHJpbmc6OmZyb20oIlRlc3QgZmFpbGVkIikpCiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#[test]
fn test_add() -&gt; Result&lt;(), String&gt; {
    if add(2, 3) == 5 {
        Ok(())
    } else {
        Err(String::from(&quot;Test failed&quot;))
    }
}</pre></div><div class='content'></div><h2>Ignoring Tests</h2>
<div class='content'><p>You can ignore tests using the <code>#[ignore]</code> attribute, useful for tests that are expensive or require specific conditions.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I1t0ZXN0XQojW2lnbm9yZV0KZm4gZXhwZW5zaXZlX3Rlc3QoKSB7CiAgICAvLyBUZXN0IGNvZGUgaGVyZQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#[test]
#[ignore]
fn expensive_test() {
    // Test code here
}</pre></div><div class='content'></div><h1>Practical Exercises</h1>
<div class='content'></div><h2>Exercise 1: Write a Unit Test</h2>
<div class='content'><p>Write a unit test for the following function:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHViIGZuIG11bHRpcGx5KGE6IGkzMiwgYjogaTMyKSAtPiBpMzIgewogICAgYSAqIGIKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pub fn multiply(a: i32, b: i32) -&gt; i32 {
    a * b
}</pre></div><div class='content'><p><strong>Solution:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I1tjZmcodGVzdCldCm1vZCB0ZXN0cyB7CiAgICB1c2Ugc3VwZXI6Oio7CgogICAgI1t0ZXN0XQogICAgZm4gdGVzdF9tdWx0aXBseSgpIHsKICAgICAgICBhc3NlcnRfZXEhKG11bHRpcGx5KDIsIDMpLCA2KTsKICAgIH0KCiAgICAjW3Rlc3RdCiAgICBmbiB0ZXN0X211bHRpcGx5X25lZ2F0aXZlKCkgewogICAgICAgIGFzc2VydF9lcSEobXVsdGlwbHkoLTIsIDMpLCAtNik7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn test_multiply() {
        assert_eq!(multiply(2, 3), 6);
    }

    #[test]
    fn test_multiply_negative() {
        assert_eq!(multiply(-2, 3), -6);
    }
}</pre></div><div class='content'></div><h2>Exercise 2: Write an Integration Test</h2>
<div class='content'><p>Create an integration test for the <code>multiply</code> function.</p>
<p><strong>Solution:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gdGVzdHMvaW50ZWdyYXRpb25fdGVzdC5ycwoKZXh0ZXJuIGNyYXRlIG15X2NyYXRlOwoKI1t0ZXN0XQpmbiB0ZXN0X211bHRpcGx5KCkgewogICAgYXNzZXJ0X2VxIShteV9jcmF0ZTo6bXVsdGlwbHkoMiwgMyksIDYpOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// tests/integration_test.rs

extern crate my_crate;

#[test]
fn test_multiply() {
    assert_eq!(my_crate::multiply(2, 3), 6);
}</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>In this section, we covered the basics of testing in Rust, including:</p>
<ul>
<li>Writing unit tests and integration tests.</li>
<li>Running tests using Cargo.</li>
<li>Organizing tests for maintainability.</li>
<li>Common testing patterns and best practices.</li>
</ul>
<p>Testing is an essential part of developing reliable software. By incorporating tests into your development workflow, you can catch bugs early and ensure your code behaves as expected. In the next section, we will explore documentation in Rust, another crucial aspect of maintaining a healthy codebase.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='10-01-building-project' title="Building a Project">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='10-03-documentation' title="Documentation">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
