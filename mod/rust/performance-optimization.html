<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Optimization in Rust</title>

    <link rel="alternate" href="https://campusempresa.com/mod/rust/performance-optimization" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/rust/performance-optimization" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/rust/performance-optimization" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/rust/performance-optimization" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/rust/performance-optimization" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='common-design-patterns'>&#x25C4;Common Design Patterns</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Performance Optimization in Rust</a>
	</div>
	<div class='col-4 text-end'>
					<a href='contributing-to-open-source'>Contributing to Open Source &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Performance Optimization</h1>
<div class='content'><p>Performance optimization is a crucial aspect of software development, especially in systems programming where Rust excels. This section will cover the basics of why performance matters and how Rust's features can help you write efficient code.</p>
<ul>
<li><strong>Why Performance Matters</strong>: Faster code execution, reduced resource usage, and improved user experience.</li>
<li><strong>Rust's Advantages</strong>: Zero-cost abstractions, ownership model, and safe concurrency.</li>
</ul>
</div><h1>Profiling and Benchmarking</h1>
<div class='content'><p>Before optimizing, it's essential to identify bottlenecks in your code. Profiling and benchmarking are tools that help you understand where your program spends most of its time.</p>
<ul>
<li><strong>Profiling</strong>: Use tools like <code>cargo-flamegraph</code> and <code>perf</code> to visualize performance.</li>
<li><strong>Benchmarking</strong>: Use the <code>criterion</code> crate to measure and compare the performance of different code snippets.</li>
</ul>
</div><h2>Example: Basic Benchmarking with Criterion</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIGNyaXRlcmlvbjo6e2JsYWNrX2JveCwgY3JpdGVyaW9uX2dyb3VwLCBjcml0ZXJpb25fbWFpbiwgQ3JpdGVyaW9ufTsKCmZuIGZpYm9uYWNjaShuOiB1NjQpIC0+IHU2NCB7CiAgICBtYXRjaCBuIHsKICAgICAgICAwID0+IDAsCiAgICAgICAgMSA9PiAxLAogICAgICAgIF8gPT4gZmlib25hY2NpKG4gLSAxKSArIGZpYm9uYWNjaShuIC0gMiksCiAgICB9Cn0KCmZuIGNyaXRlcmlvbl9iZW5jaG1hcmsoYzogJm11dCBDcml0ZXJpb24pIHsKICAgIGMuYmVuY2hfZnVuY3Rpb24oImZpYiAyMCIsIHxifCBiLml0ZXIofHwgZmlib25hY2NpKGJsYWNrX2JveCgyMCkpKSk7Cn0KCmNyaXRlcmlvbl9ncm91cCEoYmVuY2hlcywgY3JpdGVyaW9uX2JlbmNobWFyayk7CmNyaXRlcmlvbl9tYWluIShiZW5jaGVzKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use criterion::{black_box, criterion_group, criterion_main, Criterion};

fn fibonacci(n: u64) -&gt; u64 {
    match n {
        0 =&gt; 0,
        1 =&gt; 1,
        _ =&gt; fibonacci(n - 1) + fibonacci(n - 2),
    }
}

fn criterion_benchmark(c: &amp;mut Criterion) {
    c.bench_function(&quot;fib 20&quot;, |b| b.iter(|| fibonacci(black_box(20))));
}

criterion_group!(benches, criterion_benchmark);
criterion_main!(benches);</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>: This code benchmarks the <code>fibonacci</code> function for <code>n = 20</code>. The <code>black_box</code> function is used to prevent the compiler from optimizing away the function call.</li>
</ul>
</div><h1>Memory Management</h1>
<div class='content'><p>Efficient memory management is key to performance. Rust's ownership model helps in managing memory without a garbage collector, but there are still best practices to follow.</p>
<ul>
<li><strong>Stack vs Heap</strong>: Understand the difference and when to use each.</li>
<li><strong>Avoiding Unnecessary Allocations</strong>: Use stack allocation when possible and prefer <code>Vec</code> over <code>Box&lt;[T]&gt;</code> for dynamic arrays.</li>
<li><strong>Using Slices and References</strong>: Minimize copying by using slices (<code>&amp;[T]</code>) and references (<code>&amp;T</code>).</li>
</ul>
</div><h2>Example: Efficient Use of Vectors</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Zm4gbWFpbigpIHsKICAgIGxldCBtdXQgdmVjID0gVmVjOjp3aXRoX2NhcGFjaXR5KDEwKTsKICAgIGZvciBpIGluIDAuLjEwIHsKICAgICAgICB2ZWMucHVzaChpKTsKICAgIH0KICAgIHByaW50bG4hKCJ7Oj99IiwgdmVjKTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>fn main() {
    let mut vec = Vec::with_capacity(10);
    for i in 0..10 {
        vec.push(i);
    }
    println!(&quot;{:?}&quot;, vec);
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>: Pre-allocating capacity for the vector avoids multiple reallocations, improving performance.</li>
</ul>
</div><h1>Concurrency and Parallelism</h1>
<div class='content'><p>Rust's concurrency model, based on ownership and borrowing, ensures thread safety without a performance penalty.</p>
<ul>
<li><strong>Threads</strong>: Use the <code>std::thread</code> module for creating and managing threads.</li>
<li><strong>Rayon Crate</strong>: Simplifies parallelism by providing parallel iterators.</li>
</ul>
</div><h2>Example: Parallel Iteration with Rayon</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHJheW9uOjpwcmVsdWRlOjoqOwoKZm4gbWFpbigpIHsKICAgIGxldCB2OiBWZWM8aTMyPiA9ICgxLi4xMDAwKS5jb2xsZWN0KCk7CiAgICBsZXQgc3VtOiBpMzIgPSB2LnBhcl9pdGVyKCkuc3VtKCk7CiAgICBwcmludGxuISgiU3VtOiB7fSIsIHN1bSk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use rayon::prelude::*;

fn main() {
    let v: Vec&lt;i32&gt; = (1..1000).collect();
    let sum: i32 = v.par_iter().sum();
    println!(&quot;Sum: {}&quot;, sum);
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>: The <code>par_iter</code> method from the <code>rayon</code> crate allows for parallel iteration, making the sum calculation faster on multi-core processors.</li>
</ul>
</div><h1>Optimizing Algorithms and Data Structures</h1>
<div class='content'><p>Choosing the right algorithm and data structure can significantly impact performance.</p>
<ul>
<li><strong>Algorithm Complexity</strong>: Understand Big O notation and prefer algorithms with lower time complexity.</li>
<li><strong>Data Structures</strong>: Use appropriate data structures like <code>HashMap</code>, <code>BTreeMap</code>, <code>Vec</code>, and <code>LinkedList</code> based on the use case.</li>
</ul>
</div><h2>Example: Using HashMap for Fast Lookup</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHN0ZDo6Y29sbGVjdGlvbnM6Okhhc2hNYXA7CgpmbiBtYWluKCkgewogICAgbGV0IG11dCBzY29yZXMgPSBIYXNoTWFwOjpuZXcoKTsKICAgIHNjb3Jlcy5pbnNlcnQoIkFsaWNlIiwgNTApOwogICAgc2NvcmVzLmluc2VydCgiQm9iIiwgMzApOwoKICAgIGlmIGxldCBTb21lKHNjb3JlKSA9IHNjb3Jlcy5nZXQoIkFsaWNlIikgewogICAgICAgIHByaW50bG4hKCJBbGljZSdzIHNjb3JlOiB7fSIsIHNjb3JlKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use std::collections::HashMap;

fn main() {
    let mut scores = HashMap::new();
    scores.insert(&quot;Alice&quot;, 50);
    scores.insert(&quot;Bob&quot;, 30);

    if let Some(score) = scores.get(&quot;Alice&quot;) {
        println!(&quot;Alice's score: {}&quot;, score);
    }
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>: <code>HashMap</code> provides average O(1) time complexity for lookups, making it efficient for scenarios requiring fast access.</li>
</ul>
</div><h1>Summary</h1>
<div class='content'><p>Performance optimization in Rust involves a combination of profiling, efficient memory management, leveraging concurrency, and choosing the right algorithms and data structures. By understanding and applying these principles, you can write Rust programs that are both safe and fast.</p>
<ul>
<li><strong>Profiling and Benchmarking</strong>: Identify bottlenecks before optimizing.</li>
<li><strong>Memory Management</strong>: Use Rust's ownership model to manage memory efficiently.</li>
<li><strong>Concurrency and Parallelism</strong>: Utilize Rust's concurrency model and libraries like Rayon.</li>
<li><strong>Algorithms and Data Structures</strong>: Choose the right tools for the job to ensure optimal performance.</li>
</ul>
<p>By following these guidelines, you can harness the full potential of Rust to create high-performance applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='common-design-patterns'>&#x25C4;Common Design Patterns</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Performance Optimization in Rust</a>
	</div>
	<div class='col-4 text-end'>
					<a href='contributing-to-open-source'>Contributing to Open Source &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
