<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building a CLI Application</title>

    <link rel="alternate" href="https://campusempresa.com/mod/rust/building-a-cli-application" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/rust/building-a-cli-application" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/rust/building-a-cli-application" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/rust/building-a-cli-application" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/rust/building-a-cli-application" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='deploying-applications'>&#x25C4;Deploying Applications</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Building a CLI Application</a>
	</div>
	<div class='col-4 text-end'>
					<a href='building-a-web-application'>Building a Web Application &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In this module, we will explore how to build a Command Line Interface (CLI) application using Rust. CLI applications are powerful tools that allow users to interact with software through text commands. By the end of this module, you will be able to create a fully functional CLI application in Rust.</p>
</div><h1>Prerequisites</h1>
<div class='content'><p>Before starting this module, you should have:</p>
<ul>
<li>Basic understanding of Rust syntax and concepts.</li>
<li>Rust installed on your machine.</li>
<li>Familiarity with using the terminal or command prompt.</li>
</ul>
</div><h1>Setting Up Your Project</h1>
<div class='content'><p>To start, we need to create a new Rust project. Open your terminal and run the following command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2FyZ28gbmV3IGNsaV9hcHAKY2QgY2xpX2FwcA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>cargo new cli_app
cd cli_app</pre></div><div class='content'><p>This command creates a new Rust project named <code>cli_app</code> and navigates into the project directory.</p>
</div><h1>Adding Dependencies</h1>
<div class='content'><p>For building CLI applications, we will use the <code>clap</code> crate, which provides a simple way to parse command-line arguments.</p>
<p>Add the following to your <code>Cargo.toml</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("W2RlcGVuZGVuY2llc10KY2xhcCA9ICIzLjAi"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>[dependencies]
clap = &quot;3.0&quot;</pre></div><div class='content'></div><h1>Basic CLI Application</h1>
<div class='content'><p>Let's start by creating a basic CLI application that accepts a single argument and prints it.</p>
</div><h2>main.rs</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIGNsYXA6OlBhcnNlcjsKCi8vLyBTaW1wbGUgcHJvZ3JhbSB0byBncmVldCBhIHBlcnNvbgojW2Rlcml2ZShQYXJzZXIpXQpzdHJ1Y3QgQ2xpIHsKICAgIC8vLyBUaGUgbmFtZSBvZiB0aGUgcGVyc29uIHRvIGdyZWV0CiAgICBuYW1lOiBTdHJpbmcsCn0KCmZuIG1haW4oKSB7CiAgICBsZXQgYXJncyA9IENsaTo6cGFyc2UoKTsKICAgIHByaW50bG4hKCJIZWxsbywge30hIiwgYXJncy5uYW1lKTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use clap::Parser;

/// Simple program to greet a person
#[derive(Parser)]
struct Cli {
    /// The name of the person to greet
    name: String,
}

fn main() {
    let args = Cli::parse();
    println!(&quot;Hello, {}!&quot;, args.name);
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong><code>use clap::Parser;</code></strong>: Imports the <code>Parser</code> trait from the <code>clap</code> crate.</li>
<li><strong><code>#[derive(Parser)]</code></strong>: Derives the <code>Parser</code> trait for the <code>Cli</code> struct, enabling it to parse command-line arguments.</li>
<li><strong><code>struct Cli</code></strong>: Defines a struct with a single field <code>name</code> to hold the argument.</li>
<li><strong><code>Cli::parse()</code></strong>: Parses the command-line arguments and returns an instance of <code>Cli</code>.</li>
<li><strong><code>println!</code></strong>: Prints a greeting message using the provided name.</li>
</ul>
</div><h1>Handling Multiple Arguments</h1>
<div class='content'><p>Next, let's extend our application to handle multiple arguments and options.</p>
</div><h2>main.rs</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIGNsYXA6OntQYXJzZXIsIEFyZ0VudW19OwoKI1tkZXJpdmUoUGFyc2VyKV0Kc3RydWN0IENsaSB7CiAgICAvLy8gVGhlIG5hbWUgb2YgdGhlIHBlcnNvbiB0byBncmVldAogICAgbmFtZTogU3RyaW5nLAogICAgLy8vIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gZ3JlZXQKICAgICNbY2xhcChzaG9ydCwgbG9uZywgZGVmYXVsdF92YWx1ZV90ID0gMSldCiAgICBjb3VudDogdTgsCiAgICAvLy8gVGhlIGxhbmd1YWdlIHRvIHVzZSBmb3IgdGhlIGdyZWV0aW5nCiAgICAjW2NsYXAoYXJnX2VudW0sIHNob3J0LCBsb25nLCBkZWZhdWx0X3ZhbHVlX3QgPSBMYW5ndWFnZTo6RW5nbGlzaCldCiAgICBsYW5ndWFnZTogTGFuZ3VhZ2UsCn0KCiNbZGVyaXZlKENvcHksIENsb25lLCBQYXJ0aWFsRXEsIEVxLCBQYXJ0aWFsT3JkLCBPcmQsIEFyZ0VudW0pXQplbnVtIExhbmd1YWdlIHsKICAgIEVuZ2xpc2gsCiAgICBTcGFuaXNoLAogICAgRnJlbmNoLAp9CgpmbiBtYWluKCkgewogICAgbGV0IGFyZ3MgPSBDbGk6OnBhcnNlKCk7CiAgICBmb3IgXyBpbiAwLi5hcmdzLmNvdW50IHsKICAgICAgICBtYXRjaCBhcmdzLmxhbmd1YWdlIHsKICAgICAgICAgICAgTGFuZ3VhZ2U6OkVuZ2xpc2ggPT4gcHJpbnRsbiEoIkhlbGxvLCB7fSEiLCBhcmdzLm5hbWUpLAogICAgICAgICAgICBMYW5ndWFnZTo6U3BhbmlzaCA9PiBwcmludGxuISgiSG9sYSwge30hIiwgYXJncy5uYW1lKSwKICAgICAgICAgICAgTGFuZ3VhZ2U6OkZyZW5jaCA9PiBwcmludGxuISgiQm9uam91ciwge30hIiwgYXJncy5uYW1lKSwKICAgICAgICB9CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use clap::{Parser, ArgEnum};

#[derive(Parser)]
struct Cli {
    /// The name of the person to greet
    name: String,
    /// The number of times to greet
    #[clap(short, long, default_value_t = 1)]
    count: u8,
    /// The language to use for the greeting
    #[clap(arg_enum, short, long, default_value_t = Language::English)]
    language: Language,
}

#[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord, ArgEnum)]
enum Language {
    English,
    Spanish,
    French,
}

fn main() {
    let args = Cli::parse();
    for _ in 0..args.count {
        match args.language {
            Language::English =&gt; println!(&quot;Hello, {}!&quot;, args.name),
            Language::Spanish =&gt; println!(&quot;Hola, {}!&quot;, args.name),
            Language::French =&gt; println!(&quot;Bonjour, {}!&quot;, args.name),
        }
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong><code>#[clap(short, long, default_value_t = 1)]</code></strong>: Specifies that <code>count</code> can be set using <code>-c</code> or <code>--count</code> and defaults to 1.</li>
<li><strong><code>#[clap(arg_enum, short, long, default_value_t = Language::English)]</code></strong>: Specifies that <code>language</code> can be set using <code>-l</code> or <code>--language</code> and defaults to <code>English</code>.</li>
<li><strong><code>enum Language</code></strong>: Defines an enumeration for supported languages.</li>
<li><strong><code>match args.language</code></strong>: Matches the provided language and prints the greeting in the corresponding language.</li>
</ul>
</div><h1>Error Handling</h1>
<div class='content'><p>Proper error handling is crucial for robust CLI applications. Let's add error handling to our application.</p>
</div><h2>main.rs</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIGNsYXA6OntQYXJzZXIsIEFyZ0VudW19Owp1c2Ugc3RkOjplcnJvcjo6RXJyb3I7CgojW2Rlcml2ZShQYXJzZXIpXQpzdHJ1Y3QgQ2xpIHsKICAgIG5hbWU6IFN0cmluZywKICAgICNbY2xhcChzaG9ydCwgbG9uZywgZGVmYXVsdF92YWx1ZV90ID0gMSldCiAgICBjb3VudDogdTgsCiAgICAjW2NsYXAoYXJnX2VudW0sIHNob3J0LCBsb25nLCBkZWZhdWx0X3ZhbHVlX3QgPSBMYW5ndWFnZTo6RW5nbGlzaCldCiAgICBsYW5ndWFnZTogTGFuZ3VhZ2UsCn0KCiNbZGVyaXZlKENvcHksIENsb25lLCBQYXJ0aWFsRXEsIEVxLCBQYXJ0aWFsT3JkLCBPcmQsIEFyZ0VudW0pXQplbnVtIExhbmd1YWdlIHsKICAgIEVuZ2xpc2gsCiAgICBTcGFuaXNoLAogICAgRnJlbmNoLAp9CgpmbiBtYWluKCkgLT4gUmVzdWx0PCgpLCBCb3g8ZHluIEVycm9yPj4gewogICAgbGV0IGFyZ3MgPSBDbGk6OnBhcnNlKCk7CiAgICBmb3IgXyBpbiAwLi5hcmdzLmNvdW50IHsKICAgICAgICBtYXRjaCBhcmdzLmxhbmd1YWdlIHsKICAgICAgICAgICAgTGFuZ3VhZ2U6OkVuZ2xpc2ggPT4gcHJpbnRsbiEoIkhlbGxvLCB7fSEiLCBhcmdzLm5hbWUpLAogICAgICAgICAgICBMYW5ndWFnZTo6U3BhbmlzaCA9PiBwcmludGxuISgiSG9sYSwge30hIiwgYXJncy5uYW1lKSwKICAgICAgICAgICAgTGFuZ3VhZ2U6OkZyZW5jaCA9PiBwcmludGxuISgiQm9uam91ciwge30hIiwgYXJncy5uYW1lKSwKICAgICAgICB9CiAgICB9CiAgICBPaygoKSkKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use clap::{Parser, ArgEnum};
use std::error::Error;

#[derive(Parser)]
struct Cli {
    name: String,
    #[clap(short, long, default_value_t = 1)]
    count: u8,
    #[clap(arg_enum, short, long, default_value_t = Language::English)]
    language: Language,
}

#[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord, ArgEnum)]
enum Language {
    English,
    Spanish,
    French,
}

fn main() -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {
    let args = Cli::parse();
    for _ in 0..args.count {
        match args.language {
            Language::English =&gt; println!(&quot;Hello, {}!&quot;, args.name),
            Language::Spanish =&gt; println!(&quot;Hola, {}!&quot;, args.name),
            Language::French =&gt; println!(&quot;Bonjour, {}!&quot;, args.name),
        }
    }
    Ok(())
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong><code>Result&lt;(), Box&lt;dyn Error&gt;&gt;</code></strong>: Changes the return type of <code>main</code> to a <code>Result</code> to handle potential errors.</li>
<li><strong><code>Ok(())</code></strong>: Indicates successful execution.</li>
</ul>
</div><h1>Advanced Features</h1>
<div class='content'><p>For advanced CLI applications, you might need subcommands, configuration files, or more complex argument parsing. The <code>clap</code> crate supports these features.</p>
</div><h2>Subcommands Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIGNsYXA6OntQYXJzZXIsIFN1YmNvbW1hbmR9OwoKI1tkZXJpdmUoUGFyc2VyKV0Kc3RydWN0IENsaSB7CiAgICAjW2NsYXAoc3ViY29tbWFuZCldCiAgICBjb21tYW5kOiBDb21tYW5kcywKfQoKI1tkZXJpdmUoU3ViY29tbWFuZCldCmVudW0gQ29tbWFuZHMgewogICAgR3JlZXQgewogICAgICAgIG5hbWU6IFN0cmluZywKICAgIH0sCiAgICBGYXJld2VsbCB7CiAgICAgICAgbmFtZTogU3RyaW5nLAogICAgfSwKfQoKZm4gbWFpbigpIHsKICAgIGxldCBhcmdzID0gQ2xpOjpwYXJzZSgpOwogICAgbWF0Y2ggYXJncy5jb21tYW5kIHsKICAgICAgICBDb21tYW5kczo6R3JlZXQgeyBuYW1lIH0gPT4gcHJpbnRsbiEoIkhlbGxvLCB7fSEiLCBuYW1lKSwKICAgICAgICBDb21tYW5kczo6RmFyZXdlbGwgeyBuYW1lIH0gPT4gcHJpbnRsbiEoIkdvb2RieWUsIHt9ISIsIG5hbWUpLAogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use clap::{Parser, Subcommand};

#[derive(Parser)]
struct Cli {
    #[clap(subcommand)]
    command: Commands,
}

#[derive(Subcommand)]
enum Commands {
    Greet {
        name: String,
    },
    Farewell {
        name: String,
    },
}

fn main() {
    let args = Cli::parse();
    match args.command {
        Commands::Greet { name } =&gt; println!(&quot;Hello, {}!&quot;, name),
        Commands::Farewell { name } =&gt; println!(&quot;Goodbye, {}!&quot;, name),
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong><code>#[clap(subcommand)]</code></strong>: Specifies that <code>command</code> is a subcommand.</li>
<li><strong><code>enum Commands</code></strong>: Defines subcommands <code>Greet</code> and <code>Farewell</code>.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>In this module, we covered the basics of building a CLI application in Rust using the <code>clap</code> crate. We started with a simple application, added multiple arguments and options, implemented error handling, and explored advanced features like subcommands. With these skills, you can create powerful and user-friendly CLI applications in Rust.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='deploying-applications'>&#x25C4;Deploying Applications</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Building a CLI Application</a>
	</div>
	<div class='col-4 text-end'>
					<a href='building-a-web-application'>Building a Web Application &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
