<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connecting to a MySQL Database</title>

    <link rel="alternate" href="https://campusempresa.com/mod/php/connecting-to-mysql-database" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/php/connecting-to-mysql-database" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/php/connecting-to-mysql-database" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/php/connecting-to-mysql-database" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/php/connecting-to-mysql-database" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='introduction-to-databases'>&#x25C4;Introduction to Databases</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Connecting to a MySQL Database</a>
	</div>
	<div class='col-4 text-end'>
					<a href='performing-crud-operations'>Performing CRUD Operations &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Connecting to a MySQL database is a fundamental skill for any PHP developer. This topic will guide you through the process, from setting up your environment to executing basic queries.</p>
</div><h1>Prerequisites</h1>
<div class='content'><p>Before you start, ensure you have the following:</p>
<ul>
<li>A working installation of PHP.</li>
<li>A MySQL server running and accessible.</li>
<li>Basic knowledge of PHP syntax.</li>
</ul>
</div><h1>Setting Up the Environment</h1>
<div class='content'><p>To connect to a MySQL database using PHP, you need to have the <code>mysqli</code> extension enabled. This extension is included in PHP by default, but you should verify it is enabled in your <code>php.ini</code> configuration file.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBFbnN1cmUgdGhlIGZvbGxvd2luZyBsaW5lIGlzIHVuY29tbWVudGVkIGluIHBocC5pbmkKZXh0ZW5zaW9uPW15c3FsaQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Ensure the following line is uncommented in php.ini
extension=mysqli</pre></div><div class='content'></div><h1>Establishing a Connection</h1>
<div class='content'></div><h2>Using `mysqli`</h2>
<div class='content'><p>The <code>mysqli</code> extension provides a simple way to connect to a MySQL database. Here’s how you can do it:</p>
<ol>
<li><strong>Create a Connection</strong>: Use the <code>mysqli_connect</code> function to establish a connection.</li>
<li><strong>Check the Connection</strong>: Verify if the connection was successful.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJHNlcnZlcm5hbWUgPSAibG9jYWxob3N0IjsKJHVzZXJuYW1lID0gInJvb3QiOwokcGFzc3dvcmQgPSAiIjsKJGRibmFtZSA9ICJ0ZXN0X2RiIjsKCi8vIENyZWF0ZSBjb25uZWN0aW9uCiRjb25uID0gbXlzcWxpX2Nvbm5lY3QoJHNlcnZlcm5hbWUsICR1c2VybmFtZSwgJHBhc3N3b3JkLCAkZGJuYW1lKTsKCi8vIENoZWNrIGNvbm5lY3Rpb24KaWYgKCEkY29ubikgewogICAgZGllKCJDb25uZWN0aW9uIGZhaWxlZDogIiAuIG15c3FsaV9jb25uZWN0X2Vycm9yKCkpOwp9CmVjaG8gIkNvbm5lY3RlZCBzdWNjZXNzZnVsbHkiOwo/Pg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$servername = &quot;localhost&quot;;
$username = &quot;root&quot;;
$password = &quot;&quot;;
$dbname = &quot;test_db&quot;;

// Create connection
$conn = mysqli_connect($servername, $username, $password, $dbname);

// Check connection
if (!$conn) {
    die(&quot;Connection failed: &quot; . mysqli_connect_error());
}
echo &quot;Connected successfully&quot;;
?&gt;</pre></div><div class='content'></div><h2>Using PDO (PHP Data Objects)</h2>
<div class='content'><p>PDO is a more flexible and secure way to connect to a database. It supports multiple database types and provides a consistent interface.</p>
<ol>
<li><strong>Create a PDO Instance</strong>: Use the <code>new PDO</code> constructor.</li>
<li><strong>Handle Exceptions</strong>: Use try-catch blocks to handle connection errors.</li>
</ol>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJGRzbiA9ICdteXNxbDpob3N0PWxvY2FsaG9zdDtkYm5hbWU9dGVzdF9kYic7CiR1c2VybmFtZSA9ICdyb290JzsKJHBhc3N3b3JkID0gJyc7Cgp0cnkgewogICAgJHBkbyA9IG5ldyBQRE8oJGRzbiwgJHVzZXJuYW1lLCAkcGFzc3dvcmQpOwogICAgLy8gU2V0IHRoZSBQRE8gZXJyb3IgbW9kZSB0byBleGNlcHRpb24KICAgICRwZG8tPnNldEF0dHJpYnV0ZShQRE86OkFUVFJfRVJSTU9ERSwgUERPOjpFUlJNT0RFX0VYQ0VQVElPTik7CiAgICBlY2hvICJDb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5IjsKfSBjYXRjaCAoUERPRXhjZXB0aW9uICRlKSB7CiAgICBlY2hvICJDb25uZWN0aW9uIGZhaWxlZDogIiAuICRlLT5nZXRNZXNzYWdlKCk7Cn0KPz4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$dsn = 'mysql:host=localhost;dbname=test_db';
$username = 'root';
$password = '';

try {
    $pdo = new PDO($dsn, $username, $password);
    // Set the PDO error mode to exception
    $pdo-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    echo &quot;Connected successfully&quot;;
} catch (PDOException $e) {
    echo &quot;Connection failed: &quot; . $e-&gt;getMessage();
}
?&gt;</pre></div><div class='content'></div><h1>Executing Queries</h1>
<div class='content'></div><h2>Using `mysqli`</h2>
<div class='content'><p>Once connected, you can execute SQL queries using the <code>mysqli_query</code> function.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJHNxbCA9ICJTRUxFQ1QgaWQsIGZpcnN0bmFtZSwgbGFzdG5hbWUgRlJPTSBVc2VycyI7CiRyZXN1bHQgPSBteXNxbGlfcXVlcnkoJGNvbm4sICRzcWwpOwoKaWYgKG15c3FsaV9udW1fcm93cygkcmVzdWx0KSA+IDApIHsKICAgIC8vIE91dHB1dCBkYXRhIG9mIGVhY2ggcm93CiAgICB3aGlsZSgkcm93ID0gbXlzcWxpX2ZldGNoX2Fzc29jKCRyZXN1bHQpKSB7CiAgICAgICAgZWNobyAiaWQ6ICIgLiAkcm93WyJpZCJdLiAiIC0gTmFtZTogIiAuICRyb3dbImZpcnN0bmFtZSJdLiAiICIgLiAkcm93WyJsYXN0bmFtZSJdLiAiPGJyPiI7CiAgICB9Cn0gZWxzZSB7CiAgICBlY2hvICIwIHJlc3VsdHMiOwp9Cm15c3FsaV9jbG9zZSgkY29ubik7Cj8+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$sql = &quot;SELECT id, firstname, lastname FROM Users&quot;;
$result = mysqli_query($conn, $sql);

if (mysqli_num_rows($result) &gt; 0) {
    // Output data of each row
    while($row = mysqli_fetch_assoc($result)) {
        echo &quot;id: &quot; . $row[&quot;id&quot;]. &quot; - Name: &quot; . $row[&quot;firstname&quot;]. &quot; &quot; . $row[&quot;lastname&quot;]. &quot;&lt;br&gt;&quot;;
    }
} else {
    echo &quot;0 results&quot;;
}
mysqli_close($conn);
?&gt;</pre></div><div class='content'></div><h2>Using PDO</h2>
<div class='content'><p>With PDO, you can prepare and execute statements, which is more secure and efficient.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJHNxbCA9ICdTRUxFQ1QgaWQsIGZpcnN0bmFtZSwgbGFzdG5hbWUgRlJPTSBVc2Vycyc7CiRzdG10ID0gJHBkby0+cXVlcnkoJHNxbCk7Cgp3aGlsZSAoJHJvdyA9ICRzdG10LT5mZXRjaChQRE86OkZFVENIX0FTU09DKSkgewogICAgZWNobyAiaWQ6ICIgLiAkcm93WydpZCddIC4gIiAtIE5hbWU6ICIgLiAkcm93WydmaXJzdG5hbWUnXSAuICIgIiAuICRyb3dbJ2xhc3RuYW1lJ10gLiAiPGJyPiI7Cn0KPz4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$sql = 'SELECT id, firstname, lastname FROM Users';
$stmt = $pdo-&gt;query($sql);

while ($row = $stmt-&gt;fetch(PDO::FETCH_ASSOC)) {
    echo &quot;id: &quot; . $row['id'] . &quot; - Name: &quot; . $row['firstname'] . &quot; &quot; . $row['lastname'] . &quot;&lt;br&gt;&quot;;
}
?&gt;</pre></div><div class='content'></div><h1>Error Handling</h1>
<div class='content'></div><h2>`mysqli`</h2>
<div class='content'><p>Check for errors after executing queries.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKaWYgKCFteXNxbGlfcXVlcnkoJGNvbm4sICRzcWwpKSB7CiAgICBlY2hvICJFcnJvcjogIiAuICRzcWwgLiAiPGJyPiIgLiBteXNxbGlfZXJyb3IoJGNvbm4pOwp9Cj8+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
if (!mysqli_query($conn, $sql)) {
    echo &quot;Error: &quot; . $sql . &quot;&lt;br&gt;&quot; . mysqli_error($conn);
}
?&gt;</pre></div><div class='content'></div><h2>PDO</h2>
<div class='content'><p>Use exceptions to handle errors.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKdHJ5IHsKICAgICRzdG10ID0gJHBkby0+cXVlcnkoJHNxbCk7Cn0gY2F0Y2ggKFBET0V4Y2VwdGlvbiAkZSkgewogICAgZWNobyAiUXVlcnkgZmFpbGVkOiAiIC4gJGUtPmdldE1lc3NhZ2UoKTsKfQo/Pg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
try {
    $stmt = $pdo-&gt;query($sql);
} catch (PDOException $e) {
    echo &quot;Query failed: &quot; . $e-&gt;getMessage();
}
?&gt;</pre></div><div class='content'></div><h1>Closing the Connection</h1>
<div class='content'></div><h2>`mysqli`</h2>
<div class='content'><p>Always close the connection when done.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKbXlzcWxpX2Nsb3NlKCRjb25uKTsKPz4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
mysqli_close($conn);
?&gt;</pre></div><div class='content'></div><h2>PDO</h2>
<div class='content'><p>PDO connections are closed automatically when the object is destroyed, but you can explicitly set the PDO object to null.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJHBkbyA9IG51bGw7Cj8+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$pdo = null;
?&gt;</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>Connecting to a MySQL database in PHP can be done using either the <code>mysqli</code> extension or PDO. While <code>mysqli</code> is straightforward and easy to use, PDO offers more flexibility and security, especially for larger projects. Always ensure to handle errors gracefully and close your connections when they are no longer needed.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='introduction-to-databases'>&#x25C4;Introduction to Databases</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Connecting to a MySQL Database</a>
	</div>
	<div class='col-4 text-end'>
					<a href='performing-crud-operations'>Performing CRUD Operations &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
