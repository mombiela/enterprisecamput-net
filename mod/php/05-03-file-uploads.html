<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    <title>File Uploads</title>

    <link rel="alternate" href="https://campusempresa.com/mod/php/05-03-file-uploads" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/php/05-03-file-uploads" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/php/05-03-file-uploads" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.ea63f62b9e.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "languages";
  		var MOD_NAME = "php";
  		var TEMA_NAME = "5-3";
  		var TYPE = "mod";
  		var PATH = "mod/php/05-03-file-uploads";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.49d891d32f.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/php/05-03-file-uploads" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/php/05-03-file-uploads" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my_modules" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/end_modules" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" style="display:none;" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="php">
		<a  href="#" class="text-secondary d-none" data-read-mod="php" data-read-unit="5-3" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="php" data-unread-unit="5-3" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-02-form-validation' title="Form Validation" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-02-form-validation' title="Form Validation" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">File Uploads</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-04-form-security' title="Form Security" class="py-2 px-3 btn btn-primary"
				data-read-mod="php" data-read-unit="5-3">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-04-form-security' title="Form Security" class="py-2 px-3 btn btn-primary" 
				data-read-mod="php" data-read-unit="5-3">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'><p>In this section, we will cover how to handle file uploads in PHP. File uploads are a common feature in web applications, allowing users to upload files such as images, documents, and other media. We will go through the process step-by-step, from creating an HTML form to handling the uploaded file on the server.</p>
</div><h1><ol>
<li>Creating the HTML Form</li>
</ol></h1>
<div class='content'><p>First, we need an HTML form that allows users to select a file and submit it to the server.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8dGl0bGU+RmlsZSBVcGxvYWQ8L3RpdGxlPgo8L2hlYWQ+Cjxib2R5PgogICAgPGZvcm0gYWN0aW9uPSJ1cGxvYWQucGhwIiBtZXRob2Q9InBvc3QiIGVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEiPgogICAgICAgIDxsYWJlbCBmb3I9ImZpbGUiPkNob29zZSBmaWxlIHRvIHVwbG9hZDo8L2xhYmVsPgogICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBuYW1lPSJmaWxlIiBpZD0iZmlsZSI+CiAgICAgICAgPGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9IlVwbG9hZCBGaWxlIj4KICAgIDwvZm9ybT4KPC9ib2R5Pgo8L2h0bWw+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;File Upload&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form action=&quot;upload.php&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
        &lt;label for=&quot;file&quot;&gt;Choose file to upload:&lt;/label&gt;
        &lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot;&gt;
        &lt;input type=&quot;submit&quot; value=&quot;Upload File&quot;&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre></div><div class='content'></div><h2>Explanation:</h2>
<div class='content'><ul>
<li><code>action=&quot;upload.php&quot;</code>: Specifies the server-side script that will handle the file upload.</li>
<li><code>method=&quot;post&quot;</code>: Uses the POST method to submit the form data.</li>
<li><code>enctype=&quot;multipart/form-data&quot;</code>: Necessary for file uploads to ensure the form data is encoded correctly.</li>
</ul>
</div><h1><ol start="2">
<li>Handling the File Upload in PHP</li>
</ol></h1>
<div class='content'><p>Next, we need to create the <code>upload.php</code> script to handle the file upload.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKaWYgKCRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09ICdQT1NUJykgewogICAgLy8gQ2hlY2sgaWYgYSBmaWxlIHdhcyB1cGxvYWRlZAogICAgaWYgKGlzc2V0KCRfRklMRVNbJ2ZpbGUnXSkgJiYgJF9GSUxFU1snZmlsZSddWydlcnJvciddID09IDApIHsKICAgICAgICAkZmlsZSA9ICRfRklMRVNbJ2ZpbGUnXTsKCiAgICAgICAgLy8gRGVmaW5lIHRoZSB0YXJnZXQgZGlyZWN0b3J5CiAgICAgICAgJHRhcmdldERpciA9ICJ1cGxvYWRzLyI7CiAgICAgICAgLy8gRGVmaW5lIHRoZSB0YXJnZXQgZmlsZSBwYXRoCiAgICAgICAgJHRhcmdldEZpbGUgPSAkdGFyZ2V0RGlyIC4gYmFzZW5hbWUoJGZpbGVbIm5hbWUiXSk7CgogICAgICAgIC8vIENoZWNrIGlmIHRoZSBmaWxlIGFscmVhZHkgZXhpc3RzCiAgICAgICAgaWYgKGZpbGVfZXhpc3RzKCR0YXJnZXRGaWxlKSkgewogICAgICAgICAgICBlY2hvICJTb3JyeSwgZmlsZSBhbHJlYWR5IGV4aXN0cy4iOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIE1vdmUgdGhlIHVwbG9hZGVkIGZpbGUgdG8gdGhlIHRhcmdldCBkaXJlY3RvcnkKICAgICAgICAgICAgaWYgKG1vdmVfdXBsb2FkZWRfZmlsZSgkZmlsZVsidG1wX25hbWUiXSwgJHRhcmdldEZpbGUpKSB7CiAgICAgICAgICAgICAgICBlY2hvICJUaGUgZmlsZSAiIC4gaHRtbHNwZWNpYWxjaGFycyhiYXNlbmFtZSgkZmlsZVsibmFtZSJdKSkgLiAiIGhhcyBiZWVuIHVwbG9hZGVkLiI7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBlY2hvICJTb3JyeSwgdGhlcmUgd2FzIGFuIGVycm9yIHVwbG9hZGluZyB5b3VyIGZpbGUuIjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgZWNobyAiTm8gZmlsZSB3YXMgdXBsb2FkZWQgb3IgdGhlcmUgd2FzIGFuIGVycm9yIHVwbG9hZGluZyB0aGUgZmlsZS4iOwogICAgfQp9IGVsc2UgewogICAgZWNobyAiSW52YWxpZCByZXF1ZXN0IG1ldGhvZC4iOwp9Cj8+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    // Check if a file was uploaded
    if (isset($_FILES['file']) &amp;&amp; $_FILES['file']['error'] == 0) {
        $file = $_FILES['file'];

        // Define the target directory
        $targetDir = &quot;uploads/&quot;;
        // Define the target file path
        $targetFile = $targetDir . basename($file[&quot;name&quot;]);

        // Check if the file already exists
        if (file_exists($targetFile)) {
            echo &quot;Sorry, file already exists.&quot;;
        } else {
            // Move the uploaded file to the target directory
            if (move_uploaded_file($file[&quot;tmp_name&quot;], $targetFile)) {
                echo &quot;The file &quot; . htmlspecialchars(basename($file[&quot;name&quot;])) . &quot; has been uploaded.&quot;;
            } else {
                echo &quot;Sorry, there was an error uploading your file.&quot;;
            }
        }
    } else {
        echo &quot;No file was uploaded or there was an error uploading the file.&quot;;
    }
} else {
    echo &quot;Invalid request method.&quot;;
}
?&gt;</pre></div><div class='content'></div><h2>Explanation:</h2>
<div class='content'><ul>
<li><code>$_SERVER['REQUEST_METHOD'] == 'POST'</code>: Checks if the form was submitted using the POST method.</li>
<li><code>$_FILES['file']</code>: Contains information about the uploaded file.</li>
<li><code>$_FILES['file']['error'] == 0</code>: Checks if there were no errors during the file upload.</li>
<li><code>basename($file[&quot;name&quot;])</code>: Extracts the file name from the file path.</li>
<li><code>move_uploaded_file($file[&quot;tmp_name&quot;], $targetFile)</code>: Moves the uploaded file from the temporary directory to the target directory.</li>
</ul>
</div><h1><ol start="3">
<li>Validating the Uploaded File</li>
</ol></h1>
<div class='content'><p>It's important to validate the uploaded file to ensure it meets certain criteria, such as file type and size.</p>
</div><h2>Example: Validating File Type and Size</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKaWYgKCRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09ICdQT1NUJykgewogICAgaWYgKGlzc2V0KCRfRklMRVNbJ2ZpbGUnXSkgJiYgJF9GSUxFU1snZmlsZSddWydlcnJvciddID09IDApIHsKICAgICAgICAkZmlsZSA9ICRfRklMRVNbJ2ZpbGUnXTsKICAgICAgICAkdGFyZ2V0RGlyID0gInVwbG9hZHMvIjsKICAgICAgICAkdGFyZ2V0RmlsZSA9ICR0YXJnZXREaXIgLiBiYXNlbmFtZSgkZmlsZVsibmFtZSJdKTsKICAgICAgICAkZmlsZVR5cGUgPSBzdHJ0b2xvd2VyKHBhdGhpbmZvKCR0YXJnZXRGaWxlLCBQQVRISU5GT19FWFRFTlNJT04pKTsKICAgICAgICAkbWF4RmlsZVNpemUgPSAyICogMTAyNCAqIDEwMjQ7IC8vIDJNQgoKICAgICAgICAvLyBDaGVjayBmaWxlIHNpemUKICAgICAgICBpZiAoJGZpbGVbInNpemUiXSA+ICRtYXhGaWxlU2l6ZSkgewogICAgICAgICAgICBlY2hvICJTb3JyeSwgeW91ciBmaWxlIGlzIHRvbyBsYXJnZS4iOwogICAgICAgIH0gCiAgICAgICAgLy8gQWxsb3cgY2VydGFpbiBmaWxlIGZvcm1hdHMKICAgICAgICBlbHNlaWYgKCFpbl9hcnJheSgkZmlsZVR5cGUsIFsnanBnJywgJ3BuZycsICdnaWYnLCAncGRmJ10pKSB7CiAgICAgICAgICAgIGVjaG8gIlNvcnJ5LCBvbmx5IEpQRywgUE5HLCBHSUYsIGFuZCBQREYgZmlsZXMgYXJlIGFsbG93ZWQuIjsKICAgICAgICB9IAogICAgICAgIC8vIENoZWNrIGlmIGZpbGUgYWxyZWFkeSBleGlzdHMKICAgICAgICBlbHNlaWYgKGZpbGVfZXhpc3RzKCR0YXJnZXRGaWxlKSkgewogICAgICAgICAgICBlY2hvICJTb3JyeSwgZmlsZSBhbHJlYWR5IGV4aXN0cy4iOwogICAgICAgIH0gCiAgICAgICAgLy8gTW92ZSB0aGUgdXBsb2FkZWQgZmlsZSB0byB0aGUgdGFyZ2V0IGRpcmVjdG9yeQogICAgICAgIGVsc2UgewogICAgICAgICAgICBpZiAobW92ZV91cGxvYWRlZF9maWxlKCRmaWxlWyJ0bXBfbmFtZSJdLCAkdGFyZ2V0RmlsZSkpIHsKICAgICAgICAgICAgICAgIGVjaG8gIlRoZSBmaWxlICIgLiBodG1sc3BlY2lhbGNoYXJzKGJhc2VuYW1lKCRmaWxlWyJuYW1lIl0pKSAuICIgaGFzIGJlZW4gdXBsb2FkZWQuIjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGVjaG8gIlNvcnJ5LCB0aGVyZSB3YXMgYW4gZXJyb3IgdXBsb2FkaW5nIHlvdXIgZmlsZS4iOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICBlY2hvICJObyBmaWxlIHdhcyB1cGxvYWRlZCBvciB0aGVyZSB3YXMgYW4gZXJyb3IgdXBsb2FkaW5nIHRoZSBmaWxlLiI7CiAgICB9Cn0gZWxzZSB7CiAgICBlY2hvICJJbnZhbGlkIHJlcXVlc3QgbWV0aG9kLiI7Cn0KPz4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    if (isset($_FILES['file']) &amp;&amp; $_FILES['file']['error'] == 0) {
        $file = $_FILES['file'];
        $targetDir = &quot;uploads/&quot;;
        $targetFile = $targetDir . basename($file[&quot;name&quot;]);
        $fileType = strtolower(pathinfo($targetFile, PATHINFO_EXTENSION));
        $maxFileSize = 2 * 1024 * 1024; // 2MB

        // Check file size
        if ($file[&quot;size&quot;] &gt; $maxFileSize) {
            echo &quot;Sorry, your file is too large.&quot;;
        } 
        // Allow certain file formats
        elseif (!in_array($fileType, ['jpg', 'png', 'gif', 'pdf'])) {
            echo &quot;Sorry, only JPG, PNG, GIF, and PDF files are allowed.&quot;;
        } 
        // Check if file already exists
        elseif (file_exists($targetFile)) {
            echo &quot;Sorry, file already exists.&quot;;
        } 
        // Move the uploaded file to the target directory
        else {
            if (move_uploaded_file($file[&quot;tmp_name&quot;], $targetFile)) {
                echo &quot;The file &quot; . htmlspecialchars(basename($file[&quot;name&quot;])) . &quot; has been uploaded.&quot;;
            } else {
                echo &quot;Sorry, there was an error uploading your file.&quot;;
            }
        }
    } else {
        echo &quot;No file was uploaded or there was an error uploading the file.&quot;;
    }
} else {
    echo &quot;Invalid request method.&quot;;
}
?&gt;</pre></div><div class='content'></div><h2>Explanation:</h2>
<div class='content'><ul>
<li><code>$maxFileSize = 2 * 1024 * 1024;</code>: Sets the maximum file size to 2MB.</li>
<li><code>in_array($fileType, ['jpg', 'png', 'gif', 'pdf'])</code>: Checks if the file type is allowed.</li>
</ul>
</div><h1><ol start="4">
<li>Practical Exercise</li>
</ol></h1>
<div class='content'></div><h2>Exercise:</h2>
<div class='content'><p>Create a PHP script that allows users to upload an image file. The script should:</p>
<ol>
<li>Validate that the uploaded file is an image (JPG, PNG, or GIF).</li>
<li>Ensure the file size does not exceed 1MB.</li>
<li>Save the uploaded file to a directory named <code>images</code>.</li>
<li>Display a message indicating whether the upload was successful or if there were any errors.</li>
</ol>
</div><h2>Solution:</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKaWYgKCRfU0VSVkVSWydSRVFVRVNUX01FVEhPRCddID09ICdQT1NUJykgewogICAgaWYgKGlzc2V0KCRfRklMRVNbJ2ZpbGUnXSkgJiYgJF9GSUxFU1snZmlsZSddWydlcnJvciddID09IDApIHsKICAgICAgICAkZmlsZSA9ICRfRklMRVNbJ2ZpbGUnXTsKICAgICAgICAkdGFyZ2V0RGlyID0gImltYWdlcy8iOwogICAgICAgICR0YXJnZXRGaWxlID0gJHRhcmdldERpciAuIGJhc2VuYW1lKCRmaWxlWyJuYW1lIl0pOwogICAgICAgICRmaWxlVHlwZSA9IHN0cnRvbG93ZXIocGF0aGluZm8oJHRhcmdldEZpbGUsIFBBVEhJTkZPX0VYVEVOU0lPTikpOwogICAgICAgICRtYXhGaWxlU2l6ZSA9IDEgKiAxMDI0ICogMTAyNDsgLy8gMU1CCgogICAgICAgIC8vIENoZWNrIGZpbGUgc2l6ZQogICAgICAgIGlmICgkZmlsZVsic2l6ZSJdID4gJG1heEZpbGVTaXplKSB7CiAgICAgICAgICAgIGVjaG8gIlNvcnJ5LCB5b3VyIGZpbGUgaXMgdG9vIGxhcmdlLiI7CiAgICAgICAgfSAKICAgICAgICAvLyBBbGxvdyBjZXJ0YWluIGZpbGUgZm9ybWF0cwogICAgICAgIGVsc2VpZiAoIWluX2FycmF5KCRmaWxlVHlwZSwgWydqcGcnLCAncG5nJywgJ2dpZiddKSkgewogICAgICAgICAgICBlY2hvICJTb3JyeSwgb25seSBKUEcsIFBORywgYW5kIEdJRiBmaWxlcyBhcmUgYWxsb3dlZC4iOwogICAgICAgIH0gCiAgICAgICAgLy8gQ2hlY2sgaWYgZmlsZSBhbHJlYWR5IGV4aXN0cwogICAgICAgIGVsc2VpZiAoZmlsZV9leGlzdHMoJHRhcmdldEZpbGUpKSB7CiAgICAgICAgICAgIGVjaG8gIlNvcnJ5LCBmaWxlIGFscmVhZHkgZXhpc3RzLiI7CiAgICAgICAgfSAKICAgICAgICAvLyBNb3ZlIHRoZSB1cGxvYWRlZCBmaWxlIHRvIHRoZSB0YXJnZXQgZGlyZWN0b3J5CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGlmIChtb3ZlX3VwbG9hZGVkX2ZpbGUoJGZpbGVbInRtcF9uYW1lIl0sICR0YXJnZXRGaWxlKSkgewogICAgICAgICAgICAgICAgZWNobyAiVGhlIGZpbGUgIiAuIGh0bWxzcGVjaWFsY2hhcnMoYmFzZW5hbWUoJGZpbGVbIm5hbWUiXSkpIC4gIiBoYXMgYmVlbiB1cGxvYWRlZC4iOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZWNobyAiU29ycnksIHRoZXJlIHdhcyBhbiBlcnJvciB1cGxvYWRpbmcgeW91ciBmaWxlLiI7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgIGVjaG8gIk5vIGZpbGUgd2FzIHVwbG9hZGVkIG9yIHRoZXJlIHdhcyBhbiBlcnJvciB1cGxvYWRpbmcgdGhlIGZpbGUuIjsKICAgIH0KfSBlbHNlIHsKICAgIGVjaG8gIkludmFsaWQgcmVxdWVzdCBtZXRob2QuIjsKfQo/Pg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    if (isset($_FILES['file']) &amp;&amp; $_FILES['file']['error'] == 0) {
        $file = $_FILES['file'];
        $targetDir = &quot;images/&quot;;
        $targetFile = $targetDir . basename($file[&quot;name&quot;]);
        $fileType = strtolower(pathinfo($targetFile, PATHINFO_EXTENSION));
        $maxFileSize = 1 * 1024 * 1024; // 1MB

        // Check file size
        if ($file[&quot;size&quot;] &gt; $maxFileSize) {
            echo &quot;Sorry, your file is too large.&quot;;
        } 
        // Allow certain file formats
        elseif (!in_array($fileType, ['jpg', 'png', 'gif'])) {
            echo &quot;Sorry, only JPG, PNG, and GIF files are allowed.&quot;;
        } 
        // Check if file already exists
        elseif (file_exists($targetFile)) {
            echo &quot;Sorry, file already exists.&quot;;
        } 
        // Move the uploaded file to the target directory
        else {
            if (move_uploaded_file($file[&quot;tmp_name&quot;], $targetFile)) {
                echo &quot;The file &quot; . htmlspecialchars(basename($file[&quot;name&quot;])) . &quot; has been uploaded.&quot;;
            } else {
                echo &quot;Sorry, there was an error uploading your file.&quot;;
            }
        }
    } else {
        echo &quot;No file was uploaded or there was an error uploading the file.&quot;;
    }
} else {
    echo &quot;Invalid request method.&quot;;
}
?&gt;</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>In this section, we learned how to handle file uploads in PHP. We covered creating an HTML form for file uploads, handling the uploaded file on the server, and validating the file type and size. We also provided a practical exercise to reinforce the concepts learned. In the next section, we will discuss form security to ensure that our file upload functionality is secure.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='05-02-form-validation' title="Form Validation" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='05-02-form-validation' title="Form Validation" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='05-04-form-security' title="Form Security" class="py-2 px-3 btn btn-primary"
				data-read-mod="php" data-read-unit="5-3">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='05-04-form-security' title="Form Security" class="py-2 px-3 btn btn-primary" 
				data-read-mod="php" data-read-unit="5-3">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>PHP Programming Course</h1>
<h2>Module 1: Introduction to PHP</h2>
<ul>
<li><a href="01-01-what-is-php">What is PHP?</a></li>
<li><a href="01-02-setting-up-environment">Setting Up the Development Environment</a></li>
<li><a href="01-03-first-php-script">Your First PHP Script</a></li>
<li><a href="01-04-php-syntax-variables">PHP Syntax and Variables</a></li>
<li><a href="01-05-data-types">Data Types in PHP</a></li>
</ul>
<h2>Module 2: Control Structures</h2>
<ul>
<li><a href="02-01-conditional-statements">Conditional Statements</a></li>
<li><a href="02-02-loops">Loops in PHP</a></li>
<li><a href="02-03-switch-statements">Switch Statements</a></li>
<li><a href="02-04-include-require">PHP Include and Require</a></li>
</ul>
<h2>Module 3: Functions</h2>
<ul>
<li><a href="03-01-defining-calling-functions">Defining and Calling Functions</a></li>
<li><a href="03-02-function-parameters-return-values">Function Parameters and Return Values</a></li>
<li><a href="03-03-variable-scope">Variable Scope</a></li>
<li><a href="03-04-anonymous-functions-closures">Anonymous Functions and Closures</a></li>
</ul>
<h2>Module 4: Arrays</h2>
<ul>
<li><a href="04-01-indexed-arrays">Indexed Arrays</a></li>
<li><a href="04-02-associative-arrays">Associative Arrays</a></li>
<li><a href="04-03-multidimensional-arrays">Multidimensional Arrays</a></li>
<li><a href="04-04-array-functions">Array Functions</a></li>
</ul>
<h2>Module 5: Working with Forms</h2>
<ul>
<li><a href="05-01-handling-form-data">Handling Form Data</a></li>
<li><a href="05-02-form-validation">Form Validation</a></li>
<li><a href="05-03-file-uploads">File Uploads</a></li>
<li><a href="05-04-form-security">Form Security</a></li>
</ul>
<h2>Module 6: Working with Files</h2>
<ul>
<li><a href="06-01-reading-writing-files">Reading and Writing Files</a></li>
<li><a href="06-02-file-handling-functions">File Handling Functions</a></li>
<li><a href="06-03-file-permissions">File Permissions</a></li>
<li><a href="06-04-directory-functions">Directory Functions</a></li>
</ul>
<h2>Module 7: Object-Oriented Programming (OOP)</h2>
<ul>
<li><a href="07-01-introduction-oop">Introduction to OOP</a></li>
<li><a href="07-02-classes-objects">Classes and Objects</a></li>
<li><a href="07-03-properties-methods">Properties and Methods</a></li>
<li><a href="07-04-inheritance">Inheritance</a></li>
<li><a href="07-05-interfaces-abstract-classes">Interfaces and Abstract Classes</a></li>
<li><a href="07-06-traits">Traits</a></li>
</ul>
<h2>Module 8: Working with Databases</h2>
<ul>
<li><a href="08-01-introduction-databases">Introduction to Databases</a></li>
<li><a href="08-02-connecting-mysql">Connecting to a MySQL Database</a></li>
<li><a href="08-03-crud-operations">Performing CRUD Operations</a></li>
<li><a href="08-04-using-pdo">Using PDO for Database Interaction</a></li>
<li><a href="08-05-database-security">Database Security</a></li>
</ul>
<h2>Module 9: Advanced PHP Techniques</h2>
<ul>
<li><a href="09-01-error-exception-handling">Error and Exception Handling</a></li>
<li><a href="09-02-sessions-cookies">Sessions and Cookies</a></li>
<li><a href="09-03-regular-expressions">Regular Expressions</a></li>
<li><a href="09-04-json-xml">Working with JSON and XML</a></li>
<li><a href="09-05-web-services">PHP and Web Services</a></li>
</ul>
<h2>Module 10: PHP Frameworks and Best Practices</h2>
<ul>
<li><a href="10-01-introduction-frameworks">Introduction to PHP Frameworks</a></li>
<li><a href="10-02-getting-started-laravel">Getting Started with Laravel</a></li>
<li><a href="10-03-mvc-architecture">MVC Architecture</a></li>
<li><a href="10-04-best-practices">Best Practices in PHP Development</a></li>
<li><a href="10-05-testing-debugging">Testing and Debugging</a></li>
</ul>
<h2>Module 11: Project: Building a Web Application</h2>
<ul>
<li><a href="11-01-project-planning-setup">Project Planning and Setup</a></li>
<li><a href="11-02-creating-ui">Creating the User Interface</a></li>
<li><a href="11-03-implementing-backend">Implementing Backend Logic</a></li>
<li><a href="11-04-integrating-database">Integrating with a Database</a></li>
<li><a href="11-05-testing-deployment">Testing and Deployment</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<p id="loginModalEmail"></p>
            	<div id="mensaje" class="d-none alert alert-danger"></div>
            	<div id="mensaje_info" class="d-none alert alert-success"></div>
            	
            	<div id="modal-body-main">
					<div class="mt-4 d-none" id="forgotPasswordSection">
						<div class="mb-3">
    <label for="recovery-email" class="form-label">Email</label>
    <input type="email" required class="form-control" id="recovery-email" placeholder="Enter your email">
</div>
<button class="btn btn-primary" id="btnRecover">Send recovery link</button>

					</div>
									
					<div class="mt-4 d-none" id="deleteUserSection">	
						<div class="mb-3 alert alert-danger">
	Warning! You are about to delete all registration and progress data.<br><b>This action cannot be undone.</b>
</div>
<div class="mb-3">
    <input type="password" required class="form-control" id="delete-user-pwd" placeholder="Enter your password">
</div>
<button class="btn btn-primary" id="btnDeleteUser">Delete user</button>

					</div>
					
					<div class="mt-4 d-none" id="changePassordSection">
						<div class="mb-3 row">
	<div class="col col-12 my-2">
	    <input type="password" required class="form-control" id="change-pwd-actual" placeholder="Enter current password">
	</div>
	<div class="col col-12 my-2">
    	<input type="password" required class="form-control" id="change-pwd-new-1" placeholder="Enter new password">
	</div>
	<div class="col col-12 my-2">
    	<input type="password" required class="form-control" id="change-pwd-new-2" placeholder="Repeat new password">
	</div>
</div>
<button class="btn btn-primary" id="btnChangePassword">Change password</button>

					</div>
					
					<div class="mt-4 d-none alert alert-warning" id="verifyPasswordSection">
						<p><b>Falta verificar correu</b></p>
						<a id="btnVerifyEmail" href="#">Send verification link</a>

					</div>
					
					<div class="mt-4 d-none" id="disconnectUserSection">
						<div class="mb-3">
    <button id="btnDisconnect" class="btn btn-primary">Disconnect</button>
</div>

<hr>

<div class="mt-3">
    <button class="btn btn-outline-secondary" id="change-password-link">Change password</button>
</div>

<div class="mt-3">
    <a href="#" id="delete-user-link">Delete user</a>
</div>

					</div>
	            
	            	<div class="mt-4 d-none" id="modalTabsSection">
	            		<ul class="nav nav-tabs" id="authTabs" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button" role="tab" aria-controls="login" aria-selected="true">
        	Log in
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register" type="button" role="tab" aria-controls="register" aria-selected="false">
        	Sign up
        </button>
    </li>
</ul>

<div class="tab-content mt-3" id="authTabsContent">
    <div class="tab-pane fade show active" id="login" role="tabpanel" aria-labelledby="login-tab">
    	<div class="mb-3">
    <label for="login-username" class="form-label">Email</label>
    <input type="email" required class="form-control" id="login-username" placeholder="Enter your email">
</div>
<div class="mb-3">
    <label for="login-password" class="form-label">Password</label>
    <input type="password"  required class="form-control" id="login-password" placeholder="Enter your password">
</div>
<button class="btn btn-primary" id="btnLogin">Log in</button>
<div class="mt-3">
    <a href="#" id="forgot-password-link">Have you forgotten your password?</a>
</div>
    </div>

    <div class="tab-pane fade" id="register" role="tabpanel" aria-labelledby="register-tab">
    	<div class="mb-3">
    <label for="register-email" class="form-label">Email</label>
    <input type="email" class="form-control" id="register-email" required placeholder="Enter your email">
</div>

<div class="mb-3">
    <label for="register-password" class="form-label">Password</label>
    <input type="password" class="form-control"  required id="register-password" placeholder="Enter your password">
</div>

<div class="mb-3">
    <label for="register-name" class="form-label">Name</label>
    <input type="text" class="form-control"  required id="register-name" placeholder="Enter your name">
</div>

<div class="form-check mb-3">
    <input type="checkbox" class="form-check-input" id="accept-conditions-reg">
    <label for="accept-conditions-reg" class="form-check-label">
        I have read and accept the <a href="/privacity" target="blank">Privacy Policy</a> and the <a href="/licence" target="blank">Terms and Conditions of Use</a>.
    </label>
</div>

<div class="form-check mb-3">
    <input type="checkbox" class="form-check-input" id="accept-allow_comunications">
    <label for="accept-allow_comunications" class="form-check-label">
        I wish to receive news and updates about courses (optional).
    </label>
</div>

<button id="btnRegister" class="btn btn-primary">Sign up</button>
    </div>
</div>
	            	</div>
            	</div>
            </div>
        </div>
    </div>
</div>

	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
