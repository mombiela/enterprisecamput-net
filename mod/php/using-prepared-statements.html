<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using Prepared Statements</title>

    <link rel="alternate" href="https://campusempresa.com/mod/php/using-prepared-statements" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/php/using-prepared-statements" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/php/using-prepared-statements" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/php/using-prepared-statements" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/php/using-prepared-statements" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='performing-crud-operations'>&#x25C4;Performing CRUD Operations</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using Prepared Statements</a>
	</div>
	<div class='col-4 text-end'>
					<a href='object-oriented-programming'>Object-Oriented Programming (OOP) &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Prepared statements are a powerful feature in PHP that help prevent SQL injection attacks and improve the efficiency of database operations. This topic will guide you through the basics of using prepared statements in PHP, from beginner to advanced levels.</p>
</div><h1>What are Prepared Statements?</h1>
<div class='content'><p>Prepared statements are a way to execute SQL queries in a secure and efficient manner. They consist of two main stages:</p>
<ol>
<li><strong>Preparation</strong>: The SQL query template is sent to the database with placeholders for parameters.</li>
<li><strong>Execution</strong>: The actual values are sent to the database, replacing the placeholders.</li>
</ol>
</div><h2>Key Benefits</h2>
<div class='content'><ul>
<li><strong>Security</strong>: Prevents SQL injection attacks by separating SQL logic from data.</li>
<li><strong>Efficiency</strong>: The database can optimize the query execution plan.</li>
</ul>
</div><h1>Basic Usage of Prepared Statements</h1>
<div class='content'></div><h2>Connecting to the Database</h2>
<div class='content'><p>Before using prepared statements, you need to establish a connection to the database. Here’s a simple example using PDO (PHP Data Objects):</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJGRzbiA9ICdteXNxbDpob3N0PWxvY2FsaG9zdDtkYm5hbWU9dGVzdGRiJzsKJHVzZXJuYW1lID0gJ3Jvb3QnOwokcGFzc3dvcmQgPSAnJzsKCnRyeSB7CiAgICAkcGRvID0gbmV3IFBETygkZHNuLCAkdXNlcm5hbWUsICRwYXNzd29yZCk7CiAgICAkcGRvLT5zZXRBdHRyaWJ1dGUoUERPOjpBVFRSX0VSUk1PREUsIFBETzo6RVJSTU9ERV9FWENFUFRJT04pOwogICAgZWNobyAiQ29ubmVjdGVkIHN1Y2Nlc3NmdWxseSI7Cn0gY2F0Y2ggKFBET0V4Y2VwdGlvbiAkZSkgewogICAgZWNobyAiQ29ubmVjdGlvbiBmYWlsZWQ6ICIgLiAkZS0+Z2V0TWVzc2FnZSgpOwp9Cj8+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$dsn = 'mysql:host=localhost;dbname=testdb';
$username = 'root';
$password = '';

try {
    $pdo = new PDO($dsn, $username, $password);
    $pdo-&gt;setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    echo &quot;Connected successfully&quot;;
} catch (PDOException $e) {
    echo &quot;Connection failed: &quot; . $e-&gt;getMessage();
}
?&gt;</pre></div><div class='content'></div><h2>Preparing and Executing a Statement</h2>
<div class='content'><p>Here’s how you can prepare and execute a simple SQL query using placeholders:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJHNxbCA9ICJTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIGVtYWlsID0gOmVtYWlsIjsKJHN0bXQgPSAkcGRvLT5wcmVwYXJlKCRzcWwpOwokZW1haWwgPSAnZXhhbXBsZUBleGFtcGxlLmNvbSc7CiRzdG10LT5iaW5kUGFyYW0oJzplbWFpbCcsICRlbWFpbCk7CiRzdG10LT5leGVjdXRlKCk7CiRyZXN1bHQgPSAkc3RtdC0+ZmV0Y2hBbGwoUERPOjpGRVRDSF9BU1NPQyk7Cgpmb3JlYWNoICgkcmVzdWx0IGFzICRyb3cpIHsKICAgIGVjaG8gJHJvd1snbmFtZSddIC4gIjxicj4iOwp9Cj8+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$sql = &quot;SELECT * FROM users WHERE email = :email&quot;;
$stmt = $pdo-&gt;prepare($sql);
$email = 'example@example.com';
$stmt-&gt;bindParam(':email', $email);
$stmt-&gt;execute();
$result = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);

foreach ($result as $row) {
    echo $row['name'] . &quot;&lt;br&gt;&quot;;
}
?&gt;</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Preparation</strong>: The SQL query with a placeholder (<code>:email</code>) is prepared.</li>
<li><strong>Binding</strong>: The actual value is bound to the placeholder.</li>
<li><strong>Execution</strong>: The query is executed with the bound value.</li>
</ul>
</div><h1>Advanced Usage of Prepared Statements</h1>
<div class='content'></div><h2>Using Multiple Placeholders</h2>
<div class='content'><p>You can use multiple placeholders in a single query:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJHNxbCA9ICJTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIGVtYWlsID0gOmVtYWlsIEFORCBzdGF0dXMgPSA6c3RhdHVzIjsKJHN0bXQgPSAkcGRvLT5wcmVwYXJlKCRzcWwpOwokZW1haWwgPSAnZXhhbXBsZUBleGFtcGxlLmNvbSc7CiRzdGF0dXMgPSAnYWN0aXZlJzsKJHN0bXQtPmJpbmRQYXJhbSgnOmVtYWlsJywgJGVtYWlsKTsKJHN0bXQtPmJpbmRQYXJhbSgnOnN0YXR1cycsICRzdGF0dXMpOwokc3RtdC0+ZXhlY3V0ZSgpOwokcmVzdWx0ID0gJHN0bXQtPmZldGNoQWxsKFBETzo6RkVUQ0hfQVNTT0MpOwoKZm9yZWFjaCAoJHJlc3VsdCBhcyAkcm93KSB7CiAgICBlY2hvICRyb3dbJ25hbWUnXSAuICI8YnI+IjsKfQo/Pg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$sql = &quot;SELECT * FROM users WHERE email = :email AND status = :status&quot;;
$stmt = $pdo-&gt;prepare($sql);
$email = 'example@example.com';
$status = 'active';
$stmt-&gt;bindParam(':email', $email);
$stmt-&gt;bindParam(':status', $status);
$stmt-&gt;execute();
$result = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);

foreach ($result as $row) {
    echo $row['name'] . &quot;&lt;br&gt;&quot;;
}
?&gt;</pre></div><div class='content'></div><h2>Using Named vs. Positional Placeholders</h2>
<div class='content'><ul>
<li><strong>Named Placeholders</strong>: Use named placeholders like <code>:email</code>.</li>
<li><strong>Positional Placeholders</strong>: Use question marks (<code>?</code>) as placeholders.</li>
</ul>
<p>Example with positional placeholders:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKJHNxbCA9ICJTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFIGVtYWlsID0gPyBBTkQgc3RhdHVzID0gPyI7CiRzdG10ID0gJHBkby0+cHJlcGFyZSgkc3FsKTsKJGVtYWlsID0gJ2V4YW1wbGVAZXhhbXBsZS5jb20nOwokc3RhdHVzID0gJ2FjdGl2ZSc7CiRzdG10LT5leGVjdXRlKFskZW1haWwsICRzdGF0dXNdKTsKJHJlc3VsdCA9ICRzdG10LT5mZXRjaEFsbChQRE86OkZFVENIX0FTU09DKTsKCmZvcmVhY2ggKCRyZXN1bHQgYXMgJHJvdykgewogICAgZWNobyAkcm93WyduYW1lJ10gLiAiPGJyPiI7Cn0KPz4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
$sql = &quot;SELECT * FROM users WHERE email = ? AND status = ?&quot;;
$stmt = $pdo-&gt;prepare($sql);
$email = 'example@example.com';
$status = 'active';
$stmt-&gt;execute([$email, $status]);
$result = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);

foreach ($result as $row) {
    echo $row['name'] . &quot;&lt;br&gt;&quot;;
}
?&gt;</pre></div><div class='content'></div><h2>Error Handling</h2>
<div class='content'><p>Always handle potential errors when working with databases:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PD9waHAKdHJ5IHsKICAgICRzcWwgPSAiU0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSBlbWFpbCA9IDplbWFpbCI7CiAgICAkc3RtdCA9ICRwZG8tPnByZXBhcmUoJHNxbCk7CiAgICAkZW1haWwgPSAnZXhhbXBsZUBleGFtcGxlLmNvbSc7CiAgICAkc3RtdC0+YmluZFBhcmFtKCc6ZW1haWwnLCAkZW1haWwpOwogICAgJHN0bXQtPmV4ZWN1dGUoKTsKICAgICRyZXN1bHQgPSAkc3RtdC0+ZmV0Y2hBbGwoUERPOjpGRVRDSF9BU1NPQyk7CgogICAgZm9yZWFjaCAoJHJlc3VsdCBhcyAkcm93KSB7CiAgICAgICAgZWNobyAkcm93WyduYW1lJ10gLiAiPGJyPiI7CiAgICB9Cn0gY2F0Y2ggKFBET0V4Y2VwdGlvbiAkZSkgewogICAgZWNobyAiRXJyb3I6ICIgLiAkZS0+Z2V0TWVzc2FnZSgpOwp9Cj8+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;?php
try {
    $sql = &quot;SELECT * FROM users WHERE email = :email&quot;;
    $stmt = $pdo-&gt;prepare($sql);
    $email = 'example@example.com';
    $stmt-&gt;bindParam(':email', $email);
    $stmt-&gt;execute();
    $result = $stmt-&gt;fetchAll(PDO::FETCH_ASSOC);

    foreach ($result as $row) {
        echo $row['name'] . &quot;&lt;br&gt;&quot;;
    }
} catch (PDOException $e) {
    echo &quot;Error: &quot; . $e-&gt;getMessage();
}
?&gt;</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>Prepared statements in PHP offer a secure and efficient way to execute SQL queries. By separating the SQL logic from the data, they help prevent SQL injection attacks and allow the database to optimize query execution. Whether you are using named or positional placeholders, the key steps involve preparing the statement, binding the parameters, and executing the query. Always remember to handle potential errors to ensure your application runs smoothly.</p>
<p>By mastering prepared statements, you can significantly improve the security and performance of your PHP applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='performing-crud-operations'>&#x25C4;Performing CRUD Operations</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using Prepared Statements</a>
	</div>
	<div class='col-4 text-end'>
					<a href='object-oriented-programming'>Object-Oriented Programming (OOP) &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
