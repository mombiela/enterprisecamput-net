<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Optimization Techniques</title>

    <link rel="alternate" href="https://campusempresa.com/mod/cplusplus/08-01-code-optimization-techniques" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/cplusplus/08-01-code-optimization-techniques" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/cplusplus/08-01-code-optimization-techniques" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 px-0 py-2 py-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 px-0 py-2 py-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/cplusplus/08-01-code-optimization-techniques" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/cplusplus/08-01-code-optimization-techniques" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='07-06-multithreading' title="Multithreading">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Code Optimization Techniques</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='08-02-memory-management' title="Memory Management">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In this section, we will explore various techniques to optimize your C++ code for better performance and efficiency. Code optimization is crucial for developing high-performance applications, especially in resource-constrained environments. We will cover both general principles and specific techniques that can be applied to your C++ programs.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li>
<p><strong>Understanding Performance Bottlenecks</strong></p>
<ul>
<li>Identifying areas in your code that consume the most resources.</li>
<li>Using profiling tools to measure performance.</li>
</ul>
</li>
<li>
<p><strong>Algorithm Optimization</strong></p>
<ul>
<li>Choosing the right algorithm for the task.</li>
<li>Understanding time complexity (Big O notation).</li>
</ul>
</li>
<li>
<p><strong>Memory Management</strong></p>
<ul>
<li>Efficient use of memory.</li>
<li>Avoiding memory leaks and fragmentation.</li>
</ul>
</li>
<li>
<p><strong>Compiler Optimizations</strong></p>
<ul>
<li>Leveraging compiler flags and settings.</li>
<li>Understanding different optimization levels.</li>
</ul>
</li>
<li>
<p><strong>Code Refactoring</strong></p>
<ul>
<li>Simplifying and cleaning up code.</li>
<li>Removing redundant operations.</li>
</ul>
</li>
</ol>
</div><h1>Practical Examples</h1>
<div class='content'></div><h2>1. Understanding Performance Bottlenecks</h2>
<div class='content'><p><strong>Example: Profiling a Simple Program</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8Y2hyb25vPgoKdm9pZCBpbmVmZmljaWVudEZ1bmN0aW9uKCkgewogICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxMDAwMDAwOyArK2kpIHsKICAgICAgICAvLyBJbmVmZmljaWVudCBvcGVyYXRpb24KICAgICAgICBpbnQgeCA9IGkgKiBpOwogICAgfQp9CgppbnQgbWFpbigpIHsKICAgIGF1dG8gc3RhcnQgPSBzdGQ6OmNocm9ubzo6aGlnaF9yZXNvbHV0aW9uX2Nsb2NrOjpub3coKTsKICAgIGluZWZmaWNpZW50RnVuY3Rpb24oKTsKICAgIGF1dG8gZW5kID0gc3RkOjpjaHJvbm86OmhpZ2hfcmVzb2x1dGlvbl9jbG9jazo6bm93KCk7CiAgICBzdGQ6OmNocm9ubzo6ZHVyYXRpb248ZG91YmxlPiBkdXJhdGlvbiA9IGVuZCAtIHN0YXJ0OwogICAgc3RkOjpjb3V0IDw8ICJUaW1lIHRha2VuOiAiIDw8IGR1cmF0aW9uLmNvdW50KCkgPDwgIiBzZWNvbmRzIiA8PCBzdGQ6OmVuZGw7CiAgICByZXR1cm4gMDsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;
#include &lt;chrono&gt;

void inefficientFunction() {
    for (int i = 0; i &lt; 1000000; ++i) {
        // Inefficient operation
        int x = i * i;
    }
}

int main() {
    auto start = std::chrono::high_resolution_clock::now();
    inefficientFunction();
    auto end = std::chrono::high_resolution_clock::now();
    std::chrono::duration&lt;double&gt; duration = end - start;
    std::cout &lt;&lt; &quot;Time taken: &quot; &lt;&lt; duration.count() &lt;&lt; &quot; seconds&quot; &lt;&lt; std::endl;
    return 0;
}</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li>This code measures the time taken by <code>inefficientFunction</code> using the <code>&lt;chrono&gt;</code> library.</li>
<li>By identifying the time-consuming parts, you can focus on optimizing them.</li>
</ul>
</div><h2>2. Algorithm Optimization</h2>
<div class='content'><p><strong>Example: Optimizing a Sorting Algorithm</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8dmVjdG9yPgojaW5jbHVkZSA8YWxnb3JpdGhtPgoKdm9pZCBidWJibGVTb3J0KHN0ZDo6dmVjdG9yPGludD4mIGFycikgewogICAgZm9yIChzaXplX3QgaSA9IDA7IGkgPCBhcnIuc2l6ZSgpIC0gMTsgKytpKSB7CiAgICAgICAgZm9yIChzaXplX3QgaiA9IDA7IGogPCBhcnIuc2l6ZSgpIC0gaSAtIDE7ICsraikgewogICAgICAgICAgICBpZiAoYXJyW2pdID4gYXJyW2ogKyAxXSkgewogICAgICAgICAgICAgICAgc3RkOjpzd2FwKGFycltqXSwgYXJyW2ogKyAxXSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KCnZvaWQgb3B0aW1pemVkU29ydChzdGQ6OnZlY3RvcjxpbnQ+JiBhcnIpIHsKICAgIHN0ZDo6c29ydChhcnIuYmVnaW4oKSwgYXJyLmVuZCgpKTsKfQoKaW50IG1haW4oKSB7CiAgICBzdGQ6OnZlY3RvcjxpbnQ+IGRhdGEgPSB7NSwgMywgOCwgNCwgMn07CiAgICAKICAgIC8vIFVzaW5nIGJ1YmJsZSBzb3J0CiAgICBidWJibGVTb3J0KGRhdGEpOwogICAgZm9yIChpbnQgbnVtIDogZGF0YSkgewogICAgICAgIHN0ZDo6Y291dCA8PCBudW0gPDwgIiAiOwogICAgfQogICAgc3RkOjpjb3V0IDw8IHN0ZDo6ZW5kbDsKCiAgICAvLyBVc2luZyBvcHRpbWl6ZWQgc29ydAogICAgb3B0aW1pemVkU29ydChkYXRhKTsKICAgIGZvciAoaW50IG51bSA6IGRhdGEpIHsKICAgICAgICBzdGQ6OmNvdXQgPDwgbnVtIDw8ICIgIjsKICAgIH0KICAgIHN0ZDo6Y291dCA8PCBzdGQ6OmVuZGw7CgogICAgcmV0dXJuIDA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;algorithm&gt;

void bubbleSort(std::vector&lt;int&gt;&amp; arr) {
    for (size_t i = 0; i &lt; arr.size() - 1; ++i) {
        for (size_t j = 0; j &lt; arr.size() - i - 1; ++j) {
            if (arr[j] &gt; arr[j + 1]) {
                std::swap(arr[j], arr[j + 1]);
            }
        }
    }
}

void optimizedSort(std::vector&lt;int&gt;&amp; arr) {
    std::sort(arr.begin(), arr.end());
}

int main() {
    std::vector&lt;int&gt; data = {5, 3, 8, 4, 2};
    
    // Using bubble sort
    bubbleSort(data);
    for (int num : data) {
        std::cout &lt;&lt; num &lt;&lt; &quot; &quot;;
    }
    std::cout &lt;&lt; std::endl;

    // Using optimized sort
    optimizedSort(data);
    for (int num : data) {
        std::cout &lt;&lt; num &lt;&lt; &quot; &quot;;
    }
    std::cout &lt;&lt; std::endl;

    return 0;
}</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li><code>bubbleSort</code> is a simple but inefficient sorting algorithm.</li>
<li><code>optimizedSort</code> uses the C++ Standard Library's <code>std::sort</code>, which is much more efficient.</li>
</ul>
</div><h2>3. Memory Management</h2>
<div class='content'><p><strong>Example: Avoiding Memory Leaks</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgoKdm9pZCBjcmVhdGVBcnJheSgpIHsKICAgIGludCogYXJyID0gbmV3IGludFsxMDBdOwogICAgLy8gRG8gc29tZXRoaW5nIHdpdGggYXJyCiAgICBkZWxldGVbXSBhcnI7IC8vIFByb3Blcmx5IGRlYWxsb2NhdGUgbWVtb3J5Cn0KCmludCBtYWluKCkgewogICAgY3JlYXRlQXJyYXkoKTsKICAgIHJldHVybiAwOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;

void createArray() {
    int* arr = new int[100];
    // Do something with arr
    delete[] arr; // Properly deallocate memory
}

int main() {
    createArray();
    return 0;
}</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li>Always deallocate memory that you allocate with <code>new</code> to avoid memory leaks.</li>
<li>Using smart pointers (e.g., <code>std::unique_ptr</code>, <code>std::shared_ptr</code>) can help manage memory automatically.</li>
</ul>
</div><h2>4. Compiler Optimizations</h2>
<div class='content'><p><strong>Example: Using Compiler Flags</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("IyBDb21waWxlIHdpdGggb3B0aW1pemF0aW9uIGxldmVsIDIKZysrIC1PMiAtbyBvcHRpbWl6ZWRfcHJvZ3JhbSBwcm9ncmFtLmNwcA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'># Compile with optimization level 2
g++ -O2 -o optimized_program program.cpp</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li>The <code>-O2</code> flag enables a set of optimizations that improve performance without significantly increasing compilation time.</li>
<li>Higher levels like <code>-O3</code> can be used for even more aggressive optimizations.</li>
</ul>
</div><h2>5. Code Refactoring</h2>
<div class='content'><p><strong>Example: Removing Redundant Operations</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgoKdm9pZCByZWR1bmRhbnRPcGVyYXRpb25zKCkgewogICAgaW50IHggPSAwOwogICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxMDAwOyArK2kpIHsKICAgICAgICB4ID0geCArIDE7CiAgICB9CiAgICBzdGQ6OmNvdXQgPDwgeCA8PCBzdGQ6OmVuZGw7Cn0KCnZvaWQgb3B0aW1pemVkT3BlcmF0aW9ucygpIHsKICAgIGludCB4ID0gMTAwMDsgLy8gRGlyZWN0bHkgYXNzaWduIHRoZSBmaW5hbCB2YWx1ZQogICAgc3RkOjpjb3V0IDw8IHggPDwgc3RkOjplbmRsOwp9CgppbnQgbWFpbigpIHsKICAgIHJlZHVuZGFudE9wZXJhdGlvbnMoKTsKICAgIG9wdGltaXplZE9wZXJhdGlvbnMoKTsKICAgIHJldHVybiAwOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;

void redundantOperations() {
    int x = 0;
    for (int i = 0; i &lt; 1000; ++i) {
        x = x + 1;
    }
    std::cout &lt;&lt; x &lt;&lt; std::endl;
}

void optimizedOperations() {
    int x = 1000; // Directly assign the final value
    std::cout &lt;&lt; x &lt;&lt; std::endl;
}

int main() {
    redundantOperations();
    optimizedOperations();
    return 0;
}</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li>The <code>redundantOperations</code> function performs unnecessary additions in a loop.</li>
<li>The <code>optimizedOperations</code> function achieves the same result with a single assignment.</li>
</ul>
</div><h1>Practical Exercises</h1>
<div class='content'></div><h2>Exercise 1: Optimize a Function</h2>
<div class='content'><p><strong>Task:</strong>
Optimize the following function to reduce its execution time.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8dmVjdG9yPgoKdm9pZCBzbG93RnVuY3Rpb24oY29uc3Qgc3RkOjp2ZWN0b3I8aW50PiYgZGF0YSkgewogICAgaW50IHN1bSA9IDA7CiAgICBmb3IgKHNpemVfdCBpID0gMDsgaSA8IGRhdGEuc2l6ZSgpOyArK2kpIHsKICAgICAgICBmb3IgKHNpemVfdCBqID0gMDsgaiA8IGRhdGEuc2l6ZSgpOyArK2opIHsKICAgICAgICAgICAgc3VtICs9IGRhdGFbal07CiAgICAgICAgfQogICAgfQogICAgc3RkOjpjb3V0IDw8ICJTdW06ICIgPDwgc3VtIDw8IHN0ZDo6ZW5kbDsKfQoKaW50IG1haW4oKSB7CiAgICBzdGQ6OnZlY3RvcjxpbnQ+IGRhdGEoMTAwMCwgMSk7CiAgICBzbG93RnVuY3Rpb24oZGF0YSk7CiAgICByZXR1cm4gMDsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;
#include &lt;vector&gt;

void slowFunction(const std::vector&lt;int&gt;&amp; data) {
    int sum = 0;
    for (size_t i = 0; i &lt; data.size(); ++i) {
        for (size_t j = 0; j &lt; data.size(); ++j) {
            sum += data[j];
        }
    }
    std::cout &lt;&lt; &quot;Sum: &quot; &lt;&lt; sum &lt;&lt; std::endl;
}

int main() {
    std::vector&lt;int&gt; data(1000, 1);
    slowFunction(data);
    return 0;
}</pre></div><div class='content'><p><strong>Solution:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8dmVjdG9yPgoKdm9pZCBvcHRpbWl6ZWRGdW5jdGlvbihjb25zdCBzdGQ6OnZlY3RvcjxpbnQ+JiBkYXRhKSB7CiAgICBpbnQgc3VtID0gMDsKICAgIGZvciAoaW50IG51bSA6IGRhdGEpIHsKICAgICAgICBzdW0gKz0gbnVtOwogICAgfQogICAgc3VtICo9IGRhdGEuc2l6ZSgpOyAvLyBNdWx0aXBseSB0aGUgc3VtIGJ5IHRoZSBzaXplIG9mIHRoZSB2ZWN0b3IKICAgIHN0ZDo6Y291dCA8PCAiU3VtOiAiIDw8IHN1bSA8PCBzdGQ6OmVuZGw7Cn0KCmludCBtYWluKCkgewogICAgc3RkOjp2ZWN0b3I8aW50PiBkYXRhKDEwMDAsIDEpOwogICAgb3B0aW1pemVkRnVuY3Rpb24oZGF0YSk7CiAgICByZXR1cm4gMDsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;
#include &lt;vector&gt;

void optimizedFunction(const std::vector&lt;int&gt;&amp; data) {
    int sum = 0;
    for (int num : data) {
        sum += num;
    }
    sum *= data.size(); // Multiply the sum by the size of the vector
    std::cout &lt;&lt; &quot;Sum: &quot; &lt;&lt; sum &lt;&lt; std::endl;
}

int main() {
    std::vector&lt;int&gt; data(1000, 1);
    optimizedFunction(data);
    return 0;
}</pre></div><div class='content'><p><strong>Explanation:</strong></p>
<ul>
<li>The original <code>slowFunction</code> has a nested loop, resulting in O(n^2) complexity.</li>
<li>The <code>optimizedFunction</code> reduces the complexity to O(n) by summing the elements once and then multiplying by the size of the vector.</li>
</ul>
</div><h1>Summary</h1>
<div class='content'><p>In this section, we covered various code optimization techniques, including identifying performance bottlenecks, choosing efficient algorithms, managing memory effectively, leveraging compiler optimizations, and refactoring code. By applying these techniques, you can significantly improve the performance and efficiency of your C++ programs. In the next section, we will delve into memory management, which is crucial for writing robust and efficient C++ applications.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='07-06-multithreading' title="Multithreading">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='08-02-memory-management' title="Memory Management">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
