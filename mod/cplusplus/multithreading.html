<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multithreading in C++</title>

    <link rel="alternate" href="https://campusempresa.com/mod/cplusplus/multithreading" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/cplusplus/multithreading" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/cplusplus/multithreading" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/cplusplus/multithreading" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/cplusplus/multithreading" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='function-objects'>&#x25C4;Function Objects</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Multithreading in C++</a>
	</div>
	<div class='col-4 text-end'>
					<a href='smart-pointers'>Smart Pointers &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Multithreading is a powerful feature in C++ that allows a program to perform multiple tasks concurrently. This topic will guide you from the basics of multithreading to advanced concepts, providing clear explanations, examples, and exercises.</p>
</div><h1>Introduction to Multithreading</h1>
<div class='content'><p>Multithreading involves running multiple threads simultaneously within a single program. Each thread runs independently, allowing for parallel execution of tasks.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Thread</strong>: The smallest unit of a process that can be scheduled for execution.</li>
<li><strong>Concurrency</strong>: The ability to run multiple threads in overlapping periods.</li>
<li><strong>Parallelism</strong>: The simultaneous execution of multiple threads.</li>
</ul>
</div><h1>Creating Threads</h1>
<div class='content'><p>In C++, the <code>&lt;thread&gt;</code> library provides the necessary tools to create and manage threads.</p>
</div><h2>Basic Thread Creation</h2>
<div class='content'><p>To create a thread, you can use the <code>std::thread</code> class.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8dGhyZWFkPgoKdm9pZCBwcmludE1lc3NhZ2UoKSB7CiAgICBzdGQ6OmNvdXQgPDwgIkhlbGxvIGZyb20gdGhyZWFkISIgPDwgc3RkOjplbmRsOwp9CgppbnQgbWFpbigpIHsKICAgIHN0ZDo6dGhyZWFkIHQocHJpbnRNZXNzYWdlKTsgLy8gQ3JlYXRlIGEgbmV3IHRocmVhZCB0aGF0IHJ1bnMgcHJpbnRNZXNzYWdlCiAgICB0LmpvaW4oKTsgLy8gV2FpdCBmb3IgdGhlIHRocmVhZCB0byBmaW5pc2gKICAgIHJldHVybiAwOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;
#include &lt;thread&gt;

void printMessage() {
    std::cout &lt;&lt; &quot;Hello from thread!&quot; &lt;&lt; std::endl;
}

int main() {
    std::thread t(printMessage); // Create a new thread that runs printMessage
    t.join(); // Wait for the thread to finish
    return 0;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>std::thread t(printMessage)</strong>: Creates a new thread that executes the <code>printMessage</code> function.</li>
<li><strong>t.join()</strong>: Waits for the thread <code>t</code> to finish execution before continuing.</li>
</ul>
</div><h1>Passing Arguments to Threads</h1>
<div class='content'><p>You can pass arguments to the thread function using the <code>std::thread</code> constructor.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8dGhyZWFkPgoKdm9pZCBwcmludE51bWJlcihpbnQgbikgewogICAgc3RkOjpjb3V0IDw8ICJOdW1iZXI6ICIgPDwgbiA8PCBzdGQ6OmVuZGw7Cn0KCmludCBtYWluKCkgewogICAgc3RkOjp0aHJlYWQgdChwcmludE51bWJlciwgNDIpOyAvLyBQYXNzIDQyIGFzIGFuIGFyZ3VtZW50IHRvIHByaW50TnVtYmVyCiAgICB0LmpvaW4oKTsKICAgIHJldHVybiAwOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;
#include &lt;thread&gt;

void printNumber(int n) {
    std::cout &lt;&lt; &quot;Number: &quot; &lt;&lt; n &lt;&lt; std::endl;
}

int main() {
    std::thread t(printNumber, 42); // Pass 42 as an argument to printNumber
    t.join();
    return 0;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>std::thread t(printNumber, 42)</strong>: Creates a new thread that runs <code>printNumber</code> with <code>42</code> as an argument.</li>
</ul>
</div><h1>Managing Threads</h1>
<div class='content'></div><h2>Detaching Threads</h2>
<div class='content'><p>A detached thread runs independently from the main thread.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8dGhyZWFkPgoKdm9pZCBwcmludE1lc3NhZ2UoKSB7CiAgICBzdGQ6OmNvdXQgPDwgIkhlbGxvIGZyb20gZGV0YWNoZWQgdGhyZWFkISIgPDwgc3RkOjplbmRsOwp9CgppbnQgbWFpbigpIHsKICAgIHN0ZDo6dGhyZWFkIHQocHJpbnRNZXNzYWdlKTsKICAgIHQuZGV0YWNoKCk7IC8vIERldGFjaCB0aGUgdGhyZWFkCiAgICBzdGQ6OnRoaXNfdGhyZWFkOjpzbGVlcF9mb3Ioc3RkOjpjaHJvbm86OnNlY29uZHMoMSkpOyAvLyBFbnN1cmUgbWFpbiB0aHJlYWQgd2FpdHMKICAgIHJldHVybiAwOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;
#include &lt;thread&gt;

void printMessage() {
    std::cout &lt;&lt; &quot;Hello from detached thread!&quot; &lt;&lt; std::endl;
}

int main() {
    std::thread t(printMessage);
    t.detach(); // Detach the thread
    std::this_thread::sleep_for(std::chrono::seconds(1)); // Ensure main thread waits
    return 0;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>t.detach()</strong>: The thread <code>t</code> runs independently from the main thread.</li>
<li><strong>std::this_thread::sleep_for</strong>: Ensures the main thread waits long enough for the detached thread to execute.</li>
</ul>
</div><h1>Synchronization</h1>
<div class='content'><p>When multiple threads access shared resources, synchronization is necessary to avoid conflicts.</p>
</div><h2>Mutex</h2>
<div class='content'><p>A <code>std::mutex</code> is used to protect shared data.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8dGhyZWFkPgojaW5jbHVkZSA8bXV0ZXg+CgpzdGQ6Om11dGV4IG10eDsKCnZvaWQgcHJpbnRNZXNzYWdlKGNvbnN0IHN0ZDo6c3RyaW5nJiBtc2cpIHsKICAgIHN0ZDo6bG9ja19ndWFyZDxzdGQ6Om11dGV4PiBsb2NrKG10eCk7CiAgICBzdGQ6OmNvdXQgPDwgbXNnIDw8IHN0ZDo6ZW5kbDsKfQoKaW50IG1haW4oKSB7CiAgICBzdGQ6OnRocmVhZCB0MShwcmludE1lc3NhZ2UsICJIZWxsbyBmcm9tIHRocmVhZCAxIik7CiAgICBzdGQ6OnRocmVhZCB0MihwcmludE1lc3NhZ2UsICJIZWxsbyBmcm9tIHRocmVhZCAyIik7CiAgICB0MS5qb2luKCk7CiAgICB0Mi5qb2luKCk7CiAgICByZXR1cm4gMDsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;
#include &lt;thread&gt;
#include &lt;mutex&gt;

std::mutex mtx;

void printMessage(const std::string&amp; msg) {
    std::lock_guard&lt;std::mutex&gt; lock(mtx);
    std::cout &lt;&lt; msg &lt;&lt; std::endl;
}

int main() {
    std::thread t1(printMessage, &quot;Hello from thread 1&quot;);
    std::thread t2(printMessage, &quot;Hello from thread 2&quot;);
    t1.join();
    t2.join();
    return 0;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>std::mutex mtx</strong>: Declares a mutex.</li>
<li><strong>std::lock_guard<a href="std::mutex">std::mutex</a> lock(mtx)</strong>: Locks the mutex for the duration of the <code>printMessage</code> function.</li>
</ul>
</div><h1>Advanced Topics</h1>
<div class='content'></div><h2>Condition Variables</h2>
<div class='content'><p>Condition variables allow threads to wait for certain conditions to be met.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8dGhyZWFkPgojaW5jbHVkZSA8bXV0ZXg+CiNpbmNsdWRlIDxjb25kaXRpb25fdmFyaWFibGU+CgpzdGQ6Om11dGV4IG10eDsKc3RkOjpjb25kaXRpb25fdmFyaWFibGUgY3Y7CmJvb2wgcmVhZHkgPSBmYWxzZTsKCnZvaWQgcHJpbnRNZXNzYWdlKCkgewogICAgc3RkOjp1bmlxdWVfbG9jazxzdGQ6Om11dGV4PiBsb2NrKG10eCk7CiAgICBjdi53YWl0KGxvY2ssIFtdeyByZXR1cm4gcmVhZHk7IH0pOwogICAgc3RkOjpjb3V0IDw8ICJUaHJlYWQgaXMgcnVubmluZyEiIDw8IHN0ZDo6ZW5kbDsKfQoKaW50IG1haW4oKSB7CiAgICBzdGQ6OnRocmVhZCB0KHByaW50TWVzc2FnZSk7CiAgICB7CiAgICAgICAgc3RkOjpsb2NrX2d1YXJkPHN0ZDo6bXV0ZXg+IGxvY2sobXR4KTsKICAgICAgICByZWFkeSA9IHRydWU7CiAgICB9CiAgICBjdi5ub3RpZnlfb25lKCk7CiAgICB0LmpvaW4oKTsKICAgIHJldHVybiAwOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;
#include &lt;thread&gt;
#include &lt;mutex&gt;
#include &lt;condition_variable&gt;

std::mutex mtx;
std::condition_variable cv;
bool ready = false;

void printMessage() {
    std::unique_lock&lt;std::mutex&gt; lock(mtx);
    cv.wait(lock, []{ return ready; });
    std::cout &lt;&lt; &quot;Thread is running!&quot; &lt;&lt; std::endl;
}

int main() {
    std::thread t(printMessage);
    {
        std::lock_guard&lt;std::mutex&gt; lock(mtx);
        ready = true;
    }
    cv.notify_one();
    t.join();
    return 0;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>std::condition_variable cv</strong>: Declares a condition variable.</li>
<li><strong>cv.wait(lock, []{ return ready; })</strong>: Waits until <code>ready</code> is <code>true</code>.</li>
<li><strong>cv.notify_one()</strong>: Notifies one waiting thread.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Multithreading in C++ allows for concurrent execution of tasks, improving performance and responsiveness. By understanding thread creation, management, and synchronization, you can effectively utilize multithreading in your applications. Practice with the provided examples and exercises to deepen your understanding.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='function-objects'>&#x25C4;Function Objects</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Multithreading in C++</a>
	</div>
	<div class='col-4 text-end'>
					<a href='smart-pointers'>Smart Pointers &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
