<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Move Semantics in C++</title>

    <link rel="alternate" href="https://campusempresa.com/mod/cplusplus/move-semantics" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/cplusplus/move-semantics" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/cplusplus/move-semantics" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/cplusplus/move-semantics" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/cplusplus/move-semantics" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='lambda-expressions'>&#x25C4;Lambda Expressions</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Move Semantics in C++</a>
	</div>
	<div class='col-4 text-end'>
					<a href='regular-expressions'>Regular Expressions &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Move semantics is a powerful feature introduced in C++11 that allows the resources of temporary objects to be moved rather than copied. This can significantly improve performance by eliminating unnecessary deep copies. In this section, we will explore the concept of move semantics, its benefits, and how to implement it in your C++ programs.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li>
<p><strong>Lvalue and Rvalue</strong>:</p>
<ul>
<li><strong>Lvalue</strong>: An object that occupies some identifiable location in memory (e.g., variables).</li>
<li><strong>Rvalue</strong>: A temporary object that does not occupy a persistent memory location (e.g., the result of an expression).</li>
</ul>
</li>
<li>
<p><strong>Move Constructor</strong>: A constructor that transfers resources from a temporary object to a new object.</p>
</li>
<li>
<p><strong>Move Assignment Operator</strong>: An operator that transfers resources from a temporary object to an existing object.</p>
</li>
<li>
<p><strong>std::move</strong>: A standard library function that casts an object to an rvalue reference, enabling move semantics.</p>
</li>
</ul>
</div><h1>Move Constructor</h1>
<div class='content'><p>A move constructor allows an object to take ownership of resources from a temporary object. This is done using rvalue references.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8dXRpbGl0eT4gLy8gZm9yIHN0ZDo6bW92ZQoKY2xhc3MgTXlDbGFzcyB7CnB1YmxpYzoKICAgIGludCogZGF0YTsKICAgIAogICAgLy8gQ29uc3RydWN0b3IKICAgIE15Q2xhc3MoaW50IHZhbHVlKSA6IGRhdGEobmV3IGludCh2YWx1ZSkpIHsKICAgICAgICBzdGQ6OmNvdXQgPDwgIkNvbnN0cnVjdG9yIGNhbGxlZFxuIjsKICAgIH0KICAgIAogICAgLy8gTW92ZSBDb25zdHJ1Y3RvcgogICAgTXlDbGFzcyhNeUNsYXNzJiYgb3RoZXIpIG5vZXhjZXB0IDogZGF0YShvdGhlci5kYXRhKSB7CiAgICAgICAgb3RoZXIuZGF0YSA9IG51bGxwdHI7IC8vIE51bGxpZnkgdGhlIHNvdXJjZSBwb2ludGVyCiAgICAgICAgc3RkOjpjb3V0IDw8ICJNb3ZlIENvbnN0cnVjdG9yIGNhbGxlZFxuIjsKICAgIH0KICAgIAogICAgLy8gRGVzdHJ1Y3RvcgogICAgfk15Q2xhc3MoKSB7CiAgICAgICAgZGVsZXRlIGRhdGE7CiAgICAgICAgc3RkOjpjb3V0IDw8ICJEZXN0cnVjdG9yIGNhbGxlZFxuIjsKICAgIH0KfTsKCmludCBtYWluKCkgewogICAgTXlDbGFzcyBvYmoxKDEwKTsKICAgIE15Q2xhc3Mgb2JqMihzdGQ6Om1vdmUob2JqMSkpOyAvLyBNb3ZlIGNvbnN0cnVjdG9yIGlzIGNhbGxlZAogICAgcmV0dXJuIDA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;
#include &lt;utility&gt; // for std::move

class MyClass {
public:
    int* data;
    
    // Constructor
    MyClass(int value) : data(new int(value)) {
        std::cout &lt;&lt; &quot;Constructor called\n&quot;;
    }
    
    // Move Constructor
    MyClass(MyClass&amp;&amp; other) noexcept : data(other.data) {
        other.data = nullptr; // Nullify the source pointer
        std::cout &lt;&lt; &quot;Move Constructor called\n&quot;;
    }
    
    // Destructor
    ~MyClass() {
        delete data;
        std::cout &lt;&lt; &quot;Destructor called\n&quot;;
    }
};

int main() {
    MyClass obj1(10);
    MyClass obj2(std::move(obj1)); // Move constructor is called
    return 0;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Constructor</strong>: Allocates memory and initializes the <code>data</code> member.</li>
<li><strong>Move Constructor</strong>: Transfers the ownership of the <code>data</code> pointer from <code>other</code> to the new object and nullifies the <code>data</code> pointer in <code>other</code>.</li>
<li><strong>Destructor</strong>: Deletes the allocated memory.</li>
</ul>
</div><h1>Move Assignment Operator</h1>
<div class='content'><p>The move assignment operator allows an existing object to take ownership of resources from a temporary object.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8dXRpbGl0eT4gLy8gZm9yIHN0ZDo6bW92ZQoKY2xhc3MgTXlDbGFzcyB7CnB1YmxpYzoKICAgIGludCogZGF0YTsKICAgIAogICAgLy8gQ29uc3RydWN0b3IKICAgIE15Q2xhc3MoaW50IHZhbHVlKSA6IGRhdGEobmV3IGludCh2YWx1ZSkpIHsKICAgICAgICBzdGQ6OmNvdXQgPDwgIkNvbnN0cnVjdG9yIGNhbGxlZFxuIjsKICAgIH0KICAgIAogICAgLy8gTW92ZSBDb25zdHJ1Y3RvcgogICAgTXlDbGFzcyhNeUNsYXNzJiYgb3RoZXIpIG5vZXhjZXB0IDogZGF0YShvdGhlci5kYXRhKSB7CiAgICAgICAgb3RoZXIuZGF0YSA9IG51bGxwdHI7IC8vIE51bGxpZnkgdGhlIHNvdXJjZSBwb2ludGVyCiAgICAgICAgc3RkOjpjb3V0IDw8ICJNb3ZlIENvbnN0cnVjdG9yIGNhbGxlZFxuIjsKICAgIH0KICAgIAogICAgLy8gTW92ZSBBc3NpZ25tZW50IE9wZXJhdG9yCiAgICBNeUNsYXNzJiBvcGVyYXRvcj0oTXlDbGFzcyYmIG90aGVyKSBub2V4Y2VwdCB7CiAgICAgICAgaWYgKHRoaXMgIT0gJm90aGVyKSB7CiAgICAgICAgICAgIGRlbGV0ZSBkYXRhOyAvLyBGcmVlIGV4aXN0aW5nIHJlc291cmNlCiAgICAgICAgICAgIGRhdGEgPSBvdGhlci5kYXRhOyAvLyBUcmFuc2ZlciBvd25lcnNoaXAKICAgICAgICAgICAgb3RoZXIuZGF0YSA9IG51bGxwdHI7IC8vIE51bGxpZnkgdGhlIHNvdXJjZSBwb2ludGVyCiAgICAgICAgICAgIHN0ZDo6Y291dCA8PCAiTW92ZSBBc3NpZ25tZW50IE9wZXJhdG9yIGNhbGxlZFxuIjsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICp0aGlzOwogICAgfQogICAgCiAgICAvLyBEZXN0cnVjdG9yCiAgICB+TXlDbGFzcygpIHsKICAgICAgICBkZWxldGUgZGF0YTsKICAgICAgICBzdGQ6OmNvdXQgPDwgIkRlc3RydWN0b3IgY2FsbGVkXG4iOwogICAgfQp9OwoKaW50IG1haW4oKSB7CiAgICBNeUNsYXNzIG9iajEoMTApOwogICAgTXlDbGFzcyBvYmoyKDIwKTsKICAgIG9iajIgPSBzdGQ6Om1vdmUob2JqMSk7IC8vIE1vdmUgYXNzaWdubWVudCBvcGVyYXRvciBpcyBjYWxsZWQKICAgIHJldHVybiAwOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;
#include &lt;utility&gt; // for std::move

class MyClass {
public:
    int* data;
    
    // Constructor
    MyClass(int value) : data(new int(value)) {
        std::cout &lt;&lt; &quot;Constructor called\n&quot;;
    }
    
    // Move Constructor
    MyClass(MyClass&amp;&amp; other) noexcept : data(other.data) {
        other.data = nullptr; // Nullify the source pointer
        std::cout &lt;&lt; &quot;Move Constructor called\n&quot;;
    }
    
    // Move Assignment Operator
    MyClass&amp; operator=(MyClass&amp;&amp; other) noexcept {
        if (this != &amp;other) {
            delete data; // Free existing resource
            data = other.data; // Transfer ownership
            other.data = nullptr; // Nullify the source pointer
            std::cout &lt;&lt; &quot;Move Assignment Operator called\n&quot;;
        }
        return *this;
    }
    
    // Destructor
    ~MyClass() {
        delete data;
        std::cout &lt;&lt; &quot;Destructor called\n&quot;;
    }
};

int main() {
    MyClass obj1(10);
    MyClass obj2(20);
    obj2 = std::move(obj1); // Move assignment operator is called
    return 0;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Move Assignment Operator</strong>: Checks for self-assignment, deletes the existing resource, transfers ownership of the <code>data</code> pointer from <code>other</code> to the current object, and nullifies the <code>data</code> pointer in <code>other</code>.</li>
</ul>
</div><h1>std::move</h1>
<div class='content'><p>The <code>std::move</code> function is used to cast an object to an rvalue reference, enabling move semantics.</p>
</div><h2>Example</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGlvc3RyZWFtPgojaW5jbHVkZSA8dXRpbGl0eT4gLy8gZm9yIHN0ZDo6bW92ZQoKdm9pZCBwcm9jZXNzKE15Q2xhc3Mgb2JqKSB7CiAgICAvLyBGdW5jdGlvbiB0aGF0IHRha2VzIG93bmVyc2hpcCBvZiBvYmoKfQoKaW50IG1haW4oKSB7CiAgICBNeUNsYXNzIG9iajEoMTApOwogICAgcHJvY2VzcyhzdGQ6Om1vdmUob2JqMSkpOyAvLyBzdGQ6Om1vdmUgY2FzdHMgb2JqMSB0byBhbiBydmFsdWUgcmVmZXJlbmNlCiAgICByZXR1cm4gMDsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;iostream&gt;
#include &lt;utility&gt; // for std::move

void process(MyClass obj) {
    // Function that takes ownership of obj
}

int main() {
    MyClass obj1(10);
    process(std::move(obj1)); // std::move casts obj1 to an rvalue reference
    return 0;
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>std::move</strong>: Casts <code>obj1</code> to an rvalue reference, allowing the <code>process</code> function to take ownership of its resources.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Move semantics is a crucial feature in modern C++ that enhances performance by eliminating unnecessary deep copies. By understanding and implementing move constructors and move assignment operators, you can write more efficient and resource-friendly C++ programs. Remember to use <code>std::move</code> to enable move semantics when dealing with temporary objects.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='lambda-expressions'>&#x25C4;Lambda Expressions</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Move Semantics in C++</a>
	</div>
	<div class='col-4 text-end'>
					<a href='regular-expressions'>Regular Expressions &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
