<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asynchronous Programming</title>

    <link rel="alternate" href="https://campusempresa.com/mod/csharp/04-06-asynchronous-programming" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/csharp/04-06-asynchronous-programming" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/csharp/04-06-asynchronous-programming" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/csharp/04-06-asynchronous-programming" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/csharp/04-06-asynchronous-programming" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				 					<a href="/categ/languages">Programming Languages</a>
				 					<a href="/categ/frameworks">Frameworks and Libraries</a>
				 					<a href="/categ/tech-tools">Technical Tools</a>
				 					<a href="/categ/foundations">Theoretical Foundations</a>
				 					<a href="/categ/soft-skills">Social Skills</a>
							</div>
		</div>
	</div>
</div>
		
<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
				<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-05-linq' title="LINQ (Language Integrated Query)">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Asynchronous Programming</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-01-file-io' title="File I/O">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Asynchronous programming is a form of parallel programming that allows a unit of work to run separately from the main application thread. When the work is complete, it notifies the main thread (or another thread) about its completion. This is particularly useful for tasks that are I/O-bound or require waiting, such as reading from a file, making network requests, or querying a database.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Synchronous vs Asynchronous</strong>:</p>
<ul>
<li><strong>Synchronous</strong>: Tasks are performed one after another. Each task must complete before the next one starts.</li>
<li><strong>Asynchronous</strong>: Tasks can be performed concurrently. A task can start before the previous one finishes.</li>
</ul>
</li>
<li>
<p><strong>Tasks and Task-based Asynchronous Pattern (TAP)</strong>:</p>
<ul>
<li><strong>Task</strong>: Represents an asynchronous operation.</li>
<li><strong>Task-based Asynchronous Pattern (TAP)</strong>: A pattern for asynchronous programming using the <code>Task</code> and <code>Task&lt;T&gt;</code> types.</li>
</ul>
</li>
<li>
<p><strong>Async and Await Keywords</strong>:</p>
<ul>
<li><strong>async</strong>: Used to declare a method as asynchronous.</li>
<li><strong>await</strong>: Used to pause the execution of an async method until the awaited task completes.</li>
</ul>
</li>
<li>
<p><strong>Asynchronous Methods</strong>:</p>
<ul>
<li>Methods that perform asynchronous operations and return <code>Task</code> or <code>Task&lt;T&gt;</code>.</li>
</ul>
</li>
</ol>
</div><h1><p>Practical Examples</p>
</h1>
<div class='content'></div><h2><p>Example 1: Basic Asynchronous Method</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzOwoKY2xhc3MgUHJvZ3JhbQp7CiAgICBzdGF0aWMgYXN5bmMgVGFzayBNYWluKHN0cmluZ1tdIGFyZ3MpCiAgICB7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoIlN0YXJ0aW5nIE1haW4gbWV0aG9kLi4uIik7CiAgICAgICAgYXdhaXQgUGVyZm9ybVRhc2tBc3luYygpOwogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJNYWluIG1ldGhvZCBjb21wbGV0ZS4iKTsKICAgIH0KCiAgICBzdGF0aWMgYXN5bmMgVGFzayBQZXJmb3JtVGFza0FzeW5jKCkKICAgIHsKICAgICAgICBDb25zb2xlLldyaXRlTGluZSgiU3RhcnRpbmcgUGVyZm9ybVRhc2tBc3luYy4uLiIpOwogICAgICAgIGF3YWl0IFRhc2suRGVsYXkoMjAwMCk7IC8vIFNpbXVsYXRlcyBhIGRlbGF5IG9mIDIgc2Vjb25kcwogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJQZXJmb3JtVGFza0FzeW5jIGNvbXBsZXRlLiIpOwogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using System;
using System.Threading.Tasks;

class Program
{
    static async Task Main(string[] args)
    {
        Console.WriteLine(&quot;Starting Main method...&quot;);
        await PerformTaskAsync();
        Console.WriteLine(&quot;Main method complete.&quot;);
    }

    static async Task PerformTaskAsync()
    {
        Console.WriteLine(&quot;Starting PerformTaskAsync...&quot;);
        await Task.Delay(2000); // Simulates a delay of 2 seconds
        Console.WriteLine(&quot;PerformTaskAsync complete.&quot;);
    }
}</pre></div><div class='content'><p><strong>Explanation</strong>:</p>
<ul>
<li><code>Main</code> method is marked with <code>async</code> and returns <code>Task</code>.</li>
<li><code>await PerformTaskAsync()</code> pauses the <code>Main</code> method until <code>PerformTaskAsync</code> completes.</li>
<li><code>Task.Delay(2000)</code> simulates a 2-second delay asynchronously.</li>
</ul>
</div><h2><p>Example 2: Returning a Value from an Asynchronous Method</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzOwoKY2xhc3MgUHJvZ3JhbQp7CiAgICBzdGF0aWMgYXN5bmMgVGFzayBNYWluKHN0cmluZ1tdIGFyZ3MpCiAgICB7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoIlN0YXJ0aW5nIE1haW4gbWV0aG9kLi4uIik7CiAgICAgICAgaW50IHJlc3VsdCA9IGF3YWl0IENhbGN1bGF0ZVN1bUFzeW5jKDUsIDEwKTsKICAgICAgICBDb25zb2xlLldyaXRlTGluZSgkIlN1bToge3Jlc3VsdH0iKTsKICAgICAgICBDb25zb2xlLldyaXRlTGluZSgiTWFpbiBtZXRob2QgY29tcGxldGUuIik7CiAgICB9CgogICAgc3RhdGljIGFzeW5jIFRhc2s8aW50PiBDYWxjdWxhdGVTdW1Bc3luYyhpbnQgYSwgaW50IGIpCiAgICB7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoIlN0YXJ0aW5nIENhbGN1bGF0ZVN1bUFzeW5jLi4uIik7CiAgICAgICAgYXdhaXQgVGFzay5EZWxheSgxMDAwKTsgLy8gU2ltdWxhdGVzIGEgZGVsYXkgb2YgMSBzZWNvbmQKICAgICAgICBpbnQgc3VtID0gYSArIGI7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoIkNhbGN1bGF0ZVN1bUFzeW5jIGNvbXBsZXRlLiIpOwogICAgICAgIHJldHVybiBzdW07CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using System;
using System.Threading.Tasks;

class Program
{
    static async Task Main(string[] args)
    {
        Console.WriteLine(&quot;Starting Main method...&quot;);
        int result = await CalculateSumAsync(5, 10);
        Console.WriteLine($&quot;Sum: {result}&quot;);
        Console.WriteLine(&quot;Main method complete.&quot;);
    }

    static async Task&lt;int&gt; CalculateSumAsync(int a, int b)
    {
        Console.WriteLine(&quot;Starting CalculateSumAsync...&quot;);
        await Task.Delay(1000); // Simulates a delay of 1 second
        int sum = a + b;
        Console.WriteLine(&quot;CalculateSumAsync complete.&quot;);
        return sum;
    }
}</pre></div><div class='content'><p><strong>Explanation</strong>:</p>
<ul>
<li><code>CalculateSumAsync</code> returns <code>Task&lt;int&gt;</code>, indicating it returns an integer result asynchronously.</li>
<li><code>await CalculateSumAsync(5, 10)</code> pauses the <code>Main</code> method until the sum is calculated and returned.</li>
</ul>
</div><h1><p>Practical Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Asynchronous File Reading</p>
</h2>
<div class='content'><p><strong>Task</strong>: Write an asynchronous method to read the contents of a file and print it to the console.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uSU87CnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7CgpjbGFzcyBQcm9ncmFtCnsKICAgIHN0YXRpYyBhc3luYyBUYXNrIE1haW4oc3RyaW5nW10gYXJncykKICAgIHsKICAgICAgICBzdHJpbmcgZmlsZVBhdGggPSAiZXhhbXBsZS50eHQiOwogICAgICAgIHN0cmluZyBjb250ZW50ID0gYXdhaXQgUmVhZEZpbGVBc3luYyhmaWxlUGF0aCk7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoY29udGVudCk7CiAgICB9CgogICAgc3RhdGljIGFzeW5jIFRhc2s8c3RyaW5nPiBSZWFkRmlsZUFzeW5jKHN0cmluZyBmaWxlUGF0aCkKICAgIHsKICAgICAgICB1c2luZyAoU3RyZWFtUmVhZGVyIHJlYWRlciA9IG5ldyBTdHJlYW1SZWFkZXIoZmlsZVBhdGgpKQogICAgICAgIHsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJlYWRlci5SZWFkVG9FbmRBc3luYygpOwogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using System;
using System.IO;
using System.Threading.Tasks;

class Program
{
    static async Task Main(string[] args)
    {
        string filePath = &quot;example.txt&quot;;
        string content = await ReadFileAsync(filePath);
        Console.WriteLine(content);
    }

    static async Task&lt;string&gt; ReadFileAsync(string filePath)
    {
        using (StreamReader reader = new StreamReader(filePath))
        {
            return await reader.ReadToEndAsync();
        }
    }
}</pre></div><div class='content'><p><strong>Explanation</strong>:</p>
<ul>
<li><code>ReadFileAsync</code> reads the file content asynchronously using <code>StreamReader.ReadToEndAsync</code>.</li>
<li>The <code>using</code> statement ensures the <code>StreamReader</code> is disposed of properly.</li>
</ul>
</div><h2><p>Exercise 2: Asynchronous Web Request</p>
</h2>
<div class='content'><p><strong>Task</strong>: Write an asynchronous method to fetch data from a web URL and print the response to the console.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uTmV0Lkh0dHA7CnVzaW5nIFN5c3RlbS5UaHJlYWRpbmcuVGFza3M7CgpjbGFzcyBQcm9ncmFtCnsKICAgIHN0YXRpYyBhc3luYyBUYXNrIE1haW4oc3RyaW5nW10gYXJncykKICAgIHsKICAgICAgICBzdHJpbmcgdXJsID0gImh0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS9wb3N0cy8xIjsKICAgICAgICBzdHJpbmcgcmVzcG9uc2UgPSBhd2FpdCBGZXRjaERhdGFBc3luYyh1cmwpOwogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKHJlc3BvbnNlKTsKICAgIH0KCiAgICBzdGF0aWMgYXN5bmMgVGFzazxzdHJpbmc+IEZldGNoRGF0YUFzeW5jKHN0cmluZyB1cmwpCiAgICB7CiAgICAgICAgdXNpbmcgKEh0dHBDbGllbnQgY2xpZW50ID0gbmV3IEh0dHBDbGllbnQoKSkKICAgICAgICB7CiAgICAgICAgICAgIEh0dHBSZXNwb25zZU1lc3NhZ2UgcmVzcG9uc2UgPSBhd2FpdCBjbGllbnQuR2V0QXN5bmModXJsKTsKICAgICAgICAgICAgcmVzcG9uc2UuRW5zdXJlU3VjY2Vzc1N0YXR1c0NvZGUoKTsKICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLkNvbnRlbnQuUmVhZEFzU3RyaW5nQXN5bmMoKTsKICAgICAgICB9CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using System;
using System.Net.Http;
using System.Threading.Tasks;

class Program
{
    static async Task Main(string[] args)
    {
        string url = &quot;https://jsonplaceholder.typicode.com/posts/1&quot;;
        string response = await FetchDataAsync(url);
        Console.WriteLine(response);
    }

    static async Task&lt;string&gt; FetchDataAsync(string url)
    {
        using (HttpClient client = new HttpClient())
        {
            HttpResponseMessage response = await client.GetAsync(url);
            response.EnsureSuccessStatusCode();
            return await response.Content.ReadAsStringAsync();
        }
    }
}</pre></div><div class='content'><p><strong>Explanation</strong>:</p>
<ul>
<li><code>FetchDataAsync</code> uses <code>HttpClient</code> to send an asynchronous GET request.</li>
<li><code>HttpResponseMessage</code> is awaited to ensure the request completes before reading the response content.</li>
</ul>
</div><h1><p>Common Mistakes and Tips</p>
</h1>
<div class='content'><ol>
<li>
<p><strong>Blocking the Main Thread</strong>:</p>
<ul>
<li>Avoid using <code>.Result</code> or <code>.Wait()</code> on tasks in the main thread, as it can cause deadlocks.</li>
<li>Always use <code>await</code> to asynchronously wait for tasks to complete.</li>
</ul>
</li>
<li>
<p><strong>Exception Handling</strong>:</p>
<ul>
<li>Use <code>try-catch</code> blocks to handle exceptions in asynchronous methods.</li>
<li>Exceptions in async methods are propagated to the calling method.</li>
</ul>
</li>
<li>
<p><strong>Deadlocks</strong>:</p>
<ul>
<li>Be cautious of deadlocks when mixing synchronous and asynchronous code.</li>
<li>Prefer fully asynchronous code paths.</li>
</ul>
</li>
</ol>
</div><h1><p>Summary</p>
</h1>
<div class='content'><p>In this section, we covered the basics of asynchronous programming in C#. We learned about the <code>async</code> and <code>await</code> keywords, how to create and use asynchronous methods, and the importance of handling exceptions in asynchronous code. We also provided practical examples and exercises to reinforce the concepts. Asynchronous programming is a powerful tool for improving the responsiveness and performance of your applications, especially when dealing with I/O-bound operations.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='04-05-linq' title="LINQ (Language Integrated Query)">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='05-01-file-io' title="File I/O">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
