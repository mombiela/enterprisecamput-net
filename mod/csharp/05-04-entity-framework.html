<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entity Framework</title>

    <link rel="alternate" href="https://campusempresa.com/mod/csharp/05-04-entity-framework" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/csharp/05-04-entity-framework" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/csharp/05-04-entity-framework" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-2 p-md-0 text-end">
				<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/csharp/05-04-entity-framework" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/csharp/05-04-entity-framework" class="px-2">CA</a>
<br>
			<cite>Building today's and tomorrow's society</cite>
		</div>
	</div>
</div>
<div id="subheader" class="container-xxl">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
									<a href="./">Course Content</a>
					<span class="sep">|</span>
								<a href="/all/competencias">Technical Skills</a>
				<a href="/all/conocimientos">Knowledge</a>
				<a href="/all/soft_skills">Social Skills</a>
			</div>
		</div>
	</div>
</div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-03-database-connectivity' title="Database Connectivity">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Entity Framework</h2></a>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-01-reflection' title="Reflection">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>
<div class='content'><p>Entity Framework (EF) is an open-source object-relational mapper (ORM) for .NET applications. It enables developers to work with a database using .NET objects, eliminating the need for most of the data-access code that developers usually need to write. In this module, we will cover the basics of Entity Framework, how to set it up, and how to perform CRUD (Create, Read, Update, Delete) operations.</p>
</div><h1><p>Table of Contents</p>
</h1>
<div class='content'><ol>
<li><a href="#introduction-to-entity-framework">Introduction to Entity Framework</a></li>
<li><a href="#setting-up-entity-framework">Setting Up Entity Framework</a></li>
<li><a href="#creating-a-data-model">Creating a Data Model</a></li>
<li><a href="#crud-operations">CRUD Operations</a></li>
<li><a href="#querying-data">Querying Data</a></li>
<li><a href="#advanced-features">Advanced Features</a></li>
<li><a href="#practical-exercises">Practical Exercises</a></li>
<li><a href="#summary">Summary</a></li>
</ol>
</div><h1><p>Introduction to Entity Framework</p>
</h1>
<div class='content'><p>Entity Framework simplifies data access by allowing developers to interact with a database using .NET objects. It supports:</p>
<ul>
<li><strong>Code First</strong>: Define the model using C# classes, and EF will create the database schema.</li>
<li><strong>Database First</strong>: Generate the model from an existing database.</li>
<li><strong>Model First</strong>: Define the model using a visual designer, and EF will generate the database schema.</li>
</ul>
</div><h1><p>Setting Up Entity Framework</p>
</h1>
<div class='content'></div><h2><p>Step 1: Install Entity Framework</p>
</h2>
<div class='content'><p>To use Entity Framework in your project, you need to install the EF package via NuGet. Open the Package Manager Console and run the following command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SW5zdGFsbC1QYWNrYWdlIEVudGl0eUZyYW1ld29yaw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Install-Package EntityFramework</pre></div><div class='content'></div><h2><p>Step 2: Configure the Connection String</p>
</h2>
<div class='content'><p>Add a connection string to your <code>App.config</code> or <code>Web.config</code> file to specify the database connection details.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGNvbmZpZ3VyYXRpb24+CiAgPGNvbm5lY3Rpb25TdHJpbmdzPgogICAgPGFkZCBuYW1lPSJNeURiQ29udGV4dCIKICAgICAgICAgY29ubmVjdGlvblN0cmluZz0iRGF0YSBTb3VyY2U9KGxvY2FsZGIpXE1TU1FMTG9jYWxEQjtJbml0aWFsIENhdGFsb2c9TXlEYXRhYmFzZTtJbnRlZ3JhdGVkIFNlY3VyaXR5PVRydWUiCiAgICAgICAgIHByb3ZpZGVyTmFtZT0iU3lzdGVtLkRhdGEuU3FsQ2xpZW50IiAvPgogIDwvY29ubmVjdGlvblN0cmluZ3M+CjwvY29uZmlndXJhdGlvbj4="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;configuration&gt;
  &lt;connectionStrings&gt;
    &lt;add name=&quot;MyDbContext&quot;
         connectionString=&quot;Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=MyDatabase;Integrated Security=True&quot;
         providerName=&quot;System.Data.SqlClient&quot; /&gt;
  &lt;/connectionStrings&gt;
&lt;/configuration&gt;</pre></div><div class='content'></div><h1><p>Creating a Data Model</p>
</h1>
<div class='content'></div><h2><p>Step 1: Define the Entity Classes</p>
</h2>
<div class='content'><p>Create C# classes that represent the tables in your database.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIFN0dWRlbnQKewogICAgcHVibGljIGludCBTdHVkZW50SWQgeyBnZXQ7IHNldDsgfQogICAgcHVibGljIHN0cmluZyBGaXJzdE5hbWUgeyBnZXQ7IHNldDsgfQogICAgcHVibGljIHN0cmluZyBMYXN0TmFtZSB7IGdldDsgc2V0OyB9CiAgICBwdWJsaWMgRGF0ZVRpbWUgRW5yb2xsbWVudERhdGUgeyBnZXQ7IHNldDsgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class Student
{
    public int StudentId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public DateTime EnrollmentDate { get; set; }
}</pre></div><div class='content'></div><h2><p>Step 2: Create the DbContext</p>
</h2>
<div class='content'><p>Create a class that inherits from <code>DbContext</code> to manage the entity objects during runtime.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIFNjaG9vbENvbnRleHQgOiBEYkNvbnRleHQKewogICAgcHVibGljIERiU2V0PFN0dWRlbnQ+IFN0dWRlbnRzIHsgZ2V0OyBzZXQ7IH0KCiAgICBwdWJsaWMgU2Nob29sQ29udGV4dCgpIDogYmFzZSgibmFtZT1NeURiQ29udGV4dCIpCiAgICB7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class SchoolContext : DbContext
{
    public DbSet&lt;Student&gt; Students { get; set; }

    public SchoolContext() : base(&quot;name=MyDbContext&quot;)
    {
    }
}</pre></div><div class='content'></div><h1><p>CRUD Operations</p>
</h1>
<div class='content'></div><h2><p>Create</p>
</h2>
<div class='content'><p>Add a new student to the database.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgKHZhciBjb250ZXh0ID0gbmV3IFNjaG9vbENvbnRleHQoKSkKewogICAgdmFyIHN0dWRlbnQgPSBuZXcgU3R1ZGVudAogICAgewogICAgICAgIEZpcnN0TmFtZSA9ICJKb2huIiwKICAgICAgICBMYXN0TmFtZSA9ICJEb2UiLAogICAgICAgIEVucm9sbG1lbnREYXRlID0gRGF0ZVRpbWUuTm93CiAgICB9OwogICAgY29udGV4dC5TdHVkZW50cy5BZGQoc3R1ZGVudCk7CiAgICBjb250ZXh0LlNhdmVDaGFuZ2VzKCk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using (var context = new SchoolContext())
{
    var student = new Student
    {
        FirstName = &quot;John&quot;,
        LastName = &quot;Doe&quot;,
        EnrollmentDate = DateTime.Now
    };
    context.Students.Add(student);
    context.SaveChanges();
}</pre></div><div class='content'></div><h2><p>Read</p>
</h2>
<div class='content'><p>Retrieve students from the database.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgKHZhciBjb250ZXh0ID0gbmV3IFNjaG9vbENvbnRleHQoKSkKewogICAgdmFyIHN0dWRlbnRzID0gY29udGV4dC5TdHVkZW50cy5Ub0xpc3QoKTsKICAgIGZvcmVhY2ggKHZhciBzdHVkZW50IGluIHN0dWRlbnRzKQogICAgewogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCQie3N0dWRlbnQuRmlyc3ROYW1lfSB7c3R1ZGVudC5MYXN0TmFtZX0iKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using (var context = new SchoolContext())
{
    var students = context.Students.ToList();
    foreach (var student in students)
    {
        Console.WriteLine($&quot;{student.FirstName} {student.LastName}&quot;);
    }
}</pre></div><div class='content'></div><h2><p>Update</p>
</h2>
<div class='content'><p>Update an existing student's details.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgKHZhciBjb250ZXh0ID0gbmV3IFNjaG9vbENvbnRleHQoKSkKewogICAgdmFyIHN0dWRlbnQgPSBjb250ZXh0LlN0dWRlbnRzLkZpcnN0T3JEZWZhdWx0KHMgPT4gcy5TdHVkZW50SWQgPT0gMSk7CiAgICBpZiAoc3R1ZGVudCAhPSBudWxsKQogICAgewogICAgICAgIHN0dWRlbnQuTGFzdE5hbWUgPSAiU21pdGgiOwogICAgICAgIGNvbnRleHQuU2F2ZUNoYW5nZXMoKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using (var context = new SchoolContext())
{
    var student = context.Students.FirstOrDefault(s =&gt; s.StudentId == 1);
    if (student != null)
    {
        student.LastName = &quot;Smith&quot;;
        context.SaveChanges();
    }
}</pre></div><div class='content'></div><h2><p>Delete</p>
</h2>
<div class='content'><p>Remove a student from the database.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgKHZhciBjb250ZXh0ID0gbmV3IFNjaG9vbENvbnRleHQoKSkKewogICAgdmFyIHN0dWRlbnQgPSBjb250ZXh0LlN0dWRlbnRzLkZpcnN0T3JEZWZhdWx0KHMgPT4gcy5TdHVkZW50SWQgPT0gMSk7CiAgICBpZiAoc3R1ZGVudCAhPSBudWxsKQogICAgewogICAgICAgIGNvbnRleHQuU3R1ZGVudHMuUmVtb3ZlKHN0dWRlbnQpOwogICAgICAgIGNvbnRleHQuU2F2ZUNoYW5nZXMoKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using (var context = new SchoolContext())
{
    var student = context.Students.FirstOrDefault(s =&gt; s.StudentId == 1);
    if (student != null)
    {
        context.Students.Remove(student);
        context.SaveChanges();
    }
}</pre></div><div class='content'></div><h1><p>Querying Data</p>
</h1>
<div class='content'><p>Entity Framework provides a powerful querying capability using LINQ (Language Integrated Query).</p>
</div><h2><p>Example: Retrieve Students Enrolled After a Certain Date</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgKHZhciBjb250ZXh0ID0gbmV3IFNjaG9vbENvbnRleHQoKSkKewogICAgdmFyIHN0dWRlbnRzID0gY29udGV4dC5TdHVkZW50cwogICAgICAgICAgICAgICAgICAgICAgICAgIC5XaGVyZShzID0+IHMuRW5yb2xsbWVudERhdGUgPiBuZXcgRGF0ZVRpbWUoMjAyMCwgMSwgMSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgLlRvTGlzdCgpOwogICAgZm9yZWFjaCAodmFyIHN0dWRlbnQgaW4gc3R1ZGVudHMpCiAgICB7CiAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoJCJ7c3R1ZGVudC5GaXJzdE5hbWV9IHtzdHVkZW50Lkxhc3ROYW1lfSIpOwogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using (var context = new SchoolContext())
{
    var students = context.Students
                          .Where(s =&gt; s.EnrollmentDate &gt; new DateTime(2020, 1, 1))
                          .ToList();
    foreach (var student in students)
    {
        Console.WriteLine($&quot;{student.FirstName} {student.LastName}&quot;);
    }
}</pre></div><div class='content'></div><h1><p>Advanced Features</p>
</h1>
<div class='content'></div><h2><p>Lazy Loading</p>
</h2>
<div class='content'><p>Entity Framework supports lazy loading, which means related data is automatically loaded from the database when accessed.</p>
</div><h2><p>Eager Loading</p>
</h2>
<div class='content'><p>Eager loading is the process of loading related data as part of the initial query.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgKHZhciBjb250ZXh0ID0gbmV3IFNjaG9vbENvbnRleHQoKSkKewogICAgdmFyIHN0dWRlbnRzID0gY29udGV4dC5TdHVkZW50cy5JbmNsdWRlKHMgPT4gcy5FbnJvbGxtZW50cykuVG9MaXN0KCk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using (var context = new SchoolContext())
{
    var students = context.Students.Include(s =&gt; s.Enrollments).ToList();
}</pre></div><div class='content'></div><h2><p>Code First Migrations</p>
</h2>
<div class='content'><p>Code First Migrations allow you to evolve your database schema over time.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RW5hYmxlLU1pZ3JhdGlvbnMKQWRkLU1pZ3JhdGlvbiBJbml0aWFsQ3JlYXRlClVwZGF0ZS1EYXRhYmFzZQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>Enable-Migrations
Add-Migration InitialCreate
Update-Database</pre></div><div class='content'></div><h1><p>Practical Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Create a New Entity</p>
</h2>
<div class='content'><ol>
<li>Define a new entity class <code>Course</code> with properties <code>CourseId</code>, <code>Title</code>, and <code>Credits</code>.</li>
<li>Add a <code>DbSet&lt;Course&gt;</code> property to your <code>SchoolContext</code>.</li>
<li>Create a new course and save it to the database.</li>
</ol>
</div><h2><p>Solution</p>
</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIENvdXJzZQp7CiAgICBwdWJsaWMgaW50IENvdXJzZUlkIHsgZ2V0OyBzZXQ7IH0KICAgIHB1YmxpYyBzdHJpbmcgVGl0bGUgeyBnZXQ7IHNldDsgfQogICAgcHVibGljIGludCBDcmVkaXRzIHsgZ2V0OyBzZXQ7IH0KfQoKcHVibGljIGNsYXNzIFNjaG9vbENvbnRleHQgOiBEYkNvbnRleHQKewogICAgcHVibGljIERiU2V0PFN0dWRlbnQ+IFN0dWRlbnRzIHsgZ2V0OyBzZXQ7IH0KICAgIHB1YmxpYyBEYlNldDxDb3Vyc2U+IENvdXJzZXMgeyBnZXQ7IHNldDsgfQoKICAgIHB1YmxpYyBTY2hvb2xDb250ZXh0KCkgOiBiYXNlKCJuYW1lPU15RGJDb250ZXh0IikKICAgIHsKICAgIH0KfQoKLy8gQWRkaW5nIGEgbmV3IGNvdXJzZQp1c2luZyAodmFyIGNvbnRleHQgPSBuZXcgU2Nob29sQ29udGV4dCgpKQp7CiAgICB2YXIgY291cnNlID0gbmV3IENvdXJzZQogICAgewogICAgICAgIFRpdGxlID0gIkludHJvZHVjdGlvbiB0byBDIyIsCiAgICAgICAgQ3JlZGl0cyA9IDMKICAgIH07CiAgICBjb250ZXh0LkNvdXJzZXMuQWRkKGNvdXJzZSk7CiAgICBjb250ZXh0LlNhdmVDaGFuZ2VzKCk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class Course
{
    public int CourseId { get; set; }
    public string Title { get; set; }
    public int Credits { get; set; }
}

public class SchoolContext : DbContext
{
    public DbSet&lt;Student&gt; Students { get; set; }
    public DbSet&lt;Course&gt; Courses { get; set; }

    public SchoolContext() : base(&quot;name=MyDbContext&quot;)
    {
    }
}

// Adding a new course
using (var context = new SchoolContext())
{
    var course = new Course
    {
        Title = &quot;Introduction to C#&quot;,
        Credits = 3
    };
    context.Courses.Add(course);
    context.SaveChanges();
}</pre></div><div class='content'></div><h1><p>Summary</p>
</h1>
<div class='content'><p>In this module, we covered the basics of Entity Framework, including setting it up, creating a data model, and performing CRUD operations. We also explored querying data and some advanced features like lazy loading and migrations. By completing the practical exercises, you should now have a solid understanding of how to use Entity Framework in your C# applications.</p>
</div><div class='row navigation'>
	<div class='col-1 col-md-2'>
					<a href='05-03-database-connectivity' title="Database Connectivity">
				<span class="d-none d-md-inline">&#x25C4; Previous</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-left-square-fill"></i></span>
			</a>
			</div>
	<div class='col-10 col-md-8 text-center'>
			</div>
	<div class='col-1 col-md-2 text-end'>
					<a href='06-01-reflection' title="Reflection">
				<span class="d-none d-md-inline">Next &#x25BA;</span>
				<span class="d-inline d-md-none"><i class="bi bi-caret-right-square-fill"></i></span>
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
