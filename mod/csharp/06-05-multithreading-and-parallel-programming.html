<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multithreading and Parallel Programming</title>

    <link rel="alternate" href="https://campusempresa.com/mod/csharp/06-05-multithreading-and-parallel-programming" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/csharp/06-05-multithreading-and-parallel-programming" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/csharp/06-05-multithreading-and-parallel-programming" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/csharp/06-05-multithreading-and-parallel-programming" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/csharp/06-05-multithreading-and-parallel-programming" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='06-04-memory-management-and-garbage-collection' title="Memory Management and Garbage Collection">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Multithreading and Parallel Programming</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-01-windows-forms' title="Windows Forms">Next &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Multithreading and parallel programming are essential concepts in modern software development, allowing programs to perform multiple operations concurrently, thus improving performance and responsiveness. This section will cover the basics of multithreading, thread management, synchronization, and parallel programming techniques in C#.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ol>
<li><strong>Thread</strong>: The smallest unit of processing that can be scheduled by an operating system.</li>
<li><strong>Multithreading</strong>: The ability of a CPU to execute multiple threads concurrently.</li>
<li><strong>Parallel Programming</strong>: A type of computation in which many calculations or processes are carried out simultaneously.</li>
<li><strong>Task Parallel Library (TPL)</strong>: A set of public types and APIs in the <code>System.Threading</code> and <code>System.Threading.Tasks</code> namespaces that simplify the process of adding parallelism and concurrency to applications.</li>
</ol>
</div><h1>Creating and Managing Threads</h1>
<div class='content'></div><h2>Creating a Thread</h2>
<div class='content'><p>In C#, you can create a thread using the <code>Thread</code> class from the <code>System.Threading</code> namespace.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uVGhyZWFkaW5nOwoKY2xhc3MgUHJvZ3JhbQp7CiAgICBzdGF0aWMgdm9pZCBNYWluKCkKICAgIHsKICAgICAgICBUaHJlYWQgdGhyZWFkID0gbmV3IFRocmVhZChuZXcgVGhyZWFkU3RhcnQoRG9Xb3JrKSk7CiAgICAgICAgdGhyZWFkLlN0YXJ0KCk7CiAgICB9CgogICAgc3RhdGljIHZvaWQgRG9Xb3JrKCkKICAgIHsKICAgICAgICBDb25zb2xlLldyaXRlTGluZSgiVGhyZWFkIGlzIHdvcmtpbmcuLi4iKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using System;
using System.Threading;

class Program
{
    static void Main()
    {
        Thread thread = new Thread(new ThreadStart(DoWork));
        thread.Start();
    }

    static void DoWork()
    {
        Console.WriteLine(&quot;Thread is working...&quot;);
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>ThreadStart Delegate</strong>: Represents the method that executes on the thread.</li>
<li><strong>Start Method</strong>: Begins the execution of the thread.</li>
</ul>
</div><h2>Practical Exercise</h2>
<div class='content'><p><strong>Exercise</strong>: Create a program that starts a new thread to print numbers from 1 to 10.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uVGhyZWFkaW5nOwoKY2xhc3MgUHJvZ3JhbQp7CiAgICBzdGF0aWMgdm9pZCBNYWluKCkKICAgIHsKICAgICAgICBUaHJlYWQgdGhyZWFkID0gbmV3IFRocmVhZChuZXcgVGhyZWFkU3RhcnQoUHJpbnROdW1iZXJzKSk7CiAgICAgICAgdGhyZWFkLlN0YXJ0KCk7CiAgICB9CgogICAgc3RhdGljIHZvaWQgUHJpbnROdW1iZXJzKCkKICAgIHsKICAgICAgICBmb3IgKGludCBpID0gMTsgaSA8PSAxMDsgaSsrKQogICAgICAgIHsKICAgICAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoaSk7CiAgICAgICAgICAgIFRocmVhZC5TbGVlcCg1MDApOyAvLyBTbGVlcCBmb3IgNTAwIG1pbGxpc2Vjb25kcwogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using System;
using System.Threading;

class Program
{
    static void Main()
    {
        Thread thread = new Thread(new ThreadStart(PrintNumbers));
        thread.Start();
    }

    static void PrintNumbers()
    {
        for (int i = 1; i &lt;= 10; i++)
        {
            Console.WriteLine(i);
            Thread.Sleep(500); // Sleep for 500 milliseconds
        }
    }
}</pre></div><div class='content'></div><h2>Common Mistakes</h2>
<div class='content'><ul>
<li><strong>Not Joining Threads</strong>: Forgetting to join threads can lead to unexpected behavior if the main thread terminates before the worker thread completes.</li>
<li><strong>Improper Synchronization</strong>: Accessing shared resources without proper synchronization can lead to race conditions.</li>
</ul>
</div><h1>Synchronization</h1>
<div class='content'></div><h2>Lock Statement</h2>
<div class='content'><p>The <code>lock</code> statement is used to ensure that a block of code runs to completion without interruption by other threads.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y2xhc3MgQ291bnRlcgp7CiAgICBwcml2YXRlIGludCBjb3VudCA9IDA7CiAgICBwcml2YXRlIHJlYWRvbmx5IG9iamVjdCBsb2NrT2JqZWN0ID0gbmV3IG9iamVjdCgpOwoKICAgIHB1YmxpYyB2b2lkIEluY3JlbWVudCgpCiAgICB7CiAgICAgICAgbG9jayAobG9ja09iamVjdCkKICAgICAgICB7CiAgICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgfQogICAgfQoKICAgIHB1YmxpYyBpbnQgR2V0Q291bnQoKQogICAgewogICAgICAgIGxvY2sgKGxvY2tPYmplY3QpCiAgICAgICAgewogICAgICAgICAgICByZXR1cm4gY291bnQ7CiAgICAgICAgfQogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>class Counter
{
    private int count = 0;
    private readonly object lockObject = new object();

    public void Increment()
    {
        lock (lockObject)
        {
            count++;
        }
    }

    public int GetCount()
    {
        lock (lockObject)
        {
            return count;
        }
    }
}</pre></div><div class='content'></div><h2>Practical Exercise</h2>
<div class='content'><p><strong>Exercise</strong>: Modify the previous exercise to use a shared counter that is incremented by two threads.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uVGhyZWFkaW5nOwoKY2xhc3MgUHJvZ3JhbQp7CiAgICBzdGF0aWMgQ291bnRlciBjb3VudGVyID0gbmV3IENvdW50ZXIoKTsKCiAgICBzdGF0aWMgdm9pZCBNYWluKCkKICAgIHsKICAgICAgICBUaHJlYWQgdGhyZWFkMSA9IG5ldyBUaHJlYWQobmV3IFRocmVhZFN0YXJ0KEluY3JlbWVudENvdW50ZXIpKTsKICAgICAgICBUaHJlYWQgdGhyZWFkMiA9IG5ldyBUaHJlYWQobmV3IFRocmVhZFN0YXJ0KEluY3JlbWVudENvdW50ZXIpKTsKCiAgICAgICAgdGhyZWFkMS5TdGFydCgpOwogICAgICAgIHRocmVhZDIuU3RhcnQoKTsKCiAgICAgICAgdGhyZWFkMS5Kb2luKCk7CiAgICAgICAgdGhyZWFkMi5Kb2luKCk7CgogICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCQiRmluYWwgQ291bnRlciBWYWx1ZToge2NvdW50ZXIuR2V0Q291bnQoKX0iKTsKICAgIH0KCiAgICBzdGF0aWMgdm9pZCBJbmNyZW1lbnRDb3VudGVyKCkKICAgIHsKICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IDEwOyBpKyspCiAgICAgICAgewogICAgICAgICAgICBjb3VudGVyLkluY3JlbWVudCgpOwogICAgICAgICAgICBUaHJlYWQuU2xlZXAoMTAwKTsKICAgICAgICB9CiAgICB9Cn0KCmNsYXNzIENvdW50ZXIKewogICAgcHJpdmF0ZSBpbnQgY291bnQgPSAwOwogICAgcHJpdmF0ZSByZWFkb25seSBvYmplY3QgbG9ja09iamVjdCA9IG5ldyBvYmplY3QoKTsKCiAgICBwdWJsaWMgdm9pZCBJbmNyZW1lbnQoKQogICAgewogICAgICAgIGxvY2sgKGxvY2tPYmplY3QpCiAgICAgICAgewogICAgICAgICAgICBjb3VudCsrOwogICAgICAgIH0KICAgIH0KCiAgICBwdWJsaWMgaW50IEdldENvdW50KCkKICAgIHsKICAgICAgICBsb2NrIChsb2NrT2JqZWN0KQogICAgICAgIHsKICAgICAgICAgICAgcmV0dXJuIGNvdW50OwogICAgICAgIH0KICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using System;
using System.Threading;

class Program
{
    static Counter counter = new Counter();

    static void Main()
    {
        Thread thread1 = new Thread(new ThreadStart(IncrementCounter));
        Thread thread2 = new Thread(new ThreadStart(IncrementCounter));

        thread1.Start();
        thread2.Start();

        thread1.Join();
        thread2.Join();

        Console.WriteLine($&quot;Final Counter Value: {counter.GetCount()}&quot;);
    }

    static void IncrementCounter()
    {
        for (int i = 0; i &lt; 10; i++)
        {
            counter.Increment();
            Thread.Sleep(100);
        }
    }
}

class Counter
{
    private int count = 0;
    private readonly object lockObject = new object();

    public void Increment()
    {
        lock (lockObject)
        {
            count++;
        }
    }

    public int GetCount()
    {
        lock (lockObject)
        {
            return count;
        }
    }
}</pre></div><div class='content'></div><h1>Task Parallel Library (TPL)</h1>
<div class='content'></div><h2>Using Tasks</h2>
<div class='content'><p>Tasks are a higher-level abstraction over threads, providing a more flexible and easier way to work with asynchronous and parallel code.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzOwoKY2xhc3MgUHJvZ3JhbQp7CiAgICBzdGF0aWMgdm9pZCBNYWluKCkKICAgIHsKICAgICAgICBUYXNrIHRhc2sgPSBUYXNrLlJ1bigoKSA9PiBEb1dvcmsoKSk7CiAgICAgICAgdGFzay5XYWl0KCk7CiAgICB9CgogICAgc3RhdGljIHZvaWQgRG9Xb3JrKCkKICAgIHsKICAgICAgICBDb25zb2xlLldyaXRlTGluZSgiVGFzayBpcyB3b3JraW5nLi4uIik7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using System;
using System.Threading.Tasks;

class Program
{
    static void Main()
    {
        Task task = Task.Run(() =&gt; DoWork());
        task.Wait();
    }

    static void DoWork()
    {
        Console.WriteLine(&quot;Task is working...&quot;);
    }
}</pre></div><div class='content'></div><h2>Parallel.For and Parallel.ForEach</h2>
<div class='content'><p>The <code>Parallel</code> class provides methods for parallel loops.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzOwoKY2xhc3MgUHJvZ3JhbQp7CiAgICBzdGF0aWMgdm9pZCBNYWluKCkKICAgIHsKICAgICAgICBQYXJhbGxlbC5Gb3IoMCwgMTAsIGkgPT4KICAgICAgICB7CiAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCQiUHJvY2Vzc2luZyB7aX0iKTsKICAgICAgICB9KTsKCiAgICAgICAgc3RyaW5nW10gd29yZHMgPSB7ICJhcHBsZSIsICJiYW5hbmEiLCAiY2hlcnJ5IiB9OwogICAgICAgIFBhcmFsbGVsLkZvckVhY2god29yZHMsIHdvcmQgPT4KICAgICAgICB7CiAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCQiUHJvY2Vzc2luZyB7d29yZH0iKTsKICAgICAgICB9KTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using System;
using System.Threading.Tasks;

class Program
{
    static void Main()
    {
        Parallel.For(0, 10, i =&gt;
        {
            Console.WriteLine($&quot;Processing {i}&quot;);
        });

        string[] words = { &quot;apple&quot;, &quot;banana&quot;, &quot;cherry&quot; };
        Parallel.ForEach(words, word =&gt;
        {
            Console.WriteLine($&quot;Processing {word}&quot;);
        });
    }
}</pre></div><div class='content'></div><h2>Practical Exercise</h2>
<div class='content'><p><strong>Exercise</strong>: Use <code>Parallel.For</code> to print numbers from 1 to 10.</p>
<p><strong>Solution</strong>:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNpbmcgU3lzdGVtOwp1c2luZyBTeXN0ZW0uVGhyZWFkaW5nLlRhc2tzOwoKY2xhc3MgUHJvZ3JhbQp7CiAgICBzdGF0aWMgdm9pZCBNYWluKCkKICAgIHsKICAgICAgICBQYXJhbGxlbC5Gb3IoMSwgMTEsIGkgPT4KICAgICAgICB7CiAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKGkpOwogICAgICAgIH0pOwogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>using System;
using System.Threading.Tasks;

class Program
{
    static void Main()
    {
        Parallel.For(1, 11, i =&gt;
        {
            Console.WriteLine(i);
        });
    }
}</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>In this section, we covered the basics of multithreading and parallel programming in C#. We learned how to create and manage threads, synchronize access to shared resources, and use the Task Parallel Library (TPL) for more efficient parallel processing. Understanding these concepts is crucial for developing high-performance and responsive applications. In the next module, we will delve into working with data, including file I/O, serialization, and database connectivity.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='06-04-memory-management-and-garbage-collection' title="Memory Management and Garbage Collection">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-01-windows-forms' title="Windows Forms">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
