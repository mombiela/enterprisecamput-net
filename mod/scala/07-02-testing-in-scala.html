<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing in Scala</title>

    <link rel="alternate" href="https://campusempresa.com/mod/scala/07-02-testing-in-scala" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/scala/07-02-testing-in-scala" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/scala/07-02-testing-in-scala" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-8 p-2 p-md-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-4 p-2 p-md-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/scala/07-02-testing-in-scala" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/scala/07-02-testing-in-scala" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-2'>
					<a href='07-01-sbt-scala-build-tool' title="SBT (Scala Build Tool)">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
					<a href="./"><h2 style="text-decoration:underline">Testing in Scala</h2></a>
			</div>
	<div class='col-2 text-end'>
					<a href='07-03-introduction-to-play-framework' title="Introduction to Play Framework">Next &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Testing is a crucial part of software development, ensuring that your code behaves as expected and helping to catch bugs early. In Scala, there are several popular testing frameworks, such as ScalaTest, Specs2, and MUnit. This section will focus on ScalaTest, one of the most widely used testing libraries in the Scala ecosystem.</p>
</div><h1><p>Key Concepts</p>
</h1>
<div class='content'><ol>
<li><strong>Testing Frameworks</strong>: Tools that provide a structure for writing and running tests.</li>
<li><strong>Assertions</strong>: Statements that check if a condition is true.</li>
<li><strong>Test Suites</strong>: Collections of test cases.</li>
<li><strong>Fixtures</strong>: Setups that are run before and after tests to prepare the environment.</li>
<li><strong>Mocking</strong>: Creating fake objects to simulate the behavior of real objects.</li>
</ol>
</div><h1><p>Setting Up ScalaTest</p>
</h1>
<div class='content'><p>To use ScalaTest, you need to add it as a dependency in your build tool. Here, we'll use SBT (Scala Build Tool).</p>
</div><h2><p>Adding ScalaTest to SBT</p>
</h2>
<div class='content'><p>Add the following line to your <code>build.sbt</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGlicmFyeURlcGVuZGVuY2llcyArPSAib3JnLnNjYWxhdGVzdCIgJSUgInNjYWxhdGVzdCIgJSAiMy4yLjkiICUgVGVzdA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>libraryDependencies += &quot;org.scalatest&quot; %% &quot;scalatest&quot; % &quot;3.2.9&quot; % Test</pre></div><div class='content'><p>This line tells SBT to include ScalaTest as a dependency for the test configuration.</p>
</div><h1><p>Writing Your First Test</p>
</h1>
<div class='content'><p>Let's start with a simple example to demonstrate how to write and run tests using ScalaTest.</p>
</div><h2><p>Example: Testing a Simple Function</p>
</h2>
<div class='content'><p>Suppose we have a function that adds two integers:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVmIGFkZChhOiBJbnQsIGI6IEludCk6IEludCA9IGEgKyBi"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>def add(a: Int, b: Int): Int = a + b</pre></div><div class='content'><p>We can write a test for this function as follows:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5zY2FsYXRlc3QuZmxhdHNwZWMuQW55RmxhdFNwZWMKaW1wb3J0IG9yZy5zY2FsYXRlc3QubWF0Y2hlcnMuc2hvdWxkLk1hdGNoZXJzCgpjbGFzcyBBZGRTcGVjIGV4dGVuZHMgQW55RmxhdFNwZWMgd2l0aCBNYXRjaGVycyB7CgogICJUaGUgYWRkIGZ1bmN0aW9uIiBzaG91bGQgInJldHVybiB0aGUgc3VtIG9mIHR3byBpbnRlZ2VycyIgaW4gewogICAgYWRkKDIsIDMpIHNob3VsZEVxdWFsIDUKICB9CgogIGl0IHNob3VsZCAicmV0dXJuIGEgbmVnYXRpdmUgbnVtYmVyIGlmIHRoZSBzdW0gaXMgbmVnYXRpdmUiIGluIHsKICAgIGFkZCgtMiwgLTMpIHNob3VsZEVxdWFsIC01CiAgfQoKICBpdCBzaG91bGQgInJldHVybiB6ZXJvIGlmIGJvdGggbnVtYmVycyBhcmUgemVybyIgaW4gewogICAgYWRkKDAsIDApIHNob3VsZEVxdWFsIDAKICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.scalatest.flatspec.AnyFlatSpec
import org.scalatest.matchers.should.Matchers

class AddSpec extends AnyFlatSpec with Matchers {

  &quot;The add function&quot; should &quot;return the sum of two integers&quot; in {
    add(2, 3) shouldEqual 5
  }

  it should &quot;return a negative number if the sum is negative&quot; in {
    add(-2, -3) shouldEqual -5
  }

  it should &quot;return zero if both numbers are zero&quot; in {
    add(0, 0) shouldEqual 0
  }
}</pre></div><div class='content'></div><h2><p>Explanation</p>
</h2>
<div class='content'><ul>
<li><strong>AnyFlatSpec</strong>: A style of writing tests that is flat and simple.</li>
<li><strong>Matchers</strong>: Provides a DSL (Domain-Specific Language) for writing assertions.</li>
<li><strong>shouldEqual</strong>: An assertion that checks if the left-hand side is equal to the right-hand side.</li>
<li><strong>in</strong>: Defines the body of the test case.</li>
</ul>
</div><h1><p>Running Tests</p>
</h1>
<div class='content'><p>To run your tests, use the following SBT command:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2J0IHRlc3Q="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sbt test</pre></div><div class='content'><p>This command will compile your test code and run all the test cases.</p>
</div><h1><p>Advanced Testing Techniques</p>
</h1>
<div class='content'></div><h2><p>Fixtures</p>
</h2>
<div class='content'><p>Fixtures are used to set up the environment before running tests and clean up afterward. ScalaTest provides several ways to define fixtures.</p>
<h4>Example: Using <code>BeforeAndAfter</code></h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5zY2FsYXRlc3QuQmVmb3JlQW5kQWZ0ZXIKCmNsYXNzIEV4YW1wbGVTcGVjIGV4dGVuZHMgQW55RmxhdFNwZWMgd2l0aCBNYXRjaGVycyB3aXRoIEJlZm9yZUFuZEFmdGVyIHsKCiAgdmFyIHJlc291cmNlOiBTdHJpbmcgPSBfCgogIGJlZm9yZSB7CiAgICByZXNvdXJjZSA9ICJIZWxsbywgV29ybGQhIgogIH0KCiAgYWZ0ZXIgewogICAgcmVzb3VyY2UgPSBudWxsCiAgfQoKICAiQSB0ZXN0IiBzaG91bGQgInVzZSB0aGUgcmVzb3VyY2UiIGluIHsKICAgIHJlc291cmNlIHNob3VsZEVxdWFsICJIZWxsbywgV29ybGQhIgogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.scalatest.BeforeAndAfter

class ExampleSpec extends AnyFlatSpec with Matchers with BeforeAndAfter {

  var resource: String = _

  before {
    resource = &quot;Hello, World!&quot;
  }

  after {
    resource = null
  }

  &quot;A test&quot; should &quot;use the resource&quot; in {
    resource shouldEqual &quot;Hello, World!&quot;
  }
}</pre></div><div class='content'></div><h2><p>Mocking</p>
</h2>
<div class='content'><p>Mocking is useful when you need to simulate the behavior of complex objects. ScalaTest integrates well with mocking libraries like Mockito.</p>
<h4>Example: Using Mockito</h4>
<p>Add the following dependency to your <code>build.sbt</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bGlicmFyeURlcGVuZGVuY2llcyArPSAib3JnLm1vY2tpdG8iICUlICJtb2NraXRvLXNjYWxhIiAlICIxLjE2LjQyIiAlIFRlc3Q="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>libraryDependencies += &quot;org.mockito&quot; %% &quot;mockito-scala&quot; % &quot;1.16.42&quot; % Test</pre></div><div class='content'><p>Then, you can write a test with mocked objects:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IG9yZy5zY2FsYXRlc3QuZmxhdHNwZWMuQW55RmxhdFNwZWMKaW1wb3J0IG9yZy5zY2FsYXRlc3QubWF0Y2hlcnMuc2hvdWxkLk1hdGNoZXJzCmltcG9ydCBvcmcubW9ja2l0by5Nb2NraXRvLl8KaW1wb3J0IG9yZy5zY2FsYXRlc3RwbHVzLm1vY2tpdG8uTW9ja2l0b1N1Z2FyCgpjbGFzcyBNb2NraW5nU3BlYyBleHRlbmRzIEFueUZsYXRTcGVjIHdpdGggTWF0Y2hlcnMgd2l0aCBNb2NraXRvU3VnYXIgewoKICB0cmFpdCBTZXJ2aWNlIHsKICAgIGRlZiBmZXRjaERhdGEoKTogU3RyaW5nCiAgfQoKICAiQSBzZXJ2aWNlIiBzaG91bGQgInJldHVybiBtb2NrZWQgZGF0YSIgaW4gewogICAgdmFsIG1vY2tTZXJ2aWNlID0gbW9ja1tTZXJ2aWNlXQogICAgd2hlbihtb2NrU2VydmljZS5mZXRjaERhdGEoKSkudGhlblJldHVybigiTW9ja2VkIERhdGEiKQoKICAgIG1vY2tTZXJ2aWNlLmZldGNoRGF0YSgpIHNob3VsZEVxdWFsICJNb2NrZWQgRGF0YSIKICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import org.scalatest.flatspec.AnyFlatSpec
import org.scalatest.matchers.should.Matchers
import org.mockito.Mockito._
import org.scalatestplus.mockito.MockitoSugar

class MockingSpec extends AnyFlatSpec with Matchers with MockitoSugar {

  trait Service {
    def fetchData(): String
  }

  &quot;A service&quot; should &quot;return mocked data&quot; in {
    val mockService = mock[Service]
    when(mockService.fetchData()).thenReturn(&quot;Mocked Data&quot;)

    mockService.fetchData() shouldEqual &quot;Mocked Data&quot;
  }
}</pre></div><div class='content'></div><h1><p>Practical Exercises</p>
</h1>
<div class='content'></div><h2><p>Exercise 1: Testing a Calculator</p>
</h2>
<div class='content'><p>Write tests for a <code>Calculator</code> object that has methods for addition, subtraction, multiplication, and division.</p>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b2JqZWN0IENhbGN1bGF0b3IgewogIGRlZiBhZGQoYTogSW50LCBiOiBJbnQpOiBJbnQgPSBhICsgYgogIGRlZiBzdWJ0cmFjdChhOiBJbnQsIGI6IEludCk6IEludCA9IGEgLSBiCiAgZGVmIG11bHRpcGx5KGE6IEludCwgYjogSW50KTogSW50ID0gYSAqIGIKICBkZWYgZGl2aWRlKGE6IEludCwgYjogSW50KTogSW50ID0gYSAvIGIKfQoKY2xhc3MgQ2FsY3VsYXRvclNwZWMgZXh0ZW5kcyBBbnlGbGF0U3BlYyB3aXRoIE1hdGNoZXJzIHsKCiAgIlRoZSBDYWxjdWxhdG9yIiBzaG91bGQgImFkZCB0d28gbnVtYmVycyIgaW4gewogICAgQ2FsY3VsYXRvci5hZGQoMSwgMikgc2hvdWxkRXF1YWwgMwogIH0KCiAgaXQgc2hvdWxkICJzdWJ0cmFjdCB0d28gbnVtYmVycyIgaW4gewogICAgQ2FsY3VsYXRvci5zdWJ0cmFjdCg1LCAzKSBzaG91bGRFcXVhbCAyCiAgfQoKICBpdCBzaG91bGQgIm11bHRpcGx5IHR3byBudW1iZXJzIiBpbiB7CiAgICBDYWxjdWxhdG9yLm11bHRpcGx5KDIsIDMpIHNob3VsZEVxdWFsIDYKICB9CgogIGl0IHNob3VsZCAiZGl2aWRlIHR3byBudW1iZXJzIiBpbiB7CiAgICBDYWxjdWxhdG9yLmRpdmlkZSg2LCAyKSBzaG91bGRFcXVhbCAzCiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>object Calculator {
  def add(a: Int, b: Int): Int = a + b
  def subtract(a: Int, b: Int): Int = a - b
  def multiply(a: Int, b: Int): Int = a * b
  def divide(a: Int, b: Int): Int = a / b
}

class CalculatorSpec extends AnyFlatSpec with Matchers {

  &quot;The Calculator&quot; should &quot;add two numbers&quot; in {
    Calculator.add(1, 2) shouldEqual 3
  }

  it should &quot;subtract two numbers&quot; in {
    Calculator.subtract(5, 3) shouldEqual 2
  }

  it should &quot;multiply two numbers&quot; in {
    Calculator.multiply(2, 3) shouldEqual 6
  }

  it should &quot;divide two numbers&quot; in {
    Calculator.divide(6, 2) shouldEqual 3
  }
}</pre></div><div class='content'></div><h2><p>Exercise 2: Mocking a Service</p>
</h2>
<div class='content'><p>Create a test for a <code>UserService</code> that fetches user data from a database. Use mocking to simulate the database interaction.</p>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dHJhaXQgRGF0YWJhc2UgewogIGRlZiBnZXRVc2VyKGlkOiBJbnQpOiBTdHJpbmcKfQoKY2xhc3MgVXNlclNlcnZpY2UoZGF0YWJhc2U6IERhdGFiYXNlKSB7CiAgZGVmIGdldFVzZXJOYW1lKGlkOiBJbnQpOiBTdHJpbmcgPSBkYXRhYmFzZS5nZXRVc2VyKGlkKQp9CgpjbGFzcyBVc2VyU2VydmljZVNwZWMgZXh0ZW5kcyBBbnlGbGF0U3BlYyB3aXRoIE1hdGNoZXJzIHdpdGggTW9ja2l0b1N1Z2FyIHsKCiAgIlVzZXJTZXJ2aWNlIiBzaG91bGQgInJldHVybiB1c2VyIG5hbWUgZnJvbSBkYXRhYmFzZSIgaW4gewogICAgdmFsIG1vY2tEYXRhYmFzZSA9IG1vY2tbRGF0YWJhc2VdCiAgICB3aGVuKG1vY2tEYXRhYmFzZS5nZXRVc2VyKDEpKS50aGVuUmV0dXJuKCJKb2huIERvZSIpCgogICAgdmFsIHVzZXJTZXJ2aWNlID0gbmV3IFVzZXJTZXJ2aWNlKG1vY2tEYXRhYmFzZSkKICAgIHVzZXJTZXJ2aWNlLmdldFVzZXJOYW1lKDEpIHNob3VsZEVxdWFsICJKb2huIERvZSIKICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>trait Database {
  def getUser(id: Int): String
}

class UserService(database: Database) {
  def getUserName(id: Int): String = database.getUser(id)
}

class UserServiceSpec extends AnyFlatSpec with Matchers with MockitoSugar {

  &quot;UserService&quot; should &quot;return user name from database&quot; in {
    val mockDatabase = mock[Database]
    when(mockDatabase.getUser(1)).thenReturn(&quot;John Doe&quot;)

    val userService = new UserService(mockDatabase)
    userService.getUserName(1) shouldEqual &quot;John Doe&quot;
  }
}</pre></div><div class='content'></div><h1><p>Conclusion</p>
</h1>
<div class='content'><p>In this section, we covered the basics of testing in Scala using ScalaTest. We learned how to set up ScalaTest, write and run tests, use fixtures, and mock objects. Testing is an essential skill for any developer, and mastering it will help you write more reliable and maintainable code.</p>
<p>Next, we will explore the Play Framework, a powerful tool for building web applications in Scala.</p>
</div><div class='row navigation'>
	<div class='col-2'>
					<a href='07-01-sbt-scala-build-tool' title="SBT (Scala Build Tool)">&#x25C4;Previous</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end'>
					<a href='07-03-introduction-to-play-framework' title="Introduction to Play Framework">Next &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
