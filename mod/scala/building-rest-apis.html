<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building REST APIs in Scala</title>

    <link rel="alternate" href="https://campusempresa.com/mod/scala/building-rest-apis" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/scala/building-rest-apis" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/scala/building-rest-apis" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/scala/building-rest-apis" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/scala/building-rest-apis" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='data-processing-spark'>&#x25C4;Data Processing with Spark</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Building REST APIs in Scala</a>
	</div>
	<div class='col-4 text-end'>
					<a href='scala-big-data'>Scala in Big Data &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In this section, we will explore how to build REST APIs using Scala. We will start with the basics and gradually move to more advanced topics. By the end of this topic, you will have a solid understanding of how to create, manage, and deploy REST APIs in Scala.</p>
</div><h1>Prerequisites</h1>
<div class='content'><p>Before we dive into building REST APIs, make sure you have:</p>
<ul>
<li>Basic understanding of Scala syntax and functional programming concepts.</li>
<li>Familiarity with HTTP concepts and REST principles.</li>
<li>Installed Scala and sbt (Scala Build Tool) on your machine.</li>
</ul>
</div><h1>Setting Up the Project</h1>
<div class='content'><p>To start building a REST API, we need to set up a Scala project using sbt.</p>
<ol>
<li>
<p>Create a new directory for your project:</p>
<pre><code class="language-bash">mkdir scala-rest-api
cd scala-rest-api
</code></pre>
</li>
<li>
<p>Initialize a new sbt project:</p>
<pre><code class="language-bash">sbt new scala/scala-seed.g8
</code></pre>
</li>
<li>
<p>Update <code>build.sbt</code> to include necessary dependencies:</p>
<pre><code class="language-scala">name := &quot;scala-rest-api&quot;

version := &quot;0.1&quot;

scalaVersion := &quot;2.13.6&quot;

libraryDependencies ++= Seq(
  &quot;com.typesafe.akka&quot; %% &quot;akka-http&quot; % &quot;10.2.6&quot;,
  &quot;com.typesafe.akka&quot; %% &quot;akka-stream&quot; % &quot;2.6.16&quot;,
  &quot;de.heikoseeberger&quot; %% &quot;akka-http-circe&quot; % &quot;1.37.0&quot;,
  &quot;io.circe&quot; %% &quot;circe-generic&quot; % &quot;0.14.1&quot;
)
</code></pre>
</li>
</ol>
</div><h1>Creating a Simple REST API</h1>
<div class='content'><p>Let's start by creating a simple REST API that responds with a &quot;Hello, World!&quot; message.</p>
<ol>
<li>
<p>Create a new Scala object for the server:</p>
<pre><code class="language-scala">// src/main/scala/com/example/HelloWorldServer.scala
package com.example

import akka.actor.ActorSystem
import akka.http.scaladsl.Http
import akka.http.scaladsl.server.Directives._
import akka.stream.ActorMaterializer

object HelloWorldServer {
  def main(args: Array[String]): Unit = {
    implicit val system: ActorSystem = ActorSystem(&quot;hello-world-system&quot;)
    implicit val materializer: ActorMaterializer = ActorMaterializer()
    implicit val executionContext = system.dispatcher

    val route =
      path(&quot;hello&quot;) {
        get {
          complete(&quot;Hello, World!&quot;)
        }
      }

    Http().newServerAt(&quot;localhost&quot;, 8080).bind(route)
    println(&quot;Server online at http://localhost:8080/&quot;)
  }
}
</code></pre>
</li>
<li>
<p>Run the server:</p>
<pre><code class="language-bash">sbt run
</code></pre>
</li>
<li>
<p>Test the API by navigating to <code>http://localhost:8080/hello</code> in your browser or using <code>curl</code>:</p>
<pre><code class="language-bash">curl http://localhost:8080/hello
</code></pre>
</li>
</ol>
</div><h1>Handling JSON Data</h1>
<div class='content'><p>To handle JSON data, we will use Circe, a JSON library for Scala.</p>
<ol>
<li>
<p>Update the route to handle JSON responses:</p>
<pre><code class="language-scala">// src/main/scala/com/example/JsonServer.scala
package com.example

import akka.actor.ActorSystem
import akka.http.scaladsl.Http
import akka.http.scaladsl.server.Directives._
import akka.stream.ActorMaterializer
import de.heikoseeberger.akkahttpcirce.FailFastCirceSupport._
import io.circe.generic.auto._

object JsonServer {
  case class Greeting(message: String)

  def main(args: Array[String]): Unit = {
    implicit val system: ActorSystem = ActorSystem(&quot;json-system&quot;)
    implicit val materializer: ActorMaterializer = ActorMaterializer()
    implicit val executionContext = system.dispatcher

    val route =
      path(&quot;greet&quot;) {
        get {
          complete(Greeting(&quot;Hello, World!&quot;))
        }
      }

    Http().newServerAt(&quot;localhost&quot;, 8080).bind(route)
    println(&quot;Server online at http://localhost:8080/&quot;)
  }
}
</code></pre>
</li>
<li>
<p>Test the JSON API:</p>
<pre><code class="language-bash">curl http://localhost:8080/greet
</code></pre>
</li>
</ol>
</div><h1>CRUD Operations</h1>
<div class='content'><p>Let's implement a simple CRUD (Create, Read, Update, Delete) API for managing a list of items.</p>
<ol>
<li>
<p>Define the data model and in-memory storage:</p>
<pre><code class="language-scala">// src/main/scala/com/example/ItemServer.scala
package com.example

import akka.actor.ActorSystem
import akka.http.scaladsl.Http
import akka.http.scaladsl.model.StatusCodes
import akka.http.scaladsl.server.Directives._
import akka.stream.ActorMaterializer
import de.heikoseeberger.akkahttpcirce.FailFastCirceSupport._
import io.circe.generic.auto._

import scala.collection.mutable
import scala.concurrent.Future

object ItemServer {
  case class Item(id: Int, name: String, description: String)

  var items: mutable.Map[Int, Item] = mutable.Map()

  def main(args: Array[String]): Unit = {
    implicit val system: ActorSystem = ActorSystem(&quot;item-system&quot;)
    implicit val materializer: ActorMaterializer = ActorMaterializer()
    implicit val executionContext = system.dispatcher

    val route =
      pathPrefix(&quot;items&quot;) {
        concat(
          pathEnd {
            concat(
              get {
                complete(items.values.toList)
              },
              post {
                entity(as[Item]) { item =&gt;
                  items += (item.id -&gt; item)
                  complete(StatusCodes.Created, item)
                }
              }
            )
          },
          path(IntNumber) { id =&gt;
            concat(
              get {
                items.get(id) match {
                  case Some(item) =&gt; complete(item)
                  case None =&gt; complete(StatusCodes.NotFound)
                }
              },
              put {
                entity(as[Item]) { item =&gt;
                  items.update(id, item)
                  complete(StatusCodes.OK, item)
                }
              },
              delete {
                items.remove(id) match {
                  case Some(_) =&gt; complete(StatusCodes.NoContent)
                  case None =&gt; complete(StatusCodes.NotFound)
                }
              }
            )
          }
        )
      }

    Http().newServerAt(&quot;localhost&quot;, 8080).bind(route)
    println(&quot;Server online at http://localhost:8080/&quot;)
  }
}
</code></pre>
</li>
<li>
<p>Test the CRUD API using <code>curl</code>:</p>
<pre><code class="language-bash"># Create an item
curl -X POST -H &quot;Content-Type: application/json&quot; -d '{&quot;id&quot;:1,&quot;name&quot;:&quot;Item1&quot;,&quot;description&quot;:&quot;First item&quot;}' http://localhost:8080/items

# Get all items
curl http://localhost:8080/items

# Get a specific item
curl http://localhost:8080/items/1

# Update an item
curl -X PUT -H &quot;Content-Type: application/json&quot; -d '{&quot;id&quot;:1,&quot;name&quot;:&quot;Updated Item1&quot;,&quot;description&quot;:&quot;Updated description&quot;}' http://localhost:8080/items/1

# Delete an item
curl -X DELETE http://localhost:8080/items/1
</code></pre>
</li>
</ol>
</div><h1>Advanced Topics</h1>
<h2>Authentication and Authorization</h2>
<div class='content'><p>Implementing authentication and authorization is crucial for securing your API. You can use libraries like <code>akka-http</code> with OAuth2 or JWT for this purpose.</p>
</div><h2>Error Handling</h2>
<div class='content'><p>Proper error handling ensures that your API provides meaningful error messages and status codes. Use <code>ExceptionHandler</code> and <code>RejectionHandler</code> in <code>akka-http</code> to manage errors.</p>
</div><h2>Testing</h2>
<div class='content'><p>Testing your API is essential to ensure its reliability. Use libraries like <code>akka-http-testkit</code> and <code>ScalaTest</code> to write unit and integration tests for your API.</p>
</div><h2>Deployment</h2>
<div class='content'><p>Deploying your Scala REST API can be done using various methods, such as Docker, Kubernetes, or cloud services like AWS and Heroku.</p>
</div><h1>Conclusion</h1>
<div class='content'><p>In this topic, we covered the basics of building REST APIs in Scala using <code>akka-http</code>. We started with setting up a project, creating a simple API, handling JSON data, and implementing CRUD operations. We also touched on advanced topics like authentication, error handling, testing, and deployment. With this knowledge, you are now equipped to build and deploy robust REST APIs in Scala.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='data-processing-spark'>&#x25C4;Data Processing with Spark</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Building REST APIs in Scala</a>
	</div>
	<div class='col-4 text-end'>
					<a href='scala-big-data'>Scala in Big Data &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
