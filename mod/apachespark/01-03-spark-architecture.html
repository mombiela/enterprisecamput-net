<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, follow, noarchive">
    <title>Spark Architecture</title>

    <link rel="alternate" href="https://campusempresa.com/mod/apachespark/01-03-spark-architecture" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/apachespark/01-03-spark-architecture" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/apachespark/01-03-spark-architecture" hreflang="en" />
    
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.ea63f62b9e.css" rel="stylesheet">
	 
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="/js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script>
  		var LANG = "en";
  		var CATEGORY = "frameworks";
  		var MOD_NAME = "apachespark";
  		var TEMA_NAME = "1-3";
  		var TYPE = "mod";
  		var PATH = "mod/apachespark/01-03-spark-architecture";
  		var IS_INDEX = false;
  	</script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="module" src="/js/app.86da6c742a.js"></script>
	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0611338592562725" crossorigin="anonymous"></script>  	
</head>

<body class="d-none">
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-12 col-md-6 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-12 col-md-6 p-0 text-end">
			<p class="mb-0 p-0">	<b id="lit_lang_es" class="px-2">EN</b>
	|
	<a href="https://campusempresa.com/mod/apachespark/01-03-spark-architecture" class="px-2">ES</a></b>
	|
	<a href="https://campusempresa.cat/mod/apachespark/01-03-spark-architecture" class="px-2">CA</a>
</p>
			<p class="mb-4 mt-0 mx-2  d-none d-md-block"><cite>All the knowledge within your reach</cite></p>
		</div>
	</div>
</div>
<div class="subheader container-xxl d-none d-md-block">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>
		<div class="top-bar container-fluid p-0">
	<div class="container-xxl p-0">
		<div class="row">
			<div class="col">
				<div class="d-flex justify-content-between">
					<div class="left">
						<a href="/" class="nav-link px-3" id="btnHome">
	<i class="bi bi-house-fill"></i>
	HOME
</a>

<a href="/my_modules" class="nav-link px-3 d-none" id="btnMyCourses">
	<i class="bi bi-rocket-takeoff-fill"></i>
	<i><b>My courses</b></i>
</a>
<a href="/end_modules" class="nav-link px-3 d-none" id="trophy_button">
	<i class="bi bi-trophy-fill"></i>
	Completed             
</a>

					</div>
                    <div class="ms-auto right">
                        <a id="user_button" href="#" class="nav-link px-3" data-bs-toggle="modal" data-bs-target="#loginModal">
                            <i id="user_icon" class="bi"></i>                            
                        </a>
                    </div>					
				</div>
			</div>
		</div>
	</div>
</div>

		<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
										<div class="row py-1 m-0" id="buttonsModSection">
	<div class="col-6 p-0" data-mod="apachespark">
		<a  href="#" class="text-secondary d-none" data-read-mod="apachespark" data-read-unit="1-3" style="text-decoration:none;">
			<i class="bi bi-check-circle-fill"></i> 
			Mark as read
		</a>
		<a href="#" class="text-secondary d-none" data-unread-mod="apachespark" data-unread-unit="1-3" style="text-decoration:none;">
			<i class="bi bi-x-circle-fill"></i>
			Mark as unread
		</a>
	</div>
	<div class="col-6 text-end p-0">
					<a href="./"  class="nav-link">
				<i class="bi bi-journal-text"></i>
				Course Content
			</a>
			</div>
</div>						<div id="inner_content">
				<div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='01-02-setting-up-spark-environment' title="Setting Up the Spark Environment" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='01-02-setting-up-spark-environment' title="Setting Up the Spark Environment" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
					<h2 style="text-decoration:underline">Spark Architecture</h2>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='01-04-spark-shell' title="Spark Shell" class="py-2 px-3 btn btn-primary"
				data-read-mod="apachespark" data-read-unit="1-3">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='01-04-spark-shell' title="Spark Shell" class="py-2 px-3 btn btn-primary" 
				data-read-mod="apachespark" data-read-unit="1-3">
				 &#x25BA;
			</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Apache Spark is a powerful open-source processing engine built around speed, ease of use, and sophisticated analytics. Understanding its architecture is crucial for leveraging its full potential. This section will cover the core components and the overall architecture of Apache Spark.</p>
</div><h1>Key Components of Spark Architecture</h1>
<div class='content'><ol>
<li>
<p><strong>Driver Program</strong></p>
<ul>
<li>The driver program is the main control process that creates the SparkContext, connects to the cluster, and coordinates the execution of tasks.</li>
<li>It translates the user program into tasks and schedules them to run on executors.</li>
</ul>
</li>
<li>
<p><strong>SparkContext</strong></p>
<ul>
<li>The SparkContext is the entry point for any Spark application. It initializes the Spark application and allows the driver to access the cluster.</li>
<li>It is responsible for setting up internal services and establishing a connection to the cluster manager.</li>
</ul>
</li>
<li>
<p><strong>Cluster Manager</strong></p>
<ul>
<li>The cluster manager allocates resources across the cluster. Spark supports several cluster managers:
<ul>
<li><strong>Standalone Cluster Manager</strong>: A simple cluster manager included with Spark.</li>
<li><strong>Apache Mesos</strong>: A general cluster manager that can also run Hadoop MapReduce and other applications.</li>
<li><strong>Hadoop YARN</strong>: The resource manager in Hadoop 2.</li>
<li><strong>Kubernetes</strong>: An open-source system for automating deployment, scaling, and management of containerized applications.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Worker Nodes</strong></p>
<ul>
<li>Worker nodes are the nodes in the cluster that execute tasks assigned by the driver.</li>
<li>Each worker node runs an executor, which is responsible for running individual tasks and returning results to the driver.</li>
</ul>
</li>
<li>
<p><strong>Executors</strong></p>
<ul>
<li>Executors are distributed agents responsible for executing tasks. Each Spark application has its own executors.</li>
<li>They run on worker nodes and perform data processing and storage.</li>
<li>Executors also provide in-memory storage for RDDs that are cached by user programs through SparkContext.</li>
</ul>
</li>
<li>
<p><strong>Tasks</strong></p>
<ul>
<li>Tasks are the smallest unit of work in Spark. They are the individual units of work sent to executors by the driver.</li>
<li>Each task runs on a partition of the data and performs operations like map, filter, and reduce.</li>
</ul>
</li>
</ol>
</div><h1>Spark Execution Flow</h1>
<div class='content'><ol>
<li>
<p><strong>Job Submission</strong></p>
<ul>
<li>The driver program submits a job to the SparkContext.</li>
<li>The job is divided into stages based on wide transformations (e.g., shuffle operations).</li>
</ul>
</li>
<li>
<p><strong>Task Scheduling</strong></p>
<ul>
<li>The SparkContext communicates with the cluster manager to allocate resources.</li>
<li>The job is divided into tasks, which are distributed to executors on worker nodes.</li>
</ul>
</li>
<li>
<p><strong>Task Execution</strong></p>
<ul>
<li>Executors on worker nodes execute the tasks.</li>
<li>Tasks process data and perform transformations and actions.</li>
</ul>
</li>
<li>
<p><strong>Result Collection</strong></p>
<ul>
<li>The results of the tasks are sent back to the driver.</li>
<li>The driver program collects and processes the results.</li>
</ul>
</li>
</ol>
</div><h1>Example: Word Count Program</h1>
<div class='content'><p>To illustrate the Spark architecture, let's look at a simple Word Count program.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnJvbSBweXNwYXJrIGltcG9ydCBTcGFya0NvbnRleHQKCiMgSW5pdGlhbGl6ZSBTcGFya0NvbnRleHQKc2MgPSBTcGFya0NvbnRleHQoImxvY2FsIiwgIldvcmRDb3VudCIpCgojIFJlYWQgaW5wdXQgZmlsZQp0ZXh0X2ZpbGUgPSBzYy50ZXh0RmlsZSgiaGRmczovL3BhdGgvdG8vaW5wdXQudHh0IikKCiMgUGVyZm9ybSB3b3JkIGNvdW50CmNvdW50cyA9IHRleHRfZmlsZS5mbGF0TWFwKGxhbWJkYSBsaW5lOiBsaW5lLnNwbGl0KCIgIikpIFwKICAgICAgICAgICAgICAgICAgLm1hcChsYW1iZGEgd29yZDogKHdvcmQsIDEpKSBcCiAgICAgICAgICAgICAgICAgIC5yZWR1Y2VCeUtleShsYW1iZGEgYSwgYjogYSArIGIpCgojIFNhdmUgdGhlIHJlc3VsdApjb3VudHMuc2F2ZUFzVGV4dEZpbGUoImhkZnM6Ly9wYXRoL3RvL291dHB1dCIp"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>from pyspark import SparkContext

# Initialize SparkContext
sc = SparkContext(&quot;local&quot;, &quot;WordCount&quot;)

# Read input file
text_file = sc.textFile(&quot;hdfs://path/to/input.txt&quot;)

# Perform word count
counts = text_file.flatMap(lambda line: line.split(&quot; &quot;)) \
                  .map(lambda word: (word, 1)) \
                  .reduceByKey(lambda a, b: a + b)

# Save the result
counts.saveAsTextFile(&quot;hdfs://path/to/output&quot;)</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ol>
<li>
<p><strong>Initialization</strong>:</p>
<ul>
<li><code>SparkContext</code> is initialized, which sets up the driver program and connects to the cluster manager.</li>
</ul>
</li>
<li>
<p><strong>Data Loading</strong>:</p>
<ul>
<li>The input file is read into an RDD (<code>text_file</code>).</li>
</ul>
</li>
<li>
<p><strong>Transformations</strong>:</p>
<ul>
<li><code>flatMap</code> splits each line into words.</li>
<li><code>map</code> transforms each word into a key-value pair (word, 1).</li>
<li><code>reduceByKey</code> aggregates the counts for each word.</li>
</ul>
</li>
<li>
<p><strong>Action</strong>:</p>
<ul>
<li><code>saveAsTextFile</code> triggers the execution of the transformations and saves the result to the specified path.</li>
</ul>
</li>
</ol>
</div><h1>Summary</h1>
<div class='content'><p>Understanding the architecture of Apache Spark is essential for developing efficient and scalable applications. The key components include the driver program, SparkContext, cluster manager, worker nodes, executors, and tasks. The execution flow involves job submission, task scheduling, task execution, and result collection. By grasping these concepts, you can better optimize and troubleshoot your Spark applications.</p>
<p>In the next section, we will explore the Spark Shell, which provides an interactive environment for running Spark commands and testing code snippets.</p>
</div><div class='row navigation'>
	<div class='col-2 d-none d-md-block'>
					<a href='01-02-setting-up-spark-environment' title="Setting Up the Spark Environment" class="py-2 px-3 btn btn-primary">
				&#x25C4; Previous 
			</a>
			</div>
	<div class='col-2 d-md-none'>
					<a href='01-02-setting-up-spark-environment' title="Setting Up the Spark Environment" class="py-2 px-3 btn btn-primary">
				&#x25C4;
			</a>
			</div>
	<div class='col-8 text-center'>
			</div>
	<div class='col-2 text-end d-none d-md-block'>
					<a href='01-04-spark-shell' title="Spark Shell" class="py-2 px-3 btn btn-primary"
				data-read-mod="apachespark" data-read-unit="1-3">
				Next &#x25BA;
			</a>
			</div>
	<div class='col-2 text-end d-md-none '>
					<a href='01-04-spark-shell' title="Spark Shell" class="py-2 px-3 btn btn-primary" 
				data-read-mod="apachespark" data-read-unit="1-3">
				 &#x25BA;
			</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
						
	<div class="container mt-2 d-none d-md-block index">
		<h1>Apache Spark Course</h1>
<h2>Module 1: Introduction to Apache Spark</h2>
<ul>
<li><a href="01-01-what-is-apache-spark">What is Apache Spark?</a></li>
<li><a href="01-02-setting-up-spark-environment">Setting Up the Spark Environment</a></li>
<li><a href="01-03-spark-architecture">Spark Architecture</a></li>
<li><a href="01-04-spark-shell">Spark Shell</a></li>
</ul>
<h2>Module 2: Spark Core Concepts</h2>
<ul>
<li><a href="02-01-rdds">RDDs (Resilient Distributed Datasets)</a></li>
<li><a href="02-02-transformations-actions">Transformations and Actions</a></li>
<li><a href="02-03-spark-dataframes">Spark DataFrames</a></li>
<li><a href="02-04-spark-sql">Spark SQL</a></li>
</ul>
<h2>Module 3: Data Processing with Spark</h2>
<ul>
<li><a href="03-01-loading-saving-data">Loading and Saving Data</a></li>
<li><a href="03-02-dataframe-operations">DataFrame Operations</a></li>
<li><a href="03-03-working-with-datasets">Working with Datasets</a></li>
<li><a href="03-04-handling-missing-data">Handling Missing Data</a></li>
</ul>
<h2>Module 4: Advanced Spark Programming</h2>
<ul>
<li><a href="04-01-spark-streaming">Spark Streaming</a></li>
<li><a href="04-02-structured-streaming">Structured Streaming</a></li>
<li><a href="04-03-spark-mllib">Spark MLlib</a></li>
<li><a href="04-04-graphx">GraphX</a></li>
</ul>
<h2>Module 5: Performance Tuning and Optimization</h2>
<ul>
<li><a href="05-01-understanding-spark-jobs">Understanding Spark Jobs</a></li>
<li><a href="05-02-caching-persistence">Caching and Persistence</a></li>
<li><a href="05-03-memory-management">Memory Management</a></li>
<li><a href="05-04-optimizing-spark-applications">Optimizing Spark Applications</a></li>
</ul>
<h2>Module 6: Spark in the Cloud</h2>
<ul>
<li><a href="06-01-running-spark-aws">Running Spark on AWS</a></li>
<li><a href="06-02-running-spark-azure">Running Spark on Azure</a></li>
<li><a href="06-03-running-spark-google-cloud">Running Spark on Google Cloud</a></li>
<li><a href="06-04-spark-kubernetes">Spark with Kubernetes</a></li>
</ul>
<h2>Module 7: Real-World Applications and Case Studies</h2>
<ul>
<li><a href="07-01-real-time-data-processing">Real-Time Data Processing</a></li>
<li><a href="07-02-big-data-analytics">Big Data Analytics</a></li>
<li><a href="07-03-machine-learning-pipelines">Machine Learning Pipelines</a></li>
<li><a href="07-04-case-studies">Case Studies</a></li>
</ul>
<h2>Module 8: Capstone Project</h2>
<ul>
<li><a href="08-01-project-overview">Project Overview</a></li>
<li><a href="08-02-project-setup">Project Setup</a></li>
<li><a href="08-03-implementation">Implementation</a></li>
<li><a href="08-04-presentation-review">Presentation and Review</a></li>
</ul>

	</div>










		</div>
	</div>
</div>		
<div class="container-xxl d-block d-md-none">
	<div class="row">
		<div class="col-12 p-2 p-md-0 m-0 text-end">
			<a href="/objective">The Project</a> | 
<a href="/about">About Us</a> | 
<a href="/contribute">Contribute</a> | 
<a href="/donate">Donations</a> | 
<a href="/licence">License</a>
		</div>
	</div>
</div>

<div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	We use cookies to improve your user experience and offer content tailored to your interests.
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

		<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">User not authenticated</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
            	<p id="loginModalEmail"></p>
            	<div id="modal-body-main"></div>
            </div>
        </div>
    </div>
</div>	</div>    
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
