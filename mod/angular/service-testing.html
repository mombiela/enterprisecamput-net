<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Testing in Angular</title>

    <link rel="alternate" href="https://campusempresa.com/mod/angular/service-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/angular/service-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/angular/service-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body >
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo-header_enterprise.png"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/angular/service-testing" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/angular/service-testing" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content">
								<div class='row navigation'>
	<div class='col-4'>
					<a href='component-testing'>&#x25C4;Component Testing</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Service Testing in Angular</a>
	</div>
	<div class='col-4 text-end'>
					<a href='end-to-end-testing'>End-to-End Testing &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Service Testing</h1>
<div class='content'><p>Service testing is a crucial part of Angular application development. It ensures that the services, which often contain business logic and data access code, work correctly. This section will guide you through the basics of service testing, from setting up your testing environment to writing and running tests.</p>
</div><h1>Setting Up the Testing Environment</h1>
<div class='content'><p>Before we start writing tests, we need to set up our testing environment.</p>
<ul>
<li><strong>Install Angular CLI</strong>: Ensure you have Angular CLI installed.
<pre><code class="language-bash">npm install -g @angular/cli
</code></pre>
</li>
<li><strong>Create a new Angular project</strong>: If you don't have an existing project, create one.
<pre><code class="language-bash">ng new my-angular-app
cd my-angular-app
</code></pre>
</li>
<li><strong>Install necessary testing libraries</strong>: Angular comes with Jasmine and Karma by default, but you can install additional libraries if needed.
<pre><code class="language-bash">npm install --save-dev @angular/core @angular/common @angular/compiler @angular/platform-browser @angular/platform-browser-dynamic @angular/router @angular/forms
</code></pre>
</li>
</ul>
</div><h1>Writing Your First Service Test</h1>
<div class='content'><p>Let's start by writing a simple test for an Angular service.</p>
</div><h2>Creating a Service</h2>
<div class='content'><p>First, create a service using Angular CLI.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmcgZ2VuZXJhdGUgc2VydmljZSBteS1zZXJ2aWNl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ng generate service my-service</pre></div><div class='content'><p>This command will generate a service file <code>my-service.service.ts</code> and a corresponding test file <code>my-service.service.spec.ts</code>.</p>
</div><h2>Understanding the Service Code</h2>
<div class='content'><p>Here's a simple example of a service that provides a greeting message:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gbXktc2VydmljZS5zZXJ2aWNlLnRzCmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKCkBJbmplY3RhYmxlKHsKICBwcm92aWRlZEluOiAncm9vdCcKfSkKZXhwb3J0IGNsYXNzIE15U2VydmljZSB7CiAgY29uc3RydWN0b3IoKSB7IH0KCiAgZ2V0R3JlZXRpbmcoKTogc3RyaW5nIHsKICAgIHJldHVybiAnSGVsbG8sIFdvcmxkISc7CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// my-service.service.ts
import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class MyService {
  constructor() { }

  getGreeting(): string {
    return 'Hello, World!';
  }
}</pre></div><div class='content'></div><h2>Writing the Test</h2>
<div class='content'><p>Now, let's write a test for the <code>getGreeting</code> method.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gbXktc2VydmljZS5zZXJ2aWNlLnNwZWMudHMKaW1wb3J0IHsgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CmltcG9ydCB7IE15U2VydmljZSB9IGZyb20gJy4vbXktc2VydmljZS5zZXJ2aWNlJzsKCmRlc2NyaWJlKCdNeVNlcnZpY2UnLCAoKSA9PiB7CiAgbGV0IHNlcnZpY2U6IE15U2VydmljZTsKCiAgYmVmb3JlRWFjaCgoKSA9PiB7CiAgICBUZXN0QmVkLmNvbmZpZ3VyZVRlc3RpbmdNb2R1bGUoe30pOwogICAgc2VydmljZSA9IFRlc3RCZWQuaW5qZWN0KE15U2VydmljZSk7CiAgfSk7CgogIGl0KCdzaG91bGQgYmUgY3JlYXRlZCcsICgpID0+IHsKICAgIGV4cGVjdChzZXJ2aWNlKS50b0JlVHJ1dGh5KCk7CiAgfSk7CgogIGl0KCdzaG91bGQgcmV0dXJuIGdyZWV0aW5nIG1lc3NhZ2UnLCAoKSA9PiB7CiAgICBleHBlY3Qoc2VydmljZS5nZXRHcmVldGluZygpKS50b0JlKCdIZWxsbywgV29ybGQhJyk7CiAgfSk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// my-service.service.spec.ts
import { TestBed } from '@angular/core/testing';
import { MyService } from './my-service.service';

describe('MyService', () =&gt; {
  let service: MyService;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({});
    service = TestBed.inject(MyService);
  });

  it('should be created', () =&gt; {
    expect(service).toBeTruthy();
  });

  it('should return greeting message', () =&gt; {
    expect(service.getGreeting()).toBe('Hello, World!');
  });
});</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>TestBed</strong>: Angular's primary API for configuring and initializing the environment for unit testing.</li>
<li><strong>beforeEach</strong>: A Jasmine function that runs before each test. It sets up the testing module and injects the service.</li>
<li><strong>it</strong>: Defines a single test case. The first test checks if the service is created, and the second test checks if the <code>getGreeting</code> method returns the correct message.</li>
</ul>
</div><h1>Advanced Service Testing</h1>
<div class='content'><p>As you advance, you might need to test services that depend on other services or external resources.</p>
</div><h2>Mocking Dependencies</h2>
<div class='content'><p>When a service depends on another service, you can mock the dependencies to isolate the unit under test.</p>
<h4>Example Service with Dependency</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gZGF0YS5zZXJ2aWNlLnRzCmltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJzsKCkBJbmplY3RhYmxlKHsKICBwcm92aWRlZEluOiAncm9vdCcKfSkKZXhwb3J0IGNsYXNzIERhdGFTZXJ2aWNlIHsKICBnZXREYXRhKCk6IHN0cmluZyB7CiAgICByZXR1cm4gJ1JlYWwgRGF0YSc7CiAgfQp9CgovLyBkZXBlbmRlbnQuc2VydmljZS50cwppbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7CmltcG9ydCB7IERhdGFTZXJ2aWNlIH0gZnJvbSAnLi9kYXRhLnNlcnZpY2UnOwoKQEluamVjdGFibGUoewogIHByb3ZpZGVkSW46ICdyb290Jwp9KQpleHBvcnQgY2xhc3MgRGVwZW5kZW50U2VydmljZSB7CiAgY29uc3RydWN0b3IocHJpdmF0ZSBkYXRhU2VydmljZTogRGF0YVNlcnZpY2UpIHsgfQoKICBnZXRQcm9jZXNzZWREYXRhKCk6IHN0cmluZyB7CiAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5nZXREYXRhKCkgKyAnIFByb2Nlc3NlZCc7CiAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// data.service.ts
import { Injectable } from '@angular/core';

@Injectable({
  providedIn: 'root'
})
export class DataService {
  getData(): string {
    return 'Real Data';
  }
}

// dependent.service.ts
import { Injectable } from '@angular/core';
import { DataService } from './data.service';

@Injectable({
  providedIn: 'root'
})
export class DependentService {
  constructor(private dataService: DataService) { }

  getProcessedData(): string {
    return this.dataService.getData() + ' Processed';
  }
}</pre></div><div class='content'><h4>Writing Tests with Mocks</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gZGVwZW5kZW50LnNlcnZpY2Uuc3BlYy50cwppbXBvcnQgeyBUZXN0QmVkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZS90ZXN0aW5nJzsKaW1wb3J0IHsgRGVwZW5kZW50U2VydmljZSB9IGZyb20gJy4vZGVwZW5kZW50LnNlcnZpY2UnOwppbXBvcnQgeyBEYXRhU2VydmljZSB9IGZyb20gJy4vZGF0YS5zZXJ2aWNlJzsKCmNsYXNzIE1vY2tEYXRhU2VydmljZSB7CiAgZ2V0RGF0YSgpIHsKICAgIHJldHVybiAnTW9jayBEYXRhJzsKICB9Cn0KCmRlc2NyaWJlKCdEZXBlbmRlbnRTZXJ2aWNlJywgKCkgPT4gewogIGxldCBzZXJ2aWNlOiBEZXBlbmRlbnRTZXJ2aWNlOwogIGxldCBkYXRhU2VydmljZTogRGF0YVNlcnZpY2U7CgogIGJlZm9yZUVhY2goKCkgPT4gewogICAgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHsKICAgICAgcHJvdmlkZXJzOiBbCiAgICAgICAgRGVwZW5kZW50U2VydmljZSwKICAgICAgICB7IHByb3ZpZGU6IERhdGFTZXJ2aWNlLCB1c2VDbGFzczogTW9ja0RhdGFTZXJ2aWNlIH0KICAgICAgXQogICAgfSk7CiAgICBzZXJ2aWNlID0gVGVzdEJlZC5pbmplY3QoRGVwZW5kZW50U2VydmljZSk7CiAgICBkYXRhU2VydmljZSA9IFRlc3RCZWQuaW5qZWN0KERhdGFTZXJ2aWNlKTsKICB9KTsKCiAgaXQoJ3Nob3VsZCBiZSBjcmVhdGVkJywgKCkgPT4gewogICAgZXhwZWN0KHNlcnZpY2UpLnRvQmVUcnV0aHkoKTsKICB9KTsKCiAgaXQoJ3Nob3VsZCByZXR1cm4gcHJvY2Vzc2VkIGRhdGEnLCAoKSA9PiB7CiAgICBleHBlY3Qoc2VydmljZS5nZXRQcm9jZXNzZWREYXRhKCkpLnRvQmUoJ01vY2sgRGF0YSBQcm9jZXNzZWQnKTsKICB9KTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// dependent.service.spec.ts
import { TestBed } from '@angular/core/testing';
import { DependentService } from './dependent.service';
import { DataService } from './data.service';

class MockDataService {
  getData() {
    return 'Mock Data';
  }
}

describe('DependentService', () =&gt; {
  let service: DependentService;
  let dataService: DataService;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({
      providers: [
        DependentService,
        { provide: DataService, useClass: MockDataService }
      ]
    });
    service = TestBed.inject(DependentService);
    dataService = TestBed.inject(DataService);
  });

  it('should be created', () =&gt; {
    expect(service).toBeTruthy();
  });

  it('should return processed data', () =&gt; {
    expect(service.getProcessedData()).toBe('Mock Data Processed');
  });
});</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>MockDataService</strong>: A mock class that simulates the behavior of <code>DataService</code>.</li>
<li><strong>providers</strong>: Configures the testing module to use <code>MockDataService</code> instead of the real <code>DataService</code>.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Service testing in Angular is essential for ensuring the reliability and correctness of your application's business logic. By setting up a proper testing environment, writing basic tests, and using advanced techniques like mocking dependencies, you can create robust and maintainable tests for your Angular services. Remember to run your tests frequently and integrate them into your development workflow to catch issues early and improve code quality.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='component-testing'>&#x25C4;Component Testing</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Service Testing in Angular</a>
	</div>
	<div class='col-4 text-end'>
					<a href='end-to-end-testing'>End-to-End Testing &#x25BA;</a>
			</div>
</div>

			</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
