<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit Testing in Angular</title>

    <link rel="alternate" href="https://campusempresa.com/mod/angular/unit-testing" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mod/angular/unit-testing" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mod/angular/unit-testing" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mod/angular/unit-testing" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mod/angular/unit-testing" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='advanced-ngrx'>&#x25C4;Advanced NgRx</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Unit Testing in Angular</a>
	</div>
	<div class='col-4 text-end'>
					<a href='component-testing'>Component Testing &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Unit Testing</h1>
<div class='content'><p>Unit testing is a software testing method where individual units or components of a software are tested in isolation from the rest of the application. In Angular, unit tests are typically written using Jasmine and executed with Karma.</p>
<ul>
<li><strong>Jasmine</strong>: A behavior-driven development framework for testing JavaScript code.</li>
<li><strong>Karma</strong>: A test runner that allows you to execute your tests in various browsers.</li>
</ul>
</div><h1>Setting Up Unit Testing in Angular</h1>
<div class='content'><p>Angular projects come pre-configured with Jasmine and Karma. When you create a new Angular project using the Angular CLI, the necessary configuration files and dependencies are automatically included.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmcgbmV3IG15LWFuZ3VsYXItYXBwCmNkIG15LWFuZ3VsYXItYXBwCm5nIHRlc3Q="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ng new my-angular-app
cd my-angular-app
ng test</pre></div><div class='content'></div><h1>Writing Your First Unit Test</h1>
<div class='content'><p>Let's start by writing a simple unit test for an Angular service.</p>
</div><h2>Creating a Service</h2>
<div class='content'><p>First, create a new service using the Angular CLI:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmcgZ2VuZXJhdGUgc2VydmljZSBteS1zZXJ2aWNl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ng generate service my-service</pre></div><div class='content'><p>This will generate a service file (<code>my-service.service.ts</code>) and a corresponding spec file (<code>my-service.service.spec.ts</code>).</p>
</div><h2>Writing a Test for the Service</h2>
<div class='content'><p>Open the <code>my-service.service.spec.ts</code> file and write a simple test:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CmltcG9ydCB7IE15U2VydmljZSB9IGZyb20gJy4vbXktc2VydmljZS5zZXJ2aWNlJzsKCmRlc2NyaWJlKCdNeVNlcnZpY2UnLCAoKSA9PiB7CiAgbGV0IHNlcnZpY2U6IE15U2VydmljZTsKCiAgYmVmb3JlRWFjaCgoKSA9PiB7CiAgICBUZXN0QmVkLmNvbmZpZ3VyZVRlc3RpbmdNb2R1bGUoe30pOwogICAgc2VydmljZSA9IFRlc3RCZWQuaW5qZWN0KE15U2VydmljZSk7CiAgfSk7CgogIGl0KCdzaG91bGQgYmUgY3JlYXRlZCcsICgpID0+IHsKICAgIGV4cGVjdChzZXJ2aWNlKS50b0JlVHJ1dGh5KCk7CiAgfSk7CgogIGl0KCdzaG91bGQgcmV0dXJuIGNvcnJlY3QgdmFsdWUgZnJvbSBnZXRWYWx1ZScsICgpID0+IHsKICAgIGV4cGVjdChzZXJ2aWNlLmdldFZhbHVlKCkpLnRvQmUoJ3NvbWUgdmFsdWUnKTsKICB9KTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { TestBed } from '@angular/core/testing';
import { MyService } from './my-service.service';

describe('MyService', () =&gt; {
  let service: MyService;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({});
    service = TestBed.inject(MyService);
  });

  it('should be created', () =&gt; {
    expect(service).toBeTruthy();
  });

  it('should return correct value from getValue', () =&gt; {
    expect(service.getValue()).toBe('some value');
  });
});</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>TestBed</strong>: Angular's primary API for configuring and initializing the environment for unit tests.</li>
<li><strong>describe</strong>: A Jasmine function for grouping related tests.</li>
<li><strong>it</strong>: A Jasmine function for defining individual test cases.</li>
<li><strong>expect</strong>: A Jasmine function for making assertions.</li>
</ul>
</div><h1>Testing Components</h1>
<div class='content'><p>Unit testing components involves testing the component's class and template.</p>
</div><h2>Creating a Component</h2>
<div class='content'><p>Generate a new component using the Angular CLI:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bmcgZ2VuZXJhdGUgY29tcG9uZW50IG15LWNvbXBvbmVudA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ng generate component my-component</pre></div><div class='content'></div><h2>Writing a Test for the Component</h2>
<div class='content'><p>Open the <code>my-component.component.spec.ts</code> file and write a test:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgQ29tcG9uZW50Rml4dHVyZSwgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CmltcG9ydCB7IE15Q29tcG9uZW50IH0gZnJvbSAnLi9teS1jb21wb25lbnQuY29tcG9uZW50JzsKCmRlc2NyaWJlKCdNeUNvbXBvbmVudCcsICgpID0+IHsKICBsZXQgY29tcG9uZW50OiBNeUNvbXBvbmVudDsKICBsZXQgZml4dHVyZTogQ29tcG9uZW50Rml4dHVyZTxNeUNvbXBvbmVudD47CgogIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4gewogICAgYXdhaXQgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHsKICAgICAgZGVjbGFyYXRpb25zOiBbIE15Q29tcG9uZW50IF0KICAgIH0pCiAgICAuY29tcGlsZUNvbXBvbmVudHMoKTsKICB9KTsKCiAgYmVmb3JlRWFjaCgoKSA9PiB7CiAgICBmaXh0dXJlID0gVGVzdEJlZC5jcmVhdGVDb21wb25lbnQoTXlDb21wb25lbnQpOwogICAgY29tcG9uZW50ID0gZml4dHVyZS5jb21wb25lbnRJbnN0YW5jZTsKICAgIGZpeHR1cmUuZGV0ZWN0Q2hhbmdlcygpOwogIH0pOwoKICBpdCgnc2hvdWxkIGNyZWF0ZScsICgpID0+IHsKICAgIGV4cGVjdChjb21wb25lbnQpLnRvQmVUcnV0aHkoKTsKICB9KTsKCiAgaXQoJ3Nob3VsZCByZW5kZXIgdGl0bGUnLCAoKSA9PiB7CiAgICBjb25zdCBjb21waWxlZCA9IGZpeHR1cmUubmF0aXZlRWxlbWVudDsKICAgIGV4cGVjdChjb21waWxlZC5xdWVyeVNlbGVjdG9yKCdoMScpLnRleHRDb250ZW50KS50b0NvbnRhaW4oJ015IENvbXBvbmVudCBUaXRsZScpOwogIH0pOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { ComponentFixture, TestBed } from '@angular/core/testing';
import { MyComponent } from './my-component.component';

describe('MyComponent', () =&gt; {
  let component: MyComponent;
  let fixture: ComponentFixture&lt;MyComponent&gt;;

  beforeEach(async () =&gt; {
    await TestBed.configureTestingModule({
      declarations: [ MyComponent ]
    })
    .compileComponents();
  });

  beforeEach(() =&gt; {
    fixture = TestBed.createComponent(MyComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () =&gt; {
    expect(component).toBeTruthy();
  });

  it('should render title', () =&gt; {
    const compiled = fixture.nativeElement;
    expect(compiled.querySelector('h1').textContent).toContain('My Component Title');
  });
});</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>ComponentFixture</strong>: A wrapper around a component and its template.</li>
<li><strong>compileComponents</strong>: Compiles the component and its template.</li>
<li><strong>fixture.detectChanges</strong>: Triggers change detection and updates the view.</li>
</ul>
</div><h1>Advanced Testing Techniques</h1>
<h2>Mocking Dependencies</h2>
<div class='content'><p>In real-world applications, components and services often depend on other services. Mocking these dependencies is crucial for isolating the unit under test.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgVGVzdEJlZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUvdGVzdGluZyc7CmltcG9ydCB7IE15U2VydmljZSB9IGZyb20gJy4vbXktc2VydmljZS5zZXJ2aWNlJzsKaW1wb3J0IHsgTXlDb21wb25lbnQgfSBmcm9tICcuL215LWNvbXBvbmVudC5jb21wb25lbnQnOwoKY2xhc3MgTW9ja015U2VydmljZSB7CiAgZ2V0VmFsdWUoKSB7CiAgICByZXR1cm4gJ21vY2sgdmFsdWUnOwogIH0KfQoKZGVzY3JpYmUoJ015Q29tcG9uZW50JywgKCkgPT4gewogIGxldCBjb21wb25lbnQ6IE15Q29tcG9uZW50OwogIGxldCBzZXJ2aWNlOiBNeVNlcnZpY2U7CgogIGJlZm9yZUVhY2goKCkgPT4gewogICAgVGVzdEJlZC5jb25maWd1cmVUZXN0aW5nTW9kdWxlKHsKICAgICAgZGVjbGFyYXRpb25zOiBbIE15Q29tcG9uZW50IF0sCiAgICAgIHByb3ZpZGVyczogWwogICAgICAgIHsgcHJvdmlkZTogTXlTZXJ2aWNlLCB1c2VDbGFzczogTW9ja015U2VydmljZSB9CiAgICAgIF0KICAgIH0pOwoKICAgIHNlcnZpY2UgPSBUZXN0QmVkLmluamVjdChNeVNlcnZpY2UpOwogICAgY29tcG9uZW50ID0gVGVzdEJlZC5jcmVhdGVDb21wb25lbnQoTXlDb21wb25lbnQpLmNvbXBvbmVudEluc3RhbmNlOwogIH0pOwoKICBpdCgnc2hvdWxkIHVzZSB0aGUgbW9jayBzZXJ2aWNlJywgKCkgPT4gewogICAgZXhwZWN0KHNlcnZpY2UuZ2V0VmFsdWUoKSkudG9CZSgnbW9jayB2YWx1ZScpOwogIH0pOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { TestBed } from '@angular/core/testing';
import { MyService } from './my-service.service';
import { MyComponent } from './my-component.component';

class MockMyService {
  getValue() {
    return 'mock value';
  }
}

describe('MyComponent', () =&gt; {
  let component: MyComponent;
  let service: MyService;

  beforeEach(() =&gt; {
    TestBed.configureTestingModule({
      declarations: [ MyComponent ],
      providers: [
        { provide: MyService, useClass: MockMyService }
      ]
    });

    service = TestBed.inject(MyService);
    component = TestBed.createComponent(MyComponent).componentInstance;
  });

  it('should use the mock service', () =&gt; {
    expect(service.getValue()).toBe('mock value');
  });
});</pre></div><div class='content'></div><h2>Testing Asynchronous Code</h2>
<div class='content'><p>Testing asynchronous code can be done using <code>async</code> and <code>fakeAsync</code> utilities provided by Angular.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHsgZmFrZUFzeW5jLCB0aWNrIH0gZnJvbSAnQGFuZ3VsYXIvY29yZS90ZXN0aW5nJzsKCml0KCdzaG91bGQgaGFuZGxlIGFzeW5jIGNvZGUnLCBmYWtlQXN5bmMoKCkgPT4gewogIGxldCBmbGFnID0gZmFsc2U7CiAgc2V0VGltZW91dCgoKSA9PiB7CiAgICBmbGFnID0gdHJ1ZTsKICB9LCAxMDAwKTsKCiAgdGljaygxMDAwKTsKICBleHBlY3QoZmxhZykudG9CZSh0cnVlKTsKfSkpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import { fakeAsync, tick } from '@angular/core/testing';

it('should handle async code', fakeAsync(() =&gt; {
  let flag = false;
  setTimeout(() =&gt; {
    flag = true;
  }, 1000);

  tick(1000);
  expect(flag).toBe(true);
}));</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Unit testing is an essential part of developing robust Angular applications. By writing tests for services and components, and using advanced techniques like mocking and testing asynchronous code, you can ensure that your application behaves as expected. Start with simple tests and gradually move to more complex scenarios as you become comfortable with the testing tools and methodologies.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='advanced-ngrx'>&#x25C4;Advanced NgRx</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Unit Testing in Angular</a>
	</div>
	<div class='col-4 text-end'>
					<a href='component-testing'>Component Testing &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
