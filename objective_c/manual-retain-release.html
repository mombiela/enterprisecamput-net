<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual Retain-Release</title>

    <link rel="alternate" href="https://campusempresa.com/objective_c/manual-retain-release" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/objective_c/manual-retain-release" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/objective_c/manual-retain-release" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/objective_c/manual-retain-release" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/objective_c/manual-retain-release" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='automatic-reference-counting-arc'>&#x25C4;Automatic Reference Counting (ARC)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Manual Retain-Release</a>
	</div>
	<div class='col-4 text-end'>
					<a href='strong-and-weak-references'>Strong and Weak References &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Manual Retain-Release is a memory management technique used in Objective-C before the introduction of Automatic Reference Counting (ARC). Understanding this technique is crucial for maintaining legacy code and for a deeper comprehension of how memory management works in Objective-C.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Reference Counting</strong>: Objective-C uses a reference counting system to manage the lifecycle of objects.</li>
<li><strong>Retain</strong>: Increases the reference count of an object.</li>
<li><strong>Release</strong>: Decreases the reference count of an object.</li>
<li><strong>Autorelease</strong>: Adds the object to the autorelease pool, which will send a release message to the object at a later time.</li>
</ul>
</div><h1>Reference Counting</h1>
<div class='content'><p>Every object in Objective-C has a reference count, which keeps track of how many references are pointing to it. When the reference count drops to zero, the object is deallocated.</p>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TlNPYmplY3QgKm9iaiA9IFtbTlNPYmplY3QgYWxsb2NdIGluaXRdOyAvLyBSZWZlcmVuY2UgY291bnQgaXMgMQpbb2JqIHJldGFpbl07IC8vIFJlZmVyZW5jZSBjb3VudCBpcyAyCltvYmogcmVsZWFzZV07IC8vIFJlZmVyZW5jZSBjb3VudCBpcyAxCltvYmogcmVsZWFzZV07IC8vIFJlZmVyZW5jZSBjb3VudCBpcyAwLCBvYmplY3QgaXMgZGVhbGxvY2F0ZWQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>NSObject *obj = [[NSObject alloc] init]; // Reference count is 1
[obj retain]; // Reference count is 2
[obj release]; // Reference count is 1
[obj release]; // Reference count is 0, object is deallocated</pre></div><div class='content'></div><h1>Retain</h1>
<div class='content'><p>The <code>retain</code> method increases the reference count of an object. This is used when you want to take ownership of an object to ensure it stays in memory while you are using it.</p>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TlNPYmplY3QgKm9iaiA9IFtbTlNPYmplY3QgYWxsb2NdIGluaXRdOyAvLyBSZWZlcmVuY2UgY291bnQgaXMgMQpbb2JqIHJldGFpbl07IC8vIFJlZmVyZW5jZSBjb3VudCBpcyAy"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>NSObject *obj = [[NSObject alloc] init]; // Reference count is 1
[obj retain]; // Reference count is 2</pre></div><div class='content'></div><h1>Release</h1>
<div class='content'><p>The <code>release</code> method decreases the reference count of an object. When the reference count reaches zero, the object is deallocated.</p>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TlNPYmplY3QgKm9iaiA9IFtbTlNPYmplY3QgYWxsb2NdIGluaXRdOyAvLyBSZWZlcmVuY2UgY291bnQgaXMgMQpbb2JqIHJldGFpbl07IC8vIFJlZmVyZW5jZSBjb3VudCBpcyAyCltvYmogcmVsZWFzZV07IC8vIFJlZmVyZW5jZSBjb3VudCBpcyAxCltvYmogcmVsZWFzZV07IC8vIFJlZmVyZW5jZSBjb3VudCBpcyAwLCBvYmplY3QgaXMgZGVhbGxvY2F0ZWQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>NSObject *obj = [[NSObject alloc] init]; // Reference count is 1
[obj retain]; // Reference count is 2
[obj release]; // Reference count is 1
[obj release]; // Reference count is 0, object is deallocated</pre></div><div class='content'></div><h1>Autorelease</h1>
<div class='content'><p>The <code>autorelease</code> method adds the object to the autorelease pool. The pool will send a <code>release</code> message to the object at a later time, typically at the end of the current run loop.</p>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TlNPYmplY3QgKm9iaiA9IFtbW05TT2JqZWN0IGFsbG9jXSBpbml0XSBhdXRvcmVsZWFzZV07IC8vIFJlZmVyZW5jZSBjb3VudCBpcyAxLCB3aWxsIGJlIHJlbGVhc2VkIGxhdGVy"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>NSObject *obj = [[[NSObject alloc] init] autorelease]; // Reference count is 1, will be released later</pre></div><div class='content'></div><h1>Managing Memory with Retain and Release</h1>
<div class='content'><p>When managing memory manually, it's important to balance every <code>retain</code> with a corresponding <code>release</code> to avoid memory leaks or premature deallocation.</p>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LSAodm9pZClleGFtcGxlTWV0aG9kIHsKICAgIE5TT2JqZWN0ICpvYmogPSBbW05TT2JqZWN0IGFsbG9jXSBpbml0XTsgLy8gUmVmZXJlbmNlIGNvdW50IGlzIDEKICAgIFtvYmogcmV0YWluXTsgLy8gUmVmZXJlbmNlIGNvdW50IGlzIDIKICAgIC8vIFVzZSBvYmoKICAgIFtvYmogcmVsZWFzZV07IC8vIFJlZmVyZW5jZSBjb3VudCBpcyAxCiAgICBbb2JqIHJlbGVhc2VdOyAvLyBSZWZlcmVuY2UgY291bnQgaXMgMCwgb2JqZWN0IGlzIGRlYWxsb2NhdGVkCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>- (void)exampleMethod {
    NSObject *obj = [[NSObject alloc] init]; // Reference count is 1
    [obj retain]; // Reference count is 2
    // Use obj
    [obj release]; // Reference count is 1
    [obj release]; // Reference count is 0, object is deallocated
}</pre></div><div class='content'></div><h1>Common Pitfalls</h1>
<div class='content'><ul>
<li><strong>Over-releasing</strong>: Calling <code>release</code> more times than <code>retain</code> can lead to crashes due to accessing deallocated memory.</li>
<li><strong>Memory Leaks</strong>: Failing to call <code>release</code> after <code>retain</code> can lead to memory leaks, where memory is not freed even though the object is no longer needed.</li>
</ul>
</div><h2>Example of Over-releasing</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TlNPYmplY3QgKm9iaiA9IFtbTlNPYmplY3QgYWxsb2NdIGluaXRdOyAvLyBSZWZlcmVuY2UgY291bnQgaXMgMQpbb2JqIHJlbGVhc2VdOyAvLyBSZWZlcmVuY2UgY291bnQgaXMgMCwgb2JqZWN0IGlzIGRlYWxsb2NhdGVkCltvYmogcmVsZWFzZV07IC8vIENyYXNoOiBhY2Nlc3NpbmcgZGVhbGxvY2F0ZWQgbWVtb3J5"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>NSObject *obj = [[NSObject alloc] init]; // Reference count is 1
[obj release]; // Reference count is 0, object is deallocated
[obj release]; // Crash: accessing deallocated memory</pre></div><div class='content'></div><h2>Example of Memory Leak</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TlNPYmplY3QgKm9iaiA9IFtbTlNPYmplY3QgYWxsb2NdIGluaXRdOyAvLyBSZWZlcmVuY2UgY291bnQgaXMgMQpbb2JqIHJldGFpbl07IC8vIFJlZmVyZW5jZSBjb3VudCBpcyAyCi8vIEZvcmdvdCB0byByZWxlYXNlIG9iag=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>NSObject *obj = [[NSObject alloc] init]; // Reference count is 1
[obj retain]; // Reference count is 2
// Forgot to release obj</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Manual Retain-Release is a fundamental concept in Objective-C memory management. By understanding and correctly using <code>retain</code>, <code>release</code>, and <code>autorelease</code>, you can effectively manage the lifecycle of objects and avoid common pitfalls such as memory leaks and crashes. Although ARC has simplified memory management in modern Objective-C, knowing how manual retain-release works provides valuable insights into the inner workings of the language.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='automatic-reference-counting-arc'>&#x25C4;Automatic Reference Counting (ARC)</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Manual Retain-Release</a>
	</div>
	<div class='col-4 text-end'>
					<a href='strong-and-weak-references'>Strong and Weak References &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
