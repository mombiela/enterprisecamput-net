<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scaling Applications</title>

    <link rel="alternate" href="https://campusempresa.com/nodejs/scaling-applications" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/nodejs/scaling-applications" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/nodejs/scaling-applications" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/nodejs/scaling-applications" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/nodejs/scaling-applications" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='docker-nodejs'>&#x25C4;Using Docker with Node.js</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Scaling Applications</a>
	</div>
	<div class='col-4 text-end'>
					<a href='monitoring-performance'>Monitoring and Performance Tuning &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Scaling applications is a crucial aspect of developing robust and high-performance Node.js applications. This topic will guide you through the fundamentals of scaling, from understanding the basics to implementing advanced techniques.</p>
</div><h1>Introduction to Scaling</h1>
<div class='content'><p>Scaling refers to the ability of an application to handle increased load by adding resources. There are two primary types of scaling:</p>
<ul>
<li><strong>Vertical Scaling</strong>: Increasing the capacity of a single server (e.g., adding more CPU, RAM).</li>
<li><strong>Horizontal Scaling</strong>: Adding more servers to distribute the load.</li>
</ul>
</div><h1>Vertical Scaling</h1>
<div class='content'><p>Vertical scaling involves enhancing the capabilities of a single server. This method is straightforward but has limitations, such as hardware constraints and potential single points of failure.</p>
</div><h2>Example: Increasing Server Resources</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRXhhbXBsZSBvZiBpbmNyZWFzaW5nIHNlcnZlciByZXNvdXJjZXMgaW4gYSBjbG91ZCBlbnZpcm9ubWVudApjb25zdCBzZXJ2ZXIgPSByZXF1aXJlKCdodHRwJykuY3JlYXRlU2VydmVyKChyZXEsIHJlcykgPT4gewogIHJlcy53cml0ZUhlYWQoMjAwLCB7J0NvbnRlbnQtVHlwZSc6ICd0ZXh0L3BsYWluJ30pOwogIHJlcy5lbmQoJ0hlbGxvIFdvcmxkXG4nKTsKfSk7CgpzZXJ2ZXIubGlzdGVuKDMwMDAsICcxMjcuMC4wLjEnKTsKY29uc29sZS5sb2coJ1NlcnZlciBydW5uaW5nIGF0IGh0dHA6Ly8xMjcuMC4wLjE6MzAwMC8nKTsKCi8vIFRvIHNjYWxlIHZlcnRpY2FsbHksIHlvdSBtaWdodCB1cGdyYWRlIHRoZSBzZXJ2ZXIgaW5zdGFuY2UgaW4geW91ciBjbG91ZCBwcm92aWRlcidzIGRhc2hib2FyZA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Example of increasing server resources in a cloud environment
const server = require('http').createServer((req, res) =&gt; {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
});

server.listen(3000, '127.0.0.1');
console.log('Server running at http://127.0.0.1:3000/');

// To scale vertically, you might upgrade the server instance in your cloud provider's dashboard</pre></div><div class='content'></div><h1>Horizontal Scaling</h1>
<div class='content'><p>Horizontal scaling involves adding more servers to handle the load. This method is more scalable and fault-tolerant.</p>
</div><h2>Load Balancing</h2>
<div class='content'><p>Load balancing is a technique to distribute incoming network traffic across multiple servers. This ensures no single server bears too much load.</p>
<h4>Example: Using Nginx as a Load Balancer</h4>
<ol>
<li>
<p><strong>Install Nginx</strong>:</p>
<pre><code class="language-bash">sudo apt-get update
sudo apt-get install nginx
</code></pre>
</li>
<li>
<p><strong>Configure Nginx</strong>:
Edit the Nginx configuration file (usually located at <code>/etc/nginx/nginx.conf</code>):</p>
<pre><code class="language-nginx">http {
    upstream node_app {
        server 127.0.0.1:3000;
        server 127.0.0.1:3001;
        server 127.0.0.1:3002;
    }

    server {
        listen 80;

        location / {
            proxy_pass http://node_app;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
    }
}
</code></pre>
</li>
<li>
<p><strong>Start Multiple Node.js Instances</strong>:</p>
<pre><code class="language-javascript">const http = require('http');

const requestHandler = (req, res) =&gt; {
  res.end('Hello from Node.js server');
};

const servers = [3000, 3001, 3002].map(port =&gt; {
  const server = http.createServer(requestHandler);
  server.listen(port, () =&gt; {
    console.log(`Server running at port ${port}`);
  });
  return server;
});
</code></pre>
</li>
</ol>
</div><h2>Clustering</h2>
<div class='content'><p>Node.js provides a built-in module called <code>cluster</code> to take advantage of multi-core systems by creating child processes (workers) that share the same server port.</p>
<h4>Example: Using Cluster Module</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgY2x1c3RlciA9IHJlcXVpcmUoJ2NsdXN0ZXInKTsKY29uc3QgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTsKY29uc3QgbnVtQ1BVcyA9IHJlcXVpcmUoJ29zJykuY3B1cygpLmxlbmd0aDsKCmlmIChjbHVzdGVyLmlzTWFzdGVyKSB7CiAgY29uc29sZS5sb2coYE1hc3RlciAke3Byb2Nlc3MucGlkfSBpcyBydW5uaW5nYCk7CgogIC8vIEZvcmsgd29ya2VycwogIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQ1BVczsgaSsrKSB7CiAgICBjbHVzdGVyLmZvcmsoKTsKICB9CgogIGNsdXN0ZXIub24oJ2V4aXQnLCAod29ya2VyLCBjb2RlLCBzaWduYWwpID0+IHsKICAgIGNvbnNvbGUubG9nKGBXb3JrZXIgJHt3b3JrZXIucHJvY2Vzcy5waWR9IGRpZWRgKTsKICB9KTsKfSBlbHNlIHsKICAvLyBXb3JrZXJzIGNhbiBzaGFyZSBhbnkgVENQIGNvbm5lY3Rpb24KICBodHRwLmNyZWF0ZVNlcnZlcigocmVxLCByZXMpID0+IHsKICAgIHJlcy53cml0ZUhlYWQoMjAwKTsKICAgIHJlcy5lbmQoJ0hlbGxvIFdvcmxkXG4nKTsKICB9KS5saXN0ZW4oODAwMCk7CgogIGNvbnNvbGUubG9nKGBXb3JrZXIgJHtwcm9jZXNzLnBpZH0gc3RhcnRlZGApOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const cluster = require('cluster');
const http = require('http');
const numCPUs = require('os').cpus().length;

if (cluster.isMaster) {
  console.log(`Master ${process.pid} is running`);

  // Fork workers
  for (let i = 0; i &lt; numCPUs; i++) {
    cluster.fork();
  }

  cluster.on('exit', (worker, code, signal) =&gt; {
    console.log(`Worker ${worker.process.pid} died`);
  });
} else {
  // Workers can share any TCP connection
  http.createServer((req, res) =&gt; {
    res.writeHead(200);
    res.end('Hello World\n');
  }).listen(8000);

  console.log(`Worker ${process.pid} started`);
}</pre></div><div class='content'></div><h1>Advanced Scaling Techniques</h1>
<div class='content'></div><h2>Microservices</h2>
<div class='content'><p>Microservices architecture involves breaking down an application into smaller, independent services. Each service can be developed, deployed, and scaled independently.</p>
<h4>Example: Basic Microservice Setup</h4>
<ol>
<li>
<p><strong>Service A (User Service)</strong>:</p>
<pre><code class="language-javascript">const express = require('express');
const app = express();

app.get('/users', (req, res) =&gt; {
  res.json([{ id: 1, name: 'John Doe' }]);
});

app.listen(3000, () =&gt; {
  console.log('User service running on port 3000');
});
</code></pre>
</li>
<li>
<p><strong>Service B (Order Service)</strong>:</p>
<pre><code class="language-javascript">const express = require('express');
const app = express();

app.get('/orders', (req, res) =&gt; {
  res.json([{ id: 1, user_id: 1, product: 'Book' }]);
});

app.listen(3001, () =&gt; {
  console.log('Order service running on port 3001');
});
</code></pre>
</li>
</ol>
</div><h2>Containerization</h2>
<div class='content'><p>Containerization involves packaging an application and its dependencies into a container, which can run consistently across different environments.</p>
<h4>Example: Dockerizing a Node.js Application</h4>
<ol>
<li>
<p><strong>Create a Dockerfile</strong>:</p>
<pre><code class="language-dockerfile">FROM node:14

WORKDIR /usr/src/app

COPY package*.json ./

RUN npm install

COPY . .

EXPOSE 8080
CMD [ &quot;node&quot;, &quot;server.js&quot; ]
</code></pre>
</li>
<li>
<p><strong>Build and Run the Docker Container</strong>:</p>
<pre><code class="language-bash">docker build -t my-node-app .
docker run -p 8080:8080 -d my-node-app
</code></pre>
</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>Scaling Node.js applications is essential for handling increased load and ensuring high availability. By understanding and implementing vertical scaling, horizontal scaling, clustering, microservices, and containerization, you can build scalable and resilient applications. Start with basic techniques and gradually move to more advanced methods as your application's needs grow.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='docker-nodejs'>&#x25C4;Using Docker with Node.js</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Scaling Applications</a>
	</div>
	<div class='col-4 text-end'>
					<a href='monitoring-performance'>Monitoring and Performance Tuning &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
