<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Async/Await in Node.js</title>

    <link rel="alternate" href="https://campusempresa.com/nodejs/async-await" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/nodejs/async-await" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/nodejs/async-await" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/nodejs/async-await" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/nodejs/async-await" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='promises'>&#x25C4;Promises</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Async/Await in Node.js</a>
	</div>
	<div class='col-4 text-end'>
					<a href='handling-errors'>Handling Errors &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Async/Await</h1>
<div class='content'><p>Async/Await is a modern way to handle asynchronous operations in JavaScript, making code easier to read and write compared to traditional methods like callbacks and promises.</p>
<ul>
<li><strong>Async</strong>: Declares a function as asynchronous, allowing the use of <code>await</code> within it.</li>
<li><strong>Await</strong>: Pauses the execution of an async function until a promise is resolved or rejected.</li>
</ul>
</div><h1>Why Use Async/Await?</h1>
<div class='content'><ul>
<li><strong>Readability</strong>: Code looks synchronous, making it easier to understand.</li>
<li><strong>Error Handling</strong>: Simplifies error handling with <code>try/catch</code> blocks.</li>
<li><strong>Chaining</strong>: Avoids the complexity of chaining multiple <code>.then()</code> calls.</li>
</ul>
</div><h1>Basic Syntax</h1>
<h2>Async Function</h2>
<div class='content'><p>To define an async function, use the <code>async</code> keyword before the function declaration.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZmV0Y2hEYXRhKCkgewogIC8vIGZ1bmN0aW9uIGJvZHkKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function fetchData() {
  // function body
}</pre></div><div class='content'></div><h2>Await Keyword</h2>
<div class='content'><p>Use the <code>await</code> keyword to pause the execution of the async function until the promise is resolved.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZmV0Y2hEYXRhKCkgewogIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmV4YW1wbGUuY29tL2RhdGEnKTsKICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogIHJldHVybiBkYXRhOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function fetchData() {
  const response = await fetch('https://api.example.com/data');
  const data = await response.json();
  return data;
}</pre></div><div class='content'></div><h1>Example: Fetching Data from an API</h1>
<div class='content'><p>Let's look at a simple example of fetching data from an API using async/await.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZmV0Y2ggPSByZXF1aXJlKCdub2RlLWZldGNoJyk7Cgphc3luYyBmdW5jdGlvbiBnZXRVc2VyRGF0YSh1c2VySWQpIHsKICB0cnkgewogICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3VzZXJzLyR7dXNlcklkfWApOwogICAgY29uc3QgdXNlciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKICAgIGNvbnNvbGUubG9nKHVzZXIpOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyB1c2VyIGRhdGE6JywgZXJyb3IpOwogIH0KfQoKZ2V0VXNlckRhdGEoMSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const fetch = require('node-fetch');

async function getUserData(userId) {
  try {
    const response = await fetch(`https://jsonplaceholder.typicode.com/users/${userId}`);
    const user = await response.json();
    console.log(user);
  } catch (error) {
    console.error('Error fetching user data:', error);
  }
}

getUserData(1);</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>fetch</strong>: Used to make HTTP requests.</li>
<li><strong>await fetch</strong>: Waits for the fetch call to complete.</li>
<li><strong>await response.json()</strong>: Waits for the response to be converted to JSON.</li>
<li><strong>try/catch</strong>: Handles any errors that occur during the asynchronous operations.</li>
</ul>
</div><h1>Handling Multiple Promises</h1>
<div class='content'><p>You can use <code>await</code> with multiple promises by using <code>Promise.all</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZ2V0TXVsdGlwbGVVc2Vycyh1c2VySWRzKSB7CiAgdHJ5IHsKICAgIGNvbnN0IHVzZXJQcm9taXNlcyA9IHVzZXJJZHMubWFwKGlkID0+IGZldGNoKGBodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vdXNlcnMvJHtpZH1gKSk7CiAgICBjb25zdCByZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbCh1c2VyUHJvbWlzZXMpOwogICAgY29uc3QgdXNlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChyZXNwb25zZXMubWFwKHJlcyA9PiByZXMuanNvbigpKSk7CiAgICBjb25zb2xlLmxvZyh1c2Vycyk7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIG11bHRpcGxlIHVzZXJzOicsIGVycm9yKTsKICB9Cn0KCmdldE11bHRpcGxlVXNlcnMoWzEsIDIsIDNdKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function getMultipleUsers(userIds) {
  try {
    const userPromises = userIds.map(id =&gt; fetch(`https://jsonplaceholder.typicode.com/users/${id}`));
    const responses = await Promise.all(userPromises);
    const users = await Promise.all(responses.map(res =&gt; res.json()));
    console.log(users);
  } catch (error) {
    console.error('Error fetching multiple users:', error);
  }
}

getMultipleUsers([1, 2, 3]);</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>userPromises</strong>: Array of promises for fetching user data.</li>
<li><strong>Promise.all(userPromises)</strong>: Waits for all fetch promises to resolve.</li>
<li><strong>responses.map(res =&gt; res.json())</strong>: Converts each response to JSON.</li>
<li><strong>Promise.all</strong>: Waits for all JSON conversion promises to resolve.</li>
</ul>
</div><h1>Advanced Concepts</h1>
<h2>Sequential vs Parallel Execution</h2>
<div class='content'><ul>
<li><strong>Sequential</strong>: Each operation waits for the previous one to complete.</li>
<li><strong>Parallel</strong>: Multiple operations are executed concurrently.</li>
</ul>
<h4>Sequential Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZmV0Y2hTZXF1ZW50aWFsKCkgewogIGNvbnN0IHVzZXIxID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS91c2Vycy8xJykudGhlbihyZXMgPT4gcmVzLmpzb24oKSk7CiAgY29uc3QgdXNlcjIgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9qc29ucGxhY2Vob2xkZXIudHlwaWNvZGUuY29tL3VzZXJzLzInKS50aGVuKHJlcyA9PiByZXMuanNvbigpKTsKICBjb25zb2xlLmxvZyh1c2VyMSwgdXNlcjIpOwp9CgpmZXRjaFNlcXVlbnRpYWwoKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function fetchSequential() {
  const user1 = await fetch('https://jsonplaceholder.typicode.com/users/1').then(res =&gt; res.json());
  const user2 = await fetch('https://jsonplaceholder.typicode.com/users/2').then(res =&gt; res.json());
  console.log(user1, user2);
}

fetchSequential();</pre></div><div class='content'><h4>Parallel Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZmV0Y2hQYXJhbGxlbCgpIHsKICBjb25zdCBbdXNlcjEsIHVzZXIyXSA9IGF3YWl0IFByb21pc2UuYWxsKFsKICAgIGZldGNoKCdodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vdXNlcnMvMScpLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpLAogICAgZmV0Y2goJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS91c2Vycy8yJykudGhlbihyZXMgPT4gcmVzLmpzb24oKSkKICBdKTsKICBjb25zb2xlLmxvZyh1c2VyMSwgdXNlcjIpOwp9CgpmZXRjaFBhcmFsbGVsKCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function fetchParallel() {
  const [user1, user2] = await Promise.all([
    fetch('https://jsonplaceholder.typicode.com/users/1').then(res =&gt; res.json()),
    fetch('https://jsonplaceholder.typicode.com/users/2').then(res =&gt; res.json())
  ]);
  console.log(user1, user2);
}

fetchParallel();</pre></div><div class='content'></div><h2>Error Handling with Multiple Promises</h2>
<div class='content'><p>When using <code>Promise.all</code>, if one promise fails, the entire operation fails. You can handle this by wrapping each promise in a try/catch block or using <code>Promise.allSettled</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("YXN5bmMgZnVuY3Rpb24gZmV0Y2hXaXRoRXJyb3JIYW5kbGluZygpIHsKICBjb25zdCB1c2VyUHJvbWlzZXMgPSBbMSwgMiwgM10ubWFwKGlkID0+IAogICAgZmV0Y2goYGh0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS91c2Vycy8ke2lkfWApCiAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKQogICAgICAuY2F0Y2goZXJyb3IgPT4gKHsgZXJyb3IgfSkpCiAgKTsKICBjb25zdCB1c2VycyA9IGF3YWl0IFByb21pc2UuYWxsKHVzZXJQcm9taXNlcyk7CiAgY29uc29sZS5sb2codXNlcnMpOwp9CgpmZXRjaFdpdGhFcnJvckhhbmRsaW5nKCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>async function fetchWithErrorHandling() {
  const userPromises = [1, 2, 3].map(id =&gt; 
    fetch(`https://jsonplaceholder.typicode.com/users/${id}`)
      .then(res =&gt; res.json())
      .catch(error =&gt; ({ error }))
  );
  const users = await Promise.all(userPromises);
  console.log(users);
}

fetchWithErrorHandling();</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Async/Await simplifies asynchronous programming in Node.js by making code more readable and easier to manage. It allows for straightforward error handling and can handle multiple asynchronous operations efficiently. By understanding and utilizing async/await, you can write cleaner and more maintainable code.</p>
<ul>
<li><strong>Key Takeaways</strong>:
<ul>
<li>Use <code>async</code> to declare an asynchronous function.</li>
<li>Use <code>await</code> to pause execution until a promise is resolved.</li>
<li>Handle errors using <code>try/catch</code> blocks.</li>
<li>Use <code>Promise.all</code> for parallel execution of multiple promises.</li>
<li>Consider error handling strategies for multiple promises.</li>
</ul>
</li>
</ul>
<p>By mastering async/await, you'll be well-equipped to handle complex asynchronous operations in your Node.js applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='promises'>&#x25C4;Promises</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Async/Await in Node.js</a>
	</div>
	<div class='col-4 text-end'>
					<a href='handling-errors'>Handling Errors &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
