<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using MySQL with Sequelize</title>

    <link rel="alternate" href="https://campusempresa.com/nodejs/mysql-sequelize" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/nodejs/mysql-sequelize" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/nodejs/mysql-sequelize" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/nodejs/mysql-sequelize" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/nodejs/mysql-sequelize" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='mongodb-mongoose'>&#x25C4;Using MongoDB with Mongoose</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using MySQL with Sequelize</a>
	</div>
	<div class='col-4 text-end'>
					<a href='crud-operations'>Performing CRUD Operations &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Sequelize</h1>
<div class='content'><p>Sequelize is a promise-based Node.js ORM (Object-Relational Mapping) for Postgres, MySQL, MariaDB, SQLite, and Microsoft SQL Server. It features solid transaction support, relations, eager and lazy loading, read replication, and more.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>ORM (Object-Relational Mapping)</strong>: A technique that lets you query and manipulate data from a database using an object-oriented paradigm.</li>
<li><strong>Models</strong>: Represent tables in your database.</li>
<li><strong>Instances</strong>: Represent rows in your database.</li>
<li><strong>Queries</strong>: Methods to interact with the database.</li>
</ul>
</div><h1>Setting Up Sequelize with MySQL</h1>
<div class='content'></div><h2>Installation</h2>
<div class='content'><p>First, you need to install Sequelize and the MySQL driver.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwgc2VxdWVsaXplIG15c3FsMg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install sequelize mysql2</pre></div><div class='content'></div><h2>Initializing Sequelize</h2>
<div class='content'><p>Create a new instance of Sequelize and connect it to your MySQL database.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgeyBTZXF1ZWxpemUgfSA9IHJlcXVpcmUoJ3NlcXVlbGl6ZScpOwoKY29uc3Qgc2VxdWVsaXplID0gbmV3IFNlcXVlbGl6ZSgnZGF0YWJhc2UnLCAndXNlcm5hbWUnLCAncGFzc3dvcmQnLCB7CiAgaG9zdDogJ2xvY2FsaG9zdCcsCiAgZGlhbGVjdDogJ215c3FsJwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const { Sequelize } = require('sequelize');

const sequelize = new Sequelize('database', 'username', 'password', {
  host: 'localhost',
  dialect: 'mysql'
});</pre></div><div class='content'></div><h2>Testing the Connection</h2>
<div class='content'><p>You can test the connection to ensure everything is set up correctly.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VxdWVsaXplLmF1dGhlbnRpY2F0ZSgpCiAgLnRoZW4oKCkgPT4gewogICAgY29uc29sZS5sb2coJ0Nvbm5lY3Rpb24gaGFzIGJlZW4gZXN0YWJsaXNoZWQgc3VjY2Vzc2Z1bGx5LicpOwogIH0pCiAgLmNhdGNoKGVyciA9PiB7CiAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gY29ubmVjdCB0byB0aGUgZGF0YWJhc2U6JywgZXJyKTsKICB9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sequelize.authenticate()
  .then(() =&gt; {
    console.log('Connection has been established successfully.');
  })
  .catch(err =&gt; {
    console.error('Unable to connect to the database:', err);
  });</pre></div><div class='content'></div><h1>Defining Models</h1>
<div class='content'><p>Models are the essence of Sequelize. They represent tables in your database.</p>
</div><h2>Creating a Model</h2>
<div class='content'><p>Define a model for a <code>User</code> table.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgVXNlciA9IHNlcXVlbGl6ZS5kZWZpbmUoJ1VzZXInLCB7CiAgdXNlcm5hbWU6IHsKICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsCiAgICBhbGxvd051bGw6IGZhbHNlCiAgfSwKICBiaXJ0aGRheTogewogICAgdHlwZTogU2VxdWVsaXplLkRBVEUKICB9Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const User = sequelize.define('User', {
  username: {
    type: Sequelize.STRING,
    allowNull: false
  },
  birthday: {
    type: Sequelize.DATE
  }
});</pre></div><div class='content'></div><h2>Syncing Models</h2>
<div class='content'><p>Sync the model with the database to create the table.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VxdWVsaXplLnN5bmMoKQogIC50aGVuKCgpID0+IHsKICAgIGNvbnNvbGUubG9nKCdVc2VyIHRhYmxlIGhhcyBiZWVuIGNyZWF0ZWQuJyk7CiAgfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sequelize.sync()
  .then(() =&gt; {
    console.log('User table has been created.');
  });</pre></div><div class='content'></div><h1>CRUD Operations</h1>
<div class='content'></div><h2>Creating Records</h2>
<div class='content'><p>Add a new user to the <code>User</code> table.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("VXNlci5jcmVhdGUoewogIHVzZXJuYW1lOiAnam9obl9kb2UnLAogIGJpcnRoZGF5OiBuZXcgRGF0ZSgxOTkwLCAxLCAxKQp9KS50aGVuKHVzZXIgPT4gewogIGNvbnNvbGUubG9nKCdVc2VyIGNyZWF0ZWQ6JywgdXNlci50b0pTT04oKSk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>User.create({
  username: 'john_doe',
  birthday: new Date(1990, 1, 1)
}).then(user =&gt; {
  console.log('User created:', user.toJSON());
});</pre></div><div class='content'></div><h2>Reading Records</h2>
<div class='content'><p>Retrieve all users from the <code>User</code> table.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("VXNlci5maW5kQWxsKCkudGhlbih1c2VycyA9PiB7CiAgY29uc29sZS5sb2coJ0FsbCB1c2VyczonLCBKU09OLnN0cmluZ2lmeSh1c2VycywgbnVsbCwgMikpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>User.findAll().then(users =&gt; {
  console.log('All users:', JSON.stringify(users, null, 2));
});</pre></div><div class='content'></div><h2>Updating Records</h2>
<div class='content'><p>Update a user's information.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("VXNlci51cGRhdGUoeyB1c2VybmFtZTogJ2phbmVfZG9lJyB9LCB7CiAgd2hlcmU6IHsKICAgIHVzZXJuYW1lOiAnam9obl9kb2UnCiAgfQp9KS50aGVuKCgpID0+IHsKICBjb25zb2xlLmxvZygnVXNlciB1cGRhdGVkLicpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>User.update({ username: 'jane_doe' }, {
  where: {
    username: 'john_doe'
  }
}).then(() =&gt; {
  console.log('User updated.');
});</pre></div><div class='content'></div><h2>Deleting Records</h2>
<div class='content'><p>Delete a user from the <code>User</code> table.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("VXNlci5kZXN0cm95KHsKICB3aGVyZTogewogICAgdXNlcm5hbWU6ICdqYW5lX2RvZScKICB9Cn0pLnRoZW4oKCkgPT4gewogIGNvbnNvbGUubG9nKCdVc2VyIGRlbGV0ZWQuJyk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>User.destroy({
  where: {
    username: 'jane_doe'
  }
}).then(() =&gt; {
  console.log('User deleted.');
});</pre></div><div class='content'></div><h1>Associations</h1>
<div class='content'><p>Sequelize supports various types of associations to define relationships between models.</p>
</div><h2>One-to-One</h2>
<div class='content'><p>Define a one-to-one relationship between <code>User</code> and <code>Profile</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgUHJvZmlsZSA9IHNlcXVlbGl6ZS5kZWZpbmUoJ1Byb2ZpbGUnLCB7CiAgYmlvOiB7CiAgICB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HCiAgfQp9KTsKClVzZXIuaGFzT25lKFByb2ZpbGUpOwpQcm9maWxlLmJlbG9uZ3NUbyhVc2VyKTsKCnNlcXVlbGl6ZS5zeW5jKCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const Profile = sequelize.define('Profile', {
  bio: {
    type: Sequelize.STRING
  }
});

User.hasOne(Profile);
Profile.belongsTo(User);

sequelize.sync();</pre></div><div class='content'></div><h2>One-to-Many</h2>
<div class='content'><p>Define a one-to-many relationship between <code>User</code> and <code>Post</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgUG9zdCA9IHNlcXVlbGl6ZS5kZWZpbmUoJ1Bvc3QnLCB7CiAgdGl0bGU6IHsKICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcKICB9LAogIGNvbnRlbnQ6IHsKICAgIHR5cGU6IFNlcXVlbGl6ZS5URVhUCiAgfQp9KTsKClVzZXIuaGFzTWFueShQb3N0KTsKUG9zdC5iZWxvbmdzVG8oVXNlcik7CgpzZXF1ZWxpemUuc3luYygpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const Post = sequelize.define('Post', {
  title: {
    type: Sequelize.STRING
  },
  content: {
    type: Sequelize.TEXT
  }
});

User.hasMany(Post);
Post.belongsTo(User);

sequelize.sync();</pre></div><div class='content'></div><h2>Many-to-Many</h2>
<div class='content'><p>Define a many-to-many relationship between <code>User</code> and <code>Project</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgUHJvamVjdCA9IHNlcXVlbGl6ZS5kZWZpbmUoJ1Byb2plY3QnLCB7CiAgbmFtZTogewogICAgdHlwZTogU2VxdWVsaXplLlNUUklORwogIH0KfSk7Cgpjb25zdCBVc2VyUHJvamVjdCA9IHNlcXVlbGl6ZS5kZWZpbmUoJ1VzZXJQcm9qZWN0Jywge30pOwoKVXNlci5iZWxvbmdzVG9NYW55KFByb2plY3QsIHsgdGhyb3VnaDogVXNlclByb2plY3QgfSk7ClByb2plY3QuYmVsb25nc1RvTWFueShVc2VyLCB7IHRocm91Z2g6IFVzZXJQcm9qZWN0IH0pOwoKc2VxdWVsaXplLnN5bmMoKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const Project = sequelize.define('Project', {
  name: {
    type: Sequelize.STRING
  }
});

const UserProject = sequelize.define('UserProject', {});

User.belongsToMany(Project, { through: UserProject });
Project.belongsToMany(User, { through: UserProject });

sequelize.sync();</pre></div><div class='content'></div><h1>Advanced Topics</h1>
<div class='content'></div><h2>Transactions</h2>
<div class='content'><p>Transactions are essential for ensuring data integrity.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c2VxdWVsaXplLnRyYW5zYWN0aW9uKHQgPT4gewogIHJldHVybiBVc2VyLmNyZWF0ZSh7CiAgICB1c2VybmFtZTogJ2FsaWNlJywKICAgIGJpcnRoZGF5OiBuZXcgRGF0ZSgxOTg1LCA2LCAyMCkKICB9LCB7IHRyYW5zYWN0aW9uOiB0IH0pLnRoZW4odXNlciA9PiB7CiAgICByZXR1cm4gUHJvZmlsZS5jcmVhdGUoewogICAgICBiaW86ICdBbGljZVwncyBwcm9maWxlJywKICAgICAgVXNlcklkOiB1c2VyLmlkCiAgICB9LCB7IHRyYW5zYWN0aW9uOiB0IH0pOwogIH0pOwp9KS50aGVuKHJlc3VsdCA9PiB7CiAgY29uc29sZS5sb2coJ1RyYW5zYWN0aW9uIGhhcyBiZWVuIGNvbW1pdHRlZC4nKTsKfSkuY2F0Y2goZXJyID0+IHsKICBjb25zb2xlLmVycm9yKCdUcmFuc2FjdGlvbiBoYXMgYmVlbiByb2xsZWQgYmFjazonLCBlcnIpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>sequelize.transaction(t =&gt; {
  return User.create({
    username: 'alice',
    birthday: new Date(1985, 6, 20)
  }, { transaction: t }).then(user =&gt; {
    return Profile.create({
      bio: 'Alice\'s profile',
      UserId: user.id
    }, { transaction: t });
  });
}).then(result =&gt; {
  console.log('Transaction has been committed.');
}).catch(err =&gt; {
  console.error('Transaction has been rolled back:', err);
});</pre></div><div class='content'></div><h2>Scopes</h2>
<div class='content'><p>Scopes allow you to define reusable queries.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgVXNlciA9IHNlcXVlbGl6ZS5kZWZpbmUoJ1VzZXInLCB7CiAgdXNlcm5hbWU6IHsKICAgIHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcsCiAgICBhbGxvd051bGw6IGZhbHNlCiAgfSwKICBiaXJ0aGRheTogewogICAgdHlwZTogU2VxdWVsaXplLkRBVEUKICB9Cn0sIHsKICBzY29wZXM6IHsKICAgIGFkdWx0czogewogICAgICB3aGVyZTogewogICAgICAgIGJpcnRoZGF5OiB7CiAgICAgICAgICBbU2VxdWVsaXplLk9wLmx0ZV06IG5ldyBEYXRlKG5ldyBEYXRlKCkgLSAxOCAqIDM2NSAqIDI0ICogNjAgKiA2MCAqIDEwMDApCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9KTsKClVzZXIuc2NvcGUoJ2FkdWx0cycpLmZpbmRBbGwoKS50aGVuKHVzZXJzID0+IHsKICBjb25zb2xlLmxvZygnQWxsIGFkdWx0IHVzZXJzOicsIEpTT04uc3RyaW5naWZ5KHVzZXJzLCBudWxsLCAyKSk7Cn0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const User = sequelize.define('User', {
  username: {
    type: Sequelize.STRING,
    allowNull: false
  },
  birthday: {
    type: Sequelize.DATE
  }
}, {
  scopes: {
    adults: {
      where: {
        birthday: {
          [Sequelize.Op.lte]: new Date(new Date() - 18 * 365 * 24 * 60 * 60 * 1000)
        }
      }
    }
  }
});

User.scope('adults').findAll().then(users =&gt; {
  console.log('All adult users:', JSON.stringify(users, null, 2));
});</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Using Sequelize with MySQL in a Node.js environment simplifies database interactions by providing an ORM that abstracts complex SQL queries into manageable JavaScript code. By understanding how to set up Sequelize, define models, perform CRUD operations, and manage associations, you can efficiently manage your database operations. Advanced features like transactions and scopes further enhance your ability to maintain data integrity and create reusable queries.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='mongodb-mongoose'>&#x25C4;Using MongoDB with Mongoose</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Using MySQL with Sequelize</a>
	</div>
	<div class='col-4 text-end'>
					<a href='crud-operations'>Performing CRUD Operations &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
