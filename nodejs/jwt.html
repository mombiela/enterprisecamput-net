<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JWT (JSON Web Tokens)</title>

    <link rel="alternate" href="https://campusempresa.com/nodejs/jwt" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/nodejs/jwt" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/nodejs/jwt" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/nodejs/jwt" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/nodejs/jwt" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='passport-js'>&#x25C4;Using Passport.js</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">JWT (JSON Web Tokens)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='role-based-access-control'>Role-Based Access Control &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to JWT</h1>
<div class='content'><p>JSON Web Tokens (JWT) are a compact, URL-safe means of representing claims to be transferred between two parties. The claims in a JWT are encoded as a JSON object that is used as the payload of a JSON Web Signature (JWS) structure or as the plaintext of a JSON Web Encryption (JWE) structure, enabling the claims to be digitally signed or integrity protected with a Message Authentication Code (MAC) and/or encrypted.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Token Structure</strong>: JWTs consist of three parts: Header, Payload, and Signature.</li>
<li><strong>Header</strong>: Contains metadata about the type of token and the cryptographic algorithms used.</li>
<li><strong>Payload</strong>: Contains the claims. Claims are statements about an entity (typically, the user) and additional data.</li>
<li><strong>Signature</strong>: Used to verify the integrity of the token and ensure it has not been tampered with.</li>
</ul>
</div><h1>JWT Structure</h1>
<div class='content'><p>A JWT is typically structured as follows:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aGVhZGVyLnBheWxvYWQuc2lnbmF0dXJl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>header.payload.signature</pre></div><div class='content'></div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJhbGciOiAiSFMyNTYiLAogICJ0eXAiOiAiSldUIgp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;alg&quot;: &quot;HS256&quot;,
  &quot;typ&quot;: &quot;JWT&quot;
}</pre></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJzdWIiOiAiMTIzNDU2Nzg5MCIsCiAgIm5hbWUiOiAiSm9obiBEb2UiLAogICJpYXQiOiAxNTE2MjM5MDIyCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;sub&quot;: &quot;1234567890&quot;,
  &quot;name&quot;: &quot;John Doe&quot;,
  &quot;iat&quot;: 1516239022
}</pre></div><div class='content'></div><h2>Encoded JWT</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SnpkV0lpT2lJeE1qTTBOVFkzT0Rrd0lpd2libUZ0WlNJNklrcHZhRzRnUkc5bElpd2lhV0YwSWpveE5URTJNak01TURJeWZRLlNmbEt4d1JKU01lS0tGMlFUNGZ3cE1lSmYzNlBPazZ5SlZfYWRRc3N3NWM="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c</pre></div><div class='content'></div><h1>Creating JWTs in Node.js</h1>
<div class='content'><p>To create JWTs in Node.js, you can use the <code>jsonwebtoken</code> library.</p>
</div><h2>Installation</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bnBtIGluc3RhbGwganNvbndlYnRva2Vu"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>npm install jsonwebtoken</pre></div><div class='content'></div><h2>Creating a Token</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7Cgpjb25zdCBwYXlsb2FkID0gewogIHN1YjogJzEyMzQ1Njc4OTAnLAogIG5hbWU6ICdKb2huIERvZScsCiAgaWF0OiBNYXRoLmZsb29yKERhdGUubm93KCkgLyAxMDAwKSAtIDMwCn07Cgpjb25zdCBzZWNyZXQgPSAneW91ci0yNTYtYml0LXNlY3JldCc7Cgpjb25zdCB0b2tlbiA9IGp3dC5zaWduKHBheWxvYWQsIHNlY3JldCk7CmNvbnNvbGUubG9nKHRva2VuKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const jwt = require('jsonwebtoken');

const payload = {
  sub: '1234567890',
  name: 'John Doe',
  iat: Math.floor(Date.now() / 1000) - 30
};

const secret = 'your-256-bit-secret';

const token = jwt.sign(payload, secret);
console.log(token);</pre></div><div class='content'></div><h2>Verifying a Token</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgdG9rZW4gPSAneW91ci5qd3QudG9rZW4uaGVyZSc7Cgpqd3QudmVyaWZ5KHRva2VuLCBzZWNyZXQsIChlcnIsIGRlY29kZWQpID0+IHsKICBpZiAoZXJyKSB7CiAgICBjb25zb2xlLmxvZygnVG9rZW4gaXMgbm90IHZhbGlkOicsIGVycik7CiAgfSBlbHNlIHsKICAgIGNvbnNvbGUubG9nKCdEZWNvZGVkIHRva2VuOicsIGRlY29kZWQpOwogIH0KfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const token = 'your.jwt.token.here';

jwt.verify(token, secret, (err, decoded) =&gt; {
  if (err) {
    console.log('Token is not valid:', err);
  } else {
    console.log('Decoded token:', decoded);
  }
});</pre></div><div class='content'></div><h1>Using JWT for Authentication</h1>
<div class='content'><p>JWTs are commonly used for authentication in web applications. Here’s a simple example of how to use JWTs for user authentication in a Node.js application.</p>
</div><h2>Example: User Login and Token Generation</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7CmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpOwoKY29uc3QgYXBwID0gZXhwcmVzcygpOwphcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTsKCmNvbnN0IHVzZXJzID0gWwogIHsgaWQ6IDEsIHVzZXJuYW1lOiAnam9obicsIHBhc3N3b3JkOiAncGFzc3dvcmQxMjMnIH0KXTsKCmNvbnN0IHNlY3JldCA9ICd5b3VyLTI1Ni1iaXQtc2VjcmV0JzsKCmFwcC5wb3N0KCcvbG9naW4nLCAocmVxLCByZXMpID0+IHsKICBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7CiAgY29uc3QgdXNlciA9IHVzZXJzLmZpbmQodSA9PiB1LnVzZXJuYW1lID09PSB1c2VybmFtZSAmJiB1LnBhc3N3b3JkID09PSBwYXNzd29yZCk7CgogIGlmICh1c2VyKSB7CiAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHsgc3ViOiB1c2VyLmlkIH0sIHNlY3JldCwgeyBleHBpcmVzSW46ICcxaCcgfSk7CiAgICByZXMuanNvbih7IHRva2VuIH0pOwogIH0gZWxzZSB7CiAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCgnVXNlcm5hbWUgb3IgcGFzc3dvcmQgaW5jb3JyZWN0Jyk7CiAgfQp9KTsKCmFwcC5saXN0ZW4oMzAwMCwgKCkgPT4gewogIGNvbnNvbGUubG9nKCdTZXJ2ZXIgc3RhcnRlZCBvbiBwb3J0IDMwMDAnKTsKfSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const express = require('express');
const jwt = require('jsonwebtoken');
const bodyParser = require('body-parser');

const app = express();
app.use(bodyParser.json());

const users = [
  { id: 1, username: 'john', password: 'password123' }
];

const secret = 'your-256-bit-secret';

app.post('/login', (req, res) =&gt; {
  const { username, password } = req.body;
  const user = users.find(u =&gt; u.username === username &amp;&amp; u.password === password);

  if (user) {
    const token = jwt.sign({ sub: user.id }, secret, { expiresIn: '1h' });
    res.json({ token });
  } else {
    res.status(401).send('Username or password incorrect');
  }
});

app.listen(3000, () =&gt; {
  console.log('Server started on port 3000');
});</pre></div><div class='content'></div><h2>Example: Protecting Routes</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTsKY29uc3Qgand0ID0gcmVxdWlyZSgnanNvbndlYnRva2VuJyk7Cgpjb25zdCBhcHAgPSBleHByZXNzKCk7CmNvbnN0IHNlY3JldCA9ICd5b3VyLTI1Ni1iaXQtc2VjcmV0JzsKCmNvbnN0IGF1dGhlbnRpY2F0ZUpXVCA9IChyZXEsIHJlcywgbmV4dCkgPT4gewogIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcignQXV0aG9yaXphdGlvbicpLnNwbGl0KCcgJylbMV07CgogIGlmICh0b2tlbikgewogICAgand0LnZlcmlmeSh0b2tlbiwgc2VjcmV0LCAoZXJyLCB1c2VyKSA9PiB7CiAgICAgIGlmIChlcnIpIHsKICAgICAgICByZXR1cm4gcmVzLnNlbmRTdGF0dXMoNDAzKTsKICAgICAgfQogICAgICByZXEudXNlciA9IHVzZXI7CiAgICAgIG5leHQoKTsKICAgIH0pOwogIH0gZWxzZSB7CiAgICByZXMuc2VuZFN0YXR1cyg0MDEpOwogIH0KfTsKCmFwcC5nZXQoJy9wcm90ZWN0ZWQnLCBhdXRoZW50aWNhdGVKV1QsIChyZXEsIHJlcykgPT4gewogIHJlcy5zZW5kKCdUaGlzIGlzIGEgcHJvdGVjdGVkIHJvdXRlJyk7Cn0pOwoKYXBwLmxpc3RlbigzMDAwLCAoKSA9PiB7CiAgY29uc29sZS5sb2coJ1NlcnZlciBzdGFydGVkIG9uIHBvcnQgMzAwMCcpOwp9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const express = require('express');
const jwt = require('jsonwebtoken');

const app = express();
const secret = 'your-256-bit-secret';

const authenticateJWT = (req, res, next) =&gt; {
  const token = req.header('Authorization').split(' ')[1];

  if (token) {
    jwt.verify(token, secret, (err, user) =&gt; {
      if (err) {
        return res.sendStatus(403);
      }
      req.user = user;
      next();
    });
  } else {
    res.sendStatus(401);
  }
};

app.get('/protected', authenticateJWT, (req, res) =&gt; {
  res.send('This is a protected route');
});

app.listen(3000, () =&gt; {
  console.log('Server started on port 3000');
});</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>JWTs are a powerful tool for authentication and information exchange in web applications. They provide a secure and efficient way to transmit information between parties. By understanding the structure and usage of JWTs, you can implement robust authentication mechanisms in your Node.js applications. Remember to always keep your secret keys secure and to validate and verify tokens properly to ensure the security of your application.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='passport-js'>&#x25C4;Using Passport.js</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">JWT (JSON Web Tokens)</a>
	</div>
	<div class='col-4 text-end'>
					<a href='role-based-access-control'>Role-Based Access Control &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
