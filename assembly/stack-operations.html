<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stack Operations in Assembly</title>

    <link rel="alternate" href="https://campusempresa.com/assembly/stack-operations" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/assembly/stack-operations" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/assembly/stack-operations" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/assembly/stack-operations" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/assembly/stack-operations" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='subroutines-and-procedures'>&#x25C4;Subroutines and Procedures</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Stack Operations in Assembly</a>
	</div>
	<div class='col-4 text-end'>
					<a href='interrupts-and-system-calls'>Interrupts and System Calls &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Stack</h1>
<div class='content'><p>The stack is a fundamental data structure used in Assembly programming for managing function calls, local variables, and control flow. It operates on a Last In, First Out (LIFO) principle.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>LIFO (Last In, First Out):</strong> The last element pushed onto the stack is the first one to be popped off.</li>
<li><strong>Stack Pointer (SP):</strong> A special register that points to the top of the stack.</li>
<li><strong>Push Operation:</strong> Adds an element to the top of the stack.</li>
<li><strong>Pop Operation:</strong> Removes the top element from the stack.</li>
</ul>
</div><h1>Basic Stack Operations</h1>
<div class='content'></div><h2>Push Operation</h2>
<div class='content'><p>The <code>PUSH</code> instruction is used to place data onto the stack. This operation decreases the stack pointer and stores the value at the new top of the stack.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TU9WIEFYLCAxMjM0aCAgOyBMb2FkIEFYIHdpdGggdGhlIHZhbHVlIDEyMzRoClBVU0ggQVggICAgICAgIDsgUHVzaCB0aGUgdmFsdWUgb2YgQVggb250byB0aGUgc3RhY2s="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>MOV AX, 1234h  ; Load AX with the value 1234h
PUSH AX        ; Push the value of AX onto the stack</pre></div><div class='content'><p>Explanation:</p>
<ol>
<li><code>MOV AX, 1234h</code> loads the hexadecimal value <code>1234</code> into the AX register.</li>
<li><code>PUSH AX</code> decrements the stack pointer and stores the value of AX at the new top of the stack.</li>
</ol>
</div><h2>Pop Operation</h2>
<div class='content'><p>The <code>POP</code> instruction is used to remove data from the top of the stack. This operation retrieves the value from the top of the stack and then increases the stack pointer.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UE9QIEJYICAgICAgICAgOyBQb3AgdGhlIHRvcCB2YWx1ZSBmcm9tIHRoZSBzdGFjayBpbnRvIEJY"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>POP BX         ; Pop the top value from the stack into BX</pre></div><div class='content'><p>Explanation:</p>
<ol>
<li><code>POP BX</code> retrieves the value from the top of the stack and stores it in the BX register.</li>
<li>The stack pointer is then incremented to point to the new top of the stack.</li>
</ol>
</div><h1>Advanced Stack Operations</h1>
<div class='content'></div><h2>Using the Stack for Function Calls</h2>
<div class='content'><p>The stack is commonly used to manage function calls, including passing parameters and storing return addresses.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q0FMTCBNeUZ1bmN0aW9uICA7IENhbGwgTXlGdW5jdGlvbiwgd2hpY2ggcHVzaGVzIHRoZSByZXR1cm4gYWRkcmVzcyBvbnRvIHRoZSBzdGFjawoKTXlGdW5jdGlvbjoKICAgIFBVU0ggQlAgICAgICA7IFNhdmUgdGhlIGJhc2UgcG9pbnRlcgogICAgTU9WIEJQLCBTUCAgIDsgU2V0IHRoZSBiYXNlIHBvaW50ZXIgdG8gdGhlIGN1cnJlbnQgc3RhY2sgcG9pbnRlcgogICAgOyBGdW5jdGlvbiBib2R5CiAgICBQT1AgQlAgICAgICAgOyBSZXN0b3JlIHRoZSBiYXNlIHBvaW50ZXIKICAgIFJFVCAgICAgICAgICA7IFJldHVybiBmcm9tIHRoZSBmdW5jdGlvbiwgcG9wcGluZyB0aGUgcmV0dXJuIGFkZHJlc3MgZnJvbSB0aGUgc3RhY2s="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CALL MyFunction  ; Call MyFunction, which pushes the return address onto the stack

MyFunction:
    PUSH BP      ; Save the base pointer
    MOV BP, SP   ; Set the base pointer to the current stack pointer
    ; Function body
    POP BP       ; Restore the base pointer
    RET          ; Return from the function, popping the return address from the stack</pre></div><div class='content'><p>Explanation:</p>
<ol>
<li><code>CALL MyFunction</code> pushes the return address onto the stack and jumps to <code>MyFunction</code>.</li>
<li><code>PUSH BP</code> saves the current base pointer.</li>
<li><code>MOV BP, SP</code> sets the base pointer to the current stack pointer, establishing a new stack frame.</li>
<li>The function body executes.</li>
<li><code>POP BP</code> restores the previous base pointer.</li>
<li><code>RET</code> pops the return address from the stack and returns to the caller.</li>
</ol>
</div><h2>Stack Frame Structure</h2>
<div class='content'><p>A stack frame is created for each function call to manage local variables and parameters.</p>
<h4>Example Stack Frame</h4>
<p>| Address | Content        |
|---------|----------------|
| SP+4    | Return Address |
| SP+2    | Old BP         |
| SP      | Local Variables|</p>
<p>Explanation:</p>
<ul>
<li>The return address is pushed onto the stack by the <code>CALL</code> instruction.</li>
<li>The old base pointer is saved to maintain the previous stack frame.</li>
<li>Local variables are allocated space on the stack.</li>
</ul>
</div><h1>Exercises</h1>
<div class='content'></div><h2>Exercise 1: Basic Push and Pop</h2>
<div class='content'><p>Write an Assembly program that pushes the values <code>0xAAAA</code> and <code>0xBBBB</code> onto the stack and then pops them into registers <code>CX</code> and <code>DX</code>.</p>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("TU9WIEFYLCAweEFBQUEKUFVTSCBBWApNT1YgQVgsIDB4QkJCQgpQVVNIIEFYCgpQT1AgRFgKUE9QIENY"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>MOV AX, 0xAAAA
PUSH AX
MOV AX, 0xBBBB
PUSH AX

POP DX
POP CX</pre></div><div class='content'></div><h2>Exercise 2: Function Call with Stack Frame</h2>
<div class='content'><p>Write an Assembly function that takes two parameters, adds them, and returns the result. Use the stack to pass parameters and manage the stack frame.</p>
<h4>Solution</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("OyBNYWluIHByb2dyYW0KTU9WIEFYLCA1ClBVU0ggQVgKTU9WIEFYLCAzClBVU0ggQVgKQ0FMTCBBZGRGdW5jdGlvbgpBREQgU1AsIDQgIDsgQ2xlYW4gdXAgdGhlIHN0YWNrCgo7IEZ1bmN0aW9uIGRlZmluaXRpb24KQWRkRnVuY3Rpb246CiAgICBQVVNIIEJQCiAgICBNT1YgQlAsIFNQCiAgICBNT1YgQVgsIFtCUCs0XSAgOyBGaXJzdCBwYXJhbWV0ZXIKICAgIEFERCBBWCwgW0JQKzZdICA7IFNlY29uZCBwYXJhbWV0ZXIKICAgIFBPUCBCUAogICAgUkVU"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>; Main program
MOV AX, 5
PUSH AX
MOV AX, 3
PUSH AX
CALL AddFunction
ADD SP, 4  ; Clean up the stack

; Function definition
AddFunction:
    PUSH BP
    MOV BP, SP
    MOV AX, [BP+4]  ; First parameter
    ADD AX, [BP+6]  ; Second parameter
    POP BP
    RET</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Understanding stack operations is crucial for effective Assembly programming. The stack is used for managing function calls, local variables, and control flow. Mastering <code>PUSH</code> and <code>POP</code> instructions, along with stack frames, enables you to write more complex and efficient Assembly programs. Practice these concepts with the provided exercises to solidify your understanding.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='subroutines-and-procedures'>&#x25C4;Subroutines and Procedures</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Stack Operations in Assembly</a>
	</div>
	<div class='col-4 text-end'>
					<a href='interrupts-and-system-calls'>Interrupts and System Calls &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
