<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing RESTful Web Services</title>

    <link rel="alternate" href="https://campusempresa.com/springboot/testing-restful-web-services" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/springboot/testing-restful-web-services" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/springboot/testing-restful-web-services" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/springboot/testing-restful-web-services" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/springboot/testing-restful-web-services" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='integration-testing'>&#x25C4;Integration Testing</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Testing RESTful Web Services</a>
	</div>
	<div class='col-4 text-end'>
					<a href='test-containers'>Test Containers &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Testing is a crucial aspect of software development, ensuring that your application behaves as expected. In this section, we will cover how to test RESTful web services in a Spring Boot application, from basic unit tests to more advanced integration tests.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Unit Testing</strong>: Testing individual components in isolation.</li>
<li><strong>Integration Testing</strong>: Testing the interaction between multiple components.</li>
<li><strong>Mocking</strong>: Simulating the behavior of complex objects.</li>
<li><strong>Test RestTemplate</strong>: A Spring utility for testing RESTful services.</li>
<li><strong>JUnit</strong>: A popular testing framework in Java.</li>
<li><strong>Mockito</strong>: A mocking framework for unit tests.</li>
</ul>
</div><h1>Setting Up the Testing Environment</h1>
<div class='content'><p>Before we dive into writing tests, let's set up our testing environment.</p>
<ol>
<li>
<p><strong>Add Dependencies</strong>: Ensure you have the necessary dependencies in your <code>pom.xml</code> file.</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.mockito&lt;/groupId&gt;
    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
</li>
<li>
<p><strong>Annotations</strong>: Familiarize yourself with key annotations.</p>
<ul>
<li><code>@SpringBootTest</code>: Used for integration testing.</li>
<li><code>@WebMvcTest</code>: Used for testing Spring MVC controllers.</li>
<li><code>@MockBean</code>: Used to add mocks to the Spring ApplicationContext.</li>
</ul>
</li>
</ol>
</div><h1>Unit Testing REST Controllers</h1>
<div class='content'><p>Unit tests focus on individual components. For REST controllers, we can use <code>@WebMvcTest</code>.</p>
</div><h2>Example: Testing a REST Controller</h2>
<div class='content'><p>Let's assume we have a simple <code>UserController</code> with a <code>GET</code> endpoint.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QFJlc3RDb250cm9sbGVyCkBSZXF1ZXN0TWFwcGluZygiL3VzZXJzIikKcHVibGljIGNsYXNzIFVzZXJDb250cm9sbGVyIHsKICAgIEBHZXRNYXBwaW5nKCIve2lkfSIpCiAgICBwdWJsaWMgUmVzcG9uc2VFbnRpdHk8VXNlcj4gZ2V0VXNlckJ5SWQoQFBhdGhWYXJpYWJsZSBMb25nIGlkKSB7CiAgICAgICAgVXNlciB1c2VyID0gbmV3IFVzZXIoaWQsICJKb2huIERvZSIpOwogICAgICAgIHJldHVybiBSZXNwb25zZUVudGl0eS5vayh1c2VyKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@RestController
@RequestMapping(&quot;/users&quot;)
public class UserController {
    @GetMapping(&quot;/{id}&quot;)
    public ResponseEntity&lt;User&gt; getUserById(@PathVariable Long id) {
        User user = new User(id, &quot;John Doe&quot;);
        return ResponseEntity.ok(user);
    }
}</pre></div><div class='content'></div><h2>Writing the Unit Test</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QFJ1bldpdGgoU3ByaW5nUnVubmVyLmNsYXNzKQpAV2ViTXZjVGVzdChVc2VyQ29udHJvbGxlci5jbGFzcykKcHVibGljIGNsYXNzIFVzZXJDb250cm9sbGVyVGVzdCB7CgogICAgQEF1dG93aXJlZAogICAgcHJpdmF0ZSBNb2NrTXZjIG1vY2tNdmM7CgogICAgQFRlc3QKICAgIHB1YmxpYyB2b2lkIHRlc3RHZXRVc2VyQnlJZCgpIHRocm93cyBFeGNlcHRpb24gewogICAgICAgIG1vY2tNdmMucGVyZm9ybShnZXQoIi91c2Vycy8xIikpCiAgICAgICAgICAgICAgICAuYW5kRXhwZWN0KHN0YXR1cygpLmlzT2soKSkKICAgICAgICAgICAgICAgIC5hbmRFeHBlY3QoanNvblBhdGgoIiQubmFtZSIpLnZhbHVlKCJKb2huIERvZSIpKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@RunWith(SpringRunner.class)
@WebMvcTest(UserController.class)
public class UserControllerTest {

    @Autowired
    private MockMvc mockMvc;

    @Test
    public void testGetUserById() throws Exception {
        mockMvc.perform(get(&quot;/users/1&quot;))
                .andExpect(status().isOk())
                .andExpect(jsonPath(&quot;$.name&quot;).value(&quot;John Doe&quot;));
    }
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>@RunWith(SpringRunner.class)</code>: Integrates the Spring TestContext Framework with JUnit.</li>
<li><code>@WebMvcTest(UserController.class)</code>: Configures Spring MVC infrastructure for testing the <code>UserController</code>.</li>
<li><code>MockMvc</code>: A class for performing requests and verifying responses.</li>
<li><code>mockMvc.perform(get(&quot;/users/1&quot;))</code>: Simulates a GET request to <code>/users/1</code>.</li>
<li><code>andExpect(status().isOk())</code>: Asserts that the response status is 200 OK.</li>
<li><code>andExpect(jsonPath(&quot;$.name&quot;).value(&quot;John Doe&quot;))</code>: Asserts that the JSON response contains the expected name.</li>
</ul>
</li>
</ul>
</div><h1>Integration Testing RESTful Services</h1>
<div class='content'><p>Integration tests verify the interaction between multiple components. For this, we use <code>@SpringBootTest</code>.</p>
</div><h2>Example: Integration Test</h2>
<div class='content'><p>Assume we have a <code>UserService</code> that interacts with a database.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QFNlcnZpY2UKcHVibGljIGNsYXNzIFVzZXJTZXJ2aWNlIHsKICAgIHB1YmxpYyBVc2VyIGdldFVzZXJCeUlkKExvbmcgaWQpIHsKICAgICAgICByZXR1cm4gbmV3IFVzZXIoaWQsICJKb2huIERvZSIpOwogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@Service
public class UserService {
    public User getUserById(Long id) {
        return new User(id, &quot;John Doe&quot;);
    }
}</pre></div><div class='content'></div><h2>Writing the Integration Test</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QFJ1bldpdGgoU3ByaW5nUnVubmVyLmNsYXNzKQpAU3ByaW5nQm9vdFRlc3QKcHVibGljIGNsYXNzIFVzZXJTZXJ2aWNlSW50ZWdyYXRpb25UZXN0IHsKCiAgICBAQXV0b3dpcmVkCiAgICBwcml2YXRlIFVzZXJTZXJ2aWNlIHVzZXJTZXJ2aWNlOwoKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0R2V0VXNlckJ5SWQoKSB7CiAgICAgICAgVXNlciB1c2VyID0gdXNlclNlcnZpY2UuZ2V0VXNlckJ5SWQoMUwpOwogICAgICAgIGFzc2VydE5vdE51bGwodXNlcik7CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJKb2huIERvZSIsIHVzZXIuZ2V0TmFtZSgpKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@RunWith(SpringRunner.class)
@SpringBootTest
public class UserServiceIntegrationTest {

    @Autowired
    private UserService userService;

    @Test
    public void testGetUserById() {
        User user = userService.getUserById(1L);
        assertNotNull(user);
        assertEquals(&quot;John Doe&quot;, user.getName());
    }
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>@SpringBootTest</code>: Loads the full application context.</li>
<li><code>@Autowired</code>: Injects the <code>UserService</code> bean.</li>
<li><code>assertNotNull(user)</code>: Asserts that the user object is not null.</li>
<li><code>assertEquals(&quot;John Doe&quot;, user.getName())</code>: Asserts that the user's name is &quot;John Doe&quot;.</li>
</ul>
</li>
</ul>
</div><h1>Mocking Dependencies</h1>
<div class='content'><p>When unit testing, you often need to mock dependencies to isolate the component under test.</p>
</div><h2>Example: Mocking a Service</h2>
<div class='content'><p>Assume <code>UserController</code> depends on <code>UserService</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QFJlc3RDb250cm9sbGVyCkBSZXF1ZXN0TWFwcGluZygiL3VzZXJzIikKcHVibGljIGNsYXNzIFVzZXJDb250cm9sbGVyIHsKICAgIEBBdXRvd2lyZWQKICAgIHByaXZhdGUgVXNlclNlcnZpY2UgdXNlclNlcnZpY2U7CgogICAgQEdldE1hcHBpbmcoIi97aWR9IikKICAgIHB1YmxpYyBSZXNwb25zZUVudGl0eTxVc2VyPiBnZXRVc2VyQnlJZChAUGF0aFZhcmlhYmxlIExvbmcgaWQpIHsKICAgICAgICBVc2VyIHVzZXIgPSB1c2VyU2VydmljZS5nZXRVc2VyQnlJZChpZCk7CiAgICAgICAgcmV0dXJuIFJlc3BvbnNlRW50aXR5Lm9rKHVzZXIpOwogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@RestController
@RequestMapping(&quot;/users&quot;)
public class UserController {
    @Autowired
    private UserService userService;

    @GetMapping(&quot;/{id}&quot;)
    public ResponseEntity&lt;User&gt; getUserById(@PathVariable Long id) {
        User user = userService.getUserById(id);
        return ResponseEntity.ok(user);
    }
}</pre></div><div class='content'></div><h2>Writing the Test with Mocking</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QFJ1bldpdGgoU3ByaW5nUnVubmVyLmNsYXNzKQpAV2ViTXZjVGVzdChVc2VyQ29udHJvbGxlci5jbGFzcykKcHVibGljIGNsYXNzIFVzZXJDb250cm9sbGVyVGVzdCB7CgogICAgQEF1dG93aXJlZAogICAgcHJpdmF0ZSBNb2NrTXZjIG1vY2tNdmM7CgogICAgQE1vY2tCZWFuCiAgICBwcml2YXRlIFVzZXJTZXJ2aWNlIHVzZXJTZXJ2aWNlOwoKICAgIEBUZXN0CiAgICBwdWJsaWMgdm9pZCB0ZXN0R2V0VXNlckJ5SWQoKSB0aHJvd3MgRXhjZXB0aW9uIHsKICAgICAgICBVc2VyIG1vY2tVc2VyID0gbmV3IFVzZXIoMUwsICJKb2huIERvZSIpOwogICAgICAgIHdoZW4odXNlclNlcnZpY2UuZ2V0VXNlckJ5SWQoMUwpKS50aGVuUmV0dXJuKG1vY2tVc2VyKTsKCiAgICAgICAgbW9ja012Yy5wZXJmb3JtKGdldCgiL3VzZXJzLzEiKSkKICAgICAgICAgICAgICAgIC5hbmRFeHBlY3Qoc3RhdHVzKCkuaXNPaygpKQogICAgICAgICAgICAgICAgLmFuZEV4cGVjdChqc29uUGF0aCgiJC5uYW1lIikudmFsdWUoIkpvaG4gRG9lIikpOwogICAgfQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>@RunWith(SpringRunner.class)
@WebMvcTest(UserController.class)
public class UserControllerTest {

    @Autowired
    private MockMvc mockMvc;

    @MockBean
    private UserService userService;

    @Test
    public void testGetUserById() throws Exception {
        User mockUser = new User(1L, &quot;John Doe&quot;);
        when(userService.getUserById(1L)).thenReturn(mockUser);

        mockMvc.perform(get(&quot;/users/1&quot;))
                .andExpect(status().isOk())
                .andExpect(jsonPath(&quot;$.name&quot;).value(&quot;John Doe&quot;));
    }
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>@MockBean</code>: Creates a mock of <code>UserService</code> and injects it into the application context.</li>
<li><code>when(userService.getUserById(1L)).thenReturn(mockUser)</code>: Configures the mock to return <code>mockUser</code> when <code>getUserById</code> is called.</li>
</ul>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Testing RESTful web services in Spring Boot involves both unit and integration tests. Unit tests focus on individual components, often using mocking to isolate dependencies, while integration tests verify the interaction between multiple components. By using tools like <code>MockMvc</code>, <code>JUnit</code>, and <code>Mockito</code>, you can ensure your RESTful services behave as expected, leading to more robust and reliable applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='integration-testing'>&#x25C4;Integration Testing</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Testing RESTful Web Services</a>
	</div>
	<div class='col-4 text-end'>
					<a href='test-containers'>Test Containers &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
