<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Writing and Organizing Configuration</title>

    <link rel="alternate" href="https://campusempresa.com/terraform/writing-and-organizing-configuration" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/terraform/writing-and-organizing-configuration" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/terraform/writing-and-organizing-configuration" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/terraform/writing-and-organizing-configuration" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/terraform/writing-and-organizing-configuration" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='state-management-best-practices'>&#x25C4;State Management Best Practices</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Writing and Organizing Configuration</a>
	</div>
	<div class='col-4 text-end'>
					<a href='version-control-with-terraform'>Version Control with Terraform &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Terraform is an open-source infrastructure as code (IaC) tool that allows you to define and provision data center infrastructure using a declarative configuration language. Writing and organizing configuration effectively is crucial for managing infrastructure at scale. This section will guide you through the basics of writing and organizing Terraform configuration files, from beginner to advanced levels.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Configuration Files</strong>: The primary files where Terraform code is written, typically with a <code>.tf</code> extension.</li>
<li><strong>Modules</strong>: Reusable, self-contained packages of Terraform configurations.</li>
<li><strong>State Files</strong>: Files that keep track of the infrastructure's current state.</li>
<li><strong>Variables</strong>: Parameters that allow you to customize configurations without hardcoding values.</li>
<li><strong>Outputs</strong>: Values that are returned after the execution of a Terraform configuration.</li>
</ul>
</div><h1>Writing Basic Configuration</h1>
<div class='content'></div><h2>Main Configuration File</h2>
<div class='content'><p>The main configuration file is usually named <code>main.tf</code>. Here is a simple example to create an AWS EC2 instance:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgImF3cyIgewogIHJlZ2lvbiA9ICJ1cy13ZXN0LTIiCn0KCnJlc291cmNlICJhd3NfaW5zdGFuY2UiICJleGFtcGxlIiB7CiAgYW1pICAgICAgICAgICA9ICJhbWktMGM1NWIxNTljYmZhZmUxZjAiCiAgaW5zdGFuY2VfdHlwZSA9ICJ0Mi5taWNybyIKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;aws&quot; {
  region = &quot;us-west-2&quot;
}

resource &quot;aws_instance&quot; &quot;example&quot; {
  ami           = &quot;ami-0c55b159cbfafe1f0&quot;
  instance_type = &quot;t2.micro&quot;
}</pre></div><div class='content'><ul>
<li><strong>Provider Block</strong>: Specifies the provider (AWS in this case) and its configuration.</li>
<li><strong>Resource Block</strong>: Defines a resource (an EC2 instance) and its properties.</li>
</ul>
</div><h2>Variables</h2>
<div class='content'><p>Variables allow you to parameterize your configurations. Create a <code>variables.tf</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyaWFibGUgInJlZ2lvbiIgewogIGRlc2NyaXB0aW9uID0gIlRoZSBBV1MgcmVnaW9uIHRvIGRlcGxveSBpbiIKICBkZWZhdWx0ICAgICA9ICJ1cy13ZXN0LTIiCn0KCnZhcmlhYmxlICJpbnN0YW5jZV90eXBlIiB7CiAgZGVzY3JpcHRpb24gPSAiVHlwZSBvZiBFQzIgaW5zdGFuY2UiCiAgZGVmYXVsdCAgICAgPSAidDIubWljcm8iCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>variable &quot;region&quot; {
  description = &quot;The AWS region to deploy in&quot;
  default     = &quot;us-west-2&quot;
}

variable &quot;instance_type&quot; {
  description = &quot;Type of EC2 instance&quot;
  default     = &quot;t2.micro&quot;
}</pre></div><div class='content'><p>Update <code>main.tf</code> to use these variables:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgImF3cyIgewogIHJlZ2lvbiA9IHZhci5yZWdpb24KfQoKcmVzb3VyY2UgImF3c19pbnN0YW5jZSIgImV4YW1wbGUiIHsKICBhbWkgICAgICAgICAgID0gImFtaS0wYzU1YjE1OWNiZmFmZTFmMCIKICBpbnN0YW5jZV90eXBlID0gdmFyLmluc3RhbmNlX3R5cGUKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;aws&quot; {
  region = var.region
}

resource &quot;aws_instance&quot; &quot;example&quot; {
  ami           = &quot;ami-0c55b159cbfafe1f0&quot;
  instance_type = var.instance_type
}</pre></div><div class='content'></div><h2>Outputs</h2>
<div class='content'><p>Outputs allow you to extract useful information from your Terraform state. Create an <code>outputs.tf</code> file:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("b3V0cHV0ICJpbnN0YW5jZV9pZCIgewogIGRlc2NyaXB0aW9uID0gIlRoZSBJRCBvZiB0aGUgRUMyIGluc3RhbmNlIgogIHZhbHVlICAgICAgID0gYXdzX2luc3RhbmNlLmV4YW1wbGUuaWQKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>output &quot;instance_id&quot; {
  description = &quot;The ID of the EC2 instance&quot;
  value       = aws_instance.example.id
}</pre></div><div class='content'></div><h1>Organizing Configuration</h1>
<div class='content'></div><h2>Directory Structure</h2>
<div class='content'><p>A well-organized directory structure is essential for managing complex configurations. Here is a recommended structure:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvamVjdC8K4pSc4pSA4pSAIG1haW4udGYK4pSc4pSA4pSAIHZhcmlhYmxlcy50ZgrilJzilIDilIAgb3V0cHV0cy50ZgrilJzilIDilIAgbW9kdWxlcy8K4pSCICAg4pSU4pSA4pSAIGVjMl9pbnN0YW5jZS8K4pSCICAgICAgIOKUnOKUgOKUgCBtYWluLnRmCuKUgiAgICAgICDilJzilIDilIAgdmFyaWFibGVzLnRmCuKUgiAgICAgICDilJTilIDilIAgb3V0cHV0cy50ZgrilJTilIDilIAgZW52aXJvbm1lbnRzLwogICAg4pSc4pSA4pSAIGRldi8KICAgIOKUgiAgIOKUlOKUgOKUgCBtYWluLnRmCiAgICDilJTilIDilIAgcHJvZC8KICAgICAgICDilJTilIDilIAgbWFpbi50Zg=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>project/
├── main.tf
├── variables.tf
├── outputs.tf
├── modules/
│   └── ec2_instance/
│       ├── main.tf
│       ├── variables.tf
│       └── outputs.tf
└── environments/
    ├── dev/
    │   └── main.tf
    └── prod/
        └── main.tf</pre></div><div class='content'></div><h2>Modules</h2>
<div class='content'><p>Modules are reusable components. Here is an example of how to create and use a module:</p>
<h4>Module Definition (<code>modules/ec2_instance/main.tf</code>)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVzb3VyY2UgImF3c19pbnN0YW5jZSIgImV4YW1wbGUiIHsKICBhbWkgICAgICAgICAgID0gdmFyLmFtaQogIGluc3RhbmNlX3R5cGUgPSB2YXIuaW5zdGFuY2VfdHlwZQp9CgpvdXRwdXQgImluc3RhbmNlX2lkIiB7CiAgdmFsdWUgPSBhd3NfaW5zdGFuY2UuZXhhbXBsZS5pZAp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>resource &quot;aws_instance&quot; &quot;example&quot; {
  ami           = var.ami
  instance_type = var.instance_type
}

output &quot;instance_id&quot; {
  value = aws_instance.example.id
}</pre></div><div class='content'><h4>Module Variables (<code>modules/ec2_instance/variables.tf</code>)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyaWFibGUgImFtaSIgewogIGRlc2NyaXB0aW9uID0gIlRoZSBBTUkgdG8gdXNlIGZvciB0aGUgaW5zdGFuY2UiCn0KCnZhcmlhYmxlICJpbnN0YW5jZV90eXBlIiB7CiAgZGVzY3JpcHRpb24gPSAiVGhlIHR5cGUgb2YgaW5zdGFuY2UgdG8gdXNlIgp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>variable &quot;ami&quot; {
  description = &quot;The AMI to use for the instance&quot;
}

variable &quot;instance_type&quot; {
  description = &quot;The type of instance to use&quot;
}</pre></div><div class='content'><h4>Using the Module (<code>main.tf</code>)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bW9kdWxlICJlYzJfaW5zdGFuY2UiIHsKICBzb3VyY2UgICAgICAgID0gIi4vbW9kdWxlcy9lYzJfaW5zdGFuY2UiCiAgYW1pICAgICAgICAgICA9ICJhbWktMGM1NWIxNTljYmZhZmUxZjAiCiAgaW5zdGFuY2VfdHlwZSA9ICJ0Mi5taWNybyIKfQoKb3V0cHV0ICJpbnN0YW5jZV9pZCIgewogIHZhbHVlID0gbW9kdWxlLmVjMl9pbnN0YW5jZS5pbnN0YW5jZV9pZAp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>module &quot;ec2_instance&quot; {
  source        = &quot;./modules/ec2_instance&quot;
  ami           = &quot;ami-0c55b159cbfafe1f0&quot;
  instance_type = &quot;t2.micro&quot;
}

output &quot;instance_id&quot; {
  value = module.ec2_instance.instance_id
}</pre></div><div class='content'></div><h1>Advanced Configuration</h1>
<div class='content'></div><h2>Workspaces</h2>
<div class='content'><p>Workspaces allow you to manage multiple environments (e.g., dev, prod) within the same configuration.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVycmFmb3JtIHdvcmtzcGFjZSBuZXcgZGV2CnRlcnJhZm9ybSB3b3Jrc3BhY2UgbmV3IHByb2Q="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>terraform workspace new dev
terraform workspace new prod</pre></div><div class='content'></div><h2>Remote State</h2>
<div class='content'><p>Storing state files remotely ensures that your state is consistent and shared among team members.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVycmFmb3JtIHsKICBiYWNrZW5kICJzMyIgewogICAgYnVja2V0ID0gIm15LXRlcnJhZm9ybS1zdGF0ZSIKICAgIGtleSAgICA9ICJnbG9iYWwvczMvdGVycmFmb3JtLnRmc3RhdGUiCiAgICByZWdpb24gPSAidXMtd2VzdC0yIgogIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>terraform {
  backend &quot;s3&quot; {
    bucket = &quot;my-terraform-state&quot;
    key    = &quot;global/s3/terraform.tfstate&quot;
    region = &quot;us-west-2&quot;
  }
}</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Writing and organizing Terraform configuration effectively is crucial for managing infrastructure efficiently. By understanding the basics of configuration files, variables, outputs, and modules, you can create reusable and maintainable Terraform configurations. As you advance, leveraging workspaces and remote state storage will help you manage complex environments and collaborate with your team.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='state-management-best-practices'>&#x25C4;State Management Best Practices</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Writing and Organizing Configuration</a>
	</div>
	<div class='col-4 text-end'>
					<a href='version-control-with-terraform'>Version Control with Terraform &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
