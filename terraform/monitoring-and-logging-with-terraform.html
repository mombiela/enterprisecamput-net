<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoring and Logging with Terraform</title>

    <link rel="alternate" href="https://campusempresa.com/terraform/monitoring-and-logging-with-terraform" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/terraform/monitoring-and-logging-with-terraform" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/terraform/monitoring-and-logging-with-terraform" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/terraform/monitoring-and-logging-with-terraform" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/terraform/monitoring-and-logging-with-terraform" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='integrating-terraform-with-cicd'>&#x25C4;Integrating Terraform with CI/CD</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Monitoring and Logging with Terraform</a>
	</div>
	<div class='col-4 text-end'>
					<a href='custom-providers'>Custom Providers &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Monitoring and logging are essential components of managing infrastructure. They help in tracking the performance, availability, and health of your resources. Terraform, being an Infrastructure as Code (IaC) tool, allows you to automate the setup of monitoring and logging for your infrastructure.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Monitoring</strong>: The process of collecting, analyzing, and using information to track the performance and health of your infrastructure.</li>
<li><strong>Logging</strong>: The practice of recording events that happen within your infrastructure to help diagnose issues and understand system behavior.</li>
<li><strong>Terraform Providers</strong>: Plugins that allow Terraform to interact with cloud providers and other services.</li>
<li><strong>Terraform Resources</strong>: The basic building blocks of Terraform configurations, representing infrastructure components.</li>
</ul>
</div><h1>Setting Up Monitoring with Terraform</h1>
<div class='content'></div><h2>Using AWS CloudWatch</h2>
<div class='content'><p>AWS CloudWatch is a monitoring and observability service that provides data and actionable insights for AWS resources.</p>
<h4>Example: Creating a CloudWatch Alarm</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgImF3cyIgewogIHJlZ2lvbiA9ICJ1cy13ZXN0LTIiCn0KCnJlc291cmNlICJhd3NfY2xvdWR3YXRjaF9tZXRyaWNfYWxhcm0iICJjcHVfYWxhcm0iIHsKICBhbGFybV9uYW1lICAgICAgICAgID0gImhpZ2hfY3B1X3VzYWdlIgogIGNvbXBhcmlzb25fb3BlcmF0b3IgPSAiR3JlYXRlclRoYW5UaHJlc2hvbGQiCiAgZXZhbHVhdGlvbl9wZXJpb2RzICA9ICIyIgogIG1ldHJpY19uYW1lICAgICAgICAgPSAiQ1BVVXRpbGl6YXRpb24iCiAgbmFtZXNwYWNlICAgICAgICAgICA9ICJBV1MvRUMyIgogIHBlcmlvZCAgICAgICAgICAgICAgPSAiMTIwIgogIHN0YXRpc3RpYyAgICAgICAgICAgPSAiQXZlcmFnZSIKICB0aHJlc2hvbGQgICAgICAgICAgID0gIjgwIgogIGFsYXJtX2Rlc2NyaXB0aW9uICAgPSAiVGhpcyBtZXRyaWMgbW9uaXRvcnMgaGlnaCBDUFUgdXNhZ2UiCiAgZGltZW5zaW9ucyA9IHsKICAgIEluc3RhbmNlSWQgPSAiaS0xMjM0NTY3ODkwYWJjZGVmMCIKICB9CiAgYWxhcm1fYWN0aW9ucyA9IFsKICAgICJhcm46YXdzOnNuczp1cy13ZXN0LTI6MTIzNDU2Nzg5MDEyOm15LXNucy10b3BpYyIKICBdCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;aws&quot; {
  region = &quot;us-west-2&quot;
}

resource &quot;aws_cloudwatch_metric_alarm&quot; &quot;cpu_alarm&quot; {
  alarm_name          = &quot;high_cpu_usage&quot;
  comparison_operator = &quot;GreaterThanThreshold&quot;
  evaluation_periods  = &quot;2&quot;
  metric_name         = &quot;CPUUtilization&quot;
  namespace           = &quot;AWS/EC2&quot;
  period              = &quot;120&quot;
  statistic           = &quot;Average&quot;
  threshold           = &quot;80&quot;
  alarm_description   = &quot;This metric monitors high CPU usage&quot;
  dimensions = {
    InstanceId = &quot;i-1234567890abcdef0&quot;
  }
  alarm_actions = [
    &quot;arn:aws:sns:us-west-2:123456789012:my-sns-topic&quot;
  ]
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>provider &quot;aws&quot;</code>: Configures the AWS provider.</li>
<li><code>resource &quot;aws_cloudwatch_metric_alarm&quot;</code>: Defines a CloudWatch alarm resource.</li>
<li><code>alarm_name</code>: The name of the alarm.</li>
<li><code>comparison_operator</code>: The condition to trigger the alarm.</li>
<li><code>evaluation_periods</code>: The number of periods over which data is compared.</li>
<li><code>metric_name</code>: The name of the metric to monitor.</li>
<li><code>namespace</code>: The namespace of the metric.</li>
<li><code>period</code>: The period in seconds over which the specified statistic is applied.</li>
<li><code>statistic</code>: The statistic to apply to the alarm's associated metric.</li>
<li><code>threshold</code>: The value against which the specified statistic is compared.</li>
<li><code>dimensions</code>: Key-value pairs that define the dimensions for the metric.</li>
<li><code>alarm_actions</code>: The actions to execute when this alarm transitions into an ALARM state.</li>
</ul>
</li>
</ul>
</div><h1>Setting Up Logging with Terraform</h1>
<div class='content'></div><h2>Using AWS CloudWatch Logs</h2>
<div class='content'><p>AWS CloudWatch Logs enables you to monitor, store, and access log files from AWS resources.</p>
<h4>Example: Creating a CloudWatch Log Group and Log Stream</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvdmlkZXIgImF3cyIgewogIHJlZ2lvbiA9ICJ1cy13ZXN0LTIiCn0KCnJlc291cmNlICJhd3NfY2xvdWR3YXRjaF9sb2dfZ3JvdXAiICJleGFtcGxlIiB7CiAgbmFtZSAgICAgICAgICAgICAgPSAiZXhhbXBsZS1sb2ctZ3JvdXAiCiAgcmV0ZW50aW9uX2luX2RheXMgPSAxNAp9CgpyZXNvdXJjZSAiYXdzX2Nsb3Vkd2F0Y2hfbG9nX3N0cmVhbSIgImV4YW1wbGUiIHsKICBuYW1lICAgICAgICAgICA9ICJleGFtcGxlLWxvZy1zdHJlYW0iCiAgbG9nX2dyb3VwX25hbWUgPSBhd3NfY2xvdWR3YXRjaF9sb2dfZ3JvdXAuZXhhbXBsZS5uYW1lCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>provider &quot;aws&quot; {
  region = &quot;us-west-2&quot;
}

resource &quot;aws_cloudwatch_log_group&quot; &quot;example&quot; {
  name              = &quot;example-log-group&quot;
  retention_in_days = 14
}

resource &quot;aws_cloudwatch_log_stream&quot; &quot;example&quot; {
  name           = &quot;example-log-stream&quot;
  log_group_name = aws_cloudwatch_log_group.example.name
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>resource &quot;aws_cloudwatch_log_group&quot;</code>: Defines a CloudWatch log group.</li>
<li><code>name</code>: The name of the log group.</li>
<li><code>retention_in_days</code>: The number of days to retain the log events in the specified log group.</li>
<li><code>resource &quot;aws_cloudwatch_log_stream&quot;</code>: Defines a CloudWatch log stream.</li>
<li><code>log_group_name</code>: The name of the log group to associate with the log stream.</li>
</ul>
</li>
</ul>
</div><h1>Advanced Monitoring and Logging</h1>
<div class='content'></div><h2>Combining Monitoring and Logging</h2>
<div class='content'><p>Combining monitoring and logging can provide a comprehensive view of your infrastructure's health and performance.</p>
<h4>Example: Creating an SNS Topic for Alarm Notifications</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cmVzb3VyY2UgImF3c19zbnNfdG9waWMiICJleGFtcGxlIiB7CiAgbmFtZSA9ICJleGFtcGxlLXNucy10b3BpYyIKfQoKcmVzb3VyY2UgImF3c19zbnNfdG9waWNfc3Vic2NyaXB0aW9uIiAiZXhhbXBsZSIgewogIHRvcGljX2FybiA9IGF3c19zbnNfdG9waWMuZXhhbXBsZS5hcm4KICBwcm90b2NvbCAgPSAiZW1haWwiCiAgZW5kcG9pbnQgID0gImV4YW1wbGVAZXhhbXBsZS5jb20iCn0KCnJlc291cmNlICJhd3NfY2xvdWR3YXRjaF9tZXRyaWNfYWxhcm0iICJjcHVfYWxhcm0iIHsKICBhbGFybV9uYW1lICAgICAgICAgID0gImhpZ2hfY3B1X3VzYWdlIgogIGNvbXBhcmlzb25fb3BlcmF0b3IgPSAiR3JlYXRlclRoYW5UaHJlc2hvbGQiCiAgZXZhbHVhdGlvbl9wZXJpb2RzICA9ICIyIgogIG1ldHJpY19uYW1lICAgICAgICAgPSAiQ1BVVXRpbGl6YXRpb24iCiAgbmFtZXNwYWNlICAgICAgICAgICA9ICJBV1MvRUMyIgogIHBlcmlvZCAgICAgICAgICAgICAgPSAiMTIwIgogIHN0YXRpc3RpYyAgICAgICAgICAgPSAiQXZlcmFnZSIKICB0aHJlc2hvbGQgICAgICAgICAgID0gIjgwIgogIGFsYXJtX2Rlc2NyaXB0aW9uICAgPSAiVGhpcyBtZXRyaWMgbW9uaXRvcnMgaGlnaCBDUFUgdXNhZ2UiCiAgZGltZW5zaW9ucyA9IHsKICAgIEluc3RhbmNlSWQgPSAiaS0xMjM0NTY3ODkwYWJjZGVmMCIKICB9CiAgYWxhcm1fYWN0aW9ucyA9IFsKICAgIGF3c19zbnNfdG9waWMuZXhhbXBsZS5hcm4KICBdCn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>resource &quot;aws_sns_topic&quot; &quot;example&quot; {
  name = &quot;example-sns-topic&quot;
}

resource &quot;aws_sns_topic_subscription&quot; &quot;example&quot; {
  topic_arn = aws_sns_topic.example.arn
  protocol  = &quot;email&quot;
  endpoint  = &quot;example@example.com&quot;
}

resource &quot;aws_cloudwatch_metric_alarm&quot; &quot;cpu_alarm&quot; {
  alarm_name          = &quot;high_cpu_usage&quot;
  comparison_operator = &quot;GreaterThanThreshold&quot;
  evaluation_periods  = &quot;2&quot;
  metric_name         = &quot;CPUUtilization&quot;
  namespace           = &quot;AWS/EC2&quot;
  period              = &quot;120&quot;
  statistic           = &quot;Average&quot;
  threshold           = &quot;80&quot;
  alarm_description   = &quot;This metric monitors high CPU usage&quot;
  dimensions = {
    InstanceId = &quot;i-1234567890abcdef0&quot;
  }
  alarm_actions = [
    aws_sns_topic.example.arn
  ]
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>resource &quot;aws_sns_topic&quot;</code>: Defines an SNS topic.</li>
<li><code>resource &quot;aws_sns_topic_subscription&quot;</code>: Subscribes an endpoint to the SNS topic.</li>
<li><code>alarm_actions</code>: Specifies the SNS topic ARN to notify when the alarm state is triggered.</li>
</ul>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Monitoring and logging are critical for maintaining the health and performance of your infrastructure. Terraform simplifies the process of setting up these services by allowing you to define them as code. By integrating monitoring and logging into your Terraform configurations, you can ensure that your infrastructure is well-monitored and issues are promptly addressed.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='integrating-terraform-with-cicd'>&#x25C4;Integrating Terraform with CI/CD</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Monitoring and Logging with Terraform</a>
	</div>
	<div class='col-4 text-end'>
					<a href='custom-providers'>Custom Providers &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
