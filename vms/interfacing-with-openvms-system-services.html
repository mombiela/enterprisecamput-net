<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interfacing with OpenVMS System Services</title>

    <link rel="alternate" href="https://campusempresa.com/vms/interfacing-with-openvms-system-services" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/vms/interfacing-with-openvms-system-services" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/vms/interfacing-with-openvms-system-services" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/vms/interfacing-with-openvms-system-services" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/vms/interfacing-with-openvms-system-services" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='developing-and-debugging-applications'>&#x25C4;Developing and Debugging Applications</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Interfacing with OpenVMS System Services</a>
	</div>
	<div class='col-4 text-end'>
					<a href='deploying-and-maintaining-applications'>Deploying and Maintaining Applications &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Interfacing with OpenVMS system services is a crucial skill for developers working in an OpenVMS environment. This topic will cover the basics of system services, how to call them from various programming languages, and advanced techniques for efficient and effective use.</p>
</div><h1>What are OpenVMS System Services?</h1>
<div class='content'><ul>
<li><strong>Definition</strong>: System services are routines provided by the OpenVMS operating system that perform various system-level operations.</li>
<li><strong>Purpose</strong>: They allow programs to interact with the operating system to perform tasks such as file operations, process control, and inter-process communication.</li>
</ul>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>System Service Calls</strong>: Functions provided by the OS for performing specific tasks.</li>
<li><strong>Descriptors</strong>: Structures used to pass data to and from system services.</li>
<li><strong>Condition Values</strong>: Return codes from system services indicating success or failure.</li>
</ul>
</div><h1>Calling System Services in Different Languages</h1>
<div class='content'></div><h2>Using C</h2>
<div class='content'><p>In C, system services are called using the <code>sys$</code> prefix followed by the service name.</p>
<h4>Example: Creating a Process</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPGRlc2NyaXAuaD4KI2luY2x1ZGUgPGxpYiRyb3V0aW5lcy5oPgojaW5jbHVkZSA8c3NkZWYuaD4KI2luY2x1ZGUgPHN0YXJsZXQuaD4KCmludCBtYWluKCkgewogICAgc3RydWN0IGRzYyRkZXNjcmlwdG9yX3MgcHJvY2Vzc19uYW1lOwogICAgJERFU0NSSVBUT1IocHJvY2Vzc19uYW1lLCAiTVlfUFJPQ0VTUyIpOwoKICAgIHVuc2lnbmVkIGxvbmcgc3RhdHVzID0gc3lzJGNyZXByYygmcHJvY2Vzc19uYW1lLCAuLi4pOwoKICAgIGlmICgkVk1TX1NUQVRVU19TVUNDRVNTKHN0YXR1cykpIHsKICAgICAgICBwcmludGYoIlByb2Nlc3MgY3JlYXRlZCBzdWNjZXNzZnVsbHkuXG4iKTsKICAgIH0gZWxzZSB7CiAgICAgICAgcHJpbnRmKCJFcnJvciBjcmVhdGluZyBwcm9jZXNzOiAlbHhcbiIsIHN0YXR1cyk7CiAgICB9CgogICAgcmV0dXJuIDA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;descrip.h&gt;
#include &lt;lib$routines.h&gt;
#include &lt;ssdef.h&gt;
#include &lt;starlet.h&gt;

int main() {
    struct dsc$descriptor_s process_name;
    $DESCRIPTOR(process_name, &quot;MY_PROCESS&quot;);

    unsigned long status = sys$creprc(&amp;process_name, ...);

    if ($VMS_STATUS_SUCCESS(status)) {
        printf(&quot;Process created successfully.\n&quot;);
    } else {
        printf(&quot;Error creating process: %lx\n&quot;, status);
    }

    return 0;
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>dsc$descriptor_s</code>: Descriptor structure for passing strings.</li>
<li><code>sys$creprc</code>: System service to create a process.</li>
<li><code>$VMS_STATUS_SUCCESS</code>: Macro to check if the status indicates success.</li>
</ul>
</li>
</ul>
</div><h2>Using Fortran</h2>
<div class='content'><p>In Fortran, system services are called using the <code>CALL</code> statement.</p>
<h4>Example: Reading a File</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("UFJPR1JBTSBSZWFkRmlsZQogIElNUExJQ0lUIE5PTkUKICBJTlRFR0VSIDo6IHN0YXR1cwogIENIQVJBQ1RFUigyNTUpIDo6IGJ1ZmZlcgogIElOVEVHRVIgOjogaW9zYigyKQoKICBDQUxMIFNZUyRRSU9XKDAsIGNoYW5uZWwsIElPJF9SRUFEVkJMSywgaW9zYiwgMCwgMCwgYnVmZmVyLCAyNTUsIDAsIDAsIDAsIDApCiAgc3RhdHVzID0gaW9zYigxKQoKICBJRiAoc3RhdHVzIC5FUS4gU1MkX05PUk1BTCkgVEhFTgogICAgUFJJTlQgKiwgJ1JlYWQgc3VjY2Vzc2Z1bDogJywgYnVmZmVyCiAgRUxTRQogICAgUFJJTlQgKiwgJ0Vycm9yIHJlYWRpbmcgZmlsZTogJywgc3RhdHVzCiAgRU5EIElGCkVORCBQUk9HUkFNIFJlYWRGaWxl"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>PROGRAM ReadFile
  IMPLICIT NONE
  INTEGER :: status
  CHARACTER(255) :: buffer
  INTEGER :: iosb(2)

  CALL SYS$QIOW(0, channel, IO$_READVBLK, iosb, 0, 0, buffer, 255, 0, 0, 0, 0)
  status = iosb(1)

  IF (status .EQ. SS$_NORMAL) THEN
    PRINT *, 'Read successful: ', buffer
  ELSE
    PRINT *, 'Error reading file: ', status
  END IF
END PROGRAM ReadFile</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>SYS$QIOW</code>: System service for synchronous I/O operations.</li>
<li><code>IO$_READVBLK</code>: Function code for reading a block of data.</li>
<li><code>iosb</code>: I/O status block to receive the status of the operation.</li>
</ul>
</li>
</ul>
</div><h1>Advanced Techniques</h1>
<div class='content'></div><h2>Using Event Flags</h2>
<div class='content'><p>Event flags are used for synchronization between processes.</p>
<h4>Example: Waiting for an Event</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dW5zaWduZWQgbG9uZyBldmVudF9mbGFnID0gMTsKdW5zaWduZWQgbG9uZyBzdGF0dXMgPSBzeXMkd2FpdGZyKGV2ZW50X2ZsYWcpOwoKaWYgKCRWTVNfU1RBVFVTX1NVQ0NFU1Moc3RhdHVzKSkgewogICAgcHJpbnRmKCJFdmVudCBmbGFnIHNldC5cbiIpOwp9IGVsc2UgewogICAgcHJpbnRmKCJFcnJvciB3YWl0aW5nIGZvciBldmVudCBmbGFnOiAlbHhcbiIsIHN0YXR1cyk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>unsigned long event_flag = 1;
unsigned long status = sys$waitfr(event_flag);

if ($VMS_STATUS_SUCCESS(status)) {
    printf(&quot;Event flag set.\n&quot;);
} else {
    printf(&quot;Error waiting for event flag: %lx\n&quot;, status);
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>sys$waitfr</code>: System service to wait for an event flag to be set.</li>
<li><code>event_flag</code>: Identifier for the event flag.</li>
</ul>
</li>
</ul>
</div><h2>Using Asynchronous I/O</h2>
<div class='content'><p>Asynchronous I/O allows a program to continue executing while an I/O operation is in progress.</p>
<h4>Example: Asynchronous Write</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dW5zaWduZWQgc2hvcnQgaW9zYls0XTsKdW5zaWduZWQgbG9uZyBzdGF0dXMgPSBzeXMkcWlvKDAsIGNoYW5uZWwsIElPJF9XUklURVZCTEssIGlvc2IsIDAsIDAsIGJ1ZmZlciwgbGVuZ3RoLCAwLCAwLCAwLCAwKTsKCmlmICgkVk1TX1NUQVRVU19TVUNDRVNTKHN0YXR1cykpIHsKICAgIHByaW50ZigiV3JpdGUgaW5pdGlhdGVkIHN1Y2Nlc3NmdWxseS5cbiIpOwp9IGVsc2UgewogICAgcHJpbnRmKCJFcnJvciBpbml0aWF0aW5nIHdyaXRlOiAlbHhcbiIsIHN0YXR1cyk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>unsigned short iosb[4];
unsigned long status = sys$qio(0, channel, IO$_WRITEVBLK, iosb, 0, 0, buffer, length, 0, 0, 0, 0);

if ($VMS_STATUS_SUCCESS(status)) {
    printf(&quot;Write initiated successfully.\n&quot;);
} else {
    printf(&quot;Error initiating write: %lx\n&quot;, status);
}</pre></div><div class='content'><ul>
<li><strong>Explanation</strong>:
<ul>
<li><code>sys$qio</code>: System service for initiating an asynchronous I/O operation.</li>
<li><code>iosb</code>: I/O status block to receive the status of the operation.</li>
</ul>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Interfacing with OpenVMS system services is essential for performing system-level operations in an OpenVMS environment. By understanding how to call these services from different programming languages and using advanced techniques like event flags and asynchronous I/O, developers can create robust and efficient applications. Practice with the provided examples and explore additional system services to deepen your understanding.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='developing-and-debugging-applications'>&#x25C4;Developing and Debugging Applications</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Interfacing with OpenVMS System Services</a>
	</div>
	<div class='col-4 text-end'>
					<a href='deploying-and-maintaining-applications'>Deploying and Maintaining Applications &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
