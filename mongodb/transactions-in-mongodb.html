<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transactions in MongoDB</title>

    <link rel="alternate" href="https://campusempresa.com/mongodb/transactions-in-mongodb" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mongodb/transactions-in-mongodb" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mongodb/transactions-in-mongodb" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mongodb/transactions-in-mongodb" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mongodb/transactions-in-mongodb" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='monitoring-and-alerts'>&#x25C4;Monitoring and Alerts</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Transactions in MongoDB</a>
	</div>
	<div class='col-4 text-end'>
					<a href='change-streams'>Change Streams &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Transactions</h1>
<div class='content'><p>Transactions in MongoDB allow you to execute multiple operations in isolation and ensure that they either all succeed or all fail. This is crucial for maintaining data integrity, especially in applications that require atomicity, consistency, isolation, and durability (ACID) properties.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Atomicity</strong>: Ensures that a series of operations are completed entirely or not at all.</li>
<li><strong>Consistency</strong>: Guarantees that the database remains in a valid state before and after the transaction.</li>
<li><strong>Isolation</strong>: Ensures that transactions are securely and independently processed at the same time without interference.</li>
<li><strong>Durability</strong>: Ensures that once a transaction is committed, it will remain so, even in the event of a system failure.</li>
</ul>
</div><h1>Single Document Transactions</h1>
<div class='content'><p>MongoDB automatically provides atomicity for single document operations. This means that any update, insert, or delete operation on a single document is atomic by default.</p>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIuY29sbGVjdGlvbi51cGRhdGVPbmUoCiAgeyBfaWQ6IDEgfSwKICB7ICRzZXQ6IHsgc3RhdHVzOiAiYWN0aXZlIiB9IH0KKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.collection.updateOne(
  { _id: 1 },
  { $set: { status: &quot;active&quot; } }
);</pre></div><div class='content'><p>In this example, the update operation on the document with <code>_id: 1</code> is atomic.</p>
</div><h1>Multi-Document Transactions</h1>
<div class='content'><p>Starting from MongoDB 4.0, multi-document transactions are supported, allowing you to group multiple operations into a single transaction.</p>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3Qgc2Vzc2lvbiA9IGNsaWVudC5zdGFydFNlc3Npb24oKTsKCnNlc3Npb24uc3RhcnRUcmFuc2FjdGlvbigpOwp0cnkgewogIGRiLmNvbGxlY3Rpb24xLmluc2VydE9uZSh7IF9pZDogMSwgbmFtZTogIkFsaWNlIiB9LCB7IHNlc3Npb24gfSk7CiAgZGIuY29sbGVjdGlvbjIuaW5zZXJ0T25lKHsgX2lkOiAyLCBuYW1lOiAiQm9iIiB9LCB7IHNlc3Npb24gfSk7CiAgCiAgc2Vzc2lvbi5jb21taXRUcmFuc2FjdGlvbigpOwp9IGNhdGNoIChlcnJvcikgewogIHNlc3Npb24uYWJvcnRUcmFuc2FjdGlvbigpOwogIHRocm93IGVycm9yOwp9IGZpbmFsbHkgewogIHNlc3Npb24uZW5kU2Vzc2lvbigpOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const session = client.startSession();

session.startTransaction();
try {
  db.collection1.insertOne({ _id: 1, name: &quot;Alice&quot; }, { session });
  db.collection2.insertOne({ _id: 2, name: &quot;Bob&quot; }, { session });
  
  session.commitTransaction();
} catch (error) {
  session.abortTransaction();
  throw error;
} finally {
  session.endSession();
}</pre></div><div class='content'><p>In this example:</p>
<ol>
<li>A session is started.</li>
<li>A transaction is initiated.</li>
<li>Two insert operations are performed within the transaction.</li>
<li>The transaction is committed if both operations succeed.</li>
<li>If an error occurs, the transaction is aborted.</li>
</ol>
</div><h1>Transaction Options</h1>
<div class='content'><p>Transactions can be configured with various options to control their behavior.</p>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3Qgc2Vzc2lvbiA9IGNsaWVudC5zdGFydFNlc3Npb24oKTsKY29uc3QgdHJhbnNhY3Rpb25PcHRpb25zID0gewogIHJlYWRDb25jZXJuOiB7IGxldmVsOiAic25hcHNob3QiIH0sCiAgd3JpdGVDb25jZXJuOiB7IHc6ICJtYWpvcml0eSIgfSwKICByZWFkUHJlZmVyZW5jZTogInByaW1hcnkiCn07CgpzZXNzaW9uLnN0YXJ0VHJhbnNhY3Rpb24odHJhbnNhY3Rpb25PcHRpb25zKTsKdHJ5IHsKICBkYi5jb2xsZWN0aW9uMS5pbnNlcnRPbmUoeyBfaWQ6IDEsIG5hbWU6ICJBbGljZSIgfSwgeyBzZXNzaW9uIH0pOwogIGRiLmNvbGxlY3Rpb24yLmluc2VydE9uZSh7IF9pZDogMiwgbmFtZTogIkJvYiIgfSwgeyBzZXNzaW9uIH0pOwogIAogIHNlc3Npb24uY29tbWl0VHJhbnNhY3Rpb24oKTsKfSBjYXRjaCAoZXJyb3IpIHsKICBzZXNzaW9uLmFib3J0VHJhbnNhY3Rpb24oKTsKICB0aHJvdyBlcnJvcjsKfSBmaW5hbGx5IHsKICBzZXNzaW9uLmVuZFNlc3Npb24oKTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const session = client.startSession();
const transactionOptions = {
  readConcern: { level: &quot;snapshot&quot; },
  writeConcern: { w: &quot;majority&quot; },
  readPreference: &quot;primary&quot;
};

session.startTransaction(transactionOptions);
try {
  db.collection1.insertOne({ _id: 1, name: &quot;Alice&quot; }, { session });
  db.collection2.insertOne({ _id: 2, name: &quot;Bob&quot; }, { session });
  
  session.commitTransaction();
} catch (error) {
  session.abortTransaction();
  throw error;
} finally {
  session.endSession();
}</pre></div><div class='content'><p>In this example, the transaction is configured with specific <code>readConcern</code>, <code>writeConcern</code>, and <code>readPreference</code> options.</p>
</div><h1>Error Handling in Transactions</h1>
<div class='content'><p>Proper error handling is crucial to ensure that transactions are correctly committed or aborted.</p>
</div><h2>Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3Qgc2Vzc2lvbiA9IGNsaWVudC5zdGFydFNlc3Npb24oKTsKCnNlc3Npb24uc3RhcnRUcmFuc2FjdGlvbigpOwp0cnkgewogIGRiLmNvbGxlY3Rpb24xLmluc2VydE9uZSh7IF9pZDogMSwgbmFtZTogIkFsaWNlIiB9LCB7IHNlc3Npb24gfSk7CiAgZGIuY29sbGVjdGlvbjIuaW5zZXJ0T25lKHsgX2lkOiAyLCBuYW1lOiAiQm9iIiB9LCB7IHNlc3Npb24gfSk7CiAgCiAgc2Vzc2lvbi5jb21taXRUcmFuc2FjdGlvbigpOwp9IGNhdGNoIChlcnJvcikgewogIHNlc3Npb24uYWJvcnRUcmFuc2FjdGlvbigpOwogIGNvbnNvbGUuZXJyb3IoIlRyYW5zYWN0aW9uIGFib3J0ZWQgZHVlIHRvIGFuIGVycm9yOiAiLCBlcnJvcik7Cn0gZmluYWxseSB7CiAgc2Vzc2lvbi5lbmRTZXNzaW9uKCk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const session = client.startSession();

session.startTransaction();
try {
  db.collection1.insertOne({ _id: 1, name: &quot;Alice&quot; }, { session });
  db.collection2.insertOne({ _id: 2, name: &quot;Bob&quot; }, { session });
  
  session.commitTransaction();
} catch (error) {
  session.abortTransaction();
  console.error(&quot;Transaction aborted due to an error: &quot;, error);
} finally {
  session.endSession();
}</pre></div><div class='content'><p>In this example, any error during the transaction will cause it to be aborted, and the error will be logged.</p>
</div><h1>Conclusion</h1>
<div class='content'><p>Transactions in MongoDB provide a powerful way to ensure data integrity and consistency across multiple operations. By understanding and utilizing single-document atomic operations and multi-document transactions, you can build robust applications that handle complex data manipulations reliably. Remember to always handle errors gracefully to maintain the stability and reliability of your database operations.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='monitoring-and-alerts'>&#x25C4;Monitoring and Alerts</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Transactions in MongoDB</a>
	</div>
	<div class='col-4 text-end'>
					<a href='change-streams'>Change Streams &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
