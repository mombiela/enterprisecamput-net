<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Many-to-Many Relationships in MongoDB</title>

    <link rel="alternate" href="https://campusempresa.com/mongodb/many-to-many-relationships" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/mongodb/many-to-many-relationships" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/mongodb/many-to-many-relationships" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/mongodb/many-to-many-relationships" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/mongodb/many-to-many-relationships" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='one-to-many-relationships'>&#x25C4;One-to-Many Relationships</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Many-to-Many Relationships in MongoDB</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-aggregation'>Introduction to Aggregation &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Many-to-many relationships are a common data modeling scenario where multiple records in one collection are related to multiple records in another collection. In MongoDB, handling many-to-many relationships requires a different approach compared to traditional relational databases due to its document-oriented nature.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Document-Oriented Database</strong>: MongoDB stores data in flexible, JSON-like documents.</li>
<li><strong>Collections</strong>: Groups of documents in MongoDB, similar to tables in relational databases.</li>
<li><strong>References</strong>: Storing the unique identifier of a related document in another document.</li>
<li><strong>Embedding</strong>: Storing related documents within a single document.</li>
</ul>
</div><h1>Modeling Many-to-Many Relationships</h1>
<div class='content'><p>There are two primary ways to model many-to-many relationships in MongoDB:</p>
<ol>
<li><strong>Using Embedded Documents</strong></li>
<li><strong>Using References</strong></li>
</ol>
</div><h2>Using Embedded Documents</h2>
<div class='content'><p>In this approach, related documents are embedded within each other. This is suitable for scenarios where the related data is not too large and is frequently accessed together.</p>
<h4>Example</h4>
<p>Consider a scenario where students enroll in multiple courses, and each course has multiple students.</p>
<p><strong>Student Document:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJfaWQiOiAic3R1ZGVudDEiLAogICJuYW1lIjogIkFsaWNlIiwKICAiY291cnNlcyI6IFsKICAgIHsKICAgICAgImNvdXJzZV9pZCI6ICJjb3Vyc2UxIiwKICAgICAgImNvdXJzZV9uYW1lIjogIk1hdGggMTAxIgogICAgfSwKICAgIHsKICAgICAgImNvdXJzZV9pZCI6ICJjb3Vyc2UyIiwKICAgICAgImNvdXJzZV9uYW1lIjogIlBoeXNpY3MgMTAxIgogICAgfQogIF0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;_id&quot;: &quot;student1&quot;,
  &quot;name&quot;: &quot;Alice&quot;,
  &quot;courses&quot;: [
    {
      &quot;course_id&quot;: &quot;course1&quot;,
      &quot;course_name&quot;: &quot;Math 101&quot;
    },
    {
      &quot;course_id&quot;: &quot;course2&quot;,
      &quot;course_name&quot;: &quot;Physics 101&quot;
    }
  ]
}</pre></div><div class='content'><p><strong>Course Document:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJfaWQiOiAiY291cnNlMSIsCiAgImNvdXJzZV9uYW1lIjogIk1hdGggMTAxIiwKICAic3R1ZGVudHMiOiBbCiAgICB7CiAgICAgICJzdHVkZW50X2lkIjogInN0dWRlbnQxIiwKICAgICAgInN0dWRlbnRfbmFtZSI6ICJBbGljZSIKICAgIH0sCiAgICB7CiAgICAgICJzdHVkZW50X2lkIjogInN0dWRlbnQyIiwKICAgICAgInN0dWRlbnRfbmFtZSI6ICJCb2IiCiAgICB9CiAgXQp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;_id&quot;: &quot;course1&quot;,
  &quot;course_name&quot;: &quot;Math 101&quot;,
  &quot;students&quot;: [
    {
      &quot;student_id&quot;: &quot;student1&quot;,
      &quot;student_name&quot;: &quot;Alice&quot;
    },
    {
      &quot;student_id&quot;: &quot;student2&quot;,
      &quot;student_name&quot;: &quot;Bob&quot;
    }
  ]
}</pre></div><div class='content'></div><h2>Using References</h2>
<div class='content'><p>In this approach, documents reference each other using unique identifiers. This is more scalable for large datasets and when related data is not always accessed together.</p>
<h4>Example</h4>
<p>Using the same scenario of students and courses, we can store references to related documents.</p>
<p><strong>Student Document:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJfaWQiOiAic3R1ZGVudDEiLAogICJuYW1lIjogIkFsaWNlIiwKICAiY291cnNlX2lkcyI6IFsiY291cnNlMSIsICJjb3Vyc2UyIl0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;_id&quot;: &quot;student1&quot;,
  &quot;name&quot;: &quot;Alice&quot;,
  &quot;course_ids&quot;: [&quot;course1&quot;, &quot;course2&quot;]
}</pre></div><div class='content'><p><strong>Course Document:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ewogICJfaWQiOiAiY291cnNlMSIsCiAgImNvdXJzZV9uYW1lIjogIk1hdGggMTAxIiwKICAic3R1ZGVudF9pZHMiOiBbInN0dWRlbnQxIiwgInN0dWRlbnQyIl0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>{
  &quot;_id&quot;: &quot;course1&quot;,
  &quot;course_name&quot;: &quot;Math 101&quot;,
  &quot;student_ids&quot;: [&quot;student1&quot;, &quot;student2&quot;]
}</pre></div><div class='content'></div><h2>Comparison of Approaches</h2>
<div class='content'><p>| Aspect                | Embedded Documents                                | References                                      |
|-----------------------|---------------------------------------------------|-------------------------------------------------|
| <strong>Data Size</strong>         | Suitable for small, frequently accessed data      | Suitable for large, infrequently accessed data  |
| <strong>Data Consistency</strong>  | Easier to maintain consistency within a document  | Requires additional logic to maintain consistency|
| <strong>Query Performance</strong> | Faster for read operations                        | May require multiple queries                    |
| <strong>Scalability</strong>       | Limited by document size                          | More scalable                                   |</p>
</div><h1>Practical Implementation</h1>
<h2>Creating Collections and Inserting Data</h2>
<div class='content'><p>Let's create collections for students and courses and insert some sample data.</p>
<p><strong>Create Collections:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIuY3JlYXRlQ29sbGVjdGlvbigic3R1ZGVudHMiKTsKZGIuY3JlYXRlQ29sbGVjdGlvbigiY291cnNlcyIpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.createCollection(&quot;students&quot;);
db.createCollection(&quot;courses&quot;);</pre></div><div class='content'><p><strong>Insert Sample Data:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGIuc3R1ZGVudHMuaW5zZXJ0TWFueShbCiAgewogICAgIl9pZCI6ICJzdHVkZW50MSIsCiAgICAibmFtZSI6ICJBbGljZSIsCiAgICAiY291cnNlX2lkcyI6IFsiY291cnNlMSIsICJjb3Vyc2UyIl0KICB9LAogIHsKICAgICJfaWQiOiAic3R1ZGVudDIiLAogICAgIm5hbWUiOiAiQm9iIiwKICAgICJjb3Vyc2VfaWRzIjogWyJjb3Vyc2UxIl0KICB9Cl0pOwoKZGIuY291cnNlcy5pbnNlcnRNYW55KFsKICB7CiAgICAiX2lkIjogImNvdXJzZTEiLAogICAgImNvdXJzZV9uYW1lIjogIk1hdGggMTAxIiwKICAgICJzdHVkZW50X2lkcyI6IFsic3R1ZGVudDEiLCAic3R1ZGVudDIiXQogIH0sCiAgewogICAgIl9pZCI6ICJjb3Vyc2UyIiwKICAgICJjb3Vyc2VfbmFtZSI6ICJQaHlzaWNzIDEwMSIsCiAgICAic3R1ZGVudF9pZHMiOiBbInN0dWRlbnQxIl0KICB9Cl0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>db.students.insertMany([
  {
    &quot;_id&quot;: &quot;student1&quot;,
    &quot;name&quot;: &quot;Alice&quot;,
    &quot;course_ids&quot;: [&quot;course1&quot;, &quot;course2&quot;]
  },
  {
    &quot;_id&quot;: &quot;student2&quot;,
    &quot;name&quot;: &quot;Bob&quot;,
    &quot;course_ids&quot;: [&quot;course1&quot;]
  }
]);

db.courses.insertMany([
  {
    &quot;_id&quot;: &quot;course1&quot;,
    &quot;course_name&quot;: &quot;Math 101&quot;,
    &quot;student_ids&quot;: [&quot;student1&quot;, &quot;student2&quot;]
  },
  {
    &quot;_id&quot;: &quot;course2&quot;,
    &quot;course_name&quot;: &quot;Physics 101&quot;,
    &quot;student_ids&quot;: [&quot;student1&quot;]
  }
]);</pre></div><div class='content'></div><h2>Querying Data</h2>
<div class='content'><p>To retrieve data, we may need to perform multiple queries and join the results in our application logic.</p>
<p><strong>Find Courses for a Student:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3Qgc3R1ZGVudCA9IGRiLnN0dWRlbnRzLmZpbmRPbmUoeyBfaWQ6ICJzdHVkZW50MSIgfSk7CmNvbnN0IGNvdXJzZXMgPSBkYi5jb3Vyc2VzLmZpbmQoeyBfaWQ6IHsgJGluOiBzdHVkZW50LmNvdXJzZV9pZHMgfSB9KS50b0FycmF5KCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const student = db.students.findOne({ _id: &quot;student1&quot; });
const courses = db.courses.find({ _id: { $in: student.course_ids } }).toArray();</pre></div><div class='content'><p><strong>Find Students for a Course:</strong></p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Y29uc3QgY291cnNlID0gZGIuY291cnNlcy5maW5kT25lKHsgX2lkOiAiY291cnNlMSIgfSk7CmNvbnN0IHN0dWRlbnRzID0gZGIuc3R1ZGVudHMuZmluZCh7IF9pZDogeyAkaW46IGNvdXJzZS5zdHVkZW50X2lkcyB9IH0pLnRvQXJyYXkoKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>const course = db.courses.findOne({ _id: &quot;course1&quot; });
const students = db.students.find({ _id: { $in: course.student_ids } }).toArray();</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Modeling many-to-many relationships in MongoDB can be approached using embedded documents or references, each with its own advantages and trade-offs. Understanding the nature of your data and access patterns is crucial in choosing the right approach. By leveraging MongoDB's flexible schema design, you can efficiently manage complex relationships and ensure optimal performance for your applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='one-to-many-relationships'>&#x25C4;One-to-Many Relationships</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Many-to-Many Relationships in MongoDB</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-aggregation'>Introduction to Aggregation &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
