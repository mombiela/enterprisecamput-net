<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introduction to Mocking</title>

    <link rel="alternate" href="https://campusempresa.com/junit/introduction-to-mocking" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/junit/introduction-to-mocking" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/junit/introduction-to-mocking" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/junit/introduction-to-mocking" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/junit/introduction-to-mocking" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='organizing-tests'>&#x25C4;Organizing Tests</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Introduction to Mocking</a>
	</div>
	<div class='col-4 text-end'>
					<a href='using-mockito-with-junit'>Using Mockito with JUnit &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>What is Mocking?</h1>
<div class='content'><p>Mocking is a technique used in unit testing to simulate the behavior of complex, real objects. This allows you to isolate the code you are testing and focus on its functionality without worrying about the dependencies.</p>
<ul>
<li><strong>Purpose</strong>: To test a unit of code in isolation.</li>
<li><strong>Benefits</strong>:
<ul>
<li><strong>Isolation</strong>: Test only the code in question.</li>
<li><strong>Speed</strong>: Faster tests since external dependencies are not invoked.</li>
<li><strong>Control</strong>: Simulate various scenarios and edge cases.</li>
</ul>
</li>
</ul>
</div><h1>Why Use Mocking in JUnit?</h1>
<div class='content'><p>JUnit is a popular testing framework for Java. Mocking in JUnit helps to:</p>
<ul>
<li>Isolate the unit of code being tested.</li>
<li>Simulate different behaviors of dependencies.</li>
<li>Ensure tests are reliable and repeatable.</li>
</ul>
</div><h1>Mocking Frameworks</h1>
<div class='content'><p>Several frameworks can be used for mocking in JUnit, including:</p>
<ul>
<li><strong>Mockito</strong>: The most widely used mocking framework.</li>
<li><strong>EasyMock</strong>: Another popular choice, though less commonly used than Mockito.</li>
<li><strong>JMock</strong>: An older framework, less commonly used today.</li>
</ul>
</div><h1>Setting Up Mockito</h1>
<div class='content'><p>To use Mockito with JUnit, you need to add the Mockito dependency to your project.</p>
</div><h2>Maven Dependency</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("PGRlcGVuZGVuY3k+CiAgICA8Z3JvdXBJZD5vcmcubW9ja2l0bzwvZ3JvdXBJZD4KICAgIDxhcnRpZmFjdElkPm1vY2tpdG8tY29yZTwvYXJ0aWZhY3RJZD4KICAgIDx2ZXJzaW9uPjQuMC4wPC92ZXJzaW9uPgogICAgPHNjb3BlPnRlc3Q8L3Njb3BlPgo8L2RlcGVuZGVuY3k+"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>&lt;dependency&gt;
    &lt;groupId&gt;org.mockito&lt;/groupId&gt;
    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;
    &lt;version&gt;4.0.0&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre></div><div class='content'></div><h2>Gradle Dependency</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dGVzdEltcGxlbWVudGF0aW9uICdvcmcubW9ja2l0bzptb2NraXRvLWNvcmU6NC4wLjAn"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>testImplementation 'org.mockito:mockito-core:4.0.0'</pre></div><div class='content'></div><h1>Basic Mocking Example</h1>
<div class='content'><p>Let's start with a simple example to understand how mocking works.</p>
</div><h2>Example Scenario</h2>
<div class='content'><p>Suppose we have a <code>UserService</code> class that depends on a <code>UserRepository</code> to fetch user data.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIGNsYXNzIFVzZXJTZXJ2aWNlIHsKICAgIHByaXZhdGUgVXNlclJlcG9zaXRvcnkgdXNlclJlcG9zaXRvcnk7CgogICAgcHVibGljIFVzZXJTZXJ2aWNlKFVzZXJSZXBvc2l0b3J5IHVzZXJSZXBvc2l0b3J5KSB7CiAgICAgICAgdGhpcy51c2VyUmVwb3NpdG9yeSA9IHVzZXJSZXBvc2l0b3J5OwogICAgfQoKICAgIHB1YmxpYyBVc2VyIGdldFVzZXJCeUlkKGludCBpZCkgewogICAgICAgIHJldHVybiB1c2VyUmVwb3NpdG9yeS5maW5kQnlJZChpZCk7CiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public class UserService {
    private UserRepository userRepository;

    public UserService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    public User getUserById(int id) {
        return userRepository.findById(id);
    }
}</pre></div><div class='content'></div><h2>Creating a Mock</h2>
<div class='content'><p>We will create a mock of <code>UserRepository</code> to test <code>UserService</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IHN0YXRpYyBvcmcubW9ja2l0by5Nb2NraXRvLio7CmltcG9ydCBvcmcuanVuaXQuanVwaXRlci5hcGkuVGVzdDsKaW1wb3J0IHN0YXRpYyBvcmcuanVuaXQuanVwaXRlci5hcGkuQXNzZXJ0aW9ucy4qOwoKcHVibGljIGNsYXNzIFVzZXJTZXJ2aWNlVGVzdCB7CgogICAgQFRlc3QKICAgIHB1YmxpYyB2b2lkIHRlc3RHZXRVc2VyQnlJZCgpIHsKICAgICAgICAvLyBDcmVhdGUgYSBtb2NrIG9mIFVzZXJSZXBvc2l0b3J5CiAgICAgICAgVXNlclJlcG9zaXRvcnkgbW9ja1JlcG9zaXRvcnkgPSBtb2NrKFVzZXJSZXBvc2l0b3J5LmNsYXNzKTsKCiAgICAgICAgLy8gRGVmaW5lIGJlaGF2aW9yIGZvciB0aGUgbW9jawogICAgICAgIFVzZXIgbW9ja1VzZXIgPSBuZXcgVXNlcigxLCAiSm9obiBEb2UiKTsKICAgICAgICB3aGVuKG1vY2tSZXBvc2l0b3J5LmZpbmRCeUlkKDEpKS50aGVuUmV0dXJuKG1vY2tVc2VyKTsKCiAgICAgICAgLy8gSW5qZWN0IHRoZSBtb2NrIGludG8gVXNlclNlcnZpY2UKICAgICAgICBVc2VyU2VydmljZSB1c2VyU2VydmljZSA9IG5ldyBVc2VyU2VydmljZShtb2NrUmVwb3NpdG9yeSk7CgogICAgICAgIC8vIENhbGwgdGhlIG1ldGhvZCB0byB0ZXN0CiAgICAgICAgVXNlciB1c2VyID0gdXNlclNlcnZpY2UuZ2V0VXNlckJ5SWQoMSk7CgogICAgICAgIC8vIFZlcmlmeSB0aGUgcmVzdWx0CiAgICAgICAgYXNzZXJ0RXF1YWxzKCJKb2huIERvZSIsIHVzZXIuZ2V0TmFtZSgpKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import static org.mockito.Mockito.*;
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

public class UserServiceTest {

    @Test
    public void testGetUserById() {
        // Create a mock of UserRepository
        UserRepository mockRepository = mock(UserRepository.class);

        // Define behavior for the mock
        User mockUser = new User(1, &quot;John Doe&quot;);
        when(mockRepository.findById(1)).thenReturn(mockUser);

        // Inject the mock into UserService
        UserService userService = new UserService(mockRepository);

        // Call the method to test
        User user = userService.getUserById(1);

        // Verify the result
        assertEquals(&quot;John Doe&quot;, user.getName());
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Creating a Mock</strong>: <code>mock(UserRepository.class)</code> creates a mock object of <code>UserRepository</code>.</li>
<li><strong>Defining Behavior</strong>: <code>when(mockRepository.findById(1)).thenReturn(mockUser)</code> specifies that when <code>findById(1)</code> is called on the mock, it should return <code>mockUser</code>.</li>
<li><strong>Injecting the Mock</strong>: The mock is passed to the <code>UserService</code> constructor.</li>
<li><strong>Verifying the Result</strong>: The test checks if the returned user has the expected name.</li>
</ul>
</div><h1>Advanced Mocking Techniques</h1>
<h2>Verifying Interactions</h2>
<div class='content'><p>You can verify if certain methods were called on the mock.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmVyaWZ5KG1vY2tSZXBvc2l0b3J5KS5maW5kQnlJZCgxKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>verify(mockRepository).findById(1);</pre></div><div class='content'></div><h2>Stubbing Void Methods</h2>
<div class='content'><p>For methods that return <code>void</code>, you can use <code>doNothing()</code>, <code>doThrow()</code>, etc.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZG9Ob3RoaW5nKCkud2hlbihtb2NrUmVwb3NpdG9yeSkuZGVsZXRlQnlJZCgxKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>doNothing().when(mockRepository).deleteById(1);</pre></div><div class='content'></div><h2>Argument Matchers</h2>
<div class='content'><p>Mockito provides matchers to specify flexible argument matching.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("d2hlbihtb2NrUmVwb3NpdG9yeS5maW5kQnlJZChhbnlJbnQoKSkpLnRoZW5SZXR1cm4obW9ja1VzZXIpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>when(mockRepository.findById(anyInt())).thenReturn(mockUser);</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>Mocking is a powerful technique in unit testing that allows you to isolate the code under test by simulating dependencies. Using frameworks like Mockito with JUnit, you can create mocks, define their behavior, and verify interactions to ensure your code works as expected. This helps in writing reliable, fast, and maintainable tests.</p>
<p>By mastering mocking, you can significantly improve the quality of your unit tests and, consequently, the robustness of your codebase.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='organizing-tests'>&#x25C4;Organizing Tests</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Introduction to Mocking</a>
	</div>
	<div class='col-4 text-end'>
					<a href='using-mockito-with-junit'>Using Mockito with JUnit &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
