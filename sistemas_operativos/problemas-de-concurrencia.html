<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Concurrency Problems: Race Conditions and Deadlocks</title>

    <link rel="alternate" href="https://campusempresa.com/sistemas_operativos/problemas-de-concurrencia" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/sistemas_operativos/problemas-de-concurrencia" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/sistemas_operativos/problemas-de-concurrencia" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/sistemas_operativos/problemas-de-concurrencia" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/sistemas_operativos/problemas-de-concurrencia" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='content'></div><h1>Introduction</h1>
<div class='content'><p>In modern operating systems, concurrency is a crucial aspect that allows the simultaneous execution of multiple processes or threads. However, concurrency also introduces complex problems such as race conditions and deadlocks. This topic will address these problems, their causes, and how they can be mitigated.</p>
</div><h1>Race Conditions</h1>
<div class='content'></div><h2>Definition</h2>
<div class='content'><p>A race condition occurs when the behavior of software depends on the order in which operations of concurrent threads or processes are executed. This can lead to unexpected results and errors that are difficult to reproduce.</p>
</div><h2>Example of a Race Condition</h2>
<div class='content'><p>Consider a counter shared between two threads:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxwdGhyZWFkLmg+CgppbnQgY291bnRlciA9IDA7CnB0aHJlYWRfbXV0ZXhfdCBsb2NrOwoKdm9pZCogaW5jcmVtZW50KHZvaWQqIGFyZykgewogICAgZm9yIChpbnQgaSA9IDA7IGkgPCAxMDAwMDAwOyBpKyspIHsKICAgICAgICBwdGhyZWFkX211dGV4X2xvY2soJmxvY2spOwogICAgICAgIGNvdW50ZXIrKzsKICAgICAgICBwdGhyZWFkX211dGV4X3VubG9jaygmbG9jayk7CiAgICB9CiAgICByZXR1cm4gTlVMTDsKfQoKaW50IG1haW4oKSB7CiAgICBwdGhyZWFkX3QgdDEsIHQyOwogICAgcHRocmVhZF9tdXRleF9pbml0KCZsb2NrLCBOVUxMKTsKCiAgICBwdGhyZWFkX2NyZWF0ZSgmdDEsIE5VTEwsIGluY3JlbWVudCwgTlVMTCk7CiAgICBwdGhyZWFkX2NyZWF0ZSgmdDIsIE5VTEwsIGluY3JlbWVudCwgTlVMTCk7CgogICAgcHRocmVhZF9qb2luKHQxLCBOVUxMKTsKICAgIHB0aHJlYWRfam9pbih0MiwgTlVMTCk7CgogICAgcHJpbnRmKCJGaW5hbCBjb3VudGVyIHZhbHVlOiAlZFxuIiwgY291bnRlcik7CiAgICBwdGhyZWFkX211dGV4X2Rlc3Ryb3koJmxvY2spOwogICAgcmV0dXJuIDA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;pthread.h&gt;

int counter = 0;
pthread_mutex_t lock;

void* increment(void* arg) {
    for (int i = 0; i &lt; 1000000; i++) {
        pthread_mutex_lock(&amp;lock);
        counter++;
        pthread_mutex_unlock(&amp;lock);
    }
    return NULL;
}

int main() {
    pthread_t t1, t2;
    pthread_mutex_init(&amp;lock, NULL);

    pthread_create(&amp;t1, NULL, increment, NULL);
    pthread_create(&amp;t2, NULL, increment, NULL);

    pthread_join(t1, NULL);
    pthread_join(t2, NULL);

    printf(&quot;Final counter value: %d\n&quot;, counter);
    pthread_mutex_destroy(&amp;lock);
    return 0;
}</pre></div><div class='content'></div><h2>Mitigation</h2>
<div class='content'><ul>
<li><strong>Locks:</strong> Use synchronization mechanisms such as mutexes to ensure that only one thread can access a critical section at a time.</li>
<li><strong>Atomic Variables:</strong> Use atomic variables that guarantee indivisible operations.</li>
</ul>
</div><h1>Deadlocks</h1>
<div class='content'></div><h2>Definition</h2>
<div class='content'><p>A deadlock is a situation where two or more processes or threads are indefinitely blocked, waiting for resources that are being held by other processes or threads in the same set.</p>
</div><h2>Example of a Deadlock</h2>
<div class='content'><p>Consider two threads trying to acquire two locks in reverse order:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxwdGhyZWFkLmg+CgpwdGhyZWFkX211dGV4X3QgbG9jazE7CnB0aHJlYWRfbXV0ZXhfdCBsb2NrMjsKCnZvaWQqIHRocmVhZDEodm9pZCogYXJnKSB7CiAgICBwdGhyZWFkX211dGV4X2xvY2soJmxvY2sxKTsKICAgIHNsZWVwKDEpOyAvLyBTaW11bGF0ZSBzb21lIG9wZXJhdGlvbgogICAgcHRocmVhZF9tdXRleF9sb2NrKCZsb2NrMik7CgogICAgcHJpbnRmKCJUaHJlYWQgMSBhY3F1aXJlZCBib3RoIGxvY2tzXG4iKTsKCiAgICBwdGhyZWFkX211dGV4X3VubG9jaygmbG9jazIpOwogICAgcHRocmVhZF9tdXRleF91bmxvY2soJmxvY2sxKTsKICAgIHJldHVybiBOVUxMOwp9Cgp2b2lkKiB0aHJlYWQyKHZvaWQqIGFyZykgewogICAgcHRocmVhZF9tdXRleF9sb2NrKCZsb2NrMik7CiAgICBzbGVlcCgxKTsgLy8gU2ltdWxhdGUgc29tZSBvcGVyYXRpb24KICAgIHB0aHJlYWRfbXV0ZXhfbG9jaygmbG9jazEpOwoKICAgIHByaW50ZigiVGhyZWFkIDIgYWNxdWlyZWQgYm90aCBsb2Nrc1xuIik7CgogICAgcHRocmVhZF9tdXRleF91bmxvY2soJmxvY2sxKTsKICAgIHB0aHJlYWRfbXV0ZXhfdW5sb2NrKCZsb2NrMik7CiAgICByZXR1cm4gTlVMTDsKfQoKaW50IG1haW4oKSB7CiAgICBwdGhyZWFkX3QgdDEsIHQyOwogICAgcHRocmVhZF9tdXRleF9pbml0KCZsb2NrMSwgTlVMTCk7CiAgICBwdGhyZWFkX211dGV4X2luaXQoJmxvY2syLCBOVUxMKTsKCiAgICBwdGhyZWFkX2NyZWF0ZSgmdDEsIE5VTEwsIHRocmVhZDEsIE5VTEwpOwogICAgcHRocmVhZF9jcmVhdGUoJnQyLCBOVUxMLCB0aHJlYWQyLCBOVUxMKTsKCiAgICBwdGhyZWFkX2pvaW4odDEsIE5VTEwpOwogICAgcHRocmVhZF9qb2luKHQyLCBOVUxMKTsKCiAgICBwdGhyZWFkX211dGV4X2Rlc3Ryb3koJmxvY2sxKTsKICAgIHB0aHJlYWRfbXV0ZXhfZGVzdHJveSgmbG9jazIpOwogICAgcmV0dXJuIDA7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#include &lt;stdio.h&gt;
#include &lt;pthread.h&gt;

pthread_mutex_t lock1;
pthread_mutex_t lock2;

void* thread1(void* arg) {
    pthread_mutex_lock(&amp;lock1);
    sleep(1); // Simulate some operation
    pthread_mutex_lock(&amp;lock2);

    printf(&quot;Thread 1 acquired both locks\n&quot;);

    pthread_mutex_unlock(&amp;lock2);
    pthread_mutex_unlock(&amp;lock1);
    return NULL;
}

void* thread2(void* arg) {
    pthread_mutex_lock(&amp;lock2);
    sleep(1); // Simulate some operation
    pthread_mutex_lock(&amp;lock1);

    printf(&quot;Thread 2 acquired both locks\n&quot;);

    pthread_mutex_unlock(&amp;lock1);
    pthread_mutex_unlock(&amp;lock2);
    return NULL;
}

int main() {
    pthread_t t1, t2;
    pthread_mutex_init(&amp;lock1, NULL);
    pthread_mutex_init(&amp;lock2, NULL);

    pthread_create(&amp;t1, NULL, thread1, NULL);
    pthread_create(&amp;t2, NULL, thread2, NULL);

    pthread_join(t1, NULL);
    pthread_join(t2, NULL);

    pthread_mutex_destroy(&amp;lock1);
    pthread_mutex_destroy(&amp;lock2);
    return 0;
}</pre></div><div class='content'></div><h2>Mitigation</h2>
<div class='content'><ul>
<li><strong>Avoid Circular Wait:</strong> Ensure that all processes acquire resources in the same order.</li>
<li><strong>Detection and Recovery:</strong> Implement algorithms that detect deadlocks and take corrective actions.</li>
<li><strong>Resource Allocation:</strong> Use techniques like the bankerâ€™s algorithm to avoid resource allocation that could lead to a deadlock.</li>
</ul>
</div><h1>Comparison of Race Conditions and Deadlocks</h1>
<div class='content'><p>| Aspect                | Race Condition                               | Deadlock                                  |
|-----------------------|----------------------------------------------|-------------------------------------------|
| Definition            | Behavior depends on execution order          | Indefinite blocking waiting for resources |
| Cause                 | Concurrent access to shared resources        | Circular wait for resources               |
| Mitigation            | Locks, atomic variables                      | Avoid circular wait, detection and recovery |
| Detection             | Difficult to reproduce and detect            | Specific algorithms can detect it         |</p>
</div><h1>Conclusion</h1>
<div class='content'><p>Concurrency problems such as race conditions and deadlocks are critical challenges in the design of operating systems and concurrent applications. Understanding these problems and applying appropriate techniques to mitigate them is essential for developing robust and efficient software.</p>
</div></div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiÃ¨ncia d'Ãºs i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">EntÃ¨s!</a>
    <a href="/cookies">MÃ©s informaciÃ³</a>
</div>	

	</div>    
</body>
</html>
