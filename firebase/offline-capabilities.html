<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offline Capabilities</title>

    <link rel="alternate" href="https://campusempresa.com/firebase/offline-capabilities" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/firebase/offline-capabilities" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/firebase/offline-capabilities" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/firebase/offline-capabilities" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/firebase/offline-capabilities" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='realtime-database-security-rules'>&#x25C4;Realtime Database Security Rules</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Offline Capabilities</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-firebase-storage'>Introduction to Firebase Storage &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Firebase provides robust offline capabilities that allow your app to remain functional even when the device is not connected to the internet. This feature is crucial for creating a seamless user experience, especially in areas with unreliable network connectivity. In this section, we will explore how Firebase handles offline data and how you can implement these features in your application.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Local Data Storage</strong>: Firebase stores a local copy of your data, allowing read and write operations to be performed even when offline.</li>
<li><strong>Data Synchronization</strong>: Changes made while offline are synchronized with the Firebase server once the device reconnects to the internet.</li>
<li><strong>Persistence</strong>: Firebase can persist data on the device across app restarts.</li>
</ul>
</div><h1>Enabling Offline Capabilities</h1>
<div class='content'><p>To enable offline capabilities in Firebase, you need to configure your Firebase Realtime Database or Firestore to support offline data persistence.</p>
</div><h2>Realtime Database</h2>
<div class='content'><p>For the Firebase Realtime Database, you can enable offline persistence with a single line of code.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRW5hYmxlIG9mZmxpbmUgcGVyc2lzdGVuY2UKZmlyZWJhc2UuZGF0YWJhc2UoKS5zZXRQZXJzaXN0ZW5jZUVuYWJsZWQodHJ1ZSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Enable offline persistence
firebase.database().setPersistenceEnabled(true);</pre></div><div class='content'><p>This command ensures that your app will store data locally and synchronize it with the server when the device is back online.</p>
</div><h2>Firestore</h2>
<div class='content'><p>Firestore requires a similar setup to enable offline persistence.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRW5hYmxlIG9mZmxpbmUgcGVyc2lzdGVuY2UKZmlyZWJhc2UuZmlyZXN0b3JlKCkuZW5hYmxlUGVyc2lzdGVuY2UoKQogIC5jYXRjaChmdW5jdGlvbihlcnIpIHsKICAgIGlmIChlcnIuY29kZSA9PSAnZmFpbGVkLXByZWNvbmRpdGlvbicpIHsKICAgICAgLy8gTXVsdGlwbGUgdGFicyBvcGVuLCBwZXJzaXN0ZW5jZSBjYW4gb25seSBiZSBlbmFibGVkCiAgICAgIC8vIGluIG9uZSB0YWIgYXQgYSBhIHRpbWUuCiAgICAgIGNvbnNvbGUuZXJyb3IoIlBlcnNpc3RlbmNlIGZhaWxlZDogTXVsdGlwbGUgdGFicyBvcGVuIik7CiAgICB9IGVsc2UgaWYgKGVyci5jb2RlID09ICd1bmltcGxlbWVudGVkJykgewogICAgICAvLyBUaGUgY3VycmVudCBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgYWxsIG9mIHRoZQogICAgICAvLyBmZWF0dXJlcyByZXF1aXJlZCB0byBlbmFibGUgcGVyc2lzdGVuY2UKICAgICAgY29uc29sZS5lcnJvcigiUGVyc2lzdGVuY2UgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGJyb3dzZXIiKTsKICAgIH0KICB9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Enable offline persistence
firebase.firestore().enablePersistence()
  .catch(function(err) {
    if (err.code == 'failed-precondition') {
      // Multiple tabs open, persistence can only be enabled
      // in one tab at a a time.
      console.error(&quot;Persistence failed: Multiple tabs open&quot;);
    } else if (err.code == 'unimplemented') {
      // The current browser does not support all of the
      // features required to enable persistence
      console.error(&quot;Persistence is not available in this browser&quot;);
    }
  });</pre></div><div class='content'><p>This code snippet enables offline persistence and handles potential errors that might occur if the browser does not support this feature.</p>
</div><h1>Handling Offline Data</h1>
<div class='content'><p>When your app is offline, Firebase will use the locally stored data to serve read and write requests. Here’s how you can handle data operations while offline.</p>
</div><h2>Reading Data</h2>
<div class='content'><p>When reading data, Firebase will first check the local cache before attempting to fetch from the server.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUmVhZGluZyBkYXRhIGZyb20gRmlyZXN0b3JlCmZpcmViYXNlLmZpcmVzdG9yZSgpLmNvbGxlY3Rpb24oJ3VzZXJzJykuZG9jKCd1c2VyX2lkJykKICAuZ2V0KCkKICAudGhlbigoZG9jKSA9PiB7CiAgICBpZiAoZG9jLmV4aXN0cykgewogICAgICBjb25zb2xlLmxvZygiRG9jdW1lbnQgZGF0YToiLCBkb2MuZGF0YSgpKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUubG9nKCJObyBzdWNoIGRvY3VtZW50ISIpOwogICAgfQogIH0pLmNhdGNoKChlcnJvcikgPT4gewogICAgY29uc29sZS5sb2coIkVycm9yIGdldHRpbmcgZG9jdW1lbnQ6IiwgZXJyb3IpOwogIH0pOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Reading data from Firestore
firebase.firestore().collection('users').doc('user_id')
  .get()
  .then((doc) =&gt; {
    if (doc.exists) {
      console.log(&quot;Document data:&quot;, doc.data());
    } else {
      console.log(&quot;No such document!&quot;);
    }
  }).catch((error) =&gt; {
    console.log(&quot;Error getting document:&quot;, error);
  });</pre></div><div class='content'></div><h2>Writing Data</h2>
<div class='content'><p>When writing data, Firebase will queue the write operations and execute them once the device is back online.</p>
<h4>Example</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gV3JpdGluZyBkYXRhIHRvIEZpcmVzdG9yZQpmaXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKCd1c2VycycpLmRvYygndXNlcl9pZCcpCiAgLnNldCh7CiAgICBuYW1lOiAiSm9obiBEb2UiLAogICAgZW1haWw6ICJqb2huLmRvZUBleGFtcGxlLmNvbSIKICB9KQogIC50aGVuKCgpID0+IHsKICAgIGNvbnNvbGUubG9nKCJEb2N1bWVudCBzdWNjZXNzZnVsbHkgd3JpdHRlbiEiKTsKICB9KQogIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIHdyaXRpbmcgZG9jdW1lbnQ6ICIsIGVycm9yKTsKICB9KTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Writing data to Firestore
firebase.firestore().collection('users').doc('user_id')
  .set({
    name: &quot;John Doe&quot;,
    email: &quot;john.doe@example.com&quot;
  })
  .then(() =&gt; {
    console.log(&quot;Document successfully written!&quot;);
  })
  .catch((error) =&gt; {
    console.error(&quot;Error writing document: &quot;, error);
  });</pre></div><div class='content'></div><h1>Synchronization</h1>
<div class='content'><p>Once the device reconnects to the internet, Firebase will automatically synchronize the local data with the server. This process ensures that any changes made while offline are reflected in the server database.</p>
</div><h2>Conflict Resolution</h2>
<div class='content'><p>Firebase handles conflict resolution by using the last write wins strategy. This means that the most recent write operation will overwrite any previous data.</p>
</div><h1>Summary</h1>
<div class='content'><p>In this section, we covered the following key points:</p>
<ul>
<li>Firebase provides offline capabilities through local data storage and synchronization.</li>
<li>Enabling offline persistence is straightforward for both Realtime Database and Firestore.</li>
<li>Firebase handles read and write operations while offline by using local data and queues.</li>
<li>Synchronization occurs automatically when the device reconnects to the internet, with conflict resolution managed by Firebase.</li>
</ul>
<p>By leveraging Firebase's offline capabilities, you can ensure that your app remains functional and provides a smooth user experience even in the absence of a stable internet connection.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='realtime-database-security-rules'>&#x25C4;Realtime Database Security Rules</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Offline Capabilities</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-firebase-storage'>Introduction to Firebase Storage &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
