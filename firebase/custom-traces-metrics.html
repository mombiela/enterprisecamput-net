<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Traces and Metrics</title>

    <link rel="alternate" href="https://campusempresa.com/firebase/custom-traces-metrics" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/firebase/custom-traces-metrics" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/firebase/custom-traces-metrics" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/firebase/custom-traces-metrics" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/firebase/custom-traces-metrics" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='monitoring-app-performance'>&#x25C4;Monitoring App Performance</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Custom Traces and Metrics</a>
	</div>
	<div class='col-4 text-end'>
					<a href='analyzing-performance-data'>Analyzing Performance Data &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Firebase Performance Monitoring is a powerful tool that helps you gain insights into your app's performance. Custom traces and metrics allow you to monitor specific parts of your app's performance that are critical to your user experience.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Custom Trace</strong>: A custom trace is a way to measure the performance of a specific section of your code. You can start and stop traces to measure the time taken for certain operations.</li>
<li><strong>Custom Metric</strong>: Custom metrics are used to count the number of times certain events occur or to measure values that are important to your app's performance.</li>
</ul>
</div><h1>Setting Up Firebase Performance Monitoring</h1>
<div class='content'><p>Before you can use custom traces and metrics, you need to set up Firebase Performance Monitoring in your project.</p>
</div><h2>Step 1: Add Firebase to Your Project</h2>
<div class='content'><p>Follow the official Firebase documentation to add Firebase to your Android or iOS project.</p>
</div><h2>Step 2: Add Performance Monitoring SDK</h2>
<div class='content'><p>Add the Firebase Performance Monitoring SDK to your project.</p>
<p>For Android (build.gradle):</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZGVwZW5kZW5jaWVzIHsKICAgIGltcGxlbWVudGF0aW9uICdjb20uZ29vZ2xlLmZpcmViYXNlOmZpcmViYXNlLXBlcmY6MjAuMC4zJwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>dependencies {
    implementation 'com.google.firebase:firebase-perf:20.0.3'
}</pre></div><div class='content'><p>For iOS (Podfile):</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cG9kICdGaXJlYmFzZS9QZXJmb3JtYW5jZSc="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>pod 'Firebase/Performance'</pre></div><div class='content'></div><h1>Using Custom Traces</h1>
<div class='content'><p>Custom traces help you measure the time taken for specific operations in your app.</p>
</div><h2>Creating a Custom Trace</h2>
<div class='content'><p>To create a custom trace, you need to define a trace object and start and stop it around the code you want to measure.</p>
<h4>Example: Measuring a Network Request (Android)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IGNvbS5nb29nbGUuZmlyZWJhc2UucGVyZi5GaXJlYmFzZVBlcmZvcm1hbmNlOwppbXBvcnQgY29tLmdvb2dsZS5maXJlYmFzZS5wZXJmLm1ldHJpY3MuVHJhY2U7CgpwdWJsaWMgdm9pZCBmZXRjaERhdGEoKSB7CiAgICAvLyBDcmVhdGUgYSB0cmFjZSBvYmplY3QKICAgIFRyYWNlIG15VHJhY2UgPSBGaXJlYmFzZVBlcmZvcm1hbmNlLmdldEluc3RhbmNlKCkubmV3VHJhY2UoImZldGNoRGF0YVRyYWNlIik7CiAgICAKICAgIC8vIFN0YXJ0IHRoZSB0cmFjZQogICAgbXlUcmFjZS5zdGFydCgpOwoKICAgIC8vIENvZGUgdG8gbWVhc3VyZQogICAgLy8gU2ltdWxhdGUgbmV0d29yayByZXF1ZXN0CiAgICB0cnkgewogICAgICAgIFRocmVhZC5zbGVlcCgyMDAwKTsgLy8gU2ltdWxhdGUgbmV0d29yayBkZWxheQogICAgfSBjYXRjaCAoSW50ZXJydXB0ZWRFeGNlcHRpb24gZSkgewogICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICB9CgogICAgLy8gU3RvcCB0aGUgdHJhY2UKICAgIG15VHJhY2Uuc3RvcCgpOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import com.google.firebase.perf.FirebasePerformance;
import com.google.firebase.perf.metrics.Trace;

public void fetchData() {
    // Create a trace object
    Trace myTrace = FirebasePerformance.getInstance().newTrace(&quot;fetchDataTrace&quot;);
    
    // Start the trace
    myTrace.start();

    // Code to measure
    // Simulate network request
    try {
        Thread.sleep(2000); // Simulate network delay
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    // Stop the trace
    myTrace.stop();
}</pre></div><div class='content'><h4>Example: Measuring a Network Request (iOS)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IEZpcmViYXNlUGVyZm9ybWFuY2UKCmZ1bmMgZmV0Y2hEYXRhKCkgewogICAgLy8gQ3JlYXRlIGEgdHJhY2Ugb2JqZWN0CiAgICBsZXQgdHJhY2UgPSBQZXJmb3JtYW5jZS5zdGFydFRyYWNlKG5hbWU6ICJmZXRjaERhdGFUcmFjZSIpCiAgICAKICAgIC8vIENvZGUgdG8gbWVhc3VyZQogICAgLy8gU2ltdWxhdGUgbmV0d29yayByZXF1ZXN0CiAgICBEaXNwYXRjaFF1ZXVlLmdsb2JhbCgpLmFzeW5jIHsKICAgICAgICBzbGVlcCgyKSAvLyBTaW11bGF0ZSBuZXR3b3JrIGRlbGF5CiAgICAgICAgCiAgICAgICAgLy8gU3RvcCB0aGUgdHJhY2UKICAgICAgICB0cmFjZT8uc3RvcCgpCiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import FirebasePerformance

func fetchData() {
    // Create a trace object
    let trace = Performance.startTrace(name: &quot;fetchDataTrace&quot;)
    
    // Code to measure
    // Simulate network request
    DispatchQueue.global().async {
        sleep(2) // Simulate network delay
        
        // Stop the trace
        trace?.stop()
    }
}</pre></div><div class='content'></div><h1>Using Custom Metrics</h1>
<div class='content'><p>Custom metrics allow you to count occurrences or measure values that are important to your app.</p>
</div><h2>Adding Custom Metrics to a Trace</h2>
<div class='content'><p>You can add custom metrics to a trace to count events or measure values during the trace.</p>
<h4>Example: Counting API Calls (Android)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHVibGljIHZvaWQgZmV0Y2hEYXRhKCkgewogICAgVHJhY2UgbXlUcmFjZSA9IEZpcmViYXNlUGVyZm9ybWFuY2UuZ2V0SW5zdGFuY2UoKS5uZXdUcmFjZSgiZmV0Y2hEYXRhVHJhY2UiKTsKICAgIG15VHJhY2Uuc3RhcnQoKTsKCiAgICAvLyBTaW11bGF0ZSBuZXR3b3JrIHJlcXVlc3QKICAgIHRyeSB7CiAgICAgICAgVGhyZWFkLnNsZWVwKDIwMDApOyAvLyBTaW11bGF0ZSBuZXR3b3JrIGRlbGF5CiAgICB9IGNhdGNoIChJbnRlcnJ1cHRlZEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgZS5wcmludFN0YWNrVHJhY2UoKTsKICAgIH0KCiAgICAvLyBJbmNyZW1lbnQgY3VzdG9tIG1ldHJpYwogICAgbXlUcmFjZS5pbmNyZW1lbnRNZXRyaWMoImFwaV9jYWxscyIsIDEpOwoKICAgIG15VHJhY2Uuc3RvcCgpOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>public void fetchData() {
    Trace myTrace = FirebasePerformance.getInstance().newTrace(&quot;fetchDataTrace&quot;);
    myTrace.start();

    // Simulate network request
    try {
        Thread.sleep(2000); // Simulate network delay
    } catch (InterruptedException e) {
        e.printStackTrace();
    }

    // Increment custom metric
    myTrace.incrementMetric(&quot;api_calls&quot;, 1);

    myTrace.stop();
}</pre></div><div class='content'><h4>Example: Counting API Calls (iOS)</h4>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("aW1wb3J0IEZpcmViYXNlUGVyZm9ybWFuY2UKCmZ1bmMgZmV0Y2hEYXRhKCkgewogICAgbGV0IHRyYWNlID0gUGVyZm9ybWFuY2Uuc3RhcnRUcmFjZShuYW1lOiAiZmV0Y2hEYXRhVHJhY2UiKQogICAgCiAgICBEaXNwYXRjaFF1ZXVlLmdsb2JhbCgpLmFzeW5jIHsKICAgICAgICBzbGVlcCgyKSAvLyBTaW11bGF0ZSBuZXR3b3JrIGRlbGF5CiAgICAgICAgCiAgICAgICAgLy8gSW5jcmVtZW50IGN1c3RvbSBtZXRyaWMKICAgICAgICB0cmFjZT8uaW5jcmVtZW50TWV0cmljKCJhcGlfY2FsbHMiLCBieTogMSkKICAgICAgICAKICAgICAgICB0cmFjZT8uc3RvcCgpCiAgICB9Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>import FirebasePerformance

func fetchData() {
    let trace = Performance.startTrace(name: &quot;fetchDataTrace&quot;)
    
    DispatchQueue.global().async {
        sleep(2) // Simulate network delay
        
        // Increment custom metric
        trace?.incrementMetric(&quot;api_calls&quot;, by: 1)
        
        trace?.stop()
    }
}</pre></div><div class='content'></div><h1>Comparing Custom Traces and Metrics</h1>
<div class='content'><p>| Feature          | Custom Trace                                      | Custom Metric                          |
|------------------|---------------------------------------------------|----------------------------------------|
| Purpose          | Measure time taken for specific code sections     | Count events or measure values         |
| Start/Stop       | Yes                                               | No                                     |
| Example Use Case | Measuring time for a network request              | Counting number of API calls           |</p>
</div><h1>Conclusion</h1>
<div class='content'><p>Custom traces and metrics in Firebase Performance Monitoring provide powerful tools to measure and optimize the performance of your app. By understanding and implementing these features, you can gain valuable insights into specific parts of your app and ensure a smooth user experience. Remember to start with setting up Firebase Performance Monitoring, then create custom traces and add custom metrics as needed to monitor critical operations in your app.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='monitoring-app-performance'>&#x25C4;Monitoring App Performance</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Custom Traces and Metrics</a>
	</div>
	<div class='col-4 text-end'>
					<a href='analyzing-performance-data'>Analyzing Performance Data &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
