<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Securing Connections</title>

    <link rel="alternate" href="https://campusempresa.com/postgresql/securing-connections" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/postgresql/securing-connections" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/postgresql/securing-connections" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/postgresql/securing-connections" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/postgresql/securing-connections" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='user-management-and-roles'>&#x25C4;User Management and Roles</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Securing Connections</a>
	</div>
	<div class='col-4 text-end'>
					<a href='backup-and-restore'>Backup and Restore &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Securing connections to your PostgreSQL database is crucial to protect sensitive data and ensure that only authorized users can access the database. This section will guide you through various methods and best practices for securing PostgreSQL connections, from basic to advanced techniques.</p>
</div><h1>Introduction to Connection Security</h1>
<div class='content'><ul>
<li>
<p><strong>Why secure connections?</strong></p>
<ul>
<li>Protect sensitive data from unauthorized access.</li>
<li>Prevent data breaches and potential legal issues.</li>
<li>Ensure data integrity and confidentiality.</li>
</ul>
</li>
<li>
<p><strong>Common threats:</strong></p>
<ul>
<li>Man-in-the-middle attacks.</li>
<li>Unauthorized access.</li>
<li>Data interception.</li>
</ul>
</li>
</ul>
</div><h1>Basic Security Measures</h1>
<div class='content'></div><h2>Using Password Authentication</h2>
<div class='content'><p>PostgreSQL supports several authentication methods, but password authentication is one of the most common and straightforward methods.</p>
<ul>
<li>
<p><strong>Configuring <code>pg_hba.conf</code>:</strong>
The <code>pg_hba.conf</code> file controls client authentication. Here’s how to set it up for password authentication:</p>
<pre><code class="language-plaintext"># TYPE  DATABASE        USER            ADDRESS                 METHOD
host    all             all             0.0.0.0/0               md5
</code></pre>
<ul>
<li><code>TYPE</code>: Specifies the connection type (e.g., <code>host</code> for TCP/IP connections).</li>
<li><code>DATABASE</code>: Specifies the database name (<code>all</code> for all databases).</li>
<li><code>USER</code>: Specifies the user name (<code>all</code> for all users).</li>
<li><code>ADDRESS</code>: Specifies the client IP address range (<code>0.0.0.0/0</code> for all addresses).</li>
<li><code>METHOD</code>: Specifies the authentication method (<code>md5</code> for password authentication).</li>
</ul>
</li>
</ul>
</div><h2>Enforcing Strong Passwords</h2>
<div class='content'><ul>
<li>
<p><strong>Using <code>pgcrypto</code> extension:</strong>
PostgreSQL’s <code>pgcrypto</code> extension can be used to enforce strong passwords.</p>
<pre><code class="language-sql">CREATE EXTENSION pgcrypto;
</code></pre>
<ul>
<li>
<p><strong>Example of hashing a password:</strong></p>
<pre><code class="language-sql">SELECT crypt('my_secure_password', gen_salt('bf'));
</code></pre>
</li>
</ul>
</li>
</ul>
</div><h1>Intermediate Security Measures</h1>
<div class='content'></div><h2>Enabling SSL Connections</h2>
<div class='content'><p>Secure Sockets Layer (SSL) encrypts the data transmitted between the client and the server.</p>
<ul>
<li>
<p><strong>Configuring SSL in <code>postgresql.conf</code>:</strong></p>
<pre><code class="language-plaintext">ssl = on
ssl_cert_file = 'server.crt'
ssl_key_file = 'server.key'
</code></pre>
</li>
<li>
<p><strong>Generating SSL certificates:</strong></p>
<pre><code class="language-sh">openssl req -new -text -out server.req
openssl rsa -in privkey.pem -out server.key
openssl req -x509 -in server.req -text -key server.key -out server.crt
</code></pre>
</li>
<li>
<p><strong>Updating <code>pg_hba.conf</code> for SSL:</strong></p>
<pre><code class="language-plaintext">hostssl all all 0.0.0.0/0 md5
</code></pre>
</li>
</ul>
</div><h2>Using Client Certificates</h2>
<div class='content'><p>Client certificates add an extra layer of security by requiring clients to provide a certificate to authenticate.</p>
<ul>
<li>
<p><strong>Generating client certificates:</strong></p>
<pre><code class="language-sh">openssl req -new -text -out client.req
openssl rsa -in privkey.pem -out client.key
openssl req -x509 -in client.req -text -key client.key -out client.crt
</code></pre>
</li>
<li>
<p><strong>Configuring <code>pg_hba.conf</code> for client certificates:</strong></p>
<pre><code class="language-plaintext">hostssl all all 0.0.0.0/0 cert
</code></pre>
</li>
</ul>
</div><h1>Advanced Security Measures</h1>
<div class='content'></div><h2>Using LDAP Authentication</h2>
<div class='content'><p>Lightweight Directory Access Protocol (LDAP) can be used for centralized authentication.</p>
<ul>
<li>
<p><strong>Configuring LDAP in <code>pg_hba.conf</code>:</strong></p>
<pre><code class="language-plaintext">host all all 0.0.0.0/0 ldap ldapserver=ldap.example.com ldapbasedn=&quot;dc=example,dc=com&quot;
</code></pre>
</li>
</ul>
</div><h2>Implementing Row-Level Security (RLS)</h2>
<div class='content'><p>Row-Level Security (RLS) allows you to control access to specific rows in a table.</p>
<ul>
<li>
<p><strong>Enabling RLS:</strong></p>
<pre><code class="language-sql">ALTER TABLE employees ENABLE ROW LEVEL SECURITY;
</code></pre>
</li>
<li>
<p><strong>Creating a policy:</strong></p>
<pre><code class="language-sql">CREATE POLICY employee_policy ON employees
USING (department = current_setting('myapp.current_department'));
</code></pre>
</li>
<li>
<p><strong>Setting the current department:</strong></p>
<pre><code class="language-sql">SET myapp.current_department = 'Sales';
</code></pre>
</li>
</ul>
</div><h1>Summary</h1>
<div class='content'><p>Securing connections to your PostgreSQL database involves multiple layers of security measures, from basic password authentication to advanced techniques like SSL, client certificates, LDAP authentication, and Row-Level Security. By implementing these practices, you can significantly enhance the security of your PostgreSQL database and protect your data from unauthorized access and potential threats.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='user-management-and-roles'>&#x25C4;User Management and Roles</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Securing Connections</a>
	</div>
	<div class='col-4 text-end'>
					<a href='backup-and-restore'>Backup and Restore &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
