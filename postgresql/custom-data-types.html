<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Data Types</title>

    <link rel="alternate" href="https://campusempresa.com/postgresql/custom-data-types" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/postgresql/custom-data-types" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/postgresql/custom-data-types" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/postgresql/custom-data-types" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/postgresql/custom-data-types" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='foreign-data-wrappers'>&#x25C4;Foreign Data Wrappers</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Custom Data Types</a>
	</div>
	<div class='col-4 text-end'>
					<a href='contributing-to-postgresql'>Contributing to PostgreSQL &#x25BA;</a>
			</div>
</div>
<div class='content'><p>In PostgreSQL, custom data types allow you to define your own data structures to meet specific application requirements. This can be particularly useful when the built-in types do not meet your needs. This topic will guide you through the creation and use of custom data types in PostgreSQL, from beginner to advanced levels.</p>
</div><h1>Introduction to Custom Data Types</h1>
<div class='content'><ul>
<li>
<p><strong>What are Custom Data Types?</strong></p>
<ul>
<li>Custom data types are user-defined types that allow you to encapsulate complex data structures.</li>
<li>They can be used to enforce data integrity and simplify database schema design.</li>
</ul>
</li>
<li>
<p><strong>Why Use Custom Data Types?</strong></p>
<ul>
<li>To model complex data more naturally.</li>
<li>To enforce business rules at the database level.</li>
<li>To improve code readability and maintainability.</li>
</ul>
</li>
</ul>
</div><h1>Creating Custom Data Types</h1>
<div class='content'></div><h2>Enumerated Types (ENUM)</h2>
<div class='content'><p>Enumerated types are useful when you have a column that should only accept a limited set of values.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRZUEUgbW9vZCBBUyBFTlVNICgnaGFwcHknLCAnc2FkJywgJ25ldXRyYWwnKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TYPE mood AS ENUM ('happy', 'sad', 'neutral');</pre></div><div class='content'><ul>
<li><strong>Usage Example:</strong></li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIHBlcnNvbiAoCiAgICBuYW1lIFRFWFQsCiAgICBjdXJyZW50X21vb2QgbW9vZAopOwoKSU5TRVJUIElOVE8gcGVyc29uIChuYW1lLCBjdXJyZW50X21vb2QpIFZBTFVFUyAoJ0FsaWNlJywgJ2hhcHB5Jyk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE person (
    name TEXT,
    current_mood mood
);

INSERT INTO person (name, current_mood) VALUES ('Alice', 'happy');</pre></div><div class='content'></div><h2>Composite Types</h2>
<div class='content'><p>Composite types allow you to group multiple fields into a single data type.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRZUEUgYWRkcmVzcyBBUyAoCiAgICBzdHJlZXQgVEVYVCwKICAgIGNpdHkgVEVYVCwKICAgIHppcF9jb2RlIFRFWFQKKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TYPE address AS (
    street TEXT,
    city TEXT,
    zip_code TEXT
);</pre></div><div class='content'><ul>
<li><strong>Usage Example:</strong></li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIGVtcGxveWVlICgKICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSwKICAgIG5hbWUgVEVYVCwKICAgIGhvbWVfYWRkcmVzcyBhZGRyZXNzCik7CgpJTlNFUlQgSU5UTyBlbXBsb3llZSAobmFtZSwgaG9tZV9hZGRyZXNzKSAKVkFMVUVTICgnSm9obiBEb2UnLCBST1coJzEyMyBNYWluIFN0JywgJ0FueXRvd24nLCAnMTIzNDUnKSk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE employee (
    id SERIAL PRIMARY KEY,
    name TEXT,
    home_address address
);

INSERT INTO employee (name, home_address) 
VALUES ('John Doe', ROW('123 Main St', 'Anytown', '12345'));</pre></div><div class='content'></div><h2>Range Types</h2>
<div class='content'><p>Range types represent a range of values, such as a range of dates or numbers.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRZUEUgaW50NHJhbmdlIEFTIFJBTkdFICgKICAgIHN1YnR5cGUgPSBpbnQ0Cik7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TYPE int4range AS RANGE (
    subtype = int4
);</pre></div><div class='content'><ul>
<li><strong>Usage Example:</strong></li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIHJlc2VydmF0aW9uICgKICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSwKICAgIHBlcmlvZCBpbnQ0cmFuZ2UKKTsKCklOU0VSVCBJTlRPIHJlc2VydmF0aW9uIChwZXJpb2QpIFZBTFVFUyAoJ1sxLDEwXScpOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE reservation (
    id SERIAL PRIMARY KEY,
    period int4range
);

INSERT INTO reservation (period) VALUES ('[1,10]');</pre></div><div class='content'></div><h1>Advanced Custom Data Types</h1>
<div class='content'></div><h2>Domain Types</h2>
<div class='content'><p>Domain types are based on existing data types but with constraints.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIERPTUFJTiBwb3NpdGl2ZV9pbnRlZ2VyIEFTIElOVEVHRVIgQ0hFQ0sgKFZBTFVFID4gMCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE DOMAIN positive_integer AS INTEGER CHECK (VALUE &gt; 0);</pre></div><div class='content'><ul>
<li><strong>Usage Example:</strong></li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRBQkxFIHByb2R1Y3QgKAogICAgaWQgU0VSSUFMIFBSSU1BUlkgS0VZLAogICAgcHJpY2UgcG9zaXRpdmVfaW50ZWdlcgopOwoKSU5TRVJUIElOVE8gcHJvZHVjdCAocHJpY2UpIFZBTFVFUyAoMTAwKTsgIC0tIFZhbGlkCklOU0VSVCBJTlRPIHByb2R1Y3QgKHByaWNlKSBWQUxVRVMgKC01MCk7ICAtLSBJbnZhbGlk"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TABLE product (
    id SERIAL PRIMARY KEY,
    price positive_integer
);

INSERT INTO product (price) VALUES (100);  -- Valid
INSERT INTO product (price) VALUES (-50);  -- Invalid</pre></div><div class='content'></div><h2>Composite Types with Functions</h2>
<div class='content'><p>You can create functions that return composite types.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Q1JFQVRFIFRZUEUgZnVsbF9uYW1lIEFTICgKICAgIGZpcnN0X25hbWUgVEVYVCwKICAgIGxhc3RfbmFtZSBURVhUCik7CgpDUkVBVEUgRlVOQ1RJT04gZ2V0X2Z1bGxfbmFtZSgpIFJFVFVSTlMgZnVsbF9uYW1lIEFTICQkCkJFR0lOCiAgICBSRVRVUk4gUk9XKCdKb2huJywgJ0RvZScpOwpFTkQ7CiQkIExBTkdVQUdFIHBscGdzcWw7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>CREATE TYPE full_name AS (
    first_name TEXT,
    last_name TEXT
);

CREATE FUNCTION get_full_name() RETURNS full_name AS $$
BEGIN
    RETURN ROW('John', 'Doe');
END;
$$ LANGUAGE plpgsql;</pre></div><div class='content'><ul>
<li><strong>Usage Example:</strong></li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("U0VMRUNUICogRlJPTSBnZXRfZnVsbF9uYW1lKCk7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>SELECT * FROM get_full_name();</pre></div><div class='content'></div><h1>Managing Custom Data Types</h1>
<div class='content'><ul>
<li><strong>Altering Custom Data Types:</strong>
<ul>
<li>You can alter custom data types to add or remove values (for ENUM types) or to change constraints (for DOMAIN types).</li>
</ul>
</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("QUxURVIgVFlQRSBtb29kIEFERCBWQUxVRSAnZXhjaXRlZCc7CkFMVEVSIERPTUFJTiBwb3NpdGl2ZV9pbnRlZ2VyIFNFVCBERUZBVUxUIDE7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ALTER TYPE mood ADD VALUE 'excited';
ALTER DOMAIN positive_integer SET DEFAULT 1;</pre></div><div class='content'><ul>
<li><strong>Dropping Custom Data Types:</strong>
<ul>
<li>You can drop custom data types when they are no longer needed.</li>
</ul>
</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("RFJPUCBUWVBFIG1vb2Q7CkRST1AgRE9NQUlOIHBvc2l0aXZlX2ludGVnZXI7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>DROP TYPE mood;
DROP DOMAIN positive_integer;</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Custom data types in PostgreSQL provide a powerful way to model complex data structures and enforce business rules directly within the database. By understanding and utilizing enumerated types, composite types, range types, and domain types, you can create more robust and maintainable database schemas. As you advance, you can also leverage functions that return composite types to encapsulate complex logic and data retrieval.</p>
<p>By mastering custom data types, you will be well-equipped to handle a wide range of data modeling challenges in PostgreSQL.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='foreign-data-wrappers'>&#x25C4;Foreign Data Wrappers</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Custom Data Types</a>
	</div>
	<div class='col-4 text-end'>
					<a href='contributing-to-postgresql'>Contributing to PostgreSQL &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
