<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linux Kernel and Modules</title>

    <link rel="alternate" href="https://campusempresa.com/linux/linux-kernel-and-modules" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/linux/linux-kernel-and-modules" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/linux/linux-kernel-and-modules" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/linux/linux-kernel-and-modules" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/linux/linux-kernel-and-modules" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='virtualization-and-containers'>&#x25C4;Virtualization and Containers</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Linux Kernel and Modules</a>
	</div>
	<div class='col-4 text-end'>
					<a href='advanced-security-practices'>Advanced Security Practices &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to the Linux Kernel</h1>
<div class='content'><p>The Linux kernel is the core component of the Linux operating system. It manages the system's hardware and resources, allowing software to interact with the hardware in a controlled manner.</p>
<ul>
<li><strong>Key Concepts:</strong>
<ul>
<li><strong>Kernel Space vs. User Space:</strong> The kernel operates in a privileged mode called kernel space, while applications run in user space.</li>
<li><strong>Monolithic Kernel:</strong> The Linux kernel is monolithic, meaning it includes all the necessary drivers and system services within a single large binary.</li>
<li><strong>System Calls:</strong> Interfaces provided by the kernel for user-space applications to request services.</li>
</ul>
</li>
</ul>
</div><h1>Understanding Kernel Modules</h1>
<div class='content'><p>Kernel modules are pieces of code that can be loaded and unloaded into the kernel upon demand. They extend the functionality of the kernel without the need to reboot the system.</p>
<ul>
<li><strong>Key Concepts:</strong>
<ul>
<li><strong>Dynamic Loading:</strong> Modules can be loaded and unloaded dynamically using commands like <code>insmod</code> and <code>rmmod</code>.</li>
<li><strong>Types of Modules:</strong> Device drivers, filesystem drivers, network drivers, etc.</li>
<li><strong>Module Dependencies:</strong> Modules can depend on other modules, which must be loaded first.</li>
</ul>
</li>
</ul>
</div><h1>Working with Kernel Modules</h1>
<h2>Loading and Unloading Modules</h2>
<div class='content'><p>Modules can be managed using various commands.</p>
<ul>
<li>
<p><strong>Loading a Module:</strong></p>
<pre><code class="language-sh">sudo insmod mymodule.ko
</code></pre>
<p>This command inserts the module <code>mymodule.ko</code> into the kernel.</p>
</li>
<li>
<p><strong>Unloading a Module:</strong></p>
<pre><code class="language-sh">sudo rmmod mymodule
</code></pre>
<p>This command removes the module <code>mymodule</code> from the kernel.</p>
</li>
<li>
<p><strong>Listing Loaded Modules:</strong></p>
<pre><code class="language-sh">lsmod
</code></pre>
<p>This command lists all currently loaded modules.</p>
</li>
</ul>
</div><h2>Writing a Simple Kernel Module</h2>
<div class='content'><p>Let's write a simple &quot;Hello World&quot; kernel module.</p>
<ul>
<li>
<p><strong>hello.c:</strong></p>
<pre><code class="language-c">#include &lt;linux/module.h&gt;
#include &lt;linux/kernel.h&gt;

int init_module(void) {
    printk(KERN_INFO &quot;Hello, world!\n&quot;);
    return 0;
}

void cleanup_module(void) {
    printk(KERN_INFO &quot;Goodbye, world!\n&quot;);
}

MODULE_LICENSE(&quot;GPL&quot;);
MODULE_DESCRIPTION(&quot;A simple Hello World Module&quot;);
MODULE_AUTHOR(&quot;Your Name&quot;);
</code></pre>
</li>
<li>
<p><strong>Compiling the Module:</strong>
Create a <code>Makefile</code> to compile the module.</p>
<pre><code class="language-makefile">obj-m += hello.o

all:
    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules

clean:
    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean
</code></pre>
<p>Run <code>make</code> to compile the module.</p>
</li>
<li>
<p><strong>Loading and Testing the Module:</strong></p>
<pre><code class="language-sh">sudo insmod hello.ko
dmesg | tail
sudo rmmod hello
dmesg | tail
</code></pre>
<p>The <code>dmesg</code> command shows kernel messages, where you should see &quot;Hello, world!&quot; and &quot;Goodbye, world!&quot; messages.</p>
</li>
</ul>
</div><h1>Advanced Topics</h1>
<h2>Kernel Module Parameters</h2>
<div class='content'><p>Modules can accept parameters at load time.</p>
<ul>
<li>
<p><strong>Example with Parameters:</strong></p>
<pre><code class="language-c">#include &lt;linux/module.h&gt;
#include &lt;linux/kernel.h&gt;
#include &lt;linux/init.h&gt;

static int myint = 0;
module_param(myint, int, 0);
MODULE_PARM_DESC(myint, &quot;An integer&quot;);

int init_module(void) {
    printk(KERN_INFO &quot;Hello, world! myint = %d\n&quot;, myint);
    return 0;
}

void cleanup_module(void) {
    printk(KERN_INFO &quot;Goodbye, world!\n&quot;);
}

MODULE_LICENSE(&quot;GPL&quot;);
MODULE_DESCRIPTION(&quot;A simple module with parameters&quot;);
MODULE_AUTHOR(&quot;Your Name&quot;);
</code></pre>
<p>Load the module with a parameter:</p>
<pre><code class="language-sh">sudo insmod hello.ko myint=42
dmesg | tail
</code></pre>
</li>
</ul>
</div><h2>Debugging Kernel Modules</h2>
<div class='content'><p>Debugging kernel modules can be challenging due to the lack of standard debugging tools.</p>
<ul>
<li><strong>Using <code>printk</code>:</strong> The primary method for debugging is using <code>printk</code> statements.</li>
<li><strong>Kernel Debugger (KGDB):</strong> A more advanced tool for debugging kernel code.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Understanding the Linux kernel and its modules is crucial for advanced Linux programming and system administration. Kernel modules provide a flexible way to extend the kernel's functionality without rebooting the system. By learning how to write, load, and debug kernel modules, you gain deeper insights into the inner workings of the Linux operating system.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='virtualization-and-containers'>&#x25C4;Virtualization and Containers</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Linux Kernel and Modules</a>
	</div>
	<div class='col-4 text-end'>
					<a href='advanced-security-practices'>Advanced Security Practices &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
