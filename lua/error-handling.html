<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Error Handling in Lua</title>

    <link rel="alternate" href="https://campusempresa.com/lua/error-handling" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/lua/error-handling" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/lua/error-handling" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/lua/error-handling" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/lua/error-handling" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='modules-and-packages'>&#x25C4;Modules and Packages</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Error Handling in Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-oop'>Introduction to OOP &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Error handling is a crucial aspect of programming that ensures your code can gracefully handle unexpected situations. In Lua, error handling is managed using a combination of functions and control structures. This section will guide you from the basics to advanced techniques in error handling.</p>
</div><h1>Basic Error Handling</h1>
<div class='content'></div><h2>The `error` Function</h2>
<div class='content'><ul>
<li>The <code>error</code> function is used to raise an error in Lua.</li>
<li>It stops the execution of the program and displays an error message.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZGl2aWRlKGEsIGIpCiAgICBpZiBiID09IDAgdGhlbgogICAgICAgIGVycm9yKCJEaXZpc2lvbiBieSB6ZXJvISIpCiAgICBlbHNlCiAgICAgICAgcmV0dXJuIGEgLyBiCiAgICBlbmQKZW5kCgpwcmludChkaXZpZGUoMTAsIDIpKSAgLS0gT3V0cHV0OiA1CnByaW50KGRpdmlkZSgxMCwgMCkpICAtLSBFcnJvcjogRGl2aXNpb24gYnkgemVybyE="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function divide(a, b)
    if b == 0 then
        error(&quot;Division by zero!&quot;)
    else
        return a / b
    end
end

print(divide(10, 2))  -- Output: 5
print(divide(10, 0))  -- Error: Division by zero!</pre></div><div class='content'></div><h2>The `pcall` Function</h2>
<div class='content'><ul>
<li>The <code>pcall</code> (protected call) function is used to call a function in protected mode.</li>
<li>It returns a boolean indicating success or failure, followed by the function's return values or error message.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZGl2aWRlKGEsIGIpCiAgICBpZiBiID09IDAgdGhlbgogICAgICAgIGVycm9yKCJEaXZpc2lvbiBieSB6ZXJvISIpCiAgICBlbHNlCiAgICAgICAgcmV0dXJuIGEgLyBiCiAgICBlbmQKZW5kCgpsb2NhbCBzdGF0dXMsIHJlc3VsdCA9IHBjYWxsKGRpdmlkZSwgMTAsIDIpCmlmIHN0YXR1cyB0aGVuCiAgICBwcmludChyZXN1bHQpICAtLSBPdXRwdXQ6IDUKZWxzZQogICAgcHJpbnQoIkVycm9yOiAiIC4uIHJlc3VsdCkKZW5kCgpzdGF0dXMsIHJlc3VsdCA9IHBjYWxsKGRpdmlkZSwgMTAsIDApCmlmIHN0YXR1cyB0aGVuCiAgICBwcmludChyZXN1bHQpCmVsc2UKICAgIHByaW50KCJFcnJvcjogIiAuLiByZXN1bHQpICAtLSBPdXRwdXQ6IEVycm9yOiBEaXZpc2lvbiBieSB6ZXJvIQplbmQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function divide(a, b)
    if b == 0 then
        error(&quot;Division by zero!&quot;)
    else
        return a / b
    end
end

local status, result = pcall(divide, 10, 2)
if status then
    print(result)  -- Output: 5
else
    print(&quot;Error: &quot; .. result)
end

status, result = pcall(divide, 10, 0)
if status then
    print(result)
else
    print(&quot;Error: &quot; .. result)  -- Output: Error: Division by zero!
end</pre></div><div class='content'></div><h1>Intermediate Error Handling</h1>
<div class='content'></div><h2>The `xpcall` Function</h2>
<div class='content'><ul>
<li>The <code>xpcall</code> function is similar to <code>pcall</code> but allows you to specify an error handler.</li>
<li>This can be useful for logging errors or performing cleanup tasks.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gZGl2aWRlKGEsIGIpCiAgICBpZiBiID09IDAgdGhlbgogICAgICAgIGVycm9yKCJEaXZpc2lvbiBieSB6ZXJvISIpCiAgICBlbHNlCiAgICAgICAgcmV0dXJuIGEgLyBiCiAgICBlbmQKZW5kCgpmdW5jdGlvbiBlcnJvckhhbmRsZXIoZXJyKQogICAgcmV0dXJuICJDYXVnaHQgYW4gZXJyb3I6ICIgLi4gZXJyCmVuZAoKbG9jYWwgc3RhdHVzLCByZXN1bHQgPSB4cGNhbGwoZGl2aWRlLCBlcnJvckhhbmRsZXIsIDEwLCAwKQppZiBzdGF0dXMgdGhlbgogICAgcHJpbnQocmVzdWx0KQplbHNlCiAgICBwcmludChyZXN1bHQpICAtLSBPdXRwdXQ6IENhdWdodCBhbiBlcnJvcjogRGl2aXNpb24gYnkgemVybyEKZW5k"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function divide(a, b)
    if b == 0 then
        error(&quot;Division by zero!&quot;)
    else
        return a / b
    end
end

function errorHandler(err)
    return &quot;Caught an error: &quot; .. err
end

local status, result = xpcall(divide, errorHandler, 10, 0)
if status then
    print(result)
else
    print(result)  -- Output: Caught an error: Division by zero!
end</pre></div><div class='content'></div><h2>Custom Error Messages</h2>
<div class='content'><ul>
<li>You can create custom error messages to provide more context about the error.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gcmVhZEZpbGUoZmlsZW5hbWUpCiAgICBsb2NhbCBmaWxlLCBlcnIgPSBpby5vcGVuKGZpbGVuYW1lLCAiciIpCiAgICBpZiBub3QgZmlsZSB0aGVuCiAgICAgICAgZXJyb3IoIkNvdWxkIG5vdCBvcGVuIGZpbGU6ICIgLi4gZXJyKQogICAgZW5kCiAgICAtLSBSZWFkIGZpbGUgY29udGVudAogICAgbG9jYWwgY29udGVudCA9IGZpbGU6cmVhZCgiKmEiKQogICAgZmlsZTpjbG9zZSgpCiAgICByZXR1cm4gY29udGVudAplbmQKCmxvY2FsIHN0YXR1cywgcmVzdWx0ID0gcGNhbGwocmVhZEZpbGUsICJub25leGlzdGVudC50eHQiKQppZiBzdGF0dXMgdGhlbgogICAgcHJpbnQocmVzdWx0KQplbHNlCiAgICBwcmludCgiRXJyb3I6ICIgLi4gcmVzdWx0KSAgLS0gT3V0cHV0OiBFcnJvcjogQ291bGQgbm90IG9wZW4gZmlsZTogbm9uZXhpc3RlbnQudHh0OiBObyBzdWNoIGZpbGUgb3IgZGlyZWN0b3J5CmVuZA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function readFile(filename)
    local file, err = io.open(filename, &quot;r&quot;)
    if not file then
        error(&quot;Could not open file: &quot; .. err)
    end
    -- Read file content
    local content = file:read(&quot;*a&quot;)
    file:close()
    return content
end

local status, result = pcall(readFile, &quot;nonexistent.txt&quot;)
if status then
    print(result)
else
    print(&quot;Error: &quot; .. result)  -- Output: Error: Could not open file: nonexistent.txt: No such file or directory
end</pre></div><div class='content'></div><h1>Advanced Error Handling</h1>
<div class='content'></div><h2>Error Propagation</h2>
<div class='content'><ul>
<li>Errors can be propagated up the call stack using <code>error</code>.</li>
<li>This allows higher-level functions to handle errors generated by lower-level functions.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZnVuY3Rpb24gcmVhZEZpbGUoZmlsZW5hbWUpCiAgICBsb2NhbCBmaWxlLCBlcnIgPSBpby5vcGVuKGZpbGVuYW1lLCAiciIpCiAgICBpZiBub3QgZmlsZSB0aGVuCiAgICAgICAgZXJyb3IoIkNvdWxkIG5vdCBvcGVuIGZpbGU6ICIgLi4gZXJyKQogICAgZW5kCiAgICBsb2NhbCBjb250ZW50ID0gZmlsZTpyZWFkKCIqYSIpCiAgICBmaWxlOmNsb3NlKCkKICAgIHJldHVybiBjb250ZW50CmVuZAoKZnVuY3Rpb24gcHJvY2Vzc0ZpbGUoZmlsZW5hbWUpCiAgICBsb2NhbCBjb250ZW50ID0gcmVhZEZpbGUoZmlsZW5hbWUpCiAgICAtLSBQcm9jZXNzIGZpbGUgY29udGVudAogICAgcmV0dXJuIGNvbnRlbnQKZW5kCgpsb2NhbCBzdGF0dXMsIHJlc3VsdCA9IHBjYWxsKHByb2Nlc3NGaWxlLCAibm9uZXhpc3RlbnQudHh0IikKaWYgc3RhdHVzIHRoZW4KICAgIHByaW50KHJlc3VsdCkKZWxzZQogICAgcHJpbnQoIkVycm9yOiAiIC4uIHJlc3VsdCkgIC0tIE91dHB1dDogRXJyb3I6IENvdWxkIG5vdCBvcGVuIGZpbGU6IG5vbmV4aXN0ZW50LnR4dDogTm8gc3VjaCBmaWxlIG9yIGRpcmVjdG9yeQplbmQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>function readFile(filename)
    local file, err = io.open(filename, &quot;r&quot;)
    if not file then
        error(&quot;Could not open file: &quot; .. err)
    end
    local content = file:read(&quot;*a&quot;)
    file:close()
    return content
end

function processFile(filename)
    local content = readFile(filename)
    -- Process file content
    return content
end

local status, result = pcall(processFile, &quot;nonexistent.txt&quot;)
if status then
    print(result)
else
    print(&quot;Error: &quot; .. result)  -- Output: Error: Could not open file: nonexistent.txt: No such file or directory
end</pre></div><div class='content'></div><h2>Using Metatables for Error Handling</h2>
<div class='content'><ul>
<li>Metatables can be used to define custom behaviors for errors.</li>
<li>This is an advanced technique that allows for more flexible error handling.</li>
</ul>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bG9jYWwgRXJyb3JIYW5kbGVyID0ge30KRXJyb3JIYW5kbGVyLl9faW5kZXggPSBFcnJvckhhbmRsZXIKCmZ1bmN0aW9uIEVycm9ySGFuZGxlcjpuZXcoKQogICAgbG9jYWwgc2VsZiA9IHNldG1ldGF0YWJsZSh7fSwgRXJyb3JIYW5kbGVyKQogICAgcmV0dXJuIHNlbGYKZW5kCgpmdW5jdGlvbiBFcnJvckhhbmRsZXI6aGFuZGxlRXJyb3IoZXJyKQogICAgcHJpbnQoIkN1c3RvbSBFcnJvciBIYW5kbGVyOiAiIC4uIGVycikKZW5kCgpsb2NhbCBoYW5kbGVyID0gRXJyb3JIYW5kbGVyOm5ldygpCgpmdW5jdGlvbiBkaXZpZGUoYSwgYikKICAgIGlmIGIgPT0gMCB0aGVuCiAgICAgICAgZXJyb3IoIkRpdmlzaW9uIGJ5IHplcm8hIikKICAgIGVsc2UKICAgICAgICByZXR1cm4gYSAvIGIKICAgIGVuZAplbmQKCmxvY2FsIHN0YXR1cywgcmVzdWx0ID0geHBjYWxsKGRpdmlkZSwgZnVuY3Rpb24oZXJyKSBoYW5kbGVyOmhhbmRsZUVycm9yKGVycikgZW5kLCAxMCwgMCkKaWYgc3RhdHVzIHRoZW4KICAgIHByaW50KHJlc3VsdCkKZWxzZQogICAgcHJpbnQoIkhhbmRsZWQgYnkgY3VzdG9tIGVycm9yIGhhbmRsZXIiKQplbmQ="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>local ErrorHandler = {}
ErrorHandler.__index = ErrorHandler

function ErrorHandler:new()
    local self = setmetatable({}, ErrorHandler)
    return self
end

function ErrorHandler:handleError(err)
    print(&quot;Custom Error Handler: &quot; .. err)
end

local handler = ErrorHandler:new()

function divide(a, b)
    if b == 0 then
        error(&quot;Division by zero!&quot;)
    else
        return a / b
    end
end

local status, result = xpcall(divide, function(err) handler:handleError(err) end, 10, 0)
if status then
    print(result)
else
    print(&quot;Handled by custom error handler&quot;)
end</pre></div><div class='content'></div><h1>Conclusion</h1>
<div class='content'><p>Error handling in Lua ranges from simple error messages to advanced techniques involving custom error handlers and metatables. Understanding these concepts is essential for writing robust and maintainable code. By mastering error handling, you can ensure that your Lua programs can gracefully handle unexpected situations and provide meaningful feedback to users or developers.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='modules-and-packages'>&#x25C4;Modules and Packages</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Error Handling in Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-oop'>Introduction to OOP &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
