<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Management in Lua</title>

    <link rel="alternate" href="https://campusempresa.com/lua/memory-management" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/lua/memory-management" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/lua/memory-management" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/lua/memory-management" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/lua/memory-management" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='profiling-lua-code'>&#x25C4;Profiling Lua Code</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Memory Management in Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='optimizing-code'>Optimizing Code &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Memory management is a crucial aspect of programming, ensuring that your application uses memory efficiently and avoids leaks. In Lua, memory management is handled automatically by the garbage collector, but understanding how it works can help you write more efficient and effective code.</p>
</div><h1>Introduction to Memory Management</h1>
<div class='content'><ul>
<li><strong>Automatic Memory Management</strong>: Lua uses automatic memory management, meaning it handles the allocation and deallocation of memory for you.</li>
<li><strong>Garbage Collection</strong>: Lua employs a garbage collector to reclaim memory that is no longer in use.</li>
</ul>
</div><h1>Understanding Garbage Collection</h1>
<div class='content'><p>Garbage collection in Lua is designed to be efficient and unobtrusive. It helps prevent memory leaks by automatically freeing memory that is no longer accessible.</p>
<ul>
<li><strong>Mark-and-Sweep Algorithm</strong>: Lua uses a mark-and-sweep garbage collection algorithm.
<ul>
<li><strong>Mark Phase</strong>: The garbage collector traverses all reachable objects and marks them.</li>
<li><strong>Sweep Phase</strong>: It then sweeps through memory, collecting all unmarked objects.</li>
</ul>
</li>
</ul>
</div><h2>Example: Basic Garbage Collection</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gQ3JlYXRlIGEgdGFibGUgYW5kIGFzc2lnbiBpdCB0byBhIHZhcmlhYmxlCmxvY2FsIG15VGFibGUgPSB7MSwgMiwgM30KCi0tIFRoZSB0YWJsZSBpcyBub3cgaW4gdXNlIGFuZCB3b24ndCBiZSBjb2xsZWN0ZWQKcHJpbnQobXlUYWJsZVsxXSkgIC0tIE91dHB1dDogMQoKLS0gUmVtb3ZlIHRoZSByZWZlcmVuY2UgdG8gdGhlIHRhYmxlCm15VGFibGUgPSBuaWwKCi0tIFRoZSB0YWJsZSBpcyBub3cgZWxpZ2libGUgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbgpjb2xsZWN0Z2FyYmFnZSgpICAtLSBNYW51YWxseSB0cmlnZ2VyIGdhcmJhZ2UgY29sbGVjdGlvbiAobm90IHVzdWFsbHkgbmVjZXNzYXJ5KQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Create a table and assign it to a variable
local myTable = {1, 2, 3}

-- The table is now in use and won't be collected
print(myTable[1])  -- Output: 1

-- Remove the reference to the table
myTable = nil

-- The table is now eligible for garbage collection
collectgarbage()  -- Manually trigger garbage collection (not usually necessary)</pre></div><div class='content'></div><h1>Managing Memory Efficiently</h1>
<div class='content'><p>While Lua handles most memory management tasks, there are best practices you can follow to ensure efficient memory usage.</p>
<ul>
<li><strong>Avoid Unnecessary Allocations</strong>: Reuse tables and other objects when possible.</li>
<li><strong>Clear References</strong>: Set variables to <code>nil</code> when they are no longer needed to make them eligible for garbage collection.</li>
<li><strong>Use Local Variables</strong>: Local variables are collected more efficiently than global variables.</li>
</ul>
</div><h2>Example: Reusing Tables</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gSW5lZmZpY2llbnQ6IENyZWF0aW5nIGEgbmV3IHRhYmxlIGVhY2ggdGltZQpmb3IgaSA9IDEsIDEwMDAgZG8KICAgIGxvY2FsIHRlbXBUYWJsZSA9IHtpLCBpKzEsIGkrMn0KICAgIC0tIERvIHNvbWV0aGluZyB3aXRoIHRlbXBUYWJsZQplbmQKCi0tIEVmZmljaWVudDogUmV1c2luZyBhIHNpbmdsZSB0YWJsZQpsb2NhbCB0ZW1wVGFibGUgPSB7fQpmb3IgaSA9IDEsIDEwMDAgZG8KICAgIHRlbXBUYWJsZVsxXSwgdGVtcFRhYmxlWzJdLCB0ZW1wVGFibGVbM10gPSBpLCBpKzEsIGkrMgogICAgLS0gRG8gc29tZXRoaW5nIHdpdGggdGVtcFRhYmxlCmVuZA=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Inefficient: Creating a new table each time
for i = 1, 1000 do
    local tempTable = {i, i+1, i+2}
    -- Do something with tempTable
end

-- Efficient: Reusing a single table
local tempTable = {}
for i = 1, 1000 do
    tempTable[1], tempTable[2], tempTable[3] = i, i+1, i+2
    -- Do something with tempTable
end</pre></div><div class='content'></div><h1>Advanced Memory Management Techniques</h1>
<div class='content'><p>For advanced users, Lua provides more control over the garbage collector and memory management.</p>
<ul>
<li><strong>Garbage Collector Functions</strong>: Lua provides several functions to control the garbage collector.
<ul>
<li><code>collectgarbage(&quot;collect&quot;)</code>: Perform a full garbage collection cycle.</li>
<li><code>collectgarbage(&quot;stop&quot;)</code>: Stop the garbage collector.</li>
<li><code>collectgarbage(&quot;restart&quot;)</code>: Restart the garbage collector.</li>
<li><code>collectgarbage(&quot;count&quot;)</code>: Get the current memory usage in kilobytes.</li>
</ul>
</li>
</ul>
</div><h2>Example: Controlling the Garbage Collector</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("LS0gU3RvcCB0aGUgZ2FyYmFnZSBjb2xsZWN0b3IKY29sbGVjdGdhcmJhZ2UoInN0b3AiKQoKLS0gUGVyZm9ybSBzb21lIG1lbW9yeS1pbnRlbnNpdmUgb3BlcmF0aW9ucwpsb2NhbCBsYXJnZVRhYmxlID0ge30KZm9yIGkgPSAxLCAxMDAwMDAwIGRvCiAgICBsYXJnZVRhYmxlW2ldID0gaQplbmQKCi0tIE1hbnVhbGx5IHRyaWdnZXIgZ2FyYmFnZSBjb2xsZWN0aW9uCmNvbGxlY3RnYXJiYWdlKCJjb2xsZWN0IikKCi0tIFJlc3RhcnQgdGhlIGdhcmJhZ2UgY29sbGVjdG9yCmNvbGxlY3RnYXJiYWdlKCJyZXN0YXJ0Iik="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>-- Stop the garbage collector
collectgarbage(&quot;stop&quot;)

-- Perform some memory-intensive operations
local largeTable = {}
for i = 1, 1000000 do
    largeTable[i] = i
end

-- Manually trigger garbage collection
collectgarbage(&quot;collect&quot;)

-- Restart the garbage collector
collectgarbage(&quot;restart&quot;)</pre></div><div class='content'></div><h1>Summary</h1>
<div class='content'><p>Memory management in Lua is largely automatic, thanks to its efficient garbage collector. By understanding how garbage collection works and following best practices, you can write more efficient Lua code. For advanced users, Lua provides functions to control the garbage collector, offering more fine-grained control over memory management.</p>
<ul>
<li><strong>Key Takeaways</strong>:
<ul>
<li>Lua uses automatic memory management with a mark-and-sweep garbage collector.</li>
<li>Clear references and reuse objects to manage memory efficiently.</li>
<li>Advanced functions allow for manual control of the garbage collector.</li>
</ul>
</li>
</ul>
<p>Understanding these concepts will help you write Lua programs that are both efficient and effective, ensuring optimal use of memory resources.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='profiling-lua-code'>&#x25C4;Profiling Lua Code</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Memory Management in Lua</a>
	</div>
	<div class='col-4 text-end'>
					<a href='optimizing-code'>Optimizing Code &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
