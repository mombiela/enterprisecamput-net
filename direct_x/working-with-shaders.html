<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Working with Shaders</title>

    <link rel="alternate" href="https://campusempresa.com/direct_x/working-with-shaders" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/direct_x/working-with-shaders" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/direct_x/working-with-shaders" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/direct_x/working-with-shaders" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/direct_x/working-with-shaders" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='understanding-the-graphics-pipeline'>&#x25C4;Understanding the Graphics Pipeline</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Working with Shaders</a>
	</div>
	<div class='col-4 text-end'>
					<a href='textures-and-materials'>Textures and Materials &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Shaders</h1>
<div class='content'><p>Shaders are small programs that run on the GPU to control the rendering of graphics. In DirectX, shaders are written in HLSL (High-Level Shading Language).</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Vertex Shader</strong>: Processes each vertex's data.</li>
<li><strong>Pixel Shader</strong>: Determines the color of each pixel.</li>
<li><strong>HLSL</strong>: The language used to write shaders in DirectX.</li>
<li><strong>Shader Model</strong>: Defines the features and capabilities of shaders.</li>
</ul>
</div><h1>Writing Your First Shader</h1>
<div class='content'><p>To start with shaders in DirectX, you'll need to write a simple vertex and pixel shader.</p>
</div><h2>Vertex Shader Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gU2ltcGxlIHZlcnRleCBzaGFkZXIKc3RydWN0IFZTX0lOUFVUIHsKICAgIGZsb2F0NCBQb3MgOiBQT1NJVElPTjsKICAgIGZsb2F0NCBDb2xvciA6IENPTE9SOwp9OwoKc3RydWN0IFZTX09VVFBVVCB7CiAgICBmbG9hdDQgUG9zIDogU1ZfUE9TSVRJT047CiAgICBmbG9hdDQgQ29sb3IgOiBDT0xPUjsKfTsKClZTX09VVFBVVCBtYWluKFZTX0lOUFVUIGlucHV0KSB7CiAgICBWU19PVVRQVVQgb3V0cHV0OwogICAgb3V0cHV0LlBvcyA9IGlucHV0LlBvczsKICAgIG91dHB1dC5Db2xvciA9IGlucHV0LkNvbG9yOwogICAgcmV0dXJuIG91dHB1dDsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Simple vertex shader
struct VS_INPUT {
    float4 Pos : POSITION;
    float4 Color : COLOR;
};

struct VS_OUTPUT {
    float4 Pos : SV_POSITION;
    float4 Color : COLOR;
};

VS_OUTPUT main(VS_INPUT input) {
    VS_OUTPUT output;
    output.Pos = input.Pos;
    output.Color = input.Color;
    return output;
}</pre></div><div class='content'><p>Explanation:</p>
<ul>
<li><strong>VS_INPUT</strong>: Structure defining the input to the vertex shader.</li>
<li><strong>VS_OUTPUT</strong>: Structure defining the output of the vertex shader.</li>
<li><strong>main</strong>: The main function of the vertex shader, transforming the input position and passing through the color.</li>
</ul>
</div><h2>Pixel Shader Example</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gU2ltcGxlIHBpeGVsIHNoYWRlcgpzdHJ1Y3QgUFNfSU5QVVQgewogICAgZmxvYXQ0IFBvcyA6IFNWX1BPU0lUSU9OOwogICAgZmxvYXQ0IENvbG9yIDogQ09MT1I7Cn07CgpmbG9hdDQgbWFpbihQU19JTlBVVCBpbnB1dCkgOiBTVl9UQVJHRVQgewogICAgcmV0dXJuIGlucHV0LkNvbG9yOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Simple pixel shader
struct PS_INPUT {
    float4 Pos : SV_POSITION;
    float4 Color : COLOR;
};

float4 main(PS_INPUT input) : SV_TARGET {
    return input.Color;
}</pre></div><div class='content'><p>Explanation:</p>
<ul>
<li><strong>PS_INPUT</strong>: Structure defining the input to the pixel shader.</li>
<li><strong>main</strong>: The main function of the pixel shader, outputting the color.</li>
</ul>
</div><h1>Compiling and Using Shaders in DirectX</h1>
<div class='content'><p>To use shaders in a DirectX application, you need to compile them and set them in the rendering pipeline.</p>
</div><h2>Compiling Shaders</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SUQzREJsb2IqIHZlcnRleFNoYWRlckJsb2I7CklEM0RCbG9iKiBwaXhlbFNoYWRlckJsb2I7CkQzRENvbXBpbGVGcm9tRmlsZShMInNoYWRlci5obHNsIiwgbnVsbHB0ciwgbnVsbHB0ciwgIlZTIiwgInZzXzVfMCIsIDAsIDAsICZ2ZXJ0ZXhTaGFkZXJCbG9iLCBudWxscHRyKTsKRDNEQ29tcGlsZUZyb21GaWxlKEwic2hhZGVyLmhsc2wiLCBudWxscHRyLCBudWxscHRyLCAiUFMiLCAicHNfNV8wIiwgMCwgMCwgJnBpeGVsU2hhZGVyQmxvYiwgbnVsbHB0cik7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ID3DBlob* vertexShaderBlob;
ID3DBlob* pixelShaderBlob;
D3DCompileFromFile(L&quot;shader.hlsl&quot;, nullptr, nullptr, &quot;VS&quot;, &quot;vs_5_0&quot;, 0, 0, &amp;vertexShaderBlob, nullptr);
D3DCompileFromFile(L&quot;shader.hlsl&quot;, nullptr, nullptr, &quot;PS&quot;, &quot;ps_5_0&quot;, 0, 0, &amp;pixelShaderBlob, nullptr);</pre></div><div class='content'><p>Explanation:</p>
<ul>
<li><strong>D3DCompileFromFile</strong>: Function to compile shaders from a file.</li>
<li><strong>&quot;VS&quot;</strong> and <strong>&quot;PS&quot;</strong>: Entry points for the vertex and pixel shaders.</li>
<li><strong>&quot;vs_5_0&quot;</strong> and <strong>&quot;ps_5_0&quot;</strong>: Shader models for vertex and pixel shaders.</li>
</ul>
</div><h2>Setting Shaders in the Pipeline</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("SUQzRDExVmVydGV4U2hhZGVyKiB2ZXJ0ZXhTaGFkZXI7CklEM0QxMVBpeGVsU2hhZGVyKiBwaXhlbFNoYWRlcjsKZGV2aWNlLT5DcmVhdGVWZXJ0ZXhTaGFkZXIodmVydGV4U2hhZGVyQmxvYi0+R2V0QnVmZmVyUG9pbnRlcigpLCB2ZXJ0ZXhTaGFkZXJCbG9iLT5HZXRCdWZmZXJTaXplKCksIG51bGxwdHIsICZ2ZXJ0ZXhTaGFkZXIpOwpkZXZpY2UtPkNyZWF0ZVBpeGVsU2hhZGVyKHBpeGVsU2hhZGVyQmxvYi0+R2V0QnVmZmVyUG9pbnRlcigpLCBwaXhlbFNoYWRlckJsb2ItPkdldEJ1ZmZlclNpemUoKSwgbnVsbHB0ciwgJnBpeGVsU2hhZGVyKTsKCmNvbnRleHQtPlZTU2V0U2hhZGVyKHZlcnRleFNoYWRlciwgbnVsbHB0ciwgMCk7CmNvbnRleHQtPlBTU2V0U2hhZGVyKHBpeGVsU2hhZGVyLCBudWxscHRyLCAwKTs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>ID3D11VertexShader* vertexShader;
ID3D11PixelShader* pixelShader;
device-&gt;CreateVertexShader(vertexShaderBlob-&gt;GetBufferPointer(), vertexShaderBlob-&gt;GetBufferSize(), nullptr, &amp;vertexShader);
device-&gt;CreatePixelShader(pixelShaderBlob-&gt;GetBufferPointer(), pixelShaderBlob-&gt;GetBufferSize(), nullptr, &amp;pixelShader);

context-&gt;VSSetShader(vertexShader, nullptr, 0);
context-&gt;PSSetShader(pixelShader, nullptr, 0);</pre></div><div class='content'><p>Explanation:</p>
<ul>
<li><strong>CreateVertexShader</strong> and <strong>CreatePixelShader</strong>: Functions to create shader objects.</li>
<li><strong>VSSetShader</strong> and <strong>PSSetShader</strong>: Functions to set the shaders in the rendering pipeline.</li>
</ul>
</div><h1>Advanced Shader Techniques</h1>
<div class='content'><p>Once you are comfortable with basic shaders, you can explore more advanced techniques.</p>
</div><h2>Lighting and Shading Models</h2>
<div class='content'><ul>
<li><strong>Phong Shading</strong>: A model for simulating the way light interacts with surfaces.</li>
<li><strong>Blinn-Phong Shading</strong>: An improvement over Phong shading for better performance.</li>
</ul>
</div><h2>Example: Phong Shading</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gUGhvbmcgc2hhZGluZyB2ZXJ0ZXggc2hhZGVyCnN0cnVjdCBWU19JTlBVVCB7CiAgICBmbG9hdDQgUG9zIDogUE9TSVRJT047CiAgICBmbG9hdDMgTm9ybWFsIDogTk9STUFMOwp9OwoKc3RydWN0IFZTX09VVFBVVCB7CiAgICBmbG9hdDQgUG9zIDogU1ZfUE9TSVRJT047CiAgICBmbG9hdDMgTm9ybWFsIDogTk9STUFMOwp9OwoKVlNfT1VUUFVUIG1haW4oVlNfSU5QVVQgaW5wdXQpIHsKICAgIFZTX09VVFBVVCBvdXRwdXQ7CiAgICBvdXRwdXQuUG9zID0gbXVsKHdvcmxkVmlld1Byb2osIGlucHV0LlBvcyk7CiAgICBvdXRwdXQuTm9ybWFsID0gbXVsKChmbG9hdDN4Myl3b3JsZCwgaW5wdXQuTm9ybWFsKTsKICAgIHJldHVybiBvdXRwdXQ7Cn0KCi8vIFBob25nIHNoYWRpbmcgcGl4ZWwgc2hhZGVyCmZsb2F0NCBtYWluKFBTX0lOUFVUIGlucHV0KSA6IFNWX1RBUkdFVCB7CiAgICBmbG9hdDMgbGlnaHREaXIgPSBub3JtYWxpemUobGlnaHRQb3MgLSBpbnB1dC5Qb3MpOwogICAgZmxvYXQzIG5vcm1hbCA9IG5vcm1hbGl6ZShpbnB1dC5Ob3JtYWwpOwogICAgZmxvYXQzIHZpZXdEaXIgPSBub3JtYWxpemUodmlld1BvcyAtIGlucHV0LlBvcyk7CiAgICBmbG9hdDMgcmVmbGVjdERpciA9IHJlZmxlY3QoLWxpZ2h0RGlyLCBub3JtYWwpOwoKICAgIGZsb2F0IGFtYmllbnQgPSAwLjE7CiAgICBmbG9hdCBkaWZmdXNlID0gbWF4KGRvdChsaWdodERpciwgbm9ybWFsKSwgMC4wKTsKICAgIGZsb2F0IHNwZWN1bGFyID0gcG93KG1heChkb3Qodmlld0RpciwgcmVmbGVjdERpciksIDAuMCksIHNoaW5pbmVzcyk7CgogICAgZmxvYXQzIGNvbG9yID0gYW1iaWVudCAqIGFtYmllbnRDb2xvciArIGRpZmZ1c2UgKiBkaWZmdXNlQ29sb3IgKyBzcGVjdWxhciAqIHNwZWN1bGFyQ29sb3I7CiAgICByZXR1cm4gZmxvYXQ0KGNvbG9yLCAxLjApOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Phong shading vertex shader
struct VS_INPUT {
    float4 Pos : POSITION;
    float3 Normal : NORMAL;
};

struct VS_OUTPUT {
    float4 Pos : SV_POSITION;
    float3 Normal : NORMAL;
};

VS_OUTPUT main(VS_INPUT input) {
    VS_OUTPUT output;
    output.Pos = mul(worldViewProj, input.Pos);
    output.Normal = mul((float3x3)world, input.Normal);
    return output;
}

// Phong shading pixel shader
float4 main(PS_INPUT input) : SV_TARGET {
    float3 lightDir = normalize(lightPos - input.Pos);
    float3 normal = normalize(input.Normal);
    float3 viewDir = normalize(viewPos - input.Pos);
    float3 reflectDir = reflect(-lightDir, normal);

    float ambient = 0.1;
    float diffuse = max(dot(lightDir, normal), 0.0);
    float specular = pow(max(dot(viewDir, reflectDir), 0.0), shininess);

    float3 color = ambient * ambientColor + diffuse * diffuseColor + specular * specularColor;
    return float4(color, 1.0);
}</pre></div><div class='content'><p>Explanation:</p>
<ul>
<li><strong>Phong Shading</strong>: Calculates ambient, diffuse, and specular components for realistic lighting.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Working with shaders in DirectX involves understanding the basics of HLSL, writing vertex and pixel shaders, and integrating them into your application. As you advance, you can explore more complex shading techniques to create realistic and visually appealing graphics. Practice and experimentation are key to mastering shader programming.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='understanding-the-graphics-pipeline'>&#x25C4;Understanding the Graphics Pipeline</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Working with Shaders</a>
	</div>
	<div class='col-4 text-end'>
					<a href='textures-and-materials'>Textures and Materials &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
