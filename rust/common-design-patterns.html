<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Common Design Patterns in Rust</title>

    <link rel="alternate" href="https://campusempresa.com/rust/common-design-patterns" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/rust/common-design-patterns" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/rust/common-design-patterns" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/rust/common-design-patterns" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/rust/common-design-patterns" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='code-style-and-formatting'>&#x25C4;Code Style and Formatting</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Common Design Patterns in Rust</a>
	</div>
	<div class='col-4 text-end'>
					<a href='performance-optimization'>Performance Optimization &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Design patterns are typical solutions to common problems in software design. They are like blueprints that can be customized to solve a particular design problem in your code. In this section, we will explore some of the most common design patterns and how to implement them in Rust.</p>
</div><h1>Singleton Pattern</h1>
<div class='content'><p>The Singleton pattern ensures that a class has only one instance and provides a global point of access to it.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Single Instance</strong>: Only one instance of the class is created.</li>
<li><strong>Global Access</strong>: The instance is globally accessible.</li>
</ul>
</div><h2>Implementation in Rust</h2>
<div class='content'><p>In Rust, we can use the <code>lazy_static</code> crate to implement the Singleton pattern.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("I1ttYWNyb191c2VdCmV4dGVybiBjcmF0ZSBsYXp5X3N0YXRpYzsKdXNlIHN0ZDo6c3luYzo6TXV0ZXg7CgpzdHJ1Y3QgU2luZ2xldG9uIHsKICAgIHZhbHVlOiBpMzIsCn0KCmltcGwgU2luZ2xldG9uIHsKICAgIGZuIG5ldygpIC0+IFNpbmdsZXRvbiB7CiAgICAgICAgU2luZ2xldG9uIHsgdmFsdWU6IDAgfQogICAgfQoKICAgIGZuIHNldF92YWx1ZSgmbXV0IHNlbGYsIHZhbHVlOiBpMzIpIHsKICAgICAgICBzZWxmLnZhbHVlID0gdmFsdWU7CiAgICB9CgogICAgZm4gZ2V0X3ZhbHVlKCZzZWxmKSAtPiBpMzIgewogICAgICAgIHNlbGYudmFsdWUKICAgIH0KfQoKbGF6eV9zdGF0aWMhIHsKICAgIHN0YXRpYyByZWYgU0lOR0xFVE9OOiBNdXRleDxTaW5nbGV0b24+ID0gTXV0ZXg6Om5ldyhTaW5nbGV0b246Om5ldygpKTsKfQoKZm4gbWFpbigpIHsKICAgIHsKICAgICAgICBsZXQgbXV0IHNpbmdsZXRvbiA9IFNJTkdMRVRPTi5sb2NrKCkudW53cmFwKCk7CiAgICAgICAgc2luZ2xldG9uLnNldF92YWx1ZSg0Mik7CiAgICB9CgogICAgewogICAgICAgIGxldCBzaW5nbGV0b24gPSBTSU5HTEVUT04ubG9jaygpLnVud3JhcCgpOwogICAgICAgIHByaW50bG4hKCJTaW5nbGV0b24gdmFsdWU6IHt9Iiwgc2luZ2xldG9uLmdldF92YWx1ZSgpKTsKICAgIH0KfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>#[macro_use]
extern crate lazy_static;
use std::sync::Mutex;

struct Singleton {
    value: i32,
}

impl Singleton {
    fn new() -&gt; Singleton {
        Singleton { value: 0 }
    }

    fn set_value(&amp;mut self, value: i32) {
        self.value = value;
    }

    fn get_value(&amp;self) -&gt; i32 {
        self.value
    }
}

lazy_static! {
    static ref SINGLETON: Mutex&lt;Singleton&gt; = Mutex::new(Singleton::new());
}

fn main() {
    {
        let mut singleton = SINGLETON.lock().unwrap();
        singleton.set_value(42);
    }

    {
        let singleton = SINGLETON.lock().unwrap();
        println!(&quot;Singleton value: {}&quot;, singleton.get_value());
    }
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>lazy_static!</strong>: This macro allows us to define static variables that require code to be executed at runtime.</li>
<li><strong>Mutex</strong>: Ensures that only one thread can access the Singleton instance at a time, making it thread-safe.</li>
</ul>
</div><h1>Builder Pattern</h1>
<div class='content'><p>The Builder pattern is used to construct a complex object step by step. It separates the construction of a complex object from its representation.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Step-by-Step Construction</strong>: Build the object step by step.</li>
<li><strong>Separation of Concerns</strong>: Separate the construction process from the final representation.</li>
</ul>
</div><h2>Implementation in Rust</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("c3RydWN0IEhvdXNlIHsKICAgIHdhbGxzOiB1MzIsCiAgICBkb29yczogdTMyLAogICAgd2luZG93czogdTMyLAp9CgpzdHJ1Y3QgSG91c2VCdWlsZGVyIHsKICAgIHdhbGxzOiB1MzIsCiAgICBkb29yczogdTMyLAogICAgd2luZG93czogdTMyLAp9CgppbXBsIEhvdXNlQnVpbGRlciB7CiAgICBmbiBuZXcoKSAtPiBIb3VzZUJ1aWxkZXIgewogICAgICAgIEhvdXNlQnVpbGRlciB7CiAgICAgICAgICAgIHdhbGxzOiAwLAogICAgICAgICAgICBkb29yczogMCwKICAgICAgICAgICAgd2luZG93czogMCwKICAgICAgICB9CiAgICB9CgogICAgZm4gd2FsbHMobXV0IHNlbGYsIGNvdW50OiB1MzIpIC0+IEhvdXNlQnVpbGRlciB7CiAgICAgICAgc2VsZi53YWxscyA9IGNvdW50OwogICAgICAgIHNlbGYKICAgIH0KCiAgICBmbiBkb29ycyhtdXQgc2VsZiwgY291bnQ6IHUzMikgLT4gSG91c2VCdWlsZGVyIHsKICAgICAgICBzZWxmLmRvb3JzID0gY291bnQ7CiAgICAgICAgc2VsZgogICAgfQoKICAgIGZuIHdpbmRvd3MobXV0IHNlbGYsIGNvdW50OiB1MzIpIC0+IEhvdXNlQnVpbGRlciB7CiAgICAgICAgc2VsZi53aW5kb3dzID0gY291bnQ7CiAgICAgICAgc2VsZgogICAgfQoKICAgIGZuIGJ1aWxkKHNlbGYpIC0+IEhvdXNlIHsKICAgICAgICBIb3VzZSB7CiAgICAgICAgICAgIHdhbGxzOiBzZWxmLndhbGxzLAogICAgICAgICAgICBkb29yczogc2VsZi5kb29ycywKICAgICAgICAgICAgd2luZG93czogc2VsZi53aW5kb3dzLAogICAgICAgIH0KICAgIH0KfQoKZm4gbWFpbigpIHsKICAgIGxldCBob3VzZSA9IEhvdXNlQnVpbGRlcjo6bmV3KCkKICAgICAgICAud2FsbHMoNCkKICAgICAgICAuZG9vcnMoMikKICAgICAgICAud2luZG93cyg2KQogICAgICAgIC5idWlsZCgpOwoKICAgIHByaW50bG4hKCJIb3VzZSBoYXMge30gd2FsbHMsIHt9IGRvb3JzLCBhbmQge30gd2luZG93cy4iLCBob3VzZS53YWxscywgaG91c2UuZG9vcnMsIGhvdXNlLndpbmRvd3MpOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>struct House {
    walls: u32,
    doors: u32,
    windows: u32,
}

struct HouseBuilder {
    walls: u32,
    doors: u32,
    windows: u32,
}

impl HouseBuilder {
    fn new() -&gt; HouseBuilder {
        HouseBuilder {
            walls: 0,
            doors: 0,
            windows: 0,
        }
    }

    fn walls(mut self, count: u32) -&gt; HouseBuilder {
        self.walls = count;
        self
    }

    fn doors(mut self, count: u32) -&gt; HouseBuilder {
        self.doors = count;
        self
    }

    fn windows(mut self, count: u32) -&gt; HouseBuilder {
        self.windows = count;
        self
    }

    fn build(self) -&gt; House {
        House {
            walls: self.walls,
            doors: self.doors,
            windows: self.windows,
        }
    }
}

fn main() {
    let house = HouseBuilder::new()
        .walls(4)
        .doors(2)
        .windows(6)
        .build();

    println!(&quot;House has {} walls, {} doors, and {} windows.&quot;, house.walls, house.doors, house.windows);
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Fluent Interface</strong>: The builder methods return <code>self</code>, allowing for method chaining.</li>
<li><strong>Final Build</strong>: The <code>build</code> method constructs the final <code>House</code> object.</li>
</ul>
</div><h1>Observer Pattern</h1>
<div class='content'><p>The Observer pattern defines a one-to-many dependency between objects so that when one object changes state, all its dependents are notified and updated automatically.</p>
</div><h2>Key Concepts</h2>
<div class='content'><ul>
<li><strong>Subject</strong>: The object being observed.</li>
<li><strong>Observers</strong>: The objects that are notified of changes in the subject.</li>
</ul>
</div><h2>Implementation in Rust</h2>
<div class='content'></div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlIHN0ZDo6Y2VsbDo6UmVmQ2VsbDsKdXNlIHN0ZDo6cmM6OlJjOwoKdHJhaXQgT2JzZXJ2ZXIgewogICAgZm4gdXBkYXRlKCZzZWxmKTsKfQoKc3RydWN0IFN1YmplY3QgewogICAgb2JzZXJ2ZXJzOiBWZWM8UmM8UmVmQ2VsbDxkeW4gT2JzZXJ2ZXI+Pj4sCn0KCmltcGwgU3ViamVjdCB7CiAgICBmbiBuZXcoKSAtPiBTdWJqZWN0IHsKICAgICAgICBTdWJqZWN0IHsKICAgICAgICAgICAgb2JzZXJ2ZXJzOiBWZWM6Om5ldygpLAogICAgICAgIH0KICAgIH0KCiAgICBmbiBhZGRfb2JzZXJ2ZXIoJm11dCBzZWxmLCBvYnNlcnZlcjogUmM8UmVmQ2VsbDxkeW4gT2JzZXJ2ZXI+PikgewogICAgICAgIHNlbGYub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpOwogICAgfQoKICAgIGZuIG5vdGlmeV9vYnNlcnZlcnMoJnNlbGYpIHsKICAgICAgICBmb3Igb2JzZXJ2ZXIgaW4gJnNlbGYub2JzZXJ2ZXJzIHsKICAgICAgICAgICAgb2JzZXJ2ZXIuYm9ycm93KCkudXBkYXRlKCk7CiAgICAgICAgfQogICAgfQp9CgpzdHJ1Y3QgQ29uY3JldGVPYnNlcnZlciB7CiAgICBpZDogdTMyLAp9CgppbXBsIE9ic2VydmVyIGZvciBDb25jcmV0ZU9ic2VydmVyIHsKICAgIGZuIHVwZGF0ZSgmc2VsZikgewogICAgICAgIHByaW50bG4hKCJPYnNlcnZlciB7fSBoYXMgYmVlbiBub3RpZmllZCEiLCBzZWxmLmlkKTsKICAgIH0KfQoKZm4gbWFpbigpIHsKICAgIGxldCBtdXQgc3ViamVjdCA9IFN1YmplY3Q6Om5ldygpOwoKICAgIGxldCBvYnNlcnZlcjEgPSBSYzo6bmV3KFJlZkNlbGw6Om5ldyhDb25jcmV0ZU9ic2VydmVyIHsgaWQ6IDEgfSkpOwogICAgbGV0IG9ic2VydmVyMiA9IFJjOjpuZXcoUmVmQ2VsbDo6bmV3KENvbmNyZXRlT2JzZXJ2ZXIgeyBpZDogMiB9KSk7CgogICAgc3ViamVjdC5hZGRfb2JzZXJ2ZXIob2JzZXJ2ZXIxLmNsb25lKCkpOwogICAgc3ViamVjdC5hZGRfb2JzZXJ2ZXIob2JzZXJ2ZXIyLmNsb25lKCkpOwoKICAgIHN1YmplY3Qubm90aWZ5X29ic2VydmVycygpOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>use std::cell::RefCell;
use std::rc::Rc;

trait Observer {
    fn update(&amp;self);
}

struct Subject {
    observers: Vec&lt;Rc&lt;RefCell&lt;dyn Observer&gt;&gt;&gt;,
}

impl Subject {
    fn new() -&gt; Subject {
        Subject {
            observers: Vec::new(),
        }
    }

    fn add_observer(&amp;mut self, observer: Rc&lt;RefCell&lt;dyn Observer&gt;&gt;) {
        self.observers.push(observer);
    }

    fn notify_observers(&amp;self) {
        for observer in &amp;self.observers {
            observer.borrow().update();
        }
    }
}

struct ConcreteObserver {
    id: u32,
}

impl Observer for ConcreteObserver {
    fn update(&amp;self) {
        println!(&quot;Observer {} has been notified!&quot;, self.id);
    }
}

fn main() {
    let mut subject = Subject::new();

    let observer1 = Rc::new(RefCell::new(ConcreteObserver { id: 1 }));
    let observer2 = Rc::new(RefCell::new(ConcreteObserver { id: 2 }));

    subject.add_observer(observer1.clone());
    subject.add_observer(observer2.clone());

    subject.notify_observers();
}</pre></div><div class='content'></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Rc and RefCell</strong>: Used for reference-counted smart pointers and interior mutability, respectively.</li>
<li><strong>Dynamic Dispatch</strong>: The <code>Observer</code> trait allows for different types of observers.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Design patterns provide reusable solutions to common problems in software design. In Rust, these patterns can be implemented using various language features such as traits, smart pointers, and concurrency primitives. By understanding and applying these patterns, you can write more robust and maintainable Rust code.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='code-style-and-formatting'>&#x25C4;Code Style and Formatting</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Common Design Patterns in Rust</a>
	</div>
	<div class='col-4 text-end'>
					<a href='performance-optimization'>Performance Optimization &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
