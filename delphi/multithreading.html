<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multithreading in Delphi/Object Pascal</title>

    <link rel="alternate" href="https://campusempresa.com/delphi/multithreading" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/delphi/multithreading" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/delphi/multithreading" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/delphi/multithreading" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/delphi/multithreading" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='database-access-with-delphi'>&#x25C4;Database Access with Delphi</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Multithreading in Delphi/Object Pascal</a>
	</div>
	<div class='col-4 text-end'>
					<a href='networking-and-internet-programming'>Networking and Internet Programming &#x25BA;</a>
			</div>
</div>
<div class='content'><p>Multithreading is a powerful feature in Delphi/Object Pascal that allows a program to perform multiple operations simultaneously. This can significantly improve the performance of applications, especially those that perform time-consuming tasks. This topic will guide you from the basics of multithreading to advanced concepts, with clear explanations, examples, and exercises.</p>
</div><h1>Introduction to Multithreading</h1>
<div class='content'><ul>
<li><strong>Definition</strong>: Multithreading is the ability of a CPU, or a single core in a multi-core processor, to provide multiple threads of execution concurrently.</li>
<li><strong>Benefits</strong>:
<ul>
<li>Improved application responsiveness.</li>
<li>Better utilization of CPU resources.</li>
<li>Enhanced performance for concurrent tasks.</li>
</ul>
</li>
</ul>
</div><h1>Basic Concepts</h1>
<div class='content'></div><h2>Threads and Processes</h2>
<div class='content'><ul>
<li><strong>Process</strong>: An independent program in execution, with its own memory space.</li>
<li><strong>Thread</strong>: The smallest unit of execution within a process, sharing the same memory space.</li>
</ul>
</div><h2>Creating Threads in Delphi</h2>
<div class='content'><p>In Delphi, threads are created by defining a class that inherits from <code>TThread</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dHlwZQogIFRNeVRocmVhZCA9IGNsYXNzKFRUaHJlYWQpCiAgcHJvdGVjdGVkCiAgICBwcm9jZWR1cmUgRXhlY3V0ZTsgb3ZlcnJpZGU7CiAgZW5kOwoKcHJvY2VkdXJlIFRNeVRocmVhZC5FeGVjdXRlOwpiZWdpbgogIC8vIFRocmVhZCBjb2RlIGdvZXMgaGVyZQplbmQ7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>type
  TMyThread = class(TThread)
  protected
    procedure Execute; override;
  end;

procedure TMyThread.Execute;
begin
  // Thread code goes here
end;</pre></div><div class='content'></div><h2>Starting a Thread</h2>
<div class='content'><p>To start a thread, create an instance of the thread class and call its <code>Start</code> method.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyCiAgTXlUaHJlYWQ6IFRNeVRocmVhZDsKYmVnaW4KICBNeVRocmVhZCA6PSBUTXlUaHJlYWQuQ3JlYXRlKFRydWUpOyAvLyBDcmVhdGUgc3VzcGVuZGVkCiAgTXlUaHJlYWQuU3RhcnQ7IC8vIFN0YXJ0IHRoZSB0aHJlYWQKZW5kOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>var
  MyThread: TMyThread;
begin
  MyThread := TMyThread.Create(True); // Create suspended
  MyThread.Start; // Start the thread
end;</pre></div><div class='content'></div><h1>Synchronization</h1>
<div class='content'><p>When multiple threads access shared resources, synchronization is crucial to avoid conflicts and ensure data integrity.</p>
</div><h2>Critical Sections</h2>
<div class='content'><p>A critical section is a portion of code that only one thread can execute at a time.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dmFyCiAgQ3JpdGljYWxTZWN0aW9uOiBUUlRMQ3JpdGljYWxTZWN0aW9uOwoKcHJvY2VkdXJlIFRNeVRocmVhZC5FeGVjdXRlOwpiZWdpbgogIEVudGVyQ3JpdGljYWxTZWN0aW9uKENyaXRpY2FsU2VjdGlvbik7CiAgdHJ5CiAgICAvLyBDb2RlIHRoYXQgYWNjZXNzZXMgc2hhcmVkIHJlc291cmNlcwogIGZpbmFsbHkKICAgIExlYXZlQ3JpdGljYWxTZWN0aW9uKENyaXRpY2FsU2VjdGlvbik7CiAgZW5kOwplbmQ7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>var
  CriticalSection: TRTLCriticalSection;

procedure TMyThread.Execute;
begin
  EnterCriticalSection(CriticalSection);
  try
    // Code that accesses shared resources
  finally
    LeaveCriticalSection(CriticalSection);
  end;
end;</pre></div><div class='content'></div><h2>TMonitor</h2>
<div class='content'><p><code>TMonitor</code> provides a higher-level synchronization mechanism.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvY2VkdXJlIFRNeVRocmVhZC5FeGVjdXRlOwpiZWdpbgogIFRNb25pdG9yLkVudGVyKFNvbWVPYmplY3QpOwogIHRyeQogICAgLy8gQ29kZSB0aGF0IGFjY2Vzc2VzIHNoYXJlZCByZXNvdXJjZXMKICBmaW5hbGx5CiAgICBUTW9uaXRvci5FeGl0KFNvbWVPYmplY3QpOwogIGVuZDsKZW5kOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>procedure TMyThread.Execute;
begin
  TMonitor.Enter(SomeObject);
  try
    // Code that accesses shared resources
  finally
    TMonitor.Exit(SomeObject);
  end;
end;</pre></div><div class='content'></div><h1>Advanced Concepts</h1>
<div class='content'></div><h2>Thread Communication</h2>
<div class='content'><p>Threads often need to communicate with each other or with the main thread.</p>
<h4>Using Synchronize</h4>
<p><code>Synchronize</code> allows a thread to execute code in the context of the main thread.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvY2VkdXJlIFRNeVRocmVhZC5FeGVjdXRlOwpiZWdpbgogIFN5bmNocm9uaXplKHByb2NlZHVyZQogIGJlZ2luCiAgICAvLyBDb2RlIHRvIGJlIGV4ZWN1dGVkIGluIHRoZSBtYWluIHRocmVhZAogIGVuZCk7CmVuZDs="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>procedure TMyThread.Execute;
begin
  Synchronize(procedure
  begin
    // Code to be executed in the main thread
  end);
end;</pre></div><div class='content'><h4>Using TThread.Queue</h4>
<p><code>TThread.Queue</code> is a non-blocking alternative to <code>Synchronize</code>.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("cHJvY2VkdXJlIFRNeVRocmVhZC5FeGVjdXRlOwpiZWdpbgogIFRUaHJlYWQuUXVldWUobmlsLCBwcm9jZWR1cmUKICBiZWdpbgogICAgLy8gQ29kZSB0byBiZSBleGVjdXRlZCBpbiB0aGUgbWFpbiB0aHJlYWQKICBlbmQpOwplbmQ7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>procedure TMyThread.Execute;
begin
  TThread.Queue(nil, procedure
  begin
    // Code to be executed in the main thread
  end);
end;</pre></div><div class='content'></div><h2>Thread Pools</h2>
<div class='content'><p>A thread pool is a collection of worker threads that efficiently manage the execution of asynchronous tasks.</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("dXNlcwogIFN5c3RlbS5UaHJlYWRpbmc7Cgpwcm9jZWR1cmUgVXNlVGhyZWFkUG9vbDsKYmVnaW4KICBUVGFzay5SdW4ocHJvY2VkdXJlCiAgYmVnaW4KICAgIC8vIEFzeW5jaHJvbm91cyB0YXNrIGNvZGUKICBlbmQpOwplbmQ7"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>uses
  System.Threading;

procedure UseThreadPool;
begin
  TTask.Run(procedure
  begin
    // Asynchronous task code
  end);
end;</pre></div><div class='content'></div><h1>Exercises</h1>
<div class='content'><ol>
<li><strong>Basic Thread Creation</strong>: Create a simple thread that prints numbers from 1 to 10 with a delay.</li>
<li><strong>Synchronization</strong>: Modify the above thread to print numbers in a synchronized manner to avoid conflicts.</li>
<li><strong>Thread Communication</strong>: Create a thread that updates a label on a form using <code>Synchronize</code> or <code>TThread.Queue</code>.</li>
<li><strong>Thread Pool</strong>: Implement a task using <code>TTask.Run</code> that performs a background calculation and updates the UI with the result.</li>
</ol>
</div><h1>Summary</h1>
<div class='content'><p>Multithreading in Delphi/Object Pascal allows for concurrent execution of code, improving application performance and responsiveness. By understanding the basics of thread creation, synchronization, and communication, as well as advanced concepts like thread pools, you can effectively leverage multithreading in your applications. Practice with the provided exercises to solidify your understanding and enhance your skills.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='database-access-with-delphi'>&#x25C4;Database Access with Delphi</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Multithreading in Delphi/Object Pascal</a>
	</div>
	<div class='col-4 text-end'>
					<a href='networking-and-internet-programming'>Networking and Internet Programming &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
