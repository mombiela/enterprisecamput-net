<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Shading Techniques</title>

    <link rel="alternate" href="https://campusempresa.com/open_gl/advanced-shading-techniques" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/open_gl/advanced-shading-techniques" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/open_gl/advanced-shading-techniques" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/open_gl/advanced-shading-techniques" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/open_gl/advanced-shading-techniques" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='framebuffers-and-renderbuffers'>&#x25C4;Framebuffers and Renderbuffers</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Advanced Shading Techniques</a>
	</div>
	<div class='col-4 text-end'>
					<a href='shadow-mapping'>Shadow Mapping &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Shading in OpenGL</h1>
<div class='content'><p>Shading is a crucial aspect of rendering in OpenGL, allowing for the creation of realistic lighting and surface effects. This section will cover advanced shading techniques that go beyond basic lighting models.</p>
</div><h1>Key Concepts</h1>
<div class='content'><ul>
<li><strong>Phong Shading</strong>: An interpolation technique for achieving smooth shading.</li>
<li><strong>Blinn-Phong Shading</strong>: A variant of Phong shading that is more efficient for specular highlights.</li>
<li><strong>Normal Mapping</strong>: A technique to add surface detail without increasing geometry complexity.</li>
<li><strong>Parallax Mapping</strong>: An enhancement over normal mapping to simulate depth.</li>
<li><strong>Physically Based Rendering (PBR)</strong>: A method to achieve more realistic materials by simulating the physical properties of surfaces.</li>
</ul>
</div><h1>Phong Shading</h1>
<div class='content'><p>Phong shading interpolates surface normals across polygons and computes pixel colors based on these interpolated normals.</p>
</div><h2>Example Code</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gVmVydGV4IFNoYWRlcgojdmVyc2lvbiAzMzAgY29yZQpsYXlvdXQobG9jYXRpb24gPSAwKSBpbiB2ZWMzIGFQb3M7CmxheW91dChsb2NhdGlvbiA9IDEpIGluIHZlYzMgYU5vcm1hbDsKCm91dCB2ZWMzIEZyYWdQb3M7Cm91dCB2ZWMzIE5vcm1hbDsKCnVuaWZvcm0gbWF0NCBtb2RlbDsKdW5pZm9ybSBtYXQ0IHZpZXc7CnVuaWZvcm0gbWF0NCBwcm9qZWN0aW9uOwoKdm9pZCBtYWluKCkKewogICAgRnJhZ1BvcyA9IHZlYzMobW9kZWwgKiB2ZWM0KGFQb3MsIDEuMCkpOwogICAgTm9ybWFsID0gbWF0Myh0cmFuc3Bvc2UoaW52ZXJzZShtb2RlbCkpKSAqIGFOb3JtYWw7ICAKICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbiAqIHZpZXcgKiB2ZWM0KEZyYWdQb3MsIDEuMCk7Cn0KCi8vIEZyYWdtZW50IFNoYWRlcgojdmVyc2lvbiAzMzAgY29yZQpvdXQgdmVjNCBGcmFnQ29sb3I7CgppbiB2ZWMzIEZyYWdQb3M7CmluIHZlYzMgTm9ybWFsOwoKdW5pZm9ybSB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIHZlYzMgdmlld1BvczsKdW5pZm9ybSB2ZWMzIGxpZ2h0Q29sb3I7CnVuaWZvcm0gdmVjMyBvYmplY3RDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIC8vIEFtYmllbnQKICAgIGZsb2F0IGFtYmllbnRTdHJlbmd0aCA9IDAuMTsKICAgIHZlYzMgYW1iaWVudCA9IGFtYmllbnRTdHJlbmd0aCAqIGxpZ2h0Q29sb3I7CiAgICAKICAgIC8vIERpZmZ1c2UgCiAgICB2ZWMzIG5vcm0gPSBub3JtYWxpemUoTm9ybWFsKTsKICAgIHZlYzMgbGlnaHREaXIgPSBub3JtYWxpemUobGlnaHRQb3MgLSBGcmFnUG9zKTsKICAgIGZsb2F0IGRpZmYgPSBtYXgoZG90KG5vcm0sIGxpZ2h0RGlyKSwgMC4wKTsKICAgIHZlYzMgZGlmZnVzZSA9IGRpZmYgKiBsaWdodENvbG9yOwogICAgCiAgICAvLyBTcGVjdWxhcgogICAgZmxvYXQgc3BlY3VsYXJTdHJlbmd0aCA9IDAuNTsKICAgIHZlYzMgdmlld0RpciA9IG5vcm1hbGl6ZSh2aWV3UG9zIC0gRnJhZ1Bvcyk7CiAgICB2ZWMzIHJlZmxlY3REaXIgPSByZWZsZWN0KC1saWdodERpciwgbm9ybSk7ICAKICAgIGZsb2F0IHNwZWMgPSBwb3cobWF4KGRvdCh2aWV3RGlyLCByZWZsZWN0RGlyKSwgMC4wKSwgMzIpOwogICAgdmVjMyBzcGVjdWxhciA9IHNwZWN1bGFyU3RyZW5ndGggKiBzcGVjICogbGlnaHRDb2xvcjsgIAogICAgCiAgICB2ZWMzIHJlc3VsdCA9IChhbWJpZW50ICsgZGlmZnVzZSArIHNwZWN1bGFyKSAqIG9iamVjdENvbG9yOwogICAgRnJhZ0NvbG9yID0gdmVjNChyZXN1bHQsIDEuMCk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Vertex Shader
#version 330 core
layout(location = 0) in vec3 aPos;
layout(location = 1) in vec3 aNormal;

out vec3 FragPos;
out vec3 Normal;

uniform mat4 model;
uniform mat4 view;
uniform mat4 projection;

void main()
{
    FragPos = vec3(model * vec4(aPos, 1.0));
    Normal = mat3(transpose(inverse(model))) * aNormal;  
    gl_Position = projection * view * vec4(FragPos, 1.0);
}

// Fragment Shader
#version 330 core
out vec4 FragColor;

in vec3 FragPos;
in vec3 Normal;

uniform vec3 lightPos;
uniform vec3 viewPos;
uniform vec3 lightColor;
uniform vec3 objectColor;

void main()
{
    // Ambient
    float ambientStrength = 0.1;
    vec3 ambient = ambientStrength * lightColor;
    
    // Diffuse 
    vec3 norm = normalize(Normal);
    vec3 lightDir = normalize(lightPos - FragPos);
    float diff = max(dot(norm, lightDir), 0.0);
    vec3 diffuse = diff * lightColor;
    
    // Specular
    float specularStrength = 0.5;
    vec3 viewDir = normalize(viewPos - FragPos);
    vec3 reflectDir = reflect(-lightDir, norm);  
    float spec = pow(max(dot(viewDir, reflectDir), 0.0), 32);
    vec3 specular = specularStrength * spec * lightColor;  
    
    vec3 result = (ambient + diffuse + specular) * objectColor;
    FragColor = vec4(result, 1.0);
}</pre></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Ambient</strong>: A constant light added to all surfaces to simulate indirect lighting.</li>
<li><strong>Diffuse</strong>: Light scattered in many directions when hitting a rough surface.</li>
<li><strong>Specular</strong>: The bright spot of light that appears on shiny objects.</li>
</ul>
</div><h1>Blinn-Phong Shading</h1>
<div class='content'><p>Blinn-Phong shading modifies the specular component to be more efficient.</p>
</div><h2>Example Code</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRnJhZ21lbnQgU2hhZGVyCiN2ZXJzaW9uIDMzMCBjb3JlCm91dCB2ZWM0IEZyYWdDb2xvcjsKCmluIHZlYzMgRnJhZ1BvczsKaW4gdmVjMyBOb3JtYWw7Cgp1bmlmb3JtIHZlYzMgbGlnaHRQb3M7CnVuaWZvcm0gdmVjMyB2aWV3UG9zOwp1bmlmb3JtIHZlYzMgbGlnaHRDb2xvcjsKdW5pZm9ybSB2ZWMzIG9iamVjdENvbG9yOwoKdm9pZCBtYWluKCkKewogICAgLy8gQW1iaWVudAogICAgZmxvYXQgYW1iaWVudFN0cmVuZ3RoID0gMC4xOwogICAgdmVjMyBhbWJpZW50ID0gYW1iaWVudFN0cmVuZ3RoICogbGlnaHRDb2xvcjsKICAgIAogICAgLy8gRGlmZnVzZSAKICAgIHZlYzMgbm9ybSA9IG5vcm1hbGl6ZShOb3JtYWwpOwogICAgdmVjMyBsaWdodERpciA9IG5vcm1hbGl6ZShsaWdodFBvcyAtIEZyYWdQb3MpOwogICAgZmxvYXQgZGlmZiA9IG1heChkb3Qobm9ybSwgbGlnaHREaXIpLCAwLjApOwogICAgdmVjMyBkaWZmdXNlID0gZGlmZiAqIGxpZ2h0Q29sb3I7CiAgICAKICAgIC8vIFNwZWN1bGFyCiAgICBmbG9hdCBzcGVjdWxhclN0cmVuZ3RoID0gMC41OwogICAgdmVjMyB2aWV3RGlyID0gbm9ybWFsaXplKHZpZXdQb3MgLSBGcmFnUG9zKTsKICAgIHZlYzMgaGFsZndheURpciA9IG5vcm1hbGl6ZShsaWdodERpciArIHZpZXdEaXIpOyAgCiAgICBmbG9hdCBzcGVjID0gcG93KG1heChkb3Qobm9ybSwgaGFsZndheURpciksIDAuMCksIDMyKTsKICAgIHZlYzMgc3BlY3VsYXIgPSBzcGVjdWxhclN0cmVuZ3RoICogc3BlYyAqIGxpZ2h0Q29sb3I7ICAKICAgIAogICAgdmVjMyByZXN1bHQgPSAoYW1iaWVudCArIGRpZmZ1c2UgKyBzcGVjdWxhcikgKiBvYmplY3RDb2xvcjsKICAgIEZyYWdDb2xvciA9IHZlYzQocmVzdWx0LCAxLjApOwp9"))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Fragment Shader
#version 330 core
out vec4 FragColor;

in vec3 FragPos;
in vec3 Normal;

uniform vec3 lightPos;
uniform vec3 viewPos;
uniform vec3 lightColor;
uniform vec3 objectColor;

void main()
{
    // Ambient
    float ambientStrength = 0.1;
    vec3 ambient = ambientStrength * lightColor;
    
    // Diffuse 
    vec3 norm = normalize(Normal);
    vec3 lightDir = normalize(lightPos - FragPos);
    float diff = max(dot(norm, lightDir), 0.0);
    vec3 diffuse = diff * lightColor;
    
    // Specular
    float specularStrength = 0.5;
    vec3 viewDir = normalize(viewPos - FragPos);
    vec3 halfwayDir = normalize(lightDir + viewDir);  
    float spec = pow(max(dot(norm, halfwayDir), 0.0), 32);
    vec3 specular = specularStrength * spec * lightColor;  
    
    vec3 result = (ambient + diffuse + specular) * objectColor;
    FragColor = vec4(result, 1.0);
}</pre></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Halfway Vector</strong>: Used instead of the reflection vector to calculate the specular component, improving performance.</li>
</ul>
</div><h1>Normal Mapping</h1>
<div class='content'><p>Normal mapping adds detail to surfaces by perturbing the normals.</p>
</div><h2>Example Code</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gVmVydGV4IFNoYWRlcgojdmVyc2lvbiAzMzAgY29yZQpsYXlvdXQobG9jYXRpb24gPSAwKSBpbiB2ZWMzIGFQb3M7CmxheW91dChsb2NhdGlvbiA9IDEpIGluIHZlYzMgYU5vcm1hbDsKbGF5b3V0KGxvY2F0aW9uID0gMikgaW4gdmVjMiBhVGV4Q29vcmRzOwpsYXlvdXQobG9jYXRpb24gPSAzKSBpbiB2ZWMzIGFUYW5nZW50OwpsYXlvdXQobG9jYXRpb24gPSA0KSBpbiB2ZWMzIGFCaXRhbmdlbnQ7CgpvdXQgdmVjMiBUZXhDb29yZHM7Cm91dCB2ZWMzIEZyYWdQb3M7Cm91dCBtYXQzIFRCTjsKCnVuaWZvcm0gbWF0NCBtb2RlbDsKdW5pZm9ybSBtYXQ0IHZpZXc7CnVuaWZvcm0gbWF0NCBwcm9qZWN0aW9uOwoKdm9pZCBtYWluKCkKewogICAgRnJhZ1BvcyA9IHZlYzMobW9kZWwgKiB2ZWM0KGFQb3MsIDEuMCkpOwogICAgVGV4Q29vcmRzID0gYVRleENvb3JkczsKICAgIAogICAgbWF0MyBub3JtYWxNYXRyaXggPSB0cmFuc3Bvc2UoaW52ZXJzZShtYXQzKG1vZGVsKSkpOwogICAgdmVjMyBUID0gbm9ybWFsaXplKG5vcm1hbE1hdHJpeCAqIGFUYW5nZW50KTsKICAgIHZlYzMgQiA9IG5vcm1hbGl6ZShub3JtYWxNYXRyaXggKiBhQml0YW5nZW50KTsKICAgIHZlYzMgTiA9IG5vcm1hbGl6ZShub3JtYWxNYXRyaXggKiBhTm9ybWFsKTsKICAgIFRCTiA9IG1hdDMoVCwgQiwgTik7CiAgICAKICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbiAqIHZpZXcgKiB2ZWM0KEZyYWdQb3MsIDEuMCk7Cn0KCi8vIEZyYWdtZW50IFNoYWRlcgojdmVyc2lvbiAzMzAgY29yZQpvdXQgdmVjNCBGcmFnQ29sb3I7CgppbiB2ZWMyIFRleENvb3JkczsKaW4gdmVjMyBGcmFnUG9zOwppbiBtYXQzIFRCTjsKCnVuaWZvcm0gc2FtcGxlcjJEIG5vcm1hbE1hcDsKdW5pZm9ybSB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIHZlYzMgdmlld1BvczsKdW5pZm9ybSB2ZWMzIGxpZ2h0Q29sb3I7CnVuaWZvcm0gdmVjMyBvYmplY3RDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIHZlYzMgbm9ybWFsID0gdGV4dHVyZShub3JtYWxNYXAsIFRleENvb3JkcykucmdiOwogICAgbm9ybWFsID0gbm9ybWFsaXplKG5vcm1hbCAqIDIuMCAtIDEuMCk7ICAgCiAgICBub3JtYWwgPSBub3JtYWxpemUoVEJOICogbm9ybWFsKTsgIAogICAgCiAgICAvLyBBbWJpZW50CiAgICBmbG9hdCBhbWJpZW50U3RyZW5ndGggPSAwLjE7CiAgICB2ZWMzIGFtYmllbnQgPSBhbWJpZW50U3RyZW5ndGggKiBsaWdodENvbG9yOwogICAgCiAgICAvLyBEaWZmdXNlIAogICAgdmVjMyBsaWdodERpciA9IG5vcm1hbGl6ZShsaWdodFBvcyAtIEZyYWdQb3MpOwogICAgZmxvYXQgZGlmZiA9IG1heChkb3Qobm9ybWFsLCBsaWdodERpciksIDAuMCk7CiAgICB2ZWMzIGRpZmZ1c2UgPSBkaWZmICogbGlnaHRDb2xvcjsKICAgIAogICAgLy8gU3BlY3VsYXIKICAgIGZsb2F0IHNwZWN1bGFyU3RyZW5ndGggPSAwLjU7CiAgICB2ZWMzIHZpZXdEaXIgPSBub3JtYWxpemUodmlld1BvcyAtIEZyYWdQb3MpOwogICAgdmVjMyByZWZsZWN0RGlyID0gcmVmbGVjdCgtbGlnaHREaXIsIG5vcm1hbCk7ICAKICAgIGZsb2F0IHNwZWMgPSBwb3cobWF4KGRvdCh2aWV3RGlyLCByZWZsZWN0RGlyKSwgMC4wKSwgMzIpOwogICAgdmVjMyBzcGVjdWxhciA9IHNwZWN1bGFyU3RyZW5ndGggKiBzcGVjICogbGlnaHRDb2xvcjsgIAogICAgCiAgICB2ZWMzIHJlc3VsdCA9IChhbWJpZW50ICsgZGlmZnVzZSArIHNwZWN1bGFyKSAqIG9iamVjdENvbG9yOwogICAgRnJhZ0NvbG9yID0gdmVjNChyZXN1bHQsIDEuMCk7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Vertex Shader
#version 330 core
layout(location = 0) in vec3 aPos;
layout(location = 1) in vec3 aNormal;
layout(location = 2) in vec2 aTexCoords;
layout(location = 3) in vec3 aTangent;
layout(location = 4) in vec3 aBitangent;

out vec2 TexCoords;
out vec3 FragPos;
out mat3 TBN;

uniform mat4 model;
uniform mat4 view;
uniform mat4 projection;

void main()
{
    FragPos = vec3(model * vec4(aPos, 1.0));
    TexCoords = aTexCoords;
    
    mat3 normalMatrix = transpose(inverse(mat3(model)));
    vec3 T = normalize(normalMatrix * aTangent);
    vec3 B = normalize(normalMatrix * aBitangent);
    vec3 N = normalize(normalMatrix * aNormal);
    TBN = mat3(T, B, N);
    
    gl_Position = projection * view * vec4(FragPos, 1.0);
}

// Fragment Shader
#version 330 core
out vec4 FragColor;

in vec2 TexCoords;
in vec3 FragPos;
in mat3 TBN;

uniform sampler2D normalMap;
uniform vec3 lightPos;
uniform vec3 viewPos;
uniform vec3 lightColor;
uniform vec3 objectColor;

void main()
{
    vec3 normal = texture(normalMap, TexCoords).rgb;
    normal = normalize(normal * 2.0 - 1.0);   
    normal = normalize(TBN * normal);  
    
    // Ambient
    float ambientStrength = 0.1;
    vec3 ambient = ambientStrength * lightColor;
    
    // Diffuse 
    vec3 lightDir = normalize(lightPos - FragPos);
    float diff = max(dot(normal, lightDir), 0.0);
    vec3 diffuse = diff * lightColor;
    
    // Specular
    float specularStrength = 0.5;
    vec3 viewDir = normalize(viewPos - FragPos);
    vec3 reflectDir = reflect(-lightDir, normal);  
    float spec = pow(max(dot(viewDir, reflectDir), 0.0), 32);
    vec3 specular = specularStrength * spec * lightColor;  
    
    vec3 result = (ambient + diffuse + specular) * objectColor;
    FragColor = vec4(result, 1.0);
}</pre></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>TBN Matrix</strong>: Transforms normals from tangent space to world space.</li>
<li><strong>Normal Map</strong>: A texture that stores normal vectors.</li>
</ul>
</div><h1>Parallax Mapping</h1>
<div class='content'><p>Parallax mapping simulates depth by offsetting texture coordinates.</p>
</div><h2>Example Code</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRnJhZ21lbnQgU2hhZGVyCiN2ZXJzaW9uIDMzMCBjb3JlCm91dCB2ZWM0IEZyYWdDb2xvcjsKCmluIHZlYzIgVGV4Q29vcmRzOwppbiB2ZWMzIEZyYWdQb3M7CmluIG1hdDMgVEJOOwoKdW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsTWFwOwp1bmlmb3JtIHNhbXBsZXIyRCBoZWlnaHRNYXA7CnVuaWZvcm0gdmVjMyBsaWdodFBvczsKdW5pZm9ybSB2ZWMzIHZpZXdQb3M7CnVuaWZvcm0gdmVjMyBsaWdodENvbG9yOwp1bmlmb3JtIHZlYzMgb2JqZWN0Q29sb3I7Cgp2ZWMyIFBhcmFsbGF4TWFwcGluZyh2ZWMyIHRleENvb3JkcywgdmVjMyB2aWV3RGlyKQp7CiAgICBmbG9hdCBoZWlnaHQgPSB0ZXh0dXJlKGhlaWdodE1hcCwgdGV4Q29vcmRzKS5yOyAgICAKICAgIGZsb2F0IHNjYWxlID0gMC4xOyAvLyBBZGp1c3QgdGhpcyB2YWx1ZSB0byBjb250cm9sIHRoZSBkZXB0aCBlZmZlY3QKICAgIHZlYzIgcCA9IHZpZXdEaXIueHkgKiAoaGVpZ2h0ICogc2NhbGUpOwogICAgcmV0dXJuIHRleENvb3JkcyAtIHA7Cn0KCnZvaWQgbWFpbigpCnsKICAgIHZlYzMgdmlld0RpciA9IG5vcm1hbGl6ZShUQk4gKiAodmlld1BvcyAtIEZyYWdQb3MpKTsKICAgIHZlYzIgdGV4Q29vcmRzID0gUGFyYWxsYXhNYXBwaW5nKFRleENvb3Jkcywgdmlld0Rpcik7CiAgICAKICAgIHZlYzMgbm9ybWFsID0gdGV4dHVyZShub3JtYWxNYXAsIHRleENvb3JkcykucmdiOwogICAgbm9ybWFsID0gbm9ybWFsaXplKG5vcm1hbCAqIDIuMCAtIDEuMCk7ICAgCiAgICBub3JtYWwgPSBub3JtYWxpemUoVEJOICogbm9ybWFsKTsgIAogICAgCiAgICAvLyBBbWJpZW50CiAgICBmbG9hdCBhbWJpZW50U3RyZW5ndGggPSAwLjE7CiAgICB2ZWMzIGFtYmllbnQgPSBhbWJpZW50U3RyZW5ndGggKiBsaWdodENvbG9yOwogICAgCiAgICAvLyBEaWZmdXNlIAogICAgdmVjMyBsaWdodERpciA9IG5vcm1hbGl6ZShsaWdodFBvcyAtIEZyYWdQb3MpOwogICAgZmxvYXQgZGlmZiA9IG1heChkb3Qobm9ybWFsLCBsaWdodERpciksIDAuMCk7CiAgICB2ZWMzIGRpZmZ1c2UgPSBkaWZmICogbGlnaHRDb2xvcjsKICAgIAogICAgLy8gU3BlY3VsYXIKICAgIGZsb2F0IHNwZWN1bGFyU3RyZW5ndGggPSAwLjU7CiAgICB2ZWMzIHJlZmxlY3REaXIgPSByZWZsZWN0KC1saWdodERpciwgbm9ybWFsKTsgIAogICAgZmxvYXQgc3BlYyA9IHBvdyhtYXgoZG90KHZpZXdEaXIsIHJlZmxlY3REaXIpLCAwLjApLCAzMik7CiAgICB2ZWMzIHNwZWN1bGFyID0gc3BlY3VsYXJTdHJlbmd0aCAqIHNwZWMgKiBsaWdodENvbG9yOyAgCiAgICAKICAgIHZlYzMgcmVzdWx0ID0gKGFtYmllbnQgKyBkaWZmdXNlICsgc3BlY3VsYXIpICogb2JqZWN0Q29sb3I7CiAgICBGcmFnQ29sb3IgPSB2ZWM0KHJlc3VsdCwgMS4wKTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Fragment Shader
#version 330 core
out vec4 FragColor;

in vec2 TexCoords;
in vec3 FragPos;
in mat3 TBN;

uniform sampler2D normalMap;
uniform sampler2D heightMap;
uniform vec3 lightPos;
uniform vec3 viewPos;
uniform vec3 lightColor;
uniform vec3 objectColor;

vec2 ParallaxMapping(vec2 texCoords, vec3 viewDir)
{
    float height = texture(heightMap, texCoords).r;    
    float scale = 0.1; // Adjust this value to control the depth effect
    vec2 p = viewDir.xy * (height * scale);
    return texCoords - p;
}

void main()
{
    vec3 viewDir = normalize(TBN * (viewPos - FragPos));
    vec2 texCoords = ParallaxMapping(TexCoords, viewDir);
    
    vec3 normal = texture(normalMap, texCoords).rgb;
    normal = normalize(normal * 2.0 - 1.0);   
    normal = normalize(TBN * normal);  
    
    // Ambient
    float ambientStrength = 0.1;
    vec3 ambient = ambientStrength * lightColor;
    
    // Diffuse 
    vec3 lightDir = normalize(lightPos - FragPos);
    float diff = max(dot(normal, lightDir), 0.0);
    vec3 diffuse = diff * lightColor;
    
    // Specular
    float specularStrength = 0.5;
    vec3 reflectDir = reflect(-lightDir, normal);  
    float spec = pow(max(dot(viewDir, reflectDir), 0.0), 32);
    vec3 specular = specularStrength * spec * lightColor;  
    
    vec3 result = (ambient + diffuse + specular) * objectColor;
    FragColor = vec4(result, 1.0);
}</pre></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Height Map</strong>: A texture that stores height information.</li>
<li><strong>Parallax Mapping Function</strong>: Adjusts texture coordinates based on view direction and height.</li>
</ul>
</div><h1>Physically Based Rendering (PBR)</h1>
<div class='content'><p>PBR aims to achieve more realistic rendering by simulating the physical properties of materials.</p>
</div><h2>Key Components</h2>
<div class='content'><ul>
<li><strong>Albedo</strong>: Base color of the material.</li>
<li><strong>Metallic</strong>: Determines if the material is metallic.</li>
<li><strong>Roughness</strong>: Controls the smoothness of the surface.</li>
<li><strong>Ambient Occlusion</strong>: Simulates shadowing in crevices.</li>
</ul>
</div><h2>Example Code</h2>
<div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("Ly8gRnJhZ21lbnQgU2hhZGVyCiN2ZXJzaW9uIDMzMCBjb3JlCm91dCB2ZWM0IEZyYWdDb2xvcjsKCmluIHZlYzIgVGV4Q29vcmRzOwppbiB2ZWMzIEZyYWdQb3M7CmluIHZlYzMgTm9ybWFsOwoKdW5pZm9ybSBzYW1wbGVyMkQgYWxiZWRvTWFwOwp1bmlmb3JtIHNhbXBsZXIyRCBtZXRhbGxpY01hcDsKdW5pZm9ybSBzYW1wbGVyMkQgcm91Z2huZXNzTWFwOwp1bmlmb3JtIHNhbXBsZXIyRCBhb01hcDsKdW5pZm9ybSB2ZWMzIGxpZ2h0UG9zOwp1bmlmb3JtIHZlYzMgdmlld1BvczsKCmNvbnN0IGZsb2F0IFBJID0gMy4xNDE1OTI2NTM1OTsKCnZlYzMgZnJlc25lbFNjaGxpY2soZmxvYXQgY29zVGhldGEsIHZlYzMgRjApCnsKICAgIHJldHVybiBGMCArICgxLjAgLSBGMCkgKiBwb3coMS4wIC0gY29zVGhldGEsIDUuMCk7Cn0KCnZvaWQgbWFpbigpCnsKICAgIHZlYzMgYWxiZWRvID0gdGV4dHVyZShhbGJlZG9NYXAsIFRleENvb3JkcykucmdiOwogICAgZmxvYXQgbWV0YWxsaWMgPSB0ZXh0dXJlKG1ldGFsbGljTWFwLCBUZXhDb29yZHMpLnI7CiAgICBmbG9hdCByb3VnaG5lc3MgPSB0ZXh0dXJlKHJvdWdobmVzc01hcCwgVGV4Q29vcmRzKS5yOwogICAgZmxvYXQgYW8gPSB0ZXh0dXJlKGFvTWFwLCBUZXhDb29yZHMpLnI7CiAgICAKICAgIHZlYzMgTiA9IG5vcm1hbGl6ZShOb3JtYWwpOwogICAgdmVjMyBWID0gbm9ybWFsaXplKHZpZXdQb3MgLSBGcmFnUG9zKTsKICAgIHZlYzMgTCA9IG5vcm1hbGl6ZShsaWdodFBvcyAtIEZyYWdQb3MpOwogICAgdmVjMyBIID0gbm9ybWFsaXplKFYgKyBMKTsKICAgIAogICAgdmVjMyBGMCA9IHZlYzMoMC4wNCk7IAogICAgRjAgPSBtaXgoRjAsIGFsYmVkbywgbWV0YWxsaWMpOwogICAgCiAgICB2ZWMzIEYgPSBmcmVzbmVsU2NobGljayhtYXgoZG90KEgsIFYpLCAwLjApLCBGMCk7CiAgICBmbG9hdCBOREYgPSBEaXN0cmlidXRpb25HR1goTiwgSCwgcm91Z2huZXNzKTsKICAgIGZsb2F0IEcgPSBHZW9tZXRyeVNtaXRoKE4sIFYsIEwsIHJvdWdobmVzcyk7CiAgICAKICAgIHZlYzMgbnVtZXJhdG9yID0gTkRGICogRyAqIEY7CiAgICBmbG9hdCBkZW5vbWluYXRvciA9IDQuMCAqIG1heChkb3QoTiwgViksIDAuMCkgKiBtYXgoZG90KE4sIEwpLCAwLjApICsgMC4wMDE7CiAgICB2ZWMzIHNwZWN1bGFyID0gbnVtZXJhdG9yIC8gZGVub21pbmF0b3I7CiAgICAKICAgIHZlYzMga1MgPSBGOwogICAgdmVjMyBrRCA9IHZlYzMoMS4wKSAtIGtTOwogICAga0QgKj0gMS4wIC0gbWV0YWxsaWM7CiAgICAKICAgIGZsb2F0IE5kb3RMID0gbWF4KGRvdChOLCBMKSwgMC4wKTsKICAgIHZlYzMgTG8gPSAoa0QgKiBhbGJlZG8gLyBQSSArIHNwZWN1bGFyKSAqIGxpZ2h0Q29sb3IgKiBOZG90TDsKICAgIAogICAgdmVjMyBhbWJpZW50ID0gdmVjMygwLjAzKSAqIGFsYmVkbyAqIGFvOwogICAgdmVjMyBjb2xvciA9IGFtYmllbnQgKyBMbzsKICAgIAogICAgRnJhZ0NvbG9yID0gdmVjNChjb2xvciwgMS4wKTsKfQ=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>// Fragment Shader
#version 330 core
out vec4 FragColor;

in vec2 TexCoords;
in vec3 FragPos;
in vec3 Normal;

uniform sampler2D albedoMap;
uniform sampler2D metallicMap;
uniform sampler2D roughnessMap;
uniform sampler2D aoMap;
uniform vec3 lightPos;
uniform vec3 viewPos;

const float PI = 3.14159265359;

vec3 fresnelSchlick(float cosTheta, vec3 F0)
{
    return F0 + (1.0 - F0) * pow(1.0 - cosTheta, 5.0);
}

void main()
{
    vec3 albedo = texture(albedoMap, TexCoords).rgb;
    float metallic = texture(metallicMap, TexCoords).r;
    float roughness = texture(roughnessMap, TexCoords).r;
    float ao = texture(aoMap, TexCoords).r;
    
    vec3 N = normalize(Normal);
    vec3 V = normalize(viewPos - FragPos);
    vec3 L = normalize(lightPos - FragPos);
    vec3 H = normalize(V + L);
    
    vec3 F0 = vec3(0.04); 
    F0 = mix(F0, albedo, metallic);
    
    vec3 F = fresnelSchlick(max(dot(H, V), 0.0), F0);
    float NDF = DistributionGGX(N, H, roughness);
    float G = GeometrySmith(N, V, L, roughness);
    
    vec3 numerator = NDF * G * F;
    float denominator = 4.0 * max(dot(N, V), 0.0) * max(dot(N, L), 0.0) + 0.001;
    vec3 specular = numerator / denominator;
    
    vec3 kS = F;
    vec3 kD = vec3(1.0) - kS;
    kD *= 1.0 - metallic;
    
    float NdotL = max(dot(N, L), 0.0);
    vec3 Lo = (kD * albedo / PI + specular) * lightColor * NdotL;
    
    vec3 ambient = vec3(0.03) * albedo * ao;
    vec3 color = ambient + Lo;
    
    FragColor = vec4(color, 1.0);
}</pre></div><h2>Explanation</h2>
<div class='content'><ul>
<li><strong>Fresnel-Schlick Approximation</strong>: Calculates the reflection at different angles.</li>
<li><strong>DistributionGGX</strong>: Determines the distribution of microfacets.</li>
<li><strong>GeometrySmith</strong>: Models the shadowing and masking of microfacets.</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>Advanced shading techniques in OpenGL, such as Phong Shading, Blinn-Phong Shading, Normal Mapping, Parallax Mapping, and Physically Based Rendering, enable the creation of highly realistic and detailed graphics. Understanding and implementing these techniques can significantly enhance the visual quality of your applications. By mastering these advanced shading methods, you can push the boundaries of what is possible in real-time rendering.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='framebuffers-and-renderbuffers'>&#x25C4;Framebuffers and Renderbuffers</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Advanced Shading Techniques</a>
	</div>
	<div class='col-4 text-end'>
					<a href='shadow-mapping'>Shadow Mapping &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Entès!</a>
    <a href="/cookies">Més informació</a>
</div>	

	</div>    
</body>
</html>
