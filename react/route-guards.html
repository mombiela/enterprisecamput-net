<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Route Guards in React</title>

    <link rel="alternate" href="https://campusempresa.com/react/route-guards" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/react/route-guards" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/react/route-guards" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/react/route-guards" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/react/route-guards" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='programmatic-navigation'>&#x25C4;Programmatic Navigation</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Route Guards in React</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-hooks'>Introduction to Hooks &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to Route Guards</h1>
<div class='content'><p>Route guards are mechanisms used to control access to certain routes in a web application. In React, route guards help ensure that users can only access specific routes if they meet certain conditions, such as being authenticated or having specific permissions.</p>
</div><h1>Why Use Route Guards?</h1>
<div class='content'><ul>
<li><strong>Security</strong>: Protect sensitive routes from unauthorized access.</li>
<li><strong>User Experience</strong>: Redirect users to appropriate pages based on their status (e.g., login page if not authenticated).</li>
<li><strong>Control</strong>: Manage access to different parts of the application based on user roles or other criteria.</li>
</ul>
</div><h1>Implementing Route Guards in React</h1>
<div class='content'></div><h2>Prerequisites</h2>
<div class='content'><p>Before implementing route guards, ensure you have the following:</p>
<ul>
<li>Basic understanding of React and React Router.</li>
<li>A React application set up with <code>react-router-dom</code> installed.</li>
</ul>
</div><h2>Basic Route Guard Example</h2>
<div class='content'><p>Let's start with a simple example where we protect a route based on user authentication.</p>
<ol>
<li>
<p><strong>Install <code>react-router-dom</code></strong>:</p>
<pre><code class="language-sh">npm install react-router-dom
</code></pre>
</li>
<li>
<p><strong>Create a simple authentication context</strong>:</p>
<pre><code class="language-jsx">// AuthContext.js
import React, { createContext, useState, useContext } from 'react';

const AuthContext = createContext();

export const AuthProvider = ({ children }) =&gt; {
    const [isAuthenticated, setIsAuthenticated] = useState(false);

    const login = () =&gt; setIsAuthenticated(true);
    const logout = () =&gt; setIsAuthenticated(false);

    return (
        &lt;AuthContext.Provider value={{ isAuthenticated, login, logout }}&gt;
            {children}
        &lt;/AuthContext.Provider&gt;
    );
};

export const useAuth = () =&gt; useContext(AuthContext);
</code></pre>
</li>
<li>
<p><strong>Create a PrivateRoute component</strong>:</p>
<pre><code class="language-jsx">// PrivateRoute.js
import React from 'react';
import { Route, Redirect } from 'react-router-dom';
import { useAuth } from './AuthContext';

const PrivateRoute = ({ component: Component, ...rest }) =&gt; {
    const { isAuthenticated } = useAuth();

    return (
        &lt;Route
            {...rest}
            render={props =&gt;
                isAuthenticated ? (
                    &lt;Component {...props} /&gt;
                ) : (
                    &lt;Redirect to=&quot;/login&quot; /&gt;
                )
            }
        /&gt;
    );
};

export default PrivateRoute;
</code></pre>
</li>
<li>
<p><strong>Set up routes in your application</strong>:</p>
<pre><code class="language-jsx">// App.js
import React from 'react';
import { BrowserRouter as Router, Route, Switch } from 'react-router-dom';
import { AuthProvider } from './AuthContext';
import PrivateRoute from './PrivateRoute';
import HomePage from './HomePage';
import LoginPage from './LoginPage';
import Dashboard from './Dashboard';

const App = () =&gt; {
    return (
        &lt;AuthProvider&gt;
            &lt;Router&gt;
                &lt;Switch&gt;
                    &lt;Route path=&quot;/login&quot; component={LoginPage} /&gt;
                    &lt;PrivateRoute path=&quot;/dashboard&quot; component={Dashboard} /&gt;
                    &lt;Route path=&quot;/&quot; component={HomePage} /&gt;
                &lt;/Switch&gt;
            &lt;/Router&gt;
        &lt;/AuthProvider&gt;
    );
};

export default App;
</code></pre>
</li>
</ol>
</div><h2>Advanced Route Guards</h2>
<div class='content'><p>For more complex scenarios, you might need to check user roles or permissions.</p>
<ol>
<li>
<p><strong>Extend the AuthContext to include roles</strong>:</p>
<pre><code class="language-jsx">// AuthContext.js
const AuthProvider = ({ children }) =&gt; {
    const [isAuthenticated, setIsAuthenticated] = useState(false);
    const [userRole, setUserRole] = useState(null);

    const login = (role) =&gt; {
        setIsAuthenticated(true);
        setUserRole(role);
    };
    const logout = () =&gt; {
        setIsAuthenticated(false);
        setUserRole(null);
    };

    return (
        &lt;AuthContext.Provider value={{ isAuthenticated, userRole, login, logout }}&gt;
            {children}
        &lt;/AuthContext.Provider&gt;
    );
};
</code></pre>
</li>
<li>
<p><strong>Create a RoleBasedRoute component</strong>:</p>
<pre><code class="language-jsx">// RoleBasedRoute.js
import React from 'react';
import { Route, Redirect } from 'react-router-dom';
import { useAuth } from './AuthContext';

const RoleBasedRoute = ({ component: Component, requiredRole, ...rest }) =&gt; {
    const { isAuthenticated, userRole } = useAuth();

    return (
        &lt;Route
            {...rest}
            render={props =&gt;
                isAuthenticated &amp;&amp; userRole === requiredRole ? (
                    &lt;Component {...props} /&gt;
                ) : (
                    &lt;Redirect to=&quot;/unauthorized&quot; /&gt;
                )
            }
        /&gt;
    );
};

export default RoleBasedRoute;
</code></pre>
</li>
<li>
<p><strong>Set up role-based routes in your application</strong>:</p>
<pre><code class="language-jsx">// App.js
import React from 'react';
import { BrowserRouter as Router, Route, Switch } from 'react-router-dom';
import { AuthProvider } from './AuthContext';
import RoleBasedRoute from './RoleBasedRoute';
import HomePage from './HomePage';
import LoginPage from './LoginPage';
import AdminDashboard from './AdminDashboard';
import UserDashboard from './UserDashboard';
import UnauthorizedPage from './UnauthorizedPage';

const App = () =&gt; {
    return (
        &lt;AuthProvider&gt;
            &lt;Router&gt;
                &lt;Switch&gt;
                    &lt;Route path=&quot;/login&quot; component={LoginPage} /&gt;
                    &lt;RoleBasedRoute path=&quot;/admin&quot; component={AdminDashboard} requiredRole=&quot;admin&quot; /&gt;
                    &lt;RoleBasedRoute path=&quot;/user&quot; component={UserDashboard} requiredRole=&quot;user&quot; /&gt;
                    &lt;Route path=&quot;/unauthorized&quot; component={UnauthorizedPage} /&gt;
                    &lt;Route path=&quot;/&quot; component={HomePage} /&gt;
                &lt;/Switch&gt;
            &lt;/Router&gt;
        &lt;/AuthProvider&gt;
    );
};

export default App;
</code></pre>
</li>
</ol>
</div><h1>Conclusion</h1>
<div class='content'><p>Route guards are essential for controlling access to different parts of your React application. By using route guards, you can ensure that only authorized users can access certain routes, enhancing both security and user experience. Whether you need simple authentication checks or more complex role-based access control, React and <code>react-router-dom</code> provide the tools necessary to implement effective route guards.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='programmatic-navigation'>&#x25C4;Programmatic Navigation</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Route Guards in React</a>
	</div>
	<div class='col-4 text-end'>
					<a href='introduction-to-hooks'>Introduction to Hooks &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
