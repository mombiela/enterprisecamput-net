<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing Components with React Testing Library</title>

    <link rel="alternate" href="https://campusempresa.com/react/testing-components-with-react-testing-library" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/react/testing-components-with-react-testing-library" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/react/testing-components-with-react-testing-library" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/react/testing-components-with-react-testing-library" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/react/testing-components-with-react-testing-library" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing-with-jest'>&#x25C4;Unit Testing with Jest</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Testing Components with React Testing Library</a>
	</div>
	<div class='col-4 text-end'>
					<a href='end-to-end-testing-with-cypress'>End-to-End Testing with Cypress &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction to React Testing Library</h1>
<div class='content'><p>React Testing Library (RTL) is a popular testing utility for React applications. It focuses on testing components from the user's perspective, ensuring that your tests are more reliable and maintainable.</p>
<ul>
<li><strong>Key Concepts:</strong>
<ul>
<li><strong>User-centric Testing:</strong> RTL encourages testing components as a user would interact with them.</li>
<li><strong>Queries:</strong> RTL provides various query methods to find elements in the DOM.</li>
<li><strong>Assertions:</strong> Using assertions to verify the expected outcomes.</li>
</ul>
</li>
</ul>
</div><h1>Setting Up React Testing Library</h1>
<div class='content'><p>To start using RTL, you need to install it and set up your testing environment.</p>
<ul>
<li>
<p><strong>Installation:</strong></p>
<pre><code class="language-bash">npm install --save-dev @testing-library/react @testing-library/jest-dom
</code></pre>
</li>
<li>
<p><strong>Configuration:</strong>
Ensure you have Jest configured, as RTL works seamlessly with Jest. Create a <code>setupTests.js</code> file to include custom configurations if needed.</p>
<pre><code class="language-javascript">// setupTests.js
import '@testing-library/jest-dom/extend-expect';
</code></pre>
</li>
</ul>
</div><h1>Writing Your First Test</h1>
<div class='content'><p>Let's write a simple test for a React component using RTL.</p>
<ul>
<li>
<p><strong>Example Component:</strong></p>
<pre><code class="language-javascript">// Greeting.js
import React from 'react';

const Greeting = ({ name }) =&gt; {
  return &lt;h1&gt;Hello, {name}!&lt;/h1&gt;;
};

export default Greeting;
</code></pre>
</li>
<li>
<p><strong>Test for the Component:</strong></p>
<pre><code class="language-javascript">// Greeting.test.js
import React from 'react';
import { render, screen } from '@testing-library/react';
import Greeting from './Greeting';

test('renders greeting message', () =&gt; {
  render(&lt;Greeting name=&quot;John&quot; /&gt;);
  const greetingElement = screen.getByText(/hello, john!/i);
  expect(greetingElement).toBeInTheDocument();
});
</code></pre>
<p><strong>Explanation:</strong></p>
<ul>
<li><code>render</code>: Renders the component into the virtual DOM.</li>
<li><code>screen.getByText</code>: Finds an element by its text content.</li>
<li><code>expect</code>: Asserts that the element is in the document.</li>
</ul>
</li>
</ul>
</div><h1>Common Queries in React Testing Library</h1>
<div class='content'><p>RTL provides several query methods to find elements in the DOM.</p>
<ul>
<li>
<p><strong>Types of Queries:</strong></p>
<ul>
<li><code>getBy</code>: Throws an error if no element is found.</li>
<li><code>queryBy</code>: Returns <code>null</code> if no element is found.</li>
<li><code>findBy</code>: Returns a promise and waits for the element to appear.</li>
</ul>
</li>
<li>
<p><strong>Examples:</strong></p>
<pre><code class="language-javascript">// ExampleComponent.js
import React from 'react';

const ExampleComponent = () =&gt; (
  &lt;div&gt;
    &lt;button&gt;Click me&lt;/button&gt;
    &lt;input placeholder=&quot;Enter text&quot; /&gt;
  &lt;/div&gt;
);

export default ExampleComponent;
</code></pre>
<pre><code class="language-javascript">// ExampleComponent.test.js
import React from 'react';
import { render, screen } from '@testing-library/react';
import ExampleComponent from './ExampleComponent';

test('finds elements by text, role, and placeholder', () =&gt; {
  render(&lt;ExampleComponent /&gt;);

  const buttonElement = screen.getByText(/click me/i);
  expect(buttonElement).toBeInTheDocument();

  const inputElement = screen.getByPlaceholderText(/enter text/i);
  expect(inputElement).toBeInTheDocument();
});
</code></pre>
</li>
</ul>
</div><h1>Advanced Testing Techniques</h1>
<div class='content'><p>As you advance, you might need to test more complex interactions and state changes.</p>
<ul>
<li>
<p><strong>Testing User Events:</strong></p>
<pre><code class="language-javascript">// Counter.js
import React, { useState } from 'react';

const Counter = () =&gt; {
  const [count, setCount] = useState(0);
  return (
    &lt;div&gt;
      &lt;p&gt;Count: {count}&lt;/p&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;Increment&lt;/button&gt;
    &lt;/div&gt;
  );
};

export default Counter;
</code></pre>
<pre><code class="language-javascript">// Counter.test.js
import React from 'react';
import { render, screen, fireEvent } from '@testing-library/react';
import Counter from './Counter';

test('increments counter', () =&gt; {
  render(&lt;Counter /&gt;);

  const buttonElement = screen.getByText(/increment/i);
  fireEvent.click(buttonElement);

  const countElement = screen.getByText(/count: 1/i);
  expect(countElement).toBeInTheDocument();
});
</code></pre>
<p><strong>Explanation:</strong></p>
<ul>
<li><code>fireEvent.click</code>: Simulates a click event on the button.</li>
</ul>
</li>
</ul>
</div><h1>Mocking API Calls</h1>
<div class='content'><p>Sometimes, you need to test components that make API calls. You can mock these calls using Jest.</p>
<ul>
<li>
<p><strong>Example with Mocking:</strong></p>
<pre><code class="language-javascript">// FetchData.js
import React, { useEffect, useState } from 'react';

const FetchData = () =&gt; {
  const [data, setData] = useState(null);

  useEffect(() =&gt; {
    fetch('/api/data')
      .then(response =&gt; response.json())
      .then(data =&gt; setData(data));
  }, []);

  if (!data) return &lt;div&gt;Loading...&lt;/div&gt;;
  return &lt;div&gt;Data: {data}&lt;/div&gt;;
};

export default FetchData;
</code></pre>
<pre><code class="language-javascript">// FetchData.test.js
import React from 'react';
import { render, screen, waitFor } from '@testing-library/react';
import FetchData from './FetchData';

beforeAll(() =&gt; {
  global.fetch = jest.fn(() =&gt;
    Promise.resolve({
      json: () =&gt; Promise.resolve('mock data'),
    })
  );
});

test('fetches and displays data', async () =&gt; {
  render(&lt;FetchData /&gt;);

  await waitFor(() =&gt; screen.getByText(/data: mock data/i));
  expect(screen.getByText(/data: mock data/i)).toBeInTheDocument();
});
</code></pre>
<p><strong>Explanation:</strong></p>
<ul>
<li><code>global.fetch</code>: Mocks the global <code>fetch</code> function.</li>
<li><code>waitFor</code>: Waits for the asynchronous operation to complete.</li>
</ul>
</li>
</ul>
</div><h1>Conclusion</h1>
<div class='content'><p>React Testing Library is a powerful tool for testing React components. By focusing on user interactions and outcomes, it helps create more reliable and maintainable tests. As you become more comfortable with RTL, you can explore advanced techniques like mocking API calls and testing complex interactions to ensure your application works as expected.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='unit-testing-with-jest'>&#x25C4;Unit Testing with Jest</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Testing Components with React Testing Library</a>
	</div>
	<div class='col-4 text-end'>
					<a href='end-to-end-testing-with-cypress'>End-to-End Testing with Cypress &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
