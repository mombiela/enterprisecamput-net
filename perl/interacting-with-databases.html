<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interacting with Databases</title>

    <link rel="alternate" href="https://campusempresa.com/perl/interacting-with-databases" hreflang="es" />
	<link rel="alternate" href="https://campusempresa.cat/perl/interacting-with-databases" hreflang="ca" />
	<link rel="alternate" href="https://enterprisecampus.net/perl/interacting-with-databases" hreflang="en" />
    
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<link href="/css/site.css" rel="stylesheet">
	
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  	<script type="text/javascript" src="js/math_init.js"></script>
  	<script type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js"></script>
  	<script type="text/javascript" src="/js/cookie.js"></script>
  	<script type="text/javascript" src="/js/main.js"></script>
</head>

<body>
    <div id="content">
		<div id="header" class="container-xxl">
	<div class="row">
		<div class="col-8 p-0">
			<h1 class="m-0 p-0">
				<a href="/"><img src="/img/logo_header.png" style="visibility:hiddenxx;"></a>
			</h1>
		</div>
		<div class="col-4 p-0 text-end">
			<h2 id="main_title"><cite>Building today's and tomorrow's society</cite></h2>
			<h3 id="main_subtitle"></h3>
		</div>
	</div>
</div>
<div class="container-xxl" style="margin-top: -1em;">
	<div class="row">
		<div class="col-12 p-0 m-0 text-end">
													<b id="lit_lang_es" class="px-2">EN</b>
				|
				<a href="https://campusempresa.com/perl/interacting-with-databases" class="px-2">ES</a></b>
				|
				<a href="https://campusempresa.cat/perl/interacting-with-databases" class="px-2">CA</a>
					</div>
	</div>
</div>
   <div class="top-bar container-fluid">
	<div class="container-xxl">
		<div class="row">
			<div class="col" id="left_menu">
				<a href="/objective">The Project</a>
				<a href="/about">About Us</a>
				<a href="/contribute">Contribute</a>
				<a href="/donate">Donations</a>
				<a href="/licence">License</a>
			</div>
		</div>
	</div>
   </div>

<div class="container-xxl" id="main_content">
	<div class="row">
		<div class="col-12 col-lg-8">
			<div id="nav1" class="navigation"></div>
			<div id="inner_content"><div class='row navigation'>
	<div class='col-4'>
					<a href='advanced-regular-expressions'>&#x25C4;Advanced Regular Expressions</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Interacting with Databases</a>
	</div>
	<div class='col-4 text-end'>
					<a href='web-programming-with-perl'>Web Programming with Perl &#x25BA;</a>
			</div>
</div>
<div class='content'></div><h1>Introduction</h1>
<div class='content'><p>Interacting with databases is a crucial skill for any programmer. In this section, we will explore how to connect to, query, and manipulate databases using Perl. We will cover both basic and advanced techniques, ensuring you have a solid understanding of database interactions.</p>
</div><h1>Setting Up the Environment</h1>
<div class='content'><p>Before we dive into database interactions, we need to set up our environment.</p>
<ul>
<li><strong>Install DBI Module</strong>: DBI (Database Interface) is the standard database interface module for Perl.
<pre><code class="language-sh">cpan DBI
</code></pre>
</li>
<li><strong>Install DBD Module</strong>: Depending on the database you are using (e.g., MySQL, PostgreSQL), you will need the appropriate DBD (Database Driver) module.
<pre><code class="language-sh">cpan DBD::mysql
</code></pre>
</li>
</ul>
</div><h1>Connecting to a Database</h1>
<div class='content'><p>To interact with a database, you first need to establish a connection.</p>
<ul>
<li><strong>DBI-&gt;connect</strong>: The <code>connect</code> method is used to establish a connection to the database.
<pre><code class="language-perl">use DBI;

my $dsn = &quot;DBI:mysql:database=testdb;host=localhost&quot;;
my $username = &quot;root&quot;;
my $password = &quot;password&quot;;

my $dbh = DBI-&gt;connect($dsn, $username, $password, {
    RaiseError =&gt; 1,
    AutoCommit =&gt; 1,
}) or die $DBI::errstr;
</code></pre>
</li>
</ul>
</div><h1>Executing SQL Queries</h1>
<div class='content'><p>Once connected, you can execute SQL queries to interact with the database.</p>
<ul>
<li>
<p><strong>SELECT Query</strong>: Fetching data from the database.</p>
<pre><code class="language-perl">my $sth = $dbh-&gt;prepare(&quot;SELECT * FROM users&quot;);
$sth-&gt;execute();

while (my @row = $sth-&gt;fetchrow_array) {
    print &quot;User: $row[0], Email: $row[1]\n&quot;;
}
</code></pre>
</li>
<li>
<p><strong>INSERT Query</strong>: Inserting data into the database.</p>
<pre><code class="language-perl">my $sth = $dbh-&gt;prepare(&quot;INSERT INTO users (name, email) VALUES (?, ?)&quot;);
$sth-&gt;execute('John Doe', 'john.doe@example.com');
</code></pre>
</li>
<li>
<p><strong>UPDATE Query</strong>: Updating existing data in the database.</p>
<pre><code class="language-perl">my $sth = $dbh-&gt;prepare(&quot;UPDATE users SET email = ? WHERE name = ?&quot;);
$sth-&gt;execute('john.new@example.com', 'John Doe');
</code></pre>
</li>
<li>
<p><strong>DELETE Query</strong>: Deleting data from the database.</p>
<pre><code class="language-perl">my $sth = $dbh-&gt;prepare(&quot;DELETE FROM users WHERE name = ?&quot;);
$sth-&gt;execute('John Doe');
</code></pre>
</li>
</ul>
</div><h1>Handling Errors</h1>
<div class='content'><p>Error handling is crucial when interacting with databases to ensure your application can gracefully handle issues.</p>
<ul>
<li><strong>RaiseError</strong>: Automatically raises an error if a DBI method fails.</li>
<li><strong>PrintError</strong>: Prints errors to STDERR if a DBI method fails.</li>
</ul>
<p>Example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("bXkgJGRiaCA9IERCSS0+Y29ubmVjdCgkZHNuLCAkdXNlcm5hbWUsICRwYXNzd29yZCwgewogICAgUmFpc2VFcnJvciA9PiAxLAogICAgUHJpbnRFcnJvciA9PiAwLAogICAgQXV0b0NvbW1pdCA9PiAxLAp9KSBvciBkaWUgJERCSTo6ZXJyc3RyOw=="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>my $dbh = DBI-&gt;connect($dsn, $username, $password, {
    RaiseError =&gt; 1,
    PrintError =&gt; 0,
    AutoCommit =&gt; 1,
}) or die $DBI::errstr;</pre></div><div class='content'></div><h1>Advanced Topics</h1>
<h2>Transactions</h2>
<div class='content'><p>Transactions allow you to execute a series of operations as a single unit of work.</p>
<ul>
<li>
<p><strong>Begin Transaction</strong>: Start a transaction.</p>
<pre><code class="language-perl">$dbh-&gt;begin_work;
</code></pre>
</li>
<li>
<p><strong>Commit Transaction</strong>: Commit the transaction.</p>
<pre><code class="language-perl">$dbh-&gt;commit;
</code></pre>
</li>
<li>
<p><strong>Rollback Transaction</strong>: Rollback the transaction in case of an error.</p>
<pre><code class="language-perl">$dbh-&gt;rollback;
</code></pre>
</li>
</ul>
<p>Example:</p>
</div><div style='position:relative'><a class='copy_button' href='#' onclick='navigator.clipboard.writeText(decodeURIComponent(escape(atob("ZXZhbCB7CiAgICAkZGJoLT5iZWdpbl93b3JrOwogICAgJGRiaC0+ZG8oIklOU0VSVCBJTlRPIHVzZXJzIChuYW1lLCBlbWFpbCkgVkFMVUVTICgnSmFuZSBEb2UnLCAnamFuZS5kb2VAZXhhbXBsZS5jb20nKSIpOwogICAgJGRiaC0+ZG8oIlVQREFURSB1c2VycyBTRVQgZW1haWwgPSAnamFuZS5uZXdAZXhhbXBsZS5jb20nIFdIRVJFIG5hbWUgPSAnSmFuZSBEb2UnIik7CiAgICAkZGJoLT5jb21taXQ7Cn07CmlmICgkQCkgewogICAgd2FybiAiVHJhbnNhY3Rpb24gYWJvcnRlZDogJEAiOwogICAgJGRiaC0+cm9sbGJhY2s7Cn0="))));alert("Copied!");return false;'><i class='bi bi-copy'></i></a><pre class='code'>eval {
    $dbh-&gt;begin_work;
    $dbh-&gt;do(&quot;INSERT INTO users (name, email) VALUES ('Jane Doe', 'jane.doe@example.com')&quot;);
    $dbh-&gt;do(&quot;UPDATE users SET email = 'jane.new@example.com' WHERE name = 'Jane Doe'&quot;);
    $dbh-&gt;commit;
};
if ($@) {
    warn &quot;Transaction aborted: $@&quot;;
    $dbh-&gt;rollback;
}</pre></div><div class='content'></div><h2>Using Placeholders</h2>
<div class='content'><p>Placeholders help prevent SQL injection and make your queries more efficient.</p>
<ul>
<li><strong>Using Placeholders</strong>: Use <code>?</code> as a placeholder in your SQL statements.
<pre><code class="language-perl">my $sth = $dbh-&gt;prepare(&quot;INSERT INTO users (name, email) VALUES (?, ?)&quot;);
$sth-&gt;execute('John Doe', 'john.doe@example.com');
</code></pre>
</li>
</ul>
</div><h1>Summary</h1>
<div class='content'><p>In this section, we covered the basics of interacting with databases using Perl. We learned how to set up the environment, connect to a database, execute various SQL queries, handle errors, and use transactions and placeholders. With these skills, you can efficiently manage database operations in your Perl applications.</p>
</div><div class='row navigation'>
	<div class='col-4'>
					<a href='advanced-regular-expressions'>&#x25C4;Advanced Regular Expressions</a>
			</div>
	<div class='col-4 text-center'>
		<a href="./" class="title">Interacting with Databases</a>
	</div>
	<div class='col-4 text-end'>
					<a href='web-programming-with-perl'>Web Programming with Perl &#x25BA;</a>
			</div>
</div>
</div>
		</div>
		<div class="col-12 col-lg-4 publi" id="div_publi">
			<h1>Advertising</h1>
			<p>This space is reserved for advertising.</p>
			<p>If you want to be a sponsor, contact us to include links in this area: <a href='mailto:admin@campusempresa.cat'>admin@campusempresa.cat</a></p>
			<p>Thank you for collaborating!</p>
		</div>
	</div>
</div>

   <div class="container-xxl my-3">
	<div class="row">
		<div class="col">
			<footer>&copy; Copyright 2024. All rights reserved</footer>
		</div>
	</div>
</div>	

<div id="cookies_adv" style="display:none;">
	Fem servir galetes per millorar la teva experiència d'ús i oferir continguts adaptats als teus interessos
    <a href="#" id="btn_accept_cookies" class="button">Accept</a>
    <a href="/cookies">More Information</a>
</div>	

	</div>    
</body>
</html>
